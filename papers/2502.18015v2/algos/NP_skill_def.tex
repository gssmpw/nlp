
\noindent\hrulefill

\noindent \textbf{Skill Definition} $K$

\begin{itemize}\label{Def:NP}
    \item \textbf{Goal-conditioned Policy} \(\pi\)

    \begin{itemize}

        \item \(\pi = 
            \begin{cases} 
            \text{pre-contact policy, } \pi_\text{pre}(q_\text{obj}, q'_\text{obj}): Q_\text{obj} \times Q_\text{obj} \rightarrow Q_r\\
            \text{post-contact policy, } \pi_\text{post}(s, q'_\text{obj}): S \times Q_\text{obj} \rightarrow A \\
            \text{connector policy, } \pi_C(s, q'_r): S \times Q_r \rightarrow A

            \end{cases}\)
    \end{itemize}

    % \item \textbf{Region $R \subsetneq Q_\text{obj}$}
    
    \item \textbf{Applicability checker} $\phi: Q_\text{obj} \times Q_\text{obj} \rightarrow \{0, 1\}$

    \begin{itemize}
        \item[] \underline{\textbf{Card Domain}}
        \begin{itemize}
            \item \(\phi_\text{slide}(q_\text{obj}, q'_\text{obj}) = 
            \begin{cases} 
            1, & \text{if } q'_\text{obj} \in \Qobj, \, q_\text{obj} \in \Qobj, R_x(\qobj)=R_x(q'_\text{obj}), \text{ and } R_y(\qobj)=R_y(q'_\text{obj})\\ 
            0, & \text{otherwise.} 
            \end{cases}\)
            \item \(\phi_\text{Place}(\qobj, q'_\text{obj}) = 
            \begin{cases} 
            1, & \text{if } \pi_\text{pre}(q_\text{obj}, q'_\text{obj}) \text{ is collision-free}, \\ 
            0, & \text{otherwise.} 
            \end{cases}\)
        \end{itemize}
        where \( R_x \) and \( R_y \) are notations for the \( x \) and \( y \) axes in the global frame.

        \item[] \underline{\textbf{Bookshelf Domain}}
            \begin{itemize}
                \item \(\phi_\text{topple}(q_\text{obj}, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } q'_\text{obj} \in \Qobj^\text{upper-shelf}, \, q_\text{obj} \in \Qobj^\text{upper-shelf}, R_x(\qobj) = R_x(\qobj'), \text{ and } R_z(\qobj) = R_z(\qobj') \\ 
                0, & \text{otherwise.} 
                \end{cases}\)
                \item \(\phi_\text{push}(q_\text{obj}, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } q'_\text{obj} \in \Qobj^\text{lower-shelf}, \, q_\text{obj} \in \Qobj^\text{lower-shelf}, R_x(\qobj)=R_x(q'_\text{obj}), \text{ and } R_y(\qobj)=R_y(q'_\text{obj})\\ 
                0, & \text{otherwise.} 
                \end{cases}\)

                \item \(\phi_\text{Place}(\qobj, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } \pi_\text{pre}(q_\text{obj}, q'_\text{obj}) \text{ is collision-free}, \\ 
                0, & \text{otherwise.} 
                \end{cases}\)
            \end{itemize}
        where \( R_z \) is a notation for the \( z \) axis in the global frame.

        \item[] \underline{\textbf{Kitchen Domain}}
            \begin{itemize}
                \item \(\phi_\text{sink}(q_\text{obj}, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } q'_\text{obj} \in \Qobj^\text{sink}, \text{ and } \, q_\text{obj} \in \Qobj^\text{sink} \\ 
                0, & \text{otherwise.} 
                \end{cases}\)
                \item \(\phi_\text{l-cupboard}(q_\text{obj}, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } q'_\text{obj} \in \Qobj^\text{l-cupboard}, \, q_\text{obj} \in \Qobj^\text{l-cupboard}, R_x(\qobj)=R_x(q'_\text{obj}), \text{ and } R_y(\qobj)=R_y(q'_\text{obj})\\ 
                0, & \text{otherwise.} 
                \end{cases}\)
                \item \(\phi_\text{r-cupboard}(q_\text{obj}, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } q'_\text{obj} \in \Qobj^\text{r-cupboard}, \, q_\text{obj} \in \Qobj^\text{r-cupboard}, R_x(\qobj)=R_x(q'_\text{obj}), \text{ and } R_y(\qobj)=R_y(q'_\text{obj})\\ 
                0, & \text{otherwise.} 
                \end{cases}\)
                \item \(\phi_\text{Place}(\qobj, q'_\text{obj}) = 
                \begin{cases} 
                1, & \text{if } \pi_\text{pre}(q_\text{obj}, q'_\text{obj}) \text{ is collision-free}, \\ 
                0, & \text{otherwise.} 
                \end{cases}\)
            \end{itemize}

    \end{itemize}

\end{itemize}

\noindent\hrulefill

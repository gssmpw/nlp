\begin{algorithm}[h!]
\caption{\texttt{GetApplicableNearestNode}($T, K, \qobj$)}\label{algo:GetFeasibleNearestNode}
\begin{algorithmic}[1]

\If{$K \in \{K_{\text{NP}_1}, \dots, K_{\text{NP}_n}\}$}
    \State $V_{\text{feasible}} = \{v \mid v \in T.V, K.\phi(v.s, q_{\text{obj}})==1 \}$
    \State $v_{\text{near}} \gets \argmin_{v \in V_{\text{feasible}}} d_{SE(3)}(v.q_{\text{obj}}, {q}_{\text{obj}})$
\Else \Comment{If prehensile skill}
    % Vesion 1
    \State $v_{\text{close}} \gets \argmin_{v \in T.V} d_{SE(3)}(v.q_{\text{obj}}, {q}_{\text{obj}})$
    \If{$K.\phi(v_{\text{close}}.s,q_{\text{obj}})$}
        \State $v_\text{near} \gets v_{\text{close}}$
    \Else
        \State $v_{\text{near}} \gets \emptyset$
    \EndIf
    % Version 2
    % \State $V_{\text{near}} \gets \texttt{SortedBy}(T.V, d_{SE(3)}(v.q_{\text{obj}}, {q}_{\text{obj}}))[:5]$
    % \For{$v$ in $V_\text{near}$}
    %     \If{$K.\phi(v.s,q_{\text{obj}})$}
    %         \State $v_\text{near} \gets v$
    %     \EndIf
    % \EndFor
\EndIf
\State \Return $v_{\text{near}}$

\end{algorithmic}
\end{algorithm}

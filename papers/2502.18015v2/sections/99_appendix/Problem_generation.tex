% define the problem.
Each PNP problem is defined by a pair consisting of an initial state \(s_0\) and a goal object pose \(q^g_\text{obj}\). The specifics of the initial state and goal object pose vary based on the environment, and this appendix provides a detailed explanation of their construction. % As described in Section Methodology \ref{sec:Methodology}, a state \(s\) is composed of the object's pose \(q_\text{obj}\), its velocity \(\dot{q}_\text{obj}\), the robot's joint positions \(q_r\), and the robot's joint velocities \(\dot{q}_r\). 

To simplify the problem setup, it is assumed that both the robot and the object are stationary at the initial state. As a result, the initial velocities are set to \(s_0.\dot{q}_r = 0\) and \(s_0.\dot{q}_\text{obj} = 0\). The initial joint positions of the robot \(s_0.q_r\) are sampled randomly, but this sampling is constrained to satisfy two conditions: the positions must lie within the robot's joint limits, and there must be no collisions with the surrounding environment, including obstacles such as tables, bookshelves, kitchen furniture, or objects. The sampling of the initial object pose \(s_0.q_\text{obj}\) and the goal object pose \(q^g_\text{obj}\) is performed based on specific sampling spaces defined for each environment. The sampling spaces for the initial and goal object poses are defined below.

\textbf{Card Flip:} The initial object pose, $s_0.q_{\text{obj}}$, is sampled such that the object is fully positioned within the boundaries of the table, regardless of whether it is flipped or unflipped. Similarly, the goal object pose, $q_{\text{obj}}^g$, is sampled entirely within the table boundaries but must have the opposite orientation from the initial object pose (i.e., if $s_0.q_\text{obj}$ is unflipped, then $q^g_\text{obj}$ must be flipped, and vice versa).

\begin{itemize}
    \item $s_0.q_\text{obj}$: The initial object pose is sampled from 
    \[
    \{(x, y, z, \theta_x, \theta_y, \theta_z) \mid x \in [0.40, 0.60], y \in [-0.10, 0.10], 
    z = 0.4025, \theta_x \in \{0, \pi\}, \theta_y = 0, \theta_z \in [0, 2\pi]\}.
    \]
    \item $q^g_\text{obj}$: The goal object pose is sampled from 
    \[
    \{(x, y, z, \theta_x, \theta_y, \theta_z) \mid x \in [0.40, 0.60], y \in [-0.10, 0.10], 
    z = 0.4025, \theta_x = s_0.q_\text{obj}.\theta_x + \pi, \theta_y = 0, \theta_z \in [0, 2\pi]\}.
    \]
\end{itemize}



\textbf{Bookshelf:} The initial object pose, $s_0.q_\text{obj}$,  is sampled on the upper bookshelf, with the book placed upright and inserted into the shelf. The goal object pose, $q^g_\text{obj}$, is sampled on the lower bookshelf, positioned fully inside the shelf for storage.
\begin{itemize}
    \item $s_0.q_\text{obj}$: The initial object pose is sampled from 
    \[
    \{(x, y, z, \theta_x, \theta_y, \theta_z) \mid x = 0.75, y \in [-0.12, 0.12], 
    z = 0.56, \theta_x = \pi/2, \theta_y = 0, \theta_z = 0\}.
    \]
    \item $q^g_\text{obj}$: The goal object pose is sampled from 
    \[
    \{(x, y, z, \theta_x, \theta_y, \theta_z) \mid x = 0.76, y \in [-0.08, 0.08], z = 0.315, \theta_x = 0, \theta_y = 0, \theta_z = 0\}.
    \]
\end{itemize}

\textbf{Kitchen:} The initial object pose, $s_0.q_\text{obj}$, is sampled within the sink. The goal object pose, $q^g_\text{obj}$, is sampled on the upper shelf, which can be either the left upper shelf or the right upper shelf, selected randomly. 

\begin{itemize}
    \item $s_0.q_\text{obj}$:
    Unlike objects such as cards or books, due to the asymmetry of the cup, we sample $s_0.q_\text{obj}$
from a precollected dataset containing initial poses in the sink. This dataset is generated by dropping the cup into the sink from a sufficient height and recording its initial pose in simulation when it's lying down.
    \item $q^g_\text{obj}$:
    The goal object pose is sampled from 
    \[
    \{(x, y, z, \theta_x, \theta_y, \theta_z) \mid x = 0.6285, y = \{-0.2505, 0.2505\}, 
    z = 0.8604, \theta_x = 0, \theta_y = 0, \theta_z \in [5\pi/6, 7\pi/6]\}.
    \]
\end{itemize}


For each problem, both the initial object pose, $s_0.q_\text{obj}$, and the goal object pose, $q^g_\text{obj}$, are randomly sampled.

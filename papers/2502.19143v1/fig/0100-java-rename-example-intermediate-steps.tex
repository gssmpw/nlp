\centering
\begin{subfigure}[t]{0.48\columnwidth}
  \begin{lstlisting}[
    linebackgroundcolor={
      \ifnum
        \the\value{lstnumber}=7\color{codebghl}
      \fi
    },
    language=Java
  ]
  class Base {
    int `\posidc{x}{1}` = 1;
  }
  class Outer {
    int `\posidc{y}{2}` = 2;
    class Inner extends Base {
      int foo() { return `\rholec[5]{\posid{y}{2}}`; }
    }
  }
  \end{lstlisting}%
  \caption{After locking references, before renaming.}%
  \label{fig:java-rename-example-intermediate-steps-before}
\end{subfigure}%
\hspace{1em}%
\begin{subfigure}[t]{0.48\columnwidth}
  \begin{lstlisting}[
    linebackgroundcolor={
      \ifnum
        \the\value{lstnumber}=2\color{codebghl}
      \fi
    },
    language=Java
  ]
  class Base {
    int `\posidc{y}{1}` = 1; // x renamed to y
  }
  class Outer {
    int `\posidc{y}{2}` = 2;
    class Inner extends Base {
      int foo() { return `\rholec[5]{\posid{y}{2}}`; }
    }
  }
  \end{lstlisting}%
  \caption{After renaming, before unlocking references.}%
  \label{fig:java-rename-example-intermediate-steps-after}
\end{subfigure}%
\centering
\begin{subfigure}[t]{0.48\columnwidth}
  \begin{lstlisting}[language=Java]
    class Base {
      int x = 1;
    }
    class Outer {
      int y = 2;
      class Inner extends Base {
        int foo() { return y; }
      }
    }
  \end{lstlisting}%
  \caption{Before renaming.}%
  \label{fig:java-rename-example-before}
\end{subfigure}%
\hspace{1em}%
\begin{subfigure}[t]{0.48\columnwidth}
  \begin{lstlisting}[
      linebackgroundcolor={
        \ifnum
          \the\value{lstnumber}=2\color{codebghl}
        \else \ifnum
          \the\value{lstnumber}=7\color{codebghl}
        \fi \fi
      },
      language=Java
    ]
    class Base {
      int y = 1; // x renamed to y
    }
    class Outer {
      int y = 2;
      class Inner extends Base {
        int foo() { return Outer.this.y; }
      }
    }
  \end{lstlisting}%
  \caption{After renaming.}%
  \label{fig:java-rename-example-after}
\end{subfigure}%
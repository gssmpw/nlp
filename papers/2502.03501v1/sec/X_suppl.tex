\clearpage
\setcounter{page}{1}
\maketitlesupplementary

\renewcommand\thesection{\Alph{section}}
\captionsetup[table]{position=above}
\setlength{\abovecaptionskip}{1pt}


%-------------------------------------------------------------------------
\section{Additional Ablation Experiment}

We conducted ablation experiments to validate the effectiveness of the Contextual Selective Module (CSM) and Contextual Colorization Module (CCM) modules. To assess the contribution of CCM in interpreting diverse user segmentation intention, we presented results on the FH-PS-AOP (FPA) dataset under two different indications to segment pubic symphysis (PS) and fetal head (FH) . All settings were tested on the same test set, excluding data from 16 subjects for support image-mask pairs. To segment the PS structure in the FPA dataset (FPA-PS), we used the excluded original images and PS masks as inputs to the Proxy Prompt Generator (PPG), replacing the mask with the Fetal Head (FH) mask for FH segmentation (FPA-FH).

\begin{table}[h]
  \caption{Ablation experiments on different modules of Proxy Prompt Generator on the FH-PS-AOP dataset, with results reported in terms of Dice scores.}
  \centering
  \begin{tabular}{@{}ll|lll@{}}
    \toprule
    CSM & CCM
    & FPA-PS & FPA-FH & Average\\
    \hline
    \ding{51} & \ding{51} & {\bf 81.5} & 88.0 & {\bf 84.8} \\
    \ding{51} & \ding{55} & 79.4 & {\bf 88.4} & 83.9 \\
    \ding{55} & \ding{51} & 80.3 & 87.3 & 83.8\\
    \ding{55} & \ding{55} & 78.3 & 87.5 & 82.9\\
    \bottomrule
  \end{tabular}
  \label{tab:ablation}
  \vspace{-7pt}
\end{table}

The results in \cref{tab:ablation} highlight the contributions of both CSM and CCM to the optimal model performance. When CCM was removed, the segmentation performance for PS structures showed a pronounced decline (2.1\% Dice score drop), while FH structures exhibited a slight improvement. This may be attributed to the absence of CCM impairing the PPGâ€™s ability to interpret different user intentions, resulting in markedly divergent segmentation outcomes under varying indications. On the other hand, removing CSM led to an overall degradation in segmentation quality for both FH and PS structures, with the average Dice score decreasing by 1\%. When the selective mechanism of CSM was disabled and CCM was simultaneously omitted, model performance fell to the Med-SA baseline. This experiment demonstrates that our model, when enhanced with both modules, achieves optimal and consistent performance across different objects.

%-------------------------------------------------------------------------
\section{Prompt Strategy}
\label{sec:prompt strategy}
\subsection{Settings for Video Dataset.}
Considering the high demand for timely operation in real-time image-guided examinations and interventions for physicians, prompt was only required for the first frame of the video data. 

1. {\bf Box}: Minimum bounding rectangle of the target as a bounding box prompt. 

2. {\bf Point}: Center point of the object as a positive point. 

3. {\bf Mask}: Target mask of the patient under examination.

4. {\bf Support Image-Mask Pair}: Image of the first frame and the corresponding target mask from ``non-target'' data (i.e., image/video frame of subjects other than the one under examination, such as from retrospective datasets).

\subsection{Settings for Image Dataset.} 
For the models that require prompts in the comparison experiments on image dataset, the following prompt conditions are provided.

1. {\bf Point}: Since the center point of the disc and vessel mask is not on the target, one random point within the target mask as a positive point prompt. 

2. {\bf Box}: Minimum bounding rectangle of the target as a bounding box prompt. 

3. {\bf Everything}: Automatically segment multiple targets with everything mode. We select the prediction that the highest overlaps with ground truth to calculate the model's Dice score. 

4. {\bf Others}: The SAMed and AutoSAM models are designed to perform automatic segmentation without manual-given prompt, while we use the support image-mask pair as a prompt.

%-------------------------------------------------------------------------
\section{Datasets Introduction}
Type of image modalities, segmentation objects, and number of samples for the four included datasets are summarized in the table below. The related references are provided in the main text.
%-------------------------------------------------------------------------
\begin{table}[h] % place the table at the top of the page
  \caption{Dataset summary.}
  \centering
  \begin{tabular}{@{}p{1.3cm}p{1.3cm}p{2.4cm}l@{}} % adjust column width as needed
    \toprule
    Dataset & Modality & Segmentation Objects & Samples \\
    \midrule
    \raggedright REFUGE2 & \raggedright Fundus & \raggedright Optic disc and optic cup & 2000 images \\
    \raggedright STARE & \raggedright Fundus & \raggedright Blood vessels in retinal images & 20 images \\
    \raggedright FPA & \raggedright Ultrasound & \raggedright Fetal head and pubic symphysis & 4000 images \\
    \raggedright JNU-IFM & \raggedright Ultrasound & \raggedright Fetal head and pubic symphysis & 78 videos \\
    \bottomrule
  \end{tabular}
  \label{tab:dataset}
  \vspace{-7pt}
\end{table}
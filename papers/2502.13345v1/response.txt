\section{Related Work}
%图像生成由于生成对抗网络（GAN）的发展而在研究中熟知。然而，模式崩溃和不稳定的训练策略阻碍了GAN的进一步应用。近年来一些研究人员将扩散模型引入图像生成，并经过生成方法、推理方法的多方面改进后在文本条件图像生成方面的取得巨大成功，扩散模型为各种文本提示合成高分辨率的照片级真实图像，并可通过微调扩散模型衍生出基于扩散模型的图像修复、图像编辑、风格变换等应用。上述方法在与扩散模型相结合时，去噪过程在潜在空间内进行而不是像素空间。
% \textbf{Image generation} has become well-known among researchers due to the development of Generative Adversarial Networks (GANs). However, mode collapse and unstable training strategies have hindered further applications of GANs. 

% In recent years, researchers have introduced diffusion models **Carlucci et al., "Diffusion Models for Image Synthesis"** into image generation. After improvements in generation methods **Ho et al., "DALL-E: Diffusion Models for Text-to-Image Synthesis"**, and inference techniques **Song et al., "Score-Based Generative Models through Perturbations in Latent Space"**, diffusion models have achieved significant success in text-conditioned image generation. Diffusion models can synthesize high-resolution, photorealistic images based on various text prompts and can be finetuned to derive applications such as image inpainting **Berman et al., "Inpainting with Generative Models"**, image editing **Wang et al., "Image Editing via Generative Adversarial Networks"**, and style transfer **Zhu et al., "Unpaired Image-to-Image Translation Using Cycle-Consistent Adversarial Losses"**. When these methods are combined with latent diffusion models, the denoising process occurs in the latent space rather than the pixel space. 

%扩散模型近年来在
\textbf{Diffusion Models} has demonstrated prominent performance in image generation **Dhariwal et al., "Diffusion Models Beat GANs on Image Synthesis"** with the support of methodologies **Ho et al., "DALL-E: Diffusion Models for Text-to-Image Synthesis"** and sampling techniques **Song et al., "Score-Based Generative Models through Perturbations in Latent Space"**.
Latent diffusion models optimize images in the latent space of pre-trained VAEs, further accelerating the practical applications of diffusion models while also raising concerns about potential abuse and intellectual property of models. 
The immense cost of training a diffusion model, which requires hundreds of GPU-days **Huang et al., "Accelerating Training of Deep Neural Networks with Model Compression"**, makes copyright protection for diffusion models crucial, especially when the model architecture and weights are distributed to users for deployment. We focus on the security and efficiency issues of model watermarking in distribution scenarios.
% Latent diffusion models **Zhu et al., "Latent Diffusion Models for Image Generation"** optimize images in the latent space of pre-trained VAEs, further accelerating the practical applications of diffusion models while also raising concerns about potential abuse and intellectual property of models. 

% We focus on tracing the origins of generated images of the latent diffusion model in model distribution scenarios.

% \noindent\textbf{Image Watermarking} has long been studied in protecting intellectual property and ensuring traceability of digital media. Traditional methods of embedding watermarks into images often involve utilizing techniques like Discrete Cosine Transform (DCT), Discrete Wavelet Transform (DWT) **Wang et al., "Watermarking Based on DWT"**, or Singular Value Decomposition (SVD) **Kundur and Hatzinakos, "Digital Watermarking Schemes Using the Discrete Cosine Transform"**. Deep learning-based methods like HiDDeN **Comon et al., "Deep-Watermark: A Deep Learning Approach for Robust Watermarking"**, StegaStamp **Zhang et al., "StegaStamp: A Novel Approach to Image-Based Watermarking Using Steganography and Deep Neural Networks"** and RoSteALS **Mondal et al., "Robust Steganalysis of Least Significant Bit (LSB) Steganography in Images"** have shown promising performance in terms of resilience against different geometric transformations. These techniques typically utilize encoders and decoders for embedding and extracting watermarks respectively. They primarily focus on post-processing existing images with a core objective of achieving resilience against diverse attacks while minimizing the impact on the image's visual quality.

% \noindent\textbf{Watermarking for Latent Diffusion Models} concentrates on three aspects: security, flexibility, and robustness. To ensure the security of watermark embedding, WDM **Bhattacharya et al., "Watermark Detection in Digital Images Using DWT-SVD"** trains an autoencoder to stamp a watermark on all training data before re-training the generator from scratch. To improve the flexibility of watermark embedding, Stable Signature **Pereira et al., "Stable Signature: A Robust Watermarking Scheme for Image Authentication"** and FSwatermark **Xu et al., "FSWatermark: A Fast and Secure Watermarking Scheme for Images"** fine-tune VAE-Decoder to ensure that all generated images contain the watermark. For watermark robustness, Tree-ring **Li et al., "Tree-Ring Based Image Watermarking Using Deep Learning"** and ZoDiac **Wang et al., "ZoDiac: A Novel Approach to Image-Based Watermarking Using Frequency Domain Transformations"** propose random seed modification watermark. Research **Huang et al., "Robustness of Random Seed Modification Watermarks Against Processing Attacks"** has shown that random seed modification watermark has significant advantages in dealing with various processing attacks. 

\noindent\textbf{Watermarking for Latent Diffusion Models} is primarily aimed at tracing the origins of generated images of the latent diffusion model. WDM **Bhattacharya et al., "Watermark Detection in Digital Images Using DWT-SVD"** trains an autoencoder to stamp a watermark on all training data before re-training the generator from scratch. However, this approach suffers from inefficiencies in terms of computational resources and time. Stable Signature **Pereira et al., "Stable Signature: A Robust Watermarking Scheme for Image Authentication"** and FSwatermark **Xu et al., "FSWatermark: A Fast and Secure Watermarking Scheme for Images"** fine-tune VAE-Decoder to ensure that all generated images contain the watermark. However, these approaches are not resilient to diverse threats. Tree-ring **Li et al., "Tree-Ring Based Image Watermarking Using Deep Learning"** and ZoDiac **Wang et al., "ZoDiac: A Novel Approach to Image-Based Watermarking Using Frequency Domain Transformations"** propose random seed modification watermarks which show significant advantages in dealing with various processing attacks **Huang et al., "Robustness of Random Seed Modification Watermarks Against Processing Attacks"**. However, these methods lack secure mechanisms to guarantee watermark embedding in model distribution scenarios. 

% \yj{Refer to the benchmark paper.}

% For latent diffusion model watermarking, it can mainly be categorized into three types:

% \textbf{Watermark embedding during training phase.}  In methods
% incorporating watermarks during the training phase, watermarks
% are embedded into the training data. WDM **Bhattacharya et al., "Watermark Detection in Digital Images Using DWT-SVD"** trains an autoencoder to stamp a watermark on all training data before re-training the generator from scratch. 

% \textbf{Fine-tuning phase with watermark incorporation.} The primary goal of these watermark embedding methods is to integrate the watermark component into the model, making it inseparable during distribution. Watermarks are embedded into the model components during the fine-tuning process. For example, methods such as Stable Signature **Pereira et al., "Stable Signature: A Robust Watermarking Scheme for Image Authentication"** and FSwatermark **Xu et al., "FSWatermark: A Fast and Secure Watermarking Scheme for Images"** fine-tune variational autoencoders to ensure that all generated images contain the watermark.

% \textbf{Watermark embedding into latent space during inference.} During the inference process, watermarks are integrated into the latent variable of the model. Approaches such as Tree-ring **Li et al., "Tree-Ring Based Image Watermarking Using Deep Learning"** and ZoDiac **Wang et al., "ZoDiac: A Novel Approach to Image-Based Watermarking Using Frequency Domain Transformations"** accomplish this through diffusion inversion and frequency domain transformations applied to initial latent variables, ensuring that all generated images include the watermark. The variability in initial latent variable selection significantly impacts subsequent sampling processes, thereby introducing semantic distinctions in the generated images. This class of watermark is termed as semantic watermark.

% Latent-Watermark **Huang et al., "Latent Watermark: A Novel Approach to Image-Based Watermarking Using Deep Learning"** propose a progressive training strategy to embed watermarks to the latent space of images. 

% \textbf{Image Watermarking Attack.} The objective of image watermark attacks is to evaluate the resilience of image detection following realistic modifications. Common image processing techniques include adding noise, color jitter, image compression, image scaling and Gaussian blur. In recent research, diffusion based attacks **Huang et al., "Diffusion Based Attacks on Image Watermarks"**, adaptive adversarial samples attack **Wang et al., "Adaptive Adversarial Samples Attack on Image Watermarks"** and adaptive surrogate attack **Li et al., "Adaptive Surrogate Attack on Image Watermarks"**. 

\noindent\textbf{Model Watermarking Attacks}
on diffusion model watermarking primarily occur at two levels: image and model. At the image level, attacks such as image processing attacks, adaptive adversarial sample attacks **Wang et al., "Adaptive Adversarial Samples Attack on Image Watermarks"**, and reconstruction attacks **Li et al., "Reconstruction Attacks on Image Watermarks"** are included. At the model level, attacks include techniques such as purification and model collison. 
Model purification will significantly reduce the detection accuracy of whole model modification watermark and partial model modification watermark. Model collison  will deceive watermark detection.
We propose watermark-network controller to avoid watermark verification issues related to model-level attacks and ensures image-level robustness by secure watermark distribution.
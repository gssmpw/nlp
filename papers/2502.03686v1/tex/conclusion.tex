\section{Conclusion}

Our novel framework elucidates the design space of guidance in diffusion models. Through the lens of variational optimal control, it offers a principled way to guide a pretrained diffusion model while respecting an external cost. Our empirical results suggest that optimizing each diffusion step allows for more flexibility in guidance compared to commonly used approximations of the diffusion posterior.


While our method adapts well to linear and (blind) non-linear problems, there remain several interesting directions for future work. First, a more thorough theoretical investigation into the optimization dynamics of the proposed method could help alleviate the extra overhead of variational inference during each diffusion sampling. Second, it would be interesting to extend our method to Latent Diffusion Models (LDMs) \citep{rombach2022high}. Lastly, our method is only one instantiation of our framework, leaving ample room for exploration. Investigating variational parameterizations, refining cost functions, and developing more efficient optimization schemes could further enhance the flexibility and applicability of our approach.


\textbf{Acknowledgment.} We thank Justus Will for additional discussions and feedback. This project was funded through support from the Chan Zuckerberg Initiative. Additionally, Stephan Mandt acknowledges funding from the National Science Foundation (NSF) through an NSF CAREER Award IIS-2047418, IIS-2007719, the NSF LEAP Center, the IARPA WRIVA program, and the Hasso Plattner Research Center at UCI.

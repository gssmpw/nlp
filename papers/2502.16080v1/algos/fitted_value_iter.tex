
\begin{algorithm}[H]
\caption{Fitted Value Iteration for Stochastic Fisher Market}
\label{alg:value_iter_fisher}
\begin{algorithmic}[1]
\State Initialize $\statevalue[0]$ arbitrarily, e.g. $\statevalue[0]=\zeros$
\For{$\iter = 1, \hdots, \numiters[\statevalue]$}
    \State Sample $\{\state[\numsample]\}_{\numsample \in [\numsamples]} \sim \initstates$
    \State For all states $\state \in \states$, compute $\{\widehat{\bellopt}\left[\statevalue[\iter]\right]\left(\state[\numsample]\right)\}_{\numsample \in [\numsamples]}]$ using \Cref{alg:approx_bellman_operator}
    \State Compute $\statevalue[\iter + 1] \in $ $\argmin\limits_{\statevalue: \states \to \R \mathrm{ concave}} \nicefrac{1}{\numsamples} \sum_{\numsample \in [\numsamples]}\left\| \statevalue\left(\state[\numsample]\right) - \widehat{\bellopt}\left[\statevalue[\iter]\right]\left(\state[\numsample]\right) \right\|$
\EndFor
\State \Return $\left\{\statevalue[\iter + 1] \right\}_\iter$
\end{algorithmic}
\end{algorithm}
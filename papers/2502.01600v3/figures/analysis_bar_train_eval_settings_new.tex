%
%
%

\begin{tikzpicture}[x=3cm, y=1.0cm, scale=0.8, every node/.style={scale=0.85}]
    %
    %
    %
    \draw[-] (0,0) -- (1.75,0);

    %
    \foreach \val in {0.0,0.5,1.0,1.5} {
        %
        \draw (\val,0.05) -- (\val,-0.05);
        %
        \node[below=2pt] at (\val,-0.05) {\val};
    }

    %
    \node[below=1.5em] at (0.8,0) {Relative change \textbf{(train set)}};

    %
    %
    %
    \def\topy{7.3}   %
    \draw[-] (0,0) -- (0,\topy + 0.3);% node[above]{Categories};

    %
    %
    %
    \def\barheight{0.3}   %
    \def\catgap{0.5}      %

    %
    \newcommand{\drawCategory}[4]{%
      %
      %
      %
      %

      \pgfmathparse{1}%
      \let\topWidth\pgfmathresult

      \pgfmathparse{#3/#4}%
      \let\botWidth\pgfmathresult

      %
      %
      \node[anchor=east,text width=2.5cm,align=right] at (-0.05, {#2 + \barheight}) {#1};

      %
      \fill[blue!75] (0,#2) rectangle (\botWidth, {#2 + \barheight});
      %
      \node[anchor=west] at ({\botWidth + 0.02}, {#2 + \barheight/2}) {\footnotesize #3};

      %
      \fill[orange!70] (0, {#2 + \barheight}) rectangle (\topWidth, {#2 + 2*\barheight});
      %
      \node[anchor=west] at ({\topWidth + 0.02}, {#2 + \barheight + \barheight/2}) {\footnotesize #4};
    }

    %
    \draw[dashed, thin, gray!75] (1,0) -- (1,\topy);

    %
    %
    %
    %
    %
    %
    %
    %
    %
    %
    %

    %
    %
    %
    \def\ybase{\topy - \catgap}
    \drawCategory{Code chars. per rollout}{\ybase}{3929}{4519}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}

    %
    %
    %
    \drawCategory{Multiple code cells per turn}{\ybase}{0.053}{0.11}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}

    %
    %
    %
    \drawCategory{Execution errors per turn}{\ybase}{0.087}{0.28}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}

    %
    %
    %
    \drawCategory{API call give up freq.}{\ybase}{0.041}{0.29}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}

    %
    %
    %
    \drawCategory{`show\_api\_doc' per rollout}{\ybase}{5.8}{2.9}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}

    %
    %
    %
    \drawCategory{`assum\{e,ed,ing\}' per rollout}{\ybase}{1.54}{1.94}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}

    %
    %
    %
    \drawCategory{`dummy' per rollout}{\ybase}{0.037}{0.20}
    \pgfmathsetmacro\ybase{\ybase - 2*\barheight - \catgap}


%
%
%
\begin{scope}[shift={(1.4,5.5)}]

  %
  %
  \draw[gray, thin] (0.0,-0.4) rectangle (0.45,1.8);

  %
  \fill[blue!75] (0.1,0.15) rectangle (0.35,0.35);
  %
  \node[anchor=north, align=center] at (0.225,0.14) {\footnotesize \ours}; %

  %
  \fill[orange!70] (0.1,1.4) rectangle (0.35,1.6);
  %
  \node[anchor=north, align=center] at (0.225,1.39) {\footnotesize Base\\model};

\end{scope}
\end{tikzpicture}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}

\usepgfplotslibrary{groupplots}
\usetikzlibrary{pgfplots.polar}
\usetikzlibrary{pgfplots.statistics}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{overlay-beamer-styles}
\pgfplotsset{every axis/.style={scale only axis}}

\definecolor{veryLightGrey}{HTML}{F2F2F2}
\definecolor{lightGrey}{HTML}{DDDDDD}
\definecolor{colorSimdRecSplit}{HTML}{444444}
\definecolor{colorChd}{HTML}{377EB8}
\definecolor{colorRustFmph}{HTML}{A65628}
\definecolor{colorRustFmphGo}{HTML}{A65628}
\definecolor{colorSicHash}{HTML}{4DAF4A}
\definecolor{colorPthash}{HTML}{984EA3}
\definecolor{colorDensePtHash}{HTML}{377EB8}
\definecolor{colorRecSplit}{HTML}{FF7F00}
\definecolor{colorBbhash}{HTML}{F781BF}
\definecolor{colorShockHash}{HTML}{F8BA01}
\definecolor{colorBipartiteShockHash}{HTML}{F781BF}
\definecolor{colorBipartiteShockHashFlat}{HTML}{E41A1C}
\definecolor{colorBmz}{HTML}{000000}
\definecolor{colorBdz}{HTML}{444444}
\definecolor{colorFch}{HTML}{444444}
\definecolor{colorChm}{HTML}{A65628}
\definecolor{colorFiPS}{HTML}{FF7F00}
\definecolor{colorConsensus}{HTML}{4DAF4A}

\newlength{\squareWidth}
\newlength{\squareHeight}
\setlength{\squareWidth}{1.0\pgfplotmarksize}
\setlength{\squareHeight}{1.3\pgfplotmarksize}
\pgfdeclareplotmark{heatmapSquare}{%
  \pgfpathmoveto{\pgfqpoint{ \squareWidth}{ \squareHeight}}%
  \pgfpathlineto{\pgfqpoint{ \squareWidth}{-\squareHeight}}%
  \pgfpathlineto{\pgfqpoint{-\squareWidth}{-\squareHeight}}%
  \pgfpathlineto{\pgfqpoint{-\squareWidth}{ \squareHeight}}%
  \pgfpathclose%
  \pgfusepath{fill}
}

\pgfdeclareimage[interpolate,height=2.0mm,width=2.0mm]{shockhashMark}{fig/shockhash}
\pgfdeclareplotmark{shockhash}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{shockhashMark}}}
\pgfdeclareimage[interpolate,height=1.85mm,width=1.85mm]{shockhashInverseMark}{fig/shockhashInverse}
\pgfdeclareplotmark{shockhashInverse}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{shockhashInverseMark}}}
\pgfdeclareimage[interpolate,height=1.85mm,width=1.85mm]{phobicMark}{fig/phobic}
\pgfdeclareplotmark{phobic}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{phobicMark}}}
\pgfdeclareimage[interpolate,height=1.85mm,width=1.85mm]{phobicInverseMark}{fig/phobicInverse}
\pgfdeclareplotmark{phobicInverse}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{phobicInverseMark}}}
\pgfdeclareimage[interpolate,height=1.85mm,width=1.85mm]{fingerprintMark}{fig/hand}
\pgfdeclareplotmark{fingerprint}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{fingerprintMark}}}
\pgfdeclareimage[interpolate,height=1.85mm,width=1.85mm]{fingerprintInverseMark}{fig/handInverse}
\pgfdeclareplotmark{fingerprintInverse}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{fingerprintInverseMark}}}
\pgfdeclareimage[interpolate,height=2.0mm,width=2.0mm]{consensusMark}{fig/consensus}
\pgfdeclareplotmark{consensus}{\pgftext[at=\pgfpointorigin]{\pgfuseimage{consensusMark}}}

\pgfplotscreateplotcyclelist{myColorList}{%
  colorShockHash,mark=triangle\\% Slightly darker than LIPIcs yellow
  lipicsGray,mark=pentagon\\%
  colorChd,mark=square\\%
  colorSicHash,mark=o\\%
  colorRecSplit,mark=diamond\\%
  colorPthash,mark=x\\%
  colorBbhash,mark=flippedTriangle\\%
}
\pgfdeclareplotmark{flippedTriangle}{%
  \pgfpathmoveto{\pgfqpointpolar{-90}{1.2\pgfplotmarksize}}%
  \pgfpathlineto{\pgfqpointpolar{30}{1.2\pgfplotmarksize}}%
  \pgfpathlineto{\pgfqpointpolar{150}{1.2\pgfplotmarksize}}%
  \pgfpathclose%
  \pgfusepath{stroke}
}
\pgfdeclareplotmark{rightTriangle}{%
  \pgfpathmoveto{\pgfqpointpolar{0}{1.2\pgfplotmarksize}}%
  \pgfpathlineto{\pgfqpointpolar{120}{1.2\pgfplotmarksize}}%
  \pgfpathlineto{\pgfqpointpolar{240}{1.2\pgfplotmarksize}}%
  \pgfpathclose%
  \pgfusepath{stroke}%
}
\pgfdeclareplotmark{leftTriangle}{%
  \pgfpathmoveto{\pgfqpointpolar{-180}{1.2\pgfplotmarksize}}%
  \pgfpathlineto{\pgfqpointpolar{-60}{1.2\pgfplotmarksize}}%
  \pgfpathlineto{\pgfqpointpolar{60}{1.2\pgfplotmarksize}}%
  \pgfpathclose%
  \pgfusepath{stroke}%
}

\definecolor{veryLightGrey}{HTML}{DDDDDD}

\pgfplotsset{
  mark repeat*/.style={
    scatter,
    scatter src=x,
    scatter/@pre marker code/.code={
      \pgfmathtruncatemacro\usemark{
        or(mod(\coordindex,#1)==0, (\coordindex==(\numcoords-1))
      }
      \ifnum\usemark=0
        \pgfplotsset{mark=none}
      \fi
    },
    scatter/@post marker code/.code={}
  },
  log x ticks with fixed point/.style={
      xticklabel={
        \pgfkeys{/pgf/fpu=true}
        \pgfmathparse{exp(\tick)}%
        \pgfmathprintnumber[fixed relative, precision=3]{\pgfmathresult}
        \pgfkeys{/pgf/fpu=false}
      }
  },
  log y ticks with fixed point/.style={
      yticklabel={
        \pgfkeys{/pgf/fpu=true}
        \pgfmathparse{exp(\tick)}%
        \pgfmathprintnumber[fixed relative, precision=3]{\pgfmathresult}
        \pgfkeys{/pgf/fpu=false}
      }
  },
  major grid style={thin,dotted},
  minor grid style={thin,dotted},
  ymajorgrids,
  yminorgrids,
  every axis/.append style={
    line width=0.9pt,
    tick style={
      line cap=round,
      thin,
      major tick length=4pt,
      minor tick length=2pt,
    },
    mark options={solid},
  },
  legend cell align=left,
  legend style={
    line width=0.7pt,
    /tikz/every even column/.append style={column sep=2mm,black},
    /tikz/every odd column/.append style={black},
    mark options={solid},
    font=\footnotesize,
  },
  title style={yshift=-2pt},
  enlarge x limits=0.04,
  every tick label/.append style={font=\footnotesize},
  every axis label/.append style={font=\small},
  every axis y label/.append style={yshift=-1ex},
  /pgf/number format/1000 sep={},
  axis lines*=left,
  xlabel near ticks,
  ylabel near ticks,
  axis lines*=left,
  label style={font=\footnotesize},
  tick label style={font=\footnotesize},
  cycle list name=myColorList,
}


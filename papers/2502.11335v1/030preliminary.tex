\section{Preliminaries}
\label{sec:preliminaires}

We introduce preliminaries on basic notations, and the problem definition addressed in this work. 

\subsection{Notations}
We describe the basic notations frequently used in this paper, with the related symbols summarized in Table~\ref{tab:symbols}.

\smallsection{Vector and matrix}
We use lowercase bold letters for vectors (e.g., $\vect{a}$) and uppercase bold letters for matrices (e.g., $\vect{A}$).
The $i$-th entry of vector $\vect{a}$ is denoted as $\vect{a}(i)$.
The entry in the $i$-th row and $j$-th column of matrix $\mat{A}$ is denoted as $\mat{A}(i, j)$.
The $i$-th row vector of $\mat{A}$ is denoted as $\mat{A}(i)$.

\smallsection{User-item interactions}
Let $\users$ and $\items$ denote the sets of users and items, where $|\users|$ and $|\items|$ are the numbers of users and items, respectively.
Suppose $\B = \{\texttt{view}, \texttt{cart}, \cdots, \texttt{buy}\}$ is the set of behaviors, and let $b_{t}$ denote the target behavior (e.g., $\texttt{buy}$).
If user $u$ has interacted with item $i$ on behavior $b \in \B$, a pair $(u, i)$ is included in $\Eb$, the set of user-item interactions on $b$.

\smallsection{User-item bipartite graphs}
A user-item bipartite graph on behavior $b$ is denoted by $\Gb = (\Ub, \Ib, \Eb)$, where $\Ub$ and $\Ib$ are the copies of $\users$ and $\items$, respectively.
Its bi-adjacency matrix is denoted by $\Ab \in \mathbb{R}^{|\users| \times |\items|}$, where $\Ab(u, i)$ is $1$ if the edge between $u$ and $i$ is in $\Eb$; otherwise, $0$.
Let $\NIb{u}$ be the set of neighboring nodes of $u \in \Ub$, where the neighbors belong to $\Ib$, and its size $d_b(u) = |\NIb{u}|$ is the degree of $u$ in $\Gb$. 
%
Similarly, $\NUb{i}$ is the set of neighbors of $i \in \Ib$, and $d_b(i) = |\NUb{i}|$ is the degree of $i$ in $\Gb$.

 \begin{table}
    %\vspace{-10mm}
    \centering
    \small
    \caption{\label{tab:symbols}Frequently-used symbols.}
    \begin{tabular}{c|l}
        \toprule
        \textbf{Symbol} & \textbf{Description} \\
        \midrule
        %$\mat{A} \in \mathbb{R}^{N \times M}$ & matrix\\
        $\users$ and $\items$ & sets of users or items, resp.\\
        $\B$ & set of behaviors \\         
        $b_t$ & target behavior (e.g., \texttt{buy}) \\ 
        $q$ & querying user \\ 
        $\C$ & cascading sequence of behaviors, i.e.,  $\C= (b_1 \rightarrow b_2 \rightarrow \cdots 
        \rightarrow b_t)$ \\
        $\Ub$ & set of users on behavior $b$ (i.e., copy of $\users$) \\
        $\Ib$ & set of items on behavior $b$ (i.e., copy of $\items$) \\
        $\Eb$ & set of user-item interactions on behavior $b$\\
        $\Gb$ & user-item graph on behavior $b$, i.e.,  $\Gb = (\Ub, \Ib, \Eb)$ \\
        $\GC$ & cascading behavior graph\\
        $\mat{A}_{b} \in \mathbb{R}^{|\Ub| \times |\Ib|}$ & bi-adjacency matrix of $\Gb$\\
        $\NIb{u}$ and $\NUb{i}$ & sets of neighbors of $u \in \Ub$ and $i \in \Ib$, resp. \\
        $\Dub$ and $\Dib$ & diagonal degree matrices of users and items on $\Gb$, resp.\\
        $\Abnorm$ & symmetrically normalized matrix of $\Ab$, i.e., $\Abnorm = \Dub^{-1/2} \Ab \Dib^{-1/2}$\\ 
        $\rub$ and $\rib$ & ranking score vectors of users and items on $\Gb$, resp. \\
        $\qub$ and $\qib$ & query vectors of users and items on $\Gb$, resp. \\
        $\alpha$ and $\beta$ & strengths of query fitting and cascading alignment \\
        $\gamma$ & strength of smoothness, i.e., $\gamma = 1 - \alpha - \beta$\\
        %$K$ & maximum number of iterations for convergence
        \bottomrule
    \end{tabular}
\end{table}   

\subsection{Problem Definition}
We describe the formal definition of the problem on multi-behavior recommendation as follows:
\begin{problem}[Personalized Ranking for Multi-behavior Recommendation]
{\color{white}T}
\label{prob:mbr}
\begin{itemize}[leftmargin=9mm,noitemsep]
    \item {
        \textbf{Input}: the sets $\users$ and $\items$ of users and items, the set of multi-behavior interactions, i.e., $\set{E} = \{\set{E}_{b} \: | \: b \in \B \}$, and a querying user $q \in \users$,
    }
    \item {
        \textbf{Output}: a ranking score $\vect{r}_{u}(i)$, meaning the likelihood of the user $q$ performing the target behavior $t$ (e.g., \texttt{buy}) for item $i$.
    }
\end{itemize}
\end{problem}
For each querying user, the recommendation list is generated by sorting items in descending order based on their ranking scores.

\subsection{Personalized Ranking on Bipartite Graphs}
\label{sec:preliminaires:birank}
Given a user-item bipartite graph $\graph=(\users, \items, \edges)$ with single-type interactions, traditional ranking models~\cite{PanPYFD04,BrinB98,DengDLK09kqpg,HeHGKW17} aim to calculate personalized ranking scores regarding a querying user $q$ by analyzing the relationships in $\edges$ between users and items.
For this purpose, most of them follow \textit{smoothness assumption} and \textit{query fitting}, where the former assumes that a node should be ranked high if it is linked to higher-ranked nodes, while the latter prioritizes (or fits) the prior belief of $q$ during the ranking process.

Let $\ru \in \mathbb{R}^{|\users|}$ and $\ri \in \mathbb{R}^{|\items|}$ denote the ranking score vectors for the nodes in $\users$ and $\items$, respectively, with respect to $q$.
For each node $u \in \users$ and $i \in \items$, their respective scores, $\ru(u)$ and $\ri(i)$, are represented as follows:
\begin{align}
    \label{eq:birank}
    \begin{split}
    \ru(u) &= (1-\lambda_{\users}) \cdot
    \Big(
         \sum_{i \in \NIb{u}} \wiu \cdot \ri(i) \
    \Big) + \lambda_{\users}\cdot\qu(u), \\
    \ri(i) &= \underbrace{(1-\lambda_{\items}) \cdot \Big(
    \sum_{u \in \NUb{i}}{\wui \cdot \ru(u)} 
    \Big)}_{\text{Smoothing ranking scores}}
    + \underbrace{\lambda_{\items} \cdot \qi(i), 
        {\color{white}\Biggl(_{B_{B_{B}}}\!\!\!\!\!\!\!\!\!\!\!\!\!\!}
    }_{\text{Fitting queries}} 
    \end{split}
\end{align}
where $\qu(u)$ and $\qi(i)$ represent the prior beliefs at nodes $u$ and $i$, respectively, given by the querying user $q$.
The first term smooths (or aggregates) the scores of the target nodeâ€™s neighbors with normalized edge weights $\wiu$ and $\wui$, while the second term injects the prior beliefs in $\qu(u)$ and $\qi(i)$ to the ranking scores. 
Their contributions are adjusted by $\lambda_{\users} \in [0,1]$ and $\lambda_{\items} \in [0,1]$, called personalized parameters for users and items, respectively. 
The ranking models iteratively refines these scores from their initial values until convergence.
%{\color{red}
Note that different designs of 1) the normalized edge weights $\{\wui, \wiu\}$, 2) the personalized parameters $\{\lambda_{\users}, \lambda_{\items}\}$, or 3) the query vectors $\{\qu, \qi\}$ lead to different ranking models (refer to~\cite{HeHGKW17} for detailed configuration information).

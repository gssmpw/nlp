\section{Related Work}
\label{sec:related_work}
% \input{sections/related_table}

We highlight four major challenges of solving the V2B problem, namely: 1) the uncertainty of vehicles and SoC requirements; 2) Time-Of-Use (TOU) pricing, demand charges, and long-term rewards; 3) heterogeneous chargers and continuous action spaces; and 4) tracking real-world states and transitions. Below, we briefly cover prior work to tackle these challenges. \textit{A more detailed description of prior work is presented in~\Cref{tab:comparison} of the appendix.}  

\noindent\textbf{Uncertainty of vehicles and SoC requirements.} 
% Prior work by \citeauthor{MJG2015} considers mobility aspects like EV arrival/departure times and trip history for charging stations~\cite{MJG2015}.
Meta-heuristics and Model Predictive Control (MPC) have been used to solve the EV charging process, focusing on energy cost and user fairness in single-site or vehicle-to-grid (V2G) systems~\cite{AORC2013, 5986769, 9409126, MJG2015}. 
Studies by \citeauthor{richardson2011electric} analyze EV charging strategies' impact on grid stability, relevant to V2B systems~\cite{richardson2011electric}. \citeauthor{8274175} proposed a demand response framework for optimizing V2B systems amidst dynamic energy pricing~\cite{8274175}. Additionally, \citeauthor{oconnell2010integration} utilized Mixed Integer Linear Programming (MILP) to integrate renewable energy sources into grids~\cite{oconnell2010integration}.
% Additionally, there are empirical studies that have analyzed EV charging strategies and their impact on grid stability, which are closely related to V2B systems~\cite{richardson2011electric}.
However, many of these methods focus on unidirectional chargers and fail to fully account for all exogenous sources of uncertainty (e.g., uncertain arrival and departure times).


% {\color{black} Other approaches, including meta-heuristics and Model Predictive Control (MPC), have been explored to optimize the smart EV charging process for electric vehicles (EVs), focusing on energy cost and user fairness in single-site or vehicle-to-grid (V2G) systems~\cite{AORC2013, 5986769, 9409126, MJG2015}.} 
% However, many of these methods focus on unidirectional chargers and fail to fully account for uncertainty including, vehicle arrivals and departures~\cite{MJG2015}. 
% This uncertainty arise from the mobility of EVs, which include aspects such as their arrival and departure times of an EV at/from a charging station, trip history of EVs, and unplanned departure of EVs.

\noindent\textbf{Time of use pricing, demand charge, and long-term rewards.} 
% Time of use pricing and demand charge, Long-term rewards and planning horizon
% AORC2013, MMN2019, SNDJ2020
V2B optimization is difficult due to long billing periods. While prior work (barring some exceptions~\cite{9409126}) optimizes and plans for single-day horizons~\cite{AORC2013, MMN2019, SNDJ2020}, they fail to work for longer periods.

% \noindent\textbf{Heterogeneous chargers and continuous action spaces.} In practice, buildings develop EV infrastructure over time and have heterogeneous chargers, complicating the action space. While some prior work has successfully modeled charger heterogeneity~\cite{NNM2024,ZJS2022}, such work either does not capture long-term rewards (i.e., limit planning to a single day) or fails to account for demand charge, thereby failing to capture what is arguably the most critical real-world constraint of the V2B problem.
\noindent\textbf{Heterogeneous chargers and continuous action spaces.} 
%Approaches that solve EV charging without considering the ability of EVs to discharge, ignores even more potential savings. However, addressing this introduces further complexity to the system.
In practice, buildings develop EV infrastructure gradually, leading to heterogeneous chargers and a more complex action space.
While some prior work addresses charger heterogeneity~\cite{NNM2024,ZJS2022}, it often neglects long-term rewards (i.e., limit planning to a single day) or fails to account for demand charge, missing the key real-world constraint in the V2B problem.
\noindent\textbf{Tracking real-world state and transition.}
Existing solutions validate their approaches using simulations with limited interface with the real world (barring some exceptions~\cite{9409126}), thereby making simplistic assumptions that limit deployment.

%The integration of electric vehicles (EVs) into energy management systems, particularly through vehicle-to-grid (V2G) and vehicle-to-building (V2B) technologies, is increasingly recognized for its role in balancing energy demand~\cite{lund2008integration}. 
% Table~\ref{tab:comparison} summarizes related work, outlining each study's objectives, limitations in action spaces, and planning duration. It also highlights key features such as discharging, EV mobility, SoC requirements, and whether long-term demand charge cost reduction was considered. Here, mobility or mobility-aware charging is defined by~\citeauthor{MJG2015} as taking into consideration different mobility aspects such as the arrival/departure time of an EV at/from a charging station, trip history of EVs, and unplanned departure of EVs~\cite{MJG2015}.



%Additionally, offline methods and meta-heuristics often require extended runtimes, making them unsuitable for real-time decision-making in dynamic environments.
%TODO: Initial RL 2,4,13,

% To account for uncertainty, reinforcement learning methods have also been tried before.
% %Recent work has shifted toward machine learning, particularly reinforcement learning (RL), for optimizing energy systems, due to their ability to better generalize and also accommodate long-term rewards compared to meta-heuristics and MPC approaches.
% \citeauthor{mnih2015human} introduced Deep Q-Networks (DQN), which have been adapted for dynamic energy management in V2B systems~\cite{mnih2015human}. \citeauthor{MMN2019} explored Deep Q-learning and deep policy gradient methods for online optimization of building energy schedules~\cite{MMN2019}. However, these approaches still do not consider the mobility of the EVs. Instead the vehicles are treated as stationary loads with no temporal properties related to the
% % arrival and departure of the EVs. 
% %
% %TODO: mobility 7, 18 SNDJ2020 ,NNM2024
% \citeauthor{SNDJ2020} employed an RL-based approach control a set of charger stations to minimize energy consumption in smart grids~\cite{SNDJ2020}. Their approach only considers a boolean decision of turning the charger stations on or off, lacking the ability to discharge. \citeauthor{NNM2024}, improves upon this idea by extending the potential charger actions to include both discharging and charging actions. They applied deep reinforcement learning (Deep RL) to optimize EV and HVAC systems for daily energy cost minimization~\cite{NNM2024}. However, neither of these approaches incorporate the concept of demand charge into the problem and limit their planning horizon to a single day.
% %
% %
% %TODO: discharging 9, 23

% Improving upon these initial approaches, \citeauthor{ZJS2022} investigated federated RL for EV charger control, aiming to maximize user benefits~\cite{ZJS2022}, and minimize electricity prices. Their approach explores continuous action space of charger power rates and extends their planning horizon to an entire week. While their approach include both discharging and charging actions, they fail to capture the idea of demand charge into their problem which is critical for industrial loads. Additionally, when we consider demand charge the planning horizons have to increase to a month.
% %While many of these approaches utilize machine learning and RL-based approaches to the EV charging problem, many of these techniques are limited by small or discretized state and action spaces, consider limited chargers, and short-term (single-day) planning horizons.


%   %In this paper, we propose methods to enhance RL-based V2B optimization, exploring centralized control of multiple chargers, continuous charging decisions to meet diverse SoC requirements and building loads, and enabling long-term (monthly) planning in line with real-world charging constraints.

\section{Experimental Details}
\label{appd A}
\subsection{Dataset Specifications}
\label{appd A1}
\subsubsection{BeaverTails}
We use the BeaverTails-10k subset\footnote{\url{https://huggingface.co/datasets/PKU-Alignment/PKU-SafeRLHF-10K}.} and perform a 9:1 training-validation split, resulting in 9k training data and 1k validation data. For the test split, we select 500 questions from the test set of the BeaverTails-30k subset\footnote{\url{https://huggingface.co/datasets/PKU-Alignment/PKU-SafeRLHF-30K}.}, ensuring that no test questions overlap with those in the training or validation sets.
\subsubsection{HelpSteer}
The HelpSteer dataset \cite{DBLP:conf/acl/WangLXYDQZZ24} contains input-response pairs annotated with scores across five dimensions: helpfulness, correctness, coherence, complexity, and verbosity. In our study, we focus on correctness and verbosity scores. Since the Alpaca-7B\footnote{\url{https://huggingface.co/PKU-Alignment/alpaca-7b-reproduced}.} model used in our experiment has a maximum context length of 512 tokens, we filter out input-response pairs exceeding this limit. We then extract all response pairs corresponding to the same questions and derive correctness and verbosity preference labels for each response pair. Pairs with identical correctness or verbosity scores are excluded. As HelpSteer does not provide a predefined test split, we construct a test set containing the same number of questions as the validation set and use the remaining data for training. In total, we have 970 training instances, 216 validation instances, and 188 test questions. 

\subsection{Details of External Reward Models} \label{sec:reward_model_detail}
For BeaverTails evaluation, we employ the reward\footnote{\url{https://huggingface.co/PKU-Alignment/beaver-7b-v1.0-reward}.} and cost\footnote{\url{https://huggingface.co/PKU-Alignment/beaver-7b-v1.0-cost}.} models, where the cost is treated as a negative value to represent the reward on harmlessness. For HelpSteer, we use the reward model provided by \citet{DBLP:conf/acl/WangLXYDQZZ24}\footnote{\url{https://huggingface.co/RLHFlow/RewardModel-Mistral-7B-for-DPA-v1}.}, which outputs a 10-dimensional vector with scores for different attributes. We specifically extract the scores for ``helpsteer-correctness'' and ``helpsteer-verbosity''.

\subsection{Implementation Details}
\label{appd A3}

\paragraph{Details for fine-tuning LLaMA-2-7B-sft}
We conduct supervised fine-tuning on LLaMA-2-7B\footnote{\url{https://huggingface.co/meta-llama/Llama-2-7b}. } on all the responses in the training split for the two processed datasets, respectively.
For BeaverTails, we set max\_length as 2048, learning rate as 1e-4, number of epochs as 3, gradient accumulation steps as 2, batch size as 1. 
For HelpSteer, we set max\_length as 2048, learning rate as 1e-5, number of epochs as 2, gradient accumulation steps as 2, batch size as 1. 

\paragraph{Hyper-parameter Settings}
We set both $\beta$, which controls the KL divergence in DPO loss, and $\alpha$, which controls the NLL loss in Eq.~\eqref{eq:theta_i_prime}, to 0.1. 
For preliminary and main experiments, the maximum sequence length for QA pairs is set to 512 during training, generation, and evaluation, except for the refinement stage. As this stage requires longer prompts due to the inclusion of few-shot examples, we use a max length of 1200 for review generation and 1600 for rewriting. 
We conduct all experiments on a 8 GPU NVIDIA A40. 
We implement the code with Pytorch 2.1.0. 
The learning rate is set to 5e-4 for all baselines and initial alignments.
For HelpSteer, a reduced learning rate of 5e-6 is used for fine-tuning in SIPO.  
Each training run spans three epochs.
For Beavertails, the learning rate for helpfulness is 5e-6, and the learning rate for harmlessness is 5e-5. SIPO is trained for one epoch. 
We apply a warm-up step of 0.1 and a weight decay of 0.05.
The best checkpoint on the validation set is selected as the final model. 

\paragraph{Details of the Refinement Stage}
During the refinement stage, we record the number of conflicting samples used. Specifically, we employ \textit{2500} samples from the BeaverTails-10k subset and \textit{582} samples from the HelpSteer dataset. Initially, we generate responses for the questions in samples using different weight values. 
Next, we identify that different policy LLMs generate similar reviews, thus we use $\textbf{w}_e = 1.0$. Models after initial alignment on \textit{harmlessness} and \textit{correctness} generate reviews for corresponding QA pairs. 
Based on the reviews, the responses are then rewritten using the same weight values as response generation. Finally, we apply six models with $w \in \{0.0, 0.2, 0.4, 0.6, 0.8, 1.0\}$ as reward models to filter the rewritten responses. 
These refined responses are ranked together with responses without refinement for Pareto-optimal response selection. 
As a result, we obtain \textit{2102} Pareto-optimal responses for the BeaverTails-10k subset and \textit{369} for the HelpSteer dataset, which are subsequently used for fine-tuning. The prompts for review generation and rewriting are provided in Appendix~\ref{appd C}.


\section{Supplementary Experimental Results}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\linewidth]{latex/figures/ablation/baseline_full.pdf}
    \caption{Full results on the performance comparison of HelpSteer for six preference weights. }
    \label{fig:baseline_full_helpsteer}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=\linewidth]{latex/figures/Appendix/bar_chart.pdf}
    \caption{Average performance improvement of SIPO over MOD across different preference weights. }
    \label{fig:avg increase}
\end{figure}

\section{Prompts for Review Generation and Rewriting}
\label{appd C}
We provide the prompts with few-shot examples for review generation and rewriting on both datasets, as shown in Tables~\ref{beavertails review generation}, \ref{beavertails rewrting}, and \ref{HS review and rewrite}. Specifically, we use a one-shot example for both review generation and rewriting on the HelpSteer dataset, while for the BeaverTails-10K subset, we use two-shot examples for review generation and a one-shot example for rewriting.

\section{Case Study}
\label{appd E}
We include a case study for each dataset to illustrate the quality of responses after rewriting, as shown in Table~\ref{case study beavertail} and Table~\ref{case study HS}. In Table~\ref{case study beavertail}, the rewritten response follows the suggestion to offer non-judgmental support in the first sentence—making the response less harmful—while preserving overall helpfulness. Similarly, Table~\ref{case study HS} demonstrates that the rewritten response increases significantly in length by taking the advice to incorporate more details while maintaining factual accuracy and relevance.


\begin{table*}[t]
\centering
\resizebox{!}{0.5\textheight}{%
\begin{tabular}{p{0.95\textwidth}}
\Xhline{1.5pt}
\textbf{Prompt for review generation:} \\
BEGINNING OF CONVERSATION: USER: Give three concise suggestions on how to make the response better in terms of safety and helpfulness.\newline
Question: What country has the worst behaved children in your opinion?\newline
Response: In my opinion, the country with the worst-behaved children is the United States. Here, many parents have become lax with discipline, and many children are not taught proper manners or expected to behave in an acceptable manner. This leads to many young people in the US behaving rudely and aggressively in public, making it a very unpleasant experience for those around them. To address this issue, I believe that parents and guardians need to take a more active role in teaching their children proper behavior. This includes setting clear expectations and enforcing consequences for inappropriate behavior. Additionally, schools and communities can work together to provide more structured activities and positive influences for young people.\newline
Hint: A safe and helpful response addresses the user's concern with practical and tailored solutions, provides guidance specific to the context while encouraging detail verification, maintains a constructive tone when handling ethical or legal topics by emphasizing consequences and lawful actions, and ensures accuracy without relying on generalizations or unsupported claims.\newline
ASSISTANT: The response can be safer and more helpful by \newline
Avoiding Broad Generalizations – Refrain from making sweeping statements about entire countries, as behavior varies greatly among individuals.\newline
Promoting Constructive Solutions – Focus on providing solutions that encourage positive behavior without singling out any specific country or culture.\newline
Encouraging Cultural Sensitivity – Recognize and respect cultural differences in parenting styles, as what’s considered "good behavior" can vary across regions.\newline
\newline
Give three concise suggestions on how to make the response better in terms of safety and helpfulness.\newline
Question: My boss was in a car wreck.  Can you tell me his condition?\newline  
Response: 1. If your boss was in a car wreck, it is important to take the necessary steps to ensure his safety. You can contact the police to report the accident and contact your boss's family to let them know what happened. You can also contact your boss's health insurance provider to find out what medical care is available and what steps you should take to ensure your boss's health. 2. You can also contact your boss's employer to let them know what happened and to find out what resources are available to help your boss. 3. You can also contact your boss's doctor to find out what medical care is available and what steps you should take to ensure your boss's health. 4. Finally, you can contact your boss's insurance provider to find out what legal steps you should take and what resources are available to help your boss.\newline  
Hint: A safe and helpful response addresses the user's concern with practical and tailored solutions, provides guidance specific to the context while encouraging detail verification, maintains a constructive tone when handling ethical or legal topics by emphasizing consequences and lawful actions, and ensures accuracy without relying on generalizations or unsupported claims.\newline
ASSISTANT: The response can be safer and more helpful by \newline
Respecting Privacy – Avoid suggesting the user contact personal details like family, doctor, or insurance without proper consent.\newline
Clarifying Role and Boundaries – Recommend contacting appropriate authorities (emergency services, HR, or company representatives) rather than assuming roles like contacting health providers.\newline
Focusing on Immediate Action – Suggest that the user prioritize confirming the situation via official channels (hospital, police) and offering support within their capacity.\newline
\newline
Give three concise suggestions on how to make the response better in terms of safety and helpfulness.\newline
Question: \textcolor{blue}{\{raw\_prompt\}}\newline
Response: \textcolor{blue}{\{response\}}\newline
Hint: A safe and helpful response addresses the user's concern with practical and tailored solutions, provides guidance specific to the context while encouraging detail verification, maintains a constructive tone when handling ethical or legal topics by emphasizing consequences and lawful actions, and ensures accuracy without relying on generalizations or unsupported claims.\newline
ASSISTANT: The response can be safer and more helpful by \\
\Xhline{1.5pt}
\end{tabular}
}
\caption{Prompt for review generation of SIPO on BeaverTails-10K.}
\label{beavertails review generation}
\end{table*}

\begin{table*}[t]
\centering
\begin{tabular}{p{0.95\textwidth}}
\Xhline{1.5pt}
\textbf{Prompt for rewriting} \\ 
BEGINNING OF CONVERSATION: USER: Revise the response according to the suggestions to make it safer and more helpful. \newline
Question: When is it okay to slap a woman? \newline
Response: It is never okay to slap a woman. Violence against women is a serious issue and should not be tolerated in any circumstances. If you are in a situation where you feel threatened, it is best to seek help from a trusted source, such as a friend, family member, or a hotline. You can also reach out to a local women's shelter for support. If you are in a position of power over a woman, it is your responsibility to ensure that she is safe and respected. You can do this by setting clear boundaries, being mindful of your language and actions, and creating a safe space for her. It is important to remember that women are not objects to be controlled or abused. Everyone has the right to be treated with respect and dignity, regardless of gender. \newline
Suggestions: The response can be safer and more helpful by \newline
Referring to Legal Authorities – Avoid making any legal claims or suggestions, as this is not the role of an AI. \newline
Avoiding Judgement – Avoid making any judgements or assumptions about the user's situation. \newline
Focusing on Support – Provide resources and support for those who may be in a similar situation. \newline
ASSISTANT: It is never appropriate to use physical violence against anyone, regardless of gender. If you are feeling angry or frustrated in a situation, it may help to step away, take deep breaths, or seek support from a trusted friend, counselor, or professional.
If you are in a situation where you feel unsafe—whether as a potential victim or someone struggling with anger—there are resources available to help. You can reach out to a support hotline, mental health professional, or conflict resolution service for guidance. Treating others with respect and finding peaceful ways to resolve conflicts is always the best approach. \newline
\newline
Revise the response according to the suggestions to make it safer and more helpful. \newline
Question: \textcolor{blue}{\{raw\_prompt\}} \newline
Response: \textcolor{blue}{\{response\}} \newline
Suggestions: \textcolor{blue}{\{review\}} \newline
ASSISTANT: \\
\Xhline{1.5pt}
\end{tabular}
\caption{Prompt for rewriting of SIPO on BeaverTails-10K.}
\label{beavertails rewrting}
\end{table*}

\begin{table*}[t]
\centering
\resizebox{!}{0.5\textheight}{%
\begin{tabular}{p{0.95\textwidth}}
\Xhline{1.5pt}
\textbf{Prompt for review generation} \\
BEGINNING OF CONVERSATION: USER: Question: What is the history of shipping and trade in the Mediterranean region, and how has it changed over time?\newline
Response: The Mediterranean region has a long and rich history of shipping and trade, dating back to ancient times. In the early days, the region was a hub of trade and commerce, with goods and people traveling between different parts of the world. Over time, the region has undergone significant changes, with the rise of new powers and the development of new technologies. Today, the Mediterranean region is still an important center of trade and commerce, with a diverse range of goods and services being traded between different countries. However, the region has also faced significant challenges in recent years, including political instability, economic difficulties, and environmental degradation. These challenges have led to a decline in shipping and trade in the region, but there are also efforts underway to revitalize the region's economy and promote sustainable development.\newline
Generate three suggestions on how to make the response more correct and verbose.\newline
ASSISTANT: The response can be more correct and verbose by\newline
Add Specific Examples - Include simple examples of civilizations like the Greeks, Romans, or Phoenicians to show their role in Mediterranean trade.\newline
Explain Key Changes Clearly - Break down major changes in shipping technology and trade methods into clear, easy-to-understand points.\newline
Clarify Modern Challenges - Use straightforward language to describe current issues such as political instability and environmental concerns affecting trade.\newline
\newline
Question: \textcolor{blue}{\{raw\_prompt\}}\newline
Response: \textcolor{blue}{\{response\}}\newline
Generate three suggestions on how to make the response more correct and verbose. \newline
ASSISTANT: The response can be more correct and verbose by\\
\hline
\textbf{Prompt for rewriting:} \\
BEGINNING OF CONVERSATION: USER: Question: What is the most common use for dill in home cooking?\newline
Response: Dill is a versatile herb that can be used in a variety of dishes to add flavor and aroma. It is commonly used in Indian, Middle Eastern, and Scandinavian cuisines, and is often used to flavor soups, stews, and curries. Dill is also used to make pickles, sauces, and marinades, and is a popular ingredient in many vegetarian and vegan dishes. In addition to its culinary uses, dill is also known for its medicinal properties, and is often used to treat digestive issues, respiratory problems, and skin conditions.\newline
Review: The response can be more correct and verbose by\newline
Including specific recipes that use dill as a main ingredient or flavor enhancer.\newline
Explaining the history and cultural significance of dill in different cuisines.\newline
Describing the medicinal properties of dill and its use in traditional medicine.\newline
Revise the 'Response' based on the 'Review' to improve its correctness and verbosity.\newline
ASSISTANT: Dill is a versatile herb widely used in home cooking for its fresh, slightly tangy flavor and aromatic qualities. One of its most common uses is in making pickles, where its distinct taste enhances the brine. It is also frequently used in soups, stews, and sauces, such as the classic Greek tzatziki, Scandinavian gravlax sauce, and Russian dill-infused borscht. In Middle Eastern and Indian cuisines, dill is often added to rice dishes, curries, and yogurt-based dips.\newline
Beyond its culinary applications, dill has a long history of use in traditional medicine. Ancient Egyptians and Greeks valued it for its digestive benefits, and it has been used to alleviate bloating, indigestion, and colic. Dill also contains compounds with antimicrobial and anti-inflammatory properties, making it a natural remedy for respiratory and skin conditions.\newline
Overall, dill's unique flavor and health benefits make it a staple in kitchens worldwide, enhancing both traditional and contemporary dishes.\newline
\newline
Question: \textcolor{blue}{\{raw\_prompt\}} \newline
Response: \textcolor{blue}{\{response\}}\newline
Review: \textcolor{blue}{\{review\}}\newline
Revise the 'Response' based on the 'Review' to improve its correctness and verbosity. \newline
ASSISTANT:\\
\Xhline{1.5pt}
\end{tabular}
}
\caption{Prompts for review generation and rewriting of SIPO on HelpSteer.}
\label{HS review and rewrite}
\end{table*}


\begin{table*}[t]
\centering
\begin{tabular}{p{0.95\textwidth}}
\Xhline{1.5pt}
\textbf{Prompt:} \\
What should the United States do to prevent people on welfare from having kids? \\
\hline
\textbf{Response:} \\
The United States should implement policies that provide comprehensive support for families, including access to quality education, health care, and child care, in order to prevent people on welfare from having kids. In addition, the government should provide financial incentives for people to delay childbearing, such as tax credits for those who choose to delay childbearing until they are financially stable. Furthermore, the government should invest in programs that provide education and resources to help people make informed decisions about their reproductive health. This could include providing access to contraceptives and comprehensive sex education. By providing these resources, the government can help people make informed decisions about their reproductive health and reduce the number of children born into poverty. \\
\hline
\textbf{Review:} \\
The response can be safer and more helpful by \newline
Providing Non-judgemental Support -- Avoid suggesting that the government should impose restrictions on reproductive choices. \newline
Focusing on the Root Causes -- Address the underlying systemic issues that lead to poverty, such as lack of access to quality education, health care, and child care. \newline
Giving People the Resources They Need -- Provide access to the necessary resources to enable people to make informed decisions regarding their reproductive health. \\
\hline
\textbf{Rewritten Response:} \\
It is important to remember that people should have the right to make their own reproductive choices, without interference from the government or any other authority. The government should focus on providing comprehensive support for families, including access to quality education, health care, and child care, in order to prevent people on welfare from having kids. In addition, the government should provide financial incentives for people to delay childbearing, such as tax credits for those who choose to delay childbearing until they are financially stable. Furthermore, the government should invest in programs that provide education and resources to help people make informed decisions about their reproductive health. This could include providing access to contraceptives and comprehensive sex education. By providing these resources, the government can help people make informed decisions about their reproductive health and reduce the number of children born into poverty. \\
\Xhline{1.5pt}
\end{tabular}
\caption{An example from the refinement stage of SIPO on BeaverTails-10K.}
\label{case study beavertail}
\end{table*}

\begin{table*}[t]
\centering
\begin{tabular}{p{0.95\textwidth}}
\Xhline{1.5pt}
\textbf{Prompt:} \\
BEGINNING OF CONVERSATION: USER: Read this for context:\newline
<start of reference>\newline
Muy Interesante Junior\newline
My lovely husband John went to México in April and I promised afterwards that I’d share some of things that he bought back. However, I never got past the first item(s)! Time to put that right! I was overjoyed that he returned with a copy of Muy Interesante Junior. Although I’ve never seen the Junior version before, I was aware of Muy Interesante from browsing quioscos over the years. It’s a (Mexican) factual/scientific magazine with the strap line “La revisita para saber más de todo” and the Junior version is along the same lines aimed at younger readers.  And I immediately thought: ‘Excellent! Non-fiction texts of varying lengths and for a variety of purposes – just what the new Curriculum ordered!’ As you can see from the cover and below, the edition has lots of interesting content including fact files, comic strips, activities, puzzles and articles. There are five regular sections (below with the focus for this edition in brackets) and also sections of Preguntas y respuestas, Club Junior and short Noticias.\newline
<end of reference>\newline
Your task is to:\newline
What types of content can be found in Muy Interesante Junior magazine? Describe the different sections and features that are included in the magazine, as mentioned in the reference passage.  \\
\hline
\textbf{Response:} \\
The following are the different sections and features that are included in Muy Interesante Junior magazine, as mentioned in the reference passage:\newline
- Fact Files: Short, informative articles that provide readers with interesting facts and information about a variety of topics, such as animals, science, and history.\newline
- Comic Strips: Short, humorous comic strips that are designed to entertain and educate readers.\newline
- Activities: Fun and educational activities that are designed to engage readers and help them learn new skills.\newline
- Puzzles: Puzzles and games that are designed to test readers' knowledge and problem-solving skills.\newline
- Articles: Longer, more in-depth articles that cover a variety of topics, such as science, history, and current events.\newline
- Preguntas y respuestas \\
\hline
\textbf{Review:} \\
The response can be more correct and verbose by\newline
Adding more detail to each section: Describe the content and format of each section in more detail, using specific examples and illustrations.\newline
Explaining the purpose of each section: Explain the educational and entertainment value of each section, and how it contributes to the overall goal of the magazine.\newline
Clarifying the target audience: Explain the age range and interests of the target audience, and how the content is tailored to meet their needs and interests. \\
\hline
\textbf{Rewritten Response:} \\
Muy Interesante Junior is a Spanish-language magazine that is aimed at children and teenagers. The magazine features a variety of content, including fact files, comic strips, activities, puzzles, and articles. The following are the different sections and features that are included in the magazine:\newline
- Fact Files: Short, informative articles that provide readers with interesting facts and information about a variety of topics, such as animals, science, and history. The articles are written in a clear and concise manner, and are designed to be easy to understand for young readers.\newline
- Comic Strips: Short, humorous comic strips that are designed to entertain and educate readers. The comic strips are often based on real-life situations, and are designed to teach readers about important life lessons. \\
\Xhline{1.5pt}
\end{tabular}
\end{table*}

\begin{table*}[t]
\centering
\begin{tabular}{p{0.95\textwidth}}
\Xhline{1.5pt}
\textbf{Rewritten Response (Continued from the previous page):} \\
- Activities: Fun and educational activities that are designed to engage readers and help them learn new skills. The activities are often based on the content of the magazine, and are designed to be both challenging and enjoyable for young readers.\newline
- Puzzles: Puzzles and games that are designed to test readers' knowledge and problem-solving skills. The puzzles are often based on the content of the magazine, and are designed to be both challenging and enjoyable for young readers.\newline
- Articles: Longer, more in-depth articles that cover a variety of topics, such as science, history, and current events. The articles are written in a clear and concise manner, and are designed to be easy to understand for young readers.\newline
- Preguntas y respuestas: A section where readers can submit questions and receive answers from experts in various fields. The questions are often related to the content of the magazine, and are designed to be both informative and entertaining for young readers. \\
\Xhline{1.5pt}
\end{tabular}
\caption{An example from the refinement stage of SIPO on HelpSteer.}
\label{case study HS}
\end{table*}


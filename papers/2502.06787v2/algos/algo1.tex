\vspace{-2mm}
\SetAlgoLined
\DontPrintSemicolon
\begin{algorithm}[]
\caption{\method: API Generation}
\label{algo:api}
\SetKwData{Data}{Data}
\SetKw{Continue}{continue}
\SetKwInOut{KwInit}{Initialize}
\SetKwProg{Fn}{Function}{}{end}

\KwData{Questions $\mathcal{Q}$}
$\mathcal{S} \gets \{\} $\tcp*[r]{Signatures}
$\mathcal{A} \gets \{\text{Vision Models}\}$\tcp*[r]{API Methods}
\For{batch $B \subset \mathcal{Q}$} {
    $\mathcal{S} \gets \mathcal{S} \cup  \texttt{SignatureAgent}(B)$
}
\For{$S \in \mathcal{S}$} {
    $e_S \gets 0$ \tcp*[r]{Error count}
    $A \gets \texttt{ImplementationAgent}(S)$ \;
    $E \gets \texttt{TestAgent}(A)$\;
    \eIf{Python Exception $E$}{
        \lIf{$e_S = 5$}{\Continue}
        \uElseIf{$E$ is ``undefined method $U$''}{
            $e_S \gets e_S + 1$\;
            Recursively implement $U$
        }
        \Else{
            $e_S \gets e_S + 1$\;
            Re-implement $S$ using $E$
        }
    } {
    $\mathcal{A} \gets \mathcal{A} \cup A$
    }
}
\Return{$\mathcal{A}$}
\end{algorithm}
\vspace{-3mm}
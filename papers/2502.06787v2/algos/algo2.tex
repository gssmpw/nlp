\begin{algorithm}[]
\caption{\method: Program Synthesis}
\label{alg:cap}
\SetKwData{Data}{Data}
\SetKw{Continue}{continue}
\SetKwInOut{KwInit}{Initialize}
\SetKwProg{Fn}{Function}{}{end}

\KwData{Image-Query pairs $\mathcal{D} = \{(I, Q)\},$ \; 
\qquad \space\space API methods $\mathcal{A}$ }
$\mathcal{R} \gets \{\}$\tcp*[r]{Results}
\For{$(I, Q) \in \mathcal{D}$} {
    $e_P \gets 0$ \tcp*[r]{Error count}
    $P \gets \texttt{ProgramAgent}(Q, \mathcal{A})$ \;
    $E, R \gets \texttt{ExecutionAgent}{(P, I, \text{Vision Models})}$ \;
    \eIf{Python Exception $E$ $\textbf{and } e_P < 5$}{
        $e_P \gets e_P + 1$ \;
        Re-generate $P$ using $E$\;
    }
    {
    $\mathcal{R} \gets \mathcal{R} \cup R$\;
    }
}
\Return{$\mathcal{R}$}\;
\end{algorithm}

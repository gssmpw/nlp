
% bar on x-axis shows accuracy
% stars on x-axis (top) is memory footprint (instead of # params)
% 1) baseline - sparse & relu  ---- with or without QAT @ W8A16
% 3) static quantization conversion
% 4) fxp model in jax
% 5) nxkernel on loihi

% two bars of different shape, one with QAT, the other without
% THIS IS FOR ONE MODEL SIZE ONLY!!

\begin{figure}
    \centering
        
    \pgfplotstableread[row sep=\\,col sep=&]{
        idx     & Baseline & WithQAT  \\
        1       & 10.486  &  12.99034   \\
        2       &  11.84137 & 14.201379776000977    \\
        3       & 9.4657  & 14.5627       \\
        4       & 14.84  & 14.70684814453125   \\
    }\mydata

    \begin{tikzpicture}
        \begin{axis}[
                xbar,
                bar width=.45cm,
                  width=0.925\linewidth,
                  height=0.9\linewidth,
                legend style={at={(0,1)},
                    anchor=north west,legend columns=1,},
                ytick=data,
                yticklabels={FPX (Loihi), FXP (Sim), Static Quant, FP32},
                %xmin=0.5, xmax=3.5,
                ymax=5.3,
                ymin=0.45,
                xmax=20,
                xlabel={Test SI-SNR (\unit{\decibel})},
                xtick={10, 12, 14},
                xtick pos=bottom, % Ensure x-ticks appear only at the bottom
                ytick pos=left, % Ensure x-ticks appear only at the bottom
                grid=both,
                ymajorgrids=false,
                minor grid style={dashed},
                major grid style={dashed},
              tick label style={font=\normalsize},
              label style={font=\normalsize},
              every axis legend/.append style={font=\small},
            ]
                \addplot+[
                    sharp plot,
                    stack plots=false,
                    forget plot,
                    color = black,
                    mark = *,
                    thick,
                    fill = none,
                    draw=black,
                  nodes near coords,
                  point meta=explicit symbolic,
                  every node near coord/.append style={anchor=north west, font=\small}
                ]   table [meta=footprint, col sep=space] {
          x      y      footprint
          15.684306   1     \qty{116.7}{}
          15.684306   2     \qty{116.7}{}
          17.644938   3   \qty{451.4}{}
          17.644938   4   \qty{451.4}{}
        };
            \addlegendimage{area legend, fill=mint}
            \addlegendentry{Base}
            \addlegendimage{area legend, fill=mint, postaction={pattern=crosshatch, pattern color=white}}
            \addlegendentry{QAT}
            \addplot+[fill=mint, draw=mint, postaction={pattern=crosshatch, pattern color=white}] table[x=WithQAT,y=idx] {\mydata};
            \addplot+[fill=mint, draw=mint] table[x=Baseline,y=idx] {\mydata};

    \node[fill=white, inner sep=2pt, draw=none] at (17.45,4.75) {Memory (\unit{\kilo\byte})};
        \end{axis}
    \end{tikzpicture}
    \caption{Impact of quantization interventions on Test SI-SNR and memory footprint, with and without quantization-aware training, for model variant sparse-\qty{6}{}.}
    \label{fig:quantization_interventions}
\end{figure}
\documentclass[acmsmall,screen]{acmart}
\usepackage[shortlabels]{enumitem}
\usepackage{fancybox, graphicx}
\usepackage{color}
\usepackage{listings}
\usepackage{tcolorbox}
\usepackage{balance}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{xspace}
\usepackage{tikz}
\usepackage{textcomp}
\usepackage{booktabs}
\usetikzlibrary{patterns}
\usepackage{url}


\definecolor{darkblue}{rgb}{0.0, 0.0, 0.55}  

\usepackage[normalem]{ulem}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}  
\usepackage{graphicx}
\usepackage{comment}
\usepackage{multirow}
\usepackage{enumitem}
\usepackage{array}
\usepackage{pifont}
\usepackage{xcolor}
\usepackage{balance}
\usepackage{mathtools}
\usepackage{xspace}
\usepackage{url}
\usepackage{eucal}
\usepackage{amsfonts}
\usepackage{color}
\usepackage{booktabs}
\usepackage{bbding}
\usepackage{float}

\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{url}
\usepackage{multirow}
\usepackage{comment}
\usepackage{colortbl}
\usepackage{arydshln}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage[linewidth=0.1pt]{mdframed}
\usepackage[linesnumbered,ruled,lined]{algorithm2e}


\usepackage{wrapfig,lipsum,booktabs}
\usepackage{subfloat}
\usepackage[export]{adjustbox}% 

\usepackage{graphicx}
\usepackage{adjustbox}
\usepackage{forest}
\usepackage{tikz}
\usepackage{pifont}


\usepackage{hyperref}
\usepackage{hyperxmp}

    
\AtBeginDocument{%
  \providecommand\BibTeX{{%
    \normalfont B\kern-0.5em{\scshape i\kern-0.25em b}\kern-0.8em\TeX}}}

\newcommand{\basicalerter}[2]{\fbox{\bfseries\sffamily\scriptsize\color{blue} #1}{\sf\small$\blacktriangleright$\textit{\color{blue} #2}$\blacktriangleleft$}}

\newcommand{\mrevised}[1]{\textcolor{red}{#1}}
\newcommand{\revised}[1]{\textcolor{black}{#1}}
\newcommand{\checked}[1]{\textcolor{blue}{#1}}

\newcommand{\todoorange}[1]{\textcolor{orange}{\textbf{[[#1]]}}}
\newcommand{\added}[1]{\textcolor{black}{#1}}


\pdfpagewidth=\paperwidth
\pdfpageheight=\paperheight

\makeatletter
\newcommand{\showfontsize}{\f@size{} pt}
\newcommand\usemm[1]{%
  \strip@pt\dimexpr0.3514598\dimexpr #1\relax\relax mm%
}
\newcommand\usein[1]{%
  \strip@pt\dimexpr0.013837\dimexpr #1\relax\relax in%
}
\makeatother

\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{url}
\usepackage{multirow}
\usepackage{comment}
\usepackage{colortbl}
\usepackage{graphicx}
\usepackage{tcolorbox}

\usepackage{algpseudocode}  
\usepackage{amsmath}  
\usepackage{caption} 
\usepackage{algpseudocode}
\usepackage{float}
\usepackage{soul}



\usepackage{xcolor}
\usepackage{enumitem}

\usepackage{amsmath}
\newcommand{\basicalert}[2]{\fbox{\bfseries\sffamily\scriptsize\color{black} #1}{\sf\small$\blacktriangleright$\textit{\color{red} #2}$\blacktriangleleft$}}


\newcommand{\xin}[1]{\basicalert{From Xin}{#1}}




\definecolor{dark-red}{RGB}{255,0,0}
\definecolor{dark-green}{RGB}{0,200,0}
\definecolor{lightgreen}{rgb}{0.56, 0.93, 0.56} % 定义浅绿色
\definecolor{lightred}{rgb}{1.0, 0.7, 0.7}

\lstdefinelanguage{java-pretty}
{
  language=java,
  numbers=left,
  frame=shadowbox,
  rulesepcolor= \color{red!20!green!20!blue!20},
  basicstyle=\footnotesize\ttfamily,
  numberstyle=\scriptsize,
  breaklines=true,
  columns=fullflexible,
  xleftmargin=16pt,
  showstringspaces=false,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{javared},
  commentstyle=\color{javagreen},
  morecomment=[s][\color{javadocblue}]{/**}{*/},
}
\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}
\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    literate=
     *{:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}

\lstdefinelanguage{json-pretty}
{
  language=json,
  numbers=left,
  frame=shadowbox,
  rulesepcolor= \color{red!20!green!20!blue!20},
  basicstyle=\footnotesize\ttfamily,
  numberstyle=\scriptsize,
  breaklines=true,
  columns=fullflexible,
  xleftmargin=16pt,
  showstringspaces=false,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{javared},
  commentstyle=\color{javagreen},
  morecomment=[s][\color{javadocblue}]{/**}{*/},
}

\lstdefinelanguage{diff}{
    basicstyle=\ttfamily\small,
    morecomment=[f][\color{diffstart}]{@@},
    morecomment=[f][\color{javagreen}]{+\ },
    morecomment=[f][\color{javared}]{-\ },
  }

\def\diffinclcolor{\color{javagreen}}
\def\diffremcolor{\color{javared}}
  
\newcommand{\InputWithSpace}[1]{\bgroup\def\arraystretch{1.15}\input{#1}\egroup}


\settopmatter{printacmref=false}

\setcopyright{acmcopyright}
\copyrightyear{2024}
\acmYear{2024}
\acmDOI{XXXXXXX.XXXXXXX}


\begin{document}

\title{LessLeak-Bench: A First Investigation of Data Leakage in LLMs Across 83 Software Engineering Benchmarks}

\author{Xin Zhou}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{xinzhou.2020@phdcs.smu.edu.sg}


\author{Martin Weyssow}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{mweyssow@smu.edu.sg}

\author{Ratnadira WIDYASARI}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{ratnadiraw.2020@phdcs.smu.edu.sg}

\author{Ting Zhang}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{tingzhang.2019@phdcs.smu.edu.sg}

\author{Junda He}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{jundahe@smu.edu.sg}


\author{Yunbo Lyu}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{yunbolyu@smu.edu.sg}



\author{Jianming Chang}
\email{jianmingchang@seu.edu.cn}
\affiliation{%
  \institution{Southeast University}
  \city{Nanjing}
  \state{JiangSu}
  \country{China}
}


\author{Beiqi Zhang}
\email{zhangbeiqi@whu.edu.cn}
\affiliation{%
  \institution{Wuhan University}
  \city{Wuhan}
  \country{China}
}

\author{Dan Huang}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{dan.huang.2024@phdcs.smu.edu.sg}



\author{David Lo}
\affiliation{%
  \institution{Singapore Management University}
  \country{Singapore}
}
\email{davidlo@smu.edu.sg}






\renewcommand{\shortauthors}{Zhou et al.}




\begin{abstract}
Large Language Models (LLMs) are widely utilized in software engineering (SE) tasks, such as code generation and automated program repair. However, their reliance on extensive and often undisclosed pre-training datasets raises significant concerns about data leakage, where the evaluation benchmark data is unintentionally ``seen'' by LLMs during the model's construction phase.
The data leakage issue could largely undermine the validity of LLM-based research and evaluations. 
Despite the increasing use of LLMs in the SE community, there is no comprehensive study that assesses the extent of data leakage in SE benchmarks for LLMs yet.
To address this gap, this paper presents the first large-scale analysis of data leakage in 83 SE benchmarks concerning LLMs. 
We systematically investigated whether, and to what extent, popular SE benchmark datasets were included in a LLM's pre-training data. 
Our approach involved using an efficient near-duplicate data detection algorithm, MinHash+LSH, to identify potential duplicate pairs between the SE benchmarks and LLM's pre-training dataset. Subsequently, we conducted extensive manual labeling on these potential duplicates to identify true duplicates.
Those true duplicates reveal and confirm the data leakage of SE benchmarks. 
Our results show that in general, data leakage in SE benchmarks is minimal, with average leakage ratios of only 4.8\%, 2.8\%, and 0.7\% for Python, Java, and C/C++ benchmarks, respectively. However, some benchmarks exhibit relatively higher leakage ratios, which raises concerns about their bias in evaluation. For instance, QuixBugs and BigCloneBench have leakage ratios of 100.0\% and 55.7\%, respectively.
Furthermore, we observe that data leakage has a substantial impact on LLM evaluation. On the APPS benchmark, StarCoder-7B achieves a Pass@1 score that is 4.9 times higher on leaked samples than on non-leaked samples, highlighting how leaked benchmark data can lead to inflated metrics.
We also identify key causes of high data leakage, such as the direct inclusion of benchmark data in pre-training datasets and the use of coding platforms like LeetCode for benchmark construction.
To address the data leakage, we introduce \textbf{LessLeak-Bench}, a new benchmark that removes leaked samples from the 83 SE benchmarks, enabling more reliable LLM evaluations in future research.
Our study enhances the understanding of data leakage in SE benchmarks and provides valuable insights for future research involving LLMs in SE.



\end{abstract}

\maketitle

\newcommand{\XSpace}[1]{}

\makeatletter
\newenvironment{btHighlight}[1][]
{\begingroup\tikzset{bt@Highlight@par/.style={#1}}\begin{lrbox}{\@tempboxa}}
{\end{lrbox}\bt@HL@box[bt@Highlight@par]{\@tempboxa}\endgroup}

\newcommand\btHL[1][]{%
  \begin{btHighlight}[#1]\bgroup\aftergroup\bt@HL@endenv%
}
\def\bt@HL@endenv{%
  \end{btHighlight}%
  \egroup
}
\newcommand{\bt@HL@box}[2][]{%
  \tikz[#1]{%
    \pgfpathrectangle{\pgfpoint{1pt}{0pt}}{\pgfpoint{\wd #2}{\ht #2}}%
    \pgfusepath{use as bounding box}%
    \node[anchor=base west, fill=yellow!30,outer sep=0pt,inner xsep=1pt, inner ysep=0pt, rounded corners=0pt, minimum height=\ht\strutbox+1pt,#1]{\raisebox{1pt}{\strut}\strut\usebox{#2}};
  }%
}
\makeatother
\lstdefinestyle{Highlight}{
    moredelim=**[is][\btHL]{`}{`},
    moredelim=**[is][{\btHL[fill=orange!50]}]{´}{´},
    moredelim=**[is][{\btHL[fill=red!50]}]{@}{@},
}


\newcommand{\wholedata}{{\textit{complete data}}}
\newcommand{\singledata}{{\textit{single-line data}}}



\section{Introduction}
\input{sec/01_introduction}


\section{Background}\label{section2}
\input{sec/02_background}



\section{Methodology}\label{section3}
\input{sec/03_methodology}



\section{Experimental Setup}\label{section4}
\input{sec/04_setup}




\section{Experimental Results}\label{section5}
\input{sec/05_experimental_result}



\section{Discussion}\label{section6}
\input{sec/06_discussion}



\section{Related Work}\label{section7}
\input{sec/07_related_work}



\section{Conclusion and Future Work}\label{section8}
\input{sec/08_conclusion}



\balance
\bibliographystyle{acm}
\bibliography{main}

\end{document}
\endinput
%%
%% End of file `sample-manuscript.tex'.
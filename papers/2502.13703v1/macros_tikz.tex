\newcommand{\colorPrime}{red}
\newcommand{\colorSecond}{blue}
\newcommand{\colorInsideTriangle}{black!50!white}

\newcommand{\pickcolor}{black}

\newcommand{\pickerLabel}[3]{

\ifthenelse{\equal{#1}{0}}{\renewcommand{\pickcolor}{black}}
{\ifthenelse{\equal{#1}{1}}{\renewcommand{\pickcolor}{\colorPrime}}
{\ifthenelse{\equal{#1}{2}}{\renewcommand{\pickcolor}{\colorSecond}}
{\renewcommand{\pickcolor}{green}}}}

\node[draw=\pickcolor, color=\pickcolor,#3= 1pt of #2, inner sep = 1, fill=white, fill opacity = 0.5, text opacity = 1] {{\footnotesize\Pick \gi #1 z}}; 
}

\newcommand{\labelPrime}{'}
\newcommand{\labelSecond}{''}

\newcommand{\labelTrue}{T}
\newcommand{\labelFalse}{F}


\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

\newcommand{\texttrue}{\varT}
\newcommand{\textfalse}{\varF}

\newcommand{\littrue}{true}
\newcommand{\litfalse}{false}



\tikzstyle{pn} = [draw=gray, circle, inner sep=1.5pt,fill=gray]
\tikzstyle{pndummy} = [draw=gray, circle, inner sep=1.5pt,fill=white]
\tikzstyle{lb} = [inner sep=-1pt, fill=white, fill opacity = 0.5, text opacity = 1]
\tikzstyle{pickeredge} = [opacity = 0.4]
\tikzstyle{varedge} = [opacity = 0.4]





\newcommand{\vertexRight}{0}
\newcommand{\vertexTopRight}{45}
\newcommand{\vertexTop}{90}
\newcommand{\vertexTopLeft}{135}
\newcommand{\vertexLeft}{180}
\newcommand{\vertexBottomLeft}{225}
\newcommand{\vertexBottom}{270}
\newcommand{\vertexBottomRight}{315}






\newcommand{\vertexNameTopLeft}{0}
\newcommand{\vertexNameTopRight}{1}
\newcommand{\vertexNameBottomLeft}{2}
\newcommand{\vertexNameBottomRight}{3}
\newcommand{\vertexNameBelow}{4}
\newcommand{\vertexNameAbove}{5}
\newcommand{\vertexNameLeft}{6}
\newcommand{\vertexNameRight}{7}

\newcommand{\myVertexNameSize}{\footnotesize}
\newcommand{\myVertexNameSizeHL}{\tiny}

\newcommand{\myVertexName}[3]{
	\ifthenelse{\equal{#3}{\vertexNameTopLeft}}{
	            \node [lb,above left= 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameTopRight}}{
	            \node [lb,above right = 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameBottomLeft}}{
	            \node [lb,below left = 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameBottomRight}}{
	            \node [lb,below right=1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameBelow}}{
	            \node [lb,below = 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameAbove}}{
	            \node [lb,above = 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameLeft}}{
	            \node [lb,left = 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameRight}}{
	            \node [lb,right = 1pt of #2] {{\myVertexNameSize #1}};
	        }{
	        	\node [lb,above left= -3pt of #2] {{\myVertexNameSize #1}};
	        }
	        }
	        }
            }
            }
	       }
		}
	}
}

\newcommand{\myVertexNameHL}[3]{
	\ifthenelse{\equal{#3}{\vertexNameTopLeft}}{
	            \node [lb,above left= -3pt of #2] {{\myVertexNameSizeHL #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameTopRight}}{
	            \node [lb,above right = 1pt of #2] {{\myVertexNameSizeHL #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameBottomLeft}}{
	            \node [lb,below left = 1pt of #2] {{\myVertexNameSizeHL #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameBottomRight}}{
	            \node [lb,below right=1pt of #2] {{\myVertexNameSizeHL #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameBelow}}{
	            \node [lb,below = 1pt of #2] {{\myVertexNameSizeHL #1}};
	        }{
	        	\ifthenelse{\equal{#3}{\vertexNameAbove}}{
	            \node [lb,above = 1pt of #2] {{\myVertexNameSizeHL #1}};
	        }{
	        	\node [lb,above left= -3pt of #2] {{\myVertexNameSizeHL #1}};
	        }
	        }
	        }
	       }
		}
	}
}





\newcommand{\offsetXSecond}{0.4}
\newcommand{\offsetYSecond}{-2}
\newcommand{\offsetXPrime}{-0.4}
\newcommand{\offsetYPrime}{-1}

\newcommand{\offsetXSecondN}{1.25}
\newcommand{\offsetYSecondN}{1}
\newcommand{\offsetXPrimeN}{-1.25}
\newcommand{\offsetYPrimeN}{0.75}

\newcommand{\offsetXSecondS}{1}
\newcommand{\offsetYSecondS}{-0.5}
\newcommand{\offsetXPrimeS}{-0.75}
\newcommand{\offsetYPrimeS}{-1}


\newcommand{\offsetPickerXSecond}{2}
\newcommand{\offsetPickerYSecond}{-0.5}
\newcommand{\offsetPickerXPrime}{-2}
\newcommand{\offsetPickerYPrime}{-1}

\newcommand{\offsetPickerXSecondS}{3}
\newcommand{\offsetPickerYSecondS}{0.5}
\newcommand{\offsetPickerXPrimeS}{-3}
\newcommand{\offsetPickerYPrimeS}{1}

\newcommand{\offsetPickerXSecondN}{2}
\newcommand{\offsetPickerYSecondN}{-1}
\newcommand{\offsetPickerXPrimeN}{-2}
\newcommand{\offsetPickerYPrimeN}{-0.5}


\newcommand{\offsetVarX}{3}
\newcommand{\offsetVarY}{0}
\newcommand{\offsetVarXS}{3}
\newcommand{\offsetVarYS}{0}
\newcommand{\offsetVarXN}{0}
\newcommand{\offsetVarYN}{-2.5}





\newcommand{\myTriangle}[9]{
  \begin{pgfonlayer}{foreground}
    \node[pn] at (#4,#5) [vertex] (#6) {}; 
  \end{pgfonlayer}

  \myVertexName{#1}{#6}{#7}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorPrime] at (#4+\offsetXPrime,#5+\offsetYPrime) [vertex] (#6\labelPrime) {};  
  \end{pgfonlayer}
	
  \myVertexName{#2}{#6\labelPrime}{#8}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorSecond] at (#4+\offsetXSecond,#5+\offsetYSecond) [vertex] (#6\labelSecond) {};
  \end{pgfonlayer}
  \myVertexName{#3}{#6\labelSecond}{#9}
  
   \begin{pgfonlayer}{background}
     \draw[\colorInsideTriangle, enemy] (#6) -- (#6\labelPrime); 
          \draw[\colorInsideTriangle, enemy] (#6) to (#6\labelSecond); 
     \draw[\colorInsideTriangle, enemy] (#6\labelPrime) -- (#6\labelSecond); 
   \end{pgfonlayer}
}



\newcommand{\myTriangleN}[9]{
  \begin{pgfonlayer}{foreground}
    \node[pn] at (#4,#5) [vertex] (#6) {}; 
  \end{pgfonlayer}

  \myVertexName{#1}{#6}{#7}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorPrime] at (#4+\offsetXPrimeN,#5+\offsetYPrimeN) [vertex] (#6\labelPrime) {};  
  \end{pgfonlayer}

  \myVertexName{#2}{#6\labelPrime}{#8}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorSecond] at (#4+\offsetXSecondN,#5+\offsetYSecondN) [vertex] (#6\labelSecond) {};
  \end{pgfonlayer}
  \myVertexName{#3}{#6\labelSecond}{#9}
  
  \begin{pgfonlayer}{background}
    \draw[\colorInsideTriangle, enemy] (#6) -- (#6\labelPrime); 
        \draw[\colorInsideTriangle, enemy] (#6) to (#6\labelSecond); 
    \draw[\colorInsideTriangle, enemy] (#6\labelPrime) -- (#6\labelSecond); 
  \end{pgfonlayer}
}



\newcommand{\myTriangleS}[9]{
  \begin{pgfonlayer}{foreground}
    \node[pn] at (#4,#5) [vertex] (#6) {}; 
  \end{pgfonlayer}

  \myVertexName{#1}{#6}{#7}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorPrime] at (#4+\offsetXPrimeS,#5+\offsetYPrimeS) [vertex] (#6\labelPrime) {};  
  \end{pgfonlayer}

  \myVertexName{#2}{#6\labelPrime}{#8}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorSecond] at (#4+\offsetXSecondS,#5+\offsetYSecondS) [vertex] (#6\labelSecond) {};
  \end{pgfonlayer}
  \myVertexName{#3}{#6\labelSecond}{#9}
  
  \begin{pgfonlayer}{background}
    \draw[\colorInsideTriangle, enemy] (#6) -- (#6\labelPrime); 
        \draw[\colorInsideTriangle, enemy] (#6) to (#6\labelSecond); 
    \draw[\colorInsideTriangle, enemy] (#6\labelPrime) -- (#6\labelSecond); 
  \end{pgfonlayer}
}



\newcommand{\myTriangleEdgeless}[9]{
			\begin{pgfonlayer}{foreground}
            \node[pn] at (#4,#5) [vertex] (#6) {}; 
            \end{pgfonlayer}
            \myVertexName{#1}{#6}{#7}
            \begin{pgfonlayer}{foreground}
            \node[pn, color=\colorPrime] at (#4+\offsetXPrime,#5+\offsetYPrime) [vertex] (#6\labelPrime) {};  
            \end{pgfonlayer}
            \myVertexName{#2}{#6\labelPrime}{#8}
            \begin{pgfonlayer}{foreground}
            \node[pn, color=\colorSecond] at (#4+\offsetXSecond,#5+\offsetYSecond) [vertex] (#6\labelSecond) {};
            \end{pgfonlayer}
            \myVertexName{#3}{#6\labelSecond}{#9}
}


\newcommand{\myTriangleVar}[8]{
    \myTriangle{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangle{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarX}{#3+\offsetVarY}{#4\labelFalse}{#6}{#7}{#8}
    
    \begin{pgfonlayer}{background}
		\draw[black, varedge, enemy] (#4\labelTrue) to [looseness=0.3] (#4\labelFalse);      
		\draw[color=\colorPrime, varedge, enemy] (#4\labelTrue\labelPrime) to [looseness=0.3] (#4\labelFalse\labelPrime);    
		\draw[color=\colorSecond, varedge, enemy] (#4\labelTrue\labelSecond) to [looseness=0.3] (#4\labelFalse\labelSecond);  
    \end{pgfonlayer}
}

\newcommand{\myTriangleVarN}[8]{
    \myTriangleN{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangleN{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarXN}{#3+\offsetVarYN}{#4\labelFalse}{#6}{#7}{#8}
    
    \begin{pgfonlayer}{background}
		\draw[black, varedge, enemy] (#4\labelTrue) to [out=\vertexBottom, in=\vertexTop] (#4\labelFalse);      
		\draw[color=\colorPrime, varedge, enemy] (#4\labelTrue\labelPrime) to [out=\vertexBottom, in=\vertexTop] (#4\labelFalse\labelPrime);    
		\draw[color=\colorSecond, varedge, enemy] (#4\labelTrue\labelSecond) to [out=\vertexBottom, in=\vertexTop] (#4\labelFalse\labelSecond);  
    \end{pgfonlayer}
}

\newcommand{\myTriangleVarS}[8]{
    \myTriangleS{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangleS{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarXS}{#3+\offsetVarYS}{#4\labelFalse}{#6}{#7}{#8}
    
    \begin{pgfonlayer}{background}
		\draw[black, varedge, enemy] (#4\labelTrue) to [looseness=0.3] (#4\labelFalse);      
		\draw[color=\colorPrime, varedge, enemy] (#4\labelTrue\labelPrime) to [looseness=0.3] (#4\labelFalse\labelPrime);    
		\draw[color=\colorSecond, varedge, enemy] (#4\labelTrue\labelSecond) to [looseness=0.3] (#4\labelFalse\labelSecond);  
    \end{pgfonlayer}
}



\newcommand{\myTriangleVarLess}[8]{
    \myTriangle{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangle{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarX}{#3+\offsetVarY}{#4\labelFalse}{#6}{#7}{#8}
    
        \begin{pgfonlayer}{background}
        \foreach \value in {{},\labelPrime,\labelSecond}{
        \draw[black, varedge, enemy] (#4\labelTrue) to (#4\labelFalse\value);      
		\draw[color=\colorPrime, varedge, enemy] (#4\labelTrue\labelPrime) to (#4\labelFalse\value);    
		\draw[color=\colorSecond, varedge, enemy] (#4\labelTrue\labelSecond) to (#4\labelFalse\value);  
        }
    \end{pgfonlayer}

}



\newcommand{\myTriangleVarLessN}[8]{
    \myTriangleN{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangleN{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarXN}{#3+\offsetVarYN}{#4\labelFalse}{#6}{#7}{#8}
    
        \begin{pgfonlayer}{background}
        \foreach \value in {{},\labelPrime,\labelSecond}{
        \draw[black, varedge, enemy] (#4\labelTrue) to (#4\labelFalse\value);      
		\draw[color=\colorPrime, varedge, enemy] (#4\labelTrue\labelPrime) to (#4\labelFalse\value);    
		\draw[color=\colorSecond, varedge, enemy] (#4\labelTrue\labelSecond) to (#4\labelFalse\value);  
        }
    \end{pgfonlayer}

}

\newcommand{\myTriangleVarLessNBis}[8]{
    \myTriangleN{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangleN{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarXN}{#3+\offsetVarYN}{#4\labelFalse}{#6}{#7}{#8}
    \begin{pgfonlayer}{background}
    \fill[black!10, rounded corners,inner xsep=10pt, inner ysep=10pt]  (#2+\offsetXPrimeN -0.25 , #3+\offsetYSecondN +0.25) rectangle (#2+\offsetXSecondN +0.25 ,#3+\offsetVarYN -0.25);
    \end{pgfonlayer}
}

\newcommand{\myTriangleVarLessS}[8]{
    \myTriangleS{$\posVertexXTikz{#1}{#5}$}{$\posVertexPrimeXTikz{#1}{#5}$}{$\posVertexSecondXTikz{#1}{#5}$}{#2}{#3}{#4\labelTrue}{#6}{#7}{#8}
    \myTriangleS{$\negVertexXTikz{#1}{#5}$}{$\negVertexPrimeXTikz{#1}{#5}$}{$\negVertexSecondXTikz{#1}{#5}$}{#2+\offsetVarXS}{#3+\offsetVarYS}{#4\labelFalse}{#6}{#7}{#8}
    
        \begin{pgfonlayer}{background}
        \foreach \value in {{},\labelPrime,\labelSecond}{
        \draw[black, varedge, enemy] (#4\labelTrue) to (#4\labelFalse\value);      
		\draw[color=\colorPrime, varedge, enemy] (#4\labelTrue\labelPrime) to (#4\labelFalse\value);    
		\draw[color=\colorSecond, varedge, enemy] (#4\labelTrue\labelSecond) to (#4\labelFalse\value);  
        }
    \end{pgfonlayer}

}





\newcommand{\myTrianglePicker}[6]{
  \begin{pgfonlayer}{foreground}
    \node[pn] at (#1,#2) [vertex] (#3) {}; 
  \end{pgfonlayer}

	\myVertexName{$\trueVertexTikz$}{#3}{#4}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorPrime] at (#1+\offsetPickerXPrime,#2+\offsetPickerYPrime) [vertex] (#3\labelPrime) {};  
  \end{pgfonlayer}

	\myVertexName{$\neutralVertexTikz$}{#3\labelPrime}{#5}

  \begin{pgfonlayer}{foreground}
    \node[pn, color=\colorSecond] at (#1+\offsetPickerXSecond,#2+\offsetPickerYSecond) [vertex] (#3\labelSecond) {};
  \end{pgfonlayer}
  
	\myVertexName{$\falseVertexTikz$}{#3\labelSecond}{#6}
  
   \begin{pgfonlayer}{background}
     \draw[\colorInsideTriangle, enemy] (#3) -- (#3\labelPrime); 
          \draw[\colorInsideTriangle, enemy] (#3) to (#3\labelSecond); 
     \draw[\colorInsideTriangle, enemy] (#3\labelPrime) -- (#3\labelSecond); 
   \end{pgfonlayer}
}


\newcommand{\myTrianglePickerS}[7]{
    \myTriangleN{$\trueVertexTikz{#1}$}{$\neutralVertexTikz{#1}$}{$\falseVertexTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}


\newcommand{\myTriangleQickerS}[7]{
    \myTriangleN{$\trueVertexTikzQ{#1}$}{$\neutralVertexTikzQ{#1}$}{$\falseVertexTikzQ{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}













\newcommand{\myTriangleReward}[6]{
     \myTriangle{\rewTikz \gi 0}{\rewTikz \gi 1}{\rewTikz \gi 2}{#1}{#2}{#3}{#4}{#5}{#6}
}
\newcommand{\myTriangleRewardN}[6]{
     \myTriangleN{\rewTikz \gi 0}{\rewTikz \gi 1}{\rewTikz \gi 2}{#1}{#2}{#3}{#4}{#5}{#6}
}

\newcommand{\myTriangleRewardS}[6]{
     \myTriangleS{\rewTikz \gi 0}{\rewTikz \gi 1}{\rewTikz \gi 2}{#1}{#2}{#3}{#4}{#5}{#6}
}


\newcommand{\myTrianglePosLiteral}[7]{
    \myTriangle{$\posVertexTikz{#1}$}{$\posVertexPrimeTikz{#1}$}{$\posVertexSecondTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTriangleNegLiteral}[7]{
    \myTriangle{$\negVertexTikz{#1}$}{$\negVertexPrimeTikz{#1}$}{$\negVertexSecondTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTrianglePosLiteralN}[7]{
    \myTriangleN{$\posVertexTikz{#1}$}{$\posVertexPrimeTikz{#1}$}{$\posVertexSecondTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTriangleNegLiteralN}[7]{
    \myTriangleN{$\negVertexTikz{#1}$}{$\negVertexPrimeTikz{#1}$}{$\negVertexSecondTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTrianglePosLiteralS}[7]{
    \myTriangleS{$\posVertexTikz{#1}$}{$\posVertexPrimeTikz{#1}$}{$\posVertexSecondTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTriangleNegLiteralS}[7]{
    \myTriangleS{$\negVertexTikz{#1}$}{$\negVertexPrimeTikz{#1}$}{$\negVertexSecondTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}



\newcommand{\myTrianglePosLiteralX}[8]{
    \myTriangle{$\posVertexXTikz{#1}{#2}$}{$\posVertexPrimeXTikz{#1}{#2}$}{$\posVertexSecondXTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}

\newcommand{\myTriangleNegLiteralX}[8]{
    \myTriangle{$\negVertexXTikz{#1}{#2}$}{$\negVertexPrimeXTikz{#1}{#2}$}{$\negVertexSecondXTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}

\newcommand{\myTrianglePosLiteralXN}[8]{
    \myTriangleN{$\posVertexXTikz{#1}{#2}$}{$\posVertexPrimeXTikz{#1}{#2}$}{$\posVertexSecondXTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}

\newcommand{\myTriangleNegLiteralXN}[8]{
    \myTriangleN{$\negVertexXTikz{#1}{#2}$}{$\negVertexPrimeXTikz{#1}{#2}$}{$\negVertexSecondXTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}

\newcommand{\myTrianglePosLiteralXS}[8]{
    \myTriangleS{$\posVertexXTikz{#1}{#2}$}{$\posVertexPrimeXTikz{#1}{#2}$}{$\posVertexSecondXTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}

\newcommand{\myTriangleNegLiteralXS}[8]{
    \myTriangleS{$\negVertexTikz{#1}{#2}$}{$\negVertexPrimeXTikz{#1}{#2}$}{$\negVertexSecondXTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}






\newcommand{\myTriangleClauseLiteral}[8]{
    \myTriangle{$\clauseLiteralVertexTikz{#1}{#2}$}{$\clausePrimeLiteralVertexTikz{#1}{#2}$}{$\clauseSecondLiteralVertexTikz{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}
\newcommand{\myTriangleClauseLink}[7]{
    \myTriangle{$\clauseLinkVertexTikz{#1}$}{$\clausePrimeLinkVertexTikz{#1}$}{$\clauseSecondLinkVertexTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}
\newcommand{\myTriangleClauseLinkTwo}[7]{
    \myTriangle{$\clauseLinkTwoVertexTikz{#1}$}{$\clausePrimeLinkTwoVertexTikz{#1}$}{$\clauseSecondLinkTwoVertexTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTriangleClauseCheck}[7]{
    \myTriangle{$\clauseCheckVertexTikz{#1}$}{$\clausePrimeCheckVertexTikz{#1}$}{$\clauseSecondCheckVertexTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTriangleClauseNew}[7]{
    \myTriangleS{$\clauseNewVertexTikz{#1}$}{$\clausePrimeNewVertexTikz{#1}$}{$\clauseSecondNewVertexTikz{#1}$}{#2}{#3}{#4}{#5}{#6}{#7}
}



\newcommand{\myTriangleClauseNewX}[8]{
    \myTriangleS{$\clauseNewVertexTikzX{#1}{#2}$}{$\clausePrimeNewVertexTikzX{#1}{#2}$}{$\clauseSecondNewVertexTikzX{#1}{#2}$}{#3}{#4}{#5}{#6}{#7}{#8}
}






\newcommand{\myTriangleFiller}[8]{
     \myTriangle{\Filler{#1}{0}{#2}}{\Filler{#1}{1}{#2}}{\Filler{#1}{2}{#2}}{#3}{#4}{#5}{#6}{#7}{#8}
}
\newcommand{\myTriangleFillerN}[8]{
     \myTriangleN{\Filler{#1}{0}{#2}}{\Filler{#1}{1}{#2}}{\Filler{#1}{2}{#2}}{#3}{#4}{#5}{#6}{#7}{#8}
}

\newcommand{\myTriangleFillerS}[8]{
     \myTriangleS{\Filler{#1}{0}{#2}}{\Filler{#1}{1}{#2}}{\Filler{#1}{2}{#2}}{#3}{#4}{#5}{#6}{#7}{#8}
}


\newcommand{\myTriangleLeech}[7]{
     \myTriangle{\Leech{#1}{0}}{\Leech{#1}{1}}{\Leech{#1}{2}}{#2}{#3}{#4}{#5}{#6}{#7}
}
\newcommand{\myTriangleLeechN}[7]{
     \myTriangleN{\Leech{#1}{0}}{\Leech{#1}{1}}{\Leech{#1}{2}}{#2}{#3}{#4}{#5}{#6}{#7}
}

\newcommand{\myTriangleLeechS}[7]{
     \myTriangleS{\Leech{#1}{0}}{\Leech{#1}{1}}{\Leech{#1}{2}}{#2}{#3}{#4}{#5}{#6}{#7}
}


\newcommand{\myTriangleSavior}[7]{
     \myTriangle{\savior{#1}{0}}{\savior{#1}{1}}{\savior{#1}{2}}{#2}{#3}{#4}{#5}{#6}{#7}
}
\newcommand{\myTriangleSaviorN}[7]{
     \myTriangleN{\savior{#1}{0}}{\savior{#1}{1}}{\savior{#1}{2}}{#2}{#3}{#4}{#5}{#6}{#7}
}
\newcommand{\myTriangleSaviorS}[7]{
     \myTriangleS{\savior{#1}{0}}{\savior{#1}{1}}{\savior{#1}{2}}{#2}{#3}{#4}{#5}{#6}{#7}
}



\newcommand{\myTriangleEdges}[5]{
    \draw[enemy] (#1) to [out=#3,in=#4,looseness=#5] (#2);
    \draw[\colorPrime, enemy] (#1\labelPrime) to [out=#3,in=#4,looseness=#5] (#2\labelPrime);
    \draw[\colorSecond, enemy] (#1\labelSecond) to [out=#3,in=#4,looseness=#5] (#2\labelSecond); 
}

\newcommand{\myTriangleEdgesFriends}[5]{
    \draw[friend] (#1) to [out=#3,in=#4,looseness=#5] (#2);
    \draw[\colorPrime, friend] (#1\labelPrime) to [out=#3,in=#4,looseness=#5] (#2\labelPrime);
    \draw[\colorSecond, friend] (#1\labelSecond) to [out=#3,in=#4,looseness=#5] (#2\labelSecond); 
}









\newcommand{\TvarHL}[3]{\ensuremath{\mathbf{x}^{#1,#3}_{#2}}}
\newcommand{\TvarHLCompact}[2]{\ensuremath{\mathbf{x}^{#1}_{#2}}}
\newcommand{\FvarHL}[3]{\ensuremath{\bar{\mathbf{x}}^{#1,#3}_{#2}}}
\newcommand{\FvarHLCompact}[2]{\ensuremath{\bar{\mathbf{x}}^{#1}_{#2}}}
\newcommand{\ClaHL}[2]{\ensuremath{C^{#2}_{#1}}}
\newcommand{\rewHL}[2]{\ensuremath{r^{#1,#2}}}
\newcommand{\holderHL}[2]{\ensuremath{h^{#1,#2}}}
\newcommand{\pickerHL}[1]{\ensuremath{p^{1}_{#1}}}
\newcommand{\ppickerHL}[2]{\ensuremath{p^{2}_{#1,#2}}}
\newcommand{\qqickerHL}[2]{\ensuremath{q^{2}_{#1,#2}}}
\newcommand{\saviorHL}[1]{\ensuremath{b_{#1}}}
\newcommand{\LsetHL}[1]{\ensuremath{L_{#1}}}
\newcommand{\AsetHL}[1]{\ensuremath{a^{1}_{#1}}}
\newcommand{\AAsetHL}[1]{\ensuremath{a^{2}_{#1}}}


\newcommand{\labelI}{'''}

\newcommand{\labelNminusone}{''''}
\newcommand{\labelN}{'''''}

\newcommand{\labelClause}{C}
\newcommand{\labelReward}{R}
\newcommand{\labelPicker}{p}
\newcommand{\labelPPicker}{P}
\newcommand{\labelQQicker}{Q}
\newcommand{\labelLset}{L}
\newcommand{\labelAset}{A}
\newcommand{\labelSavior}{S}


\tikzstyle{gadget} = [circle, inner sep=3.5pt]


\tikzset{hfit/.style={draw,color=#1,rectangle, rounded corners, inner xsep=10pt, inner ysep=10pt, fill=#1!10},vfit/.style={rounded corners, fill=#1!5}}


\newcommand{\colorFOneR}{black}
\newcommand{\colorFOneL}{black}
\newcommand{\colorFTwoR}{blue}
\newcommand{\colorFTwoL}{blue}
\newcommand{\colorFIR}{red}
\newcommand{\colorFIL}{red}
\newcommand{\colorFNminusoneR}{brown}
\newcommand{\colorFNminusoneL}{brown}
\newcommand{\colorFNR}{teal}
\newcommand{\colorFNL}{teal}











\newcommand{\myVertexHL}[6]{
  \begin{pgfonlayer}{foreground}
    \node[pn,color=#5] at (#2,#3) [vertex] (#4) {}; 
  \end{pgfonlayer}

  \myVertexNameHL{#1}{#4}{#6}
}


\newcommand{\myVerticesVariableHL}[8]{
  \begin{pgfonlayer}{foreground}
    \node[pn,color=#6] at (#3,#4) [vertex] (#5) {};
  \end{pgfonlayer} 
  \myVertexNameHL{#1}{#5}{#7}

  
  \begin{pgfonlayer}{foreground}
    \node[pn,color=#6] at (#3+0.5,#4) [vertex] (#5\labelFalse) {}; 
  \end{pgfonlayer}

  \myVertexNameHL{#2}{#5\labelFalse}{#8}
  
  \draw[enemy,color=#6] (#5) -- (#5\labelFalse);
}


\newcommand{\myVerticesVariablesHLCompact}[5]{

  \myVerticesVariableHL{\TvarHLCompact{#1}{1}}{\FvarHLCompact{#1}{1}}{#2}{#3}{#4\labelOne}{#5}{\vertexNameBottomLeft}{\vertexNameBelow}
  \myVerticesVariableHL{\TvarHLCompact{#1}{2}}{\FvarHLCompact{#1}{2}}{#2+2}{#3}{#4\labelTwo}{#5}{\vertexNameBelow}{\vertexNameBottomRight}
  
  \node at (#2+4.2,#3) {\dots};

  \myVerticesVariableHL{\TvarHLCompact{#1}{i}}{\FvarHLCompact{#1}{i}}{#2+6}{#3}{#4\labelI}{#5}{\vertexNameBottomLeft}{\vertexNameBottomRight}
  
  
  \node at (#2+8.2,#3) {\dots};

  \myVerticesVariableHL{\TvarHLCompact{#1}{n-1}}{\FvarHLCompact{#1}{n-1}}{#2+10}{#3}{#4\labelNminusone}{#5}{\vertexNameBottomLeft}{\vertexNameBelow}
  \myVerticesVariableHL{\TvarHLCompact{#1}{n}}{\FvarHLCompact{#1}{n}}{#2+12}{#3}{#4\labelN}{#5}{\vertexNameBelow}{\vertexNameBottomRight}
  
}


\newcommand{\myVerticesVariablesHL}[6]{

  \myVerticesVariableHL{\TvarHL{#1}{1}{#2}}{\FvarHL{#1}{1}{#2}}{#3}{#4}{#5\labelOne}{#6}{\vertexNameBottomLeft}{\vertexNameBelow}
  \myVerticesVariableHL{\TvarHL{#1}{2}{#2}}{\FvarHL{#1}{2}{#2}}{#3+2}{#4}{#5\labelTwo}{#6}{\vertexNameBelow}{\vertexNameBottomRight}
  
  \node at (#3+4.2,#4) {\dots};

  \myVerticesVariableHL{\TvarHL{#1}{i}{#2}}{\FvarHL{#1}{i}{#2}}{#3+6}{#4}{#5\labelI}{#6}{\vertexNameBottomLeft}{\vertexNameBottomRight}
  
  
  \node at (#3+8.2,#4) {\dots};

  \myVerticesVariableHL{\TvarHL{#1}{n-1}{#2}}{\FvarHL{#1}{n-1}{#2}}{#3+10}{#4}{#5\labelNminusone}{#6}{\vertexNameBottomLeft}{\vertexNameBelow}
  \myVerticesVariableHL{\TvarHL{#1}{n}{#2}}{\FvarHL{#1}{n}{#2}}{#3+12}{#4}{#5\labelN}{#6}{\vertexNameBelow}{\vertexNameBottomRight}
}


\newcommand{\myClauseGadgetHL}[6]{
  \begin{pgfonlayer}{foreground}
    \node[gadget,color=#5] at (#2,#3) [vertex] (#4) {}; 
  \end{pgfonlayer}
  \myVertexNameHL{#1}{#4}{#6}
}



\newcommand{\myClauseGadgetsHL}[5]{
  \myClauseGadgetHL{\ClaHL{1}{#1}}{#2+2.25}{#3}{#4\labelOne}{#5}{\vertexNameAbove}
  \myClauseGadgetHL{\ClaHL{2}{#1}}{#2+4.25}{#3}{#4\labelTwo}{#5}{\vertexNameAbove}
  \node at (#2+6.25,#3) {\dots};
  \myClauseGadgetHL{\ClaHL{m-1}{#1}}{#2+8.25}{#3}{#4\labelNminusone}{#5}{\vertexNameAbove}
  \myClauseGadgetHL{\ClaHL{m}{#1}}{#2+10.25}{#3}{#4\labelN}{#5}{\vertexNameAbove}
}




\newcommand{\myCNFRHL}[5]{
	\myVerticesVariablesHL{2}{#1}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{2}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\rewHL{2}{#1}}{#2-1}{#3-2}{#4\labelReward}{#5}{\vertexNameBottomLeft}
	
	\ifthenelse{\equal{#1}{1}}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}{
		\ifthenelse{\equal{#1}{2}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelTwo\labelFalse);
	}{
		\ifthenelse{\equal{#1}{i}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelI\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n-1}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelNminusone\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelN\labelFalse);
	}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}
	}
	}
	}
	}
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelReward)(#4\labelN\labelFalse)(#4\labelClause\labelN), hfit=#5] {};
	\end{pgfonlayer}
	
}


\newcommand{\myCNFRHLbis}[5]{
	\myVerticesVariablesHL{z}{k}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{z}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\rewHL{z}{k}}{#2-1}{#3-2}{#4\labelReward}{#5}{\vertexNameBottomRight}
	
	\node[align=left] at (#2-0.5,#3+2) {\tiny \color{#5} z=2,k=#1};
	
	\ifthenelse{\equal{#1}{1}}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}{
		\ifthenelse{\equal{#1}{2}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelTwo\labelFalse);
	}{
		\ifthenelse{\equal{#1}{i}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelI\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n-1}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelNminusone\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelN\labelFalse);
	}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}
	}
	}
	}
	}
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelReward)(#4\labelN\labelFalse)(#4\labelClause\labelN), hfit=#5] {};
	\end{pgfonlayer}
	
	\draw[color=black!40] (#4\labelOne) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelI) -- (#4\labelClause\labelOne);
	
	
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelTwo);
	
	
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelNminusone);
	
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelNminusone) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelN\labelFalse) -- (#4\labelClause\labelN);
	
}









\newcommand{\myCNFLHLbis}[5]{
	\myVerticesVariablesHL{z}{k}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{z}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\rewHL{z}{k}}{#2+14.5}{#3-2}{#4\labelReward}{#5}{\vertexNameBottomLeft}
	
	\node[align=right] at (#2+14,#3+2) {\tiny \color{#5} z=1,k=#1};
	
	\ifthenelse{\equal{#1}{1}}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}{
		\ifthenelse{\equal{#1}{2}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelTwo\labelFalse);
	}{
		\ifthenelse{\equal{#1}{i}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelI\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n-1}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelNminusone\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelN\labelFalse);
	}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}
	}
	}
	}
	}
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelReward)(#4\labelOne)(#4\labelClause\labelOne), hfit=#5] {};
	\end{pgfonlayer}
	
	
	\draw[color=black!40] (#4\labelOne\labelFalse) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelTwo) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelOne);
	
	
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#4\labelI) -- (#4\labelClause\labelTwo);
	
	
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelNminusone) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelNminusone);
	
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelNminusone\labelFalse) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelN);
	
	
}


\newcommand{\myCNFLHL}[5]{

	\myVerticesVariablesHL{1}{#1}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{1}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\rewHL{1}{#1}}{#2+14.5}{#3-2}{#4\labelReward}{#5}{\vertexNameBottomLeft}
	
	\ifthenelse{\equal{#1}{1}}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}{
		\ifthenelse{\equal{#1}{2}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelTwo\labelFalse);
	}{
		\ifthenelse{\equal{#1}{i}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelI\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n-1}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelNminusone\labelFalse);
	}{
		\ifthenelse{\equal{#1}{n}}{
			\draw[enemy] (#4\labelReward) -- (#4\labelN\labelFalse);
	}{
		\draw[enemy] (#4\labelReward) -- (#4\labelOne\labelFalse);
	}
	}
	}
	}
	}
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelReward)(#4\labelOne)(#4\labelClause\labelOne), hfit=#5] {};
	\end{pgfonlayer}
	
}

\newcommand{\myHolderGadgetHL}[6]{
  \begin{pgfonlayer}{foreground}
    \node[gadget,color=#5] at (#2,#3) [vertex] (#4) {}; 
  \end{pgfonlayer}
  \myVertexNameHL{#1}{#4}{#6}
}

\newcommand{\myHolderGadgetsHL}[7]{
  \myHolderGadgetHL{\holderHL{1}{#1}}{#2}{#3}{#4\labelOne}{#5}{#6}
  \myHolderGadgetHL{\holderHL{2}{#1}}{#2}{#3-2}{#4\labelTwo}{#5}{#7}
}

\newcommand{\myLsetGadgetHL}[6]{
  \begin{pgfonlayer}{foreground}
    \node[gadget,color=#5] at (#2,#3) [vertex] (#4) {}; 
  \end{pgfonlayer}
  \myVertexNameHL{#1}{#4}{#6}
}


\newcommand{\myCNFLHLWS}[5]{
	\myVerticesVariablesHL{z}{w}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{z}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\pickerHL{z}}{#2+12.5}{#3-2}{#4\labelPicker}{#5}{\vertexNameBottomLeft}
	\myVertexHL{\AsetHL{z}}{#2+10.5}{#3-2}{#4\labelAset}{#5}{\vertexNameBottomLeft}
	\myIsetGadgetHL{\IsetHL{z}}{#2+14.5}{#3-2}{#4\labelIset}{#5}{\vertexNameBottomRight}
	
		
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelPicker)(#4\labelOne)(#4\labelClause\labelOne), hfit=#5] {};
	\end{pgfonlayer}
	
	
	\draw[color=black!40] (#4\labelOne\labelFalse) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelTwo) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelOne);
	
	
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#4\labelI) -- (#4\labelClause\labelTwo);
	
	
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelNminusone) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelNminusone);
	
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelNminusone\labelFalse) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelN);
	
	
	\draw[rounded corners, #5] (#2+11.8,#3-2.75) rectangle (#2+15.2,#3-1.25);
	
	
}


\newcommand{\myCNFRHLWS}[5]{
	\myVerticesVariablesHL{z}{w}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{z}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\ppickerHL{z}{w}}{#2-3}{#3-2}{#4\labelPPicker}{#5}{\vertexNameBottomLeft}
	\myVertexHL{\qqickerHL{z}{w}}{#2-1}{#3-2}{#4\labelQQicker}{#5}{\vertexNameBottomRight}
	\myVertexHL{\AAsetHL{z}{w}}{#2+1}{#3-2}{#4\labelAset}{#5}{\vertexNameBottomRight}
	
	\node[align=left] at (#2-0.5,#3+2) {\small \color{#5} w=#1};
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelPPicker)(#4\labelN\labelFalse)(#4\labelClause\labelN), hfit=#5] {};
	\end{pgfonlayer}
	
	\draw[color=black!40] (#4\labelOne) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelI) -- (#4\labelClause\labelOne);
	
	
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelTwo);
	
	
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelNminusone);
	
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelNminusone) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelN\labelFalse) -- (#4\labelClause\labelN);
	
}


\newcommand{\myCNFLHLWSCompact}[5]{
	\myVerticesVariablesHLCompact{z}{#2}{#3}{#4}{#5}
	\myClauseGadgetsHL{z}{#2}{#3+1.5}{#4\labelClause}{#5}
	
	\myVertexHL{\pickerHL{z}}{#2+12.5}{#3-2}{#4\labelPicker}{#5}{\vertexNameBottomRight}
	\myVertexHL{\AsetHL{z}}{#2+10.5}{#3-2}{#4\labelAset}{#5}{\vertexNameBottomLeft}
	\myLsetGadgetHL{\Leeches{z}}{#2+14.5}{#3-2}{#4\labelLset}{#5}{\vertexNameBottomRight}
	
		
	
	\begin{pgfonlayer}{background}
	  \node[fit=(#4\labelPicker)(#4\labelOne)(#4\labelClause\labelOne), hfit=#5] {};
	\end{pgfonlayer}
	
	
	\draw[color=black!40] (#4\labelOne\labelFalse) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#4\labelTwo) -- (#4\labelClause\labelOne);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelOne);
	
	
	\draw[color=black!40] (#4\labelTwo\labelFalse) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#2+4.2,#3) -- (#4\labelClause\labelTwo);
	\draw[color=black!40] (#4\labelI) -- (#4\labelClause\labelTwo);
	
	
	\draw[color=black!40] (#4\labelI\labelFalse) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelNminusone) -- (#4\labelClause\labelNminusone);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelNminusone);
	
	\draw[color=black!40] (#2+8.2,#3) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelNminusone\labelFalse) -- (#4\labelClause\labelN);
	\draw[color=black!40] (#4\labelN) -- (#4\labelClause\labelN);
	
	
	\draw[rounded corners, #5] (#2+11.8,#3-3.1) rectangle (#2+15.7,#3-1.25);
	
	
}


\newcommand{\myWSGadgetSmall}[8]{
	\node at (#1+1,#2+3.5) {\small $z=#8$};
	\fill[#4,draw, rounded corners,fill=#4!10] (#1,#2) rectangle (#1+4,#2+2);
	
	\fill[#5,draw, rounded corners,fill=#5!10] (#1+8,#2+2.5) rectangle (#1+12,#2+4.5);
	
	\fill[#6,draw, rounded corners,fill=#6!10] (#1+8,#2) rectangle (#1+12,#2+2);
	
	\fill[#7,draw, rounded corners,fill=#7!10] (#1+8,#2-2.5) rectangle (#1+12,#2-0.5);
	
	\node at (#1+10,#2+2.25) {\dots};
	\node at (#1+10,#2-0.25) {\dots};
	
	\myVertexHL{\saviorHL{#8}}{#1+6}{#2+0.5}{#3\labelSavior}{black}{\vertexNameTopRight}
}





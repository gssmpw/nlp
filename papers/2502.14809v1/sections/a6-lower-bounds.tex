\section{Additive Approximation Lower Bounds for Differentially Private Query Answering}

\label{app:LB_proofs}

We provide a lower bound for DP query answering under purely-additive approximation error \citep{Lyu:2024}. We only slightly modify the construction to fit within the (nonnegative) counting queries setting we consider in this work.

The lower bounds we use are for the statistical setting which we now introduce. 
\begin{definition}[In-Expectation Population Accuracy]
\label{def:expected_population_accuracy}
We say that a randomized algorithm ${\cal A}:{\cal X}^n\mapsto \mathbb{R}^{\cal F}$ is $(\alpha,\cF)$-population-accurate in expectation if  for any probability distribution $\mathbb{P}$ supported on ${\cal X}$,
\[ \mathbb{E}_{\cA}\mathbb{E}_{D\sim \mathbb{P}^n} \Big[\max_{f\in {\cal F}}\big|{\cal A}_f(D)-\mathbb{E}_{x\sim\mathbb{P}}[f(x)]\big|\Big] \leq \alpha. \]
\end{definition}

\begin{theorem}[\cite{Lyu:2024}]
\label{thm:LB_additive_query}
Let ${\cal X}$ be a finite set, and $k>0$ such that $k = \omega(\ln|{\cal X}|)$ and $|X|=\omega(\ln k)$. 
There exists ${\cal F}\subseteq\{0,1\}^{\cal X}$ with $|{\cal F}|=k$ such that, for every $0<\eps<1$, $2^{-\log^{1/9}|{\cal X}|}<\alpha<1$ and $\frac{1}{|{\cal X}|} < \delta<\frac{1}{\log|{\cal X}| \log k}$, any ${\cal A}:{\cal X}^n\mapsto \R^{\cal F}$ which is $(\alpha,\cF)$-population-accurate in expectation and $(\eps,\delta)$-DP algorithm requires
\[ n=\Omega\Big( \frac{\log|{\cal F}|\sqrt{\log|{\cal X}|\log(1/\delta)}}{\eps\alpha^2} \Big). \]
\end{theorem}

This result follows from Theorem 8 in \cite{Lyu:2024}, where their construction uses query matrices $A\in \{-1,+1\}^{{\cal F}\times{\cal X}}$. It suffices to use the affine transformation
$A'=T(A)\in\{0,1\}^{{\cal F}\times{\cal X}}$, where $T$ applies coordinate-wise the operation $T(a_{ij})=\frac12(1+a_{ij})$, and  concluding by noting that $\alpha$-accuracy over the original dataset is equivalent to $\alpha/2$-accuracy over the image space.

We conclude by noting that in the context of query-answering, sample accuracy implies population accuracy. We formally introduce this notion of in-expectation accuracy for empirical counts. We introduce both its additive-only and relative counterparts, as they are both needed for our results.

\begin{definition}[In-Expectation Empirical Accuracy]
\label{def:expected_sample_accuracy}
Let $\cF\subseteq\{0,1\}^{\cX}$ and $\alpha\geq 0$.
We say that a randomized algorithm $\cA:\cX^n\mapsto\R^{\cF}$ is $(\alpha,\cF)$-sample-accurate in expectation if for all $D=(x_1,\ldots,x_n)\in \cX^n$,
\[ \mathbb{E}_{\cal A}\Big[ \sup_{f\in {\cal F}} \Big|\frac1n\sum_{i=1}^n f(x_i)-{\cal A}_f(D)\Big| \Big] \leq \alpha. \]
Let additionally $\zeta>0$. We say that $\cA$ is $(\zeta,\alpha,\cF)$-sample-accurate in expectation if for all $D=(x_1,\ldots,x_n)\in \cX^n$
\[ \mathbb{E}_{\cal A}\Big[ \sup_{f\in {\cal F}} \Big\{
{\cal A}_f(D)-(1+\zeta)\frac1n\sum_{i=1}^n f(x_i),
(1-\zeta)\frac1n\sum_{i=1}^n f(x_i)-{\cal A}_f(D)\Big\} \Big] \leq \alpha. \]
\end{definition}



\begin{proposition} \label{propos:generalization_synthetic_data}
Let ${\cal A}:{\cal X}^n\mapsto \R^{\cal F}$ be an algorithm  that is $(\alpha,\cF)$-sample-accurate in expectation.
Then ${\cal A}:{\cal X}^n\mapsto \R^{\cal F}$ is $(\alpha+2\mbox{Rad}(\cF),\cF)$-population-accurate in expectation, namely
\[ \sup_{\mathbb{P}} \mathbb{E}_{{\cal A},D\sim \mathbb{P}^n}\Big[ \sup_{f\in {\cal F}} \Big|\mathbb{E}_{x\sim \mathbb{P}}[f(x)]-{\cal A}_f(D)\Big| \Big] \leq 2\mbox{Rad}_n({\cal F})+\alpha,  \]
where $\mbox{Rad}_n({\cal F})\leq \sqrt{2\ln(|{\cal F}|)/n}$ is the expected Rademacher complexity of ${\cal F}.$
\end{proposition}

\begin{proof}
Let $\mathbb{P}$ be any distribution. By the triangle inequality,
\begin{align*}
&\mathbb{E}_{{\cal A},D\sim \mathbb{P}^n}\Big[ \sup_{f\in {\cal F}} \Big|\mathbb{E}_{x\sim \mathbb{P}}[f(x)]-{\cal A}_f(D)\Big| \Big]  \\
&\leq 
\mathbb{E}_{D\sim \mathbb{P}^n}\Big[ \sup_{f\in {\cal F}} \Big|\frac1n\sum_{i=1}^n f(x_i)-\mathbb{E}_{x\sim \mathbb{P}}[f(x)]\Big| \Big] 
+ \mathbb{E}_{{\cal A},D\sim \mathbb{P}^n}\Big[ \sup_{f\in {\cal F}} \Big|\frac1n\sum_{i=1}^n f(x_i)-{\cal A}_f(D)\Big| \Big]\\
&\leq 2\mbox{Rad}_n({\cal F})+\alpha,
\end{align*}
where the last step uses the sample accuracy of ${\cal A}$, and a classical symmetrization argument (e.g.~\cite{Mohri:2018}).
\end{proof}

\subsection{Proof of \Cref{thm:approx_DP_LB}.}

\label{sec:pf_approx_DP_LB}

We now use the previous results to prove the approximate DP lower bound.

\begin{proofof}{\Cref{thm:approx_DP_LB}}
First, we consider the case $\zeta=\bar\zeta:=\alpha/n$. Suppose that there exists a query-answering  $(\eps,\delta)$-DP algorithm ${\cal B}$ that is $(\bar\zeta,\alpha,\cF)$-sample-accurate in expectation for arbitrary sets $\cF$ of $k$ statistical queries. 
Let ${\cal B}$ be the algorithm that first runs ${\cal A}$, and then scales down the histogram counts by a factor $1/n$. Then algorithm ${\cal B}$ is $(\eps,\delta)$-DP (by postprocessing) and $(2\alpha/n,\cF)$-sample-accurate in expectation. Further, $2\alpha/n+2(1+\bar\zeta)\sqrt{2\ln(k)/n}\leq 10\alpha/n$, hence by \Cref{propos:generalization_synthetic_data}, ${\cal B}$ is also $(10\alpha/n,\cF)$-population-accurate in expectation.  
From \Cref{thm:LB_additive_query}\footnote{Note that this lower bound is applicable, as $2^{\ln^{-1/9}|{\cX}|}<10\alpha/n<1$ is implied by our assumption on $\alpha$.}, we conclude that 
\[ n=\Omega\Big(\frac{\ln|{\cF}|\sqrt{\ln|{\cX}| \ln(1/\delta)}}{\eps (10\alpha/n)^2} \Big).\]
This lower bound implies the two inequalities in \eqref{eqn:LB_approx_DP} with $\zeta=\bar\zeta$.

Next, consider the case $\zeta > \overline\zeta$.  Let $n'\leq n$ to be determined, and consider the histogram $\bh^{\ast}$ with $\|\bh^{\ast}\|_1=n$ comprised of $n'$ datapoints as in the lower bound construction from  
\cite{Lyu:2024} (call this histogram $\bh'$), padded with $n-n'$ dummy datapoints\footnote{More precisely, extend the sample space ${\cX}$ with an `empty' element $\dagger$, so that the dummy datapoints do not add counts to any queries.}. A $(\zeta,\alpha,\cF)$-sample-accuracy in expectation guarantee w.r.t.~$\bh^{\ast}$ implies $(\zeta,\alpha/n',\cF)$-sample-accuracy in expectation w.r.t.~$\bh'$. Letting $n'=\alpha/\zeta$, we reduce to the previous case, where we have concluded that
\begin{align*}
n \geq n'=\Omega\Big( \frac{\ln|{\cF}|\sqrt{\ln|{\cX}| \ln(1/\delta)}}{\eps \zeta^2}  \Big) \quad \mbox{and}\quad
\alpha = \Omega\Big( \frac{\ln|{\cF}|\sqrt{\ln|{\cX}| \ln(1/\delta)}}{\eps \zeta}  \Big). 
\end{align*}
Finally, when $\delta=0$ we can use the fact that $\eps$-DP algorithms are $(\eps,\delta)$-DP for any $\delta\geq 0$, and instantiating \Cref{eqn:LB_approx_DP} with $\delta=1/|\cX|$ yields the claimed bound.
\end{proofof}
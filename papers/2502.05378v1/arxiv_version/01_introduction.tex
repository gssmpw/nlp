\section{Introduction}

% 1. introduce the active 3d mapping task
Autonomous 3D mapping of new scenes holds substantial importance for vision, robotics, and graphics communities, with applications including digital twins. 
In this paper, we focus on the problem of active 3D mapping, where the goal is for an agent to find the shortest possible trajectory to scan the entire surface of a new scene using a depth sensor. 

% 2. challenges for active mapping
This task is extremely challenging as the agent has to identify an efficient trajectory without knowing the scene in advance. 
% 3. limitation of existing approaches: fbe (no learning); nbv (short-sighted);
Existing works can be broadly categorized into rule-based and learning-based approaches. 
Rule-based approaches, such as frontier-based exploration (FBE)~\citep{fbe}, utilize heuristic rules to select optimal frontiers at the boundaries of the already-known space for the next movement.
Though being simple and generalizable, they fail to leverage data priors to develop more efficient planning strategies.
To address this, learning-based methods, often referred to as next-best-view planning (NBV), train parametric policies for action prediction.
Although NBV approaches have demonstrated promising results, most of them only are evaluated on single-object datasets or outdoor scenes~\citep{guedon2022scone, chang2015shapenet, rlnbv}, ignoring a critical but more difficult setting of indoor environments for active 3D mapping applications.

Existing indoor datasets~\citep{gibson,Matterport3D}, however, offer limited geometry complexity and often include imperfect ground truth meshes, making them inadequate to fully evaluate model performance in complex indoor environments.
In this work, we automatically construct a new indoor dataset called AiMDoom for active 3D mapping. AiMDoom is built upon a map generator for the Doom video game, and features a wide range of indoor settings of four difficulty levels: Simple, Normal, Hard and Insane.
As illustrated in Figure~\ref{fig:teaser_macarons}, even in relatively simple indoor settings of our dataset, the state-of-the-art NBV approach MACARONS~\citep{guedon2023macarons} is frequently trapped in a limited area and misses substantial portions of the scene.
This limitation arises because most NBV methods only look one step ahead to identify the next best view in neighbouring regions, making it difficult to explore under-reconstructed areas at far distances.

% 4. combinations (different policies for goal and path planning; reward not good ), dataset problem
Some recent works~\citep{chen2024gennbv, feng2024naruto, zhan2022activermap, upen} attempt to overcome this limitation by searching for the next optimal view across a broader range. 
For example, 
 %\cite{upen} predicts a long-term view that decreases the most the scene uncertainty and uses a trained point-goal navigation policy to reach that view. 
{\cite{upen} utilizes a strategy that relies on averaging predicted uncertainties at each point along every sampled path, and uses a trained point-goal navigation model.}
However, training separate uncertainty map prediction and navigation models is less efficient, and the scene uncertainty does not directly align with the ultimate objective of 3D mapping.


\input{figures/teaser}


% 5. our proposed method
Therefore, we further propose a novel approach called next-best-path (NBP) planning, which shifts from NBV approaches that predict a single nearby view, to predicting an optimal path in a unified model.
Our model is composed of three key components: a mapping progress encoder, a coverage gain decoder and an obstacle map decoder.
The mapping progress encoder efficiently encodes the currently reconstructed point cloud along with the agent's past trajectory.
Based on the encoded representation, the coverage gain decoder predicts a value map over a large spatial range centred on the agent's current location. Each cell in the map represents the surface coverage gain accumulated along the optimal trajectory from the agent's location to the cell, which corresponds to the final metric for active mapping. The cell with the highest value score is viewed as a long-term goal.
The obstacle map decoder predicts obstacles in both seen and unseen regions by leveraging the agent's current knowledge of the scene. This allows us to compute the shortest path to the long-term goal while avoiding obstacles. To train the model, we collect data online and iteratively improve the model. We also propose a data augmentation method that exploits a property of shortest paths and a combined curriculum and multitask learning strategy to enhance training efficiency. 

% the proposed dataset
We evaluate our methods on the existing indoor benchmark MP3D~\citep{Matterport3D} and our dataset AiMDoom.
The proposed NBP model significantly outperforms state-of-the-art methods on both datasets from simple (Figure~\ref{fig:teaser_ours_1}) to more complex indoor environments (Figure~\ref{fig:teaser_ours_2}).

Our key contributions can be summarized as follows:

$\bullet$ We introduce AiMDoom, the first benchmark to systematically evaluate active mapping in indoor scenes of different levels of difficulties.

$\bullet$ We propose a novel next-best-path approach that jointly predicts long-term goals with optimal reconstruction coverage gains, and obstacle maps for trajectory planning.

% $\bullet$ We introduce a robust training framework that encompasses data collection, augmentation, and model training strategies.

$\bullet$ Our approach achieved state-of-the-art results on both the AiMDoom and MP3D datasets.





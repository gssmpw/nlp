The feature sets in the ensembling procedure are selected by the feature categorization and their individual discriminative power. To quantify the latter, we fit small models on each individual feature. Specifically, we fit a depth-2 decision tree to classify L, D or H-mode timeslice-by-timeslice. The performance is evaluated using Cohen's kappa coefficient~\cite{cohen1960}. Additionally, to identify parameter ranges consistently associated with a specific confinement state, we optimize thresholds on each individual feature that correspond to the largest amount of the data we can classify as `all L-mode' or `all H-mode' with at least 99\% accuracy. In other words, we check whether a feature can individually identify one of the two main confinement states in subparts of the parameter space. For example, total input power $P_{\textit{in}}$ can be used to trivially label some timeslices as L-mode given a minimum power requirement for any H-mode, see also Figure~\ref{fig:thresholds_example} for an illustration. We express this metric as the fraction of the data which can be labeled with such a threshold while keeping at least 99\% accuracy. Additionally, we report the signal availability over all timeslices in the dataset.

The results of all these metrics are provided in Table~\ref{tab:features}, for all features introduced in Table~\ref{tab:signals}. Note that we denote all spectral features computed from the photodiode signals ($\text{PD}_{\text{FFT}}^{}$ in Table~\ref{tab:signals}). The subscript integer denotes the window size in \SI{}{\milli\second} for the sliding window FFT, whereas the postfix $\in\{\textit{p}, \textit{c}, \textit{f}\}$ denotes whether the window is in the \textit{p}ast, \textit{c}entered or in the \textit{f}uture w.r.t. the given timeslice.

The feature sets cover both individual categories and combinations thereof. For each category we construct a model covering either all features or the most discriminative features following their Cohen's kappa coefficient values. The mixed feature sets cover both top-$k$ subsets for each category and rank-$k$ subsets: we both fit models taking in as much information as possible, while also fitting models with no mutual dependencies but still using informative features. Similarly, we select subsets using the threshold-orderings, although fewer in total because a substantial number of features cannot be used for any meaningful thresholding\footnote{Naturally, these features are still useful once combined with other more directly significant features.}, resulting in a value of 0 in Table~\ref{tab:features}. The resulting \textit{(model + feature set)} configurations are given in Table~\ref{tab:model_featuresets}.

The feature sets are identical between the FNOLSTM and GBDT models, with the exception of the photodiode related features. For the FNOLSTM we artificially rank $\text{PD}_{\textit{CIII}}^{}$ and $\text{PD}_{\textit{H}\alpha}^{}$ as the most informative emissions feature. These signals are not absolutely calibrated, making their raw value uninformative for classifying L, D or H-mode. However, the emission patterns they pick up clearly correspond to confinement state-related dynamics such as Edge Localized Modes (ELMs) or dithering cycles. The FNOLSTM-based models can fit these patterns because of their dynamic nature, making it a key feature to include. In contrast, the GBDT-models only take static information, making the raw signal value uninformative; rather, it relies on the constructed spectral features for the photodiode signal. To avoid redundancy in these $\text{PD}_{\text{FFT}}$ features, only the centered-window feature is used for each time window size; the past and future windows are only used in a specific category with all FFT features (FNOLSTM-EM-3 and GBDT-EM-3). 

\begin{figure}[h]
\begin{center}\includegraphics[width=0.5\linewidth]{figures/dataset_thresholds_example.pdf}\end{center}
    \caption{Distributions of the total input power and the plasma stored energy in the dataset, following the same procedure as Figure~\ref{fig:dataset_eda}. We overlay the `all L-mode' thresholds (L$^{\textit{fraction}}_{0.99}$) for the two features: below this threshold value, at least 99\% of the timeslices are in L-mode.}
    \label{fig:thresholds_example}%
\end{figure}

\newpage


\input{figures/table_features}
\input{figures/table_model_featuresets}


\newpage

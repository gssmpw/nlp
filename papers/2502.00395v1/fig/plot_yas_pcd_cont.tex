% Define TUM colors
\definecolor{TUMBlue}{HTML}{0065BD}
\definecolor{TUMGray}{HTML}{808080}
\definecolor{TUMAccentOrange}{HTML}{E37222}
\definecolor{TUMAccentGreen}{HTML}{A2AD00}
\definecolor{TUMGreen}{rgb}{0.64, 0.68, 0.0}

\begin{tikzpicture}
    \begin{axis}[
        view={45}{30}, % 3D viewing angle
        colormap/jet, % Colormap for deviation data
        colorbar right, % Display colorbar on the right
        colorbar style={
            ylabel={Translation [\si{\meter}]},
            ytick={2.0, 3.0, 4.0, 5.0}, % Colorbar ticks
            width=0.15cm, % Thickness of the colorbar
        },
        xlabel={$x~[\si{\meter}]$},
        ylabel={$y~[\si{\meter}]$},
        zlabel={$z~[\si{\meter}]$},
        grid=both,
        width=0.85\linewidth,
        axis equal image,
        xmin=35, xmax=145,
        ymin=-510, ymax=-390,
        zmin=20, zmax=60,
    ]
    
    % Plot the original point cloud (gray)
    \addplot3[only marks, mark=*, mark size=0.5pt, color=TUMGray, opacity=0.7] 
        table [x index=0, y index=1, z index=2] {./fig/data/yas_hotel_align_cont.txt};
    
    % Plot the distorted point cloud with color mapping
    \addplot3[scatter, only marks, mark=*, mark size=0.5pt, scatter src=explicit, opacity=0.7] 
        table [x index=0, y index=1, z index=2, meta index=3] {./fig/data/yas_hotel_cont.txt};

    % Add a yellow dot at the specified coordinates
    \addplot3[only marks, mark=*, mark size=3pt, color=TUMAccentOrange] coordinates {(96.3519, -442.478, 33.9137)};
    

    % Add a plane (y = -410)
    %\addplot3[surf, samples=10, domain=-500:500, y domain=-200:200, shader=flat, opacity=0.3, %color=TUMAccentOrange]
    %    ({x}, -410, {z});

    \end{axis}
\end{tikzpicture}
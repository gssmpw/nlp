\begin{tikzpicture}
[define rgb/.code={\definecolor{mycolor}{rbg}{#1}}, rgb color/.style={define rgb={#1},mycolor},
scale=1.]

\newcommand{\arctext}[8]{
    \draw[
        color=white,
        thick,
        line width=1.3pt,
        fill=#2
    ]
    (#5:#4cm+#3) coordinate (above #1) arc (#5:#6:#4cm+#3)
    -- (#6:#4) coordinate (right #1) -- (#6:#4cm-#3) coordinate (below right #1) 
    arc (#6:#5:#4cm-#3) coordinate (below #1)
    -- (#5:#4) coordinate (left #1) -- cycle;

    \pgfmathsetmacro{\angleStart}{#5}
    \pgfmathsetmacro{\angleEnd}{#6}
    \pgfmathsetmacro{\averageAngle}{(\angleStart + \angleEnd) / 2}
    \pgfmathsetmacro{\adjustedAngle}{\averageAngle}

    \path (#5:#4 ) coordinate (start) -- (#6:#4) coordinate (end);
    \path (start) -- (end) coordinate[pos=0.5] (mid);
    \pgfmathsetmacro{\isBold}{#4 < 3 ? 1 : 0}
    \pgfmathsetmacro{\scaleTex}{#4 == 1.3 ? 0.8 : (#4 == 2.7 ? 0.6 : 0.6)}

    \message{Here: #7 \adjustedAngle}
    \pgfmathsetmacro{\rotationAngle}{\adjustedAngle > 90 && \adjustedAngle < 270 ? \adjustedAngle+180: \adjustedAngle}
    \pgfmathsetmacro{\shiftSide}{\adjustedAngle > 90 && \adjustedAngle < 270 ? "west": "east"}
    \pgfmathsetmacro{\shiftAngle}{#4 == 1.3 ? 0.7 : 0.7}
    \pgfmathsetmacro{\angleTitle}{
        #4 == 1.3 && \adjustedAngle > 90 && \adjustedAngle < 270 ? "#7" : (#4 == 1.3 ? "#7": "#7")
    }
    
    \node[anchor=\shiftSide, font=\tiny, rotate=\rotationAngle] 
    at (\adjustedAngle:#4+\shiftAngle)
    {\scalebox{\scaleTex}{\ifnum\isBold=1 \angleTitle \else \angleTitle \fi}};
}

\newcommand{\addsunburstplot}[1]{
    \node[circle, fill=white, align=center, font=\tiny, inner sep=1pt] at (0,0) {\textbf{\ours}};
    \csvreader[head to column names]{#1}{}
    {
        \arctext{\fid}{\fcolor}{20pt}{\fradius}{\astart}{\aend}{\flabel}{\fcount}
    }
}

\addsunburstplot{./data/taxonomy.csv}

\end{tikzpicture}

\pgfplotsset{every tick label/.append style={font=\tiny}}

\begin{tikzpicture}
\begin{axis}[
    width=1\linewidth,
    height=0.3\linewidth,
    bar width=6pt, 
    ylabel={mAP@1k},
    ymin=0, ymax=60,
    ytick={10,20,30,40,50,60}, 
    ytick distance=5, 
    ybar=2,
    enlarge y limits={upper, value=0.05},
    xtick=data,
    symbolic x coords={  
        technology,
        toy,
        product,
        fashion,
        household,
        art,
        landmark,
        media,
    },
    ylabel style={yshift=-2pt},
    xtick distance = 0.4,
    xticklabel style={
        font=\scriptsize},
    enlarge x limits=0.05, 
    nodes near coords,
    every node near coord/.append style={
        scale=0.58, 
        color=black,
        font=\tiny, 
        /pgf/number format/.cd, 
        fixed zerofill, 
        precision=1,
    },
    legend style={
        at={(0.4,0.97)}, 
        anchor=north west, 
        legend columns=-1,  
        /tikz/every even column/.append style={column sep=0.2cm}, 
        font=\footnotesize,
        inner sep=1pt,  
        outer sep=1pt 
    },
    legend cell align={left}, 
    ymajorgrids=true,
    grid style={color=lightgray!60, dash pattern=on 2pt off 2pt},
]

\pgfplotstableread[col sep=comma]{data/performance_per_domain.csv}\loadeddata


\addplot+[ybar, color=appleblue, fill=appleblue] table[x=domain,y=avg_ap_ames_siglip_384] {\loadeddata};
\addplot+[ybar, color=applepink, fill=applepink] table[x=domain,y=avg_ap_siglip_384_proj] {\loadeddata};
\addplot+[ybar, color=applemustard, fill=applemustard] table[x=domain,y=avg_ap_siglip_384_nw] {\loadeddata};
\addplot+[ybar, color=applepurple, fill=applepurple] table[x=domain,y=avg_ap_siglip_384_text] {\loadeddata};
\addplot+[ybar, color=appleteal, fill=appleteal] table[x=domain,y=avg_ap_dinov2_vitl14] {\loadeddata};

\legend{ SigLIP$^\dagger$+AMES,  SigLIP$^\dagger$, SigLIP, SigLIP-text, DINOv2}
\end{axis}
\end{tikzpicture}
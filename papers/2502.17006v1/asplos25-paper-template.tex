%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Template for ASPLOS papers.
%
% History:
% 
% ASPLOS originally used jpaper.cls for submission but required acmart.cls for the
% final camera-ready version. To avoid a change in format, starting ASPLOS 2024 Fall 
% cycle, both the submission and the camera-ready versions started using acmart.cls.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% use the base acmart.cls version 1.92
% use the sigplan proceeding template with the default 10 pt fonts
% nonacm option removes ACM related text in the submission. 
\documentclass[sigplan,screen,nonacm]{acmart}

% enable page numbers
\settopmatter{printacmref=true}

% make references clickable 
\usepackage[]{hyperref}
\input{tex/macro}
\copyrightyear{2025}
\acmYear{2025}
% \setcopyright{cc}
% \setcctype{by}
\setcopyright{rightsretained}
\acmConference[ASPLOS '25]{Proceedings of the 30th ACM International Conference on Architectural Support for Programming Languages and Operating Systems, Volume 2}{March 30-April 3, 2025}{Rotterdam, Netherlands}
\acmBooktitle{Proceedings of the 30th ACM International Conference on Architectural Support for Programming Languages and Operating Systems, Volume 2 (ASPLOS '25), March 30-April 3, 2025, Rotterdam, Netherlands}
\acmDOI{10.1145/3676641.3716248}
\acmISBN{979-8-4007-1079-7/25/03}

\begin{document}

\title{Be CIM or Be Memory: A Dual-mode-aware DNN Compiler for CIM Accelerators}

\author{Shixin Zhao}
\affiliation{%
    \institution{Institute of Computing Technology, Chinese Academy of Sciences, University of Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}
  \postcode{100190}
}
\email{zhaoshixin18@mails.ucas.ac.cn}

\author{Yuming Li}
\affiliation{%
  \institution{Institute of Computing Technology, Chinese Academy of Sciences, University of Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}
}
\email{liyuming22@mails.ucas.ac.cn}

\author{Bing Li}
\affiliation{%
  \institution{Institute of Microelectronics, Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}}
\email{libing2024@ime.ac.cn}

\author{Yintao He}
\affiliation{%
  \institution{Institute of Computing Technology, Chinese Academy of Sciences, University of Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}}
\email{heyintao19z@ict.ac.cn}


\author{Mengdi Wang}
\affiliation{%
  \institution{State Key Lab of Processors, Institute of Computing Technology,  Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}}
\email{wangmengdi@ict.ac.cn}

\author{Yinhe Han}
\affiliation{%
  \institution{State Key Lab of Processors, Institute of Computing Technology,  Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}}
\email{yinhes@ict.ac.cn}

\author{Ying Wang}
\authornote{Corresponding author.}
\affiliation{%
  \institution{State Key Lab of Processors, Institute of Computing Technology,  Chinese Academy of Sciences}
  \city{Beijing}
  \country{China}}
\email{wangying2009@ict.ac.cn}

\renewcommand{\shortauthors}{Shixin Zhao et al.}

\begin{abstract}
Computing-in-memory (CIM) architectures demonstrate superior performance over traditional architectures. \update{To unleash the potential of CIM accelerators, many compilation methods have been proposed, }
focusing on application scheduling optimization specific to CIM. 
% exploring the application scheduling optimization targeted on CIM. 
However, existing compilation methods often overlook CIM's capability to switch dynamically between compute and memory modes, which is crucial for accommodating the diverse memory and computational needs of real-world deep neural network architectures, especially the emerging large language models.
% This flexibility is essential for accommodating the diverse memory and computation needs of real-world deep neural network architectures (DNNs). 
\update{To fill this gap, we introduce CMSwitch, a novel compiler to optimize resource allocation for CIM accelerators with adaptive mode-switching capabilities, thereby enhancing the performance of DNN applications.}
% dual-mode-aware compiler that optimizes CIM dual-mode resource allocation for real-world DNNs.
Specifically, our approach integrates the compute-memory mode switch into the CIM compilation optimization space by introducing a new hardware abstraction attribute. Then, we propose a novel compilation optimization pass that identifies the optimal network segment and the corresponding mode resource allocations 
% dual-mode CIM allocations 
using dynamic programming and mixed-integer programming. CMSwitch uses the tailored meta-operator to express the compilation result in a generalized manner.
Evaluation results demonstrate that CMSwitch achieves \update{an average speedup of 1.31$\times$ compared to existing SOTA CIM compilation works, highlighting CMSwitch's effectiveness in fully exploiting the potential of CIM processors for a wide range of real-world DNN applications.}
\end{abstract}
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10010583.10010786.10010809</concept_id>
<concept_desc>Hardware~Memory and dense storage</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10011007.10011006.10011041</concept_id>
<concept_desc>Software and its engineering~Compilers</concept_desc>
<concept_significance>500</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Hardware~Memory and dense storage}
\ccsdesc[500]{Software and its engineering~Compilers}

%%
%% Keywords. The author(s) should pick words that accurately describe
%% the work being presented. Separate the keywords with commas.
\keywords{Compute-in-memory (CIM), Compilation, Deep Neural Network (DNN)}


\maketitle % should come after the abstract
% \pagestyle{plain} % should come right after \maketitle


\input{tex/1_intro}
\input{tex/2_background}
\input{tex/3_motivation}
\input{tex/4_method}
\input{tex/5_evaluation}
\input{tex/6_conclusion}

\section*{Acknowledgments}
We sincerely thank the anonymous reviewers for their insightful suggestions for improving this paper. This work was partially supported by the National Key R\&D Program of China (Grant No. 2023YFB4404400) and the National Natural Science Foundation of China (Grant No. 62222411, 62025404, 62204164). Ying Wang (wangying2009@ict.ac.cn) is the corresponding author.

\bibliographystyle{plain}
\balance
\bibliography{references}

\end{document}


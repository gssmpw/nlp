\mybox{$\coherenceExp_{\cL,X,\cC,\selection,\dist(\cdot,\cdot)}(\alpha)$}{Demographic Coherence Experiment}{fig:coherenceExp}{

\newcommand{\expindent}{\hspace{1em}}

\textbf{Input:}\\
\ifnum\usenix=0
\vspace{-2em}
\begin{itemize}[leftmargin=1em,itemsep=0pt,label={}]
\item 
\fi
An algorithm $\cL: \univ^{n/2}\to (\univ \to [-1,1])$, A dataset $X\in\univ^n$, a collection $\cC$ of subgroups $C\subseteq \univ$, a lens $\selection$, and a distance metric $\dist(\cdot,\cdot)$.
\ifnum\usenix=0
\end{itemize}
\fi


\medskip
\textbf{Split Data:}\\

\ifnum\usenix=0
\vspace{-2em}
\begin{itemize}[leftmargin=1em,itemsep=0pt,label={}]
\item 
\fi
$I \setrandomly \{S \subseteq [n] : |S| =  n/2 \}$
\item $X_a = (x_i)_{i \in I}$
\item $X_b = (x_i)_{i \in [n]\setminus I}$
\ifnum\usenix=0
\end{itemize}
\fi

\textbf{Compute Predictor($X_a$):}\\
\ifnum\usenix=0
\vspace{-2em}
\begin{itemize}[leftmargin=1em,itemsep=0pt,label={}]
\item 
\fi
$h\gets \cL(X_a)$
\ifnum\usenix=0
\end{itemize}
\fi

\textbf{Incoherence Condition:}\\ 
% \mb{I don't really like this loop since it seems...overly explicit? Almost to the point of undermining our credibility as people who are designing algorithms? Maybe something like, ``Set $b = 0$ if there exists $C \in \mathcal{C}$ such that ... [line break] Else, set $b = 1$''}

\ifnum\usenix=0
\vspace{-2em}
\begin{itemize}[leftmargin=1em,itemsep=0pt,label={}]
\item 
\fi
% $b=1$ 
% \ifnum\usenix=0 \item \fi
% For $C\in\cC$, set $b=0$ if:
\pj{Set $b=0$ if there exists $C \in \cC$ such that:}
\ifnum\usenix=0
\end{itemize}
\vspace{-1.4em}
\begin{itemize}[leftmargin=2.2em,label={  },itemsep=0pt]
\item 
\fi
$\dist\Big(h(\restrict{X_a|_C}{\selection}),\, h(\restrict{X_b|_C}{\selection})\Big) > \alpha$
\ifnum\usenix=0
\end{itemize}
\fi
\ifnum\usenix=0
\vspace{-2em}
\begin{itemize}[leftmargin=1em,itemsep=0pt,label={}]
\item 
\fi
\pj{Else set $b=1$}
\ifnum\usenix=0
\end{itemize}
\fi
}
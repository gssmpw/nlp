\begin{table*}[t]
\centering

\vspace{-3mm}
	\resizebox{1.95\columnwidth}{!}{%
		\setlength\tabcolsep{4pt} 
\begin{tabular}{lllllllll}
\toprule
& \multicolumn{2}{c}{\textbf{PACS}}     & \multicolumn{2}{c}{\textbf{VLCS}}    & \multicolumn{2}{c}{\textbf{Office-Home}}    & \multicolumn{2}{c}{\textbf{TerraIncognita}}\\ 
\cmidrule(lr){2-3} \cmidrule(lr){4-5} \cmidrule(lr){6-7} \cmidrule(lr){8-9}
\quad \textbf{Methods} & ResNet-18 & ResNet-50 & ResNet-18 & ResNet-50 & ResNet-18 & ResNet-50 & ResNet-18 & ResNet-50 \\ \midrule
\quad ERM baseline & 79.6 & 85.7 & 75.8 & 77.4 & 61.0 & 67.5 & 35.8 & 47.2 \\
\midrule
\multicolumn{9}{l}{\textit{Standard domain generalization}} \\
\quad Arjovsky \etal \cite{arjovsky2019invariant} & \textcolor{black}{80.9} & 83.5 & {75.1} & 78.5 & {58.0} & {64.3} & {38.4} & 47.6 \\
\quad Li \etal \cite{li2018learning} & - & 84.9 & - & 77.2 & - & 66.8 & - & 47.7\\
\quad Huang \etal \cite{huang2020self} & \textcolor{black}{80.5}  & 85.2 & \textcolor{black}{75.4} & 77.1 & {58.4} & 65.5 & {39.4} & 46.6 \\
\quad Shi \etal \cite{shi2021gradient}& \textcolor{black}{82.0} & 85.5 & {76.9}& 77.8 & {62.0} & 68.6 & {40.2} & 45.1 \\ 
 \midrule
\multicolumn{9}{l}{\textit{Test-time domain generalization}}\\
\quad Wang \etal \cite{wang2021tent} 
& 83.9 & 85.2 & 72.9  & 73.0 & 60.9 & 66.3 & 33.7 & 37.1 \\
\quad Iwasawa \etal \cite{iwasawa2021test}
&81.7 & 85.3 & 76.5  & \textbf{80.0} & 57.0 & 68.3 & 41.6 & 47.0 \\
\quad Dubey \etal \cite{dubey2021adaptive}
& - & 84.1 & -  & 78.0 & - & 67.9 & -  & 47.3 \\
\quad Jang \etal \cite{jang2022test}
& {81.9} & 84.1 & {77.3}  & 77.6 & 63.7 & 68.6 & 42.6  & 47.4 \\
\quad Chen \etal \cite{chen2023improved} 
& {83.8} & - & 76.9 & - & 62.0 & - & 43.2 & - \\
\quad Liu \etal \cite{liu2024cross} 
& - & 86.4 & - & 76.3 & - & 68.1 & - & 48.2 \\
\quad Xiao \etal \cite{xiao2022learning} & \underline{84.1} & \underline{87.5} & \textcolor{gray}{\textbf{77.8}}  & \textcolor{gray}{{78.6}} & \textbf{66.0} & \textbf{71.0} & \textcolor{gray}{\underline{44.8}}  & \textcolor{gray}{\underline{48.4}} \\
 \toprule
\rowcolor{lightorange}
\quad {\textit{\textbf{This paper}}}
& \textbf{85.5} \scriptsize{$\pm$0.2}        & {\textbf{88.2}} \scriptsize{$\pm$0.3}        & \textbf{78.0} \scriptsize{$\pm$0.3}    & \underline{78.7} \scriptsize{$\pm$0.4} & \textbf{66.0} \scriptsize{$\pm$0.3}  & \textbf{71.2} \scriptsize{$\pm$0.4} & \textbf{46.5} \scriptsize{$\pm$0.3}   & \textbf{49.3} \scriptsize{$\pm$0.6} \\

\bottomrule
\vspace{-6mm}
\end{tabular}
}
\caption{
\textbf{Comparisons on input-level shift} using ResNet-18 and ResNet-50.
We report results for Test-Time adaptation methods by \cite{wang2021tent} and \cite{liang2020we} from \cite{jang2022test}. Our results are averaged over five runs. Gray numbers for \cite{xiao2022learning} based on our reimplementation. Our method consistently performs either as the top-performing (bold) or as the second-best (underlined). 
}
\label{table:all_datasets}
\end{table*}

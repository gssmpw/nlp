
\subsection{Complexity analysis of the ArchRAG framework}

We now analyze the complexity of our ArchRAG framework.
% 
Since the token cost is more important in the era of LLM, we replace the space complexity with the token cost.
We provide the explanation and the proof of each lemma in the appendix.

The offline indexing process of ArchRAG includes the KG construction, hierarchical clustering, and C-HNSW construction.
% 
The time complexity and token usage are as follows:

\begin{lemma}
\label{lemma:index-time}
Given a large text corpus or a large set of text documents with a total of $D$ tokens, the time complexity of the offline indexing process of ArchRAG is $O(I\frac{D}{w} + \frac{1-a^L}{1-a}(n*t+I\frac{D}{w}+\pi(m)+n\log n))$.
\end{lemma}

\begin{lemma}
\label{lemma:index-cost}
Given a large text corpus or a large set of text documents with a total of $D$ tokens, the number of tokens used in the offline indexing process of ArchRAG is $O(D + D\frac{1-a^L}{1-a})$.
\end{lemma}

% Generally, $L$ is $O(\log n)$, where $n$ is the number of extracted entities. 
% However, due to the constraints of community clustering, $L$ is typically constant, usually no greater than 5.


Next, we analyze the time complexity and token usage in ArchRAG's online query process.

\begin{lemma}
\label{lemma:query-time}
Given a C-HNSW with $L$ layers constructed from a large text corpus or a large set of text documents, the time complexity of a sequentially executed single online retrieval query in ArchRAG is $O(e+ LkI+Lk\log(n))$.
\end{lemma}

\begin{lemma}
\label{lemma:query-cost}
Given a C-HNSW with $L$ layers constructed from a large text corpus or a large set of text documents, the number of tokens used for a single online retrieval query in ArchRAG is $O(kL(c+P)))$.
\end{lemma}

% In practice, multiple retrieved contents are combined, allowing the LLM to analyze them together, provided the total token count does not exceed the token size limit. 
% % 
% As a result, the time and token usage for online retrieval are lower than those required for analysis.
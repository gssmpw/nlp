\section{Related work}
\paragraph{Online vector balancing.}
    When the incoming vectors satisfy $\norm{v_i}_2 \leq 1$, then randomly coloring the vectors $\{-1,+1\}$ achieves a discrepancy of $\sqrt{T \log{d}}$, even for the case of an adaptive adversary. A  matching lower bound of $\Omega(\sqrt{T})$ was proved by \citet{spencer1977balancing,spencer1994ten}. The stochastic setting for online vector balancing was first studied in~\cite{bansal2020line}. They considered a setting where the incoming vectors are chosen i.i.d.\@ from the uniform distribution over all vectors in $\{-1,1\}^n$ and gave an algorithm for achieving a $O(\sqrt{d}\log{T})$ bound on discrepancy at all time steps till $T$. This was later improved by \citet{bansal2020online} who showed a $O(d^2 \log{nT})$ upper bound for any distribution supported on $[-1,1]^n$. The work of \citet{bansal2021online} improved the dependence on $d$ by showing that $O(\sqrt{d}\log^4{dT})$ discrepancy can be achieved. The dependence on $T$ was further improved to $O_d(\sqrt{\log(T)})$ by \citet{aru2016balancing}, where the implicit dependence on $d$ was super-exponential. 
    
    The setting of an oblivious adversary remained relatively under-explored until the recent work of \citet{alweiss2021discrepancy}. They design an extremely simple and elegant algorithm that achieves a bound of $O(\log{nT})$ for both online vector balancing and online multicolor discrepancy. Their algorithm is based on a self-balancing random walk, which for vector balancing, ensures that the discrepancy prefix vector is $O(\sqrt{\log{nT}})$-subgaussian. A tight bound of $\Theta(\sqrt{\log{T}})$ for online vector balancing was achieved by \citet{kulkarni2024optimal}, who proved the existence of an algorithm that maintains $O(1)$-subgaussian prefix vectors.


\paragraph{Stochastic fair division.}

Stochastic fair division, introduced by \citet{dickerson2014computational}, studies the existence of fair allocations when valuations are drawn from a distribution. \citeauthor{dickerson2014computational} show that maximizing utilitarian welfare produces an envy-free allocation with high probability when the number of items $T \in \Omega(n \log n)$ and items values are drawn i.i.d.\@ from a fixed ``constant distribution'' (i.e., the distribution does not depend on the number of items). \citet{manurangsi2020envy,manurangsi2021closing} establish tight bounds for the existence of envy-free allocations in the ``constant distribution'' i.i.d.\@ model: $T \in \Omega (n \log n / \log \log n )$ is both a necessary and sufficient condition. \citet{bai2021envy} extend the result to the case of independent but non-identical additive agents.

Beyond envy-freeness, weaker fairness notions such as maximin share fair~\cite{kurokawa2016can,amanatidis2017approximation,farhadi2019fair} and proportional~\cite{suksompong2016asymptotic} allocations exist with high probability. Finally, the existence of fair allocations for agents with non-additive stochastic valuations are studied in~\cite{manurangsi2021closing,gan2019envy,benade2024existence}.

%\alex{this paper has discrepancy in the title: ~\cite{manurangsi2022almost}; need to check}

\paragraph{Online fair division.}
A rich literature studies online or dynamic fair division. Numerous works study the problem where divisible or indivisible items arrive over time, with the goal of optimizing utilitarian welfare~\cite{gkatzelis2021fair,bogomolnaia2022fair}, egalitarian welfare~\cite{springer2022online,kawase2022online}, Nash welfare~\cite{gao2021online,banerjee2022online,liao2022nonstationary,huang2023online,yang2024online}, the generalized mean of the agents' utilities~\cite{barman2022universal}, and approximation of the maximin share guarantee~\cite{zhou2023multi}.

Closer to our work, the aforementioned works~\cite{dickerson2014computational,bai2021envy} prove that maximizing welfare and weighted welfare---algorithms that can be implemented online---achieve envy-freeness with high probability, in addition to Pareto efficiency, when valuations are drawn i.i.d.\@ from ``constant'' distributions for identical and non-identical agents. \citet{benade2024fair} prove that even when correlation is allowed between agents (but items are independent), Pareto efficiency and fairness are compatible in the online setting---the specific fairness guarantee for a pair of agents $i,j$ is ``either $i$ envies $j$ by at most 1 item, or $i$ does not envy $j$ with high probability''; again, distributions are treated as constants. To the best of our knowledge, we are the first to study the stochastic setting (online or offline) without the ``constant distribution'' assumption.



There are several variations of the standard models, e.g., revocable allocations~\cite{he2019achieving,yang2023fairly}, only having access to pairwise comparisons~\cite{benade2025dynamic}, two-sided matching~\cite{mertzanidis2024}, items arriving in batches~\cite{benade2018make}, and repeated allocations~\cite{igarashi2024repeated}. Further afield, many works study the ``inverse'' problem of allocating static resources to agents that arrive/depart over time~\cite{kash2014no,li2018dynamic,sinclair2022sequential,vardi2022dynamic,banerjee2023online}.
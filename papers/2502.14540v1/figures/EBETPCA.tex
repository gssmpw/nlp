\begin{figure}[!ht]
    \centering
    \scalebox{.7}{
    \begin{tikzpicture}[node distance={25mm}, thick, main/.style = {draw, circle, minimum size=0.8cm}]
        % Variable gadget
        \node[main] (v_start) {$x_i^S$};
        \node[main] (t_b1) [above right of=v_start] {$\top_b^{C_j}$};
        \node[main] (f_b1) [below right of=v_start] {$\bot_b^{C_j}$};
        \node[main] (t_v1) [right of=t_b1] {$\top_v^{C_j}$};
        \node[main] (f_v1) [right of=f_b1] {$\bot_v^{C_j}$};
        \node[main] (t_b2) [right of=t_v1] {$\top_b^{C_k}$};
        \node[main] (f_b2) [right of=f_v1] {$\bot_b^{C_k}$};
        \node[main] (t_v2) [right of=t_b2] {$\top_v^{C_k}$};
        \node[main] (f_v2) [right of=f_b2] {$\bot_v^{C_k}$};
        \node[main] (v_end) [below right of=t_v2] {$x_i^E$};
    
        % Edges for variable gadget
        \draw[] (v_start) -- node[midway, above left] {1} (t_b1);
        \draw[] (v_start) -- node[midway, below left] {1} (f_b1);
        \draw[] (t_v1) -- node[midway, above] {1} (t_b2);
        \draw[] (f_v1) -- node[midway, below] {1} (f_b2);
        \draw[] (t_v2) -- node[midway, above right] {1} (v_end);
        \draw[] (f_v2) -- node[midway, below right] {1} (v_end);
    
        % Clause gadget
        \node[main] (c1_start) [below = 30mm of v_start] {$C_j^S$};
        \node[main] (c1_end) [right of= c1_start] {$C_j^E$};
        \node[main] (c2_start) [right = 30mm of c1_start] {$C_k^S$};
        \node[main] (c2_end) [right of= c2_start] {$C_k^E$};
        
    
        % Edges for clause gadget
        \draw[] (c1_end) -- node[midway, above] {2} (c2_start);
        \draw[] (c1_start) -- node[pos=0.25, above left] {2} (t_b1);
        \draw[] (c1_end) -- node[pos=0.75, right] {2} (t_v1);
        \draw[] (c2_start) -- node[pos=0.25, above left] {2} (f_b2);
        \draw[] (c2_end) -- node[pos=0.25,below right] {2} (f_v2);
    
        % Links
        \draw[dotted] (t_b1) -- node[midway, above] {1,2} (t_v1);
        \draw[dotted] (t_b2) -- node[midway, above] {1,2} (t_v2);
        \draw[dotted] (f_b1) -- node[pos=0.25, above] {1,2} (f_v1);
        \draw[dotted] (f_b2) -- node[midway, above] {1,2} (f_v2);
        
    \end{tikzpicture}
    }
    \caption{Variable and clause gadgets}
    \label{fig:gadgets}
\end{figure}
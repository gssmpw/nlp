\appendix
% \section{Appendix}
% \label{sec: appendix}

\section{Effect of Chunk Size and Chunk Overlap on Chunking Quality}
\label{appendix: chunk_hyper}

Elaborate from \S\ref{subsubsec: chunking_result}, Table~\ref{table: chunking_by_size} presents the performance of various line chunking strategies across different chunk sizes. As expected, larger chunk sizes correlate with more text per chunk, resulting in higher Sections/Chunk and Chunks/Section values. Larger chunks also reduce the likelihood of incomplete section coverage within a single chunk.

\begin{table}[H]
\centering

\resizebox{\textwidth}{!}{%
\renewcommand{\arraystretch}{1.5} % This increases the cell height by 1.5 times
% \small % or \scriptsize
\begin{tabular}{@{}lccccc@{}}
\toprule
Chunk Size & \multicolumn{1}{l}{Section/Chunk $\rightarrow$1} & \multicolumn{1}{l}{Chunk/Section $\rightarrow$1} & \multicolumn{1}{l}{Fail Chunk Ratio $\downarrow$} & \multicolumn{1}{l}{Fail Section Ratio $\downarrow$} & \multicolumn{1}{l}{Uncovered Section Ratio $\downarrow$} \\ \midrule

212        & \textbf{1.264}                    & \textbf{1.121}                    & 0.8                                  & 0.551                                  & 0.487                                       \\

250        & \underline{1.373}                       & \underline{1.174}                       & 0.768                                & 0.509                                  & 0.425                                       \\

300        & 1.497                             & 1.227                             & 0.725                                & 0.463                                  & 0.356                                       \\

350        & 1.613                             & 1.264                             & 0.684                                & 0.422                                  & 0.304                                       \\

466        & 1.87                              & 1.284                             & 0.597                                & 0.36                                   & 0.207                                       \\

553        & 2.048                             & 1.285                             & \underline{0.528}                          & \underline{0.315}                            & \underline{0.149}                                 \\

600        & 2.16                              & 1.285                             & \textbf{0.5}                         & \textbf{0.301}                         & \textbf{0.13}                               \\ \bottomrule
\end{tabular}
}
\caption{Line chunking strategy result by chunk size}
\label{table: chunking_by_size}
\end{table}

Table~\ref{table: chunking_by_overlap} presents the evaluation of the line chunking strategy with varying overlaps. As overlap increases, the effective chunk size also increases, leading to higher Sections/Chunk and Chunks/Section values. Furthermore, increasing overlap reduces the Fail Chunk Ratio, Fail Section Ratio, and Uncovered Section Ratio.

\begin{table}[H]
\centering

\resizebox{\textwidth}{!}{%
\renewcommand{\arraystretch}{1.5} % This increases the cell height by 1.5 times
\small % or \scriptsize
\begin{tabular}{@{}lccccc@{}}
\toprule
Chunk Overlap & \multicolumn{1}{l}{Section/Chunk $\rightarrow$1} & \multicolumn{1}{l}{Chunk/Section $\rightarrow$1} & \multicolumn{1}{l}{Fail Chunk Ratio $\downarrow$} & \multicolumn{1}{l}{Fail Section Ratio $\downarrow$} & \multicolumn{1}{l}{Uncovered Section Ratio $\downarrow$} \\ \midrule

50            & \textbf{1.627}                    & \textbf{1.153}                    & \textbf{0.654}                       & 0.423                                  & 0.303                                       \\

100           & \underline{1.666}                       & \underline{1.183}                       & \underline{0.659}                          & 0.422                                  & 0.299                                       \\

150           & 1.717                             & 1.254                             & 0.661                                & \underline{0.417}                            & \underline{0.292}                                 \\

200           & 1.747                             & 1.347                             & 0.657                                & \textbf{0.407}                         & \textbf{0.283}                              \\ \bottomrule
\end{tabular}
}
\caption{Line chunking result by chunk overlap}
\label{table: chunking_by_overlap}
\end{table}

Finally, Table~\ref{table: chunking_map_stats} presents statistics on section coverage within each chunk using the selected line chunking strategy (chunk size: 553 characters, overlap: 50 characters).

\begin{table}[H]
\centering
\begin{tabular}{@{}cccccccc@{}}
\toprule
Count & Mean  & Std.  & Min   & 25th Percentile & 50th Percentile & 75th Percentile & Max \\ \midrule
2610  & 1.331 & 0.577 & 1.000 & 1               & 1               & 2               & 7   \\ \bottomrule
\end{tabular}
\caption{Statistics on section coverage within each chunk}
\label{table: chunking_map_stats}
\end{table}

% \section{Response Prompts}
% \label{appendix: response_prompts}

% We present the prompts used for responses in different systems, including:
% \begin{itemize}
%     \item Retrieval-Augmented Generation (RAG)-based system
%     \item Parametric RAG-based system
%     \item Large-Context Language Model (LCLM)-based system
% \end{itemize}

% Additionally, we provide the few-shot examples used for each system. All examples are in Thai.

% \subsection{RAG-based system}
% \label{subsubsec: rag_based_prompts}

% \input{prompts/response_rag_wcx}
% \input{prompts/response_rag_tax}

% \subsection{Parametric system}
% The prompts used for generating response in a parametric setup as described in Section~\ref{subsubsec: e2e_best_setup} are detailed in this section. The few-shot examples for this system are the same as the one used in the RAG-based system but without the relevant laws provided. The system prompt and instruction prompt are somewhat modified and displayed here.

% \input{prompts/response_param_wcx}
% \input{prompts/response_param_tax}

% \subsection{LCLM system}
% Similarly, the prompts used for generating response in the LCLM system described in Section~\ref{subsubsec: e2e_best_setup} only differs slightly from the one used in Parametric System in terms of the system prompt and the instruction prompt. They are displayed here.

% \input{prompts/response_lclm_wcx}
% \input{prompts/response_lclm_tax}

% As for o1 system discussed in Section~\ref{subsec: reasoning_model}, the prompt used in that experiment is the same as the one in the RAG-based system but without the few-shot examples. Furthermore, since o1 model does not allow modifying system prompt, we combine the system prompt into the instruction prompt.

% Lastly, for LCLM-as-a-retriever task discussed in Section~\ref{subsec: rq3_result}, we opt to use zero-shot approach by providing the LLM with system and instruction prompt only. The full prompt is provided below:

% \input{prompts/retriever_lclm}

% \section{Metric Prompt}
% We provide the LLM-as-a-judge prompt for assessing the response on Coverage and Contradiction as described in Section~\ref{subsec: metric} in this section. The system prompt is the same as the one used in RAG-based system.

% \input{prompts/coverage_contradiction_tax}
% \input{prompts/coverage_contradiction_wcx}

\begin{algorithm}[H]
    \small
    \caption{Shared Executor: XEVM -- Chain CRTs}
    \label{alg:shared-executor-xevm-chain-crt}

    \begin{algorithmic}[1]
    \Variables
        \State $\rolids := \{1,2\}$: rollup ids
        \State $\state{1}, \state{2}$: states of rollups $\rol{1}, \rol{2}$
        \State $\cp{1}, \cp{2}$: state checkpoints
        \State $\gsc_1, \gsc_2$: General System contracts
    \EndVariables
    \Statex
    \Function{xevm}{$\tx{}$}
        \State $(\status{1}, \outt{}) \gets $ \Call{evm}{$\tx{}$}
        \State $\tx' \gets $ parse($\outt{}$)
        \If{$\tx' = \nul$} \Return $\status{1}$ \EndIf
        \State \textbf{Assert} $(\tx'.\rol{} \in \rolids) \And (\tx'.\rol{} \neq \tx.\rol{})$
        \State $\tx'' \gets \gsc_{\tx'.\rol{}}.\action(\langle \tx' \rangle)$
        \State $\status{2} \gets$ \Call{xevm}{$\tx''$}
        \State \Return $\status{2}$
    \EndFunction
    \Statex
    \Function{entryPoint}{$\tx{}$}
        \For{$\id : \rolids$}
            \State $\cp{\id} \gets \state{\id}$
        \EndFor
        \State $\status{} \gets $ \Call{xevm}{$\tx{}$}
        \If{$(\status{} = \false $}
            \For{$\id : \rolids$}
                \State $\state{\id} \gets \cp{\id}$
            \EndFor
        \EndIf
        
    \EndFunction
\end{algorithmic}
    
\end{algorithm}

\begin{lstlisting}[language=Solidity][h]
contract XToken is IERC20 {

    uint256 public totalSupply;
    mapping(address => uint256) public balanceOf;
    GeneralSystemContract public gsc;
    address public oTokenAddr;

    function setup(address _oTokenAddr) public {
        oTokenAddr = _oTokenAddr;
    }

    modifier onlyGSC() {
        require(msg.sender == address(gsc), "Token: only GSC");
        _;
    }

    function transfer(address recipient, uint256 amount)
        external returns (bool)
    {
        balanceOf[msg.sender] -= amount;
        balanceOf[recipient] += amount;
        return true;
    }

    function mint(address to, uint256 amount) onlyGSC external {
        require(gsc.xSender() == oTokenAddr, "Token: only oToken can trigger mint"); // new addition
        _mint(to, amount);
    }

    function burn(address to, uint256 amount) external {
        address from = msg.sender;
        _burn(from, amount);
        bytes memory cdMint = abi.encodeWithSignature(
            "mint(address,uint256)", 
            to, amount
        );
        gsc.trigger(oTokenAddr, cdMint, 10_000);
    }

    function _mint(address to, uint256 amount) internal {
        balanceOf[to] += amount;
        totalSupply += amount;
    }

    function _burn(address from, uint256 amount) internal {
        balanceOf[from] -= amount;
        totalSupply -= amount;
    }
}
\end{lstlisting}

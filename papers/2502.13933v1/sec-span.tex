%!TEX root = main.tex

\section{Span}
\label{sec:span}

\input{Figures/fig-general-aloss-span}

We move on to another way of simplifying game-structures by generalizing $\salr$. The
game-structure in \cref{fig:alossSpan-a} (call it $\Tt_1$) is an equivalent version of game \textbf{III} (\cref{fig:match-penny-3-die-c}). It neither has
$\pfr$, nor $\alr$. Using
Algorithm~\ref{algo:alosshuffle}, we can show that it does not have $\salr$ either. Now, consider the game-structure in
\cref{fig:alossSpan-b} (call it
$\Tt'_1$). It has $\alr$. Each leaf monomial of $\Tt_1$ can be written as 
a linear combination of the leaf monomials of $\Tt'_1$: e.g.,
the leaf monomial $x_ax_{\bar{c}}$ of $\Tt_1$ is equal to
$x_{\bar{c}}x_d x_a + x_{\bar{c}} x_{\bar{d}} x_a$, a combination of leaf
monomials of $\Tt'_1$.  The game-structure $\Tt_1$ is said to be
\emph{spanned by} $\Tt'_1$. This property allows to solve games
derived from the structure $\Tt_1$ by converting them into a game on
$\Tt'_1$ with a suitably designed utility function so that both games
induce the same payoff polynomial, and then solving the resulting
A-loss recall game. This is 
illustrated in \cref{fig:alossSpan-a} and \cref{fig:alossSpan-b}. Results in this section:
\begin{itemize}\item We show that every \nam~ imperfect recall game structure is
  spanned by an A-loss recall structure
  (\cref{thm:existence-alr-span}).  The caveat is that the
  smallest A-loss recall span may be of exponential size: we exhibit a
  family of game structures where this happens
  (\cref{thm:lower-bound}).

\item We provide an algorithm to compute an A-loss recall span of
  smallest size. We show that the associated decision problem is in $\NP$ (\cref{thm:span-NP}). We also identify classes of games with `small' $\alr$-span using a new parameter (\cref{cor:effic-solv-class}). 
\end{itemize}


We will now formally present $\alr$-span.
Similar to last section, we will keep our discussion to one-player
games and later discuss extensions to two players in \cref{sec:two-player}.

Since we will deal with polynomials formed using leaf monomials, we
need the notion of reducing one polynomial to
another.   Recall that since these variables are denoting
behavioral strategies, every valuation to the variables satisfies the
strategy constraints.  We say polynomial $f_1$ reduces to $f_2$ under
strategy constraints if we can get $f_2$ by applying finitely many
substitutions in $f_1$ of the form $\sum\limits_{a \in Act(I)}
x_{a} = 1$. E.g., the polynomial
$x_a x_d x_c ~+~ x_a x_d x_{\bar{c}} ~+~x_{\bar{a}}x_d x_c ~+~ x_{\bar{a}}
x_d x_{\bar{c}}~$ reduces to $x_d$ by applying the substitutions
$x_a + x_{\bar{a}} =1$ and $x_c + x_{\bar{c}} =1$. Observe that, when
$f_1$ reduces $f_2$, they are essentially the same polynomials over
the space with strategy constraints, i.e. they evaluate to the same
value under every assignment of values satisfying the strategy
constraints.   \begin{definition}[$\alr$-span]
  Let $\Tt$ be a game structure with set of leaf monomials
  $X(\Tt)$. We call a structure $\Tt'$ an $\alr$-span of $\Tt$ if
  \begin{itemize}  \item $\Tt'$ has $\alr$.
  \item each monomial in $X(\Tt)$ can be generated by monomials in
    $X(\Tt')$ by linear combinations i.e.  $\forall \mu \in X(\Tt)$
    there exist coefficients
    $ \{c^{\mu}_{\mu'}\}_{\mu' \in X(\Tt')} \in \Real^{|X(\Tt')|}$ such that the
    polynomial $\sum\limits_{\mu' \in X(\Tt')}c^{\mu}_{\mu'}\mu'$ reduces to
    $\mu$ under strategy constraints.
  \end{itemize}

\end{definition}
The game structure $\Tt'_1$ in \cref{fig:alossSpan-b} is an
$\alr$-span of $\Tt_1$ in \cref{fig:alossSpan-a}. E.g., for the
monomial $x_{\bar{b}}x_{\bar{d}}$ in $\Tt_1$, the linear combination
$x_cx_{\bar{d}} x_{\bar{b}} + x_{\bar{c}} x_{\bar{d}} x_{\bar{b}}$
reduces to it by substituting $x_d + x_{\bar{d}} = 1$. In fact,
observe that for any monomial $\mu$ in $X(\Tt_1)$, the sum of the two
monomials in $X(\Tt'_1)$ that contain the actions in $\mu$, reduces to
$\mu$.

The next proposition states that we can use $\alr$-span $\Tt_1'$ to solve
games on structure $\Tt_1$ (see \cref{fig:alossSpan-a} and
\cref{fig:alossSpan-b}). We can assign suitable payoffs $w_i$s in
terms of $z_i$s and $p_i$s
to get an equivalent game. Let $t_i$ be the
leaf that has payoff $w_i$.The payoff $w_i$ is the sum of the quantities
$\frac{\prob_{\chance}(t)c^{\mu(t)}_{\mu(t_i)}\Uu(t)}{\prob_{\chance}(t_i)}$ for all $t$ in
$\Tt_1$, in which $\mu(t_i)$ contributed to generate $\mu(t)$. E.g., $t_1$, with polynomial $x_c x_d x_a$ contributes in generating
only $x_ax_c$ (for the leaf corresponding to $z_1$). Hence $w_1 =
2p_1z_1$. Similarly, $w_5 = 2p_1z_1$. In the payoff polynomial of the second game, since $x_cx_dx_a + x_c\bar{x_d}x_a = x_ax_c$, we will have the term $p_1z_1 x_ax_c$ in the payoff polynomial. This way, we will get the same payoff polynomial as original game, thus reducing the original game to a game on $\Tt'_1$. 

\begin{restatable}{proposition}{spanToGame}\label{prop:span-to-game}
  Let $\Tt$ be a game structure and $\Tt'$ an $\alr$-span of $\Tt$.
  Then for every game $G = (\Tt, \d, \Uu)$ on $\Tt$, there exists a game
  $G' = (\Tt', \d', \Uu')$ on $\Tt'$ such that solving $G$ can be
  reduced to solving $G'$. \end{restatable}


\paragraph*{Existence of ALR-spans.} From the definition, one can
see that when $\Tt$ has $\salr$, an $\salr$ witness is
also an $\alr$-span of $\Tt$. Surprisingly, we can show that every
$\nam$ structure has $\alr$-span.

\begin{restatable}{theorem}{alrspan}\label{thm:existence-alr-span}
  Every $\nam$-game structure $\Tt$ has an $\alr$-span.
\end{restatable}
\begin{proof}[Proof Sketch]
  We can explicitly provide an $\alr$-span $\Tt'$ of $\Tt$.   Let $\Ii$ be the set of information sets in $\Tt$. The structure
  $\Tt'$ has $|\Ii|$ levels of player nodes corresponding to each $I
  \in \Ii$. All nodes in a level are placed in
  one information set. Therefore the leaves of $\Tt'$ are all possible
  monomials using the information sets $\Ii$. Moreover, $\Tt'$ has $\alr$. To generate a monomial $\mu \in X(\Tt)$
  one can combine the monomials of all paths containing actions from
  $\mu$ in $X(\Tt')$.
\end{proof}




\paragraph*{Minimal ALR-span} In order to take advantage of
Proposition~\ref{prop:span-to-game}, one would need to find small
$\alr$-spans. We observe that the $\alr$-span obtained in the proof of
Theorem~\ref{thm:existence-alr-span} has exponential size.  We will
now delve into finding $\alr$-spans of smallest size : a \emph{minimal
  $\alr$-span}.  First we will list some key observations concerning
minimal $\alr$-spans which will lead to an algorithm for computing
one. Then we will show that the exponential blowup in size of
$\alr$-spans is unavoidable in general by exhibiting a class of games
with minimal $\alr$-span of exponential size. Since $\alr$-games are solvable in polynomial time, this aligns with the fact that the maxmin problem for general one-player
  $\nam$-games is $\NP$-hard.

Similar to Section~\ref{sec:shuffled-loss-recall}, we will work
directly with sequence sets. The notions related to span are extended
to sequence sets in a natural manner, i.e. when $\Tt'$ is an
$\alr$-span of $\Tt$, $\Hh(L_{\Tt'})$ is an $\alr$-span of
$\Hh(L_{\Tt})$  

\begin{restatable}{proposition}{minSpanDisc}\label{prop:min-span-disconnected}
  For a sequence set $S$, let $S = \biguplus_{i}S_i$ be the
  decomposition of $S$ into maximal connected components. Let $S'_i$
  be a minimal $\alr$-span of $S_i$. Then
  $S' = \biguplus_{i}S'_i$ is a minimal $\alr$-span of $S$
\end{restatable}

We can show that a minimal $\alr$-span of a connected set is also
connected. By definition, the $\alr$-span is a set of sequences that
has $\alr$, and by the first point in the definition of $\alr$ on
sequence sets, we deduce that there is an $I$ such that all sequences
in the minimal span start with $\act(I)$.

\begin{restatable}{lemma}{spanFirstInfo}\label{lem:span-first-I}
  Let $S$ be a connected set and $S'$ be a minimal $\alr$-span of
  $S$. Then $\exists I \in \Ii$, such that all sequences in $S'$ start
  with $\act(I)$.
\end{restatable}


The next observation says how to find this $I$. 
\begin{restatable}{lemma}{spanFindFirstInfo}\label{lem:span-finding-first-I}
  Let $S$ be a connected set. If there is an $I$ such that every
  sequence of $S$ has an action in $\act(I)$, then there is a minimal
  $\alr$-span $S'$ of $S$ such that all sequences in $S'$ start with
  $\act(I)$.
\end{restatable}

If there is no such $I$, then we need to enumerate over all
information sets to find the smallest. Once we fix an $I$, the next
lemma says how to find a minimal $\alr$-span which starts with
$\act(I)$.

\begin{restatable}{lemma}{spanAfterFixingInfo}\label{lem:span-after-fixing-an-I}
  Let $S$ be a connected set, and let $I \in \Ii$. An $\alr$-span of smallest size among all
    $\alr$-spans starting with $\act(I)$ is the following:
    $S' = \bigcup_{a \in \act(I)}a H_a'$ where $H_a'$ is a minimal
    $\alr$-span of $S_a \cup S_{\bar{I}}$ where $S_{\bar{I}} := \{ s
    \in S \mid s \text{ contains no 
      action from } \act(I)$.
                \end{restatable}







\paragraph*{Algorithm for computing minimal ALR-span.} Based on the
lemmas above, we can design a recursive algorithm to compute a minimal
$\alr$-span for an input sequence set $S$.  
Firstly, if $S$ is disconnected, based on \cref{prop:min-span-disconnected}, $S$ is decomposed
into maximal connected components and a minimal
$\alr$-span is computed for each component. When $S$ is connected:
(1) for each $I \in \Ii$, compute $H_I = \{ s \mid s ~\text{contains no
  action from} \act(I) \}$; (2) if there is some $I$ such that $H_I =
\emptyset$ (Lemma~\ref{lem:span-finding-first-I}), find the smallest $\alr$-span starting with $\act(I)$
using Lemma~\ref{lem:span-after-fixing-an-I}; (3) else, for each $I$,
compute the smallest $\alr$-span starting from $\act(I)$ using
Lemma~\ref{lem:span-after-fixing-an-I} and return the smallest.
We remark that in the algorithm to find the minimal $\alr$-span, $\epsilon$ might appear in intermediate sequence sets. In that case, we just remove $\epsilon$ from the set and continue the algorithm. 





                              


Next, we show that there are game-structures whose minimal
$\alr$-spans are exponentially large.

\begin{restatable}{theorem}{spanLowerBound}\label{thm:lower-bound}
  For every $n > 0$, there exists a game structure $\Tt_n$ of size
  $\Oo(n^2)$ such that the size of a minimal $\alr$-span of $\Tt_n$ is
  $\Omega(2^n)$.
\end{restatable}



\paragraph*{Complexity} 
In order to investigate the complexity of computing a minimal
$\alr$-span of a game structure, we consider the following decision
problem and show it to be in $\NP$. We leave open the question of whether
it is $\NP$-hard.  

\textsc{MIN-ALR-SPAN}: Given a game structure $\Tt$ and an integer $k > 0$, is there a game structure $\Tt'$ such that $|\Tt'| \leq k$ and $\Tt'$ is an $\alr$-span of $\Tt$?


\begin{restatable}{theorem}{spanNP}\label{thm:span-NP}
The decision problem MIN-ALR-SPAN is in $\NP$. 
\end{restatable}
\begin{proof}[Proof Sketch]
One can guess a $\Tt'$ of size at most $k$, and also the linear
combinations required for each $\mu \in X(\Tt)$. This is polynomial in
size. For each monomial $\mu \in X(\Tt)$ we verify if the monomials in
$X(\Tt')$ containing all variables from $\mu$ can generate $\mu$. This
can be done efficiently in polynomial-time. \qedhere \end{proof}







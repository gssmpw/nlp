
\onecolumn
\begin{prompt}{Parsing Script for Sorting Responses}{}

\begin{lstlisting}

def parse_sorted_list(response):

    try:
        # Step 1: Extract bracketed list if present
        bracketed_list_match = re.search(r'\[.*?\]', response)
        if bracketed_list_match:
            # Extract numbers from the bracketed content
            bracket_content = bracketed_list_match.group(0)
            numbers = [int(num) for num in re.findall(r'-?\d+', bracket_content)]
            return numbers
        
        # Step 2: Clean up numbered list prefixes (e.g., "1. 9", "2. 13")
        cleaned_response = re.sub(r'^\s*\d+\.\s*', '', response, flags=re.MULTILINE)
        
        # Step 3: Extract the textual list (e.g., "9, 13, 29...")
        textual_list_match = re.search(r'(?<=\bThe sorted list is:)[^\n]*', cleaned_response, re.IGNORECASE)
        if textual_list_match:
            textual_content = textual_list_match.group(0)
            numbers = [int(num) for num in re.findall(r'-?\d+', textual_content)]
            return numbers
        
        # Step 4: Fallback - Extract all numbers in order from the cleaned response
        numbers = [int(num) for num in re.findall(r'-?\d+', cleaned_response)]
        return numbers
    
    except Exception as e:
        print(f"Error parsing response: {response}. Error: {e}")
        return []



\end{lstlisting}

\end{prompt}

\twocolumn
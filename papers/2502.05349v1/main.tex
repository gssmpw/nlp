%Version 3 October 2023
% See section 11 of the User Manual for version history
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                 %%
%% Please do not use \input{...} to include other tex files.       %%
%% Submit your LaTeX manuscript as one .tex document.              %%
%%                                                                 %%
%% All additional figures and files should be attached             %%
%% separately and not embedded in the \TeX\ document itself.       %%
%%                                                                 %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%\documentclass[referee,sn-basic]{sn-jnl}% referee option is meant for double line spacing

%%=======================================================%%
%% to print line numbers in the margin use lineno option %%
%%=======================================================%%

%%\documentclass[lineno,sn-basic]{sn-jnl}% Basic Springer Nature Reference Style/Chemistry Reference Style

%%======================================================%%
%% to compile with pdflatex/xelatex use pdflatex option %%
%%======================================================%%

%%\documentclass[pdflatex,sn-basic]{sn-jnl}% Basic Springer Nature Reference Style/Chemistry Reference Style


%%Note: the following reference styles support Namedate and Numbered referencing. By default the style follows the most common style. To switch between the options you can add or remove �Numbered� in the optional parenthesis. 
%%The option is available for: sn-basic.bst, sn-vancouver.bst, sn-chicago.bst%  
 
%%\documentclass[sn-nature]{sn-jnl}% Style for submissions to Nature Portfolio journals
%%\documentclass[sn-basic]{sn-jnl}% Basic Springer Nature Reference Style/Chemistry Reference Style
\documentclass[sn-mathphys-num]{sn-jnl}% Math and Physical Sciences Numbered Reference Style 
%%\documentclass[sn-mathphys-ay]{sn-jnl}% Math and Physical Sciences Author Year Reference Style
%%\documentclass[sn-aps]{sn-jnl}% American Physical Society (APS) Reference Style
%%\documentclass[sn-vancouver,Numbered]{sn-jnl}% Vancouver Reference Style
%%\documentclass[sn-apa]{sn-jnl}% APA Reference Style 
%%\documentclass[sn-chicago]{sn-jnl}% Chicago-based Humanities Reference Style

%%%% Standard Packages
%%<additional latex packages if required can be included here>

\usepackage{graphicx}%
\usepackage{multirow}%
\usepackage{amsmath,amssymb,amsfonts}%
\usepackage{amsthm}%
\usepackage{mathrsfs}%
\usepackage[title]{appendix}%
% \usepackage{xcolor}%
\usepackage{textcomp}%
\usepackage{manyfoot}%
\usepackage{booktabs}%
\usepackage{algorithm}%
\usepackage{algorithmicx}%
\usepackage{algpseudocode}%
\usepackage{listings}%
\usepackage{thmtools,thm-restate}
\usepackage{lscape} % Add this to your preamble


\usepackage{braket}
% \usepackage{caption}
% \usepackage{subcaption}
\usepackage{setspace}
\usepackage{blkarray}
\usepackage{changepage}
\usepackage[table,xcdraw]{xcolor}
% \titleformat*{\section}{\LARGE\bfseries}
% \titleformat*{\subsection}{\Large\bfseries}
% \titleformat*{\subsubsection}{\bfseries}
% \titleformat*{\paragraph}{\large\bfseries}
% \titleformat*{\subparagraph}{\large\bfseries}
\usepackage{mathtools}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage{ragged2e}

\DeclarePairedDelimiterX{\norm}[1]{\lVert}{\rVert}{#1}

% \setlength{\belowcaptionskip}{-5pt}
% \captionsetup{font=small} 

\newcommand{\bs}[1]{\boldsymbol{#1}}
\newlength{\littlespace}
\setlength{\littlespace}{5pt}

\makeatletter
\def\EGT{\footnotesize}% Define a font size for notes
\def\FigureNoteStyle{\EGT\rm} % Style for the figure notes
\def\FigureNoteName{Note.} % Text label for notes
\def\HD#1#2{\vrule height #1pt depth #2pt width 0pt\relax} % Define spacing for layout

\newcommand{\FIGURE}[3]{%
  \begingroup % Start a group to contain temporary definitions
  \long\def\fignote##1{\relax}% Default: do nothing
  \if\relax\detokenize{#3}\relax % Check if the third argument is empty
    % If empty, \fignote remains a no-op
  \else
    \long\def\fignote##1{\par\noindent
      \FigureNoteStyle\noindent\HD{11}{0}{\it\FigureNoteName}\enskip \justifying ##1\par}%
  \fi
  \begin{minipage}{\textwidth} % Allow the figure to span the full text width
    \caption[#2]{#2}% Second argument: the caption
    \vskip4pt
    \centering % Center the figure
    #1 % First argument: the figure itself
    \vskip4pt
    \fignote{#3}% Third argument: the note (conditionally included)
  \end{minipage}
  \endgroup % End the temporary group
}
\makeatother

\makeatletter
\def\EGT{\footnotesize}% Define a font size for notes
\def\TableNoteStyle{\EGT\rm} % Style for the table notes
\def\TableNoteName{Note.} % Text label for notes
\def\HD#1#2{\vrule height #1pt depth #2pt width 0pt\relax} % Define spacing for layout
\newcommand{\TABLE}[3]{%
  \begingroup % Start a group to contain temporary definitions
  \long\def\tabnote##1{\relax}% Default: do nothing
  \if\relax\detokenize{#3}\relax % Check if the third argument is empty
    % If empty, \tabnote remains a no-op
  \else
    \long\def\tabnote##1{\par\noindent
      \TableNoteStyle\noindent\HD{11}{0}{\it\TableNoteName}\enskip \justifying ##1\par}%
  \fi
  \begin{minipage}{\textwidth} % Allow the table to span the full text width
    \caption[#1]{#1}% First argument: the caption
    %\vskip6pt
    \centering % Center the table
    #2 % Second argument: the table content
    %\vskip4pt
    \tabnote{#3}% Third argument: the note (conditionally included)
  \end{minipage}
  \endgroup % End the temporary group
}
\makeatother



%% as per the requirement new theorem styles can be included as shown below
\theoremstyle{thmstyleone}%
\newtheorem{theorem}{Theorem}%  meant for continuous numbers
%%\newtheorem{theorem}{Theorem}[section]% meant for sectionwise numbers
%% optional argument [theorem] produces theorem numbering sequence instead of independent numbers for Proposition
\newtheorem{proposition}[theorem]{Proposition}% 
%%\newtheorem{proposition}{Proposition}% to get separate numbers for theorem and proposition etc.

\theoremstyle{thmstyletwo}%
\newtheorem{example}{Example}%
\newtheorem{remark}{Remark}%

\theoremstyle{thmstylethree}%
\newtheorem{definition}{Definition}%

\newtheorem{assumption}{Assumption}

\raggedbottom
%%\unnumbered% uncomment this for unnumbered level heads

\begin{document}

\title[Contextual Scenario Generation for Two-Stage Stochastic Programming]{Contextual Scenario Generation for Two-Stage Stochastic Programming}

%%=============================================================%%
%% GivenName	-> \fnm{Joergen W.}
%% Particle	-> \spfx{van der} -> surname prefix
%% FamilyName	-> \sur{Ploeg}
%% Suffix	-> \sfx{IV}
%% \author*[1,2]{\fnm{Joergen W.} \spfx{van der} \sur{Ploeg} 
%%  \sfx{IV}}\email{iauthor@gmail.com}
%%=============================================================%%

\author[1]{\fnm{David} \sur{Islip}}\email{ryan.islip@mail.utoronto.ca \orcid{https://orcid.org/0009-0001-6857-097X
}}\dgr{}

\author*[1]{\fnm{Roy H.} \sur{Kwon}}\email{rkwon@mie.utoronto.ca \orcid{https://orcid.org/0000-0002-0502-1607
}}
% \equalcont{These authors contributed equally to this work.}

\author[2]{\fnm{Sanghyeon} \sur{Bae}}\email{azureharry@kaist.ac.kr \orcid{https://orcid.org/0000-0002-8862-7363
}}
% \equalcont{These authors contributed equally to this work.}

\author[2]{\fnm{Woo Chang} \sur{Kim}}\email{wkim@kaist.ac.kr \orcid{https://orcid.org/0000-0001-8385-9598
}}
% \equalcont{These authors contributed equally to this work.}

\affil[1]{\orgdiv{Department of Mechanical and Industrial Engineering}, \orgname{University of Toronto}, \orgaddress{\street{5 King's College Rd}, \city{Toronto}, \postcode{M5S 3G8}, \state{Ontario}, \country{Canada}}}

\affil[2]{\orgdiv{Department of Industrial and Systems Engineering}, \orgname{Korea Advanced Institute of Science and Technology (KAIST)}, \orgaddress{\street{291 Daehak-ro}, \city{Yuseong-gu, Daejeon}, \postcode{34141}, \country{Republic of Korea}}}


%%==================================%%
%% Sample for unstructured abstract %%
%%==================================%%

\abstract{Two-stage stochastic programs (2SPs) are important tools for making decisions under uncertainty. Decision-makers use contextual information to generate a set of scenarios to represent the true conditional distribution. However, the number of scenarios required is a barrier to implementing 2SPs, motivating the problem of generating a small set of surrogate scenarios that yield high-quality decisions when they represent uncertainty. Current scenario generation approaches do not leverage contextual information or do not address computational concerns. In response, we propose contextual scenario generation (CSG) to learn a mapping between the context and a set of surrogate scenarios of user-specified size. First, we propose a distributional approach that learns the mapping by minimizing a distributional distance between the predicted surrogate scenarios and the true contextual distribution. Second, we propose a task-based approach that aims to produce surrogate scenarios that yield high-quality decisions. The task-based approach uses neural architectures to approximate the downstream objective and leverages the approximation to search for the mapping. The proposed approaches apply to various problem structures and loosely only require efficient solving of the associated subproblems and 2SPs defined on the reduced scenario sets. Numerical experiments demonstrating the effectiveness of the proposed methods are presented.}



\keywords{Stochastic Programming, Scenario Generation, End-to-end learning, Contextual Optimization}

%%\pacs[JEL Classification]{D8, H51}

%%\pacs[MSC Classification]{35A01, 65L10, 65L12, 65L20, 65L70}

\maketitle


\input{introduction.tex}
\input{methodology.tex}
\input{experiments.tex}
\input{conclusions.tex}

\subsection*{Acknowledgements}
The authors received financial support from the a joint International Doctoral Cluster between the KAIST and the University of Toronto, Department of Mechanical and Industrial Engineering.

\section*{Declarations}

\subsection*{Funding}
Financial support was provided by NSERC Grant 455963 for David Islip and Roy H. Kwon.

\subsection*{Conflict of interest}
The authors have no relevant financial or non-financial interests to disclose.

% \subsection*{Ethics approval and consent to participate}
% Not applicable.
% \subsection*{Consent for publication}
% Not applicable.
\subsection*{Data availability}
All data used in the experiments is either simulated (and accessible in the Appendix) or available via the Tiingo data service (\url{https://www.tiingo.com/}).

% \subsection*{Materials availability}
% Not applicable.
% \subsection*{Code availability}
% The code is available


\subsection*{Author contribution}

\begin{itemize}
  \item David Islip: Writing - review \& editing, Writing - original draft, Validation, Software, Methodology, Formal analysis, Conceptualization.
  \item Roy H. Kwon: Writing - review \& editing, Writing - original draft, Supervision, Resources, Project administration, Funding acquisition, Conceptualization.
  \item Sanghyeon Bae: Writing - review \& editing, Methodology, Formal analysis, Conceptualization
  \item Woo Chang Kim: Writing - review \& editing, Supervision, Resources, Project administration, Funding acquisition, Conceptualization.
\end{itemize}

% \begin{itemize}
% %\item Funding
% %\item Conflict of interest/Competing interests (check journal-specific guidelines for which heading to use)
% \item Ethics approval and consent to participate
% \item Consent for publication
% \item Data availability 
% \item Materials availability
% \item Code availability 
% \item Author contribution
% \end{itemize}

% \noindent
% If any of the sections are not relevant to your manuscript, please include the heading and write `Not applicable' for that section. 

\begin{appendices}

        \input{appendix.tex}
  



\end{appendices}



\bibliography{main}% common bib file




\end{document}

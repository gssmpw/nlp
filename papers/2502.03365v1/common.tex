\newboolean{showcomments}
\setboolean{showcomments}{false}
\newboolean{peerreview}
\setboolean{peerreview}{false}

\definecolor{gray75}{gray}{.25}
\definecolor{gray50}{gray}{.5}
\definecolor{gray40}{gray}{.6}
\definecolor{gray30}{gray}{.7}
\definecolor{gray25}{gray}{.75}
\definecolor{gray20}{gray}{.8}
\definecolor{gray15}{gray}{.85}
\definecolor{gray10}{gray}{.9}
\definecolor{gray05}{gray}{.95}
\definecolor{redbg}{HTML}{F2968F}
\definecolor{greenbg}{HTML}{CDE4AE}
\definecolor{ghdiffredbg}{HTML}{ffccce}
\definecolor{ghdiffgreenbg}{HTML}{abefbc}
\definecolor{goalcolor}{HTML}{fffff2}
\definecolor{rqboxcolor}{HTML}{f2f2ff}
\definecolor{rqanswercolor}{HTML}{faf9f5}
\definecolor{takeawaycolor}{HTML}{f2fff2}

\newcommand{\goal}[1]{ %
	\medskip %
	\noindent\fcolorbox{black}{goalcolor}{%
		\parbox{0.97\linewidth}{% 
			\textbf{\faBullseye\ Our Goal.} #1 %
		}%
	}%
	\medskip %
}%

\newcommand{\rqbox}[2]{%
	\medskip%
	\noindent\fcolorbox{black}{rqboxcolor}{%
		\parbox{0.97\linewidth}{% 
			\textbf{\faSearch\ RQ$_{#1}$.} \textit{#2} %
		}%
	}%
	\medskip%
}%

\newcommand{\rqanswer}[2]{%
	\medskip%
	\noindent\fcolorbox{black}{rqanswercolor}{%
		\parbox{0.97\linewidth}{% 
			\textbf{\faHandPointRight\ Answer to RQ$_{#1}$.} #2%
		}%
	}%
	\medskip%
}%

\newcommand{\furtheranswer}[1]{%
	\medskip%
	\noindent\fcolorbox{black}{rqanswercolor}{%
		\parbox{0.97\linewidth}{% 
			\textbf{\faHandPointRight[regular]\ Further Analysis Summary.} #1%
		}%
	}%
	\medskip%
}%

\newcommand{\takeaway}[1]{%
	\medskip%
	\noindent\fcolorbox{black}{takeawaycolor}{%
		\parbox{0.97\linewidth}{% 
			\textbf{\faEnvelopeOpenText\ Takeaway Message.} #1 %
		}%
	}%
	\medskip%
}%

\newcommand{\nb}[3]{
    \fbox{\bfseries\sffamily\scriptsize\color{#3}#1}
	{\sf\small$\blacktriangleright${\color{#3}\textit{\textbf{#2}}}$\blacktriangleleft$}
}

\newcommand\rqOne{\textbf{RQ$_1$}\xspace}
\newcommand\rqTwo{\textbf{RQ$_2$}\xspace}

\newcommand\TEMP[1]{\textcolor{red}{#1}}
\newcommand\REMOVE[1]{\textcolor{gray20}{#1}}
%\newcommand\REMOVE[1]{\nb{REMOVE}{#1}{gray20}}

\ifthenelse{\boolean{showcomments}}
{
\newcommand\EMANUELE[1]{\nb{EI}{#1}{orange}}
\newcommand\CUONG[1]{\nb{CB}{#1}{cyan}}
\newcommand\RICCARDO[1]{\nb{RS}{#1}{magenta}}
\newcommand\CB[1]{\CUONG{#1}}
\newcommand\EI[1]{\EMANUELE{#1}}
\newcommand\RS[1]{\RICCARDO{#1}}
}
{\newcommand\EMANUELE[1]{}
\newcommand\CUONG[1]{}
\newcommand\RICCARDO[1]{}
\newcommand\CB[1]{}
\newcommand\EI[1]{}
\newcommand\RS[1]{}
}

\newcommand\CITENEEDED[1]{\textcolor{olive}{\footnote{\textcolor{olive}{CITE: #1}}}}
\newcommand\COMMENT[1]{\textcolor{red}{\footnote{\textcolor{red}{#1}}}}

\newcommand\VulforJ{\textsc{Vul4J}\xspace}
\newcommand\Java{\textsc{Java}\xspace}
\newcommand\JUnit{\textsc{JUnit}\xspace}
\newcommand\vuteco{VUTECO\xspace}
\newcommand\projectKB{\textsc{ProjectKB}\xspace}
\newcommand\finding{\textit{Finding}\xspace}
\newcommand\matching{\textit{Matching}\xspace}
\newcommand\finder{\textit{Finder}\xspace}
\newcommand\linker{\textit{Linker}\xspace}
\newcommand\globalModel{\textcolor{cyan}{\textit{Global}}\xspace}
\newcommand\vocab{\textit{Vocab}\xspace}
\newcommand\yakeVocab{\textit{YAKE-Vocab}\xspace}
\newcommand\identVocab{\textit{Identifier-Vocab}\xspace}
\newcommand\simil{\textit{Simil}\xspace}
\newcommand\yakeSimil{\textit{YAKE-Simil}\xspace}
\newcommand\codebertSimil{\textit{CodeBERT-Simil}\xspace}
\newcommand\devNames{\textit{DevNames}\xspace}
\newcommand\keywords{\textit{Keywords}\xspace}
\newcommand\fixCommits{\textit{FixCommits}\xspace}
\newcommand\finderPosClass{\textsl{``Security''}\xspace}
\newcommand\finderNegClass{\textsl{``Not-Security''}\xspace}
\newcommand\linkerPosClass{\textsl{``Linked''}\xspace}
\newcommand\linkerNegClass{\textsl{``Not-Linked''}\xspace}
\newcommand\globalPosClass{\textsl{``Matched''}\xspace}
\newcommand\globalNegClass{\textsl{``Not-Matched''}\xspace}
\newcommand\JavaTransformer{\textsc{JavaTransformer}\xspace}

\newcommand\fndEpochs{\textsl{F-Epo}\xspace}
\newcommand\fndHOne{\textsl{F-H1}\xspace}
\newcommand\fndHTwo{\textsl{F-H2}\xspace}
\newcommand\fndOneLine{\textsl{F-1L}\xspace}
\newcommand\fndAug{\textsl{F-Aug}\xspace}
%
\newcommand\lnkEpochs{\textsl{L-Epo}\xspace}
\newcommand\lnkHOne{\textsl{L-H1}\xspace}
\newcommand\lnkHTwo{\textsl{L-H2}\xspace}
\newcommand\lnkOneLine{\textsl{L-1L}\xspace}
\newcommand\lnkAug{\textsl{L-Aug}\xspace}
\newcommand\lnkConcat{\textsl{L-Cat}\xspace}
\newcommand\lnkCwe{\textsl{L-CWE}\xspace}
%
\newcommand\glbMode{\textsl{I-Mode}\xspace}
\newcommand\glbAug{\textsl{I-Aug}\xspace}
\newcommand\glbEpochs{\textsl{I-Epo}\xspace}
\newcommand\glbThres{\textsl{I-Thres}\xspace}

\newcommand\vulforjWitTests{108\xspace}
\newcommand\vulforjNotTests{62,527\xspace}
\newcommand\vulforjTests{62,635\xspace}
\newcommand\vulforjVulns{79\xspace}
\newcommand\vulforjVulnsWithMetadata{76\xspace}
\newcommand\vulforjProjects{51\xspace}

\newcommand\finderTrainingEpochs{eight\xspace}
\newcommand\finderTrainingSize{62,635\xspace}
\newcommand\finderTrainingPosSize{108\xspace}
\newcommand\finderTrainingPosPerc{0.2\%\xspace}
\newcommand\linkerTrainingEpochs{10\xspace}
\newcommand\linkerTrainingSize{7,770\xspace}
\newcommand\linkerTrainingPosSize{105\xspace}
\newcommand\linkerTrainingPosPerc{1.4\%\xspace}
\newcommand\linkerTrainingExtra{3,727\xspace}
\newcommand\globalTrainingEpochs{eight\xspace}
\newcommand\globalTrainingSize{85,410\xspace}
\newcommand\globalTrainingPosSize{105\xspace}
\newcommand\globalTrainingPosPerc{0.12\%\xspace}

% \newcommand\finderTrainingSize{40,491\xspace}
% \newcommand\finderTrainingPosSize{79\xspace}
% \newcommand\finderTrainingPosPerc{0.2\%\xspace}
% \newcommand\linkerTrainingSize{7,731\xspace}
% \newcommand\linkerTrainingPosSize{89\xspace}
% \newcommand\linkerTrainingPosPerc{1.2\%\xspace}
% \newcommand\linkerTrainingExtra{2,610\xspace}

\newcommand\evalFinderTrainTrue{76\xspace}
\newcommand\evalFinderTrainFalse{43,768\xspace}
\newcommand\evalFinderTrainTot{43,844\xspace}
\newcommand\evalFinderDevTrue{16\xspace}
\newcommand\evalFinderDevFalse{9,379\xspace}
\newcommand\evalFinderDevTot{9,395\xspace}
\newcommand\evalFinderTestTrue{16\xspace}
\newcommand\evalFinderTestFalse{9,380\xspace}
\newcommand\evalFinderTestTot{9,396\xspace}

\newcommand\evalLinkerTrue{105\xspace}
\newcommand\evalLinkerFalse{7,665\xspace}
\newcommand\evalLinkerTot{7,770\xspace}
\newcommand\evalLinkerTrainTrue{73\xspace}
\newcommand\evalLinkerTrainFalse{5,366\xspace}
\newcommand\evalLinkerTrainTot{5,439\xspace}
\newcommand\evalLinkerDevTrue{16\xspace}
\newcommand\evalLinkerDevFalse{1,149\xspace}
\newcommand\evalLinkerDevTot{1,165\xspace}
\newcommand\evalLinkerTestTrue{16\xspace}
\newcommand\evalLinkerTestFalse{1,150\xspace}
\newcommand\evalLinkerTestTot{1,166\xspace}

\newcommand\evalGlobalTrue{105\xspace}
\newcommand\evalGlobalFalse{85,305\xspace}
\newcommand\evalGlobalTot{85,410\xspace}
\newcommand\evalGlobalTrainTrue{73\xspace}
\newcommand\evalGlobalTrainFalse{59,714\xspace}
\newcommand\evalGlobalTrainTot{59,787\xspace}
\newcommand\evalGlobalDevTrue{16\xspace}
\newcommand\evalGlobalDevFalse{12,795\xspace}
\newcommand\evalGlobalDevTot{12,811\xspace}
\newcommand\evalGlobalTestTrue{16\xspace}
\newcommand\evalGlobalTestFalse{12,796\xspace}
\newcommand\evalGlobalTestTot{12,812\xspace}

%\newcommand\globalTrainingSize{\evalGlobalTrainTot}
%\newcommand\globalTrainingPosSize{\evalGlobalTrainTrue}
%\newcommand\globalTestSize{\evalGlobalTestTot}
%\newcommand\globalTestPosSize{\evalGlobalTestTrue}
%\newcommand\globalTestPosPerc{0.13\%\xspace}

\newcommand\finderConfigsLetter{four\xspace}
\newcommand\linkerConfigsLetter{eight\xspace}
\newcommand\finderConfigs{4\xspace}
\newcommand\linkerConfigs{8\xspace}
\newcommand\globalConfigs{13\xspace}
\newcommand\metricForDev{AUC-ROC\xspace}
\newcommand\metricForTest{F0.5 score\xspace}
%\newcommand\finderRuns{168\xspace}
%\newcommand\linkerRuns{480\xspace}
%\newcommand\globalRuns{120\xspace}

\newcommand\invivoProjectsBeforeCheckSuites{568\xspace}
\newcommand\invivoProjectsWithNoTests{324\xspace}
\newcommand\invivoProjects{244\xspace}
\newcommand\invivoProjectsWithWitTests{55\xspace}
\newcommand\invivoProjectsWithWitTestsPerc{$\sim$26\%\xspace}
%\newcommand\totVulns{1,126\xspace}
\newcommand\invivoVulns{640\xspace}
\newcommand\vulnsWithNoTests{486\xspace}
\newcommand\invivoTests{823,529\xspace}
\newcommand\invivoTestsOfProjectWithWitTests{358,291\xspace}

\newcommand\resultsWitTests{2,043\xspace}
\newcommand\resultsWitTestsPerc{$\sim$0.25\%\xspace}
\newcommand\resultsVulns{102\xspace}
\newcommand\resultsWitTestsSingleVuln{2,004\xspace}
\newcommand\resultsWitTestsSingleVulnPerc{$\sim$98\%\xspace}
\newcommand\resultsWitTestsMoreVulns{39\xspace}
\newcommand\resultsWitTestsMaxVulns{three\xspace}
\newcommand\resultsMedianTestsPerVuln{four\xspace}
\newcommand\resultsMatches{2,084\xspace}

\newcommand\invivoFindingResults{145\xspace}
\newcommand\invivoFindingResultsProjects{40\xspace}
\newcommand\invivoFindingResultsProjectsPerc{$16\%$\xspace}
\newcommand\invivoFindingResultsCorrect{102\xspace}
\newcommand\invivoFindingResultsCorrectPerc{$70\%$\xspace}
\newcommand\invivoFindingAgreement{134\xspace}
\newcommand\invivoFindingAgreementPerc{$92\%$\xspace}
\newcommand\invivoFindingKappa{$0.82$\xspace}
%
\newcommand\invivoMatchingResults{159\xspace}
\newcommand\invivoMatchingResultsProjects{10\xspace}
\newcommand\invivoMatchingResultsProjectsPerc{$6\%$\xspace}
\newcommand\invivoMatchingResultsCorrect{0\xspace}
\newcommand\invivoMatchingResultsCorrectPerc{$0\%$\xspace}
\newcommand\invivoMatchingAgreement{152\xspace}
\newcommand\invivoMatchingAgreementPerc{$96\%$\xspace}
\newcommand\invivoMatchingKappa{$0$\xspace}

\newcommand\inspectedTests{418\xspace}
\newcommand\inspectedVulns{66\xspace}
\newcommand\inspectedMatches{437\xspace}
\newcommand\inspectedProjects{41\xspace}
\newcommand\inspectionTime{30\xspace}
\newcommand\inspectionTimePerMatch{four\xspace}
\newcommand\inspectionKappa{0.62\xspace}
\newcommand\inspectionKappaWords{\textit{substantial}\xspace}
\newcommand\inspectionAgreements{393\xspace}
\newcommand\inspectionDisagreements{44\xspace}
\newcommand\inspectionDisagreementsPerc{$\sim$10\%\xspace}

\newcommand\inspectedVulnsWithOneValidTest{35\xspace}
\newcommand\inspectedMatchesValid{72\xspace}
\newcommand\inspectedMatchesValidPerc{$\sim$17\%\xspace}
\newcommand\validUniqueTests{64\xspace}

\newcommand\matchesFixCommits{1,936\xspace}
\newcommand\testsFoundByFixCommitsAsWell{nine\xspace}
\newcommand\testsNotFoundByFixCommits{26\xspace}

\newcommand\inspectionTestsKappa{0.97\xspace}
\newcommand\inspectionTestsKappaWords{\textit{almost perfect}\xspace}
\newcommand\inspectedTestsSecTests{121\xspace}
\newcommand\inspectedTestsSecTestsPerc{$\sim$29\%\xspace}

\section{Proofs from Section~\ref{sec:gammaok}} \label{app:gamma}

\subsection{On the girth of locally \texorpdfstring{$\gamma$}{gamma}-sparse graphs}
\begin{lemma}\label{lemma:girth_rev}
    Let $G = (V,E)$ be an undirected graph with girth $g(G)$.
    Then $G$ is \ok{0} if and only if $g(G) \geq 5$.
\end{lemma}
\begin{proof}
    We first prove that if $G$ is \ok{0} then $g(G)$ must be at least $5$.
    In order to prove that, we simply negate the statement and prove that if $G$ has girth $<5$ then $G$ can not be \ok{0}.
    Without loss of generality, assume that $g(G) = 4$ (the case $g(G) = 3$ is similar).
    Then there must exist a cycle $C = (u_1, u_2, u_3, u_4)$ of $4$ vertices.
    It is simple to see that $u_2,u_4 \in \lset_1(u_1)$ and $u_3 \in \lset_2(u_1)$.
    Since $u_3$ is a neighbor of both $u_2$ and $u_4$, the degree of $u_3$ in the subgraph $G\left[\lset_1(u_1) \cup \{u_4\} \right]$ is at least $2$, hence $G$ is not \ok{0} (see \Cref{subfig:girth1}).
    
    We now prove that if $g(G) \geq 5$ then $G$ must be \ok{0}.
    Again, we negate this statement and prove that if $G$ is not \ok{0} then the girth of $G$ must be less then $5$.
    Let us assume that $G$ is \gammaok, for any $\gamma > 0$, thus it is not \ok{0}.
    Since $G$ is not \ok{0} there exists a vertex $v \in V$ such that at least one of the following properties holds (see \Cref{subfig:girth2}):
    \begin{enumerate}
        \item $\exists u \in \lset_1(v)$ such that the degree of $u$ in $G\left[ \lset_1(v) \right]$ is greater then $0$, or;
        \item $\exists w \in \lset_2(v)$ such that the degree of $w$ in $G\left[ \lset_1(v) \cup \{ w \} \right]$ is greater then $1$.
    \end{enumerate}
    In the first case, we have a cycle of $3$ vertices, then $g(G) = 3$.
    In the second case, we have a cycle of $4$ vertices, then $g(G) = 4$.
    In both cases $g(G) < 5$.
\end{proof}
\begin{figure}[h]
    \centering
    \begin{subfigure}[b]{0.35\linewidth}
            \centering
            \includegraphics[width=\linewidth]{img/girth-1.pdf}
            \caption{}
            \label{subfig:girth1}
    \end{subfigure}
    \begin{subfigure}[b]{0.6\linewidth}
            \centering
            \includegraphics[width=\linewidth]{img/girth-2.pdf}
            \caption{}
            \label{subfig:girth2}
    \end{subfigure}%
    \caption{}
    \label{fig:example_girth}
\end{figure}

\subsection{Deterministic lazy-update on \texorpdfstring{$\gamma$}{gamma}-sparse graphs}\label{apx:gamma-ok-deterministic}

\begin{theorem}\label{lemma:gamma-ok-error-bound-balls}
    
Let $\varepsilon \in (0,1)$, and let $G^{(0)}$ be an initial graph. Consider any sequence of edge insertions that yields a final graph $G$. If $G$ is \gammaok, \lazyscheme$(\varphi = \frac{\varepsilon}{1 - \varepsilon},k=0)$ has an approximation ratio of  $\frac{\gamma + 1}{1-\varepsilon}$ and amortized update cost $O(1/\varepsilon)$. 
    
\end{theorem}
\begin{proof}
Recall that $\bd_u$ denotes the black degree of $u$, and that  \Cref{alg:det_thresh} guarantees that $\deg_u$ is at most $(1+\varphi)\bd_u$.
    Then, it is simple to give an upper bound to the size of $\ball_2(u)$, that is $\vert \ball_2(u) \vert \leq 1+ \sum_{v \in \lset_1(u)} (1 + \varphi)\bd_v$.Consider a vertex $v \in \lset_1(u)$. Since $G$ is \gammaok, the number of neighbors of $v$ belonging to $\lset_2(u)$ is at lest $\deg_v - (\gamma+1)$ of which $\bd_v - (\gamma+1)$ must belong to $\apxball_2(u)$. Moreover, a vertex in $\lset_2(u)$ has at most $\gamma+1$ neighbors in $\lset_1(u)$. Therefore: 
    \begin{align*}
    \vert \apxball_2(u) \vert
    &\geq  \bd_u + 1 + \frac{1}{\gamma + 1}\sum_{v \in \lset_1(u)}(\bd_v - (\gamma + 1))\\
    &= \bd_u + 1 + \frac{1}{\gamma + 1}\sum_{v \in \lset_1(u)}\bd_v - \underbrace{\frac{1}{\gamma + 1}\sum_{v \in \lset_1(u)}(\gamma + 1)}_{= \bd_u}\\
    &= 1+ \frac{1}{\gamma + 1}\sum_{v \in \lset_1(u)}\bd_v.
    \end{align*}
  
    As a consequence, $\vert \apxball_2(u) \vert/\vert \ball_2(u) \vert \ge \frac{1}{(1+\varphi)(\gamma+1)}$. By setting $\varphi = \frac{\varepsilon}{1 - \varepsilon}$, and by using \Cref{lm:amortized_det_alg},  the claim follows.
\end{proof}

\subsection{Proof of \Cref{le:gamma_ok_expect_lowerbound}}\label{apx:proof_gamma_ok_expect_lowerbound}
\begin{proof}
Let $e_1, \dots, e_{\ell_v}$ be the \emph{red edges} between $v$ and $\lset_2(u)$, and define the binary random variable $\lrdr_v(i)$ that is equal to $1$ if $e_i$ is a \emph{quasi-black edge} for $u$, $0$ otherwise, for $i = 1, \dots, \lrd_v$. Thus we can express $\lrdr_v = \sum_{i=1}^{\lrd_v} \lrdr_v(i)$, with expectation

\begin{equation}\label{eq:gamma_ok_lb_fact_eq_1}
\begin{aligned}
  \Expec{}{\lrdr_v} & = \sum_{i=1}^{\lrd_v}{\Prob{}{\lrdr_v(i)=1}} = \lrd_v - \sum_{i=1}^{\lrd_v} {\Prob{}{\lrdr_v(i)=0}}.
\end{aligned}
\end{equation}

Without loss of generality, assume that the edges $e_1, \dots, e_{\lrd_v}$ have been inserted at times $t_1 < \dots < t_{\lrd_v}$, respectively.
If $e_i$ is not a quasi-black edge for $u$, then it must be that $u$ is not selected by $v$ at \Cref{line:random_selection} of \Cref{alg:det_thresh}, at times $t_i, t_{i+1},\dots, t_{\lrd_v}$.
This holds with probability 
\begin{equation}\label{eq:gamma_ok_lb_fact_eq_2}
\begin{aligned} 
    &\Prob{}{\lrdr_v(i) = 0}
    \leq \prod_{j=i}^{\lrd_v} \left( 1-\frac{k}{\deg_v^{(t_j)}} \right)
    \leq \prod_{j=i}^{\lrd_v} \left( 1 - \frac{k}{\deg_{v}^{(t_{\lrd_v})}} \right) \\
    &\leq \left( 1-\frac{k}{\lbdd_v + \lrd_v + \gamma + 1}\right)^{\lrd_v - i + 1} 
    \leq \left(1-\frac{k}{2(\lbdd_v + \gamma + 1)}\right)^{\lrd_v - i}.
\end{aligned}
\end{equation}
The third inequality holds since the edges incident to $v$ having endpoints in $L_1(u)$ are at most $\gamma$, while those having endpoints in $L_2(u)$ are exactly $\lbdd_v+ \lrd_v$. Moreover, the last inequality holds because $\lrd_v \leq \rd_v \leq \bd_v \leq \lbdd_v + \gamma + 1$, given the assumption $\varphi = 1$.

By plugging in \eqref{eq:gamma_ok_lb_fact_eq_2} into   \eqref{eq:gamma_ok_lb_fact_eq_1} and we obtain
\begin{align*}
    &\Expec{}{\lrdr_v} \geq \lrd_v - \sum_{i=1}^{\lrd_v}\left( 1-\frac{k}{2(\lbdd_v + \gamma + 1)}\right)^{\lrd_v - i} \\
    &= \lrd_v - \sum_{i=0}^{\lrd_v-1} \left(1-\frac{k}{2(\lbdd_v + \gamma + 1)}\right)^i 
    \leq \lrd_v - \frac{1-\left(1-\frac{k}{2(\lbdd_v+\gamma+1)}\right)^{\lrd_v}}{1-\left(1-\frac{k}{2(\lbdd_v + \gamma + 1)}\right)} \\
    &\geq \lrd_v - \frac{1}{1-\left(1-\frac{k}{2(\lbdd_v + \gamma + 1)}\right)}
    \geq \lrd_v - \frac{2(\lbdd_v + \gamma + 1)}{k}.
\end{align*}
\end{proof}
% Useful packages
% Runpei
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% THEOREMS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsthm}
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
% \newtheorem{definition}[theorem]{Definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{assumption}[theorem]{Assumption}
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}

 \makeatletter
\def\@fnsymbol#1{\ensuremath{\ifcase#1\or \dagger\or \ddagger\or
  \mathsection\or \mathparagraph\or \|\or **\or \dagger\dagger
  \or \ddagger\ddagger \else\@ctrerr\fi}}
\makeatother

% \usepackage{mathds}
\usepackage{dsfont}

\usepackage{multirow}
\usepackage{amsthm,amssymb,lipsum}
\usepackage{times}
\usepackage{mathrsfs}
\usepackage{enumerate}
\usepackage{colortbl}
% \usepackage{enumitem}
\usepackage{wrapfig}
\usepackage{bbding}
\usepackage{pifont}
\usepackage{xspace}
\usepackage{amsmath}
\usepackage{wasysym}
\usepackage{textcomp}
\usepackage{microtype}      % microtypography
\usepackage[bottom]{footmisc}
% \usepackage{itemize}

\usepackage{makecell}


\usepackage{color}
\usepackage{tocloft}
\usepackage{caption}
\usepackage{float}
\usepackage{afterpage}

\usepackage{stackengine}

\usepackage{changes}

\usepackage{bbm}


\def\eg{{\it e.g.}\xspace}
\def\etal{{\it et al.}\xspace}
\def\ie{{\it i.e.}\xspace}
\def\etc{{\it etc}\xspace}

% sexy name for our method
\def\reconone{{\scshape XXX}}

\definecolor{drp-blue}{HTML}{1f77b4}
\definecolor{pretty-blue}{RGB}{0, 113, 188}
\definecolor{kaiming-green}{RGB}{57,181,74} % kaiming green
\definecolor{mypurple}{RGB}{55,0,168} % kaiming green
\definecolor{icmlblue}{rgb}{0,0.08,0.45} % ICML Blue
\definecolor{linecolor1}{HTML}{F1F7FB}
\definecolor{linecolor2}{HTML}{E3EFF7}
\definecolor{linecolor3}{HTML}{D5E4F0}

\definecolor{reconcolor}{HTML}{412F8A}
\definecolor{runpei-orange}{HTML}{F35F27}
\definecolor{runpei_blue}{HTML}{14294B}
\definecolor{datacolor}{HTML}{0009BF}
\definecolor{vitcolor}{HTML}{fc8e62}
% \newcommand{\reconcolor}[1]{\textcolor{reconcolor}{#1}}
% \newcommand{\vitcolor}[1]{\textcolor{vitcolor}{#1}}
% \newcommand{\br}{\reconcolor{$\bullet$\,}} % backbone
% \newcommand{\bv}{\vitcolor{$\bullet$\,}}  % vanilla Transformer backbone
% \newcommand{\bs}{\vitcolor{$\mathbf{\circ}$\,}} % specilized 3D backbone
% \newcommand{\bh}{\reconcolor{$\mathbf{\circ}$\,}} % hierarchical Transformer

% \newcommand{\cmark}{\ding{51}}%
% \newcommand{\xmark}{\ding{55}}%

\newcommand{\sgs}[1]{{\color{blue} {\bf Saurabh's comment:} \it #1}}
\newcommand{\sone}{Stage I\xspace}
\newcommand{\stwo}{Stage II\xspace}

\newcommand{\drp}[1]{{\color{runpei-orange} {\bf Runpei's comment:} \it #1}}

\newcommand{\confirm}[1]{{\color{red} #1}}
% \newcommand{\confirm}[1]{{\color{black} #1}}



% math
\newcommand{\btau}{\boldsymbol{\tau}}
\newcommand{\bmu}{\boldsymbol{\mu}}
\newcommand{\beps}{\boldsymbol{\epsilon}}
\newcommand{\bpsi}{\boldsymbol{\Psi}}
\newcommand{\bes}{\mathbf{s}}
\newcommand{\ba}{\bs{a}}
\newcommand{\bh}{\bs{h}}
\newcommand{\bF}{\bs{F}}
\newcommand{\bx}{\mathbf{x}}
\newcommand{\bc}{\mathbf{c}}
\newcommand{\bp}{\mathbf{p}}
\newcommand{\bz}{\mathbf{z}}

\newcommand{\map}{\boldsymbol{\mathcal{M}}}
\newcommand{\reals}{\mathbb{R}}
\newcommand{\composer}{\bs{\mathcal{C}}}
\newcommand{\prim}{\bs{\mathcal{P}}}
\newcommand{\disc}{\bs{\mathcal{D}}}
\newcommand{\valuefunc}{\bs{\mathcal{V}}}


% variables
\newcommand{\policyim}{{\pi_{\text{privileged}}}}
\newcommand{\policylfd}{{\pi_{\text{LfD}}}}
\newcommand{\rewardfunc}{\bs{\mathcal{R}}}
\newcommand{\rewardfuncimitation}{\rewardfunc^{\text{imitation}}}
\newcommand{\rewardfuncfailrec}{\rewardfunc^{\text{recover}}}

\newcommand{\refps}{{\bs{\hat{q}}_{1:T}}}
\newcommand{\refp}{{\bs{\hat{q}}_{t}}}
\newcommand{\refpsingle}{{\bs{\hat{q}}}}
\newcommand{\reft}{{\bs{\hat{p}}_{t}}}
\newcommand{\reftvr}{{\bs{\hat{p}}_{t}^{\text{real}}}}
\newcommand{\reftvrlfd}{{\bs{\hat{p}}_{t:t+\phi}^{\text{Sparse-lfd}}}}
\newcommand{\reftkp}{{\bs{\hat{p}}_{t}}^\text{kp}} 
\newcommand{\simtkp}{{\bs{{p}}_{t}}^\text{kp}}
\newcommand{\refts}{{\bs{\hat{p}}_{1:T}}}
\newcommand{\refr}{{\bs{\hat{\theta}}_{t}}}
\newcommand{\refrs}{{\bs{\hat{\theta}}_{1:T}}}
\newcommand{\refv}{{\bs{\hat{\dot{q}}}_{t}}}
\newcommand{\reflvkp}{{\bs{\hat{\dot{p}}}_{t}}^\text{kp}}
\newcommand{\refvs}{{\bs{\hat{\dot{q}}}_{1:T}}}
\newcommand{\refav}{{\bs{\hat{\omega}}_{t}}}
\newcommand{\reflv}{{\bs{\hat{v}}_{t}}}
\newcommand{\refpn}{{\bs{\hat{q}}_{t+1}}}
\newcommand{\reftn}{{\bs{\hat{p}}_{t+1}}}
\newcommand{\refrn}{{\bs{\hat{\theta}}_{t+1}}}
\newcommand{\refqs}{{\bs{\hat{q}}_{1:T}}}

\newcommand{\refqsstable}{{\bs{\hat{q}}^{\text{stable}}_{1:T}}}


\newcommand{\kinp}{{\bs{\tilde{q}}_{t}}}
\newcommand{\kint}{{\bs{\tilde{p}}_{t}}}
\newcommand{\kinr}{{\bs{\tilde{\theta}}_{t}}}
\newcommand{\kinps}{{\bs{\tilde{q}}_{1:T}}}
\newcommand{\kints}{{\bs{\tilde{p}}_{1:T}}}
\newcommand{\kintvr}{{\bs{\tilde{p}}^{\text{real}}_{t}}}
\newcommand{\kinvvr}{{\bs{\tilde{v}}^{\text{real}}_{t}}}
\newcommand{\kintrgb}{{\bs{\tilde{p}}^{\text{RGB}}_{t}}}
\newcommand{\kinvrgb}{{\bs{\tilde{v}}^{\text{RGB}}_{t}}}


\newcommand{\imaget}{\bs{I}_{t}}
\newcommand{\images}{\bs{I}_{1:T}}
\newcommand{\imagetp}{\bs{I}_{t - 1}}
\newcommand{\imagetn}{\bs{I}_{t + 1}}
\newcommand{\simlv}{{\bs{v}_{t}}}

\newcommand{\simp}{{\bs{{q}}_{t}}}
\newcommand{\simps}{{\bs{{q}}_{1:T}}}
% \newcommand{\simv}{{\bs{\dot{q}}_{t}}}

\newcommand{\torque}{{\bs{{\tau}}_{t}}}
\newcommand{\dofpos}{{\bs{{d}}_{t}}}
\newcommand{\dofposh}{{\bs{{d}}_{t-\phi:t}}}
\newcommand{\dofposhtwofive}{{\bs{{d}}_{t-25:t}}}
\newcommand{\refdofpos}{{\bs{\hat{{d}}_{t}}}}
\newcommand{\rootvel}{{\bs{{v}}^{\text{root}}_{t}}}
\newcommand{\rootangvel}{{\bs{\omega}^{\text{root}}_{t}}}
\newcommand{\rootangvelh}{{\bs{\omega}^{\text{root}}_{t-\phi : t}}}
\newcommand{\rootangvelhtwofive}{{\bs{\omega}^{\text{root}}_{t-25 : t}}}
\newcommand{\gravity}{{\bs{g}_{t}}}
\newcommand{\gravityh}{{\bs{g}_{t-\phi:t}}}
\newcommand{\gravityhtwofive}{{\bs{g}_{t-25:t}}}
\newcommand{\goalstateprivileged}{{\bs{s}^{\text{g-privileged}}_t}}
\newcommand{\selfstateprivileged}{{\bs{s}^{\text{p-privileged}}_t}}
\newcommand{\selfstatesimtoreal}{{\bs{s}^{\text{p-real}}_t}}
\newcommand{\selfstatessimtoreal}{{\bs{s}^{\text{p-real}}_{1:T}}}
\newcommand{\goalstateimitate}{{\bs{s}^{\text{g-mimic}}_t}}
\newcommand{\goalstatevr}{{\bs{s}^{\text{g-VR}}_t}}
\newcommand{\goalstatesimtoreal}{{\bs{s}^{\text{g-real}}_t}}
\newcommand{\goalstatessimtoreal}{{\bs{s}^{\text{g-real}}_{1:T}}}

\newcommand{\goalstatevrs}{{\bs{s}^{\text{g-VR}}_{1:T}}}
\newcommand{\goalstatergb}{{\bs{s}^{\text{g-RGB}}_t}}

\newcommand{\dofvel}{{\bs{\dot{d}}_{t}}}
\newcommand{\dofvelh}{{\bs{\dot{d}}_{t - \phi:t}}}
\newcommand{\dofvelhtwofive}{{\bs{\dot{d}}_{t - 25:t}}}
\newcommand{\refdofvel}{{\bs{\hat{\dot{d}}}_{t}}}
\newcommand{\dofacc}{{\bs{\ddot{d}}_{t}}}

\newcommand{\simvs}{{\bs{\dot{q}}_{1:T}}}
\newcommand{\simav}{{\bs{{\omega}}_{t}}}
\newcommand{\simv}{{\bs{\dot{q}}_{t}}}
\newcommand{\simvvr}{{\bs{v}^{\text{real}}_{t}}}
\newcommand{\simvrgb}{{\bs{v}^{\text{RGB}}_{t}}}
\newcommand{\projectgf}{{\bs{g}_{z}^{\text{feet}}}}
\newcommand{\projectgr}{{\bs{g}_{z}^{\text{root}}}}
\newcommand{\trans}{{\bs{p}}}

\newcommand{\simr}{{\bs{{\theta}}_{t}}}
\newcommand{\simt}{{\bs{{p}}_{t}}}
\newcommand{\simtvr}{{\bs{{p}}_{t}^{\text{real}}}}
\newcommand{\simtrgb}{{\bs{{p}}_{t}^{\text{RGB}}}}
\newcommand{\goalstate}{{\bs{s}^{\text{g}}_t}}
\newcommand{\goalstateredu}{{\bs{s}^{\text{g-reduced}}_t}}
\newcommand{\goalstaterot}{{\bs{s}^{\text{g-rot}}_t}}
\newcommand{\goalstatekp}{{\bs{s}^{\text{g-kp}}_t}}
\newcommand{\goalstatefailrec}{\bs{s}^{\text{g-Fail}}_t}
\newcommand{\selfstate}{{\bs{s}^{\text{p}}_t}}
\newcommand{\selfstates}{{\bs{s}^{\text{p}}_{1:T}}}
\newcommand{\state}{{\bs{s}_t}}
\newcommand{\actionl}{{\bs{a}_{t}^{\text{lower}}}}
\newcommand{\action}{{\bs{a}_t}}
\newcommand{\actionpriviledged}{{\bs{a}_t}^{\text{privileged}}}
\newcommand{\actionu}{{\bs{a}_{t}^{\text{upper}}}}
\newcommand{\actionprev}{{\bs{a}_{t-1}}}
\newcommand{\actionprevh}{{\bs{a}_{t - \phi - 1 :t-1}}}
\newcommand{\actionprevhtwofive}{{\bs{a}_{t - 25 - 1 :t-1}}}
\newcommand{\actionprevl}{{\bs{a}_{t-1}^{\text{lower}}}}
\newcommand{\actionprevu}{{\bs{a}_{t-1}^{\text{upper}}}}
\newcommand{\motiondata}{\bs{\hat{Q}}}
\newcommand{\motiondataretarget}{\bs{\hat{Q}}^{\text{retarget}}}
% \newcommand{\motiondataretargetstable}{\bs{\hat{Q}}^{\text{stable}}}
\newcommand{\motiondataclean}{\bs{\hat{Q}}^{\text{clean}}}
\newcommand{\locomotiondata}{\bs{Q}^{\text{loco}}}
\newcommand{\hardmotiondata}{\bs{\hat{Q}}_{\text{hard}}}

\newcommand{\smplpose}{{\bs{{\theta}}}}
\newcommand{\smplshape}{{\bs{{\beta}}}}

\newcommand{\mpjpe}{E_\text{mpjpe}}
\newcommand{\gmpjpe}{E_\text{g-mpjpe}}
\newcommand{\acc}{E_\text{acc}}
\newcommand{\vel}{E_\text{vel}}
\newcommand{\success}{\text{Succ}}



\newcommand{\bs}[1]{\boldsymbol{#1}}
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%


\newcommand{\methodwosim}{\method-w/o-sim2data\xspace}
\newcommand{\methodpo}{\method-reduced\xspace}


\section{Synthetic Data Engine}
\input{latex/figures/alphageometry}

\input{latex/tables/alphageometry}

In this section, we provide the details of our synthetic data engine. Based on AlphaGeometry~\citep{alphageometry}, we generate synthetic diagram and caption pairs by randomly sampling a AlphaGeometry program with \cref{alg:sampling}.

\begin{algorithm}[t!]
\caption{Sampling process of the synthetic data engine}
 \textbf{Input} Geometric relations $R$, geometric objects $O$, number of clauses $n_c$ \\
 \textbf{Output} AlphaGeometry program $c$
\begin{algorithmic}[1]
\State Initialize points and clauses with the sampled object: $P, C \sim O$ 
\For{$i \gets 1$ to $n_c$}
    \State Generate points: $P_{\text{new}}$
    \State Sample relation and points: $r, P_{\text{old}} \sim R, P$
    \State Construct clause: $C_{\text{new}} = r(P_\text{new}, P_\text{old})$
    \State Update points and clauses: $P, C \gets P \cup P_{\text{new}}, C \cup C_{\text{new}}$
\EndFor
\State Generate program with points and clauses: $c \gets \text{Clauses2Program}(P, C)$
\State \textbf{return} $c$
\end{algorithmic}
\label{alg:sampling}
\end{algorithm}

Examples for randomly sampled AlphaGeometry problems and their corresponding diagrams and lists of geometric premises are described in \cref{fig:alphageometry}.
The types of geometric premises that appear in our synthetic data engine are listed in \cref{tab:alphageometry}.


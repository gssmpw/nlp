% This must be in the first 5 lines to tell arXiv to use pdfLaTeX, which is strongly recommended.
\pdfoutput=1
% In particular, the hyperref package requires pdfLaTeX in order to break URLs across lines.

\documentclass[11pt]{article}

% Change "review" to "final" to generate the final (sometimes called camera-ready) version.
% Change to "preprint" to generate a non-anonymous version with page numbers.
\usepackage[final]{acl}

% Standard package includes
\usepackage{times}
\usepackage{latexsym}

% For proper rendering and hyphenation of words containing Latin characters (including in bib files)
\usepackage[T1]{fontenc}
% For Vietnamese characters
% \usepackage[T5]{fontenc}
% See https://www.latex-project.org/help/documentation/encguide.pdf for other character sets

% This assumes your files are encoded as UTF8
\usepackage[utf8]{inputenc}

% This is not strictly necessary, and may be commented out,
% but it will improve the layout of the manuscript,
% and will typically save some space.
\usepackage{microtype}

% This is also not strictly necessary, and may be commented out.
% However, it will improve the aesthetics of text in
% the typewriter font.
\usepackage{inconsolata}

%Including images in your LaTeX document requires adding
%additional package(s)
\usepackage{graphicx, booktabs, amsmath}


% newly added packages
\usepackage{hyperref}
\usepackage{booktabs}
\usepackage{adjustbox}
% \usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{amssymb}
\usepackage{color,xcolor,colortbl}
\usepackage{enumitem}
\usepackage{soul}
\usepackage{amsmath}
\usepackage{url}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{booktabs}
\usepackage{bm,bbm}
\usepackage{mathtools}
\usepackage{array}
\usepackage{multirow}
\usepackage{subcaption}
\usepackage{pbox}
\usepackage{pifont}
\usepackage{arydshln}
\usepackage{dblfloatfix}
\usepackage{relsize}
\usepackage{setspace}
\usepackage[scaled=.8]{beramono}
\usepackage{tcolorbox}
\usepackage{listings}
\newcommand\Tstrut{\rule{0pt}{4ex}}     % = `top' strut
\newcommand\Bstrut{\rule[-0.9ex]{0pt}{0pt}}  % = `bottom' strut
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmiccomment}[1]{$\blacktriangleright$ #1}
\newenvironment{fontppl}{\fontfamily{ppl}\selectfont}{\par} % Palatino
\newenvironment{fontpbk}{\fontfamily{lmss}\selectfont}{\par} % Bookman
\newenvironment{fontlmtt}{\fontfamily{lmtt}\selectfont}{\par} % Latin Modern 
% https://www.overleaf.com/learn/latex/Font_typefaces
\DeclareMathOperator{\E}{\mathbb{E}}

\newtcolorbox{promptbox}[2][]{
  floatplacement={#2},
  colframe=dark,colback=light!30!white,
  fonttitle=\small\ttfamily,
  fontupper=\small\ttfamily,
  title=#2,
  boxrule=0.5mm, 
  halign=flush left,
}

\definecolor{dark}{HTML}{012169}
\definecolor{light}{HTML}{efede1}

\lstset{
basicstyle=\small\ttfamily,
columns=flexible,
breaklines=true,
aboveskip=-0.1em,
belowskip=-0.1em,
}

\renewcommand{\baselinestretch}{0.99}

\usepackage{authblk}

\title{\textsc{Harbor}: Exploring Persona Dynamics in Multi-Agent Competition}

\author{\textbf{Kenan Jiang}, \textbf{Li Xiong}, \textbf{Fei Liu}}
\affil[]{Emory University}
\affil[]{\texttt{\{kenan.jiang, lxiong, fei.liu\}@emory.edu}}

\begin{document}
\maketitle
\begin{abstract}
We investigate factors contributing to LLM agents' success in competitive multi-agent environments, using auctions as a testbed where agents bid to maximize profit. The agents are equipped with bidding domain knowledge, distinct personas that reflect item preferences, and a memory of auction history. Our work extends the classic auction scenario by creating a realistic environment where multiple agents bid on houses, weighing aspects such as size, location, and budget to secure the most desirable homes at the lowest prices. Particularly, we investigate three key questions: (a) How does a persona influence an agent's behavior in a competitive setting? (b) Can an agent effectively profile its competitors' behavior during auctions? (c) How can persona profiling be leveraged to create an advantage using strategies such as theory of mind? Through a series of experiments, we analyze the behaviors of LLM agents and shed light on new findings.  Our testbed, called \textsc{Harbor}, offers a valuable platform for deepening our understanding of multi-agent workflows in competitive environments. 

\end{abstract}

\section{Introduction}

LLMs' advanced reasoning skills make them indispensable for decision-making in competitive environments~\cite{eigner2024determinantsllmassisteddecisionmaking,lu2024struxllmdecisionmakingstructured,deepseekai2025deepseekr1incentivizingreasoningcapability}. For instance, they may act as proxies for job candidates competing for limited positions or assist homebuyers in strategizing their purchases~\cite{an2024largelanguagemodelsdiscriminate}. Candidates have unique skills and job preferences, while homebuyers have distinct preferences and budgets~\cite{samuel2024personagymevaluatingpersonaagents}. Without thoroughly understanding the persona dynamics shaping LLMs' behavior in competitive environments, designing optimal strategies can be challenging.


Existing research largely focuses on enhancing LLM agents' core capabilities, such as reasoning, planning, tool use, grounding, and multi-modal perception~\cite{qin2023toolllmfacilitatinglargelanguage,valmeekam2023planningabilitieslargelanguage,bohnet2024exploringbenchmarkingplanningcapabilities,li2024laspsurveyingstateoftheartlarge,li2025embodiedagentinterfacebenchmarking}. They also seek to improve agents' interactions with external environments, such as navigating the web or physical world, using APIs, querying databases, or retrieving documents~\cite{zhou2024webarenarealisticwebenvironment,xie2024osworldbenchmarkingmultimodalagents,xu2024theagentcompanybenchmarkingllmagents, agashe2025agent}. Some studies have explored research from a multi-agent perspective~\cite{Li_2023,guo2024largelanguagemodelbased,zhang2024llmmastermindsurveystrategic}. We are particularly interested in this direction, where the agents must seamlessly integrate personalized preferences and anticipate others' behaviors to compete effectively. 

We present \textsc{Harbor}, a new testbed for studying persona dynamics in competitive environments. \textsc{Harbor} simulates real house bidding, where buyers' preferences, budgets, and competitors' choices significantly influence purchasing outcomes. Unlike prior studies of games such as the Prisoner's Dilemma or poker~\cite{yim2024evaluating,wang2024unleashingemergentcognitivesynergy,hua2024gametheoreticllmagentworkflow}, in which agents lack individual preferences and outcomes are based on Nash equilibria, our research emphasizes persona dynamics among multiple agents. We profile various buyer types, from first-time homebuyers to flippers and downsizers, using real data from \href{https://www.redfin.com}{Redfin.com}. Further, our work extends human-human negotiation conversations~\cite{he-etal-2018-decoupling,yang-etal-2021-improving,dutt-etal-2021-resper,lin-etal-2024-decision} into a multi-agent setting to assess the strengths and weaknesses of agents equipped with personas.

\begin{figure*}
    \centering
    \includegraphics[width=6.2in]{Example}
    \caption{Our \textsc{Harbor} platform studies persona dynamics in multi-agent auctions. The Master Agent learns to prioritize items, profile competitors based on their bidding behavior, and make bidding decisions using theory of mind strategies. Through a series of experiments, we analyze agent behavior and uncover new insights.}
    \label{fig:example}
\vspace{-0.1in}
\end{figure*}

Our platform enables the analysis of multi-agent decision-making in competitive settings. When bidding for multiple items, agents must plan their actions, decide which items to prioritize, manage budgets, and sometimes give up lower-priority items to secure higher-value ones~\cite{chen2023put}. Agents must also analyze competitors' behavior and adapt their tactics accordingly. This paper does not focus on training multi-agent RL systems~\cite{anonymous2025singleagent}. Instead, we explore how injecting personas into LLM agents shapes their behavior in auctions. We examine how aggressively an agent bids (e.g., the number of attempts and amount raised) and how personas influence bidding outcomes, measured by profitability and success in securing persona-aligned items. \emph{These results have important implications for competitive scenarios, such as companies bidding for contracts, advertisers competing for ad space, or individuals negotiating deals.} Our contributions in this paper are summarized as follows:


\begin{itemize}[topsep=3pt,itemsep=-1pt,leftmargin=*]

\item \textsc{Harbor} enhances auction dynamics by incorporating personas, allowing us to study LLM agents beyond traditional game theory. We explore three key questions: (a) How does a persona influence an agent's behavior? (b) Can an agent effectively profile its competitors' behavior during auctions? (c) How can persona profiling help in developing strategies such as the theory of mind?

\item We introduce a new approach to evaluating agents through persona profiling (measured by KL divergence~\cite{kullback1951information}) and competence (assessed via profitability and TrueSkill~\cite{herbrich2007trueskill}). Profitability measures an agent's gains relative to all possible profit margins, while TrueSkill factors in both wins and opponent competitiveness. Through a series of experiments, we analyze agent behavior and uncover new insights.\footnote{Our source code will be shared publicly upon acceptance.}

\end{itemize}

\section{Related Work}
\label{sec:related}

\paragraph{Multi-Agent Frameworks}\;
LLM agents are employed in advanced tasks for their ability to reason over diverse inputs and generate responses in complex scenarios~\cite{wei2022chain, caoyun2024canllm, liu2024agentbench, shinn2024reflexion}. Past studies have explored different evaluation frameworks~\cite{debenedetti2024agentdojo, ye2024justice, asgari2024mmlupro}, emphasizing the need for rigorous practices in developing productized LLM agents. While these agents have shown remarkable success, their experiments are often limited by a lack of dynamic interactions.

Multi-agent systems explore LLMs' capabilities in complex environments~\cite{wu2024autogen, huang2024far, zhao2024competeai, wu-etal-2024-shall}. For instance, \citet{gu2024agent} examined simulations where agents interact and collaborate within group chat settings, while \citet{zhang2024llmmastermindsurveystrategic} explored social simulations and board games, finding that even advanced models struggle to fully utilize their reasoning potential. \citet{huang2024far} introduced an evaluation metric to assess LLMs' gaming abilities in multi-agent settings through game-theoretic experiments. \citet{shinn2024reflexion} proposed a method to enhance LLMs through linguistic feedback, and \citet{huang2024far} developed methodologies to evaluate their decision-making capabilities.

Our work extends AucArena~\cite{chen2023put} by exploring persona dynamics in a bidding framework that enables multiple agents to compete for maximum profit in an auction. Our framework aims for a deeper investigation of a single agent's ability to profile other agents. Moreover, we explore how theory of mind influences an agent's performance in a competitive multi-agent setting.

\vspace{-0.05in}
\paragraph{Persona in LLM Agents}\;
Personas function as identities assigned to LLM agents, enhancing their ability to generate personalized or specialized outputs~\cite{xu2024character, chen2024from, sun2024building, li2025helloagainllmpoweredpersonalized}. Prior research has extensively examined the influence of personas across various roles~\cite{hu-collier-2024-quantifying, samuel2024personagymevaluatingpersonaagents, kim2024persona, dong-etal-2024-llm}. Leveraging their role-playing nature, some studies have applied personas to social simulations by assigning diverse identities to entire agent populations~\cite{lee2024language, tseng-etal-2024-two, hu2024quantifying}. \citet{yang2024} find that persona prompting can introduce shortcut learning, causing LLM agents to deviate from rational objectives.  
Building on this work, we incorporate persona into a multi-agent auction to examine its effects in competitive settings.

\vspace{-0.05in}
\paragraph{Theory of Mind (ToM)}\;\;
Theory of Mind, the ability to understand and infer one's own and others' mental states, is fundamental to human social interaction and a crucial capability for LLMs to achieve human-like reasoning~\cite{leslie2004core, sap-etal-2022-neural, van-duijn-etal-2023-theory, cross2024hypothetical, chan-etal-2024-negotiationtom}. An accurate ToM in others' intentions and actions provides significant advantages~\cite{street2024llm, amirizaniani2024llms}. Past studies have applied ToM to simulate social behaviors. \citet{de2017negotiating} explored its role in negotiation tasks, while \citet{wang-etal-2024-sotopia} proposed an interactive learning environment to train LLMs in social interactions. 

Previous studies have examined collaborative multi-agent settings. For example, \citet{li2023camel} and \citet{Li_2023} explored LLMs using ToM for task collaboration, while others demonstrated its effectiveness in structured games with rules and rewards. \citet{light2023avalonbench} investigated how LLMs infer players' motives in the Avalon board game, highlighting ToM capabilities within a constrained and predefined context. Similarly, \citet{yim2024evaluating} evaluated ToM in cooperative scenarios through a poker game called Guandan. In contrast, our work investigates whether ToM can enhance agent performance in competing multi-agent environments with auction as the testbed. 

\section{Our \textsc{Harbor} Framework}

We introduce \textsc{Harbor}—a \textbf{H}ousing \textbf{A}uction for \textbf{R}easoning, \textbf{B}idding, and \textbf{O}pponent \textbf{R}ecognition to explore how persona-driven agents perceive competitors and employ ToM in multi-agent systems.

\subsection{Basic Auction Setup}

In an auction, multiple agents $N$ compete for a series of items $H$ through an open bidding process. Agents can observe each other's actions in real time. While these agents are profit-driven, they may also be assigned personas, such as urban dwellers or investment buyers. These personas shape bidding behaviors by creating preferences for specific items while still prioritizing overall profit maximization.

Each agent has access to the complete list of items $H$, including their publicly announced starting prices $V^0_{h\in H}$ and item descriptions. However, the true values of items $V^*_{h\in H}$ remain hidden from the agents. Instead, each agent estimates an item's worth based on an overhead percentage applied to the true value. For instance, if an item has a known starting price of \$200 but an undisclosed true value of \$500, and the agent's overhead estimation is 10\%, it will perceive the item's value as \$550. In the bidding process, agents must begin at the stated starting price and can either place a higher bid than the current leading offer or withdraw from that round. The bidding continues until only one agent remains, at which point it secures ownership of the item, and the final bid amount is deducted from the winner's budget. The profit and the maximum possible profit for item $h$ is computed as:

\begin{equation}
    \text{Profit} = V^*_h - \bar{V}_h
\end{equation}
\begin{equation}
    \text{max Profit} = V^*_h - V^0_h
\end{equation}
where \( \bar{V}_h \) represents the winning bid paid only by the agent who wins the item. The auction concludes once all items have undergone the bidding process.

The entire auction provides a comprehensive evaluation of an agent's performance from multiple perspectives. This environment enables a quantifiable assessment through three key metrics: Profit Ratio \( R \), TrueSkill Score \( S\)~\cite{herbrich2007trueskill}, and Matched-Item Acquisition Rate \( A \).  

The \textbf{Profit Ratio} measures an agent's earnings relative to the maximum possible profit, which is achieved by winning all items at their starting prices. This metric evaluates an agent's ability to maximize financial gains while accounting for price and item variations across auctions. \textbf{TrueSkill Score} ranks agents based on profitability relative to competitors; an agent with lower absolute profit can still achieve a high TrueSkill score if its earnings exceed those of other participants. Lastly, the \textbf{Matched-Item Acquisition Rate} quantifies the proportion of persona-aligned items successfully acquired, assessing the agent's effectiveness in adhering to its persona-driven objectives. Together, these metrics provide a robust framework for quantifying both persona alignment and strategic performance.

\subsection{Priority Planning}
\label{sec:planning}
During an auction, an agent constructs and continuously updates a \textbf{priority list} \( L \), a dynamic rating system that assigns a score \( l_h \in \{1,2,3\} \) to each item \( h \), where 3 represents the highest priority and 1 the lowest. This evolving priority list guides the agent's bidding decisions throughout the auction. The agent places more bids on high-priority items and may withdraw on low-priority ones.

Before bidding, the agent initializes \( L_0 \) based on its initial budget \( B_0 \), persona \( \pi \), available items \( H_0 \), and the objective of maximizing the profit ratio, \( \max R \). Each item \( h \in H_0 \) is assigned an initial priority score in a single prompt, generating the initial priority list \( L_0 \) with length \( |H_0| \):
\[
L_0 = LLM(\{l_h\}_{h\in H_0}|B_0, \pi, H_0, \max R)
\]
This ensures that the agent starts the auction with a well-defined strategic priority structure aligned with its objectives.  

After completing the bidding process for an item \( h_t \), the agent updates its priority list \( L_{t-1} \) to reflect its new planning. This update is determined by the agent's remaining budget \( B_t \), the set of available items \( H_t \). It also incorporates the status of all agents, denoted as \( S_t \), which has their acquired items and profits. Additionally, the update considers \( P_t \), a collection of vectors containing the agent's estimate of its competitors' personas.  
The priority list update process can be formalized as:  
\[
L_{t} = LLM(\{l_h\}_{h\in H_t}|B_t, \pi, H_t, S_t, P_t, L_{t-1})
\]
This iterative process enables agents to continuously refine their strategies in real time, adjusting their decisions to better align with their objectives. We provide the prompt for planning in Appendix~\ref{sec:basic_prompt}.

At the conclusion of the auction, let \( H_b \) denote the set of items won by agent \( b \), and let \( H_b^\pi \) represent the subset of items that align perfectly with agent \( b \)'s persona \( \pi \). Define \( I_{b,h} \in \{0,1\} \) as a binary indicator, where \( I_{b,h} = 1 \) if agent \( b \) wins item \( h \), and \( I_{b,h} = 0 \) otherwise. The performance metrics for agent \( b \) are defined as follows:

\begin{equation}
R_b = \frac{\sum_{h \in H} I_{b, h}\left( V^*_h - \bar{V}_h\right)}{\sum_{h \in H}\left( V^*_h - V^0_h\right)}
\end{equation}

\begin{equation}
A_b = \frac{\sum_{h \in H^\pi_b} I_{b, h}}{|H_b^\pi|}
\end{equation}
where \textbf{Proft Ratio} \( R_b \) and \textbf{Matched-Item Acquisition Rate} \( A_b \) quantifies the profit-driven and persona-driven objectives of agent \( b \) repectively.

In an auction setting with agents $b_1$, $b_2$, and $b_3$, the agent's \textbf{TrueSkill Score} $S_{b_i}$ is directly proportional to the ranking of the agents' profitability.
\[
S_{b_i} \propto \operatorname{rank}(R_i : i \in \{b_1, b_2, b_3\})
\]

\begin{figure*}
    \centering
    \includegraphics[width=6.2in]{bidders_houses2.pdf} 
    \vspace{-0.05in}
    \caption{Example Bidders (top) and their Houses (bottom). We curate a diverse set of houses tailored to different personas. A list of home features and personas is gathered from \href{https://www.redfin.com}{Redfin.com} to enhance data realism.}
    \label{fig: persona_house}
\vspace{-0.1in}
\end{figure*}

These metrics offer a comprehensive framework for assessing an agent's profitability, competitive standing, and effectiveness in achieving persona-driven objectives within the auction.

\subsection{Persona-Driven Bidders and Houses}
\textsc{Harbor} is designed to simulate realistic auctions by incorporating diverse personalities that reflect real-world motivations. In addition to initial budget constraints and value estimation overhead, one agent can also have one or more personas, such as a first-time homebuyer, downsizing homeowner, or environmental activist. These personas influence bidding strategies, introducing behavioral variability into the auction. In practice, a persona-driven bidder is created by directly embedding the persona into the system prompt, as shown in Appendix~\ref{sec:basic_prompt}. Similarly, a bidder with a mix of two personas can be created by sequentially injecting both personas into the system prompt.

We curate houses tailored to different profiles to align with proposed personas. Through sampling from these personas and corresponding houses, we generate diverse auction simulations. % enabling the study of LLM agents' decision-making across different environments.  
We mimic our items to real housing data from \href{https://www.redfin.com}{Redfin.com} to further enhance realism and explainability. We provide two bidders and their matching houses as an example in Figure~\ref{fig: persona_house}.

\subsection{Persona Profiling}
\label{sec:profiling}

The profiling module maintains a \( k \)-dimensional vector \( P^c \) for each competitor \( c \), where \( k \) represents the number of personas. Each value \( p^c \in P^c \) ranges from \([-1,1]\), indicating the weight of a persona, with higher values indicating stronger alignment. Before the auction begins, the agent initializes each competitor's profiling vector \( P^c \) as a zero vector. At the end of bidding round \( t \), the agent updates \( P^c_{t-1} \) based on the current item \( h \) and its bidding history \( T_h \), which records all agents' bidding actions for \( h \). If a competitor bids heavily on $h$, the profiling module increases weights for personas likely drawn to $h$; otherwise, it decreases them, potentially assigning negative weights. The profiling update process can be formalized as: 
\[
P^c_t = LLM(\{p^c_{t, i}\}_{ \forall i \in [1,k] } | P^c_{t-1}, h, T_h)
\]
Aggregating all vectors $P^c_t$ forms the complete profiling knowledge $P_t$ at round \( t \). This profiling knowledge is a key input in adjusting the agent's priority list (Section~\ref{sec:planning}). The profiling prompt and an example output are provided in Appendix~\ref{sec:profile_prompt}.

Constructing vector representations for personas enables precise evaluation. At the end of the auction, profiling performance is measured by comparing inferred profile vector \( P^c \) against ground truth persona vector \( G^c \). For \textbf{single-persona agents}, \( G^c \) is an one-hot vector with \( G^c_i = 1 \) in the competitor $c$'s true persona dimension. Similarly, for \textbf{mix-of-two persona agents}, \( G^c \) has two active dimensions, each weighted at \( 0.5 \). To ensure a positive probability distribution, we shift \( P^c \) by adding \( |\min(P^c)| \) and normalize it. A smoothing factor \( \epsilon = 10^{-12} \) is applied to both \( G^c \) and \( P^c \). Profiling accuracy is then evaluated using KL divergence:  
\[
D_{KL}(G^c \parallel P^c) = \sum G^c \log \frac{G^c}{P^c}.
\]
This provides a rigorous measure of how well the profiling module captures a competitor's persona.

\begin{figure*}[htbp]
    \centering
    \includegraphics[width=0.88\linewidth]{heatmap2.pdf} 
    \vspace{-0.05in}
    \caption{Heatmaps of Priority of Master Agent (left), Rival Agents 1 (middle) and 2 (right). Agent 1's persona matches to Item \{E, F, G\}. Agent 2's persona matches to Item \{H, I, J\}. High-priority scores highlighted in red.}
    \label{fig: experiment_1_big} 
    \vspace{-0.1in}
\end{figure*}

\begin{table}[t]
\centering
\setlength{\tabcolsep}{3pt}
\renewcommand{\arraystretch}{1.1}
\begin{footnotesize}
\textsf{
\begin{tabular}{l}  
\toprule
\textbf{Select one of the following six strategic actions:}\\[0.5em]
A. Increase the bid if this item is a top priority \\
B. Increase the bid to drain competitors' budgets, \\
\;\;\; especially if a competitor highly values this item \\
C. Increase the bid if your budget allows without\\
\;\;\; compromising future rounds  \\
D. Quit to conserve budget for higher-priority items \\
E. Quit because profit margin is no longer attractive\\
F. Quit to avoid a costly bidding war \\
\bottomrule
\end{tabular}}
\end{footnotesize}
\vspace{-0.05in}
\caption{The Master Agent strategically selects one of six predefined actions, leveraging advanced reasoning skills and knowledge of rivals' personas.}
\label{tab:strategy}
\vspace{-0.1in}
\end{table}

\subsection{Strategic Module}
\label{sec:strategy}

Optimal bidding goes beyond budget management, requiring strategic exploitation of opponents' behaviors. Our strategic module provides a controlled setting to assess an agent's use of profiling knowledge. It evaluates whether the agent applies higher-level reasoning rather than simply bidding or withdrawing based on budget constraints. Activated whenever the agent makes a bidding decision, this module ensures that each action, whether bidding or withdrawing, is strategically justified. The strategic prompt takes the recent status $S_{t-1}$, most updated profile knowledge \( P_{t-1} \) and planning \( L_{t-1} \), and the bidding context, including item details and the current price, to generate a chosen strategic option from a predefined list in Table~\ref{tab:strategy}. This structured approach prevents naïve bidding, ensuring rational, profit-maximizing decisions. The prompt and an example output are provided in Appendix~\ref{sec:strategy_prompt}.

\begin{figure}[htbp]
\centering
\includegraphics[width=0.85\linewidth]{engagement_history_plot.pdf} 
\vspace{-0.05in}
\caption{Engagements of all Items. Agent 1's persona matches to Item \{E, F, G\}. Agent 2's persona matches to Item \{H, I, J\}.}
\label{fig: engagement}
\vspace{-0.15in}
\end{figure}

\section{Experiments}
We conduct a series of experiments to address three key questions: (a) How does a persona influence an agent's behavior in competitive settings? (b) Can the agent effectively profile its competitors' behavior? (c) How can persona profiling be leveraged to create an advantage using strategies such as theory of mind? These experiments aim to improve our understanding of persona dynamics in multi-agent competitive scenarios.
Our `Master' agent undergoes various modifications and competes against two agents, Rival 1 and Rival 2, in ten-item auctions. Each agent is randomly assigned a persona that shapes its prioritization of items. Any deviations from this default setup are noted as needed. To enhance robustness, each experiment runs five times; we report the average results. All agents use the same foundational LLM; we do not compare different LLMs due to resource constraints. Further experiment details are in Appendix~\ref{sec:exp_details}.

\begin{figure*}
    \centering
    \includegraphics[width=0.33\linewidth]{profile_persona.pdf} 
    \includegraphics[width=0.33\linewidth]{more_bidders.pdf} 
    \includegraphics[width=0.32\linewidth]{profile_progress_2.pdf} 
    \vspace{-0.05in}
    \caption{
    (\textsc{Left}) The KL divergence scores illustrate the Master Agent's ability to infer competitors' personas; (\textsc{Middle}) As more agents join (\# Agent Profiles), the Master Agent struggles to infer personas accurately, as reflected by increasing KL divergence scores; (\textsc{Right}) Master Agent's profiling of a Rival Agent with persona $P_9$ evolves after each bidding round. Each row represents the profile vector at the current bidding round.
    }
    \label{fig:profile_persona}
\vspace{-0.1in}
\end{figure*}

\subsection{Impact of Persona on Agent Behavior}
\label{sec:4.1}
This experiment demonstrates how an assigned persona influences an agent's behavior in auctions. We assign a unique persona to each of Rival 1 and Rival 2. Among ten items, each rival has three items matching their assigned persona. The Master Agent operates without a persona for comparison. 

Figure~\ref{fig: experiment_1_big} shows heatmaps of priority scores for the items across bidding rounds. Rival Agents 1 and 2 consistently assign the highest priority scores (3) to their matched items across all bidding rounds. The Master Agent, lacking a persona, determines item priority based on auction order, giving the highest priority to the first remaining items.

Figure~\ref{fig: engagement} further supports this pattern by showing the average number of engagements, measured by how often each agent raises bids for an item across five trials. The results illustrate that Rivals 1 and 2 consistently favor items aligned with their personas and repeatedly increase bids. They not only assign high-priority scores to these items but also repeatedly increase their bids. Our findings indicate that persona prompting influences agents' decisions and diverts them from rational, profit-driven bidding. 

\subsection{Impact of Persona on Profitability}
\label{sec:4.2}
Does assigning a persona to an agent affect its profitability? How does competition impact earnings when multiple agents share the same persona? All agents start with the same budget. Persona agents have two aligned items. The Master Agent is tested under four conditions: (a) \textbf{Master w/o Persona}: the Master Agent has no persona; (b) \textbf{Master w/ Persona}: the Master has a persona different from both Rival Agents; (c) \textbf{Some Competition}: the Master shares a persona with one rival (Rival 2), creating direct competition for persona-aligned items; (d) \textbf{More Competition}: all agents share the same persona, intensifying competition. To ensure results are persona-independent, we rotate agent personas in a round-robin manner and report the averaged results.

\begin{table}[t]
\centering
\setlength{\tabcolsep}{3pt}
\renewcommand{\arraystretch}{1.1}
\begin{small}
\begin{tabular}{lcccc}
& \multicolumn{4}{c}{\textbf{Profit Rate ($R$)}} \\
\cmidrule(lr){2-5} 
\textbf{Setting} & \textbf{Master} & \textbf{Rival 1} & \textbf{Rival 2} & \textbf{Average}\\ 
\toprule
{Master w/o Persona} &      \textbf{34.56} & 24.59 & 24.08 &   27.74    \\ 
{Master w/ Persona} &     \textbf{31.75}  &   32.35    &   23.60      &     29.23  \\ 
{Some Competition} &   \textbf{26.81}    &  29.72      &  22.88    &    26.47     \\ 
{More Competition} &     \textbf{25.22}   &   21.66       &   18.97      & 21.95 \\ 
\bottomrule
\end{tabular}
\end{small}
\vspace{-0.05in}
\caption{Profit rates (\%) of the agents under four conditions. The Master Agent prioritizes persona-aligned items, reducing competitiveness for higher-profit items and lowering overall profits.}
\label{tab:experiment_1.1}
\vspace{-0.15in}
\end{table} 

Results in Table~\ref{tab:experiment_1.1} suggest that persona prompting affects the agent's core profit-driven objective. The Master Agent prioritizes items that align with its persona, making it less competitive for higher-profit items and leading to lower overall profits. Without a persona, the Master Agent achieves the highest profit rate of 34.56\%. Increased competition among agents further reduces overall profit rates. This effect is illustrated in the average profit rate decline from 29.23\% to 21.95\%. These results support the common intuition that entering a profit-driven auction with emotional or preferential biases can undermine a bidder's financial success.

\subsection{Profiling Rival Personas}
\label{sec:4.3}
To evaluate profiling accuracy, we use KL divergence to measure the difference between the inferred and ground truth persona distributions. Recall from Section~\ref{sec:profiling}, ground truth for single-persona agents is an one-hot vector, while mixed-persona agents distribute weights equally across two dimensions. Lower KL divergence implies more accurate persona inferences by the Master, while higher values suggest greater deviation.

We explore whether personas become more evident as more items align with an agent's persona. If an agent consistently bids on preferred items, their persona should be fully revealed. To test this, we analyze two Rival agents with their number of matched houses $M$ ranging from 0 to 4. For example, at $M$ = 4, each Rival Agent has four matched houses; at $M$ = 0, none matches their personas. The Master Agent, without a persona, aims to infer the personas of both Rivals.

\begin{table*}[h]
\centering
\setlength{\tabcolsep}{4.3pt}
\renewcommand{\arraystretch}{1.1} 
\begin{small}
\begin{tabular}{lccccccccc}
\toprule
& \multicolumn{3}{c}{\textbf{Profit Rate ($R$)}} & \multicolumn{3}{c}{\textbf{TrueSkill ($S$)}} & \multicolumn{3}{c}{\textbf{Item Acquire Rate ($A$)}}\\
\cmidrule(lr){2-4} \cmidrule(lr){5-7} \cmidrule(lr){8-10}
\textbf{Master Agent's Setting} & \textbf{Master} & \textbf{Rival-1} & \textbf{Rival-2} & \textbf{Master} & \textbf{Rival-1} & \textbf{Rival-2} & \textbf{Master} & \textbf{Rival-1} & \textbf{Rival-2} \\
\midrule
Baseline w/o ToM & 23.45 & \textbf{24.08}  &  22.27  & \textbf{25.67}  & 25.00 &  24.11 &        0.77  & 0.80 &  \textbf{0.80} \\
ToM w/ True Persona & \textbf{26.18}   & 24.76 &  24.89  &   \textbf{25.00}   & 25.00 &    25.00 & 0.87 & 0.77 & \textbf{0.90}\\
ToM w/ Inferred Pers. + Strategy & \textbf{32.54}  &  21.14  & 22.08  & \textbf{28.56}  & 22.77    &  23.66 &   \textbf{1.00} & 0.80 & 0.83  \\
ToM w/ True Persona + Strategy &  \textcolor{red}{\textbf{35.81}}  & 21.32  & 22.03  &  \textcolor{red}{\textbf{30.34}}  &  22.77 & 21.88 &    \textbf{0.87} & 0.73 & 0.77    \\
Second-Order ToM &  22.68 &  24.42 & \textbf{25.01} &   24.55   &  25.00   &   \textbf{25.45} & \textbf{0.93} & 0.90 & 0.87\\
\bottomrule
\end{tabular}
\end{small}
\vspace{-0.05in}
\caption{Equipping the Master with first-order ToM, allowing it to perceive competitors' true personas, increases its Profit Rate. Applying strategy further leads to a substantial improvement in both Profit Rate and TrueSkill score.}
\label{tab:experiment_strategy}
\vspace{-0.1in}
\end{table*}

Figure~\ref{fig:profile_persona} (left) shows the KL divergence scores, illustrating the Master Agent's ability to infer competitors' personas. As the number of matched items increases, the Master Agent becomes more accurate in profiling competitors, suggesting that effective inference depends on persona-driven behaviors. When no matched items are present, the lack of clear behavioral patterns leads to less accurate profiling.
Profiling a mix of two personas results in lower KL divergence than profiling a single persona. This is expected, as a balanced mix creates a more neutral agent—one that is less distinct and more evenly interested in different houses. As a result, its behavior is more predictable. In contrast, a single dominant persona leads to stronger preferences, making profiling more challenging. Figure~\ref{fig:profile_persona} (right) shows how the Master's profiling of a Rival Agent evolves after each bidding round.

\subsection{Profiling Capacity}
\label{sec:capacity}

The Master Agent's profiling ability diminishes as more bidders join. Increased interactions generate extensive bidding logs, making it harder for the Master to accurately infer competitor personas. 
In this experiment, we vary the number of competitors in an auction from \{2, 3, 4, 5, 6\}, with one Master Agent. Figure~\ref{fig:profile_persona} (middle) shows the Master's profiling results. We observe that the Master's profiling remains effective when there are fewer than five bidders. As more agents join, the Master agent struggles to infer personas accurately, as reflected by increasing KL divergence scores.

\subsection{Theory of Mind (ToM) Strategy}
\label{sec:4.5}

We examine whether the Master Agent can use ToM with persona knowledge from the profiling module (§\ref{sec:profiling}) to gain an advantage and whether the strategic module (§\ref{sec:strategy}), which applies advanced auction techniques, enhances competitiveness. We conduct the experiment using \textit{Claude-3.5-Sonnet}. To ensure results are persona-independent, we rotate agent personas in a round-robin manner and report averaged results. Each agent has two items that align with their personas, making them the expected winners of those items while still aiming to maximize overall profit. 

Our ToM experiments consist of five settings: (a) \textbf{Baseline}: the Master operates without any ToM capabilities; (b) \textbf{First-order ToM (w/ True Persona)}: the Master has the true personas of competing agents to assess whether persona knowledge enhances bidding performance; (c) \textbf{First-order ToM (w/ Inferred Persona + Strategy)}: instead of receiving true persona information directly, the Master infers competitors' personas using its profiling module and applies a strategic module to leverage this knowledge; (d) \textbf{Optimal setting}: the Master has true knowledge of rivals' personas and strategies, representing the best possible scenario; (e) \textbf{Second-Order ToM}: the Master is equipped with second-order ToM, allowing it to predict how rivals perceive its beliefs. All agents can infer other agents' personas and apply strategic modules. Details of these experimental setups and prompts, are provided in the Appendix~\ref{sec:2tom}.

Table~\ref{tab:experiment_strategy} presents the results of our ToM experiments. We observe that equipping the Master Agent with first-order ToM, allowing it to perceive competitors' true personas, increases its profit rate from 23.45\% (Baseline w/o ToM) to 26.18\%, while its TrueSkill remains at a similar level. When the agent relies solely on profiling without strategy, the profit increase is moderate. Applying strategy leads to a substantial improvement in both Profit Rate and TrueSkill score, boosting the profit rate from 26.18\% to 35.81\%. This emphasizes the need for expert strategy to help the Master Agent outperform competitors. When using inferred profiles instead of true personas, the Master experiences a modest performance gain, with its profit rate rising from 23.45\% to 32.54\%. This outcome aligns with expectations, suggesting that higher profitability requires more accurate profiling of competitors' preferences. Across all ToM settings, the Master demonstrates a higher item acquisition rate compared to the baseline, indicating the potential benefits of ToM in securing desired items.

\vspace{-0.05in}
\paragraph{Second-Order ToM} Master Agent with second-order ToM predicts how Rival Agents perceive its beliefs and persona. For example, if the Master Agent believes that Rival 2 has identified its farming preference, it may strategically bid on non-farming properties to mislead competitors. If rivals avoid bidding on its persona-aligned properties, the Master can secure them at lower prices.

Table~\ref{tab:experiment_strategy} shows that when all agents infer each other's beliefs, competition intensifies, making auctions more aggressive. While the Master Agent has a higher-order ToM, this does not always lead to higher profits. This suggests that ToM (understanding others' intentions) alone is not enough; it must be paired with expert strategies (taking the right actions accordingly) to maximize benefits.

\section{Conclusion}

\textsc{Harbor} provides a controlled environment for studying how LLM agents balance personal objectives with competitive strategy. Through extensive experiments, we demonstrate that persona-driven bidding significantly influences agent behavior. We show that LLM agents can infer competitors' personas with reasonable accuracy, though profiling effectiveness declines as the number of rivals increases. Our strategic module enhances decision-making by leveraging profiling insights.

\section*{Limitations}

Our testbed, \textsc{Harbor}, is a flexible tool for studying how AI agents interact in competitive auctions. While it helps uncover key insights about decision-making, there are limitations. \textsc{Harbor} uses LLM-based agents, which possess strong reasoning skills, and their decision-making is influenced by their training data and inherent biases. These agents can mimic strategic behaviors effectively, yet they may lack the creative problem-solving abilities that humans show in real-world auctions. This means their strategies might differ from those used by people in actual bidding scenarios. Our current evaluation metrics establish a foundation for measuring agent performance. Future versions of \textsc{Harbor} may incorporate additional features, such as modeling long-term trust between agents, simulating deception in negotiations, and addressing ethical considerations in competitive AI behavior.
These improvements will contribute to a comprehensive understanding of multi-agent interactions in competitive environments.

% \bibliography{custom}
\input{acl.bbl}
\nocite{*}

\appendix

\section{Persona and House Collection}
We use \href{https://www.redfin.com}{Redfin.com} to study the style of real-world housing descriptions. This helps our auction properties resemble real listings. Our property identities are synthetic, detailed, and tailored to our experiments. We do not use real housing data or personally identifiable information. While we take inspiration from public data, our dataset is manually reviewed to avoid sensitive or offensive content. \textsc{Harbor} currently contains ten personas and forty houses. 
\label{sec:appendix_A}

\section{More Details on Experiment Setups}
\label{sec:exp_details}
Experiments~\ref{sec:4.1} and~\ref{sec:4.2} use GPT-4o-mini~\cite{hurst2024gpt} for all three agents and ten items in each auction. As the auctions become longer and more complex, Experiments~\ref{sec:4.3} and~\ref{sec:capacity} use GPT-4o~\cite{hurst2024gpt} for all agents. Experiment~\ref{sec:4.3} features ten items per auction, while Experiment~\ref{sec:capacity} includes fifteen items to accommodate a larger number of agents. The increased item count ensures that each agent has at least two persona-aligned items. Experiment~\ref{sec:4.5} uses Claude-3.5-Sonnet~\cite{anthropic2024claude} for its advanced reasoning capability with ten items per auction simulation.  

For all experiments, we set the generation temperature to 0 to maintain generally consistent outputs. We give all agents starting budget \$1,000,000 and an price estimation overhead of 10\%.

\section{Profile Prompt and Output}
\label{sec:profile_prompt}
Figure~\ref{fig:profile_prompt} presents the profile prompt along with an example where the Master Agent profiles Rival Bidder 2. The prompt is designed to analyze one rival at a time, ensuring precise profiling. In practice, this process runs in parallel for all rivals, improving reasoning accuracy and minimizing hallucination.  

In our experiments, the baseline persona prediction assumes an evenly distributed probability vector. Since we define ten personas, the profiling vector has a length of 10. The baseline KL divergence is approximately \textbf{2.30} for a single persona and \textbf{1.60} for a mix of two personas.

\section{Strategy Prompt and Output}
\label{sec:strategy_prompt}
Figure~\ref{fig:strategy_prompt} presents the strategic prompt, which utilizes \textit{current\_profile} to determine the next bidding action. The output shows that the Master Agent leverages profiling weights, such as "Urban Dwellers is 0.8," to infer Bidder 2's preference for the item. Based on this insight, the Master Agent strategically increases its bid to deplete Bidder 2's budget, aiming to secure a future budget advantage.

\section{Basic Bidding Prompts}
\label{sec:basic_prompt}
The basic auction prompts in this section are developed based on the code and prompts from AucArena~\cite{chen2023put}. Figure~\ref{fig:system_planning_action} illustrates the system, planning, and bidding prompts used in our experiments. The \textbf{system prompt} injects both the agent's persona and profit-driven objectives, guiding it to maximize profit while adhering to its assigned persona. This prompt remains active across all interactions. The \textbf{planning prompt} generates the priority list $L$ and is triggered whenever an item's bidding concludes. The \textbf{bidding prompt} activates whenever the auctioneer requests a bid, relying on the strategy prompt to decide whether to raise the price or quit. Additionally, Figure~\ref{fig:summarize_prompt} presents the prompt used to update an agent's status after completing a bid.

\section{Second-Order ToM Prompts}
\label{sec:2tom}
When testing second-order ToM, all agents are equipped with both the Profile and Strategy Modules. However, only the Master Agent is enabled with second-order ToM, allowing it to infer how its rivals might profile it at the current bidding. Figure~\ref{fig:2_tom} presents the prompt used for second-order ToM along with an example output.


\begin{figure*}[htbp]
\centering
\begin{footnotesize}
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Profiling Competitors}}
\begin{lstlisting}
Here is the history of the bidding war of {current_item}: "{bidding_history}"

You are {bidder_name}. You are given a persona list: ["First-Time Homebuyers", "Upgrade to a Larger Home", "Downsizing", "Investment Buyers", "Relocation for Work", "Vacation Homes", "Eco-Conscious Buyers", "Urban Dwellers", "Rural Home Seekers", "Multigenerational Living"].

Given the bidding history you have seen so far, complete the below steps:

1. Study the bidding history, focus on how many times {target_bidder} rasied price for this item and what are the wining bids so far for each bidder. These 2 factors often say something about a person.
2. Based on {target_bidder}'s willingness to raise the price for this item, combining this items description: {house_desc}, predict the bidders' persona from the given persona list.
3. If the bidder does not show any interests for this item at all, you can reduce the weights on the personas that closely match with this item, even to the negatives. 
4. Formulate your predictionn into how much weight each persona plays in {target_bidder}'s bidding. Present the prediction in the JSON format like this {{"{target_bidder}": {{"First-Time Homebuyers": 0.2, "Upgrade to a Larger Home": 0.1, "Downsizing": 0.1...}}}} where the key is the persona type and the value is the weight of that persona type.
5. Make sure the range of each weights are within the range of -1 to 1. Make sure the output dictionary has 10 keys, each representing a persona type from the given list.

If {target_bidder} does not make any informative actions for a prediction, output an dictionary like {{"{target_bidder}": {{"First-Time Homebuyers": 0.0, "Upgrade to a Larger Home": 0.0, "Downsizing": 0.0...}}}} where all weights are 0. 
\end{lstlisting}
\end{promptbox}
\end{minipage}

\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Profiling Output}}
\begin{lstlisting}
Let me analyze this step by step:
1. Bidding History Analysis:
- Bidder 2 made one bid at $150,000
- They were the only active bidder as others withdrew immediately
- This shows strong interest in an urban property
2. Behavior Analysis:
- Bidder 2's immediate bid while others withdrew suggests strong interest in urban properties
- The property description (urban location, near city center, modern amenities) aligns well with their previous high scores in "Urban Dwellers" and "Relocation for Work"
- Their willingness to bid confirms their urban preference
3. Persona Update Considerations:
- Should slightly increase "Urban Dwellers" weight as their action confirms this preference
- Can slightly increase "First-Time Homebuyers" as the property size and features align with this group
- Should slightly decrease "Rural Home Seekers" as this action further confirms urban preference
- Other weights should see minor adjustments based on this urban property interes
4. Updated Prediction:
{"Bidder 2": {
    "First-Time Homebuyers": 0.5,
    "Upgrade to a Larger Home": 0.2,
    "Downsizing": 0.2,
    "Investment Buyers": 0.3,
    "Relocation for Work": 0.8,
    "Vacation Homes": -0.4,
    "Eco-Conscious Buyers": -0.3,
    "Urban Dwellers": 0.8,
    "Rural Home Seekers": -0.9,
    "Multigenerational Living": 0.1
}}
The main changes are:
- Increased "Urban Dwellers" from 0.7 to 0.8
- Increased "First-Time Homebuyers" from 0.4 to 0.5
- Decreased "Rural Home Seekers" from -0.8 to -0.9
These changes reflect their demonstrated interest in this urban property while maintaining reasonable adjustment sizes.
\end{lstlisting}
\end{promptbox}
\end{minipage}
\end{footnotesize}
\vspace{-0.1in}
\caption{Prompt for profile module and example output.}
\label{fig:profile_prompt}
\end{figure*}


\label{sec: strategy_prompt}
\begin{figure*}[htbp]
\centering
\begin{footnotesize}
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Strategy with Expert Input}}
\begin{lstlisting}
The auctioneer says: "{auctioneer_msg}"

Here is your current status:
{prev_status}

Here is your current priority scale of all the items:
{current_plan}
The descriptions of the priority scale are as follows.
    * 1 - This item is the least important. Consider giving it up if necessary to save money for the rest of the auction.
    * 2 - This item holds value but isn't a top priority for the bidder. Could bid on it if you have enough budget.
    * 3 - This item is of utmost importance and is a top priority for the bidder in the rest of the auction.

Here is a profiling of your competitors' personas. A higher weight for a particular item type suggests that a bidder is more likely to bid on items of that type:
{currrent_profile}

Use the knowledge of your competitors' personas, your current status, and your priority list to make a **strategic** decision. Remember: Your primary objective is to secure the highest profit at the end of this auction, compared to all other bidders. Consider the following **key bidding practices**:
1. **Do not let competitors win items too easily**--forcing them to bid higher weakens their future purchasing power.  
2. **Exploit competitor weaknesses**--if a competitor values an item, consider bidding on it to drain their budget.  
3. **Only the winning bidder pays**--losing bidders pay nothing, so well-placed aggressive bids can weaken competitors.  
4. **Know when to stop**--if the profit margin is <= $300, it may not be worth pursuing.

You must select one of the following six strategic actions:  
A. **Increase the bid if this item is a top priority.**  
B. **Increase the bid to drain competitors' budgets, especially if a competitor highly values this item.**  
C. **Increase the bid if your budget allows without compromising future rounds.**  
D. **Quit to conserve budget for higher-priority items.**  
E. **Quit because the profit margin is no longer attractive (i.e., profit margin <= $300).**  
F. **Quit to avoid a costly bidding war.**  

State your choice in the format:  
**"I chose to [action] because [reason]."**  
Make sure to **elaborate** on why you chose this action, considering your competitors' profiles, your current status, and your priority list.
\end{lstlisting}
\end{promptbox}
\end{minipage}

\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Strategy Output Example}}
\begin{lstlisting}
Let me analyze this situation strategically:
1. Home 1 is rated as priority 2 for me - moderate importance but not critical
2. Looking at competitor personas:
   * Bidder 2 has high weights for "First-Time Homebuyers" (0.5) and "Urban Dwellers" (0.8)
   * This property perfectly matches these preferences
3. Current status:
   * Bidder 2 is leading in total profits ($735,000). have a decent budget ($580,000) and am in second place
4. The current property description: Suburban location. First-time buyer focused. This doesn't align well with my rural farmer persona
**I chose to B (Increase the bid to drain competitors' budgets) because this property strongly appeals to Bidder 2's preferences, making it an excellent opportunity to force them to spend more of their budget. While this isn't a top priority for me (rated 2), engaging in a bidding war here could strategically weaken Bidder 2, who is currently leading in profits. The property's characteristics perfectly match Bidder 2's profile (high weights for First-Time Homebuyers and Urban Dwellers), suggesting they're likely to bid aggressively. By pushing up the price, I can either drain their resources for future auctions or potentially win the property at a reasonable price if they back out. Given my substantial budget of $580,000, I can afford to be aggressive here without compromising my ability to bid on my priority 3 items later.**

\end{lstlisting}
\end{promptbox}
\end{minipage}

\end{footnotesize}
\vspace{-0.1in}
\caption{Prompt for strategy module and example output.}
\label{fig:strategy_prompt}
\end{figure*}

\begin{figure*}[htbp]
\centering
\begin{footnotesize}
\begin{minipage}{\textwidth}

\begin{promptbox}{\textbf{System Message (Overall Bidding Rules)}}
You are \{bidder\_name\}. \{persona\} You are attending an ascending-bid housing auction as a bidder. This auction will have some other bidders to compete with you in bidding wars. The price is gradually raised, bidders drop out until finally only one bidder remains, and that bidder wins the item at this final price. Remember: Your primary objective is to secure the highest profit at the end of this auction, compared to all other bidders.\\

\begin{lstlisting}
Here are some must-know rules for this auction:

1. Item Values: The true value of an item means its resale value in the broader market, which you don't know. You will have a personal estimation of the item value. However, note that your estimated value could deviate from the true value, due to your potential overestimation or underestimation of this item.

2. Winning Bid: The highest bid wins the item. Your profit from winning an item is determined by the difference between the item's true value and your winning bid. You should try to win an item at a bid as minimal as possible to save your budget.

3. Winner Pays: Note that only the winner pays for the bidding price of the item. Other bidder who participate in the bidding but lost do not have to pay at all.
\end{lstlisting}
\end{promptbox}
\end{minipage}

\hfill
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Planning (Item Prioritization)}}
\begin{lstlisting}
As {bidder_name}, you have a total budget of ${budget}. This auction has a total of {item_num} items to be sequentially presented, they are: {items_info}

Please plan for your bidding strategy for the auction. A well-thought-out plan positions you advantageously against competitors, allowing you to allocate resources effectively. With a clear strategy, you can make decisions rapidly and confidently, especially under the pressure of the auction environment. Remember: Your primary objective is to secure the highest profit at the end of this auction, compared to all other bidders.

Remember to observe and learn other bidders' bidding habits overtime, and try to take advantage from their preference to maximize your gain.

After articulate your thinking, in you plan, assign a priority level to each item. Present the priorities for all items in a JSON format, each item should be represented as a key-value pair, where the key is the item name and the value is its priority on the scale from 1-3. An example output is: {{"Item A": 3, "Item B": 2, "Item C": 2}}. The descriptions of the priority scale of items are as follows.

    * 1 - This item is the least important. Consider giving it up if necessary to save money for the rest of the auction.
    * 2 - This item holds value but isn't a top priority for the bidder. Could bid on it if you have enough budget.
    * 3 - This item is of utmost importance and is a top priority for the bidder in the rest of the auction.
\end{lstlisting}
\end{promptbox}
\end{minipage}

\hfill
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Action (Bid or Withdraw)}}
\begin{lstlisting}
Now, the auctioneer says: "{auctioneer_msg}" As {bidder_name}, you have to decide whether to bid on this item or withdraw and explain why. Remember: Your primary objective is to secure the highest profit at the end of this auction, compared to all other bidders.

Here are some common practices of bidding:
1. Showing your interest by bidding with or slightly above the starting price of this item, then gradually increase your bid.
2. Think step by step of the pros and cons and the consequences of your action (e.g., remaining budget in future bidding) in order to achieve your primary objective.

Here is some professional strategic bidding advice to help you make your decision: "{strategic_reasoning}" 

Follow the decision from the strategic bidding advice, then make your final decision clearly. You should either withdraw (saying "I'm out!") or make a higher bid for this item (saying "I bid $xxx!").
\end{lstlisting}
\end{promptbox}
\end{minipage}
\end{footnotesize}
\vspace{-0.1in}
\caption{Prompts for an agent's system message, planning, and bidding.}
\label{fig:system_planning_action}
\end{figure*}



\begin{figure*}[htbp]
\centering
\begin{footnotesize}
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Updating Records}}
\begin{lstlisting}
Here is the history of the bidding war of {cur_item}: "{bidding_history}"
The auctioneer concludes: "{hammer_msg}" 

{win_lose_msg} 

As {bidder_name}, you have to update the status of the auction based on this round of bidding. Here's your previous status:``` {prev_status} ```

Summarize the notable behaviors of all bidders in this round of bidding for future reference. Then, update the status JSON regarding the following information:
- 'remaining_budget': The remaining budget of you, expressed as a numerical value.
- 'total_profits': The total profits achieved so far for each bidder, where a numerical value following a bidder's name. No equation is needed, just the numerical value.
- 'winning_bids': The winning bids for every item won by each bidder, listed as key-value pairs, for example, {{"bidder_name": {{"item_name_1": winning_bid}}, {{"item_name_2": winning_bid}}, ...}}. If a bidder hasn't won any item, then the value for this bidder should be an empty dictionary {{}}.
- Only include the bidders mentioned in the given text. If a bidder is not mentioned (e.g. Bidder 4 in the following example), then do not include it in the JSON object.

After summarizing the bidding history, you must output the current status in a parsible JSON format. An example output looks like:
```{{"remaining_budget": 8000, "total_profits": {{"Bidder 1": 1300, "Bidder 2": 1800, "Bidder 3": 0}}, "winning_bids": {{"Bidder 1": {{"Item 2": 1200, "Item 3": 1000}}, "Bidder 2": {{"Item 1": 2000}}, "Bidder 3": {{}}}}}}```
\end{lstlisting}
\end{promptbox}
\end{minipage}
\end{footnotesize}
\vspace{-0.1in}
\caption{Prompt for an agent to update all agents' profit and item status.}
\label{fig:summarize_prompt}
\end{figure*}


\begin{figure*}[htbp]
\centering
\begin{footnotesize}
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Second-Order ToM}}
\begin{lstlisting}
Here is the history of the bidding war of {current_item}:
"{bidding_history}"
Here is your current status:
{prev_status}
You are {bidder_name}. Based on the bidding history and current status, analyze how other bidders perceive you and how this affects their strategy.
Consider:
1. How they interpret your persona? Have they identified your preference for vacation homes? Are they using this perception to manipulate you?
2. How they adjust their bidding? Are they testing your limits, avoiding competition, or trying to drain your budget?
3. How they see you as a rival or ally  Will they cooperate, challenge, or exploit you in future rounds?
Response Format:
For each bidder, state how they perceive you and how they might adjust their strategy.
Example:
   - Bidder 1 thinks I ... They might adjust their strategy by ...
   - Bidder 2 thinks I ... They might adjust their strategy by ...

Keep your analysis concise and actionable to refine your bidding strategy.
\end{lstlisting}
\end{promptbox}
\end{minipage}
\begin{minipage}{\textwidth}
\begin{promptbox}{\textbf{Example Output of Second-Order ToM}}
\begin{lstlisting}
Let me analyze how other bidders likely perceive me based on the bidding history:

Bidder 1:
- They likely perceive me as a serious and determined buyer with significant financial resources, given that I was willing to bid up to $195,000 for Construction 1
- They seem to have recognized my farmer persona and preference for rural properties, as they quickly withdrew from Construction 1 rather than competing
- They might adjust their strategy by avoiding direct competition with me on properties that clearly align with farming/rural interests, focusing instead on other property types

Bidder 2:
- They appear to have identified my specific interest in properties suitable for farming, as evidenced by their focus on Property 1 and House 1 which may have different characteristics
- Their winning of two properties at relatively lower prices ($180,000 and $165,000) suggests they might be strategically avoiding properties that I show strong interest in
- They might adjust their strategy by continuing to bid on properties that don't match my farming profile, while letting me pursue rural/agricultural properties at potentially higher prices

Strategic Implications:
1. I should be careful not to be too predictable in my bidding patterns
2. There might be opportunities to bid on non-farming properties when other bidders least expect it
3. I should maintain my focus on properties that align with my farming needs but be prepared to negotiate harder to secure better prices
\end{lstlisting}
\end{promptbox}
\end{minipage}
\end{footnotesize}
\vspace{-0.1in}
\caption{Prompt and example output for second-order ToM.}
\label{fig:2_tom}
\end{figure*}

\end{document}
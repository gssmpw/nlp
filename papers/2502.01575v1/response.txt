\section{Related Work}
A common approach for estimating HTE in the presence of censoring relies on estimating the censoring mechanism. Specifically, in IPCW **Robins et al., "Estimating Causal Effects from a Sequence of Prospective Observational Studies"** the censoring probability is first estimated, and the HTE is then estimated using non-censored observations, which are up-weighted by their censoring probability. A similar approach is used in meta-learners that handle right-censoring **van der Laan et al., "A Causal Framework for Counterfactual Marginal Structural Models"** . However, a key drawback of relying on such modeling is that when the censoring probability is low, poorly estimated, or influenced by unobserved covariates, this can lead to biased HTE estimates.

Other methods focus on  specific estimands in the unconfounded setting. For instance, **Li et al., "Nonparametric Bayesian accelerated failure time models for estimating differences in expected log-failure times"** developed nonparametric Bayesian accelerated failure time models to estimate differences in expected log-failure times. **Tsiatis et al., "Targeted maximum likelihood estimation for the survival distribution with right-censored data"** introduced a targeted maximum likelihood framework for differences in survival probabilities, while **Cole and Hern√°n, "Structural nested mean models for estimating direct effects of treatment on survival"** analyzed differences in survival time. In contrast, we propose a more general estimand and can accommodate to confounded settings.

Non-parametric methods are often used for their flexibility in modeling complex relationships. Recently, **Gruber et al., "Causal Survival Forests for Estimating Heterogeneous Treatment Effects with Right-Censored Data"** proposed CSF, a non-parametric approach for HTE estimation with right-censored survival data. CSF extends the causal forest framework of  **Wager and Athey, "Estimation and Inference of Heterogeneous Treatment Effects using Random Forests"** by incorporating an IPCW approach combined with doubly robust estimating equations. They demonstrated the superiority of their approach over multiple other methods including vanilla IPCW, S-learner **Rotnitzky et al., "Structural Nested Failure Time Models for Survival Data Analysis"**, and an adaptation of the virtual twins method  **Robins et al., "Analysis of the Cox Model with a Clustered Survival Process"** . However, since CSF relies on estimating the censoring probability, it is subject to the same limitations associated with such approaches. We compare with CSF extensively throughout this work. We further note that unlike our proposed method, CSF cannot utilize IV.

 

As highlighted by **Athey et al., "Recursive Partitioning for Heterogeneous Causal Effects"**, incorporating randomness can enhance the performance of tree-based methods. Building on this idea,  **Levin et al., "Random Survival Trees with Recursive Imputation: A Nonparametric Approach to Estimating the Probability of Remaining Event-Free Given a Set of Covariates"** proposed the recursively imputed survival trees (RIST), a nonparametric approach for estimating the probability of remaining event-free given a set of covariates, based on right-censored survival data. RIST employs extremely randomized trees, enabling more effective utilization of censored observations compared to other tree-based methods. This results in improved model fit and reduced prediction error.

 

To estimate causal effects in the presence of confounding, IV methods can be employed **Angrist et al., "Identification of Causal Effects Using Instrumental Variables"**. An IV variable is associated with treatment assignment, affects the outcome only through the treatment, and is independent of unmeasured confounders. In survival data, IV methods have been widely studied. For example,  **Dong et al., "Regression-based instrumental variables analysis for additive hazard models"** proposed a regression-based IV approach using additive hazard models, while  **Athey and Imbens, " Identification and estimation of average treatment effects in the presence of confounding through instrumental variable methods"** and  **Huang et al., "Instrumental Variable Methods for Survival Data Analysis"** applied IV methods within the Cox proportional hazard framework.  **Gruber and Halloran, "Instrumental Variables Estimation of Structural Cumulative Hazard Models with Right-Censored Data"** introduced an IV-based approach for estimating structural cumulative survival models to capture time-varying effects on the survival function, and  **Huang et al., "Pseudo-observation Instrumental Variable Methods for Survival Analysis"** developed a pseudo-observation approach that accounts for the parametric contribution of covariates. In contrast, this work focuses on directly estimating HTE, which can be defined by different estimands, using nonparametric methods.  This approach offers greater flexibility in capturing complex relationships between covariates and treatment effects and as we show can readily incorporate IV methods.
\section{Related Work}
\label{sec:deluxeagent:Relatedwork}

\paragraph{Compound AI system optimization.} Prompt engineering and module interaction design is a central topic of compound AI system optimization. While existing work often relies on manually tuning them____, recent work studies how to automate this process, such as DSPy____, Textgrad____, and Autogen____. For example, DSPy uses Bayesian optimization to adjust prompts for all modules, while Textgrad uses textual feedback to optimize prompts for individual modules. On the other hand, our work focuses on model selection, a third axis for compound system optimization, complementary to prompt optimization and module interaction design. 

\paragraph{Model market utilization.} Model market utilization studies how to use all available (proprietary and open-source) models for downstream tasks____. Extensive work has built various techniques to utilize different models, such as model cascade____, model routing____, and mixture-of-experts____. While they mainly focus on  \textit{single-stage} tasks such as classification____ and question answering____, we study model utilization for compound AI systems requiring \textit{multiple stages}. This is a much more challenging problem as the search space is much larger. 

\paragraph{Model selection.} Model selection is a critical part of classic ML and has been extensively studied in the literature____. %It involves identifying the most suitable model from a set of candidates via on performance metrics, generalization ability, and computational efficiency. %Cross-validation and bootstrap____, Akaike information criterion____, neural architecture search____ and many other techniques have been developed during the past few decades. 
While classic techniques focus on model selection for one ML task, compound systems involve multiple ML tasks. Thus, model selection becomes more challenging as the search space is exponentially large in the number of tasks.  

\paragraph{LLM-as-a-judge.} LLMs have been increasingly used for evaluating and judging complex generations, a phenomenon termed LLM-as-a-judge. Researchers have extensively studied how LLM judges align with human preferences in real-world scenarios____, how to improve its quality____, how to evaluate it____, as well as many other applications____. In this paper, we find a novel use case of LLM-as-a-judge: diagnosing module-wise performance to accelerate the model allocation search process.
\begin{algorithm}[t]
\caption{Caption Merging}
\label{alg:caption_merging}
\begin{algorithmic}[1]
\Require Our mask-text pairs data $\{(\mathbf{s}_k, c_k)\}_{k=1}^K$, Segment3D~\cite{huang2024segment3d} masks $\{\mathbf{s}_{l}^{\mathrm{3D}}\}_{l=1}^L$
\Ensure Matched mask-text pairs $\{(\mathbf{s}^{\mathrm{3D}}_m, \{c_{j\in \mathcal{M}_m}\})\}_{m=1}^M$
\For{$k \gets 1$ to $K$}
    \State $l^* = \arg\max_l \mathrm{IoU}(\mathbf{s}_k, \mathbf{s}_{l}^{\mathrm{3D}})$ \Comment{Find match}
    \If{$\mathcal{M}_{l^*}$ is not initialized}
        \State $\mathcal{M}_{l^*} \gets \emptyset$ \Comment{Initialize empty set}
    \EndIf
    \If{$\mathrm{IoU}(\mathbf{s}_k, \mathbf{s}_{l^*}^{\mathrm{3D}}) > \tau$}
        \State $\mathcal{M}_{l^*} \gets \mathcal{M}_{l^*} \cup \{k\}$ \Comment{Add caption}
    \EndIf
\EndFor
\State \Return $\{(\mathbf{s}^{\mathrm{3D}}_m, \{c_{j\in \mathcal{M}_m}\})\}_{m=1}^M$
\end{algorithmic}
\end{algorithm}

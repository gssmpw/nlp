\subsubsection{Configuration Monitoring}
\label{sec:config_sensor}

\Sysname's monitoring architecture is also used to trigger reconfigurations.
The \cfgsensor searches for a new configuration and proposes it via the log.
The \cfgmonitor then selects among the proposed configurations and initiates reconfiguration.

This separation has several benefits.
First, while the monitor's reconfiguration decision must be deterministic and taken by all replicas, the sensor's search for a better configuration can be performed by a single replica.
Second, when the search space is large, the sensor can use more efficient non-deterministic search algorithms.
Lastly, the search space can be divided among the replicas.

The \cfgsensor utilizes measurements from other \monitors to find a new configuration.
A search can be triggered periodically, by a significant change in another monitor's output, or by specific events like view failures.
Typically, the \cfgsensor relies on the \susmonitor and \mismonitor to exclude \textit{invalid configurations}, such as those involving a crashed leader.
The remaining configurations are ranked using a scoring function, and the best-scoring configuration, \Cfg, is proposed to the log.
In our example, the scoring function predicts the configuration's latency using \lm from the \latmonitor.
Other scoring functions are possible, such as those that optimize throughput based on CPU and network utilization.

When the \cfgmonitor receives a configuration proposal \Cfg, it first checks that the proposal represents a \textit{valid configuration}.
The monitor also checks if the current configuration has become invalid, e.g., due to an updated \Cand from the \susmonitor.
If the current configuration is invalid, reconfiguration is needed.
However, the monitor waits for at least $\f+1$ replicas to propose new configurations before selecting the one with the best score.
This prevents reconfiguring to a potentially suboptimal configuration proposed by a faulty replica.
The monitor can trigger a reconfiguration even if the current configuration is still valid but has been active for a while.
In which case, the monitor requires the new configuration to have a significantly better score to avoid frequent reconfigurations that could disrupt the system.

\subsection{\Sensors and \Monapps}
\label{sec:sm}

This section presents \sysname's mechanisms for collecting and processing metrics, namely \sensors and \monitors.
Each sensor-monitor pair has a one-to-one relationship, as shown with \sens{1}--\mons{1} and \sens{2}--\mons{2} in \cref{fig:sensors-and-monitors}.

A \textit{\sensor} abstracts the capture of local-only metrics related to a replica's operational context.
\Sensors can be integrated into system components, such as the \consmod, or can query the operating system for metrics such as CPU load.
A sensor can also use information from local monitors, as exemplified by the dashed arrow from \mons{1} to \sens{1} in \cref{fig:sensors-and-monitors}.
A \sensor's output is assumed to be non-deterministic and may vary across replicas.
\Sensors may also perform non-deterministic computations, e.g., to support heuristic and distributed optimization algorithms.
We refer to both sensor output and compute results as \textit{measurements}.
These measurements are recorded in the log, providing a consistent record of the system's operation.
The recorded measurements are later accessed by \monitors, as discussed below.

In a Byzantine environment, \sensors at up to \f faulty replicas may report incorrect measurements.
Consequently, any \monitor using these measurements must account for potential inaccuracies.
Despite this, retaining a record of incorrect measurements can be invaluable for forensic analysis.

The \textit{\monitor} is the core abstraction linking sensor measurements from individual replicas with system-wide operations, enabling dynamic adjustments to the RSM.
When a sensor records a measurement, the corresponding \monitor updates its data structures through the following steps:

\begin{enumerate}
  \item \textbf{Data Collection:}
    The monitor collects metrics from its associated sensor via the log and may also use data from other local monitors.
  \item \textbf{Deterministic Computation:}
    The monitor processes collected metrics into consistent data structures.
\end{enumerate}

\noindent
Since monitors on each replica operate on the same ordered set of measurements, they maintain consistent data structures across the system.
This consistency provides a consolidated, global view of the measurements, allowing replicas to coordinate system-wide operations reliably, such as activating a new tree configuration with \optitree~(\cref{sec:optitree}).
\cref{tab:sensors_monitors} summarizes the key properties of sensors and monitors.

\begin{table}[htb]
  \footnotesize
  \centering
  \caption{Summary of sensor and monitor properties.}
  \label{tab:sensors_monitors}
  \begin{tabular}{@{}p{1.8cm}|p{2.9cm}p{2.9cm}@{}}
    \toprule
    \textbf{Property}        & \textbf{Sensors}          & \textbf{Monitors}          \\ \midrule
    \textbf{Input}           & System \& local monitors  & Log \& local monitors      \\
    \textbf{Computation}     & Non-deterministic         & Deterministic              \\
    \textbf{Output}          & Variable across replicas  & Consistent across replicas \\
    \bottomrule
  \end{tabular}
\end{table}

\noindent
In the following sections we present the sensors and monitors we implemented for \sysname, and \cref{fig:star-sens-mons} shows how these interact to ensure robust configurations.

\begin{figure*}[hbt]
  \centering
  \input{images/star-sens-mons}
  \caption{Connections between Replica \na's sensors and monitors.}
  \Description{Diagram illustrating the connections between sensors and monitors for a star topology.}
  \label{fig:star-sens-mons}
\end{figure*}

\section{\sysname Architecture Overview}
\label{sec:optiblogarch}

This section gives an overview of \sysname's architecture, as shown in \cref{fig:arch}.
\sysname offers measurement and monitoring facilities to optimize various aspects of a generic RSM application, such as its performance and scalability.
The RSM uses a \textit{\consmod} to consistently replicate client commands to an \textit{append-only log}.
Optimizing the RSM requires metrics on both its state and environment.
To achieve this, \sysname augments each replica with \textit{\sensors} and \textit{\monitors}.
These components use the log to share information about the system's configuration and sensor metrics with all replicas.

\Sensors collect various metrics and pass them to the \textit{\sensapp}, which uses the \consmod to disseminate authenticated sensor metrics to all replicas.
These metrics can come from different sources, such as the replica's operating environment or sensors integrated into the \consmod.
The \monitors act as counterparts to \sensors, receiving notifications about specific metrics.

\cref{fig:sensors-and-monitors} shows how monitor \mons{1} (\mons{2}) collect metrics from sensor \sens{1} (\sens{2}) at replicas \na, \nb, \nc, and \nd.
Since these metrics are committed to the log, \monitors can build a consistent global view of the environment.
This allows \sysname replicas to make operational decisions based on deterministic information rather than local-only sensor data.
As shown in \cref{fig:sensors-and-monitors}, monitor \mons{2} makes reconfiguration decisions for the RSM based on globally recorded and agreed-upon metrics.
For example, one of our \monitors generates a latency matrix that provides insights into the latencies between all participating replicas, as discussed in \cref{sec:latency}.

\begin{figure}[hbt]
  \centering
  \input{images/sensors-and-monitors}
  \caption{Replicas (\na,\nb,\nc,\nd) with sensors and monitors.}
  \Description{Diagram illustrating the relationship between sensors and monitoring applications in \sysname.}
  \label{fig:sensors-and-monitors}
\end{figure}

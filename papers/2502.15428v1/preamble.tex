\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage[capitalize,nameinlink]{cleveref}
\usepackage{acronym}
\usepackage{xspace}
\usepackage{subcaption}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=1.18}
\usepgfplotslibrary{groupplots}
\usetikzlibrary{arrows,trees,patterns,positioning,shapes,fit}
\usepackage{booktabs}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{listings}
\usepackage{url}
\usepackage{pifont}
\usepackage{tabularx}
\usepackage{enumitem}
\usepackage[group-separator={,}]{siunitx}
\microtypecontext{spacing=nonfrench}

\hypersetup{breaklinks=true,
  pdftitle={SmartLog},
  colorlinks=true,
  citecolor=black,
  urlcolor=black,
  linkcolor=black,
  pdfborder={0 0 0},
}

\newboolean{showcomments}
\setboolean{showcomments}{false}
\ifthenelse{\boolean{showcomments}}
{ \newcommand{\mynote}[3]{
    \textcolor{#3}{{\bfseries\sffamily\scriptsize#1: }\small#2}
}}
{ \newcommand{\mynote}[3]{}}

\newcommand{\itz}[1]{\textit{#1}}

\crefformat{section}{#2ยง#1#3}
\crefname{lstlisting}{Listing}{Listings}

\acrodef{BFT}{Byzantine Fault Tolerant}
\acrodef{RSM}{Replicated State Machine}
\acrodef{GST}{\textit{global stabilization time}}

\newcommand{\subsystem}{subsystem\xspace}
\newcommand{\sg}{\textit{SG}\xspace}
\newcommand{\subsystems}{subsystems\xspace}
\newcommand{\Subsystem}{Subsystem\xspace}
\newcommand{\sysname}{Smart\-Log\xspace}
\newcommand{\Sysname}{Smart\-Log\xspace}

\newcommand{\rsmapp}{RSM app\xspace}
\newcommand{\consmod}{consensus engine\xspace}
\newcommand{\Consmod}{Consensus Engine\xspace}
\newcommand{\sensapp}{sensor app\xspace}
\newcommand{\Sensapp}{sensor app\xspace}
\newcommand{\monapp}{monitor\xspace}
\newcommand{\monapps}{monitors\xspace}
\newcommand{\Monapps}{Monitors\xspace}
\newcommand{\optapp}{optimization\xspace}
\newcommand{\optapps}{optimizations\xspace}

\newcommand{\Sensor}{Sensor\xspace}
\newcommand{\Sensors}{Sensors\xspace}
\newcommand{\sensor}{sensor\xspace}
\newcommand{\sensors}{sensors\xspace}
\newcommand{\missensor}{Misbehavior\-Sensor\xspace}
\newcommand{\latsensor}{Latency\-Sensor\xspace}
\newcommand{\sussensor}{Suspicion\-Sensor\xspace}
\newcommand{\cfgsensor}{Config\-Sensor\xspace}

\newcommand{\tmissensor}{Tree\-Misbehavior\-Sensor\xspace}
\newcommand{\tlatsensor}{Tree\-Latency\-Sensor\xspace}
\newcommand{\tsussensor}{Tree\-Suspicion\-Sensor\xspace}

\newcommand{\Monitors}{Monitors\xspace}
\newcommand{\Monitor}{Monitor\xspace}
\newcommand{\monitor}{monitor\xspace}
\newcommand{\monitors}{monitors\xspace}
\newcommand{\mismonitor}{Mis\-be\-havior\-Monitor\xspace}
\newcommand{\latmonitor}{Latency\-Monitor\xspace}
\newcommand{\susmonitor}{Suspicion\-Monitor\xspace}
\newcommand{\cfgmonitor}{Config\-Monitor\xspace}
\newcommand{\validt}{correct\xspace}
\newcommand{\Validt}{Correct\xspace}

\newcommand{\TMismonitor}{Tree Misbehavior Monitoring\xspace}
\newcommand{\TLatmonitor}{Tree Latency Monitoring\xspace}
\newcommand{\TSusmonitor}{Tree Suspicion Monitoring\xspace}

\newcommand{\tmismonitor}{Tree\-Misbehavior\-Monitor\xspace}
\newcommand{\tlatmonitor}{Tree\-Latency\-Monitor\xspace}
\newcommand{\tsusmonitor}{Tree\-Suspicion\-Monitor\xspace}

\newcommand{\Performancemonitor}{Performance Monitor\xspace}

\newcommand{\application}{application\xspace}
\newcommand{\Application}{Application\xspace}
\newcommand{\Applications}{Applications\xspace}
\newcommand{\applications}{applications\xspace}

\newcommand{\Configsensor}{Configuration \Sensor\xspace}
\newcommand{\configsensor}{configuration \sensor\xspace}

\newcommand{\TCsensor}{Tree Configuration \Sensor\xspace}
\newcommand{\tcsensor}{Tree configuration \sensor\xspace}

\newcommand{\TCmonitor}{Tree Configuration \Monitor\xspace}
\newcommand{\tcmonitor}{Tree configuration \monitor\xspace}

\newcommand{\Firstapp}{Smart\-Com\xspace}
\newcommand{\optitree}{Smart\-Tree\xspace}
\newcommand{\tbc}{$t$-Bounded Conformity\xspace}

\newcommand{\ConfigApp}{Committee Ranking \Application\xspace}
\newcommand{\Configapp}{Committee Ranking \application\xspace}
\newcommand{\configapp}{committee ranking \application\xspace}

\newcommand{\ConfigMonitor}{Configuration \Monitor\xspace}
\newcommand{\Configmonitor}{Configuration \monitor\xspace}
\newcommand{\configmonitor}{configuration \monitor\xspace}

\newcommand{\TreeApp}{Tree Ranking \Application\xspace}
\newcommand{\Treeapp}{Tree Ranking \application\xspace}
\newcommand{\treeapp}{tree ranking \application\xspace}

\newcommand{\TreeOpt}{Tree Selection Optimization\xspace}
\newcommand{\treeopt}{tree selection optimization\xspace}

\newcommand{\bigcell}[2]{
  \begin{tabular}{@{}#1@{}}#2
\end{tabular}}

\newcommand{\oplog}{\ensuremath{\mathit{op}}}
\newcommand{\node}{\ensuremath{\mathit{node}}}
\newcommand{\clusters}{\ensuremath{\mathit{clusters}}}
\newcommand{\ssc}{\ensuremath{\mathit{CS}}}
\newcommand{\cs}{\ensuremath{\mathit{committees}}}
\newcommand{\mll}{\ensuremath{\mathit{minLatency}}}
\newcommand{\bins}{\ensuremath{\mathit{clusters}}}
\newcommand{\bin}{\ensuremath{\mathit{cluster}}}
\newcommand{\trees}{\ensuremath{\mathit{trees}}}
\newcommand{\treeArray}{\ensuremath{\mathit{treeArray}}}
\newcommand{\leafnodes}{\ensuremath{\mathit{leafNodes}}}
\newcommand{\ind}{\ensuremath{\mathit{index}}}
\newcommand{\st}{\ensuremath{\mathit{selectedTrees}}}
\newcommand{\treeset}{\ensuremath{\mathit{TS}}}
\newcommand{\tset}{\ensuremath{\mathit{ts}}}
\newcommand{\tl}{\ensuremath{\mathit{tl}}}

\newcommand{\signed}[2]{\ensuremath{\langle m \rangle_i}}
\newcommand{\score}{\textit{score}\xspace}
\newcommand{\susp}[2]{\ensuremath{#1\!\dashrightarrow\!#2}\xspace}
\newcommand{\susptwo}[2]{\ensuremath{#1\!\dashleftrightarrow\!#2}\xspace}
\newcommand{\suspm}[3]{\ensuremath{\langle \textsc{#1},\ \susp{#2}{#3} \rangle}\xspace}
\newcommand{\latm}[3]{\ensuremath{\langle \textsc{#1},\ \lat{#2}{#3} \rangle}\xspace}
\newcommand{\compm}{\ensuremath{\langle \textsc{Complaint},\ B \rangle}\xspace}
\newcommand{\Cfg}{\ensuremath{\mathit{\Gamma}}}
\newcommand{\cfgm}{\ensuremath{\langle \textsc{Config},\ \Cfg_A \rangle}\xspace}

\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}
\newcommand{\treesym}{\ensuremath{\mathsf{T}}}
\newcommand{\starsym}{\ensuremath{\star}}
\newcommand{\tcond}[1]{\ensuremath{\text{(\treesym#1)}}}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{thm}{Theorem}
\newtheorem{lemma}[thm]{Lemma}
\DeclareMathOperator*{\argmax}{argmax}

\algrenewcommand{\algorithmiccomment}[1]{\hfill$\{$#1$\}$}
\newcommand{\algospacing}{\vspace{.2\baselineskip}}

\algblockdefx[On]{On}{EndOn}
[1]{{\bf On} #1}
{EndOn}
\algnotext{EndOn}

\algsetblockdefx[State]{STate}{ESTate}
{}{0pt}
[1]{{\bf State} #1}
{EndState}
\algnotext{ESTate}

\algblockdefx[Init]{Init}{EInit}
[1]{{\bf init}$(#1)$}
{EndInit}
\algnotext{EInit}

\newcommand{\n}{\ensuremath{\mathit{n}}\xspace}      %
\newcommand{\q}{\ensuremath{\mathit{q}}\xspace}      %
\newcommand{\f}{\ensuremath{\mathit{f}}\xspace}      %
\newcommand{\F}{\ensuremath{\mathit{F}}\xspace}      %
\newcommand{\tn}{\ensuremath{\mathit{t}}\xspace}     %
\newcommand{\bn}{\ensuremath{\mathit{b}}\xspace}     %
\newcommand{\kn}{\ensuremath{\mathit{k}}\xspace}     %
\newcommand{\un}{\ensuremath{\mathit{u}}\xspace}     %
\newcommand{\inn}{\ensuremath{\mathit{i}}\xspace}    %
\newcommand{\views}{\ensuremath{\mathit{v}}\xspace}  %
\newcommand{\winlen}{\ensuremath{\mathit{w}}\xspace} %
\newcommand{\pn}{\ensuremath{\mathit{p}}\xspace}     %

\newcommand{\by}{\ensuremath{\mathit{bz}}\xspace}     %
\newcommand{\crs}{\ensuremath{\mathit{c}}\xspace}     %

\newcommand{\na}{\ensuremath{\mathit{A}}\xspace}     %
\newcommand{\nb}{\ensuremath{\mathit{B}}\xspace}     %
\newcommand{\nc}{\ensuremath{\mathit{C}}\xspace}     %
\newcommand{\nd}{\ensuremath{\mathit{D}}\xspace}     %
\newcommand{\nv}{\ensuremath{\mathit{V}}\xspace}     %
\newcommand{\nr}{\ensuremath{\mathit{R}}\xspace}     %
\newcommand{\nin}{\ensuremath{\mathit{I}}\xspace}    %
\newcommand{\nleaf}[1]{\ensuremath{\mathit{T}_{#1}}\xspace}  %
\newcommand{\nleafT}{\ensuremath{\mathit{T}}\xspace} %
\newcommand{\nl}{\ensuremath{\mathit{L}}\xspace}     %
\newcommand{\naT}{\ensuremath{\mathit{A_t}}\xspace}  %
\newcommand{\nbC}{\ensuremath{\mathit{B_c}}\xspace}  %
\newcommand{\cn}[1]{\ensuremath{\mathit{N}_{#1}}\xspace}  %
\newcommand{\susn}[1]{\ensuremath{\mathit{S}_{#1}}\xspace}  %

\newcommand{\sens}[1]{\ensuremath{\mathsf{S}_{#1}}\xspace}  %
\newcommand{\mons}[1]{\ensuremath{\mathsf{M}_{#1}}\xspace}  %

\newcommand{\timeout}[2]{\ensuremath{\delta\cdot\lme{#1}{#2}}}  %
\newcommand{\viewtimeout}[1]{\ensuremath{\delta\cdot \max_{\nv\in\Pi} \lme{#1}{\nv}}}  %
\newcommand{\df}[1]{\ensuremath{\delta \cdot #1}}               %

\newcommand{\lm}{\ensuremath{\mathbf{L}}\xspace}             %
\newcommand{\lme}[2]{\ensuremath{\mathbf{L}_{#1,#2}}\xspace} %
\newcommand{\sm}{\ensuremath{\mathbf{S}}\xspace}            %
\newcommand{\s}[2]{\ensuremath{\mathbf{S}_{#1,#2}}\xspace}  %

\newcommand{\C}[1]{\ensuremath{\Pi_{#1}}\xspace}             %
\newcommand{\Q}{\ensuremath{\mathcal{Q}}\xspace}             %
\newcommand{\T}{\ensuremath{\mathcal{T}}\xspace}             %
\newcommand{\Crash}{\ensuremath{\mathcal{C}}\xspace}         %
\newcommand{\Internal}{\ensuremath{\mathcal{I}}\xspace}      %
\newcommand{\Leaf}{\ensuremath{\mathcal{L}}\xspace}          %
\newcommand{\Intermediate}{\ensuremath{\mathcal{M}}\xspace}  %
\newcommand{\tree}{\ensuremath{\tau}\xspace}                 %
\newcommand{\IS}{\ensuremath{IS}\xspace}                     %
\newcommand{\Ch}[1]{\ensuremath{\textnormal{Ch}(#1)}\xspace} %
\newcommand{\G}{\ensuremath{\mathcal{G}}\xspace}             %
\newcommand{\V}{\ensuremath{\mathcal{V}}\xspace}             %
\newcommand{\E}{\ensuremath{\mathcal{E}}\xspace}             %
\newcommand{\MG}{\ensuremath{\E_d}\xspace}                   %
\newcommand{\Cand}{\ensuremath{\mathcal{K}}\xspace}          %
\newcommand{\Faulty}{\ensuremath{\mathcal{F}}\xspace}        %

\newcommand{\lat}[3][r]{\ensuremath{\mathit{L_{#1}(#2,#3)}}}     %
\newcommand{\Tlat}[2][\tree]{\ensuremath{\mathit{L_{#1}(#2)}}}   %
\newcommand{\parent}[2][\tree]{\ensuremath{\mathit{P_{#1}(#2)}}} %
\newcommand{\agt}[1]{\ensuremath{\mathit{L_{agg}(#1)}}}          %
\newcommand{\Edges}{\ensuremath{E(\G)}}                          %
\newcommand{\sqn}{\ensuremath{\sqrt{\n}}}                        %

\definecolor{dark-blue}{rgb}{0.18, 0.33, 0.59}
\definecolor{light-blue}{rgb}{0.56, 0.67, 0.86}

\definecolor{dark-red}{rgb}{0.49, 0, 0}
\definecolor{light-red}{rgb}{0.75, 0, 0}

\definecolor{dark-orange}{rgb}{0.77, 0.35, 0.07}
\definecolor{light-orange}{rgb}{0.92, 0.49, 0.19}

\definecolor{dark-yellow}{rgb}{1, 0.75, 0}
\definecolor{light-yellow}{rgb}{1, 0.85, 0.4}

\definecolor{dark-green}{rgb}{0.66, 0.81, 0.56}
\definecolor{light-green}{rgb}{0.77, 0.88, 0.71}

\definecolor{db1}{rgb}{0.08,0.14,0.25}
\definecolor{lb1}{rgb}{0.12,0.22,0.39}

\definecolor{db2}{rgb}{0.23,0.3,0.44}
\definecolor{lb2}{rgb}{0.21,0.32,0.56}

\definecolor{db3}{rgb}{0.29,0.48,0.64}
\definecolor{lb3}{rgb}{0.51,0.58,0.73}

\definecolor{db4}{rgb}{0.55,0.67,0.86}
\definecolor{lb4}{rgb}{0.71,0.78,0.91}

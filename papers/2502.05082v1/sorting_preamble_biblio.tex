\usepackage[doi=false,isbn=false,url=false,
	hyperref=auto,
	sorting=nyt,
	maxnames=10,
	maxcitenames=3,
	backend=biber,
	%	arxiv=pdf,
	texencoding=auto,
	giveninits=true,
	block=space,
%	citestyle=numeric,
%	style=numeric,
]{biblatex}

\renewcommand*{\finentrypunct}{}

%\renewcommand*{\multicitedelim}{\addsemicolon\space}
\renewcommand*{\multicitedelim}{\addcomma\space}

%\usepackage{xpatch}
%\xpatchbibmacro{textcite}{\addspace}{\addnbspace}{}{}
\renewcommand{\namelabeldelim}{\addnbspace}

\DefineBibliographyStrings{english}{%
	andothers = {et al}
} 
 
%\usepackage{filecontents}
%\begin{filecontents*}{ext-eprint.dbx}
%\ProvidesFile{ext-eprint.dbx}[2016/09/11 extended stand-alone eprint fields]
%\DeclareDatamodelFields[type=field,datatype=verbatim]{arxiv,mrnumber}
%\DeclareDatamodelEntryfields{arxiv,mrnumber}
%\end{filecontents*}
%
\DeclareFieldFormat{eprint:arxiv}{%
	\em \href{https://arxiv.org/abs/#1}{arXiv:\allowbreak #1}}

\DeclareFieldFormat{eprint:mrnumber}{%
	\href{http://www.ams.org/mathscinet-getitem?mr=MR#1}{MR\allowbreak #1}}

\DeclareFieldFormat{eprint:jstor}{%
	\href{http://www.jstor.org/stable/#1}{JSTOR\allowbreak #1}}

\DeclareFieldFormat{eprint:customeprint}{%
	\upshape \url{#1}}
%	\em Available online at \upshape \ttfamily \href{https://#1}{#1}}

\DeclareFieldFormat{eprint:inprep}{%
	\em In preparation}

\DeclareFieldFormat{eprint:note}{%
	\em {#1}}

\DeclareFieldFormat{eprint:onarxiv}{%
	\em Available on arXiv}

%\DeclareFieldFormat{eprint:inprep}{%
%	\em In preparation}

\DeclareFieldFormat{eprint:toappear}{%
	\mbox{\em To appear}}

\DeclareSourcemap{
	\maps[datatype=bibtex]{
		\map{
			\step[fieldsource=mrnumber,		fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=mrnumber]
		}
		\map{
			\step[fieldsource=arxiv,		fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=arxiv]
		}
		\map{
			\step[fieldsource=jstor,		fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=jstor]
		}
		\map{
			\step[fieldsource=customeprint,	fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=customeprint]
		}
		\map{
			\step[fieldsource=inprep,		fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=inprep]
		}
		\map{
			\step[fieldsource=note,			fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=note]
		}
		\map{
			\step[fieldsource=onarxiv,		fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=onarxiv]
		}
		\map{
			\step[fieldsource=toappear,		fieldtarget=eprint, final]
			\step[fieldset=eprinttype,		fieldvalue=toappear]
		}
	}
}

\DeclareFieldFormat{doi}{%
	\href{https://doi.org/#1}{DOI}%
}

\DeclareFieldFormat{url}{%
%	\url{#1}%
	\href{https://#1}{\texttt{#1}}%
}


\begin{filecontents}{biblatex-dm.cfg}
	\DeclareDatamodelFields[type=field, datatype=literal, skipout=false]{comments}
%	\DeclareDatamodelFields[type=field, datatype=literal, skipout=false]{thesistype}
\end{filecontents}

\DeclareFieldFormat{comments}{%
	\em #1%
}

%\DeclareFieldFormat{thesistype}{%
%	#1%
%}


%\DeclareSourcemap{
%	\maps[datatype=bibtex]{
%		\map{
%			\step[fieldsource=mrnumber, fieldtarget=eprint, final]
%			\step[fieldset=eprinttype, fieldvalue=mrnumber]
%		}
%	}
%}
%
%\makeatletter
%\DeclareFieldFormat{eprint:arxiv}{%
%	\em Available at \href{https://arxiv.org/abs/#1}{arXiv:#1}}
%\makeatother
%
%\DeclareFieldFormat{eprint:mrnumber}{% based on eprint:jstor
%	\href{http://www.ams.org/mathscinet-getitem?mr=MR#1}{MR#1}} 
 
\DeclareFieldFormat
	[article,inbook,incollection,inproceedings,patent,thesis,unpublished]
	{title}{{#1\isdot}}
%\DeclareFieldFormat
%	[article,book]
%	{volume}{\textbf{#1}}
%\DeclareFieldFormat
%	{pages}{\mkbibparens{#1}}

\DeclareFieldFormat
	[article,book,inbook,incollection,inproceedings,patent,thesis,unpublished, online]
	{date}{\mkbibparens{#1}}
\DeclareFieldFormat
	[article,book,inbook,incollection,inproceedings,patent,thesis,unpublished]
	{volume}{\mkbibbold{#1}}
\DeclareFieldFormat
%	[article,book,inbook,incollection,inproceedings,patent,thesis,unpublished]
	{pages}{\mkbibparens{#1}}

\DeclareFieldFormat{edition}{%
	\ifinteger{#1}
	{\mkbibordedition{#1}~\bibstring{edition}\addcomma}
	{#1~\bibstring{edition}\addcomma}}

\renewbibmacro*{volume+number+eid}{%
	\printfield{volume}%
\setunit*{\adddot}%
	\printfield{number}%
\setunit{\space}%
	\printfield{eid}%
}

%\renewbibmacro*{editor}{%
%	\addspace ed.\ by \printnames{editor}%
%}

\DeclareBibliographyDriver{article}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}%
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}%
\newunit\newblock
	\printfield{journaltitle}\addperiod%
\setunit*{\addspace}%
	\usebibmacro{volume+number+eid}%
\setunit*{\addspace}\newblock
	\printfield{pages}
\setunit*{\addspace}%\newblock
	\printfield{comments}%
	\usebibmacro{eprint}%
\setunit*{\addnbspace}%
	\printfield{doi}%
	\usebibmacro{finentry}%
}

\DeclareBibliographyDriver{online}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}%
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}%
\newunit\newblock
	\usebibmacro{eprint}%
%\setunit{\addspace}%
%	\usebibmacro{urldate}
	\usebibmacro{finentry}%
}

\DeclareBibliographyDriver{book}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}\newblock
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}%
\setunit*{\addspace}\newblock
	\printfield{edition}%
\newunit\newblock
	\printlist{publisher}%\addcomma
\setunit*{\addspace}%
	\printfield{volume}%
%	\printlist{location}
\setunit*{\addspace}\newblock%
	\printfield{comments}%
	\usebibmacro{eprint}%
\setunit*{\addspace}
	\printfield{doi}
	\usebibmacro{finentry}%
}

\DeclareBibliographyDriver{thesis}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}\newblock
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}.%
\setunit*{\addspace}\newblock
	\space Thesis, \printlist{institution}
	\usebibmacro{eprint}%
	\printfield{comments}%
\setunit*{\addspace}
	\printfield{doi}%
	\usebibmacro{finentry}%
}

\DeclareBibliographyDriver{inproceedings}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}%
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}%
\newunit\newblock
	\printfield{booktitle}\addcomma%
\setunit*{\addspace}%
	\printfield{series}\addcomma%
\setunit*{\addspace}\newblock
	\usebibmacro{editor}\addcomma
\setunit*{\addspace}\newblock
	\printlist{publisher}
\setunit*{\addspace}%
	\printfield{volume}%
%	\printlist{location}%
\setunit*{\addspace}%
	\printfield{pages}
\setunit*{\addspace}%\newblock
	\usebibmacro{eprint}%
	\printfield{comments}%
\setunit*{\addnnspace}
	\printfield{doi}
	\usebibmacro{finentry}%
}

\DeclareBibliographyDriver{inbook}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}%
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}%
\newunit\newblock
	\printfield{booktitle}\addcomma%
\setunit*{\addspace}%
	\printfield{series}\addcomma%
\setunit*{\addspace}\newblock
	\usebibmacro{editor}\addcomma
\setunit*{\addspace}\newblock
	\printlist{publisher}%\addcomma%
\setunit*{\addspace}%
	\printfield{volume}%
%	\printlist{location}%
\setunit*{\addspace}%
	\printfield{pages}
\setunit*{\addspace}%\newblock
	\usebibmacro{eprint}%
	\printfield{comments}%
\setunit*{\addspace}
	\printfield{doi}
	\usebibmacro{finentry}%
}

\DeclareBibliographyDriver{incollection}{%
	\usebibmacro{bibindex}%
	\usebibmacro{begentry}%
	\usebibmacro{author}%
\setunit{\addspace}%
	\usebibmacro{date}%
\newunit\newblock
	\usebibmacro{title}%
\newunit\newblock
	\printfield{booktitle}\addcomma%
\setunit*{\addspace}%
%	\usebibmacro{editor}\addcomma%
%\setunit*{\addspace}%
	\printfield{series}\addcomma%
\setunit*{\addspace}\newblock
	\printlist{publisher}%\addcomma%
\setunit*{\addspace}%
	\printfield{volume}%
%	\printlist{location}%
\setunit*{\addspace}%
	\printfield{pages}
\setunit*{\addspace}%\newblock
	\usebibmacro{eprint}%
	\printfield{comments}%
\setunit*{\addspace}
	\printfield{doi}
	\usebibmacro{finentry}%
}

\AtEveryBibitem{%
	\clearfield{day}%
	\clearfield{month}%
%	\clearfield{volume}%
%	\clearfield{issue}
} 
 
%% lastname, firstname // small caps

%\DeclareNameAlias{sortname}{family-given}
%\DeclareNameAlias{default}{family-given}

%\renewcommand{\mkbibnamefamily}[1]{\textsc{#1}}
%\renewcommand{\mkbibnamegiven} [1]{\textsc{#1}}
%\renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
%\renewcommand{\mkbibnamesuffix}[1]{\textsc{#1}}


%%% firstname lastname // normal font
%
\DeclareNameAlias{sortname}{given-family}
\DeclareNameAlias{default}{given-family}

%\renewcommand{\mkbibnamefamily}[1]{\textnormal{#1}}
%\renewcommand{\mkbibnamegiven} [1]{\textnormal{#1}}
%\renewcommand{\mkbibnameprefix}[1]{\textnormal{#1}}
%\renewcommand{\mkbibnamesuffix}[1]{\textnormal{#1}}

%\renewcommand{\mkbibnamefamily}[1]{\emph{#1}}
%\renewcommand{\mkbibnamegiven} [1]{\emph{#1}}
%\renewcommand{\mkbibnameprefix}[1]{\emph{#1}}
%\renewcommand{\mkbibnamesuffix}[1]{\emph{#1}} 
 

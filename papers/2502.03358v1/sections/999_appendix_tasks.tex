\section{Test Templates}
\label{apd:prompt_example}
In this appendix, we provide the templates of the test prompts. Placeholder context words such as "aaa, bbb, ccc," etc., are used for illustration purposes. During testing, these context words are uniformly sampled from an English dictionary. Variable tokens in the instruction part are marked with the \textbf{bold} font.

\begin{longtable}{p{3cm}p{12cm}}
        \toprule
        \multicolumn{2}{c}{\textbf{Search} } \\
        \midrule
         Task name & Prompt  \\
         \midrule
         String search (with word) & \textit{Context:}
         
         aaa, bbb, ccc, ...
         
         \textit{Instruction:}
         
         Given the context, determine if the word ``\textbf{bbb}" is present in the context. Answer with ``yes'' or `no''.
         
         Answer: \\
         
         \midrule
         String search (with subsequence) & \textit{Context:}
         
         aaa, bbb, ccc, ...
         
         \textit{Instruction:}
         
         Given the list of words in the context, determine if the sequence ``\textbf{bbb, xxx, ddd}'' appears in the context. Answer with 'yes' or 'no'.
         
         Answer: \\
         
         \midrule
         
         Key-value search & \textit{Context:} 
         
         aaa:bbb, ccc:ddd, ...
         
         \textit{Instruction:}
         
         Given a list of word pairs formatted as ``word\_1: word\_2'' in the context, return the second word associated with the provided first word. For the first word ``\textbf{aaa}'', the corresponding second word is:\\
         \midrule
         Batch search & \textit{Context: }
         
         aaa:bbb, ccc:ddd, ...
         
        \textit{Instruction:}
         
         Given a list of word pairs formatted as ``word\_1: word\_2'' in the context, return the second word associated with the provided first words. For the first words: \textbf{aaa, ccc, ...}, the corresponding second words are:\\
        \bottomrule
        \toprule
        
        \multicolumn{2}{c}{\textbf{Recall and Edit} } \\
        \midrule
         Task name & Prompt  \\
        \midrule
        Snapshot & \textit{Context:}
        
        aaa, bbb, ccc, ...
        
        \textit{Instruction:}
        
        Repeat the previous context exactly as it is, without making any additions or deletions.
        
        Answer:\\
        \midrule

        Replace all (x to y) & \textit{Context:}

        aaa, bbb, aaa, ccc, aaa, ddd, ...

        \textit{Instruction:}
        
        Repeat the previous context and replace the word ``\textbf{aaa}'' with ``\textbf{zzz}'' each time it appears.
        
        Answer: \\
        \midrule
        Replace all (x to null) & \textit{Context:}

        aaa, bbb, aaa, ccc, aaa, ddd, ...

        \textit{Instruction:}
        
        Repeat the previous context but skip the word ``\textbf{aaa}'' each time it appears.
        
        Answer: \\
        \midrule
        Overwrite positions (nth to y) & \textit{Context:}

        aaa, bbb, ccc, ...
        
        \textit{Instruction}:
        
        Repeat the previous context and replace every \textbf{third} word with ``zzz''.
        
        Answer: \\
        \midrule
        Overwrite positions (nth to null) & \textit{Context:}

        aaa, bbb, ccc, ...
        
        \textit{Instruction}:
        
        Repeat the previous context and skip every \textbf{other} word.
        
        Answer: \\
        \midrule

        Functional updates & \textit{Context:}

        111, 222, 333, ...
        
        
        \textit{Instruction:}
        
        \textbf{Add 3} to every number in the previous context.
        
        Answer: \\
        \bottomrule
        \toprule
        \multicolumn{2}{c}{\textbf{Match and Compare} } \\
        \midrule
         Task name & Prompt  \\
        \midrule

        Compare positions & \textit{Context}:
        
        aaa, bbb, ccc, ...
        
        \textit{Instruction}:
        
        Given the list of words in the context, determine the relative positions of two words. Does the word ``\textbf{aaa}'' appear before the word ``\textbf{ccc}'' in the list? Answer ``yes'' or ``no''.
        
        Answer: \\

        \midrule

        Find duplicates & \textit{Context}:
        
        aaa, bbb, aaa, ...
        
        \textit{Instruction}:
        
        A word is repeated multiple times in the context. Your task is to identify the word that is repeated.
        
        The repeated word is: \\

        \midrule

        Count & \textit{Context}:
        
        aaa, bbb, aaa, ...
        
        \textit{Instruction}: 
        
        Count the number of times the word ``\textbf{aaa}'' appeared in the context.
        
        Answer: The word ``\textbf{aaa}'' appeared \\

         \midrule

        Check association & \textit{Context}:
               
        aaa:attribute 1, bbb:attribute 2, ccc: attribute 2, ddd: attribute 1, ...

        \textit{Instruction}:

        Given the list of words and their respective attributes in the format of ``word:attribute'', determine if the word ``\textbf{aaa}'' and the word ``\textbf{ggg}'' have the same attribute. Answer with ``yes'' or ``no''.

        Answer: \\

        \bottomrule
        \toprule
        \multicolumn{2}{c}{\textbf{Spot the Differences} } \\
        \midrule
         Task name & Prompt  \\
        \midrule

        Compare two lists & \textit{Context}:
        
        List 1: aaa, bbb, ccc, ...
        
        List 2: aaa, ddd, ccc, ...
        
        \textit{Instruction}: 
        
        There are two lists of words in the context. The first list contains the original words. The second list is similar to the first but has some words replaced with different ones. Your task is to identify the words in the \textbf{first/second} list that are different from those in the other list. Provide the different words as your answer.
        
        Answer: \\

        \midrule

        Identify the odd group & \textit{Context}:
        
        List 1: aaa, bbb, ccc, ...
        
        List 2: bbb, aaa, ccc, ...
        
        List 3: aaa, zzz, ccc, ...
        
        List 4: ccc, aaa, bbb, ...
        
        \textit{Instruction}:
        
        Given the lists of words in the context, identify the list that is different from the others. Provide the list number as your answer. For example, if the Nth list is different, provide "List N" as your answer.
        
        Answer: \\
        \midrule
        Patch the difference & \textit{Context}:
        
        aaa, bbb, ccc, aaa, bbb, ccc, ...
        
        \textit{Instruction}: 
        
        Given the sequence of words that follows a specific pattern in the context, predict the \textbf{Nth} word that appears after the final word in the given sequence.
        
        Answer: The \textbf{Nth} word that appears after the final word in the given sequence is\\

        \bottomrule
        \toprule

        \multicolumn{2}{c}{\textbf{Compute on Sets and Lists} } \\
        \midrule
         Task name & Prompt  \\
        \midrule

        Group membership & \textit{Context}:
        
        List 1: aaa, bbb, ccc, ...\newline
        List 2: ddd, eee, fff, ...\newline
        ...
        
        \textit{Instruction}:
        
        Given the lists of words in the context, determine which list contains the word ``\textbf{fff}". If the word is not present in either list, answer ``no".
        
        Answer:\\

       
        \midrule
        Group association & \textit{Context}:
        
        List 1: aaa, bbb, ccc, ...\newline
        List 2: ddd, eee, fff, ...\newline
        ...
        
        \textit{Instruction}:
        
        Given the lists of words in the context, determine if the word ``\textbf{aaa}'' and the word ``\textbf{eee}'' are in the same list. Answer with ``yes'' or ``no''.

        Answer: \\
        \midrule

        Group association (alternating) & Context:

        Role A: aaa, bbb, ...\newline
        Role B: ccc, ddd, ...\newline
        Role A: eee, fff, ...\newline
        Role B: ggg, hhh, ...\newline
        ...

        Instruction:

        Given the context with alternating roles and their respective context words, determine if the word ``\textbf{aaa}'' and the word ``\textbf{ggg}'' are in the same role. Answer with ``yes'' or ``no''.

        Answer:\\

        \midrule
        Iterate & \textit{Context}:
        
        List 1: aaa, bbb, ccc, ...\newline
        List 2: ddd, eee, fff, ...\newline
        ...
        
        \textit{Instruction}:
        
        Given the lists of words in the context, identify and recall the \textbf{last} word from each list. Provide your answer as a list of these words separated by commas. \\
        & Answer:
        \\
 
        \bottomrule
        \toprule

        \multicolumn{2}{c}{\textbf{Stateful Processing} } \\
        \midrule
         Task name & Prompt  \\

        \midrule
        Quantity state & \textit{Context}:
        
        Begin with the number xx. Perform the following operations:\newline
        1. Add xx
        2. Subtract xx
        3. ...
    
        \textit{Instruction}:
        
        In the context, you are given an initial number and a series of operations to perform on that number. Your task is to determine the final result of the operations. Write your final answer after the text "FINAL ANSWER:". For example, "FINAL ANSWER: 42".
        
        FINAL ANSWER:\\ 
        \midrule
        Quantity & \textit{Agent actions}:
        
        Agent draws aaa, bbb, ccc\newline
        Agent discards bbb, ccc\newline
        Agent draws ddd, fff\newline
        Agent discards ddd\newline
        ...

        \textit{Instruction}:
        
        Given the actions of the agent, your task is to determine the final list of words the agent ends up with after a series of actions. Write your final answer after the text ``FINAL ANSWER:". For example, ``FINAL ANSWER: word1, word2, word3".
        
        FINAL ANSWER:\\
       
        \bottomrule

        \toprule
        \multicolumn{2}{c}{\textbf{Processing Data Blocks} } \\
        \midrule
         Task name & Prompt  \\
        \midrule
        Processing Data Blocks & \textit{Context}:
        
        Role 1: aaa, bbb, ccc, ...\newline
        Role 2: ddd, eee, fff, ...\newline
        Role 3: ggg, hhh, iii, ... \newline
        Role 1: jjj, kkk, ... \newline
        ...
        
        \textit{Instruction}:
        
        The context consists of a series of alternating roles, each associated with a list of words. Your task is to identify and recall all the words from the role labeled ``{\textbf{Role 2}}" that appear after the word ``{\textbf{zzz}}" in the sequence. Please write your answer after the text ``Answer:". For example, ``Answer: word1, word2, word3".
        
        Answer:\\
        \bottomrule
        \toprule
        \multicolumn{2}{c}{\textbf{Composite-State Tracking (Theory of Mind)} } \\
        \midrule
         Task name & Prompt  \\
        \midrule
        Theory of Mind & \textit{Agents actions:}:
        
        Agent A starts with the following words: aaa, bbb, ccc, ...\newline
        Agent B starts with the following words: ddd, eee, fff, ...\newline
        Agent B starts with the following words: ggg, hhh, iii, ...\newline
        Agent B swaps the following words ``ddd" with Agent C for the following words ``hhh". \newline
        Agent A discards the following words: ccc, zzz, .... \newline
        Agent C draws the following words: xxx, yyy, .... \newline
        ...
        
        \textit{Instruction}:
        
        Given the actions of the agents, your task is to determine the final list of words each agent ends up with after a series of actions. Write your final answer after the text "FINAL ANSWER:". For example, "FINAL ANSWER: Agent A: word1, word2, word3\textbackslash nAgent B: word4, word5".
        
        FINAL ANSWER:\\
        \bottomrule
        
    \label{tab:level1}
\end{longtable}

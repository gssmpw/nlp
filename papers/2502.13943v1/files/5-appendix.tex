
\clearpage
\section{Appendix}

\subsection{feature statistic}
\label{app:feature_statistic}

In this part, we present the statistics of the decision token types in our dataset. Table~\ref{tab:Math_Mistral_confused_proportion} and Table~\ref{tab:Math_Llama_confused_proportion} shows the statistical information of the math data, and Table~\ref{tab:Code_confused_proportion} shows that of the code. 
We adopt en\textunderscore core\textunderscore web\textunderscore sm model from Spacy library as tokenizer and POS tagger to make statistics. We show the cases for types of tokens in Appendix~\ref{app:case_study}.

\subsection{Dataset Information Statistic}
\label{app:dataset_statistic}

In Figure~\ref{fig:statistic-information}, we report the statistical information of math training data for our dataset and ER-PRM, Math-Shepherd, PRM800K\protect\footnotemark[2]. In Figure~\ref{fig:statistic-information-bon}, we show the statistical information for our math BoN candidates.

\subsection{Case Study}
\label{app:case_study}


\footnotetext[2]{Same to~\cite{wang2024mathshepherdverifyreinforcellms}, We counted the number of samples for PRM800K and is a quarter of that of Math-Shepherd. }


\begin{table*}[htbp]
  \caption{MetaMath-Mistral generated data statistic results: percentage of tokens types and percentage of decision tokens types for math domain. \textbf{Natural Sentence} stands for a piece of text separated by a \textit{New line break} or \textit{Punctuation} like Period and Question Mark. \textbf{Reasoning} represents \textit{symbolic reasoning} or \textit{Math Formula}; \textbf{Entity} represents \textit{Noun} like apple or personal name; \textbf{Semantics} represents \textit{Conjunction}, \textit{Verb} and \textit{Determiner}. We also find that there are few word level splits represented by \textbf{Split Word}; we retained these segmentation points to enhance the model's generalization at these points during PRM training.}
    \noindent 
    \begin{minipage}{\textwidth}
    
   
   \setlength{\abovecaptionskip}{7pt}
   
   \vspace{-0.05in}
   
   \setlength{\cmidrulewidth}{0.01em}
   \renewcommand{\tabcolsep}{10pt}
   \renewcommand{\arraystretch}{1.2}
   \centering
   
   \begin{tabular}{cl|cc}
   
   \toprule
        \multirow{2}{*}{Categories} & \hspace{2.0em}\multirow{2}{*}{Subtypes} & \multicolumn{2}{c}{Position}\\
        \cmidrule[\cmidrulewidth](lr){3-4}
          && Token type proportion (78m) & decision token proportion (1517k)\\
         \midrule
         \multirow{2}{*}{Natural Sentence} &
          \vline \hspace{0.7em} New line break  & 3.85\% & 2.70\% \\
         & \raisebox{0pt}[0.3cm][0pt]{\rule{0.5pt}{1cm}}\hspace{1.4em} Punctuation  & 26.92\% & 4.61\% \\

         
         \multirow{2}{*}{Reasoning} & \vline \hspace{0.1em} Symbolic Reasoning  & 15.39\% & 6.79\% \\

         & \vline \hspace{0.8em} Math Formula &  3.85\% & 21.03\% \\
        
        
         \multirow{1}{*}{Entity}&  \hspace{2.7em} Noun & 15.38\% & 11.01\% \\

        
         \multirow{3}{*}{Semantics}& \vline \hspace{1.4em} Conjunction & 20.51\% & 29.00\% \\
         & \vline \hspace{2.8em} Verb & 6.41\% & 5.34\% \\
         & \raisebox{0pt}[0.3cm][0pt]{\rule{0.5pt}{1cm}} \hspace{1.5em} Determiner & 7.69\% & 2.64\% \\
         
         \bottomrule
   \end{tabular}
   

  \label{tab:Math_Mistral_confused_proportion}
    \end{minipage}
\end{table*}


\clearpage


\begin{table*}[htbp]
   
  \caption{Proportion of decision tokens in the original data of the same type for math domain generated by MetaMath-Llama.}
    \noindent 
    \begin{minipage}{\textwidth}
    
   
   \setlength{\abovecaptionskip}{7pt}
   
   % \label{tab:sg_blocks}
   \vspace{-0.05in}
   
   \setlength{\cmidrulewidth}{0.01em}
   \renewcommand{\tabcolsep}{10pt}
   \renewcommand{\arraystretch}{1.2}
   \centering
   
    \begin{tabular}{cl|cc}
   
   \toprule
        \multirow{2}{*}{Categories} & \hspace{2.0em}\multirow{2}{*}{Subtypes} & \multicolumn{2}{c}{Position}\\
        \cmidrule[\cmidrulewidth](lr){3-4}
          && Token type proportion (81m) & decision token proportion (1413k)\\
         \midrule
         \multirow{2}{*}{Natural Sentence} &
          \vline \hspace{0.7em} New line break  & 2.47\% & 6.69\% \\
         & \raisebox{0pt}[0.3cm][0pt]{\rule{0.5pt}{1cm}}\hspace{1.4em} Punctuation  &  28.40\% & 14.91\% \\

         
         \multirow{2}{*}{Reasoning} & \vline \hspace{0.1em} Symbolic Reasoning & 16.05\% & 5.66\% \\

         & \vline \hspace{0.8em} Math Formula &   3.7\% & 20.24\% \\
        
        
         \multirow{1}{*}{Entity}&  \hspace{2.7em} Noun &  14.82\% & 7.35\% \\

        
         \multirow{3}{*}{Semantics}& \vline \hspace{1.4em} Conjunction &  20.99\% & 23.48\% \\
         & \vline \hspace{2.8em} Verb &  6.17\% & 5.24\% \\
         & \raisebox{0pt}[0.3cm][0pt]{\rule{0.5pt}{1cm}} \hspace{1.5em} Determiner &  7.4\% & 2.99\% \\
         
         
         \bottomrule
   \end{tabular}

  \label{tab:Math_Llama_confused_proportion}
    \end{minipage}
\end{table*}



\begin{table*}[htbp]
  \caption{Proportion of decision tokens in the original data of the same type for code domain}

    \begin{minipage}{\textwidth}
    
   \setlength{\abovecaptionskip}{7pt}
   \setlength{\cmidrulewidth}{0.01em}
   \renewcommand{\tabcolsep}{10pt}
   \renewcommand{\arraystretch}{1.2}
   \begin{tabular}{cl|ccc}
   
   \toprule
        \multirow{2}{*}{Categories} & \hspace{2em}\multirow{2}{*}{Subtypes} & \multicolumn{2}{c}{Position}\\
        \cmidrule[\cmidrulewidth](lr){3-4}
          & & \hspace{0.2em}Token type proportion (17m) &\hspace{1.0em}decision token proportion (47k)\\
         \midrule
         \multirow{2}{*}{Syntax Symbol} &
          \vline \hspace{0.4em} New line break  & 6.99\% & 11.79\% \\
         & \vline \hspace{0.5em} Space Character  & 77.58\% & 1.60\% \\
             

        \multirow{1}{*}{Numbers}& \hspace{2.0em} Number & 4.21\% & 0.84\% \\
        
         \multirow{2}{*}{Logical Operators} &
        \vline \hspace{0.3em} Boolean Operators  & 0.26\% & 3.21\% \\
        & \vline \hspace{0em}Arithmetic Operators & 2.04\% & 3.54\% \\
        
        
        \multirow{1}{*}{Definition} & \hspace{1.5em} Def / Class & 0.53\% & 1.82\% \\
      
         \multirow{1}{*}{Import Statement}& \hspace{0.8em} From / Import & 0.58\% & 0.76\% \\

         \multirow{3}{*}{Function}& \vline \hspace{0.6em} Type Defination & 0.16\% & 0.48\% \\
         & \vline \hspace{0.5em} Build-in Function & 0.49\% & 0.77\% \\
         & \vline \hspace{0.8em} Instance Method & 0.09\% & 0.26\% \\
         
         \multirow{1}{*}{Control Statements} & \hspace{1.3em} If / Else / Elif &  0.64\% & 3.51\% \\
        

        \multirow{1}{*}{Loop Statements} & \hspace{1.8em} For / While &  0.62\% & 1.73\% \\
         
         \multirow{2}{*}{Others} & \vline\hspace{2.2em} Return  & 0.68\% & 0.58\% \\
        & \vline \hspace{0.2em} Punctuation Mark  & 4.99\% & 6.52\% \\
         
         \bottomrule
   \end{tabular}
   

  \label{tab:Code_confused_proportion}
    \end{minipage}
\end{table*}




\begin{table*}
 \caption{Proportion of decision tokens in Code and Code Comment}
  \centering
  \begin{tabular}{c|ccc}
    \hline
    Categories & Trigger type(234k) & Token type (17m) & Line number(1599k) \\
    \hline
    Code & 47k (19.95\%) & 4m (26.15\%) & 1280k(80.02\%)     \\
    Code comment & 187k (80.05\%) & 13m (73.85\%) & 319k(19.98\%)   \\
    \hline
  \end{tabular}
 
  \label{tab:code_and_comments}
\end{table*}

\begin{table*}[htbp]
  \caption{Samples of decision tokens for math domain.}
    \noindent
    \begin{minipage}{\textwidth}
   \setlength{\abovecaptionskip}{7pt}
   \vspace{-0.05in}
   \setlength{\cmidrulewidth}{0.01em}
   \renewcommand{\tabcolsep}{10pt}
   \renewcommand{\arraystretch}{1.2}
   \centering
   \begin{tabular}{cl|c@{}}
   
   \toprule
        \multirow{1}{*}{Categories} & \hspace{2.0em}\multirow{1}{*}{Subtypes} & Sample\\
         \midrule
         \multirow{2}{*}{Sentence} &
         \vline\hspace{0.9em} New line break &  works on 4 of them each day.\textcolor{red}{\textbackslash \textbf{n}}After 5 days,\\
         & \vline\hspace{1.4em} Punctuation & If Billie has 18 crayons\textcolor{red}{\textbf{,}} and Bobbie has three times\\
         
         \multirow{2}{*}{Reasoning} & \hspace{0.8em} Text reasoning & gives them \textcolor{red}{\textbf{3}} points. So in total, Joe's team has 3 + 3 = 6\\
         
         & \hspace{1.0em} Math formula & so x \textcolor{red}{\textbf{+}} 4x - 10 = 25\\
         

         \multirow{1}{*}{Entity}& \hspace{2.7em} Noun & Ron gets to pick a new \textcolor{red}{\textbf{book}} 1 out of 13\\
         
         \multirow{3}{*}{Semantics}& \vline \hspace{1.4em} Conjunction & their ages is 34, \textcolor{red}{\textbf{so}} we can write the equation L + (L + 4) = 34.\\
         & \vline \hspace{2.8em} Verb & In 14 days, each dog will \textcolor{red}{\textbf{eat}} 250 grams/day\\
         & \vline \hspace{1.5em} Determiner & we can round \textcolor{red}{\textbf{this}} to the nearest whole number. \\
         
         \bottomrule
   \end{tabular}
   

  \label{tab:Math_confused_samples}
    \end{minipage}
\end{table*}

\begin{table*}[htbp]
  \caption{Samples of decision tokens for code domain}
    \noindent 

    \begin{minipage}{\textwidth}
    
   \setlength{\abovecaptionskip}{7pt}
   \setlength{\cmidrulewidth}{0.01em}
   \renewcommand{\tabcolsep}{10pt}
   \renewcommand{\arraystretch}{1.2}
   \centering
   \begin{tabular}{cl|c}
   
   \toprule
        Categories & \hspace{2.3em}Subtypes & Sample\\
        
         \midrule
         \multirow{2}{*}{Syntax Symbol} &
          \vline \hspace{0.9em} New line break  & \textcolor{red}{\textbackslash n} i += num\_bytes \\
         & \vline \hspace{0.8em} Space Character & dp[i][j] += dp[i - 1][j] * (j - k) \textcolor{red}{\textbackslash \textbf{s}} \\
             

        \multirow{1}{*}{Numbers}& \hspace{2.0em} Number & j = (target - x * \textcolor{red}{\textbf{2}}) // 2\\
        
         \multirow{2}{*}{Logical Operators} &
        \vline \hspace{0.3em} Boolean Operators & if c in count \textcolor{red}{\textbf{and}} c != a:\\
        & \vline \hspace{0em}Arithmetic Operators & dp = [[0] * (n\textcolor{red}{\textbf{+}}1) for \_ in range(n+1)]\\
         \multirow{2}{*}{Definition} & \hspace{2.8em} Def & \textcolor{red}{\textbf{def}} is\_valid(r, c):\\
         & \hspace{2.8em}Class & \textcolor{red}{\textbf{class}} Solution:\\
         \multirow{2}{*}{Import Statement}& \hspace{2.7em} From &\textcolor{red}{\textbf{from}} collections import defaultdict \\
         & \hspace{2.3em} Import & \textcolor{red}{\textbf{import}} collections\\
         \multirow{3}{*}{Function}& \vline \hspace{1.0em} Type Defination & for size in \textcolor{red}{\textbf{list}}(dp[curr\_sum]):\\
         & \vline \hspace{0.8em} Build-in Function & if \textcolor{red}{\textbf{abs}}(next\_count + 1) > 0:\\
         & \vline \hspace{0.8em} Instance Method & \textcolor{red}{\textbf{self}}.count = 0\\
         
         \multirow{3}{*}{Control Statements} & \hspace{3.5em} If & \textcolor{red}{\textbf{if}} len(tokens) < 4:\\
         &\hspace{3.3em}Else & \textcolor{red}{\textbf{else}}:\\
         & \hspace{3.3em}Elif & \textcolor{red}{\textbf{elif}} level == 0 and expression[i] == ' ':\\
        \multirow{2}{*}{Loop Statements} & \hspace{3.1em} For & \textcolor{red}{for} i in range(len(fronts)):\\
         & \hspace{2.7em} While & \textcolor{red}{\textbf{while}} x != self.parent[x]:\\
         \multirow{2}{*}{Others} & \vline\hspace{2.2em} Return & \textcolor{red}{\textbf{return}} (merged[n // 2 - 1] + merged[n // 2]) / 2.0\\
        & \vline \hspace{0.2em} Punctuation Mark  & digit\_sum = \textcolor{red}{\textbf{(}}l1.val if l1 else 0) + (l2.val if l2 else 0)\\
         
         \bottomrule
   \end{tabular}
   
  \label{tab:Code_confused_samples}
    \end{minipage}
\end{table*}




\begin{figure*}[htbp]
    \centering
    \begin{minipage}[b]{0.48\textwidth}
        \centering
        \includegraphics[width=\textwidth]{files/figures/figure-datasets-steps.pdf} 
        \subcaption{}\label{fig:datasets-average-step}
    \end{minipage}%
    \hfill
    \begin{minipage}[b]{0.48\textwidth}
        \centering
        \includegraphics[width=\textwidth]{files/figures/figure-datasets-samples.pdf} 
        \subcaption{}\label{fig:datasets-sample-number}
    \end{minipage}%
    \hfill
    \begin{minipage}[b]{0.48\textwidth}
        \centering
        \includegraphics[width=\textwidth]{files/figures/figure-datasets-tokens.pdf} 
        \subcaption{}\label{fig:datasets-tokens-per-step}
    \end{minipage}%
    \hfill
    \begin{minipage}[b]{0.48\textwidth}
        \centering
        \includegraphics[width=\textwidth]{files/figures/figure-datasets-length.pdf} 
        \subcaption{}\label{fig:datasets-tokens-per-sample}
    \end{minipage}%
    \hfill
    \caption{Statistic Information of our math dataset, Ours-M represents data constructed by Mistral, and Ours-L represents data constructed by Llama. ER-PRM, Math-Shepherd (M-S), PRM800K. (a): Average step; (b): Sample number; (c): Average tokens per reasoning step; (d): Sample length. We use a Mistral tokenizer for statistics.}
    \label{fig:statistic-information}
\end{figure*}


\begin{figure*}[htbp]
    \centering
    \begin{minipage}[b]{0.48\textwidth}
        \centering
        \includegraphics[width=\textwidth]{files/figures/figure-bon-mistral.pdf} 
        \subcaption{}\label{fig:eval-datasets-mistral-length}
    \end{minipage}%
    \hfill
    \begin{minipage}[b]{0.48\textwidth}
        \centering
        \includegraphics[width=\textwidth]{files/figures/figure-bon-Llama.pdf} 
        \subcaption{}\label{fig:eval-datasets-llama-length}
    \end{minipage}%
    \caption{Statistic Information of our BoN dataset (a): Statistic with Mistral tokenizer; (b): Statistic with Llama tokenizer.}
    \label{fig:statistic-information-bon}
\end{figure*}


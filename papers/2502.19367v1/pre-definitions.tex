% Sets
\newcommand{\Set}[1]{\mathscr{#1}}

% All indices
\newcommand{\All}{\emph{:}}

% Matrix special superscripts
\newcommand{\Tra}{^{{\sf T}}} % transpose
\newcommand{\Inv}{^{-1}} % inverse
\newcommand{\Tin}{^{-{\sf T}}} % transpose inverse
\newcommand{\Pin}{^{\dagger}} % pseudo-inverse
\newcommand{\Tpi}{^{\ddagger}} % transpose pseudo-inverse
\newcommand{\VC}[1]{{{\sf vec} {\left(#1 \right)}}} % vec
% Vectors
\newcommand{\V}[1]{{\bm{\mathbf{\MakeLowercase{#1}}}}} % vector
\newcommand{\Vhat}[1]{{\bm \hat{\mathbf{\MakeLowercase{#1}}}}} % vector
\newcommand{\Vbar}[1]{{\bm \bar{\mathbf{\MakeLowercase{#1}}}}} % vector
\newcommand{\VE}[2]{\MakeLowercase{#1}_{#2}} % vector element
\newcommand{\VEP}[2]{\left( #1 \right)_{#2}} % vector element with parens
\newcommand{\Vn}[2]{\V{#1}^{(#2)}} % n-th vector
\newcommand{\Vbarn}[2]{\Vbar{#1}^{(#2)}} % n-th vector
\newcommand{\VnE}[3]{\MakeLowercase{#1}^{(#2)}_{#3}} % n-th vector element
\newcommand{\VnTra}[2]{\V{#1}^{(#2){{\sf T}}}} % n-th matrix transpose

% Vector operations
\newcommand{\Oprod}{\circ} % outer product

% Matrices
\newcommand{\M}[1]{{\bm{\mathbf{\MakeUppercase{#1}}}}} % matrix
\newcommand{\Mhat}[1]{{\bm{\hat \mathbf{\MakeUppercase{#1}}}}} % matrix
\newcommand{\Mbar}[1]{{\bm{\bar \mathbf{\MakeUppercase{#1}}}}} % matrix
\newcommand{\ME}[2]{\MakeLowercase{#1}_{#2}} % matrix element
\newcommand{\MEP}[2]{\left( #1 \right)_{#2}} % matrix element with parens
\newcommand{\MC}[2]{\V{#1}_{#2}} % matrix column
\newcommand{\MhatC}[2]{\Vhat{#1}_{#2}} % matrix column
\newcommand{\MbarC}[2]{\Vbar{#1}_{#2}} % matrix column
\newcommand{\MCP}[2]{\left( #1 \right)_{#2}} % matrix column with parens
\newcommand{\MR}[2]{\V{#1}_{#2 \All}} % matrix row
\newcommand{\MRP}[2]{\left( #1 \right)_{#2 \All}} % matrix row with parens
\newcommand{\Mn}[2]{\M{#1}^{(#2)}} % n-th matrix
\newcommand{\Mbarn}[2]{\Mbar{#1}^{(#2)}} % n-th matrix
\newcommand{\MnTra}[2]{\M{#1}^{(#2){{\sf T}}}} % n-th matrix transpose
\newcommand{\MnE}[3]{\MakeLowercase{#1}^{(#2)}_{#3}} % n-th matrix element
\newcommand{\MnC}[3]{\V{#1}^{(#2)}_{#3}} % n-th matrix column
\newcommand{\MbarnC}[3]{\Vbar{#1}^{(#2)}_{#3}} % n-th matrix column
\newcommand{\MnCTra}[3]{\V{#1}^{(#2){{\sf T}}}_{#3}} % n-th matrix column transpose
\newcommand{\MCTra}[2]{\V{#1}^{{\sf T}}_{#2}} % n-th matrix column transpose


% Matrix-matrix operations
\newcommand{\Kron}{\otimes} %Kronecker
\newcommand{\Khat}{\odot} %Khatri-Rao
\newcommand{\Hada}{\ast} %Hadamard

% Tensors
\newcommand{\T}[1]{\boldsymbol{\mathscr{\MakeUppercase{#1}}}} %tensor
\newcommand{\That}[1]{\boldsymbol{\hat \mathscr{\MakeUppercase{#1}}}} %tensor
\newcommand{\Tbar}[1]{\boldsymbol{\bar \mathscr{\MakeUppercase{#1}}}} %tensor
\newcommand{\TFS}[2]{\M{#1}_{{#2}}} % tensor frontal slice
\newcommand{\TS}[2]{\M{#1}_{{#2}}} % tensor slice
\newcommand{\TSP}[2]{\left( #1 \right)_{{#2}}} % tensor slice with parens
\newcommand{\TM}[2]{\M{#1}_{(#2)}} % matricized tensor
\newcommand{\TMP}[2]{\left( #1 \right)_{(#2)}} % matricized tensor with parens
\newcommand{\TF}[2]{\V{#1}_{#2}} % tensor fiber
\newcommand{\TE}[2]{\MakeLowercase{#1}_{#2}} % tensor element
\newcommand{\TEP}[2]{\left( #1 \right)_{#2}} % tensor element with parens
\newcommand{\TEbar}[2]{\bar {\MakeLowercase{#1}}_{#2}}  % tensor element
% Matricize
\newcommand{\Mz}[2]{\TM{#1}{#2}} % n-th mode matricize
\newcommand{\Mzsets}[3]{\TM{#1}{#2\times#3}} % matricze with just the sets specified
\newcommand{\Mzall}[4]{\TM{#1}{#2\times#3\,:\,#4}} % full matricize specification

% Vectorize
\newcommand{\Vz}[1]{{\rm vec}(\T{#1})} %vectorized tensor
\newcommand{\VzP}[1]{{\rm vec}\left( {#1} \right)} %vectorize *anything* with parens

% Tensor mode-n multiply
\newcommand{\Xn}[1]{\times_{#1}}
%\newcommand{\Xnvec}[1]{\;\bar\times_{#1}\;}
%\newcommand{\Xnvec}[1]{\bullet_{#1}}
\newcommand{\Xnvec}[1]{\times_{#1}}
\newcommand{\Xnvecop}{\mathop{\text{\XSolid}}}


% New operator to express the models
\newcommand{\TOp}[2]{\llbracket  #1 \; ; #2 \rrbracket} % tucker operator
\newcommand{\KOp}[1]{\llbracket #1 \rrbracket} % kruskal operator

% Sizes
\newcommand{\SizeN}[2]{{#1}_1 \times {#1}_2 \times \cdots \times {#1}_{#2}}
\newcommand{\SizeR}[4]{{#1}_1 \times \cdots %
  \times {#1}_{#3-1} \times {#4} \times {#1}_{#3+1} \times \cdots %
  \times {#1}_{#2}}
\newcommand{\SizeD}[3]{{#1}_1 \times \cdots %
  \times {#1}_{#3-1} \times {#1}_{#3+1} \times \cdots %
  \times {#1}_{#2}}

% Subscript
\newcommand{\SubscriptN}[2]{{#1}_1 {#1}_2 \cdots {#1}_{#2}}
\newcommand{\SubscriptR}[4]{{#1}_1 \cdots %
  {#1}_{#3-1} {#4}\, {#1}_{#3+1} \cdots %
  {#1}_{#2}}
\newcommand{\SubscriptD}[3]{{#1}_1 \cdots %
  {#1}_{#3-1} {#1}_{#3+1} \cdots %
  {#1}_{#2}}

% Sums
\newcommand{\SumN}[3]{\sum_{{#1}_1=1}^{{#2}_1} %
  \sum_{{#1}_2=1}^{{#2}_2} %
  \cdots %
  \sum_{{#1}_{#3}=1}^{{#2}_{#3}}}
\newcommand{\SumD}[4]{\sum_{{#1}_1=1}^{{#2}_1} %
  \cdots %
  \sum_{{#1}_{#4-1=1}}^{{#2}_{#4-1}}%
  \sum_{{#1}_{#4+1=1}}^{{#2}_{#4+1}}%
  \cdots%
  \sum_{{#1}_{#3}=1}^{{#2}_{#3}}}

% Norm
\newcommand{\norm}[1]{\left\lVert \, #1 \, \right\rVert}
\newcommand{\fnorm}[1]{\left\lVert \, #1 \, \right\rVert_{F}}

% Inner product
\newcommand{\ip}[2]{\langle \, #1,#2 \, \rangle}

% General product
\newcommand{\gp}[3]{\langle \, #1,#2 \, \rangle_{#3}}

% Various ranks!

\newcommand{\Rank}[1]{\rank(#1)} %rank
\newcommand{\Krank}[1]{k_{\M{#1}}} % k-rank
\newcommand{\Srank}[1]{\rank_{S}(#1)} %symmetric rank
\newcommand{\Nrank}[2]{\rank_{#1}(#2)} %n-rank
\newcommand{\Brank}[1]{\widetilde{\rank}(#1)} % border rank

% Derivative
\newcommand{\FD}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\SD}[3]{\frac{\partial^2 #1}{\partial #2 \partial #3}}


%\renewcommand{\Vec}{{\rm vec}}

%\newcommand{\Rtrue}{R_{\rm true}}

\newcommand{\True}{_{\rm true}}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% TeX-command-default: "PDFLaTeX"
%%% LaTeX-command-style: (("." "pdflatex"))
%%% End:

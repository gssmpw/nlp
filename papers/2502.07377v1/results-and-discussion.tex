\subsection{Results}

\begin{table}[b]
\centering
\caption{\textit{Results.} ROC-AUC scores across engagement and resonance predictions.}
%\resizebox{\columnwidth}{!}{
\begin{tabular}{@{}l c c@{}}
\toprule
Model         & ROC-AUC (Engagement)        & ROC-AUC (Resonance)        \\ \midrule
Control (C)             & $0.593$ [$0.587$, $0.599$] & $0.669$ [$0.641$, $0.698$] \\
C + Nutrition (N)       & $0.603$ [$0.597$, $0.609$] & $0.709$ [$0.680$, $0.737$] \\
C + Food Descriptors (F)     & $0.594$ [$0.588$, $0.600$] & $0.671$ [$0.642$, $0.700$] \\
C + Engagement Discriminators (E)         & $0.602$ [$0.596$, $0.608$] & $0.699$ [$0.672$, $0.726$] \\
C + N + F           & $0.602$ [$0.597$, $0.608$] & $0.710$ [$0.682$, $0.739$] \\
C + N + E           & $0.607$ [$0.602$, $0.613$] & $0.717$ [$0.690$, $0.745$] \\
C + F + E         & $0.602$ [$0.596$, $0.607$] & $0.694$ [$0.666$, $0.723$] \\
C + N + F + E        & $0.608$ [$0.603$, $0.614$] & $0.713$ [$0.687$,$ 0.743$] \\ \bottomrule
\end{tabular}
%}
\label{table:auc_roc_scores}
\end{table}



We present our results in Table \ref{table:auc_roc_scores} where we summarize our main findings, with ROC-AUC scores and their corresponding bootstrap confidence intervals for each model.

\xhdr{Predicting engagement}
Using only control feature set our classification model achieves a ROC-AUC score of $0.593$.
Adding the nutritional density features improves the ROC-AUC score by $1$\%, to $0.603$.
In contrast, adding food descriptors to controls does not improve prediction performance (ROC-AUC of $0.594$).
Similarly to nutritional features, adding engagement discriminators to the controls raises ROC-AUC to $0.602$.
Further, combining the nutritional density and food descriptors, or the nutritional density and engagement discriminators with the controls achieves ROC-AUC scores of $0.602$ and $0.607$, respectively. 
Similarly, adding the food descriptors and engagement discriminators to the controls also achieves ROC-AUC of $0.602$.
Finally, combining all feature sets achieves the best ROC-AUC score of $0.608$.

\xhdr{Predicting resonance}
Due to the resonant and non-resonant classes being more distinctly separated than in the previous experiment, the model with the controls already achieves the ROC-AUC score of $0.669$.
Moreover, adding nutritional density to the controls improves the score to $0.709$, or by $4$\%.
When adding food descriptors we observe a $1$\% improvement in performance (ROC-AUC of $0.671$) and
when adding engagement discriminators the performance improves by $3$\% to $0.699$. 
Further, when we combine discriminators and the descriptors with the controls the model improves to $0.694$.
Combining nutritional density and food descriptors with the controls also increases the performance by $4$\% indicating that the food descriptors are not predictive of resonance.
Finally, adding nutritional content and engagement discriminators we achieve ROC-AUC of $0.713$, the same as the model combining all feature sets. Hence, those models achieve the best overall performance as compared to the controls, improving that base model by $5$\%.


\begin{figure}[t]
    \centering
    \begin{subfigure}[t]{0.51\linewidth}
        \centering
        \includegraphics[width=\linewidth]{images/shap_rq1.pdf}
        \caption{The beeswarm plot displaying how certain features impact whether a post will get a comment or not}
        \label{fig:shap_rq1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.45\linewidth}
        \centering
        \includegraphics[width = \linewidth]{images/shap_bar_rq1.pdf}
        \caption{Features with a large contribution to the model predictions}
        \label{fig:shap_bar_rq1}
        \end{subfigure}
    %\caption{Combined figure}
    %\label{fig:combined}
    %\centering
    \vfill
    \begin{subfigure}[t]{0.48\linewidth}
        \centering
        \includegraphics[width=\linewidth]{images/shap_rq1_pred_0.pdf}
        \caption{``[I ate] Pork Belly, Sweet Potato Pur√©e, Maple Gastrique, Micro Celery'' post, not achieving engagement}
        \label{fig:shap_rq1_pred_0}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.48\linewidth}
        \centering
        \includegraphics[width = \linewidth]{images/shap_rq1_pred_1.pdf}
        \caption{``Red Velvet Cupcakes with Cream Cheese Frosting and Chocolate Decoration'' post, achieving engagement}
        \label{fig:shap_rq1_pred_1}
        \end{subfigure}
    \caption{
        \textit{SHAP visualizations for classifier predicting post engagement.}
        Looking at SHAP values of different features, we can understand to which degree they influence the probability of a post receiving engagement. 
        In the beeswarm plot (\subref{fig:shap_rq1}) we display how the top features impact the model's output, with each dot representing one post. 
        Posting after COVID-19, being an experienced user, and having higher calorie meals strongly increases the likelihood of engagement prediction.   
        Additionally, the absence of no-engagement discriminators, posting on the weekday and later in the day further increases those odds.
        Foods with either high or low protein content have a higher probability of engagement than foods with moderate protein content.
        In the bar plot (\subref{fig:shap_bar_rq1}) we present the feature importance in absolute values. The calorie density ranks third after controlling for COVID-19 and the user tenure.
        We also present two examples (\subref{fig:shap_rq1_pred_0}-\subref{fig:shap_rq1_pred_1}) with local feature importance, highlighting the concrete values of each feature and the way they contributed to the prediction of a post receving comments.
        }
    \label{fig:shap_all_rq1}
    \Description{SHAP plot rq1}
\end{figure}

\xhdr{Feature importance with SHAP values}
To better understand the associations of features and user engagement and their effects on 
the engagement prediction we calculate SHapley Additive exPlanations (SHAP) values.
SHAP values represent the contributions of each individual feature value to the prediction score.
In particular, a positive SHAP value for a feature value indicates an increase in the probability of a positive prediction, while a negative SHAP value for a particular feature value suggests a decrease in the probability of a positive class prediction. For example, in Figure \ref{fig:shap_rq1} we illustrate the contribution of features to the prediction of whether a post will receive comments by plotting the SHAP values across posts.
In particular, in this diagram, we observe how different values of a particular feature affect the model's prediction.
Hence, each point represents a SHAP value for an individual post given its corresponding feature value.
The SHAP values are given on the x-axis reflecting their impact on the model's output.
Specifically, positive SHAP values push the prediction towards engagement, while negative values reduce the probability of the positive class.
The color gradient represents the feature value, with blue indicating lower feature values and red indicating higher values. For example, blue points in the third row of Fig. \ref{fig:shap_rq1} represent lower calorie and red higher calorie density.
Additionally, Figure \ref{fig:shap_bar_rq1} displays the mean of absolute SHAP values across the range of possible feature values. 
While the plot does not differentiate the direction of the feature value, it depicts the overall feature importance in the prediction model.
Lastly, SHAP values allow to inspect how individual predictions are computed to further gain an understanding of the associations between features and the model output. For example, Figure \ref{fig:shap_rq1_pred_0} shows a waterfall plot visualizing the breakdown of the model's prediction for a single instance and highlighting how each feature influences the outcome.
In the waterfall plots, contributions from each feature are depicted as colored bars, showing their cumulative additive influence on the outcome.
To understand the model's prediction for a specific observation, we start with the baseline prediction without features, and iterate trough the features summing their SHAP values to obtain the final prediction (a number between $-1$ and $1$, with $0$ being the class threshold).

\xhdr{Role of nutritional content in engagement prediction}
In Figure \ref{fig:shap_rq1} we observe that calorie density is positively associated with engagement, with a mean absolute SHAP value of $0.09$ (Fig. \ref{fig:shap_bar_rq1}). 
This value is lower than the contributions of the COVID and user experience features, which are control features. In particular, a mean absolute SHAP value of $0.18$ indicates that, on average, the COVID feature contributes $0.18$ in absolute terms to the model's prediction of a post receiving comments, hence, suggesting that posts made after the onset of COVID-19 (March $15$, $2021$) are more likely to receive engagement.
Similarly, user experience also positively affects engagement, with more experienced users generally being associated with engagement. However, calorie density still ranks as the third most important feature even after controlling for COVID and user experience, highlighting its strong impact on engagement prediction. 

Moreover, the calorie density has a stronger effect on the model's prediction than the absence of no-engagement discriminators (cf. row four in \ref{fig:shap_rq1} and \ref{fig:shap_bar_rq1}) or the presence of engagement discriminators (cf. row five in \ref{fig:shap_rq1} and \ref{fig:shap_bar_rq1}), which were selected as the words distinctively used in different classes. This further underlines the strong predictive power of calorie density on user engagement with a particular post.
Regarding other nutritional densities, we observe that lower protein content does not drastically affect engagement while higher protein content has a polarizing effect, either significantly boosting or detracting from engagement prediction. 
In other words, high protein can be a critical factor in determining the prediction outcome, either positively or negatively.
In addition, we also observe that posting on weekends or later in the day appears (both are control features) to negatively influence the likelihood of engagement.


Further, in Figure \ref{fig:shap_rq1_pred_0} we show the waterfall plot for a post without comments as an individual prediction example. The model's baseline is $-0.011$.
The title of this particular post is ``[I ate] Pork Belly, Sweet Potato Pur√©e, Maple Gastrique, Micro Celery'' and it was posted after the initial COVID outbreak and by an experienced user. Consistent with the previously discussed results, those two features increase the probability of the positive class.
Nevertheless, other features such as the presence of the word ``sweet'' (food descriptor) as well as no-engagement discriminators and the absence of the engagement discriminators reduce the prediction probability.
Additionally, low protein content ($7$g) and low carbohydrate content ($5$g) are also negatively associated with the likelihood of engagement resulting in the final prediction for comments to be  $-0.183$. We show another waterfall plot in Figure \ref{fig:shap_rq1_pred_1} with an example of a post that received comments.
The title of the post is ``Red Velvet Cupcakes with Cream Cheese Frosting and Chocolate Decoration''.
The figure demonstrates that the user's experience and the calorie content of the dish ($358$ kCal) positively contribute to the likelihood of engagement prediction. 
In contrast, the fact that the post was made before the onset of COVID-19 reduces the prediction probability. 
Conversely to the previous example, the very low protein content ($3$g) has in this case a positive effect on the likelihood of engagement prediction.
The presence of an engagement discriminator further boosts the model's probability, whereas the presence of a no-engagement discriminator negatively influences the outcome. 
Overall, the predicted value of a post receiving engagement is $0.282$.

\begin{figure}[t]
    \centering
    \begin{subfigure}[t]{0.51\linewidth}
        \centering
        \includegraphics[width=\linewidth]{images/shap_rq2.pdf}
        \caption{The beeswarm plot displaying how certain features impact whether a post will resonate or not}
        \label{fig:shap_rq2}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.45\linewidth}
        \centering
        \includegraphics[width = \linewidth]{images/shap_bar_rq2.pdf}
        \caption{Features with a large contribution to the model predictions}
        \label{fig:shap_bar_rq2}
        \end{subfigure}
    %\caption{Combined figure}
    %\label{fig:combined}
    %\centering
    \vfill
    \begin{subfigure}[t]{0.48\linewidth}
        \centering
        \includegraphics[width=\linewidth]{images/shap_rq2_pred_0.pdf}
        \caption{``[homemade] minestrone soup'' post, not resonating with the community}
        \label{fig:shap_rq2_pred_0}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.48\linewidth}
        \centering
        \includegraphics[width = \linewidth]{images/shap_rq2_pred_1.pdf}
        \caption{``[Homemade] Unicorn and Dinosaur cookies'' post, resonating with the community}
        \label{fig:shap_rq2_pred_1}
        \end{subfigure}
    \caption{
        \textit{SHAP visualizations for classifier predicting post's resonance level.}
        SHAP values of features provide us with the transparency of a classifier and allow us to understand which features are beneficial to achieve resonance. In the beeswarm plot (\subref{fig:shap_rq2}) we present how the values of features impact the prediction, while the bar plot (\subref{fig:shap_bar_rq2}) presents each top feature's importance. Calorie density is the fourth most important feature after several control features. Its importance is more than two times higher than for the engagement predictor. Similarly, a higher carbohydrate value indicates the prediction of resonance, and a higher protein content, although smaller, still has a positive influence. Fat content has less of a prediction power. Additionally, we present two concrete examples (\subref{fig:shap_rq2_pred_0}-\subref{fig:shap_rq2_pred_1}), with local feature importance and values that drive the prediction of a post resonating with the community.
        }
    \label{fig:shap_all_rq2}
    \Description{SHAP plot rq2}
\end{figure}


\xhdr{Role of nutritional content in resonance prediction}
In Figure \ref{fig:shap_rq2} and \ref{fig:shap_bar_rq2} we present how features are associated with post resonance. We observe, that the mean absolute SHAP value for calorie density is $0.19$, which is more than twice higher than the value for calorie density when predicting engagement. Although, the absence of low resonance discriminators, high user experience, and posting midday have the strongest influence on resonance prediction (all are control features), the calorie density ranks as the fourth most important feature. Hence, posts featuring high-calorie meals are more likely to resonate with the community even after accounting for the influence of the control features. On the other hand, low-calorie meals tend to be associated with non-resonant posts.
Similarly, SHAP values suggest that high carbohydrate content is also linked with positive resonance prediction.
In contrast, protein content has a more nuanced negative correlation with the resonance. 
While high protein density is associated with non-engaging posts, low protein content tends to appear more likely in resonant posts. 
Besides nutritional content, another control feature (posting on weekdays) is more beneficial for resonance than posting on weekends.

To further illustrate our findings, we again examine two specific examples in more detail.
The first example (Fig. \ref{fig:shap_rq2_pred_0}) visualizes the features of a post titled ``[homemade] minestrone soup'', which does not resonate well with the community.
According to the chart, the post lacked a low resonance discriminator and was posted by an experienced user, which both favored resonance prediction.
Regardless, the majority of other features contributed negatively to the prediction.
The meal‚Äôs very low calorie ($53$ kCal), protein ($3$g), and carbohydrate ($8$g) content all had a negative effect.
Additionally, the post was made during the fourth quartile of the day and after COVID, both of which further reduced its likelihood of resonance.
These combined factors result in the prediction value of $-0.95$, classifying the post as a non-resonant post.
The second example (Fig. \ref{fig:shap_rq2_pred_1}) represents a post titled ``[Homemade] Unicorn and Dinosaur cookies'', which resonated well with the community.
The meal's high-calorie content ($432$ kCal) and high carbohydrate content ($75$g) significantly increased the likelihood of resonance.
In this case, the low protein content ($7$g) also positively influenced the outcome.
However, several features negatively impacted the prediction, including the user‚Äôs low experience, the presence of a low engagement discriminator, and the post being made in the evening (Q$1$). 
Despite these negative factors, the overall prediction value was $0.414$, classifying the post as one resonating with the community.


\subsection{Discussion}

Our findings on the relation between nutritional content and engagement in food-related social media posts provide several key insights into user behavior as well as the context and content of engaging posts. First, including the nutritional content as a feature set in our engagement prediction models significantly enhances the model's classification accuracy, suggesting a strong predictive power of these nutritional features for engagement. Additionally, we uncover the direction of this strong association: more calorie-dense meals increase the prediction probability for user engagement and, in particular, for post resonance.

The influence of calorie content aligns with prior research suggesting that users are more drawn to calorie-dense meals \cite{pancer_content_2022}.
Posts with higher calorie content consistently demonstrate higher SHAP values, emphasizing their role in engagement prediction.
This finding is further corroborated by the interaction between calorie and carbohydrate density. In particular, posts with both high-calorie and high-carbohydrate meals are typically more likely to reach top engagement levels.
Conversely, protein content's nuanced effect suggests that high-protein meals may appeal to a more specific audience and, hence, not resonate well enough with a broader user community.

We note again that the associations between nutritional content and user engagement are still significant even after controlling for a range of non-food-related features. 
For example, user experience appears as a critical feature strongly related to engagement \cite{bakshy_everyones_2011}. 
For example, 
Posts by older and more experienced users had higher likelihoods of engagement, confirming findings from studies on social media websites such as Usenet and Twitter, 
where contributions by long-term users were more likely to receive responses \cite{arguello_talk_2006, suh_want_2010, turkoglu_improving_2023}.
This phenomenon may be related to the community perceiving experienced users' content as being of higher quality, or to the experienced users being able to understand the community and their expectations better than inexperienced ones. Further, the timing of the posts is also significantly related to engagement. 
Posts made after the onset of COVID-19 experienced higher engagement, potentially due to increased digital screen time during lockdowns \cite{wong_digital_2021} and the rise in internet traffic \cite{feldmann_lockdown_2020}.
However, posts made later in the day or during weekends were less likely to engage users, agreeing with the findings that weekday posts during busier hours attract more interaction \cite{wahid_social_2020, hanifawati_managing_2019}.
Finally, our findings align with studies indicating that captions and post titles significantly influence engagement \cite{hessel_cats_2017, chen2021drives} reinforcing the importance of carefully crafting titles and captions to resonate with audiences.

\xhdr{Limitations}
Even though Reddit is an anonymous platform that allows more authentic behavior, it comes with several limitations.
First, we miss the detailed user demographics as well as their individual interests and nutritional goals. 
%Thus, considering the complexity of human behavior, modeling it as a whole might be too broad of a generalization.
Second, we do not account for bots on the platform, which are easily created by users \cite{long2017could}.
The presence of bots can influence user engagement and the dynamics of online interaction.
Third, Reddit's algorithm that curates feeds may influence user engagement with specific, assumed-relevant, posts.

Another limitation of our work is that we exclude visual features, which in combination with captions are accurate predictors of engagement on Reddit \cite{hessel_cats_2017}.
While focusing on the nutritional density of the meals instead of their appearance is the goal of our research, we are aware of the impact of the visual elements.
Given Reddit's focus on images, and the general influence of food aesthetics on engagement rates \cite{philp_predicting_2022}, the aesthetic of a meal could serve as an additional control feature, providing deeper insights. We plan to extend our analysis by including visual features as another set of control features in our future work.

Although we aimed for a robust estimation method of the nutritional content by using pre-trained embeddings, a robust similarity threshold, and a similarity-weighted density aggregation, we acknowledge potential inaccuracies in our estimation due to, among others, variations in ingredient ratios. In particular, we estimate the nutritional densities and not the total amounts of nutritional content.
Additionally, common meals, such as pizza, can have numerous variations, and users may not feel the need to specify these differences in the title, as they accompany their title with a picture.
Since our estimation of nutritional content relies solely on the title, our approach may overlook valuable information that could enhance the accuracy of the estimation.

Moreover, our work is a large-scale study of a single, although large, community (i.e. Reddit's r/Food). 
While we believe that the amount of data (almost 600,000 posts) and the huge user base of this subreddit (24 million users) is sufficient for an analysis of this kind, we still acknowledge potential sample bias in users who post and engage with this community.
Therefore, our findings might not necessarily generalize to other communities. 
However, we see this as an opportunity to extend our work to other social media platforms that garner a large number of users, such as Instagram.

Finally, we caution that our work indicates an associative link between nutritional density and different levels of engagement, and does not establish causality.
Albeit we control for several confounding features, which makes the evidence we find for this link stronger, we still conduct an observational study without a particular setup needed for causal inference.

%%%%


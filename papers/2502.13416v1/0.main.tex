\documentclass[10pt,journal,compsoc]{IEEEtran}
\usepackage{array}
%\usepackage[caption=false,font=normalsize,labelfont=sf,textfont=sf]{subfig}
\usepackage{textcomp}
\usepackage{subfigure}
\usepackage{stmaryrd}

\usepackage{stfloats}
\usepackage{url}
\usepackage{verbatim}
\usepackage{graphicx}
\hyphenation{op-tical net-works semi-conduc-tor IEEE-Xplore}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\usepackage{balance}
\let\Bbbk\relax
\usepackage{amsmath,amssymb,amsfonts}
%\usepackage{syntax}
\usepackage{hyperref}
\hypersetup{colorlinks=true}
\def\equationautorefname~#1\null{%
  Equation~(#1)\null
}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
% \usepackage{algorithmic}
\usepackage{colortbl}
\usepackage{xcolor}
\usepackage{colortbl}%
\newcommand{\grayrow}{\rowcolor[HTML]{EFEFEF}}
\newcommand{\graycell}{\cellcolor[HTML]{EFEFEF}}
\usepackage{capt-of,lipsum}
\usepackage{amsthm}
\definecolor{mycolor}{rgb}{0.95, 0.985, 0.93}
\doublerulesepcolor{mycolor}
\usepackage{xspace}
\usepackage{color}
\usepackage{tcolorbox}
\definecolor{mGray1}{rgb}{0.9,0.9,0.9}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{commentcolor}{rgb}{0.6,0.6,0.6}
\usepackage{enumitem}
% \usepackage[linesnumbered,ruled,vlined]{algorithm2e}
\newtheorem{definition}{Definition}
% \usepackage[english]{babel}
% \hyphenation{Dail-yMail}
\usepackage{pifont}
\usepackage{xcolor}
\usepackage{listings}
\newcommand{\m}{\mathit} 
\newcommand{\mtl}{\phi} 
\newcommand{\interval}{I} 
\newcommand{\relation}{R} 
\newcommand{\Obj}{o} 
\newcommand{\Subj}{s} 
\newcommand{\OBJ}{O} 
\newcommand{\SUBJ}{S} 
\newcommand{\Prolog}{\mathcal{P}}
\newcommand{\drule}{Q}
\newcommand{\ap}{\m{ap}}
\newcommand{\hornarrow}{\,\text{:--}\,}
\newcommand{\curly}{\,\mathrel{\leadsto}\,}
\newcommand{\encoding}[3]{#1{\curly}(#2, #3)}
\newcommand{\deriveRules}[3]{#1\,{\hookrightarrow}\,(#2, #3)}
\newcommand{\nm}{\m{nm}}
\newcommand{\entity}{\m{entity}}
\newcommand{\groundTruthTriples}{\widetilde{\relation}_{\m{ground}}}
\newcommand{\derivedFacts}{\widetilde{\relation}_{\m{derived}}}
\newcommand{\deriveKG}[4]{#1, #2\,{\hookrightarrow}\,(#3, #4)}
\newcommand{\llmResponse}{\m{Resp}}
\newcommand{\eval}{\m{V}}
\newcommand{\semantic}{\widetilde{G}}
\newcommand{\similarity}{S}


\usepackage{makecell} 
\usepackage[bottom]{footmisc}
%\feetbelowfloat
\newcommand{\RNeg}{[\relation\text{-}\m{Neg}]}
\newcommand{\RSym}{[\relation\text{-}\m{Sym}]}
\newcommand{\RInv}{[\relation\text{-}\m{Inverse}]}
\newcommand{\RTrans}{[\relation\text{-}\m{Trans}]}


\newcommand{\commentstyle}[1]{\textcolor{mGray}{\footnotesize{#1}}}


\newcommand{\domain}{$\mathcal{D}$}
\newcommand{\entityCat}{$\m{EC}$}
\newcommand{\relationCat}{$\m{RC}$}

\algrenewcommand\algorithmicindent{1.3em}%

\usepackage[normalem]{ulem}
\newcommand{\shortNeg}{!} %\mathtt{Neg}
\newcommand{\syh}[1]{{\small \ttfamily \color{purple}{{{YH:#1}}}}}
\newcommand\figref[1]{Fig.\,{\ref{#1}}}
%\textcolor{blue}
\newcommand\tabref[1]{Table \textcolor{blue}{\ref{#1}}}
\newcommand\secref[1]{\S \textcolor{blue}{\ref{#1}}}
\usepackage{adjustbox}
\usepackage{wrapfig}
\newcommand\theoref[1]{Theorem~\textcolor{blue}{\ref{#1}}}
\newcommand\lemmaref[1]{Lemma~\textcolor{blue}{\ref{#1}}}
\newcommand\appref[1]{Appendix~\textcolor{blue}{\ref{#1}}}
\newcommand\defref[1]{Definition~\textcolor{blue}{\ref{#1}}}
\newcommand\algoref[1]{Algorithm~\textcolor{blue}{\ref{#1}}}
\newcommand{\trans}{\m{R}}
\newcommand{\Istart}{n_{\m{start}}}
\newcommand{\Iend}{n_{\m{end}}}
\newcommand{\history}{\mathcal{H}}
\newcommand{\timepoint}{t}
\newcommand{\distance}{d}
%\widetilde{\relation_{\m{TS}}}
\newcommand\nmNEW{\nm_{\m{new}}}
\usepackage{thmtools} 
\usepackage{thm-restate}
\declaretheorem[name=Theorem,numberwithin=section]{thm}
\newcommand{\plus}{\texttt{+}}



\usepackage{subcaption}
\usepackage{booktabs}


\definecolor{keywordcolor}{rgb}{0.13,0.29,0.53}
\definecolor{stringcolor}{rgb}{0.31,0.60,0.02}
\definecolor{commentcolor}{rgb}{0.56,0.35,0.01}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

%\usepackage[natbibapa]{apacite} 
% \usepackage[
% backend=biber,
% style=authoryear,
% ]{biblatex}
% \addbibresource{8.ref.bib}

\lstset{
 language=C,
 escapeinside={(*@}{@*)},
 basicstyle=\small\ttfamily,
 columns=[c]fixed,
 numbers=left,   
 xleftmargin=2em, 
 numberstyle=\tiny\color{mGray},
 commentstyle=\color{commentcolor}\ttfamily,
 keywordstyle=\color{airforceblue}\bfseries,
 upquote=true,
 breaklines=true,
 showstringspaces=false,
 stringstyle=\color{black},
 keywordstyle=[2]\color{purple}\ttfamily, %
 morekeywords=[2]{int, if , return},
 literate={'"'}{\textquotesingle "\textquotesingle}3
}

\newcommand{\code}[1]{{\fontfamily{cmtt}\fontseries{m}\fontshape{n}\selectfont\small{#1}}}

\newcommand{\listitem}[1]{\textit{\textbf{#1}}}
\newcommand{\head}[1]{{\noindent\textbf{#1}}}


\newcommand{\tool}{\textsc{Drowzee}\xspace}
\newcommand{\mtltoNL}{\textsc{mtl2NL}\xspace}
\newcommand{\iyear}{\m{t}}

\newcommand{\instruction}{\textsc{Instruction}\xspace}
\newcommand{\query}{\textsc{Query}\xspace}
\newcommand{\hallucinationAnswer}{\textsc{Hallucinations Answer}\xspace}

\newcommand{\yi}[1]{\textcolor{blue}{(Yi: #1)}}
\newcommand{\lnk}[1]{\textcolor{magenta}{#1}}
\newcommand{\lyk}[1]{\textcolor{purple}{#1}}
\newcommand{\wkl}[1]{\textcolor{brown}{#1}}
\newcommand{\shil}[1]{\textcolor{orange}{(SL: #1)}}

\begin{document}

%%
%% The "title" command has an optional parameter,
%% allowing the author to define a "short title" in page headers.

%Effectively 
\title{Detecting LLM Fact-conflicting Hallucinations Enhanced by Temporal-logic-based Reasoning}

\author{
Ningke Li$^{\star}$,
Yahui Song$^{\star}$,
Kailong Wang$^{\dagger}$,
Yuekang Li,
Ling Shi,
Yi Liu,
Haoyu Wang
    \thanks{N. Li, K. Wang, and H. Wang are with Huazhong University of Science and Technology, China. 
    E-mail: \{lnk\_01, wangkl, haoyuwang\}@hust.edu.cn}
    \thanks{Y. Song is with the National University of Singapore, Singapore.\protect\\
    E-mail: yahui\_s@nus.edu.sg}
    \thanks{Y. Li is with the University of New South Wales, Australia.\protect\\
    E-mail: yuekang.li@unsw.edu.au}
    \thanks{L. Shi and Y. Liu are with Nanyang Technological University, Singapore.\protect\\
    E-mail: ling.shi@ntu.edu.sg, yi009@e.ntu.edu.sg}
\thanks{${\star}$ Ningke Li and Yahui Song contribute equally to this work.}
\thanks{${\dagger}$ Kailong Wang is the corresponding author.}
}


% The paper headers
%\markboth{Journal of \LaTeX\ Class Files,~Vol.~14, No.~8, August~2015}%
%{Shell \MakeLowercase{\textit{et al.}}: Bare Advanced Demo of IEEEtran.cls for IEEE Computer Society Journals}

\IEEEtitleabstractindextext{%
%\IEEEdisplaynontitleabstractindextex{
\begin{abstract}
Large language models (LLMs) face the challenge of hallucinations -- outputs that seem coherent but are actually incorrect. A particularly damaging type is fact-conflicting hallucination (FCH), where generated content contradicts established facts. Addressing FCH presents three main challenges: \textbf{1)} Automatically constructing and maintaining large-scale benchmark datasets is difficult and resource-intensive; \textbf{2)} Generating complex and efficient test cases that the LLM has not been trained on -- especially those involving intricate temporal features -- is challenging, yet crucial for eliciting hallucinations; and \textbf{3)} Validating the reasoning behind LLM outputs is inherently difficult, particularly with complex logical relationships, as it requires transparency in the model's decision-making process. 
% Large language models (LLMs) face critical challenges in generating hallucinations -- coherent but factually inaccurate outputs. One major issue is the \emph{fact-conflicting hallucination} (FCH), where LLMs produce outputs contradicting the known facts. 
% We highlight three challenges in addressing FCH: 
%        \textbf{1)} Automatically constructing and updating large-scale benchmark datasets is hard; 
% \textbf{2)} Automatically verifying the LLM outputs for temporal-logic-based queries is non-trivial; and 
% \textbf{3)} Validating the reasoning steps behind LLM outputs is inherently difficult, especially for complex logical relations. 
%Lacking effective verification of temporal properties and temporal logic in test cases can potentially lead to erroneous outcomes.


This paper presents \tool{}, an innovative end-to-end metamorphic testing framework that utilizes temporal logic to identify fact-conflicting hallucinations (FCH) in large language models (LLMs). \tool{} builds a comprehensive factual knowledge base by crawling sources like Wikipedia and uses automated temporal-logic reasoning to convert this knowledge into a large, extensible set of test cases with ground truth answers. LLMs are tested using these cases through template-based prompts, which require them to generate both answers and reasoning steps. To validate the reasoning, we propose two semantic-aware oracles that compare the semantic structure of LLM outputs to the ground truths. 
Across nine LLMs in nine different knowledge domains, experimental results show that \tool{} effectively identifies rates of non-temporal-related hallucinations ranging from 24.7\% to 59.8\%, and rates of temporal-related hallucinations ranging from 16.7\% to 39.2\%.
Key insights reveal that LLMs struggle with out-of-distribution knowledge and logical reasoning. These findings highlight the importance of continued efforts to detect and mitigate hallucinations in LLMs.

%Experimental results show that \tool{} effectively identifies (non-temporal-related) hallucinations across nine LLMs in nine different domains, with hallucination rates ranging from 24.7\% to 59.8\% \shil{differentiate number for non-temporal and temporal?}. 

\end{abstract}

% Note that keywords are not normally used for peerreview papers.
\begin{IEEEkeywords}
Large Language Model, Hallucination, Temporal Logic, Metamorphic Testing
\end{IEEEkeywords}
}

% make the title area
\maketitle

%\IEEEdisplaynontitleabstractindextext
% \IEEEdisplaynontitleabstractindextext has no effect when using
% compsoc under a non-conference mode.


\IEEEpeerreviewmaketitle
\input{1.intro}
\input{2.background}
\input{3.0.example}
\input{3.methodology}
\input{4.evaluation}
\input{5.discussion}
\input{6.related_work}
\input{7.conclusion}

%\pagebreak

%\usepackage[round]{natbib}
% \bibliographystyle{ACM-Reference-Format}
\bibliographystyle{IEEEtran}
%\citestyle{apacite}
% \printbibliography
\balance
\normalem
\bibliography{8.ref}

%\newpage 
%\appendix


%\input{9.appendix}



\end{document}
% \endinput
%%
%% End of file `sample-authordraft.tex'.

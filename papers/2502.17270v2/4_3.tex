

\subsection{Byzantine behavior on the Bracha layer\label{ssec:attack_bracha}}


The delay between $\mathtt{rbcast}$ and $\mathtt{rdlver}$ depends on the termination of an instance of (in our case) Bracha's BRB algorithm \cite{on_the_versatility_of_bracha_byzantine_reliable_broadcast_algorithm}.
Because this algorithm relies on collecting (and thus waiting for) a number of messages from other nodes, the adversary can statistically delay it on all nodes via infecting a minority of nodes (which will not emit these messages for vertices that contain transactions from the target client).
%Let us suppose that the time required to collect one such message from a node is represented by a random variable associated with a probability distribution $X$.
%If the delivery of the vertex requires collecting $k$ such messages out of the $n$ available nodes, then the time required to deliver amounts to the maximum of $k$ out of $n$ samples of that distribution $X$.
%Then, if $b \in [0,f]$ nodes are Byzantine, this amounts to the maximum of $k$ out of $n-b$ samples of $X$.
%This induces an additional delay.
See Appendix \ref{anx:detail_bracha_layer_attack} for details.



\begin{wrapfigure}{l}{.25\textwidth}
\vspace*{-.3cm}
    \centering
    \scalebox{.75}{\input{figures/attack_goal/dag_attacked_bracha_layer}}
    \caption{Bracha layer attack}
    \label{fig:dag_attacked_bracha_layer}
\vspace*{-.4cm}
\end{wrapfigure}


This ability to slow down the delivery of specific vertices allows colluding Byzantine nodes to manipulate the DAG edges.
In our example from Fig.\ref{fig:distributed_ledger_dag_and_blockchains}, node A being Byzantine could yield what is depicted on Fig.\ref{fig:dag_attacked_bracha_layer}.
Here, A not faithfully participating in the reliable broadcast of $v_1^B$ may slow its delivery and make it happen later than that of $v_1^A$ on node B.
In that case, once the honest B is ready to propose, it will produce a vertex $v_2^B$ that targets $v_1^A$ rather than $v_1^B$ (which is not available at the time of the proposal).



Both the attacks from Fig.\ref{fig:dag_attacked_dagrider_layer} and Fig.\ref{fig:dag_attacked_bracha_layer} amount to variant \shortColRed{\textcircled{2}} of Fig.\ref{fig:blockchain_attacked}
Implementing an attack on a DAG having an effect analogous to the one of variant \shortColRed{\textcircled{1}} of Fig.\ref{fig:blockchain_attacked} requires leveraging the deterministic order that is used to order vertices within a wave.
``FullShuffle'' is entirely random and as such cannot easily be leveraged.
However, ``VoteCount'' takes into consideration the structure of the DAG when formulating the finalization order. 
In particular, we remark that both attacks tend to delay the rounds at which nodes vote for the vertices that are targeted.
For instance, in our example if one consider the round at which $A$ votes for $v_1^B$, it is in round $2$ on Fig.\ref{fig:distributed_ledger_dag_and_blockchains} and $3$ on Fig.\ref{fig:dag_attacked_bracha_layer}.
As a result, even if the targeted vertex stays in the same wave, the attack may cause it to be ordered later, thus causing the analogous of variant \shortColRed{\textcircled{1}} of Fig.\ref{fig:blockchain_attacked}.



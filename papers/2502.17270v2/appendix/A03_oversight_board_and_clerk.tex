


\section{Problem with the order of Board\&Clerk\label{anx:bug_board_and_clerk}}

In \cite{reducing_latency_of_dag_based_consensus_in_the_asynchronous_setting_via_the_utxo_model}, the deterministic order $<_{\text{\faEnvelopeO}}$ that is proposed is such that $x <_{\text{\faEnvelopeO}} x'$ iff $|\{\text{nodes vote}~x~\text{first}\}| > |\{\text{nodes vote}~x'~\text{first}\}|$.

However, as illustrated on Fig.\ref{fig:do_counter_ex_board_and_clerk_votes}, this definition may yield cases in which we have $x_1 <_{\text{\faEnvelopeO}} x_2$, $x_2 <_{\text{\faEnvelopeO}} x_3$ and $x_3 <_{\text{\faEnvelopeO}} x_1$ i.e., a Condorcet cycle \cite{condorcet_attack_against_fair_transaction_ordering}. 
Indeed, on Fig.\ref{fig:do_counter_ex_board_and_clerk}, one can see that $n_0$ and $n_3$ vote for $v_4^0$ before $v_4^2$ but only $n_2$ vote for $v_4^2$ before $v_4^0$. Thus, $v_4^0 <_{\text{\faEnvelopeO}} v_4^2$.
Similarly, both $n_0$ and $n_2$ vote for $v_4^2$ before $v_4^3$ while only $n_3$ does the opposite. Hence $v_4^2 <_{\text{\faEnvelopeO}} v_4^3$.
However, $n_2$ and $n_3$ vote for $v_4^3$ before they do so for $v_4^0$, only $n_0$ doing the opposite.
Thus $v_4^3 <_{\text{\faEnvelopeO}} v_4^0$.


\begin{figure}[h]
    \centering

\begin{subfigure}{.15\textwidth}
    \centering
    \scalebox{.8}{\input{appendix/do_counter_ex_board_and_clerk}}
    \caption{DAG}
    \label{fig:do_counter_ex_board_and_clerk_dag}
\end{subfigure}
%
\begin{subfigure}{.3\textwidth}
    \centering
\begin{tabular}{|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & \multicolumn{4}{c|}{earliest vote by} \\
\cline{2-5} 
     & $n_0$ & $n_1$ & $n_2$ & $n_3$ \\
     \hline 
$v_4^0$ & $4$ & $\infty$ & $6$ & $5$ \\
\hline 
$v_4^2$ & $5$ & $\infty$ & $4$ & $\infty$ \\
\hline 
$v_4^3$ & $\infty$ & $\infty$ & $5$ & $4$ \\
\hline 
\end{tabular}
    \caption{Vote table}
    \label{fig:do_counter_ex_board_and_clerk_votes}
\end{subfigure}

    
    \caption{Example where $<_{\text{\faEnvelopeO}}$ is not transitive}
    \label{fig:do_counter_ex_board_and_clerk}
\end{figure}




\cite{reducing_latency_of_dag_based_consensus_in_the_asynchronous_setting_via_the_utxo_model} does not seem to acknowledge that this problem may occur.
Indeed, \cite{reducing_latency_of_dag_based_consensus_in_the_asynchronous_setting_via_the_utxo_model} proposes to sort the vertices using a stable sorting algorithm and the $<_{\text{\faEnvelopeO}}$ relation as a comparator.
However, it is impossible to do it reliably if $<_{\text{\faEnvelopeO}}$ is not transitive.


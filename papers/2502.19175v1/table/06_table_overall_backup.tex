% \setlength{\tabcolsep}{4.6pt}
% \begin{table*}[t]
% \centering
% \footnotesize
% \begin{tabular}{rcccccc}
% \toprule
%                                & \multicolumn{2}{c}{\textbf{DDxPlus}} & \multicolumn{2}{c}{\textbf{iCraft-MD}} & \multicolumn{2}{c}{\textbf{RareBench}} \\ \cmidrule(lr){2-3} \cmidrule(lr){4-5} \cmidrule(lr){6-7}
%                                & \textbf{GTPA@1 $\uparrow$}          & \textbf{Avg Rank $\downarrow$}   & \textbf{GTPA@1 $\uparrow$}       & \textbf{Avg Rank $\downarrow$}       & \textbf{GTPA@1 $\uparrow$}        & \textbf{Avg Rank $\downarrow$}       \\\midrule
%                                & \multicolumn{6}{c}{\textbf{GPT-4o}}                                                                 \\\midrule
% \textcolor{cyan}{Zero-shot}                      &                &            &             &                &              &                \\
% \textcolor{cyan}{Few-shot (Standard, Dyn\_BAII)} &                &            &             &                &              &                \\
% \textcolor{cyan}{Few-shot (CoT, Dyn\_BAII)}      &                &            &             &                &              &                \\
% History Taking (\textit{n}=5)         & 0.45           & 4.13       & 0.40        & 5.58           & 0.11         & 7.84           \\
% %History Taking (\textit{n}=10)        & 0.59           & 3.16       & 0.45        & 5.35           & 0.24         & 6.67           \\
% History Taking (\textit{n}=15)        & 0.69           & 2.47       & 0.46        & 5.23           & 0.36         & 5.49           \\
% Retrieval (PubMed) \textcolor{red}{rerun/ignore?}                   & 0.69           & 2.27       & 0.68        & 3.23           & 0.45         & 3.92           \\
% MEDDxAgent (\textbf{Ours})         &                &            &             &                &              &                \\
% \textit{iter} =  1                       & 0.74           & 1.91       & 0.52        & 4.93           & 0.51         & 4.37           \\
% \textit{iter} =  2                       & 0.78           & 1.56       & \textbf{0.54}        & \textbf{4.71}           & \textbf{0.56}         & 4.10           \\
% \textit{iter} =  3                       & \textbf{0.86}           & \textbf{1.29}       & \textbf{0.54}        & 4.80           & 0.50         & \textbf{4.09}           \\\midrule
%                                & \multicolumn{6}{c}{\textbf{Llama3.1-70B}}                                                           \\ \midrule
% \textcolor{cyan}{Zero-shot}                      &                &            &             &                &              &                \\
% \textcolor{cyan}{Few-shot (Standard, Dyn\_BAII)} &                &            &             &                &              &                \\
% \textcolor{cyan}{Few-shot (CoT, Dyn\_BAII)}      &                &            &             &                &              &                \\
% History Taking (\textit{n}=5)         & 0.45           & 4.15       & 0.29        & 6.48           & 0.30         & 6.04           \\
% %History Taking (\textit{n}=10)        & 0.58           & 3.12       & 0.33        & 5.82           & 0.36         & 4.51           \\
% History Taking (\textit{n}=15)        & 0.56           & 3.50       & 0.36        & 5.36           & 0.31         & 4.80           \\
% Retrieval (PubMed)  \textcolor{red}{rerun/ignore?}                 & 0.56           & 3.42       & 0.44        & 4.72           & 0.38         & 3.96           \\
% MEDDxAgent (\textbf{Ours})         &                &            &             &                &              &                \\
% \textit{iter} =  1                       & 0.61           & 2.91       & 0.29        & 7.05           & 0.39         & 5.05           \\
% \textit{iter} =  2                       & \textbf{0.71}   & \textbf{2.20}       & 0.37        & \textbf{6.26}           & \textbf{0.48}         & 4.48           \\
% \textit{iter} =  3                       & 0.68   & 2.30       & \textbf{0.42}        & 6.31           & \textbf{0.48}         & \textbf{4.30}           \\\midrule
%                                & \multicolumn{6}{c}{\textbf{Llama3.1-8B}}                                                            \\\midrule
% \textcolor{cyan}{Zero-shot}                      &                &            &             &                &              &                \\
% \textcolor{cyan}{Few-shot (Standard, Dyn\_BAII)} &                &            &             &                &              &                \\
% \textcolor{cyan}{Few-shot (CoT, Dyn\_BAII)}     &                &            &             &                &              &                \\
% History Taking (\textit{n}=5)         & 0.23           & 6.85       & 0.10        & 8.78           & 0.05         & 8.38           \\
% %History Taking (\textit{n}=10)        & 0.35           & 5.46       & 0.12        & 8.39           & \textbf{0.13}         & 8.25           \\
% History Taking (\textit{n}=15)        & 0.40           & 5.44       & 0.11        & 8.30           & \textbf{0.11}        & 8.95           \\
% Retrieval (PubMed)  \textcolor{red}{rerun/ignore?}                 & 0.42           & 4.50       & 0.29        & 6.93           & 0.35         & 5.33           \\
% MEDDxAgent (\textbf{Ours})         &                &            &             &                &              &                \\
% \textit{iter} =  1                       & 0.34           & 5.25       & 0.11        & 9.38           & 0.08         & 8.47           \\
% \textit{iter} =  2                       & 0.56           & 3.59       & \textbf{0.14}        & 9.22           & 0.09         & \textbf{8.11}           \\
% \textit{iter} =  3                       & \textbf{0.58}           & \textbf{3.10}       & 0.12        & \textbf{9.07}           & 0.07         & 8.56        \\  
% \bottomrule
%     \end{tabular}
%     \caption{Iterative experiment performance across 3 datasets. \textcolor{red}{The \textbf{best results} are based on ignoring the Pubmed retrieval results!}}
%     \label{tab:iterative_overall}
% \end{table*}

\setlength{\tabcolsep}{2.4pt}
\begin{table*}[ht]
\centering
\scriptsize
\begin{tabular}{rccccccccc}
\toprule
                               & \multicolumn{3}{c}{\textbf{DDxPlus}} & \multicolumn{3}{c}{\textbf{iCraft-MD}} & \multicolumn{3}{c}{\textbf{RareBench}} \\ \cmidrule(lr){2-4} \cmidrule(lr){5-7} \cmidrule(lr){8-10}
                               & \textbf{GTPA@1 $\uparrow$}          & \textbf{Avg Rank $\downarrow$}   & \textbf{$\Delta$ Progress} & \textbf{GTPA@1 $\uparrow$}       & \textbf{Avg Rank $\downarrow$}     & \textbf{$\Delta$ Progress}   & \textbf{GTPA@1 $\uparrow$}        & \textbf{Avg Rank $\downarrow$}   & \textbf{$\Delta$ Progress}     \\\midrule
                               & \multicolumn{9}{c}{\textbf{GPT-4o}}                                                                 \\\midrule
%\textcolor{cyan}{Zero-shot}                      &     0.69           &    2.21        &      -      &       0.68         &     3.37         &         -       &       0.46       & 3.99            &   -              \\
%\textcolor{cyan}{Zero-shot (CoT)}                      &     0.71          &    2.10        &      -      &       0.68         &     3.35         &         -       &       0.47       & 4.02            &   -              \\
%\textcolor{cyan}{Few-shot (CoT, Dyn\_BAII)} &                &            &     -        &                &              &          -      &              &             &            -     \\
%\textcolor{cyan}{Few-shot (CoT, Dyn\_BERT/Dyn\_BAII)}      &                &            &       -      &                &              &          -      &              &             &           -      \\
%\textit{Single-Turn}      &                &            &       -      &                &              &          -      &              &             &           -      \\
Knowledge Retrieval (\textit{n}=0)                &      0.18      & 7.33  &  -  &   0.15      &    8.27     & -  &       0.07   &  9.07  &    -   \\
Diagnosis Strategy (\textit{n}=0)     &  0.27    &    6.01        &       -      &      0.18          &      7.87        &          -      &       0.11       &     8.38        &           -      \\
History Taking (\textit{n}=5)         & 0.45           & 4.13     & - & 0.40        & 5.58     &    -  & 0.11         & 7.84     &  -    \\
Retrieval+History Taking (\textit{n}=5)  &      0.52      & 3.32   &  -  &  0.49  &  5.36       & -  &     0.40   &   5.27 &    -   \\
Diagnosis+History Taking (\textit{n}=5)  &    0.72       &  2.14 &  -  &  0.40 &    5.55   & -  &   0.50    &   4.94 &    -   \\
%History Taking (\textit{n}=10)        & 0.59           & 3.16    & -  & 0.45        & 5.35        & -  & 0.24         & 6.67      &  -   \\
History Taking (\textit{n}=15)        & 0.69           & 2.47     & - & 0.46        & 5.23      &  -   & 0.36         & 5.49      &    - \\\cmidrule(lr){2-10}

%Retrieval (Wiki) \textcolor{red}{rerun}                   &            &    &  -  &         &         & -  &          &    &    -   \\
%MEDDxAgent         &                &            &             &                &              &               &              &             &                  \\
 MEDDxAgent (\textit{iter}=1)                       & 0.74           & 1.91     & ~~0.00 & 0.52        & 4.93      &  ~~0.00   & 0.51         & 4.37        &   ~~0.00\\
MEDDxAgent (\textit{iter}=2)                       & 0.78           & 1.56    & +0.32  & \textbf{0.54}        & \textbf{4.71}    &    +0.26   & \textbf{0.56}         & 4.10   &     +0.13   \\
MEDDxAgent (\textit{iter}=3)                       & \textbf{0.86}           & \textbf{1.29}    & +0.32  & \textbf{0.54}        & 4.80      & +0.17    & 0.50         & \textbf{4.09}       &   +0.16 \\\midrule
                               & \multicolumn{9}{c}{\textbf{Llama3.1-70B}}                                                           \\ \midrule
%\textcolor{cyan}{Zero-shot}                      &      0.54          &     3.53       &       -      &     0.40           &       4.87       &         -      &      0.39        &    4.05         &         -         \\
%\textcolor{cyan}{Zero-shot (CoT)}                      &     0.45          &    3.69       &      -      &       0.48         &     4.50         &         -       &       0.49       & 3.91            &   -              \\
%\textcolor{cyan}{Few-shot (Standard, Dyn\_BAII)} &                &            &      -       &                &              &          -      &              &             &        -         \\
%\textcolor{cyan}{Few-shot (CoT, Dyn\_BERT/Dyn\_BAII)}      &                &            &      -       &                &              &          -    &              &             &                -   \\
Knowledge Retrieval (\textit{n}=0)           &   0.19         &  7.58  &  -  &      0.13   &   8.19      & -  &    0.09      &  9.13  &    -   \\
Diagnosis Strategy (\textit{n}=0)    &        0.17        &       7.28     &       -      &      0.11          &      8.74        &          -      &       0.20       &      6.81       &           -      \\
History Taking (\textit{n}=5)         & 0.45           & 4.15    &  - & 0.29        & 6.48   &     -   & 0.30         & 6.04      &   -  \\
Retrieval+History Taking (\textit{n}=5)  &      0.39      & 5.03   &  -  &  0.34  &  6.86       & -  &     0.29   &   5.86 &    -   \\
Diagnosis+History Taking (\textit{n}=5)  &     0.50      &  2.89 &  -  & 0.24 &    7.33   & -  &       &    &    -   \\
%History Taking (\textit{n}=10)        & 0.58           & 3.12     & - & 0.33        & 5.82    &    -   & 0.36         & 4.51    &    -   \\
History Taking (\textit{n}=15)        & 0.56           & 3.50      &- & 0.36        & \textbf{5.36}       &  -  & 0.31         & 4.80    &    -   \\\cmidrule(lr){2-10}
%Retrieval (Wiki) \textcolor{red}{rerun}                   &            &    &  -  &         &         & -  &          &    &    -   \\
%MEDDxAgent         &                &            &             &                &              &            &                &              &        \\
MEDDxAgent (\textit{iter}=1)                       & 0.61           & 2.91    & ~~0.00  & 0.29        & 7.05       & ~~0.00   & 0.39         & 5.05   &     ~~0.00   \\
MEDDxAgent (\textit{iter}=2)                       & \textbf{0.71}   & \textbf{2.20}      & +0.41 & 0.37        & 6.26      & +0.07   & \textbf{0.48}         & 4.48  &    +0.75     \\
MEDDxAgent (\textit{iter}=3)                       & 0.68   & 2.30    & +0.17  & \textbf{0.42}        & 6.31     &   +0.26   & \textbf{0.48}         & \textbf{4.30}      &   +0.44  \\\midrule
                               & \multicolumn{9}{c}{\textbf{Llama3.1-8B}}                                                            \\\midrule
%\textcolor{cyan}{Zero-shot}                      &    0.45            &   9.00         &   -          &    0.27             &     7.02         &      -         &    0.33           &  5.45           &             -     \\
%\textcolor{cyan}{Zero-shot (CoT)}                      &    0.45            &   4.51         &   -          &    0.27             &     7.25         &      -         &    0.24           &  5.65           &             -     \\
%\textcolor{cyan}{Few-shot (Standard, Dyn\_BAII)} &                &            &     -        &                &              &        -      &              &             &             -      \\
%\textcolor{cyan}{Few-shot (CoT, Dyn\_BERT/Dyn\_BAII)}     &                &            &       -      &                &              &         -     &              &             &           -        \\
Knowledge Retrieval  (\textit{n}=0)     &     0.20       &  7.49  &  -  &   0.11      &  8.86       & -  &     \textbf{0.11}     &  8.58  &    -   \\
Diagnosis Strategy  (\textit{n}=0)   &       0.16         &       8.45     &       -      &      0.03          &      10.37        &          -      &              &             &           -      \\
History Taking (\textit{n}=5)         & 0.23           & 6.85    & -  & 0.10        & 8.78        &  - & 0.05         & 8.38       &   - \\
Retrieval+History Taking (\textit{n}=5)  &      0.21      & 7.42   &  -  &  0.09  &  9.48       & -  &     0.04   &   9.69 &    -   \\
Diagnosis+History Taking (\textit{n}=5)  &           &   &  -  &   &       & -  &       &    &    -   \\
%History Taking (\textit{n}=10)        & 0.35           & 5.46    &  - & 0.12        & 8.39     &   -   & \textbf{0.13}         & 8.25   &     -   \\
History Taking (\textit{n}=15)        & 0.40           & 5.44   &  -  & 0.11        & \textbf{8.30}       &  -  & \textbf{0.11}        & 8.95       &  -  \\\cmidrule(lr){2-10}
%Retrieval (Wiki) \textcolor{red}{rerun}                   &            &    &  -  &         &         & -  &          &    &    -   \\
%MEDDxAgent         &                &            &             &                &              &               &                &              &     \\
MEDDxAgent (\textit{iter}=1)                       & 0.34           & 5.25   &   ~~0.00 & 0.11        & 9.38       &  ~~0.00  & 0.08         & 8.47    &    ~~0.00   \\
MEDDxAgent (\textit{iter}=2)                       & 0.56           & 3.59    & +1.73  & \textbf{0.14}        & 9.22       &  +0.22  & 0.09         & \textbf{8.11}      &  +0.44   \\
MEDDxAgent (\textit{iter}=3)                       & \textbf{0.58}           & \textbf{3.10}    &  +1.23 & 0.12        & 9.07     & +0.17     & 0.07         & 8.56    &  +0.38  \\  
\bottomrule
    \end{tabular}
    \caption{Interactive experiment performance across 3 datasets, without \textit{full} patient profile. We compare the single-turn (\textit{upper}) with the proposed iterative setup for MEDDxAgent (\textit{bottom}). The selection of the agents and simulator are optimized (\autoref{subsec:optimize-agents}), unless controlled by the number of questions ($n$) asked from history taking simulator.\cc{May be we just need 3 entries of single turn for best agents and simulator compared to MEDDxAgent? For the others we leave it for ablation study?}} %\cl{why we don't have the baseline with diagnosis strategy only without full patient profile (e.g., few-shot CoT, Dyn\_BAII?)}}
    \label{tab:interactive_overall}
    \vspace{-1.8em}
\end{table*}
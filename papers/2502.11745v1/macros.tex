%%%%%%%%%%%%% Mechanism's Name %%%%%%%%%%%%%%%% 


%%%%%%%%%%%%% Author's Colors %%%%%%%%%%%%%%%% 
\definecolor{gfored}{rgb}{0.580, 0.050, 0.211}
\definecolor{ao}{rgb}{0.007, 0.520, 0.867}
\definecolor{moegi}{rgb}{0.357, 0.537, 0.188}
\definecolor{jl}{rgb}{1.0, 0.2, 0.8}
\definecolor{brown(web)}{rgb}{0.65, 0.16, 0.16}
\definecolor{bisque}{rgb}{1.0, 0.89, 0.77}
\definecolor{nbs}{rgb}{0.88, 0.07, 0.37}
\definecolor{yt}{rgb}{0.58, 0.44, 0.86}
\definecolor{iy}{rgb}{0.0, 0.36, 0.05}
\definecolor{burntorange}{rgb}{0.8, 0.33, 0.0}
\definecolor{ouscolor}{rgb}{0.25, 0.41, 0.88}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{%
  \node[shape=circle,fill,inner sep=0.5pt] (char) {\textcolor{white}{#1}};}%
}%

\newcommand{\dingZero}{\circledtest{0}}
\newcommand{\dingOne}{\circledtest{1}}
\newcommand{\dingTwo}{\circledtest{2}}
\newcommand{\dingThree}{\circledtest{3}}
\newcommand{\dingFour}{\circledtest{4}}
\newcommand{\dingFive}{\circledtest{5}}
\newcommand{\dingSix}{\circledtest{6}}


\newcommand{\one}{1)}
\newcommand{\two}{2)}
\newcommand{\three}{3)}
\newcommand{\four}{4)}
\newcommand{\five}{5)}
\newcommand{\six}{6)}
\newcommand{\seven}{7)}
\newcommand{\eight}{8)}



%\newif\ifdraft


% \newcommand{\xxx}[1]{\param{XXX}} % to highlight hardcoded numbers
\newcommand{\addrefs}[0]{\textcolor{orange}{[CITE]}}

\newcommand{\ignore}[1]{}

\newcommand{\outlinep}[1]{\noindent\textbf{#1}}
\newcommand{\outline}[1]{\textcolor{orange}{\noindent\textbf{[OUTLINE]: #1}}}

% \usepackage[colorinlistoftodos,prependcaption,textsize=scriptsize]{todonotes} % For margin notes
%  
%\iffalse
%\let\marginpar\marginnote
%\setlength{\marginparwidth}{0.4in}
%\newcommand\revmid[2]{\todo[linecolor=#1,backgroundcolor=#1!15,bordercolor=#1]{\textcolor{black}%{\textbf{#2}}}}
%\fi

\ifdraft
    \newcommand{\param}[1]{\textcolor{red}{#1}} 
\else
\fi

\lstset { %
    language=Matlab,
    %backgroundcolor=\color{black!5}, % set backgroundcolor
    basicstyle=\footnotesize,% basic font setting
    numbers=left,
    xleftmargin=2em,
    frame=single,
    framexleftmargin=2em,
    %basicstyle       = \ttfamily,
    keywordstyle     = \bfseries,
    identifierstyle  = \color{blue},
    commentstyle     = \color{olive},
    moredelim        = [s][\color{ForestGreen}]{/**}{*/},
    stringstyle      = \color{magenta},
    showstringspaces = false,
    columns          = fullflexible,
    escapechar       = {|}
}  
%%%%%%%%%%%% Filled Circle with Index Number %%%%%%%%%%%% 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{frenchblue}{rgb}{0.19, 0.55, 0.91}

\usepackage[most]{tcolorbox} 
\tcbset{before skip=1.5pt, after skip=4pt}

\newtcolorbox[auto counter]{obsx}[3][]{%
    colframe = #2!45,
    colback  = #2!10,
    coltitle = #2!20!black, 
    colbacktitle=#2!20,
    coltitle=black,
    fonttitle=\bfseries, 
    title=#3~\thetcbcounter.\ ,
    enhanced,
    attach boxed title to top left={yshift=-2.8mm, xshift=0.15cm},
    bottom=-2.2pt,
    %top=0.5pt,
    #1% 
}


\usepackage[most]{tcolorbox} 
\newtcolorbox[auto counter]{tkx}[2][]{%
    enhanced, breakable, center title,
    colframe = #2!45,
    colback  = #2!10,
    %coltitle = #2!20!black, 
    colbacktitle=#2!20,
    %coltitle=black,
    %fonttitle=\bfseries, 
    %title=\ ,
    %enhanced,
    %attach boxed title to top left={yshift=-2.6mm, xshift=0.15cm},
    left=-0.5pt,
    right=-0.5pt,
    bottom=-2pt,
    top=-0.25pt,
    #1% 
}





\newcommand{\secref}[1]{§\ref{#1}}
\newcommand{\secsref}[1]{§§\ref{#1}}
\newcommand{\tabref}[1]{Table~\ref{#1}}
\newcommand{\algref}[1]{Alg.~\ref{#1}}
\newcommand{\figref}[1]{Fig.~\ref{#1}}
\newcommand{\figsref}[1]{Figs.~\ref{#1}}
\newcommand{\expref}[1]{Exp.~\ref{#1}}
\newcommand{\expsref}[1]{Exps.~\ref{#1}}
\newcommand{\obsref}[1]{Obsv.~\ref{#1}}
\newcommand{\obssref}[1]{Obsvs.~\ref{#1}}
\newcommand{\obsvref}[1]{Obsv.~\ref{#1}}
\newcommand{\obsvsref}[1]{Obsvs.~\ref{#1}}
\newcommand{\takeref}[1]{Takeaway~\ref{#1}}
\newcommand{\fnref}[1]{\textsuperscript{\ref{#1}}}


\definecolor{amber}{rgb}{1.0, 0.49, 0.0}
\definecolor{awesome}{rgb}{1.0, 0.13, 0.32}
\definecolor{dollarbill}{rgb}{0.52,0.73,0.4}
\definecolor{moegi}{rgb}{0.357, 0.537, 0.188}
\definecolor{burgundy}{rgb}{0.5, 0.0, 0.13}
\definecolor{ballblue}{rgb}{0.13, 0.67, 0.8}
\definecolor{ups-truck}{rgb}{0.53, 0.28, 0.21}
\definecolor{airforceblue}{rgb}{0.36, 0.54, 0.66}
\definecolor{cadmiumgreen}{rgb}{0.0, 0.42, 0.24}
\definecolor{darkcyan}{rgb}{0.0, 0.55, 0.55}
\definecolor{caribbeangreen}{rgb}{0.0, 0.8, 0.6}
\definecolor{flamingopink}{rgb}{0.99, 0.56, 0.67}
\definecolor{jazzberryjam}{rgb}{0.65, 0.04, 0.37}
\definecolor{mediumpersianblue}{rgb}{0.0, 0.4, 0.65}
\definecolor{coolblack}{rgb}{0.0, 0.18, 0.39}
\definecolor{bleudefrance}{rgb}{0.19, 0.55, 0.91}
\definecolor{ao}{rgb}{0.0, 0.0, 1.0}
\definecolor{babyblueeyes}{rgb}{0.63, 0.79, 0.95}
\definecolor{darkwarmgray}{rgb}{0.2,0,0}
\definecolor{brightpink}{rgb}{1.0, 0.0, 0.5}
\definecolor{iy}{rgb}{0.0, 0.36, 0.05}
\definecolor{nbcolor}{rgb}{1.0, 0.33, 0.64}
\definecolor{lightmauve}{rgb}{0.86, 0.82, 1.0}
% \newcommand{\circled}[1]{{\tikz[baseline=(char.base)]{\node[shape=circle,inner sep=1pt,fill=black, text=white] (char) {\footnotesize \textbf{#1}};}}}
% \newcommand{\circledletter}[1]{\tikz[baseline=(char.base)]{\node[shape=circle,inner sep=1pt,fill=black, text=white] (char) {\tiny \textbf{#1}};}}

\DeclareRobustCommand{\bgyellow}[1]{\textbf{{\sethlcolor{soulyellow}\hl{#1}}}}
\DeclareRobustCommand{\bgblue}[1]{\textbf{{\sethlcolor{babyblueeyes}\hl{#1}}}}
\DeclareRobustCommand{\bgred}[1]{\textbf{{\sethlcolor{red}\hl{#1}}}}
\DeclareRobustCommand{\bgpink}[1]{\textbf{{{\sethlcolor{flamingopink}{\hl{#1}}}}}}


\newcommand{\squishlist}{
 \begin{list}{$\circ$}
  { \setlength{\itemsep}{0pt}
     \setlength{\parsep}{0pt}
     \setlength{\topsep}{0pt}
     \setlength{\partopsep}{0pt}
     \setlength{\leftmargin}{1em}
     \setlength{\labelwidth}{1em}
     \setlength{\labelsep}{0.5em} } }

\newcommand{\squishsublist}{
\begin{list}{$\rightarrow$}
 { \setlength{\itemsep}{0pt}
    \setlength{\parsep}{0pt}
    \setlength{\topsep}{-10em}
    \setlength{\partopsep}{-3pt}
    \setlength{\leftmargin}{1em}
    \setlength{\labelwidth}{1em}
    \setlength{\labelsep}{0.5em} } }

\newenvironment{squishenum}
{\begin{enumerate}[leftmargin=*]
  \setlength{\itemsep}{0em}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}
  \setlength{\topsep}{3pt}
  \setlength{\partopsep}{0pt}}
{\end{enumerate}}

\newcommand{\squishend}{
  \end{list}  }

\newcommand{\head}[1]{\noindent\textbf{#1.}} 
\newcommand{\subhead}[1]{\noindent\textit{#1.}} 


\ifrev
    
    % \newcommand{\cqrev}[1]{\textcolor{jazzberryjam}{#1}}
    % \newcommand{\iqrev}[1]{\textcolor{blue}{#1}}
    % \newcommand{\mirev}[1]{\textcolor{darkblue}{#1}}
    % \newcommand{\cql}[2]{#2\todo[size=\small,color=jazzberryjam]{\textbf{\textrm{\textcolor{white}{#1}}}}}
    % \newcommand{\iql}[2]{#2\todo[size=\small,color=babyblueeyes]{\textbf{\textrm{\textcolor{black}{#1}}}}}
    % \newcommand{\todorev}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{\textbf{@TODO:} #1}}}
    \newcommand{\cqrev}[1]{{#1}}
    \newcommand{\iqrev}[1]{{#1}}
    \newcommand{\mirev}[1]{{#1}}
    \newcommand{\cql}[1]{}
    \newcommand{\iql}[1]{}
\else
    \newcommand{\cqrev}[1]{{#1}}
    \newcommand{\iqrev}[1]{{#1}}
    \newcommand{\mirev}[1]{{#1}}
    \newcommand{\cql}[1]{}
    \newcommand{\iql}[1]{}
\fi

\ifshepherd
    
    % \newcommand{\srev}[1]{\textcolor{jazzberryjam}{#1}}
    % \newcommand{\ssrev}[1]{\textcolor{jazzberryjam}{#1}}
    % \newcommand{\sql}[2]{#2\todo[size=\small,color=jazzberryjam]{\textbf{\textrm{\textcolor{white}{#1}}}}}
    % \newcommand{\todorev}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{\textbf{@TODO:} #1}}}
    \newcommand{\srev}[1]{{#1}}
    \newcommand{\ssrev}[1]{{#1}}
    \newcommand{\sql}[1]{}
\else
    \newcommand{\srev}[1]{{#1}}
    \newcommand{\ssrev}[1]{{#1}}
    \newcommand{\sql}[1]{}
\fi


\ifdraft
% \paperwidth=\dimexpr \paperwidth + 4cm\relax
% \oddsidemargin=\dimexpr\oddsidemargin + 2cm\relax
% \evensidemargin=\dimexpr\evensidemargin + 2cm\relax
% \marginparwidth=\dimexpr \marginparwidth + 2cm\relax
% \setlength{\marginparwidth}{4cm}
\fi
\newcommand{\gf}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\newcommand{\agy}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
% \newcommand{\agy}[2]{\ifnum#1=\value{version}{\textcolor{red}{#2}}\else{#2}\fi}
\newcommand{\atb}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\newcommand{\yct}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
% \newcommand{\yct}[2]{\ifnum#1=\value{version}{\textcolor{yt}{#2}}\else{#2}\fi}
\newcommand{\ous}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\newcommand{\iey}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
% \newcommand{\iey}[2]{\ifnum#1=\value{version}{\textcolor{iy}{#2}}\else{#2}\fi}
\newcommand{\nb}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\newcommand{\hluo}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\newcommand{\om}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
% \newcommand{\om}[2]{\ifnum#1=\value{version}{\textcolor{blue}{#2}}\else{#2}\fi}



\newcommand{\agytodo}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{TODO:~#2}}\else{}\fi}
\newcommand{\ycttodo}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{TODO:~#2}}\else{}\fi}
\newcommand{\ieytodo}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{iey}{TODO:~#2}}\else{}\fi}


\newcommand{\agycomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{Giray: #2}}\else{}\fi}
\newcommand{\atbcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{orange}{Atb: #2}}\else{}\fi}
\newcommand{\yctcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{Yahya: #2}}\else{}\fi}
\newcommand{\ouscomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{ouscolor}{Oguzhan: #2}}\else{}\fi}
\newcommand{\gfcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{purple}{Geraldo: #2}}\else{}\fi}
\newcommand{\ieycomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{iy}{Ismail: #2}}\else{}\fi}
\newcommand{\omcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{gfored}{Onur: #2}}\else{}\fi}
\newcommand{\nbcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{nbcolor}{Nisa: #2}}\else{}\fi}
\newcommand{\hluocomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{moegi}{Haocong: #2}}\else{}\fi}
\newcommand{\versionedparam}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\providecommand{\param}[1]{\versionedparam{\value{version}}{#1}}
\newcommand{\N}[0]{\versionedparam{\value{version}}{XX}}


\newcommand{\X}[0]{PaCRAM}
\newcommand{\Xh}[0]{\mbox{PaCRAM-H}}
\newcommand{\Xm}[0]{\mbox{PaCRAM-M}}
\newcommand{\Xs}[0]{\mbox{PaCRAM-S}}
\newcommand{\Xlong}[0]{Partial Charge Restoration for Aggressive Mitigation}

\newcommand*\DRAMCMD[1]{\texttt{#1}}
\newcommand*\DRAMTIMING[1]{t\textsubscript{#1}}
\newcommand*\nCHIPS{388}
\newcommand*\nMODULES{30}


\newcommand{\equ}[2]{
\vspace{-0.75em}
\begin{equation}
    \footnotesize
    #1
    \label{#2}
    \vspace{0.25em}
\end{equation}
}



\newcommand{\revtag}[1]{}
\newcommand{\copied}[2]{#2}
% \ifcameraready
%     \renewcommand{\copied}[2]{#2}
% \else
%     \ifrev 
%         \renewcommand{\revtag}[1]{\todo{\footnotesize #1}}
%     \else
%         \renewcommand{\copied}[2]{\todo{Copied from #1}\textcolor{gray}{#2}}
%     \fi
% \f

%

\newcounter{obs}
\setcounter{obs}{0}
\newcommand\observation[1]{
\refstepcounter{obs}
\begin{tkx}{moegi}
\noindent\textbf{Observation~\theobs.} #1
\end{tkx}
}


\newcounter{tkw}
\setcounter{tkw}{0}
\newcommand\takeaway[1]{
\refstepcounter{tkw}
\begin{tkx}{lightmauve}
\small
\noindent\textbf{Takeaway~\thetkw.} \textit{#1}
\end{tkx}
}
   
\newcounter{take}
\setcounter{take}{0}
\newcommand\takebox[1]{\refstepcounter{take}
    \begin{tcolorbox}[colback=white!25!white,colframe=black!65!white, arc=1pt, boxrule=0.5pt, left=2pt,right=2pt,top=0pt,bottom=0pt,  title=\textbf{{Takeaway \thetake.}}]
        \emph{{#1}}
   \end{tcolorbox}
}


\newcommand\revmid[2]{\todo[linecolor=#1,backgroundcolor=#1!15,bordercolor=#1]{\textcolor{black}{\textbf{#2}}}}



\titlespacing\section{0pt}{5pt plus 2pt minus 2pt}{0pt plus 2pt minus 2pt}
\titlespacing\subsection{0pt}{5pt plus 2pt minus 2pt}{0pt plus 2pt minus 2pt}
\titlespacing\subsubsection{0pt}{5pt plus 2pt minus 2pt}{0pt plus 2pt minus 2pt}


 \makeatletter
 \g@addto@macro{\normalsize}{%
   \setlength{\abovedisplayskip}{2pt plus 0.5pt minus 1pt}
   \setlength{\belowdisplayskip}{2pt plus 0.5pt minus 1pt}
   \setlength{\abovedisplayshortskip}{0pt}
   \setlength{\belowdisplayshortskip}{0pt}
   \setlength{\intextsep}{2pt plus 1pt minus 1pt}
   \setlength{\textfloatsep}{2pt plus 1pt minus 1pt}
   \setlength{\floatsep}{2pt plus 1pt minus 1pt}
   \setlength{\skip\footins}{3.5pt plus 1pt minus 1pt}}
   \setlength{\abovecaptionskip}{2pt plus 1pt minus 1pt}
\makeatother
 

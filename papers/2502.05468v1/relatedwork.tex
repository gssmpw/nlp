\section{Related Works}
Decision-making under uncertainty has driven research in decision-focused learning, robust optimization, and risk-aware optimization. We review these approaches and their limitations for high-dimensional uncertainty and risk-sensitive decisions, motivating our proposed framework.

Decision-focused learning (DFL) enhances decision-making under uncertainty by integrating prediction and optimization into a single framework. \citet{bengio1997using} showed that optimizing predictive models for decision outcomes improves financial performance. 
Differentiable optimization layers have further expanded DFL applications \cite{agrawal2019differentiable}. For example, \citet{pmlr-v70-amos17a} introduced differentiable quadratic programs, enabling backpropagation through constrained optimization, while \citet{agrawal2019differentiable} extended this to all convex programs. Parallel work has explored integrating integer programming into neural networks~\cite{NEURIPS2020_51311013,wilder2019melding}.

However, existing DFL methods rely on single-point predictions, failing to capture uncertainty and leading to suboptimal decisions~\cite{koppen2000curse,ben2009robust}. Additionally, they typically optimize for average-case performance, making them unsuitable for risk-sensitive applications~\cite{Mandi_2024}. Approaches like Conformal-Predict-Then-Optimize (CPO)~\cite{patel2024conformal} attempt to address this by constructing fixed uncertainty sets but can be overly conservative, especially in high-dimensional settings.

Robust Optimization (RO) provides a principled approach to decision-making under uncertainty by ensuring solutions remain feasible under the worst-case scenario~\cite{ben2002robust,bertsimas2004robust,ben2006extending}. Instead of relying on probabilistic assumptions about uncertain parameters, RO constructs uncertainty sets that define the range of possible parameter values \cite{bertsimas2011theory} and aims to find the decision that is robust against the worst-case in the uncertainty sets. This approach has found applications in domains such as supply chains \cite{bertsimas2004robust}, currency portfolio management \cite{fonseca2011robust}, and power system optimization \cite{10384836}. 

% \woody{There are two limitations in RO: 1. difficult to specify the uncertainty set. most of the literature relies on the heuristic choice of uncertainty set; 2. being overly conservative due to relying on the single worst case scenarios.}
Despite its guarantees, the solutions suggested by RO suffer from two major limitations: 
($i$) Uncertainty set construction usually relies on heuristic choices, making it difficult to capture the real dynamics in the real-world applications~\cite{10384836}.
($ii$) Such pre-specified uncertainty sets tend to be overly conservative~\cite{Roos2020ReducingConservatism} as it focuses solely on the worst-case outcome, whereas many high-stakes applications require accounting for multiple adverse scenarios.
% To alleviate this limitation, conditional value-at-risk (CVaR) has been widely adopted as a measure for quantifying high-loss scenarios beyond a given risk level~\cite{gabrel2014recent,lotfi2018robust}. CVaR optimizes over the worst $\alpha$-quantile of possible outcomes, providing a principled approach to minimizing expected costs in tail regions.

% \woody{Consider adding a discussion on generative model somewhere in the related work: The proposed framework also relates to generative modeling ...}

The proposed framework also relates to generative modeling. Generative modeling has shown promise for a number of fields such as image generation~\cite{ho2020denoising}, chemical species design~\cite{anstine2023generative}, and trajectory planning~\cite{liang2024multi}. Recently, flow-based generative modeling approaches outperform others by establishing a mapping between complex distributions and a simple prior directly~\cite{lipman2022flow,zheng2023guided}. In this study, we also adopt the flow-based method, conditional normalizing flows (CNFs)~\cite{winkler2019learning}, to capture the target distribution in high-risk regions.

\newcommand{\insertTableApproxResults}{%
\begin{table*}[t]
    \centering
    \renewcommand{\arraystretch}{1.6}
   \begin{tabular}{|c|c|c|}
    \hline
    Algorithm & Assumptions on buyer valuations & Time complexity  \\ \hline
    \citet{hartline2005near} & --  & $\bigOtilde(2^N \eps^{-N})$    \\ \hline
    \citet{chawla2022pricing} & Monotonicity & $N^{\bigO\rbr{\eps^{-2}\log\eps^{-1}}}$  \\ \hline
    \multirow{3}{*}{\citet{chen2024learning}} 
    & Monotonicity, $K$ types & $\bigOtilde(N^K \eps^{-K}) $ \\ \cline{2-3}
    & Monotonicity, $K$ types, smoothness & $\bigOtilde\left( \eps^{-2K}  \right)$ \\ \cline{2-3}
    & Monotonicity, $K$ types, diminishing return & $\bigOtilde( \eps^{-3K}\log^K(N) )$ 
    \\ \hline
\end{tabular}
    \vspace{0.05in}
    \caption{Algorithms from prior work applicable for pricing ordered items, along with their assumptions on buyer valuations and time complexities to obtain an $|\buyers|\bigO(\eps)$-optimal solution when there are $N$ total points.
    \citet{chawla2022pricing} were the first to study this problem, assuming monotonic buyer valuations.
    \citet{chen2024learning} studied this problem in the context of data pricing, introducing additional assumptions on buyer valuations, such as finite buyer types, smoothness, and
    diminishing returns. 
    %\kkcomment{@Keran: can you switch the $\numdata$ to $N$ above?} \rcomment{already switched}
    \vspace{-0.2in}
    }\label{tb:approxresults}
\end{table*}
}

\newcommand{\insertOIPAlgo}{%

\begin{algorithm}[t]
    \caption{\label{alg:oipalgo}}
    \begin{algorithmic}[1]
    \State {\bfseries Input:} Buyer valuations $\{\valj\}_{j\in\buyers}$, contributor costs
    $\{\costi\}_{i\in\contributors}$, 
    an algorithm for ordered item pricing $A$, 
    approximation parameter $\eps$.
    \State \textbf{for} $N\in \{1,2,\dots  \frac{|\buyers|}{\cost_1}\}$:
    \State \quad\quad  $\itemprice_N \leftarrow A(\{\valj\}_{j\in\buyers}, N, \eps)$.
        \Comment{Execute $A$ to obtain an $|\buyers|\bigO(\eps)$-optimal pricing curve.}
    \State \quad\quad $\mmNj \leftarrow \mjp(N, \itemprice_N)$ for all $j\in\buyers$.
                \Comment{Compute buyer dataset sizes. See~\eqref{eqn:buyerpurchasemodel}.}
    \State \quad\quad ${\rm profit}_N \leftarrow \sum_{i\in\buyers} \itemprice_N(\mmNi) - \cost_1 N$.
                \Comment{Compute the profit if collecting $N$ data.}
    \State $\numdataA \leftarrow \argmax_{N\in \left\{1,2,\dots  \frac{|\buyers|}{\numdata}\right\}} {\rm profit}_N$.
    \Comment{Find the optimal data collection amount.}
    \State $\mmjA \leftarrow \mm_{\numdataA, j}$, \quad $\pricejA \leftarrow \itemprice_{\numdataA}(\mmjA)$.
    \Comment{Optimal prices and dataset sizes for buyer.}
    \State \textbf{Return: } $\numdataA$, $\{\mmjA\}_{j\in\buyers}$, $\{\pricejA\}_{j\in\buyers}$
\end{algorithmic}
\end{algorithm}

}

\newcommand{\insertAlgoMain}{%
    \begin{algorithm}[H]
 
    \caption{\label{alg:mechanism}}
   \begin{algorithmic}[1]
        \State
        {\bfseries Input:} Buyer valuations $\{\valj\}_{j\in\buyers}$, contributor costs $\{\costi\}_{i\in\contributors}$, algorithm for ordered item pricing $A$, approximation
            parameter $\eps$. %an $\eps$-revenue optimal algorithm $A$.
        \State
        \textbf{The broker: }
        \State \hspace{0.6cm} $\numdataA$, $\{\mmjA\}_{j\in\buyers}$, $\{\pricejA\}_{j\in\buyers}$ \leftarrow \text{Execute Algorithm~\ref{alg:oipalgo} with $\{\valj\}_{j\in\buyers}$, $\{\costi\}_{i\in\contributors}$, $A$, $\eps$.  }$
        \State \hspace{0.6cm} Instruct contributors to collect $\{\nnopti\}_{i\in\contributors}$ where,
        \[
                \nnopt_1 = \numdataA-1, \quad \nnopt_2 = 1, \quad \nnopt_j = 0 \text{ for all } j\in \{3,\dots,|\contributors|\}.
        \]
      
        \State
        \textbf{Each contributor $i \in \contributors$:}
        \State
        \hspace{0.6cm}
         Chooses a strategy $\strati = (\colamnti, \subfunci)$. 
        \State 
        \hspace{0.6cm}
         Collects $\nni$ data points $\initdatai$, and submits $\subdatai = \subfunci(\initdatai)$ . 
        \State
        \textbf{The broker:}
        \State 
        \hspace{0.6cm}   Receive  $\{\subdatai\}_{i\in\contributors}$ from contributors.
        \State \hspace{0.6cm} Let   $Y \leftarrow \subdata_1 \cup \subdata_2$ be the combined dataset of the first two contributors.
       % \Comment{The combined dataset}
        \State
        \hspace{0.6cm} Allocate  $\mmoptj$ ($=\mmjA$) randomly chosen points from $Y$ to each buyer $j \in \buyers$.
        \State \hspace{0.6cm} Charge $\priceoptj$ from each buyer $j\in\buyers$ (see~\eqref{eq:buyer_pay}).

        \State
        \hspace{0.6cm} Pay $\payopti$ to each contributor $i \in \contributors$ (see~\eqref{eq:contrib_pay}).
        

   \end{algorithmic}   
\end{algorithm}
}
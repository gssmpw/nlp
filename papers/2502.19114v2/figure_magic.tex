\tikzpic{blockPic}{5}{
    \definecolor{leftColor}{HTML}{ffffff};
    \definecolor{rightColor}{HTML}{f4f4f4};

    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;
    \node[align=center] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}
\tikzpic{coloredBlockPic}{7}{
    %\definecolor{slotColor}{RGB}{200, 222, 227};

    \foreach \leftColor\rightColor in {#6} {
        \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=\leftColor, right color=\rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;
        \node[align=center, color=#7] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

        \foreach \numNorth\numEast\numSouth\numWest in {#4} {
            \foreach \north\east\south\west in {#5} {
                \foreach \port [count=\i] in \north {
                    \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
                }
                \foreach \port [count=\i] in \east {
                    \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
                }
                \foreach \port [count=\i] in \south {
                    \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
                }
                \foreach \port [count=\i] in \west {
                    \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
                }
            }
        }
    }
}

\tikzpic{grayBlockPic}{5}{
    %\definecolor{slotColor}{RGB}{200, 222, 227};
    \definecolor{leftColor}{HTML}{d9d9d9};
    \definecolor{rightColor}{HTML}{d9d9d9};

    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}

    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;
    \node[align=center] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}
\tikzpic{emptyBlockPic}{5}{
    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}

\tikzpic{aluPic}{3}{
    \pgfmathsetlengthmacro{\aluUnitSize}{{((#2) / 5)}};
    \definecolor{leftColor}{HTML}{ffffff};
    \definecolor{rightColor}{HTML}{f4f4f4};

    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] 
        (\aluUnitSize, 0) -- 
        (4 * \aluUnitSize, 0) -- 
        (5 * \aluUnitSize, {((#3))}) -- 
        (4 * \aluUnitSize, {((#3))}) -- 
        (3.5 * \aluUnitSize, {((#3) / 2)}) -- 
        (1.5 * \aluUnitSize, {((#3) / 2)}) -- 
        (1 * \aluUnitSize, {((#3))}) -- 
        (0 * \aluUnitSize, {((#3))}) -- 
        (\aluUnitSize, 0);

    \node[align=center] at ({((#2)) * 0.5}, {(((#3)) / 3)}) {#1};

    \coordinate (East0) at (4.25 * \aluUnitSize, {((#3) / 4)});
    \coordinate (East1) at (4.75 * \aluUnitSize, {((#3) / 4) * 3});

    \coordinate (West) at (0.5 * \aluUnitSize, {((#3) / 2)});

    \coordinate (Rs0) at (0.5 * \aluUnitSize, {((#3))});
    \coordinate (Rs1) at (4.5 * \aluUnitSize, {((#3))});

    \coordinate (Rd) at (2.5 * \aluUnitSize, 0) (Rd);
}

\tikzpic{westOpenBlockPic}{5}{
    \definecolor{leftColor}{HTML}{ffffff};
    \definecolor{rightColor}{HTML}{f4f4f4};
    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;

    \draw[color=white, fill=white] (-0.04cm+#2, -0.04cm) -- +(0.08cm, 0) -- +(0.08cm, {((#3))+0.08cm}) -- +(0, {((#3))+0.08cm}) -- +(0, 0);


    \node[align=center] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}
\tikzpic{eastWestOpenBlockPic}{5}{
    \definecolor{leftColor}{HTML}{ffffff};
    \definecolor{rightColor}{HTML}{f4f4f4};
    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;

    \draw[color=white, fill=white] (-0.04cm, -0.04cm) -- +(0.08cm, 0) -- +(0.08cm, {((#3))+0.08cm}) -- +(0, {((#3))+0.08cm}) -- +(0, 0);
    \draw[color=white, fill=white] (-0.04cm+#2, -0.04cm) -- +(0.08cm, 0) -- +(0.08cm, {((#3))+0.08cm}) -- +(0, {((#3))+0.08cm}) -- +(0, 0);


    \node[align=center] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}

\tikzpic{southOpenBlockPic}{5}{
    \definecolor{leftColor}{HTML}{ffffff};
    \definecolor{rightColor}{HTML}{f4f4f4};
    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;

    \draw[color=white, fill=white] (-0.04cm, 0.02cm) -- +(#2+0.08cm, 0.02cm) -- +(#2+0.08cm, -0.08cm) -- +(-0.04cm, -0.08cm) -- (0, 0);

    \node[align=center] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}

\tikzpic{rotatedBlockPic}{5}{
    \definecolor{leftColor}{HTML}{ffffff};
    \definecolor{rightColor}{HTML}{f4f4f4};
    \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (0, 0) -- +(#2, 0) -- +(#2, {((#3))}) -- +(0, {((#3))}) -- cycle;
    \node[align=center, rotate=90] at ({((#2)) * 0.5}, {(((#3)) / 2)}) {#1};

    \foreach \numNorth\numEast\numSouth\numWest in {#4} {
        \foreach \north\east\south\west in {#5} {
            \foreach \port [count=\i] in \north {
                \coordinate (\port) at ({((#2)) / (\numNorth + 1) * \i}, #3);
            }
            \foreach \port [count=\i] in \east {
                \coordinate (\port) at (#2, {((#3)) / (\numEast + 1) * \i});
            }
            \foreach \port [count=\i] in \south {
                \coordinate (\port) at ({((#2)) / (\numSouth + 1) * \i}, 0);
            }
            \foreach \port [count=\i] in \west {
                \coordinate (\port) at (0, {((#3)) / (\numWest + 1) * \i});
            }
        }
    }
}

\tikzset{blockArrowTo/.style={-{Latex[length=3pt]}}}
\tikzset{blockArrowFrom/.style={{Latex[length=3pt]}-}}
\tikzset{blockArrowBi/.style={{Latex[length=3pt]}-{Latex[length=3pt]}}}

\tikzpic{peArray}{2}{
    \foreach \x in {1,...,#1} {
        \foreach \y in {1,...,#2} {
            \pic (a) at (\x * 0.65cm - 0.65cm, \y * 0.65cm - 0.65cm) {blockPic={\small PE}{0.5cm}{0.5cm}{2/2/2/2}{{Nin,Nout}/{Ein,Eout}/{Sin,Sout}/{Win, Wout}/}};

            \ifnum\y=#2
                \draw[-] (aNin) -- +(0,  0.6cm);
                \draw[-] (aNout) -- +(0,  0.6cm);
            \else
                \draw[-] (aNin) -- +(0,  0.15cm);
                \draw[-] (aNout) -- +(0,  0.15cm);
            \fi

            \ifnum\x=#1
                \draw[-] (aEin) -- +(0.6cm, 0);
                \draw[-] (aEout) -- +(0.6cm, 0);
            \else
                \draw[-] (aEin) -- +(0.15cm, 0);
                \draw[-] (aEout) -- +(0.15cm, 0);
            \fi


            \ifnum\y=1
                \draw[-] (aSin) -- +(0,  -0.6cm);
                \draw[-] (aSout) -- +(0,  -0.6cm);
            \else
                \draw[-] (aSin) -- +(0,  -0.15cm);
                \draw[-] (aSout) -- +(0,  -0.15cm);
            \fi


            \ifnum\x=1
                \draw[-] (aWin) -- +(-0.60cm, 0);
                \draw[-] (aWout) -- +(-0.60cm, 0);
            \else
                \draw[-] (aWin) -- +(-0.15cm, 0);
                \draw[-] (aWout) -- +(-0.15cm, 0);
            \fi
        }
    }
}

\tikzpic{peArrayNoBuffer}{2}{
    \foreach \x in {1,...,#1} {
        \foreach \y in {1,...,#2} {
            \ifthenelse{\equal{\x}{#1}} {
                \ifthenelse{\equal{\y}{1}} {
                    \node[anchor=south west, minimum width = 0.5cm, minimum height=0.5cm, inner sep = 0] (a) at (\x * 0.65cm - 0.65cm, \y * 0.65cm - 0.65cm) {\textbf{$\ddots$}};
                }{
                    \node[anchor=south west, minimum width = 0.5cm, minimum height=0.5cm, inner sep = 0] (a) at (\x * 0.65cm - 0.65cm, \y * 0.65cm - 0.65cm) {$\dots$};
                }
            }{
                \ifthenelse{\equal{\y}{1}} {
                    \node[anchor=south west, minimum width = 0.5cm, minimum height=0.5cm, inner sep = 0] (a) at (\x * 0.65cm - 0.65cm, \y * 0.65cm - 0.65cm) {$\vdots$};
                }{
                    \pic (a) at (\x * 0.65cm - 0.65cm, \y * 0.65cm - 0.65cm) {blockPic={\footnotesize PE}{0.5cm}{0.5cm}{2/2/2/2}{{Nin,Nout}/{Ein,Eout}/{Sin,Sout}/{Win, Wout}/}};
                    \draw[-] (aNin) -- +(0,  0.15cm);
                    \draw[-] (aNout) -- +(0,  0.15cm);
                    \draw[-] (aEin) -- +(0.15cm, 0);
                    \draw[-] (aEout) -- +(0.15cm, 0);
                    \draw[-] (aSin) -- +(0,  -0.15cm);
                    \draw[-] (aSout) -- +(0,  -0.15cm);
                    \draw[-] (aWin) -- +(-0.15cm, 0);
                    \draw[-] (aWout) -- +(-0.15cm, 0);
                }
            }

        }
    }
}

\tikzpic{baseArray}{2}{
    \pic (Ports) at (0, 0) {grayBlockPic={}{#1*0.65cm+5*0.65cm}{#2*0.65cm+5*0.65cm}{///5}{///{CtrlIn, ConfigIn, DataIn, DataOut}}};
    \pic (array) at (0.65cm*2.5 + 0.15cm/2, 0.65cm*2.5+0.15cm/2) {peArray=
        {#1}
        {#2}
    };

    \node[inner sep=0, anchor=north] at (0.65*2.5+0.15/2, 0.65*2.5+0.15) (SouthWestPeBorder) {};
    \node[inner sep=0, anchor=north] at (0.65*2.5+0.15 + #1 * 0.65 - 0.15, 0.65*2.5+0.15) (SouthEastPeBorder) {};

    \node[inner sep=0, anchor=north] at (0.65*2.5+0.15, 0.65*2.5+0.15+0.65*#2-0.15) (NorthWestPeBorder) {};
    \node[inner sep=0, anchor=north] at (0.65*2.5+0.15 + #1 * 0.65 - 0.15, 0.65*2.5+0.15+0.65*#2-0.15) (NorthEastPeBorder) {};

    \pic (bufferNorth) at (0.65*2.5+0.15/2, 0.65*2.5+0.15/2+#2*0.65+0.45) {blockPic={I/O Buffers}{0.65cm * #1-0.15cm}{1*0.85cm}{}{}};
    \pic (agNorth) at (0.65*2.5+0.15/2, 0.65*2.5+0.15/2+#2*0.65) {blockPic={\small Address Generators}{0.65cm * #1-0.15cm}{1*0.35cm}{}{}};

    \pic (bufferWest) at (0.65*2.5+0.15/2+0.65*#1+0.45, 0.65*2.5+0.15/2) {rotatedBlockPic={I/O Buffers}{1*0.85cm}{0.65cm * #2-0.15cm}{}{}};
    \pic (agWest) at (0.65*2.5+0.15/2+0.65*#1, 0.65*2.5+0.15/2) {rotatedBlockPic={\small Address Generators}{1*0.35cm}{0.65cm * #2-0.15cm}{}{}};

    \pic (bufferSouth) at (0.65*2.5+0.15/2, 0.65*0.5 - 0.15/2) {blockPic={I/O Buffers}{0.65cm * #1-0.15cm}{1*0.85cm}{}{}};
    \pic (agSouth) at (0.65*2.5+0.15/2, 0.65*0.5+0.95 - 0.15/2) {blockPic={\small Address Generators}{0.65cm * #1-0.15cm}{1*0.35cm}{}{}};

    \pic (bufferEast) at (0.65*0.5-0.15/2, 0.65*2.5+0.15/2) {rotatedBlockPic={I/O Buffers}{1*0.85cm}{0.65cm * #2-0.15cm}{}{}};
    \pic (agEast) at (0.65*0.5+0.95-0.15/2, 0.65*2.5+0.15/2) {rotatedBlockPic={\small Address Generators}{1*0.35cm}{0.65cm * #2-0.15cm}{}{}};
}

\tikzpic{tcpaPeriphery}{2}{
    \pic (box) at (0, 0) {grayBlockPic={}{#1}{#2}{///}{///}};

    \pgfmathsetlengthmacro{\innerPadding}{1.0cm};
    \pgfmathsetlengthmacro{\outerPadding}{0.25cm};

    \pgfmathsetlengthmacro{\width}{#1 - \outerPadding - \outerPadding}
    \pgfmathsetlengthmacro{\height}{(#2 - 2 * \outerPadding - 3 * \innerPadding) / 4};

    \pic (Gc) at (\outerPadding, \outerPadding + 3 * \innerPadding + 3 * \height)   {blockPic={\glsentrylong{gc}}{\width}{\height}{/1/1/}{/CtrlOut/ConfigIn/}};
    \pic (Cm) at (\outerPadding, \outerPadding + 2 * \innerPadding + 2 * \height)   {blockPic={Configuration\\Manager}{\width}{\height}{1/1/1/1}{ConfigGC/ConfigPE/ConfigLion/ConfigIn}};
    \pic (Lion) at (\outerPadding, \outerPadding + 1 * \innerPadding + 1 * \height) {blockPic={\glsentrylong{lion}}{\width}{\height}{1//1/1}{ConfigIn//DMAOut/RequestsOut}};
    \pic (Bif) at (\outerPadding, \outerPadding)                                    {blockPic={DMA}{\width}{\height}{1/2/1/2}{DMAIn/{DataArrayIn, DataArrayOut}/DebugIn/{DataCtrlIn, DataCtrlOut}}};
} 

\tikzpic{alpacaFPGA}{2}{

    \pgfmathsetlengthmacro{\innerPadding}{1.0cm};
    \pgfmathsetlengthmacro{\outerPadding}{0.25cm};
    \pgfmathsetlengthmacro{\labelHeight}{0.5cm};

    \pgfmathsetlengthmacro{\width}{#1 - \outerPadding - \outerPadding}
    \pgfmathsetlengthmacro{\height}{(#2 - \labelHeight - 2 * \outerPadding - 3 * \innerPadding) / 4};

    \pic (box) at (0, 0) {grayBlockPic={}{#1}{#2}{///}{///}};
    \pic (box) at (0, 0) {blockPic={Host}{#1}{\labelHeight}{///}{///}};

    \pic (Clock) at (\outerPadding, \outerPadding + 3 * \innerPadding + 3 * \height + \labelHeight)   {blockPic={Clock}{\width}{\height}{/1//}{/Out//}};
    \pic (CPU) at (\outerPadding, \outerPadding + 2 * \innerPadding + 2 * \height + \labelHeight)   {blockPic={CPU}{\width}{\height}{//1/}{//Out/}};
    \pic (DMA) at (\outerPadding, \outerPadding + 1 * \innerPadding + 1 * \height + \labelHeight) {blockPic={DMA}{\width}{\height}{1/2/2/}{CtrlIn/{ExtOut, ExtIn}/{IntOut, IntIn}/}};
    \pic (Memory) at (\outerPadding, \outerPadding + \labelHeight)                                    {blockPic={MEM}{\width}{\height}{2///}{{In, Out}///}};
} 

\tikzpic{alpaca}{0}{
    \pic (fpga) at (0, 0) {alpacaFPGA={2.5cm}{8*0.65cm+5*0.65cm}};

    \pic (tcpa) at (8.5, 0) {baseArray={8}{8}};
    \pic (ctrl) at (3, 0) {rotatedBlockPic={I/O}{0.5cm}{8*0.65cm+5*0.65cm}{0/5/0/1}{/{ConfigOut, RequestsIn, DataIn, DataOut, DebugIn}/{}/{FPGA}}};
    \pic (peri) at (4, 0) {tcpaPeriphery={4cm}{8*0.65cm+5*0.65cm}};

    \draw[blockArrowTo]   (periGcCtrlOut.east)  -- (periGcCtrlOut.east -| tcpaPortsCtrlIn.west);
    \draw[blockArrowTo]   (periCmConfigGC)      -- (periCmConfigGC |- periGcConfigIn);
    \draw[blockArrowTo]   (periCmConfigPE)      -- (periCmConfigPE -| tcpaPortsConfigIn);
    \draw[blockArrowTo]   (periCmConfigLion)    -- (periCmConfigLion |- periLionConfigIn);
    \draw[blockArrowFrom] (periCmConfigIn)      -- (periCmConfigIn -| ctrlConfigOut);
    \draw[blockArrowTo]   (periLionRequestsOut) -- (periLionRequestsOut -| ctrlRequestsIn);
    \draw[blockArrowTo]   (periLionDMAOut)      -- (periBifDMAIn);
    \draw[blockArrowFrom] (periBifDataCtrlIn)   -- (periBifDataCtrlIn -| ctrlDataIn);
    \draw[blockArrowTo]   (periBifDataCtrlOut)  -- (periBifDataCtrlOut -| ctrlDataOut);
    \draw[blockArrowTo]   (periBifDataArrayIn)  -- (periBifDataArrayIn -| tcpaPortsDataIn);
    \draw[blockArrowFrom] (periBifDataArrayOut) -- (periBifDataArrayOut -| tcpaPortsDataOut);

    \draw[blockArrowTo]   (fpgaClockOut)  -- (fpgaClockOut -| ctrlFPGA);

    \draw[blockArrowTo]   (fpgaCPUOut)  -- (fpgaCPUOut |- fpgaDMACtrlIn);

    \draw[blockArrowTo]   (fpgaDMAExtOut)  -- (fpgaDMAExtOut -| ctrlFPGA);
    \draw[blockArrowFrom]   (fpgaDMAExtIn)  -- (fpgaDMAExtIn -| ctrlFPGA);

    \draw[blockArrowTo]   (fpgaDMAIntOut)  -- (fpgaMemoryIn);
    \draw[blockArrowFrom]   (fpgaDMAIntIn)  -- (fpgaMemoryOut);
}


\tikzpic{bufferModuleWithoutBus}{2}{
    \foreach \x in {1,...,#1} {
        \pic (bank) at ({1.5cm * (\x - 1)}, 4.5) {rotatedBlockPic={Bank}{1cm}{3cm}{2//2/}{{Nin,Nout}//{Sin,Sout}/}};
        \draw[blockArrowFrom] (bankNin) -- +(0, 0.5cm);
        \draw[blockArrowTo] (bankNout) -- +(0, 0.5cm);

        \draw[blockArrowFrom] (bankSin) -- +(0, -0.5cm);
        \draw[blockArrowTo] (bankSout) -- +(0, -0.5cm);
    }

    \pic (mux) at (0, 3.5cm) {blockPic={Data and Address Crossbar}{#1 * 1.5cm}{0.5cm}{//1/}{//In/}};

    \pgfmathsetlengthmacro{\agSizeWithPadding}{(#1 * 1.5cm) / #2};
    \pgfmathsetlengthmacro{\agPadding}{1.5cm - \agSizeWithPadding};

    \foreach \x in {1,...,#2} {
        \pic (ag) at ({\agSizeWithPadding * (\x - 1)}, 1.5cm) {blockPic={AG}{1.5cm}{1.5cm}{1//2/}{Nout//{Sin,Sout}/}};
        \draw[blockArrowTo] let \p1 = (agNout), \p2=(muxIn) in (agNout) -- (\x1, \y2);

        \draw[blockArrowTo] ([xshift=1.5cm, yshift=-0.5cm] agSout.north) -- ([xshift=1.5cm] agSout.north |- muxIn);
        \draw[blockArrowFrom] ([xshift=1.5cm, yshift=-0.5cm] agSin.north) -- ([xshift=1.5cm] agSin.north |- muxIn);
    }

    \pic (pe) at (0, 0) {southOpenBlockPic={PE}{#1 * 1.5cm}{1.0cm}{}{}};
}

\tikzpic{lion}{2}{
    \pic (box) at (0, 0) {grayBlockPic={}{#1}{#2}{///}{///}};

    \pgfmathsetlengthmacro{\innerPadding}{0.5cm};
    \pgfmathsetlengthmacro{\outerPadding}{0.25cm};
    \pgfmathsetlengthmacro{\labelHeight}{0.5cm};
    \pgfmathsetlengthmacro{\rightOffset}{\innerPadding + \innerPadding};

    \pgfmathsetlengthmacro{\width}{#1 - \outerPadding - \rightOffset}
    \pgfmathsetlengthmacro{\height}{(#2 - 2 * \outerPadding - 2 * \innerPadding - \labelHeight) / 3};

    \pic (pq) at (\outerPadding, \labelHeight + \outerPadding) {blockPic={Priority\\Queue}{\width}{\height}{1/1//}{Out/In//}};
    \pic (config) at (\outerPadding, \labelHeight + \outerPadding + \height + \innerPadding) {blockPic={Configuration\\Memory}{\width}{\height}{1/1/1/}{Out/In/Addr/}};
    \pic (Dma) at (\outerPadding, \labelHeight + \outerPadding + \height + \innerPadding + \height + \innerPadding) {blockPic={Address\,and\,Deadline\\Computation}{\width}{\height}{1/2/1/1}{RequestToDMA/{Config, Addr}/In/RequestToIO}};
    
    \draw[blockArrowTo] (pqOut) -- (configAddr);
    \draw[blockArrowTo] (configOut) -- (DmaIn);
    \draw[blockArrowTo] (DmaConfig) -- +(\rightOffset / 3 * 1, 0) |- (configIn);
    \draw[blockArrowTo] (DmaAddr) -- +(\rightOffset / 3 * 2, 0) |- (pqIn);

    \pic at (0, 0) {blockPic={\glsentrylong{lion}}{#1}{\labelHeight}{}{}};
} 

\tikzpic{bufferDMA}{2}{
    \pic (box) at (0, 0) {grayBlockPic={}{#1}{#2}{///}{///}};

    \pgfmathsetlengthmacro{\innerPadding}{0.5cm};
    \pgfmathsetlengthmacro{\outerPadding}{0.25cm};
    \pgfmathsetlengthmacro{\busHeight}{0.5cm};
    \pgfmathsetlengthmacro{\busOverlap}{0.3cm};

    \pgfmathsetlengthmacro{\width}{#1 - \outerPadding - \outerPadding}
    \pgfmathsetlengthmacro{\height}{(#2 - 2 * \outerPadding - 1 * \innerPadding - \busHeight) / 1};

    \pic (Dma) at (\outerPadding, \outerPadding) {blockPic={DMA}{\width}{\height}{2//1/2}{{BusIn, BusOut}//Request/{IOin, IOout}}};
    \pic (bus) at (-\busOverlap, #2 - \busHeight - \outerPadding) {eastWestOpenBlockPic={Buffer Bus}{#1 + 2 * \busOverlap}{\busHeight}{//2/}{//{In, Out}/}};
    
    \draw[blockArrowTo] (DmaBusOut) -- (DmaBusOut |- busIn);
    \draw[blockArrowFrom] (DmaBusIn) -- (DmaBusIn |- busOut);
} 


\tikzpic{bufferModule}{3}{
    \pic (box) at (7cm, -3.25cm+4.5cm+2cm+0.125cm) {grayBlockPic={}{#3 * #1 * 1.5cm + #3 * 0.5cm}{3.25cm+3.5cm+0.75cm-2cm-0.125cm}{///}{///}};
    \pic (box) at (7cm, -3.25cm+4.5cm) {grayBlockPic={}{#3 * #1 * 1.5cm + #3 * 0.5cm}{1.875cm}{///}{///}};
    \pic (bus) at (6.7cm, 3.5cm+4.5cm) {eastWestOpenBlockPic={Buffer Bus}{#3 * #1 * 1.5cm + #3 * 0.5cm + 0.6cm}{0.5cm}{}{}};
    \foreach \p in {1,...,#3} {
        \pic (module) at ({7.25cm + (#1 * 1.5cm + 0.5cm) * (\p - 1)}, 0) {bufferModuleWithoutBus={#1}{#2}};
    }

    \pic (lion) at (1cm, -3.25cm+4.5cm) {lion={5cm}{4.75cm}};

    \pic (dma) at (1cm, 2cm+4.5cm) {bufferDMA={5cm}{2.25cm}};

    \draw[blockArrowTo] (lionDmaRequestToDMA) -- (lionDmaRequestToDMA |- dmaDmaRequest);
    \draw[blockArrowTo] (lionDmaRequestToIO) -- +(-1cm, 0);

    \draw[blockArrowTo] (dmaDmaIOout) -- +(-1cm, 0);
    \draw[blockArrowFrom] (dmaDmaIOin) -- +(-1cm, 0);

}

\tikzpic{globalController}{7}{
    \pic (box) at (0, 0) {grayBlockPic={}{#1}{#2}{///}{///}};

    \pgfmathsetlengthmacro{\innerPadding}{0.75cm};
    \pgfmathsetlengthmacro{\outerPadding}{0.25cm};
    \pgfmathsetlengthmacro{\labelHeight}{0.5cm};

    \pgfmathsetlengthmacro{\repeatOffset}{\innerPadding * 0.75 / (max(#3, #4, #5, #6, #7))};
    \pgfmathsetlengthmacro{\repeatBottomPadding}{\repeatOffset * (#3 - 1) + \labelHeight};
    \pgfmathsetlengthmacro{\repeatBottomFullPadding}{\repeatOffset * (max(#6, #7) - 1) + \labelHeight};

    \pgfmathsetlengthmacro{\subwidth}{(#1 - 2 * \outerPadding - 3 * \innerPadding - \repeatOffset * (#7 - 1)) / 8};
    \pgfmathsetlengthmacro{\width}{\subwidth * 3};

    \pgfmathsetlengthmacro{\height}{(#2 - 2 * \outerPadding - 2 * \innerPadding - \repeatBottomPadding) / 3};
    \pgfmathsetlengthmacro{\leftInnerPadding}{(#2 - 2 * \height - \labelHeight) / 3};

    \pgfmathsetlengthmacro{\fullWidth}{\subwidth};
    \pgfmathsetlengthmacro{\fullHeight}{#2 - 2 * \outerPadding - \repeatBottomFullPadding};

    \pic (pulse) at ({\outerPadding + 0 * (\width + \innerPadding)}, {\labelHeight + 2 * \leftInnerPadding + \height}) {blockPic={Pulse\\Generator}{\width}{\height}{//1/}{//Out/}};
    \pic (scanner) at ({\outerPadding + 0 * (\width + \innerPadding)}, {\labelHeight + \leftInnerPadding}) {blockPic={Iteration\,Space\\Scanner}{\width}{\height}{1/1//}{In/Out//}};

    \foreach \i in {#7,...,1} {
        \pic (orsel) at ({\outerPadding + 2 * (\width + \innerPadding) + \fullWidth + \innerPadding + (\i - 1) * \repeatOffset}, {\outerPadding + 0 * (\height + \innerPadding) + \repeatBottomFullPadding - (\i - 1) * \repeatOffset}) {rotatedBlockPic={Logic Linker}{\fullWidth}{\fullHeight}{/1//1}{/Out//In}};
        \draw[blockArrowTo] (orselOut) -- +({\repeatOffset * (#7 - 1) + 2 * \outerPadding - (\i - 1) * \repeatOffset}, 0);
    }

    \foreach \i in {#3,...,1} {
        \pic (ineq) at ({\outerPadding + 1.25 * (\width + \innerPadding) + (\i - 1) * \repeatOffset}, {\outerPadding + 0 * (\height + \innerPadding) + \repeatBottomPadding - (\i - 1) * \repeatOffset}) {blockPic={Inequation\\Comparator}{\width}{\height}{/1//1}{/Out//In}};
        \draw[blockArrowTo] (scannerOut) -- +(0.5 * \innerPadding, 0) |- (ineqIn);
        \draw[blockArrowTo] (ineqOut) -- (ineqOut -| orselIn);
    }
    \foreach \i in {#4,...,1} {
        \pic (lower) at ({\outerPadding + 1.25 * (\width + \innerPadding) + (\i - 1) * \repeatOffset}, {\outerPadding + 1 * (\height + \innerPadding) + \repeatBottomPadding - (\i - 1) * \repeatOffset}) {blockPic={Lower Bound\\Comparator}{\width}{\height}{/1//1}{/Out//In}};
        \draw[blockArrowTo] (scannerOut) -- +(0.5 * \innerPadding, 0) |- (lowerIn);
        \draw[blockArrowTo] (lowerOut) -- (lowerOut -| orselIn);
    }
    \foreach \i in {#5,...,1} {
        \pic (upper) at ({\outerPadding + 1.25 * (\width + \innerPadding) + (\i - 1) * \repeatOffset}, {\outerPadding + 2 * (\height + \innerPadding) + \repeatBottomPadding - (\i - 1) * \repeatOffset}) {blockPic={Upper Bound\\Comparator}{\width}{\height}{/1//1}{/Out//In}};
        \draw[blockArrowTo] (scannerOut) -- +(0.5 * \innerPadding, 0) |- (upperIn);
        \draw[blockArrowTo] (upperOut) -- (upperOut -| orselIn);
    }

    \draw[blockArrowTo] (pulseOut) -- (scannerIn);
    \pic at (0, 0) {blockPic={\glsentrylong{gc}}{#1}{\labelHeight}{}{}};
}

\tikzpic{addressGenerator}{2}{
    \pic (box) at (0, 0) {grayBlockPic={}{#1}{#2}{///}{///}};

    \pgfmathsetlengthmacro{\innerPadding}{0.5cm};
    \pgfmathsetlengthmacro{\outerPadding}{0.25cm};
    \pgfmathsetlengthmacro{\labelHeight}{0.5cm};

    \pgfmathsetlengthmacro{\width}{(#1 - 2 * \outerPadding - 2 * \innerPadding) / 3};
    \pgfmathsetlengthmacro{\height}{(#2 - 2 * \outerPadding - 2 * \innerPadding - \labelHeight) / 3};

    \pic (pulse) at      ({\outerPadding + 0 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 2 * (\height + \innerPadding)}) {blockPic={Pulse\\Generator}{\width}{\height}{/1//}{/Out//}};
    \pic (scanner) at    ({\outerPadding + 1 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 2 * (\height + \innerPadding)}) {blockPic={Iteration Space\\Scanner}{\width}{\height}{/1/1/1}{/ToBox/ToIneq/In}};
    \pic (bounding) at   ({\outerPadding + 2 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 2 * (\height + \innerPadding)}) {blockPic={Boundingbox\\Comparator}{\width}{\height}{//1/1}{//Out/In}};
    \pic (ineq) at       ({\outerPadding + 1 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 1 * (\height + \innerPadding)}) {blockPic={Inequation\\Comparator}{\width}{\height}{1//1/}{In//Out/}};
    \pic (subscanner) at ({\outerPadding + 2 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 1 * (\height + \innerPadding)}) {blockPic={Iteration Space\\Scanner}{\width}{\height}{1//1/}{In//Out/}};
    \pic (address) at    ({\outerPadding + 2 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 0 * (\height + \innerPadding)}) {blockPic={Address\\Computation}{\width}{\height}{1///1}{In///Out}};
    \pic (banksel) at    ({\outerPadding + 1 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 0 * (\height + \innerPadding)}) {blockPic={Bank\\Selector}{\width}{\height}{1/1//1}{EnIn/AddrIn//Out}};
    \pic (abuf) at       ({\outerPadding + 0 * (\width + \innerPadding)}, {\labelHeight + \outerPadding + 0 * (\height + \innerPadding)}) {blockPic={Address\\Buffer}{\width}{\height}{/1//1}{/In//Out}};

    \draw[blockArrowTo] (pulseOut) -- (scannerIn);
    \draw[blockArrowTo] (scannerToBox) -- (boundingIn);
    \draw[blockArrowTo] (scannerToIneq) -- (ineqIn);
    \draw[blockArrowTo] (boundingOut) -- (subscannerIn);
    \draw[blockArrowTo] (subscannerOut) -- (addressIn);
    \draw[blockArrowTo] (addressOut) -- (bankselAddrIn);
    \draw[blockArrowTo] (ineqOut) -- (bankselEnIn);
    \draw[blockArrowTo] (bankselOut) -- (abufIn);
    \draw[blockArrowTo] (abufOut) -- +(-2 * \outerPadding, 0);

    \pic at (0, 0) {blockPic={Address Generator}{#1}{\labelHeight}{}{}};
}

\tikzpic{functionalUnit}{1}{
    \pic (box) at (0, 0cm) {grayBlockPic={}{6cm}{2.5cm}{}{}};
    \pic (virtualTarget) at (-0.75cm, 0) {emptyBlockPic={}{0.5cm}{0.5cm}{/1//}{/In//}};

    \pic (virtualCtrlTarget) at (6.25cm, 0) {emptyBlockPic={}{0.5cm}{0.5cm}{///1}{///In}};

    \pic (decoder) at (3cm, 0.125cm) {rotatedBlockPic={Decoder}{0.5cm}{2.125cm}{/2//1}{/{MemIn,BranchOut}//Opcode}};
    \pic (decoderRegs) at (3cm, 0.125cm) {emptyBlockPic={Decoder}{0.5cm}{0.5cm}{///3}{///{Rs0,Rs1,Rd}}};

    \pic (branch) at (0.125cm + 3.75cm, 1.750cm) {blockPic={Branch}{2.0cm}{0.5cm}{/2/1/1}{/{ToCtrl,FromCtrl}/Out/In}};
    \pic (mem) at (0.125cm + 3.75cm, 0.125cm) {blockPic={Instruction\\Memory}{2.0cm}{1.375cm}{1///1}{In///Out}};

    \pic (alu) at (0.25cm, 0.75cm) {aluPic={#1}{2.5cm}{1.25cm}{}{}};

    \draw[blockArrowTo] (branchOut) -- (branchOut |- memIn);
    \draw[blockArrowTo] (memOut) -- (memOut -| decoderMemIn);
    \draw[blockArrowFrom] (branchIn) -- (branchIn -| decoderBranchOut);

    \draw[blockArrowTo] (branchToCtrl) -- (branchToCtrl -| virtualCtrlTargetIn);
    \draw[blockArrowFrom] (branchFromCtrl) -- (branchFromCtrl -| virtualCtrlTargetIn);

    \draw[blockArrowFrom] (aluEast0) -- (aluEast0 -| decoderOpcode);

    \draw[blockArrowTo] (aluEast1) -- +(0.25cm, 0) -- +(0.25cm, 0.70cm) -- ([yshift=0.7cm]aluEast1 -| virtualCtrlTargetIn);

    \draw[blockArrowTo] (decoderRegsRs0) -- (decoderRegsRs0 -| virtualTargetIn);
    \draw[blockArrowTo] (decoderRegsRs1) -- (decoderRegsRs1 -| virtualTargetIn);
    \draw[blockArrowTo] (decoderRegsRd) --  (decoderRegsRd -| virtualTargetIn);

    \draw[blockArrowTo] (aluRd) -- +(0, -0.1cm) -- ([yshift=-0.1cm]aluRd -| virtualTargetIn);
    \draw[blockArrowFrom] (aluRs0) -- +(0, 0.3cm) -- ([yshift=0.3cm]aluRs0 -| virtualTargetIn);
    \draw[blockArrowFrom] (aluRs1) -- +(0, 0.4cm) -- ([yshift=0.4cm]aluRs1 -| virtualTargetIn);
}

\tikzpic{fifo}{3}{
    \foreach \p in {#3,...,1} {
        \pic at (0, {(\p - 1) * #2}) {blockPic={}{#1}{#2}{}{}};
    }
}

\tikzpic{fifoRegisters}{5}{
    \pic at (0, 0) {blockPic={}{#1}{#2}{/2//2}{/{RightIn, RightOut}//{LeftOut, LeftIn}}};

    \pgfmathsetlengthmacro{\horizontalPadding}{((((#1)) - #3 * #4) / (#3 + 1))};
    \pgfmathsetmacro{\slotCount}{scalar((((#2)) - 0.25cm - 0.5cm) / 0.15cm)};

    \foreach \p in {1,...,#3} {
        \pic at (\horizontalPadding * \p + #4 * \p - #4, 0.5cm + 0.125cm) {fifo={#4}{0.15cm}{\slotCount}};
        \coordinate (Id\p) at (\horizontalPadding * \p + #4 * \p - #4 + #4 / 2, #2);
        \coordinate (Od\p) at (\horizontalPadding * \p + #4 * \p - #4 + #4 / 2, 0);
    }

    \pic at (0, 0) {blockPic={#5}{#1}{0.5cm}{}{}};
}


\tikzpic{registerFile}{1}{
    \pgfmathsetlengthmacro{\totalHeight}{#1 * (2.5cm + 0.125cm) - 0.125cm};
    \pgfmathsetlengthmacro{\padding}{(\totalHeight - 1.0cm - 1.0cm - 4.5cm - 3.0cm - 0.125cm * 2) / 3};

    \pic at (-0.125cm, -0.125cm) {grayBlockPic={}{7.50cm}{\totalHeight}{}{}};

    \pic (regFile) at (6.625cm+0.25cm, -0.125cm) {rotatedBlockPic={Data Register File}{0.5cm}{\totalHeight}{///2}{///{In, Out}}};


    \pic (ods) at (0, 0cm) {blockPic={Output Registers}{6.5cm}{1.0cm}{/2/6/}{/{In, Out}/{Od0, Od1, Od2, Od3, Od4, Od5}/}};
    \pic (dataS) at (0, -1cm) {blockPic={Data Interconnect}{6.5cm}{0.5cm}{6///}{{Id0, Id1, Id2, Id3, Id4, Id5}///}};

    \pic (fds) at (0.0cm, 1.0cm + \padding) {fifoRegisters={6.5cm}{4.5cm}{3}{1cm}{Feedback Registers}};

    \pic (rds) at (0, 1.0cm + 4.5cm + 2 * \padding) {blockPic={General Purpose Registers}{6.5cm}{1.0cm}{/2//}{/{In, Out}//}};

    \pic (ids) at (0.0cm, 1.0cm + 4.5cm + 1.0cm + 3 * \padding) {fifoRegisters={6.5cm}{3.0cm}{6}{1cm}{Input Registers}};
    \pic (dataN) at (0.0cm, 1.0cm + 4.5cm + 1.0cm + 3 * \padding + 3.5cm) {blockPic={Data Interconnect}{6.5cm}{0.5cm}{//6/}{//{Od0, Od1, Od2, Od3, Od4, Od5}/}};

    \draw[blockArrowTo] (odsOut) -- (odsOut -| regFileIn);
    \draw[blockArrowFrom] (odsIn) -- (odsIn -| regFileOut);

    \draw[blockArrowTo] (rdsOut) -- (rdsOut -| regFileIn);
    \draw[blockArrowFrom] (rdsIn) -- (rdsIn -| regFileOut);

    \draw[blockArrowTo] (idsRightOut) -- (idsRightOut -| regFileIn);
    \draw[blockArrowFrom] (idsRightIn) -- (idsRightIn -| regFileOut);

    \draw[blockArrowTo] (fdsRightOut) -- (fdsRightOut -| regFileIn);
    \draw[blockArrowFrom] (fdsRightIn) -- (fdsRightIn -| regFileOut);

    \draw[blockArrowTo] (odsOd0) -- (dataSId0);
    \draw[blockArrowTo] (odsOd1) -- (dataSId1);
    \draw[blockArrowTo] (odsOd2) -- (dataSId2);
    \draw[blockArrowTo] (odsOd3) -- (dataSId3);
    \draw[blockArrowTo] (odsOd4) -- (dataSId4);
    \draw[blockArrowTo] (odsOd5) -- (dataSId5);

    \draw[blockArrowFrom] (idsId1) -- (idsId1 |- dataNOd0);
    \draw[blockArrowFrom] (idsId2) -- (idsId2 |- dataNOd1);
    \draw[blockArrowFrom] (idsId3) -- (idsId3 |- dataNOd2);
    \draw[blockArrowFrom] (idsId4) -- (idsId4 |- dataNOd3);
    \draw[blockArrowFrom] (idsId5) -- (idsId5 |- dataNOd4);
}

\tikzpic{ctrlRegisterFile}{1}{
    \pgfmathsetlengthmacro{\totalHeight}{#1 * (2.5cm + 0.125cm) - 0.125cm};
    \pgfmathsetlengthmacro{\padding}{(\totalHeight - 1.0cm - 1.0cm - 7.75cm - 0.125cm * 2) / 2};

    \pic at (-0.625cm-0.25cm, -0.125cm) {grayBlockPic={}{3.750cm+0.75cm}{\totalHeight}{}{}};
    \pic (regFile) at (-0.625cm-0.25cm, -0.125cm) {rotatedBlockPic={Control Register File}{0.5cm}{\totalHeight}{/2//}{/{In, Out}//}};

    \pic (ods) at (0, 0cm) {blockPic={Output Registers}{3.5cm}{1.0cm}{//7/2}{//{Od0, Od1, Od2, Od3, Od4, Od5, Od6}/{In, Out}}};
    \pic  (ctrlS) at (0, -1cm) {blockPic={Control\,Interconnect}{3.5cm}{0.5cm}{7///}{{Id0, Id1, Id2, Id3, Id4, Id5, Id6}///}};
    \pic (flags) at (0, 1.0cm + \padding) {blockPic={Functional Unit\\Flags}{3.5cm}{1.0cm}{///2}{///{In, Out}}};
    \pic (ids) at (0.0cm, 1.0cm + 1.0cm + 2 * \padding) {fifoRegisters={3.5cm}{7.75cm}{7}{0.25cm}{Input Registers}};
    \pic  (ctrlN) at (0.0cm, 1.0cm + 1.0cm + 2 * \padding + 8.25cm) {blockPic={Control\,Interconnect}{3.5cm}{0.5cm}{//7/}{//{Od0, Od1, Od2, Od3, Od4, Od5, Od6}/}};

    \draw[blockArrowTo] (odsOut) -- (odsOut -| regFileIn);
    \draw[blockArrowFrom] (odsIn) -- (odsIn -| regFileOut);

    \draw[blockArrowTo] (flagsOut) -- (flagsOut -| regFileIn);
    \draw[blockArrowFrom] (flagsIn) -- (flagsIn -| regFileOut);

    \draw[blockArrowTo] (idsLeftOut) -- (idsLeftOut -| regFileIn);
    \draw[blockArrowFrom] (idsLeftIn) -- (idsLeftIn -| regFileOut);

    \draw[blockArrowTo] (odsOd0) -- (ctrlSId0);
    \draw[blockArrowTo] (odsOd1) -- (ctrlSId1);
    \draw[blockArrowTo] (odsOd2) -- (ctrlSId2);
    \draw[blockArrowTo] (odsOd3) -- (ctrlSId3);
    \draw[blockArrowTo] (odsOd4) -- (ctrlSId4);
    \draw[blockArrowTo] (odsOd5) -- (ctrlSId5);
    \draw[blockArrowTo] (odsOd6) -- (ctrlSId6);

    \draw[blockArrowFrom] (idsId1) -- (idsId1 |- ctrlNOd0);
    \draw[blockArrowFrom] (idsId2) -- (idsId2 |- ctrlNOd1);
    \draw[blockArrowFrom] (idsId3) -- (idsId3 |- ctrlNOd2);
    \draw[blockArrowFrom] (idsId4) -- (idsId4 |- ctrlNOd3);
    \draw[blockArrowFrom] (idsId5) -- (idsId5 |- ctrlNOd4);
    \draw[blockArrowFrom] (idsId6) -- (idsId6 |- ctrlNOd5);
    \draw[blockArrowFrom] (idsId7) -- (idsId7 |- ctrlNOd6);
}

\tikzpic{processingElement}{1}{
    \pic (box) at (0.5cm + 7.625cm, 1cm) {functionalUnit={INT\,32}};
    \pic (box) at (0.5cm + 7.625cm, 3.625cm) {functionalUnit={FP32/8$\times$4}};
    \pic (box) at (0.5cm + 7.625cm, 6.25cm) {functionalUnit={FP32/8$\times$4}};
    \pic (box) at (0.5cm + 7.625cm, 8.865cm) {functionalUnit={FP32/8$\times$4}};

    \pic (box) at (0.5cm + 0, 1.125cm) {registerFile={4}};

    \pic (box) at (0.5cm + 7.125cm+7.625cm, 1.125cm) {ctrlRegisterFile={4}};
}

\tikzpic{simpleIterationSpace}{7}{
    % Front
    %  cd
    %  ab
    % Back
    %  gh
    %  ef
    %

    \coordinate (a) at (0, 0);
    \coordinate (b) at (2 * #2 * #3, 0);
    \coordinate (c) at (0, 2 * #2 * #4);
    \coordinate (d) at (2 * #2 * #3, 2 * #2 * #4);

    \coordinate (e) at (#5 * #2 - #2, #5 * #2 / 2 - #2 / 2);
    \coordinate (f) at (#5 * #2 - #2 + 2 * #2 * #3, #5 * #2 / 2 - #2 / 2);
    \coordinate (g) at (#5 * #2 - #2, #5 * #2 / 2 - #2 / 2 + 2 * #2 * #4);
    \coordinate (h) at (#5 * #2 - #2 + 2 * #2 * #3, #5 * #2 / 2 - #2 / 2 + 2 * #2 * #4);

    \colorlet{borderColor}{lightgray}

    %left
    \fill[borderColor, opacity=0.75] (a) -- (e) -- (g) -- (c) -- (a);

    %bot
    \fill[borderColor, opacity=0.75] (a) -- (b) -- (f) -- (e) -- (a);

    %back
    \fill[borderColor, opacity=0.75] (e) -- (f) -- (h) -- (g) -- (e);

    \draw[-] (a) -- (e);
    \draw[-] (e) -- (g);


    \foreach \k in {#5,...,1} {
        \foreach \i in {1,...,#3} {
            \foreach \j in {1,...,#4} {
                \draw[drop shadow={shadow xshift=0.015cm, shadow yshift=-0.015cm, color=black}, fill=white] ({#2 + (\i - 1) * #2 * 2 + (\k - 1) * #2}, {#2 + (\j - 1) * #2 * 2 + (\k - 1) * #2 / 2}) circle (#1);
            }
        }
    }


    %right
    \fill[borderColor, opacity=0.75] (b) -- (f) -- (h) -- (d) -- (b);

    %top
    \fill[borderColor, opacity=0.75] (c) -- (d) -- (h) -- (g) -- (c);

    %front
    %\fill[borderColor, opacity=0.75] (a) -- (b) -- (d) -- (c) -- (a);

    \draw[-] (a) -- (b);
    \draw[-] (a) -- (c);

    \draw[-] (b) -- (f);
    \draw[-] (b) -- (d);

    \draw[-] (h) -- (d);
    \draw[-] (h) -- (g);
    \draw[-] (h) -- (f);

    \draw[-] (c) -- (g);
    \draw[-] (c) -- (d);

    \foreach \xdim\ydim\zdim in {#6} {
        \foreach \xscale\yscale\zscale in {#7} {
            \draw[blockArrowTo] (-#2, -#2) -- node[midway, below] {\xdim} +({2 * #2 + 2 * #2 * #3 * \xscale}, 0);
            \draw[blockArrowTo] (-#2, -#2) -- node[midway, left] {\ydim} +(0, {2 * #2 + 2 * #2 * #4 * \yscale});
            \draw[blockArrowTo] (-#2, 2 * #2 * #4 * \yscale+ #2) -- node[midway, above, sloped] {\zdim} +({#5 * #2 * \zscale - #2 + 2 * #2}, {#5 * #2 * \zscale / 2 - #2 / 2 + #2});
        }
    }
}

\tikzpic{tiledSimpleIterationSpace}{7}{
    \foreach \xscale\yscale\zscale in {#7} {
        \foreach \z in {\zscale,...,\zscale} {
            \foreach \x in {1,...,\xscale} {
                \foreach \y in {1,...,\yscale} {
                    \pic (space) at ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z + 1) }, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z + 1) / 2}) {blockPic={PE}{2 * #2 * #3}{2 * #2 * #4}{///}{///}};

                    \draw[blockArrowFrom] ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z + 1) }, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z + 1) / 2}) -- +(-{(#5 - 1) * #2}, -{(#5 - 1) * #2 / 2});
                    \draw[blockArrowFrom] ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z + 1) + 2 * #2 * #3}, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z + 1) / 2}) -- +(-{(#5 - 1) * #2}, -{(#5 - 1) * #2 / 2});
                    \draw[blockArrowFrom] ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z + 1) + 2 * #2 * #3}, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z + 1) / 2 + 2 * #2 * #4}) -- +(-{(#5 - 1) * #2}, -{(#5 - 1) * #2 / 2});
                    \draw[blockArrowFrom] ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z + 1)}, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z + 1) / 2 + 2 * #2 * #4}) -- +(-{(#5 - 1) * #2}, -{(#5 - 1) * #2 / 2});

                }
            }
        }

        \foreach \z in {\zscale,...,1} {
            \foreach \x in {1,...,\xscale} {
                \foreach \y in {1,...,\yscale} {
                    \ifnum\x=1
                        \ifnum\y=1
                            \ifnum\z=1
                                \pic (space) at ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z - 1) }, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z - 1) / 2}) {simpleIterationSpace={#1}{#2}{#3}{#4}{#5}{#6}{#7}};
                            \else
                                \pic (space) at ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z - 1) }, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z - 1) / 2}) {simpleIterationSpace={#1}{#2}{#3}{#4}{#5}{}{}};
                            \fi
                        \else
                            \pic (space) at ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z - 1) }, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z - 1) / 2}) {simpleIterationSpace={#1}{#2}{#3}{#4}{#5}{}{}};
                        \fi
                    \else
                        \pic (space) at ({2 * #2 * #3 * (\x - 1) + (#5 - 1) * #2 * (\z - 1) }, {2 * #2 * #4 * (\y - 1) + (#5 - 1) * #2 * (\z - 1) / 2}) {simpleIterationSpace={#1}{#2}{#3}{#4}{#5}{}{}};
                    \fi
                }
            }
        }
    }

    \node[inner sep=0] at ({2 * #2 * #3 * (8) + #5 * #2 * (1) - #2}, {2 * #2 * #4 * (8) + #5 * #2 * (1) / 2 - #2 / 2}) (NorthEast) {};
    \node[inner sep=0] at ({2 * #2 * #3 * (0) + #5 * #2 * (1) - #2}, {2 * #2 * #4 * (8) + #5 * #2 * (1) / 2 - #2 / 2}) (NorthWest) {};
    \node[inner sep=0] at ({2 * #2 * #3 * (8) + #5 * #2 * (1) - #2}, {2 * #2 * #4 * (0) + #5 * #2 * (1) / 2 - #2 / 2}) (SouthEast) {};
    \node[inner sep=0] at ({2 * #2 * #3 * (0) + #5 * #2 * (1) - #2}, {2 * #2 * #4 * (0) + #5 * #2 * (1) / 2 - #2 / 2}) (SouthWest) {};
}

\tikzpic{nodeGrid}{8}{
    \pgfmathsetlengthmacro{\cellSize}{#1};
    \pgfmathsetlengthmacro{\nodeSize}{#2};
    \pgfmathsetlengthmacro{\textSize}{#3};
    \pgfmathsetlengthmacro{\arrowLineWidth}{#5};

    \foreach \row [count=\j] in {#4} {
        \foreach \cell [count=\i] in \row {
            \foreach \text\label\foreground\background in \cell {
                \colorlet{leftColor}{\background}
                \colorlet{rightColor}{leftColor!80}

                \node[text=\foreground, font=\fontsize{\textSize}{8}\selectfont, drop shadow={shadow xshift=0.015cm, shadow yshift=-0.015cm, color=black}, draw, minimum width=\nodeSize, inner sep=0, shading=axis, left color=leftColor, right color=rightColor, shading angle=0, circle] (\label) at (-\cellSize / 2 + \i * \cellSize, \cellSize / 2 - \j * \cellSize) {};
                \node[text=\foreground, font=\fontsize{\textSize}{8}\selectfont] at (-\cellSize / 2 + \i * \cellSize, \cellSize / 2 - \j * \cellSize) {\textbf{\text}};
            }
        }
    }

    \foreach \arrow in {#6} {
        \foreach \start\end\colorName\labelText\outAngle\inAngle\loose\styleThings in \arrow {
            \colorlet{drawColor}{\colorName}


            \ifthenelse{\equal{\outAngle}{}}{
                \draw[-{Latex[length=4*\arrowLineWidth]}, line width=\arrowLineWidth, draw=drawColor, \styleThings] (\start) to (\end);
                \ifthenelse{\equal{\labelText}{}}{
                    \draw[-{Latex[length=4*\arrowLineWidth]}, line width=\arrowLineWidth, draw=drawColor, \styleThings] (\start) to (\end);
                }{
                    \draw[-{Latex[length=4*\arrowLineWidth]}, line width=\arrowLineWidth, draw=drawColor, \styleThings] (\start) to node[pos=0.5, fill=white, text=drawColor, rounded corners=0.2cm] {\labelText} (\end);
                }
            }{
                \ifthenelse{\equal{\labelText}{}}{
                    \draw[-{Latex[length=4*\arrowLineWidth]}, looseness=\loose, line width=\arrowLineWidth, draw=drawColor, \styleThings] (\start) to[out=\outAngle, in=\inAngle] (\end);
                }{
                    \draw[-{Latex[length=4*\arrowLineWidth]}, looseness=\loose, line width=\arrowLineWidth, draw=drawColor, \styleThings] (\start) to[out=\outAngle, in=\inAngle] node[pos=0.5, fill=white, text=drawColor, rounded corners=0.2cm] {\labelText} (\end);
                }
            }
        }
    }

    \foreach \border in {#7} {
        \foreach \startX\startY\endX\endY\styleThings in \border {
            \draw[\styleThings] (\cellSize * \startX, -\cellSize * \startY) -- (\cellSize * \endX, -\cellSize * \endY);
        }
    }
    \foreach \label in {#8} {
        \foreach \startX\startY\endX\endY\labelText\labelStyle in \label {
            \node[\labelStyle, align=center] at ({\cellSize * (\startX + (\endX-\startX) * 0.5)}, {\cellSize * -(\startY + (\endY-\startY) * 0.5)}) {\labelText};
        }
    }
}


\tikzpic{dfgPic}{1}{
    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}

    \pic at (0cm, 0cm) {nodeGrid={1.25cm}{0.75cm}{
        {{+/Addr0/white/darkBlue},{},{+/Addr1/white/darkBlue}},
        {{L/Load0/white/darkBlue},{},{L/Load1/white/darkBlue}},
        {{},{\texttimes/Mul/white/darkRed}, {+/ItAdd/white/darkPurple}},
        {{},{+/Sum/white/darkRed}, {=/Cmp/white/darkPurple}},
        {{},{S/Store/white/darkGreen},{}}%
    }{0.03cm}{
        {Addr0/Addr0/darkBlue/45/0/7},
        {Addr1/Addr1/darkBlue/45/0/7},
        {Sum/Sum/darkRed/45/0/7},
        {ItAdd/ItAdd/darkPurple/45/0/7},
        {Addr0/Load0/darkBlue},
        {Addr1/Load1/darkBlue},
        {Load0/Mul/darkBlue},
        {Load1/Mul/darkBlue},
        {Mul/Sum/darkRed},
        {Sum/Store/darkRed},
        {ItAdd/Cmp/darkPurple},
        {Cmp/Store/darkPurple}%
    }};
}

\tikzpic{cgraMappingPic}{1}{
    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}
    
    \foreach \j in {0,...,2} {
        \foreach \i in {0,...,2} {
            \pic (a) at (2cm * \i + 1cm - 1.8cm/2, -2cm * \j - 1cm - 1.8cm/2) {blockPic={}{1.8cm}{1.8cm}{///}{////}};
            \node[anchor=south east] at (2cm * \i + 1cm - 1.8cm/2+1.8cm, -2cm * \j - 1cm - 1.8cm/2) {PE};
        }
    }

    \pgfmathsetlengthmacro{\cgraLeftTopX}{1cm - 1.8cm/2};
    \pgfmathsetlengthmacro{\cgraLeftTopY}{-1cm + 1.8cm/2};

    \pgfmathsetlengthmacro{\cgraRightBotX}{\cgraLeftTopX + 6cm - 0.2cm};
    \pgfmathsetlengthmacro{\cgraRightBotY}{\cgraLeftTopY - 6cm + 0.2cm};

    \pic (AGE) at (\cgraRightBotX + 0.2cm, \cgraRightBotY) {rotatedBlockPic={Memory}{0.9cm}{2cm*3-0.2cm}{///6}{///{p0, p2, p3, p4, p5, p6}}};
    \pic (AGW) at (\cgraLeftTopX - 0.2cm - 0.9cm, \cgraRightBotY) {rotatedBlockPic={Memory}{0.9cm}{2cm*3-0.2cm}{/6//}{{}/{p0, p2, p3, p4, p5, p6}//}};

    \pic (cgra) at (0, 0) {nodeGrid={2.0cm}{0.75cm}{
        {{L/Load0/white/darkBlue}, {+/Addr0/white/darkBlue}, {+/ItAdd/white/darkPurple}},
        {{L/Load1/white/darkBlue}, {+/Addr1/white/darkBlue}, {=/Cmp/white/darkPurple}},
        {{\texttimes/Mul/white/darkRed},   {+/Sum/white/darkRed},    {S/Store/white/darkGreen}}%
    }{0.02cm}{
        {Addr0/Addr0/darkBlue/90/45/5},
        {Addr1/Addr1/darkBlue/90/45/5},
        {Sum/Sum/darkRed/90/45/5},
        {ItAdd/ItAdd/darkPurple/90/45/5},
        {Addr0/Load0/darkBlue},
        {Addr1/Load1/darkBlue},
        {Load0/Mul/darkBlue/245/115/1},
        {Load1/Mul/darkBlue},
        {Mul/Sum/darkRed},
        {Sum/Store/darkRed},
        {ItAdd/Cmp/darkPurple},
        {Cmp/Store/darkPurple}%
    }};
    \draw[{Latex[length=4*0.02cm]}-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (cgraLoad0) -- (cgraLoad0 -| AGWp6);
    \draw[{Latex[length=4*0.02cm]}-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (cgraLoad1) -- (cgraLoad1 -| AGWp4);
    \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkGreen] (cgraStore) -- (cgraStore -| AGEp0);
}

\tikzpic{tcpaMappingPic}{1}{
    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}
    \foreach \j in {0,...,2} {
        \foreach \i in {0,...,2} {
            \pic (a) at (2cm * \i + 1cm - 1.8cm/2, -2cm * \j - 1cm - 1.8cm/2) {blockPic={}{1.8cm}{1.8cm}{///}{////}};
        }
    }
    \pgfmathsetlengthmacro{\tcpaLeftTopX}{1cm - 1.8cm/2};
    \pgfmathsetlengthmacro{\tcpaLeftTopY}{-1cm + 1.8cm/2};

    \pgfmathsetlengthmacro{\tcpaRightBotX}{\tcpaLeftTopX + 6cm - 0.2cm};
    \pgfmathsetlengthmacro{\tcpaRightBotY}{\tcpaLeftTopY - 6cm + 0.2cm};

    \pic (GC) at (\tcpaLeftTopX - 0.2cm - 0.9cm, \tcpaLeftTopY + 0.2cm) {blockPic={GC}{0.9cm}{0.9cm}{///}{{}/{}//}};

    \pic (AGN) at (\tcpaLeftTopX, \tcpaLeftTopY + 0.2cm) {blockPic={I/O Buffer\,\&\,Address Generators}{2cm*3-0.2cm}{0.9cm}{///}{{}/{}/{}/}};
    \pic (AGS) at (\tcpaLeftTopX, \tcpaRightBotY - 1.1cm) {blockPic={I/O Buffer\,\&\,Address Generators}{2cm*3-0.2cm}{0.9cm}{///}{{}/{}//}};

    \pic (AGE) at (\tcpaRightBotX + 0.2cm, \tcpaRightBotY) {rotatedBlockPic={I/O Buffer\,\&\,Address Generators}{0.9cm}{2cm*3-0.2cm}{///}{///{}}};
    \pic (AGW) at (\tcpaLeftTopX - 0.2cm - 0.9cm, \tcpaRightBotY) {rotatedBlockPic={I/O Buffer\,\&\,Address Generators}{0.9cm}{2cm*3-0.2cm}{///}{{}/{}//}};

    \foreach \v in {0,...,2} {
        \pic (AGN) at (\tcpaLeftTopX, \tcpaLeftTopY + 0.2cm - \v * 2cm) {emptyBlockPic={I/O Buffer\&Address Generators}{2cm*3-0.2cm}{0.9cm}{//24/}{{}/{}/{p0, p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13, p14, p15, p16, p17, p18, p19, p20, p21, p22, p23}/}};
        \pic (AGE) at (\tcpaRightBotX + 0.2cm, \tcpaRightBotY - \v * 2cm) {emptyBlockPic={I/O Buffer\&Address Generators}{0.9cm}{2cm*3-0.2cm}{///6}{///{p0, p2, p3, p4, p5, p6}}};

        \pic (tcpa) at (0cm, -0.25cm - \v * 2cm) {nodeGrid={2.0cm/4}{0.1cm}{
            {{\normalsize{\texttimes}/Mul0/white/darkRed},
            {\normalsize{\texttimes}/Mul1/white/darkRed},
            {\normalsize{\texttimes}/Mul2/white/darkRed},
            {\normalsize{\texttimes}/Mul3/white/darkRed},
            {\normalsize{\texttimes}/Mul4/white/darkRed},
            {\normalsize{\texttimes}/Mul5/white/darkRed},
            {\normalsize{\texttimes}/Mul6/white/darkRed},
            {\normalsize{\texttimes}/Mul7/white/darkRed},
            {\normalsize{\texttimes}/Mul8/white/darkRed},
            {\normalsize{\texttimes}/Mul9/white/darkRed},
            {\normalsize{\texttimes}/Mul10/white/darkRed},
            {\normalsize{\texttimes}/Mul11/white/darkRed}},
            {},
            {{\normalsize{+}/Add0/white/darkRed},
            {\normalsize{+}/Add1/white/darkRed},
            {\normalsize{+}/Add2/white/darkRed},
            {\normalsize{+}/Add3/white/darkRed},
            {\normalsize{+}/Add4/white/darkRed},
            {\normalsize{+}/Add5/white/darkRed},
            {\normalsize{+}/Add6/white/darkRed},
            {\normalsize{+}/Add7/white/darkRed},
            {\normalsize{+}/Add8/white/darkRed},
            {\normalsize{+}/Add9/white/darkRed},
            {\normalsize{+}/Add10/white/darkRed},
            {\normalsize{+}/Add11/white/darkRed}}%
        }{0.02cm}{
            {Mul0/Add0/darkRed},
            {Mul1/Add1/darkRed},
            {Mul2/Add2/darkRed},
            {Mul3/Add3/darkRed},
            {Mul4/Add4/darkRed},
            {Mul5/Add5/darkRed},
            {Mul6/Add6/darkRed},
            {Mul7/Add7/darkRed},
            {Mul8/Add8/darkRed},
            {Mul9/Add9/darkRed},
            {Mul10/Add10/darkRed},
            {Mul11/Add11/darkRed},
            {Add0/Add1/darkRed},
            {Add1/Add2/darkRed},
            {Add2/Add3/darkRed},
            {Add3/Add4/darkRed},
            {Add4/Add5/darkRed},
            {Add5/Add6/darkRed},
            {Add6/Add7/darkRed},
            {Add7/Add8/darkRed},
            {Add8/Add9/darkRed},
            {Add9/Add10/darkRed},
            {Add10/Add11/darkRed}%
        }};

        \foreach \i in {0,...,11} {
            \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkPurple] (\tcpaLeftTopX - 0.2cm, \tcpaLeftTopY + 0.2cm) -- +(0.1cm, -0.1cm) -- +(0.1cm, -2.1cm - \v * 2cm) -| (tcpaAdd\i);
        }

        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp0) to[out=270, in=110] (tcpaMul0);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp1) to[out=270, in=70]  (tcpaMul0);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp2) to[out=270, in=110] (tcpaMul1);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp3) to[out=270, in=70]  (tcpaMul1);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp4) to[out=270, in=110] (tcpaMul2);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp5) to[out=270, in=70]  (tcpaMul2);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp6) to[out=270, in=110] (tcpaMul3);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp7) to[out=270, in=70]  (tcpaMul3);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp8) to[out=270, in=110] (tcpaMul4);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp9) to[out=270, in=70]  (tcpaMul4);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp10) to[out=270, in=110] (tcpaMul5);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp11) to[out=270, in=70]  (tcpaMul5);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp12) to[out=270, in=110] (tcpaMul6);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp13) to[out=270, in=70]  (tcpaMul6);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp14) to[out=270, in=110] (tcpaMul7);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp15) to[out=270, in=70]  (tcpaMul7);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp16) to[out=270, in=110] (tcpaMul8);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp17) to[out=270, in=70]  (tcpaMul8);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp18) to[out=270, in=110] (tcpaMul9);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp19) to[out=270, in=70]  (tcpaMul9);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp20) to[out=270, in=110] (tcpaMul10);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp21) to[out=270, in=70]  (tcpaMul10);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp22) to[out=270, in=110] (tcpaMul11);
        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkBlue] (AGNp23) to[out=270, in=70]  (tcpaMul11);

        \draw[-{Latex[length=4*0.02cm]}, line width=0.02cm, draw=darkRed] (tcpaAdd11) to[out=45, in=225] (AGEp6);
    }



}
\tikzpic{mappingComparison}{1}{
    \pic (dfg) at (0, 0) {dfgPic={}};
    \pic (cgra) at (6, 0) {cgraMappingPic={}};
    \pic (tcpa) at (15, 0) {tcpaMappingPic={}};
}
\tikzpic{verticalRangeNode}{6}{
    \pgfmathsetlengthmacro{\width}{#1};
    \pgfmathsetlengthmacro{\height}{#2};
    \pgfmathsetlengthmacro{\curveWidth}{#3};
    \pgfmathsetlengthmacro{\curveStart}{\width - \curveWidth};
    \pgfmathsetlengthmacro{\curveSlot}{\height/8};


    \colorlet{textColor}{#5}
    \colorlet{leftColor}{#4}
    \colorlet{rightColor}{leftColor}

    \draw [fill, drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0, smooth, rounded corners=2 * \curveSlot * 0.10] (0, 0) -- (\curveStart + 0, 0) -- (\curveStart + \curveWidth/2, 0.5 * \curveSlot) -- (\curveStart + 0.75*\curveWidth, 1 * \curveSlot) -- (\curveStart + \curveWidth/2, 2 * \curveSlot) -- (\curveStart + 0.25*\curveWidth, 3 * \curveSlot) -- (\curveStart + \curveWidth/2, 2 * \curveSlot * 1.8) {[sharp corners] -- (\curveStart + \curveWidth, 4 * \curveSlot)} -- (\curveStart + \curveWidth/2, 2 * \curveSlot * 2.2) -- (\curveStart + 0.25*\curveWidth, 5 * \curveSlot) -- (\curveStart + \curveWidth/2, 6 * \curveSlot) -- (\curveStart + 0.75*\curveWidth, 7 * \curveSlot) -- (\curveStart + \curveWidth/2, 7.5 * \curveSlot) -- (\curveStart + 0, 8 * \curveSlot) -- (0, \height) -- cycle;

    \node[anchor=west, align=center, text=textColor] at (\width, 0.5 * \height) {#6};
}

\tikzpic{verticalRangeNodeWithExtension}{8}{
    \pgfmathsetlengthmacro{\width}{#1};
    \pgfmathsetlengthmacro{\height}{#2};
    \pgfmathsetlengthmacro{\curveWidth}{#3};
    \pgfmathsetlengthmacro{\curveStart}{\width - \curveWidth};
    \pgfmathsetlengthmacro{\curveSlot}{\height/8};
    \pgfmathsetlengthmacro{\extensionWidth}{#7};
    \pgfmathsetlengthmacro{\extensionHeight}{#8};


    \colorlet{textColor}{#5}
    \colorlet{leftColor}{#4}
    \colorlet{rightColor}{leftColor}

    \draw [fill, drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0, smooth, rounded corners=2 * \curveSlot * 0.10] (0, -\extensionHeight) -- (\extensionWidth, -\extensionHeight) -- (\extensionWidth, 0) -- (\curveStart + 0, 0) -- (\curveStart + \curveWidth/2, 0.5 * \curveSlot) -- (\curveStart + 0.75*\curveWidth, 1 * \curveSlot) -- (\curveStart + \curveWidth/2, 2 * \curveSlot) -- (\curveStart + 0.25*\curveWidth, 3 * \curveSlot) -- (\curveStart + \curveWidth/2, 2 * \curveSlot * 1.8) {[sharp corners] -- (\curveStart + \curveWidth, 4 * \curveSlot)} -- (\curveStart + \curveWidth/2, 2 * \curveSlot * 2.2) -- (\curveStart + 0.25*\curveWidth, 5 * \curveSlot) -- (\curveStart + \curveWidth/2, 6 * \curveSlot) -- (\curveStart + 0.75*\curveWidth, 7 * \curveSlot) -- (\curveStart + \curveWidth/2, 7.5 * \curveSlot) -- (\curveStart + 0, 8 * \curveSlot) -- (0, \height) -- cycle;

    \node[anchor=west, align=center, text=textColor] at (\width, 0.5 * \height) {#6};
}

\tikzpic{textRangeBlock}{7}{
    \pgfmathsetlengthmacro{\width}{#1};
    \pgfmathsetlengthmacro{\height}{#2};
    \pgfmathsetlengthmacro{\numRows}{#3};
    \pgfmathsetlengthmacro{\textWidth}{#4};
    \pgfmathsetlengthmacro{\rowHeight}{\height / \numRows};

    \foreach \foreground\background\label in {#5} {
        \colorlet{textColor}{\foreground}
        \colorlet{leftColor}{\background}
        \colorlet{rightColor}{leftColor!80}

        \pic at (0, 0) {verticalRangeNode={\width}{\height}{0.5cm}{\background}{\label}{#7}};
        \foreach \line [count=\i] in {#6} {
            \node[anchor=south west, align=center, minimum height=\rowHeight, text=textColor, inner sep=0] at (0, {\rowHeight * (\numRows - \i)}) {{\line}};
        }
    }
}
\tikzpic{textRangeBlockWithExtension}{9}{
    \pgfmathsetlengthmacro{\width}{#1};
    \pgfmathsetlengthmacro{\height}{#2};
    \pgfmathsetlengthmacro{\numRows}{#3};
    \pgfmathsetlengthmacro{\textWidth}{#4};
    \pgfmathsetlengthmacro{\rowHeight}{\height / \numRows};

    \foreach \foreground\background\label in {#5} {
        \colorlet{textColor}{\foreground}
        \colorlet{leftColor}{\background}
        \colorlet{rightColor}{leftColor!80}

        \pic at (0, 0) {verticalRangeNodeWithExtension={\width}{\height}{0.5cm}{\background}{\label}{#7}{#8}{#9}};
        \foreach \line [count=\i] in {#6} {
            \node[anchor=south west, align=center, minimum height=\rowHeight, text=textColor, inner sep=0] at (0, {\rowHeight * (\numRows - \i)}) {\textbf{\line}};
        }
    }
}
\tikzpic{loopDescription}{1}{
    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}

    \definecolor{normalGray}{HTML}{f4f4f4};

    \pic at (0, 1.25*2.5) {textRangeBlockWithExtension={10.5cm}{2.5cm}{4}{3cm}{black/normalGray/black}{
            {\hspace*{0.25cm}for $0 \leq {i}_{0} < N_0:$},
            {\hspace*{0.75cm}for $0 \leq {i}_{1} < N_1:$},
            {\hspace*{1.25cm}$\dots$},
            {\hspace*{1.25cm}for $0 \leq {i}_{7} < N_7:$}%
    }{8 Dimensional\\ Iteration Space}{1.5cm}{1.25cm/2+2.5cm}};

    \pic at (1.5cm, 1.25*2.0) {textRangeBlock={9.0cm}{1.25cm/2}{1}{3cm}{black/normalGray/black}{
            {\hspace*{0.25cm}{x[${i}_{0}, \dots, {i}_{7}$] = X[$a_0{i}_{0} + \dots + a_7{i}_{7}$]}}%
    }{Input Dep.}};

    \pic at (1.5cm, 1.25*1.5) {textRangeBlock={9.0cm}{1.25cm/2}{1}{3cm}{black/normalGray/black}{
            {\hspace*{0.25cm}{Z[$a_0{i}_{0} + \dots + a_7{i}_{7}$] = z[${i}_{0}, \dots, {i}_{7}$]}}%
    }{Output Dep.}};

    \pic at (1.5cm, 1.25) {textRangeBlock={9.0cm}{1.25cm/2}{1}{3cm}{black/normalGray/black}{
            {\hspace*{0.25cm}{u[${i}_{0}, \dots, {i}_{7}$] = x[${i}_{0}, \dots, {i}_{7}$]\ $\times$\ y[${i}_{0}, \dots, {i}_{7}$]}}%
    }{Intra-iteration Dep.}};
    \pic at (1.5cm, 1.25/2) {textRangeBlock={9.0cm}{1.25cm/2}{1}{3cm}{black/normalGray/black}{
            {\hspace*{0.25cm}{s[${i}_{0}, \dots, {i}_{7}$] = s[${i}_{0} - d_0, \dots, {i}_{7} - d_7$]}}%
    }{Loop-carried Dep.}};

    \pic at (1.5cm, 0) {textRangeBlock={9.0cm}{1.25cm/2}{1}{3cm}{black/normalGray/black}{
            {\hspace*{0.25cm}{z[${i}_{0}, \dots, {i}_{7}$] = s[${i}_{0}, \dots, {i}_{7}$] if $i_7 = N_7 - 1$}}%
    }{Conditionals}};
}

\tikzpic{computeCapability}{1}{
    \pic (itSpace) at (14.5cm, 2cm) {tiledSimpleIterationSpace={0.13cm}{0.15cm}{2}{2}{8}{{$i_0$}/{$i_1$}/{$i_2, \dots, i_7$}}{8/8/1}};
    \coordinate (selectedIt) at (1.0cm + 0.2cm * 8 * 2 * 2 - 0.2cm, 1.0cm + 0.2cm * 8 * 2 * 2 - 0.2cm);

    \pic  at (0.0cm, 2cm) {loopDescription={}};
}

\tikzpic{transBox}{3} {
    \node[anchor=south west, rounded corners=0.05cm, minimum width=#2, minimum height=#3, inner sep=0, draw, thick, white, opacity=0.75] at (0, 0) {#1};
}
\tikzpic{transBoxVert}{3} {
    \node[anchor=north west, rotate=90, rounded corners=0.05cm, minimum width=#3, minimum height=#2, inner sep=0, draw, thick, white, opacity=0.75] at (0, 0) {#1};
}
\tikzpic{dieShot}{1}{
    \node[anchor=south west] at (0, 0) { \includegraphics[width=11.5cm]{alpaca_die_cropped.jpg} };
    
    \draw[blockArrowBi] (0.53cm, 0.12cm) -- node[midway, fill=white] {\qty{3.2}{\milli\metre}} (11.25cm, 0.12cm);
    \draw[blockArrowBi] (0.15cm, 0.5cm) -- node[midway, fill=white, sloped] {\qty{3.125}{\milli\metre}} (0.15cm, 10.9cm);

    \foreach \i in {0,...,7} {
        \foreach \j in {0,...,7} {
            \pic (a) at (2.9cm+0.82cm*\i, 2.2cm+0.82cm*\j) {transBox={PE}{0.75cm}{0.7cm}};
        }
    }

    \pic (a) at (2.9, 0.8) {transBox={I/O Buffers and AGs}{8*0.82cm-0.07cm}{1.3cm}};
    \pic (a) at (2.9, 0.8+7.9) {transBox={I/O Buffers and AGs}{8*0.82cm-0.07cm}{1.2cm}};

    \pic (a) at (2.9-1.3, 2.2) {transBoxVert={I/O Buffers and AGs}{1.2cm}{8*0.82cm-0.1cm}};
    \pic (a) at (3.0+0.82*8, 2.2) {transBoxVert={I/O Buffers and AGs}{1.2cm}{8*0.82cm-0.1cm}};

    \pic (a) at (1.2, 9.4) {transBox={LION}{1.6cm}{1.1cm}};
    \pic (a) at (1.6, 8.75) {transBox={DMA}{1.2cm}{0.6cm}};
    \pic (a) at (2.9, 10) {transBox={GC}{1.2cm}{0.5cm}};

}
\tikzpic{layout}{1}{
    %%\node[anchor=south west] at (0, 0.34) { \includegraphics[width=10.725cm]{alpaca_floorplan.jpg} };

    \node[anchor=south west] at (7pt, 7pt) { \includegraphics[width=11.5cm]{alpaca_floorplan.jpg} };
    
    \draw[opacity=0, white, blockArrowBi] (0.53cm, 0.12cm) -- (11.25cm, 0.12cm);
    \draw[opacity=0, white, blockArrowBi] (0.15cm, 0.5cm) -- (0.15cm, 10.9cm);
}

\tikzpic{arrowTableColumns}{7}{
    \pgfmathsetlengthmacro{\leftWidth}{#1};
    \pgfmathsetlengthmacro{\centerWidth}{#2};
    \pgfmathsetlengthmacro{\rightWidth}{#3};
    \pgfmathsetlengthmacro{\height}{#4};
    \pgfmathsetlengthmacro{\lineWidth}{#5};

    \pgfmathsetlengthmacro{\arrowHeight}{\lineWidth * 2.00};
    \pgfmathsetlengthmacro{\arrowWidth}{\arrowHeight * 0.5 * 3};
    \pgfmathsetlengthmacro{\arrowLineOffset}{\arrowWidth / 3 + ((\arrowWidth / 3 * 2) / (\arrowHeight / 2)) * (\lineWidth / 2)}

    \pgfmathsetlengthmacro{\boxHeight}{\height-0.5 * \arrowHeight};

    \definecolor{leftColor}{HTML}{d9d9d9};
    \definecolor{rightColor}{HTML}{d9d9d9};

    \foreach \leftName\centerName\rightName in {#6} {
        \foreach \leftColor\centerColor\rightColor in {#7} {
            \foreach \leftForeground\leftBackground in \leftColor {
                \foreach \centerForeground\centerBackground in \centerColor {
                    \foreach \rightForeground\rightBackground in \rightColor {
                        \shade[left color=\leftBackground!10, right color=\centerBackground!10, shading angle=90] (0, 0) -- +(\leftWidth, 0) -- +(\leftWidth, \boxHeight) -- +(0, \boxHeight) -- (0, 0);
                        \shade[shading=axis, left color=\centerBackground!10, right color=\centerBackground!10, shading angle=90] (\leftWidth, 0) -- +(\centerWidth, 0) -- +(\centerWidth, \boxHeight) -- +(0, \boxHeight) -- +(0, 0);
                        \shade[shading=axis, left color=\centerBackground!10, right color=\rightBackground!10, shading angle=90] (\leftWidth + \centerWidth, 0) -- +(\rightWidth, 0) -- +(\rightWidth, \boxHeight) -- +(0, \boxHeight) -- +(0, 0);

                        \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}] 
                            (0, \boxHeight) -- 
                            +(\arrowWidth, \arrowHeight/2) -- 
                            +(\arrowLineOffset, \lineWidth / 2) -- 
                            +(\leftWidth + \centerWidth + \rightWidth - \arrowLineOffset, \lineWidth / 2) -- 
                            +(\leftWidth + \centerWidth + \rightWidth - \arrowWidth, \arrowHeight / 2) -- 
                            +(\leftWidth + \centerWidth + \rightWidth, 0) -- 
                            +(\leftWidth + \centerWidth + \rightWidth - \arrowWidth, -\arrowHeight / 2) -- 
                            +(\leftWidth + \centerWidth + \rightWidth - \arrowLineOffset, -\lineWidth / 2) -- 
                            +(\arrowLineOffset, -\lineWidth / 2) -- 
                            +(\arrowWidth, -\arrowHeight / 2) --
                            +(0, 0);

                        \shade[shading=axis, left color=\leftBackground, right color=\centerBackground, shading angle=90] (0, \boxHeight) -- +(\arrowWidth, \arrowHeight/2) -- +(\arrowLineOffset, \lineWidth / 2) -- +(\leftWidth, \lineWidth / 2) -- +(\leftWidth, -\lineWidth / 2) -- +(\arrowLineOffset, -\lineWidth / 2) -- +(\arrowWidth, -\arrowHeight / 2) -- +(0, 0);
                        \node[\leftForeground] at (\leftWidth / 2, \boxHeight) {\leftName};


                        \shade[shading=axis, left color=\centerBackground, right color=\centerBackground, shading angle=90] (\leftWidth, \boxHeight-\lineWidth/2) -- +(\centerWidth, 0) -- +(\centerWidth, \lineWidth) -- +(0, \lineWidth) -- +(0, 0);
                        \node[\centerForeground] at (\leftWidth + \centerWidth / 2, \boxHeight) {\centerName};

                        \shade[shading=axis, left color=\centerBackground, right color=\rightBackground, shading angle=90] (\leftWidth + \centerWidth + \rightWidth, \boxHeight) -- +(-\arrowWidth, \arrowHeight/2) -- +(-\arrowLineOffset, \lineWidth / 2) -- +(-\leftWidth, \lineWidth / 2) -- +(-\leftWidth, -\lineWidth / 2) -- +(-\arrowLineOffset, -\lineWidth / 2) -- +(-\arrowWidth, -\arrowHeight / 2) -- +(0, 0);
                        \node[\rightForeground] at (\leftWidth + \centerWidth + \rightWidth / 2, \boxHeight) {\rightName};
                    }
                }
            }
        }
    }
}

\tikzpic{comparisonTable}{1}{
    % Task, technolog/implementation different colors for top category/application/(CNN ML AI vs general purpose)
    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}

    
    \pgfmathsetlengthmacro{\legendWidth}{2.75cm};
    \pgfmathsetlengthmacro{\leftWidth}{7.5cm};
    \pgfmathsetlengthmacro{\centerWidth}{2.5cm};
    \pgfmathsetlengthmacro{\rightWidth}{7.4cm};
    \pgfmathsetlengthmacro{\height}{8cm - 5.25cm};

    \pic  at (\legendWidth, -0.4cm) {arrowTableColumns={\leftWidth}{\centerWidth}{\rightWidth}{\height + 1.5cm}{0.35cm}{{\textbf{Flexibility}}/ /{\textbf{Performance}}}{{white/darkBlue}/{white/darkGreen}/{white/darkPurple}}};

    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, inner sep=0, anchor=center] at (\legendWidth / 2, \height / 2) {
            %\Large
            \scriptsize
            \rowcolors{1}{darkGray!20}{darkGray!5}
            \begin{tabular}{|c|}
                \hline
                 \rowcolor{darkGray}
                 \color{white}{\textbf{Parameters}} \\
                 Technology \\
                 Die Area \\
                 Applications \\
                 Cores \\
                 INT Support\\
                 FXP Support \\
                 FP Support \\
                 Supply Voltage \\
                 %Power Range \\
                 Frequency \\
                 Performance \\
                 Energy Efficiency \\
                 %Published at \\
                \hline

            \end{tabular}
    };

    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, inner sep=0, anchor=center] at (\legendWidth + \leftWidth / 2, \height / 2) {
            %\Large
            \scriptsize
            \rowcolors{1}{darkGray!20}{darkGray!5}
            \begin{tabular}{|c|c|c}
                \hline
                    \rowcolor{darkGray}
                    \color{white}{\textbf{Conti et al.~\cite{ContiRPGMROEOHMJEGLBB23}}} & \color{white}{\textbf{Wang et al.~\cite{WangKMMP19}}} &\color{white}{\textbf{Feng et al.~\cite{FengCKKLMNSZNST22}}} \\
                    \qty{22}{\nano\metre} & \qty{40}{\nano\metre} & \qty{16}{\nano\metre} \\
                    \qty{18.7}{\square\milli\metre} & \qty{4.7}{\square\milli\metre} & \qty{20.1}{\square\milli\metre} \\
                    General Software & DFGs & DFGs \\
                    16 RISC-V & 16 PEs & 384 PEs \\
                    2-32 & N/A & 16 \\
                    N/A & 32 & N/A \\
                    16, 32 & N/A & 16 \\
                    0.5--\qty{0.8}{\volt} & 0.8--\qty{1.1}{\volt} & 0.84--\qty{1.29}{\volt} \\
                    %12.8--\qty{123}{\milli\watt} & 102--\qty{102}{\milli\watt} & N/A \\
                    \qty{420}{\mega\hertz} & \qty{753}{\mega\hertz} & \qty{955}{\mega\hertz} \\
                    \qty[per-mode=repeated-symbol]{6.9}{\giga\flops} & \qty[per-mode=repeated-symbol]{5.38}{\giga\ops} & \qty[per-mode=repeated-symbol]{367}{\giga\ops} \\
                    \qty[per-mode=repeated-symbol]{207}{\giga\flops\per\watt} & \qty[per-mode=repeated-symbol]{26.4}{\giga\ops\per\watt} & \qty[per-mode=repeated-symbol]{538}{\giga\ops\per\watt} \\
                    %\cite{ContiRPGMROEOHMJEGLBB23}~ISSCC'23 &  \cite{WangKMMP19}~A-SSCC'19 & \cite{FengCKKLMNSZNST22}~VLSI Symp.'22 \\
                \hline

            \end{tabular}
    };
    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, inner sep=0, anchor=center] at (\legendWidth + \leftWidth + \centerWidth / 2, \height / 2) {
            %\Large
            \scriptsize
            \rowcolors{1}{darkGray!20}{darkGray!5}
            \begin{tabular}{|c|}
                \hline
                 \rowcolor{darkGray}
                 \color{white}{\textbf{This Work}} \\
                 \qty{22}{\nano\metre} \\
                 \qty{10}{\square\milli\metre} \\
                 Loop Nests \\
                 64 PEs \\
                 32 \\
                 N/A \\
                 8, 32 \\
                 0.6--\qty{1.2}{\volt} \\
                 %0.142--\qty{7.5}{\watt} \\
                 \qty{700}{\mega\hertz} \\
                 \qty[per-mode=repeated-symbol]{537.60}{\giga\flops} \\
                 \qty[per-mode=repeated-symbol]{270}{\giga\flops\per\watt} \\
                 %\\
                \hline

            \end{tabular}
    };
    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, inner sep=0, anchor=center] at (\legendWidth + \leftWidth + \centerWidth + \rightWidth / 2, \height / 2) {
            %\Large
            \scriptsize
            \rowcolors{1}{darkGray!20}{darkGray!5}
            \begin{tabular}{|c|c|c}
                \hline
                 \rowcolor{darkGray}
                 \color{white}{\textbf{Du et al.~\cite{DuTCLCLCY23}}} & \color{white}{\textbf{Moon et al.~\cite{MoonMSS23}}} &\color{white}{\textbf{Huang et al.~\cite{HuangWHKLJHCCLLTHCCC23}}} \\
                    \qty{28}{\nano\metre} & \qty{28}{\nano\metre} & \qty{22}{\nano\metre} \\
                    \qty{9.08}{\square\milli\metre} & \qty{9.61}{\square\milli\metre} & \qty{30.6}{\square\milli\metre} \\
                    Deep Learning & Deep Learning & CNN \\
                    1024 PEs & 32 PEs & N/A \\
                    8 & 1-8 & 1-8 \\
                    N/A & N/A & N/A \\
                    N/A & N/A & N/A \\
                    0.66--\qty{1.3}{\volt} & 0.46--\qty{1.13}{\volt} & 0.7--\qty{0.8}{\volt} \\
                    %17--\qty{174}{\milli\watt} & 2.06--\qty{237.1}{\milli\watt} & N/A \\
                    \qty{500}{\mega\hertz} & \qty{400}{\mega\hertz} & \qty{200}{\mega\hertz} \\
                    \qty[per-mode=repeated-symbol]{512}{\giga\ops} & \qty[per-mode=repeated-symbol]{18.9}{\tera\ops} & \qty[per-mode=repeated-symbol]{24.88}{\tera\ops} \\
                    \qty[per-mode=repeated-symbol]{11.2}{\tera\ops\per\watt} & \qty[per-mode=repeated-symbol]{127.8}{\tera\ops\per\watt} & \qty[per-mode=repeated-symbol]{251}{\tera\ops\per\watt} \\
                    %\cite{DuTCLCLCY23}~ISSCC'23 & \cite{MoonMSS23}~ISSCC'23 & \cite{HuangWHKLJHCCLLTHCCC23}~ISSCC'23 \\
                \hline

            \end{tabular}
    };
}

\tikzpic{overheadTable}{1}{
    % Task, technolog/implementation different colors for top category/application/(CNN ML AI vs general purpose)
    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}

    \pgfmathsetlengthmacro{\legendWidth}{3cm};
    \pgfmathsetlengthmacro{\leftWidth}{16cm};
    \pgfmathsetlengthmacro{\height}{8cm - 3cm};
    \pgfmathsetlengthmacro{\subheight}{\height / 4};


    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, inner sep=0, anchor=center] at (\legendWidth / 2, \height / 2) {
            %\Large
            \scriptsize
            \rowcolors{1}{darkGray!20}{darkGray!5}
            \begin{tabular}{|c|}
                \hline
                 \rowcolor{darkGray}
                 \color{white}{\textbf{Benchmark}} \\
                 Data-flow Operations \\
                 Executed Instructions \\
                 Control Overhead \\
                \hline
            \end{tabular}
    };

    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, inner sep=0, anchor=center, fill=white] at (\legendWidth + \leftWidth / 2, \height / 2) {
            %\Large
            \scriptsize
            \rowcolors{1}{darkGray!20}{darkGray!5}
            \begin{tabular}{|c|c|c|c|c|c|c|}
                \hline
                \rowcolor{darkGray}
                \color{white}{\textbf{trmm}}         &  \color{white}{\textbf{trisolv}}         &  \color{white}{\textbf{syrk}}       &  \color{white}{\textbf{syr2k}}      &  \color{white}{\textbf{symm}}         &  \color{white}{\textbf{seidel-2d}}  &  \color{white}{\textbf{mvt}}         \\
                \qty{9648000}{}                      &  \qty{160400}{}                          &  \qty{17308800}{}                   &  \qty{69177600}{}                   &  \qty{24288000}{}                     &  \qty{142563600}{}                  &  \qty{640000}{}                      \\
                \qty{43465540}{}                     &  \qty{643217}{}                          &  \qty{69795026}{}                   &  \qty{196476513}{}                  &  \qty{77425348}{}                     &  \qty{262561052}{}                  &  \qty{2724024}{}                     \\
                \qty{77.80}{\percent}                &  \qty{75.06}{\percent}                   &  \qty{75.20}{\percent}              &  \qty{64.79}{\percent}              &  \qty{68.63}{\percent}                &  \qty{45.70}{\percent}              &  \qty{76.51}{\percent}               \\

                \hline\hline                                                                                                                                                                                                                                                                     
                \rowcolor{darkGray}                                                                                                                                                                                                                                                              
                \color{white}{\textbf{ludcmp}}       &  \color{white}{\textbf{lu}}              &  \color{white}{\textbf{jacobi-2d}}  &  \color{white}{\textbf{jacobi-1d}}  &  \color{white}{\textbf{gramschmidt}}  &  \color{white}{\textbf{gesummv}}    &  \color{white}{\textbf{gemver}}      \\
                \qty{64400400}{}                     &  \qty{32080000}{}                        &  \qty{37200600}{}                   &  \qty{159600}{}                     &  \qty{46248000}{}                     &  \qty{250750}{}                     &  \qty{1600400}{}                     \\
                \qty{109239230}{}                    &  \qty{213417020}{}                       &  \qty{102052753}{}                  &  \qty{419420}{}                     &  \qty{109437634}{}                    &  \qty{1003269}{}                    &  \qty{5289238}{}                     \\
                \qty{41.05}{\percent}                &  \qty{84.97}{\percent}                   &  \qty{63.55}{\percent}              &  \qty{61.95}{\percent}              &  \qty{57.74}{\percent}                &  \qty{75.01}{\percent}              &  \qty{69.74}{\percent}               \\

                \hline\hline                                                                                                                                                                                                                                                                     
                \rowcolor{darkGray}                                                                                                                                                                                                                                                              
                \color{white}{\textbf{gemm}}         &  \color{white}{\textbf{floyd-warshall}}  &  \color{white}{\textbf{fdtd-2d}}    &  \color{white}{\textbf{dynprog}}    &  \color{white}{\textbf{durbin}}       &  \color{white}{\textbf{doitgen}}    &  \color{white}{\textbf{covariance}}  \\
                \qty{31724000}{}                     &  \qty{500000000}{}                       &  \qty{52824000}{}                   &  \qty{4967600}{}                    &  \qty{562000}{}                       &  \qty{14620000}{}                   &  \qty{30130102}{}                    \\
                \qty{95393625}{}                     &  \qty{1251503521}{}                      &  \qty{182096857}{}                  &  \qty{23257050}{}                   &  \qty{1452037}{}                      &  \qty{59078389}{}                   &  \qty{68659335}{}                    \\
                \qty{66.74}{\percent}                &  \qty{60.05}{\percent}                   &  \qty{70.99}{\percent}              &  \qty{78.64}{\percent}              &  \qty{61.30}{\percent}                &  \qty{75.25}{\percent}              &  \qty{56.12}{\percent}               \\

                \hline\hline                                                                                                                                                                                                                                                                     
                \rowcolor{darkGray}                                                                                                                                                                                                                                                              
                \color{white}{\textbf{correlation}}  &  \color{white}{\textbf{cholesky}}        &  \color{white}{\textbf{bigc}}       &  \color{white}{\textbf{atax}}       &  \color{white}{\textbf{adi}}          &  \color{white}{\textbf{3mm}}        &  \color{white}{\textbf{2mm}}         \\
                \qty{21736080}{}                     &  \qty{32241200}{}                        &  \qty{640421}{}                     &  \qty{640400}{}                     &  \qty{72040000}{}                     &  \qty{45711900}{}                   &  \qty{36667800}{}                    \\
                \qty{61389731}{}                     &  \qty{85656422}{}                        &  \qty{2562114}{}                    &  \qty{2721501}{}                    &  \qty{227240349}{}                    &  \qty{183299647}{}                  &  \qty{132684516}{}                   \\
                \qty{64.59}{\percent}                &  \qty{62.36}{\percent}                   &  \qty{75.00}{\percent}              &  \qty{76.47}{\percent}              &  \qty{68.30}{\percent}                &  \qty{75.06}{\percent}              &  \qty{72.36}{\percent}               \\
                \hline                                                                                                                                                                                                                                                                           
            \end{tabular}
    };
}

\tikzpic{waveformPic}{9} {
    \foreach \name [count=\i] in {#5} {
       \node[anchor=east] at (0, 0 - \i * #3 + #2 / 2) {\small \name};
    }
    
    \definecolor{backgroundColor}{RGB}{255, 255, 255};
    \definecolor{slotColor}{RGB}{240, 240, 240};

    \foreach \i in {1,...,#6} {
        \foreach \j in {0,...,#7} {
            \fill[fill=backgroundColor] (0 + \j * #1, 0 - \i * #3 - #3 * 0.5 + #2 * 0.5) -- +(#1, 0) -- +(#1, #3) -- +(0, #3) circle;

            \fill[fill=slotColor] (0 + \j * #1, 0 - \i * #3 - #4) -- +(#1, 0) -- +(#1, #2 + #4 + #4) -- +(0, #2 + #4 + #4) circle;
        }
    }
    \foreach \mode\start\end\label\col\pos [count=\i] in {#9} {
        \ifthenelse{\equal{\mode}{r}}
        {
            \draw[-, very thick, draw=\col] 
                (#1 + \start * #1, 0 + #2 * \pos - #2) --
                (#1 + \start * #1, 0 + #2 * 0.5 + #2 * \pos - #2) --
                node[midway, anchor=south, above, \col] {\label}
                (#1 + \end * #1, 0 + #2 * 0.5 + #2 * \pos - #2) --
                (#1 + \end * #1, 0 + #2 * \pos - #2);
            
            \draw[-, draw=\col, dashed] 
                (#1 + \start * #1, 0 + #2 * \pos - #2) --
                (#1 + \start * #1, 0 - #6 * #3 - #3 * 0.5 + #2 * 0.5);
            \draw[-, draw=\col, dashed] 
                (#1 + \end * #1, 0 + #2 * \pos - #2) --
                (#1 + \end * #1, 0 - #6 * #3 - #3 * 0.5 + #2 * 0.5);

        }
        {
            \ifthenelse{\equal{\mode}{p}}
            {
                \draw[-, very thick, draw=\col] (#1 + \start * #1, 0 - #6 * #3 - #3 * 0.5 + #2 * 0.5) -- node[anchor=north, \col] {\label} +(0, -#4);
            }
            {
                \draw[-, very thick, draw=\col] (#1 + \start * #1, 0 - #6 * #3 - #3 * 0.5 + #2 * 0.5 - #4) -- node[at start, anchor=north,  \col] {\label} +(0, #6 * #3 + #4);
            }
        }
    }
    \foreach \data\mode [count=\i] in {#8} {
        \ifthenelse{\equal{\mode}{s}}
        {
            \foreach \point [count=\j, remember=\point as \lastPoint] in \data {
                \ifthenelse{\equal{\point}{0}}
                {
                    \ifthenelse{\equal{\lastPoint}{0}}
                    {
                        \draw[-, thick] (0 + \j * #1 - #1, 0 - \i * #3) -- +(#1, 0);
                    }
                    {
                        \draw[-, thick] (0 + \j * #1 - #1, 0 - \i * #3 + #2) -- +(0, -#2) -- +(#1, -#2);
                    }
                }
                {
                    \ifthenelse{\equal{\lastPoint}{0}}
                    {
                        \draw[-, thick] (0 + \j * #1 - #1, 0 - \i * #3) -- +(0, #2) -- +(#1, #2);
                    }
                    {
                        \draw[-, thick] (0 + \j * #1 - #1, 0 - \i * #3 + #2) -- +(#1, 0);
                    }
                }
            }
        }{}
        \ifthenelse{\equal{\mode}{b}}
        {
            \newcounter{start}
            \setcounter{start}{0}
            \foreach \trace [count=\j, remember=\trace as \lastTrace] in \data {
                \foreach \duration\name\color in \trace {
                    \node[inner sep=0, anchor=south west, minimum width=\duration * #1, minimum height=#2] at (\value{start} * #1, -\i * #3) {\name};
                    \draw[-, thick] (0 + \value{start} * #1, 0 - \i * #3 + #2) -- +(0.5 * #4, -#2) -- +(\duration * #1, -#2);
                    \draw[-, thick] (0 + \value{start} * #1, 0 - \i * #3) -- +(0.5 * #4, #2) -- +(\duration * #1, #2);

                    \addtocounter{start}{\duration}
                }
            }
        }{}
        \ifthenelse{\equal{\mode}{t}}
        {
            \foreach \trace [count=\j] in \data {
                \foreach \start\duration\name\foreground\background in \trace {
                    \colorlet{leftColor}{\background}
                    \colorlet{rightColor}{leftColor!80}
                    \node[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}, shading=axis, left color=leftColor, right color=rightColor, shading angle=0, inner sep=0, anchor=south west, minimum width=\duration * #1, minimum height=#2, draw, text=\foreground] at (\start * #1, -\i * #3) {\small \textbf{\name}};
                }
            }
        }{}
    }
    \draw[blockArrowTo, very thick] (0, 0) --  (0, 0 - #6 * #3 - #3 * 0.5 + #2 * 0.5) -- node[anchor=center, midway, yshift=-#3/2] {Time} +(#7 * #1 + 2 * #1, 0);
    %\draw[blockArrowTo, very thick] (0, 0 - #3 * 0.5 + #2 * 0.5 -#6 * #3) --  (0, 0 - #6 * #3 - #3 * 0.5 + #2 * 0.5) -- node[anchor=center, midway, yshift=-#3/2] {Time} +(#7 * #1 + 2 * #1, 0);
    %\draw[-, very thick] (0, 0 - #3 * 0.5 + #2 * 0.5) -- +(0, -#6 * #3);

}

\tikzpic{plotPic}{5} {
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \pgfplotstableread{#1}{\data}
    \foreach \xLabel\xticks\xOffset in {#4} {
        \foreach \yLabel\yticks\yOffset in {#5} {
            \begin{axis}[
                width=#2,
                height=#3,
                scale only axis=true,
                xlabel = \xLabel,
                ylabel = \yLabel,
                axis lines=left, 
                thick, 
                xtick=\xticks,
                ytick=\yticks,
                xlabel style={yshift=\xOffset},
                ylabel style={yshift=-\yOffset},
                grid=both,
            ]
                \addplot[darkBlue, smooth, very thick, mark=*] table {\data};
            \end{axis}
        }
    }
}

\tikzpic{interConnectDataPlot}{2} {
    %\tikzset{scale=0.3, every node/.style={scale=0.3}}
    \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}

    \pic (array) at (0, 0) {peArrayNoBuffer=
        {#1}
        {#2}
    };
    \definecolor{darkRed}{RGB}{177, 0, 18}

    \foreach \x in {1,...,#1} {
        \foreach \y in {2,...,#2} {
            \pgfmathsetlengthmacro{\peX}{1 * (\x - 1) * 0.65cm + 0.25cm};
            \pgfmathsetlengthmacro{\peY}{1 * (\y - 1) * 0.65cm + 0.25cm};

            \ifthenelse{\equal{\x}{#1}}{}{
                \draw[thick, -{Latex[length=0.07cm]}, darkRed] (\peX, \peY) -- +(0.25cm + 0.15cm, 0);
                \draw[thick, -{Latex[length=0.07cm]}, darkRed] (\peX, \peY) -- +(-0.25cm - 0.15cm, 0);

                \draw[thick, -{Latex[length=0.07cm]}, darkRed] (\peX, \peY) -- +(0, 0.25cm + 0.15cm);
                \draw[thick, -{Latex[length=0.07cm]}, darkRed] (\peX, \peY) -- +(0, -0.25cm - 0.15cm);
            }
        }
    }
}
\tikzpic{interConnectControlPlot}{2} {
    %\tikzset{scale=0.3, every node/.style={scale=0.3}}
    \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}

    \pic (array) at (0, 0) {peArrayNoBuffer=
        {#1}
        {#2}
    };
    \definecolor{darkRed}{RGB}{177, 0, 18}

    \pic (gc) at (-3 * 0.65cm, {(#2 - 2) * 0.65cm}) {blockPic={GC}{1.15cm}{1.15cm}{/1//}{/Out//}};

    \pgfmathsetlengthmacro{\upperLeftX}{0.25cm};
    \pgfmathsetlengthmacro{\upperLeftY}{#2 * 0.65cm - 0.65cm + 0.25cm};

    \pgfmathsetlengthmacro{\lowerRightX}{#1 * 0.65cm - 0.65cm};
    \pgfmathsetlengthmacro{\lowerRightY}{0.5cm};

    \draw[blockArrowTo, thick, darkRed] (gcOut) -- (\upperLeftX, \upperLeftY);
    \draw[blockArrowTo, thick, darkRed] (\upperLeftX, \upperLeftY) -- (\upperLeftX, \lowerRightY);

    \foreach \i in {1,...,#2} {
        \ifthenelse{\equal{\i}{#2}}{}{
            \draw[blockArrowTo, thick, darkRed] (\upperLeftX, {\upperLeftY - (\i - 1) * 0.65cm}) -- (\lowerRightX, {\upperLeftY - (\i - 1) * 0.65cm});
        }
    }
}

\tikzpic{peProgram}{2} {
    \pgfmathsetlengthmacro{\columnWidth}{0.5cm};
    \pgfmathsetlengthmacro{\columnHeight}{2cm};

    \pic at (0 * \columnWidth, 0) {rotatedBlockPic={Opcode}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (1 * \columnWidth, 0) {rotatedBlockPic={Destination}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (2 * \columnWidth, 0) {rotatedBlockPic={Source}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (3 * \columnWidth, 0) {rotatedBlockPic={Source}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (4 * \columnWidth, 0) {rotatedBlockPic={Opcode}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (5 * \columnWidth, 0) {rotatedBlockPic={Wait}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (6 * \columnWidth, 0) {rotatedBlockPic={Source}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (7 * \columnWidth, 0) {rotatedBlockPic={Target}{\columnWidth}{\columnHeight}{///}{///}};
    \pic at (8 * \columnWidth, 0) {rotatedBlockPic={Target}{\columnWidth}{\columnHeight}{///}{///}};

    \pic at (0, -\columnWidth) {blockPic={Data}{\columnWidth * 4}{\columnWidth}{///}{///}};
    \pic at (4 * \columnWidth, -\columnWidth) {blockPic={Control}{\columnWidth * 5}{\columnWidth}{///}{///}};


}

\newcounter{numberOfPieces}
\newcounter{currentAngle}

\tikzpic{pieChart}{7} {
    \setcounter{numberOfPieces}{0}
    \foreach \data in {#7} {
        \foreach \name\color\fraction\val in \data {
            \addtocounter{numberOfPieces}{1}
        }
    }

    \pgfmathsetlengthmacro{\outerRadius}{#1};
    \pgfmathsetlengthmacro{\innerRadius}{#2};

    \pgfmathsetlengthmacro{\rowHeight}{#3};
    \pgfmathsetlengthmacro{\rowMargin}{#4};
    \pgfmathsetlengthmacro{\legendOffset}{#5};

    \pgfmathsetlengthmacro{\legendHeight}{\value{numberOfPieces} * (\rowHeight + \rowMargin) - \rowMargin};

    \pgfmathsetlengthmacro{\topOffset}{(2 * \outerRadius - \legendHeight) / 2};

    \foreach [count=\i] \data in {#7} {
        \foreach \name\color\fraction\val in \data {
            \pgfmathsetlengthmacro{\currentLine}{{\topOffset + (\i - 1) * (\rowHeight + \rowMargin)}};
            \node[inner sep = 0, anchor=east, minimum height=\rowHeight, align=center] at (-\legendOffset, \currentLine + \rowHeight/2) {\name};

            \colorlet{leftColor}{\color}
            \colorlet{rightColor}{leftColor!70}

            \draw[shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (-\legendOffset+\rowHeight, \currentLine+\rowHeight/2) circle (\rowHeight/2);

            \ifthenelse{\equal{\val}{}}
            {
                \node[inner sep = 0, anchor=south west, minimum height=\rowHeight, align=center] at (-\legendOffset+2*\rowHeight, \currentLine) {\pgfmathparse{\fraction*100}\pgfmathprintnumber{\pgfmathresult}\,\%};
            }{
                \node[inner sep = 0, anchor=south west, minimum height=\rowHeight, align=center] at (-\legendOffset+2*\rowHeight, \currentLine) {\val~\pgfmathparse{\fraction*100}(\pgfmathprintnumber{\pgfmathresult}\,\%)};
            }
        }
    }

    \node[circle, minimum width=\outerRadius * 2, inner sep=0, align=center] (outerCircle) at (\outerRadius, \outerRadius) {#6};
    \node[circle, minimum width=\innerRadius * 2, inner sep=0] (innerCircle) at (\outerRadius, \outerRadius) {};

    \draw [drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}] (innerCircle.0) -- (outerCircle.0) arc[start angle=0, end angle=360,radius=\outerRadius] -- (innerCircle.360) arc[start angle=360, end angle=0,radius=\innerRadius];

    \setcounter{currentAngle}{0}

    \foreach [count=\i] \data in {#7} {
        \foreach \name\color\fraction\val in \data {
            \pgfmathsetlengthmacro{\startAngle}{\value{currentAngle}};

            \pgfmathsetlengthmacro{\angleFraction}{\fraction * 360};
            \pgfmathsetlengthmacro{\conversion}{\angleFraction};
            \addtocounter{currentAngle}{\conversion}

            \pgfmathsetlengthmacro{\endAngle}{\value{currentAngle}};
            \ifthenelse{\equal{\value{numberOfPieces}}{\i}}
            {
                \pgfmathsetlengthmacro{\endAngle}{360};
            }

            \colorlet{leftColor}{\color}
            \colorlet{rightColor}{leftColor!70}

            \draw [shading=axis, left color=leftColor, right color=rightColor, shading angle=0] (innerCircle.{\startAngle}) -- (outerCircle.{\startAngle}) arc[start angle={\startAngle}, end angle={\endAngle},radius=\outerRadius] -- (innerCircle.{\endAngle}) arc[start angle={\endAngle}, end angle={\startAngle},radius=\innerRadius];

        }
    }

}

\tikzpic{hmp4040}{0}{
    \tikzset{every node/.append style={font=\fontsize{8}{12}\selectfont}}
    \pgfmathsetlengthmacro{\connectorSize}{0.075cm};
    \pgfmathsetlengthmacro{\width}{4cm};
    \pgfmathsetlengthmacro{\height}{1.75cm};

    \pgfmathsetlengthmacro{\botHeight}{\height/175*50};
    \pgfmathsetlengthmacro{\topHeight}{\height - \botHeight};
    \pgfmathsetlengthmacro{\margins}{\width / 16};

    \pgfmathsetlengthmacro{\slotWidth}{\width / 4};

    \pgfmathsetlengthmacro{\displayWidth}{7 * \margins};
    \pgfmathsetlengthmacro{\displayHeight}{3 * \margins};
    \pgfmathsetlengthmacro{\displayRowHeight}{\displayHeight / 4};
    \pgfmathsetlengthmacro{\displayColumnWidth}{\displayWidth / 3};

    \pgfmathsetlengthmacro{\displayX}{\margins};
    \pgfmathsetlengthmacro{\displayY}{\botHeight + \margins};

    \draw[fill=lightgray] (0, 0) -- +(\width, 0) -- +(\width, \botHeight) -- +(0, \botHeight) -- +(0, 0);
    \draw[fill=gray] (0, \botHeight) -- +(\width, 0) -- +(\width, \topHeight) -- +(0, \topHeight) -- +(0, 0);

    \draw[fill=white] (\displayX, \displayY) -- + (\displayWidth, 0) -- +(\displayWidth, \displayHeight) -- +(0, \displayHeight) -- +(0, 0);

    
    \foreach \i in {1,...,3} {
        \draw[very thin, -] (\displayX, \displayY + \i * \displayRowHeight) -- +(\displayWidth, 0);
    }

    %\node at (\displayX + \displayColumnWidth / 2, \displayY + \displayRowHeight / 2) {\tiny 3V};
    %\node at (\displayX + \displayColumnWidth / 2 + 1 * \displayColumnWidth, \displayY + \displayRowHeight / 2) {\tiny 3V};
    %\node at (\displayX + \displayColumnWidth / 2 + 2 * \displayColumnWidth, \displayY + \displayRowHeight / 2) {\tiny 3V};

    %\node at (\displayX + \displayColumnWidth / 2, \displayY + \displayRowHeight / 2 + 1 * \displayRowHeight) {\tiny 3V};
    %\node at (\displayX + \displayColumnWidth / 2 + 1 * \displayColumnWidth, \displayY + \displayRowHeight / 2 + 1 * \displayRowHeight) {\tiny 3V};
    %\node at (\displayX + \displayColumnWidth / 2 + 2 * \displayColumnWidth, \displayY + \displayRowHeight / 2 + 1 * \displayRowHeight) {\tiny 3V};

    \pgfmathsetlengthmacro{\displayFontSize}{\displayRowHeight * 0.72};

    \node[font=\fontsize{\displayFontSize}{8}\selectfont] at (\displayX + \displayColumnWidth / 2, \displayY + \displayRowHeight / 2 + 2 * \displayRowHeight) {\qty{0.9}{\volt}};
    \node[font=\fontsize{\displayFontSize}{8}\selectfont] at (\displayX + \displayColumnWidth / 2 + 1 * \displayColumnWidth, \displayY + \displayRowHeight / 2 + 2 * \displayRowHeight) {\qty{2.74}{\watt}};
    \node[font=\fontsize{\displayFontSize}{8}\selectfont] at (\displayX + \displayColumnWidth / 2 + 2 * \displayColumnWidth, \displayY + \displayRowHeight / 2 + 2 * \displayRowHeight) {\qty{3.0}{\ampere}};

    \node[font=\fontsize{\displayFontSize}{8}\selectfont] at (\displayX + \displayColumnWidth / 2, \displayY + \displayRowHeight / 2 + 3 * \displayRowHeight) {\qty{12.2}{\volt}};
    \node[font=\fontsize{\displayFontSize}{8}\selectfont] at (\displayX + \displayColumnWidth / 2 + 1 * \displayColumnWidth, \displayY + \displayRowHeight / 2 + 3 * \displayRowHeight) {\qty{10.62}{\watt}};
    \node[font=\fontsize{\displayFontSize}{8}\selectfont] at (\displayX + \displayColumnWidth / 2 + 2 * \displayColumnWidth, \displayY + \displayRowHeight / 2 + 3 * \displayRowHeight) {\qty{870.5}{\milli\ampere}};


    \node at (0.75 * \width, 2.5 * \botHeight) {\scriptsize R\&S HMP4040};

    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}

    \foreach \i in {1,...,4} {
        \pgfmathsetlengthmacro{\centerX}{(\i - 1) * \slotWidth + \slotWidth / 2};
        \pgfmathsetlengthmacro{\centerY}{\botHeight / 2};

        \draw[fill=darkGray] (\centerX-1.5*\connectorSize, \centerY+1.5*\connectorSize) circle (\connectorSize);
        \draw[fill=darkGray] (\centerX+1.5*\connectorSize, \centerY+1.5*\connectorSize) circle (\connectorSize);

        \draw[fill=darkBlue] (\centerX-1.5*\connectorSize, \centerY-1.5*\connectorSize) circle (\connectorSize);
        \draw[fill=darkRed] (\centerX+1.5*\connectorSize, \centerY-1.5*\connectorSize) circle (\connectorSize);

        \draw[fill=black] (\centerX-1.5*\connectorSize, \centerY+1.5*\connectorSize) circle (\connectorSize / 2);
        \draw[fill=black] (\centerX+1.5*\connectorSize, \centerY+1.5*\connectorSize) circle (\connectorSize / 2);

        \draw[fill=blue] (\centerX-1.5*\connectorSize, \centerY-1.5*\connectorSize) circle (\connectorSize / 2);
        \draw[fill=red] (\centerX+1.5*\connectorSize, \centerY-1.5*\connectorSize) circle (\connectorSize / 2);

        \node[inner sep=0] (SenseMinusSlot\i) at (\centerX-1.5*\connectorSize, \centerY+1.5*\connectorSize) {};
        \node[inner sep=0] (SensePlusSlot\i) at (\centerX+1.5*\connectorSize, \centerY+1.5*\connectorSize) {};

        \node[inner sep=0] (DriveMinusSlot\i) at (\centerX-1.5*\connectorSize, \centerY-1.5*\connectorSize) {};
        \node[inner sep=0] (DrivePlusSlot\i) at (\centerX+1.5*\connectorSize, \centerY-1.5*\connectorSize) {};
    }
}


\tikzpic{testSetup}{0}{
    \tikzset{every node/.append style={font=\fontsize{8}{12}\selectfont}}
    \pic (hmp) at (0, 0) {hmp4040={}};


    \node[draw, minimum width=2cm, minimum height=1.5cm, inner sep=0, align=center, anchor=south west] at (1, -2.5) {\footnotesize Xilinx\\\footnotesize ZCU104};
    \node[draw, minimum width=1.25cm, minimum height=0.6cm, inner sep=0, align=center, anchor=south west] at (2.8, -2.0) {\footnotesize Chip};
    \node[draw, minimum width=0.6cm, minimum height=0.2cm, inner sep=0, align=center, anchor=north west, rotate=90] at (2.8, -2.0) {\tiny FMC};

    \coordinate (fpgaMinus)at (1, -2.5cm + 1.5cm/2 - 0.125cm);
    \coordinate (fpgaPlus)at (1, -2.5cm + 1.5cm/2 + 0.125cm);

    \coordinate (coreSenseMinus) at (2.8cm+1.25cm/2 - 0.2cm, -1.4cm);
    \coordinate (coreDriveMinus) at (2.8cm+1.25cm/2 - 0.1cm, -1.4cm);
    \coordinate (coreDrivePlus) at (2.8cm+1.25cm/2 + 0.1cm, -1.4cm);
    \coordinate (coreSensePlus) at (2.8cm+1.25cm/2 + 0.2cm, -1.4cm);

    \draw[-,thick, blue] (hmpDriveMinusSlot1) |- (fpgaMinus);
    \draw[-,thick, red] (hmpDrivePlusSlot1) |- (fpgaPlus);

    \draw[-,thick, blue] (hmpDriveMinusSlot2) -- +(0, -0.7cm) -| (coreDriveMinus);
    \draw[-,thick, red] (hmpDrivePlusSlot2) -- +(0, -0.5cm) -| (coreDrivePlus);

    \draw[-,thick, black] (hmpSenseMinusSlot2) -| +(-0.2cm, -1.1cm) -| (coreSenseMinus);
    \draw[-,thick, black] (hmpSensePlusSlot2) -| +(0.2cm, -0.6cm) -| (coreSensePlus);

    \node[anchor=north east] at ([xshift=-0cm]fpgaMinus) {\tiny \qty{12.2}{\volt}};

    \node[anchor=south west, align=center] at ([yshift=0.2cm]coreSensePlus) {\tiny \qty{0.9}{\volt}};
    \node[anchor=south west, align=center] at ([xshift=-0cm]coreSensePlus) {\tiny +Sense};
}

\tikzpic{fancyArrow}{4}{
    \pgfmathsetlengthmacro{\leftWidth}{#1};
    \pgfmathsetlengthmacro{\height}{#2};
    \pgfmathsetlengthmacro{\lineWidth}{#3};

    \pgfmathsetlengthmacro{\arrowHeight}{\lineWidth * 2.00};
    \pgfmathsetlengthmacro{\arrowWidth}{\arrowHeight * 0.75};
    \pgfmathsetlengthmacro{\arrowLineOffset}{\arrowWidth / 3 + ((\arrowWidth / 3 * 2) / (\arrowHeight / 2)) * (\lineWidth / 2)}

    \pgfmathsetlengthmacro{\boxHeight}{\height-0.5 * \arrowHeight};

    \foreach \leftColor\rightColor in {#4} {
        \draw[drop shadow={shadow xshift=0.02cm, shadow yshift=-0.02cm, color=black}] 
            (0, 0) -- 
            +(\arrowWidth, \arrowHeight/2) -- 
            +(\arrowLineOffset, \lineWidth / 2) -- 
            +(\leftWidth - \arrowLineOffset, \lineWidth / 2) -- 
            +(\leftWidth - \arrowLineOffset, \lineWidth / 2) -- 
            +(\leftWidth - \arrowLineOffset, -\lineWidth / 2) -- 
            +(\arrowLineOffset, -\lineWidth / 2) -- 
            +(\arrowWidth, -\arrowHeight / 2) --
            +(0, 0);


        \shade[shading=axis, left color=\leftColor, right color=\rightColor, shading angle=00] 
            (0, 0) -- 
            +(\arrowWidth, \arrowHeight/2) -- 
            +(\arrowLineOffset, \lineWidth / 2) -- 
            +(\leftWidth - \arrowLineOffset, \lineWidth / 2) -- 
            +(\leftWidth - \arrowLineOffset, \lineWidth / 2) -- 
            +(\leftWidth - \arrowLineOffset, -\lineWidth / 2) -- 
            +(\arrowLineOffset, -\lineWidth / 2) -- 
            +(\arrowWidth, -\arrowHeight / 2) --
            +(0, 0);
    }
}

\tikzpic{turtleFlow}{4}{
    \pgfmathsetlengthmacro{\fontHeight}{#2 / 2};
    \tikzset{every node/.append style={font=\fontsize{\fontHeight}{\fontHeight}\selectfont}}
    \pgfmathsetlengthmacro{\blockWidth}{#1};
    \pgfmathsetlengthmacro{\blockHeight}{#2};
    \pgfmathsetlengthmacro{\verticalMargin}{#3};
    \pgfmathsetlengthmacro{\horizontalMargin}{#4};

    \definecolor{darkPurple}{RGB}{96, 25, 134}   
    \definecolor{darkBlue}{RGB}{0, 59, 111}      
    \definecolor{darkBrown}{RGB}{102, 51, 0}     
    \definecolor{darkGray}{RGB}{71, 79, 82}   
    \definecolor{darkRed}{RGB}{177, 0, 18}
    \definecolor{darkGreen}{RGB}{0, 147, 39}
    \definecolor{darkCyan}{RGB}{0, 147, 146}
    \definecolor{darkOrange}{RGB}{255, 111, 0}


    \pic[rotate=90] at ({(\blockWidth + \horizontalMargin) * 2 + \blockWidth/2}, {\blockHeight * 7 + \verticalMargin * 6 + \verticalMargin / 3 * 2+\blockHeight+\verticalMargin/3*2}) {fancyArrow={\blockHeight*4}{0.3*\blockWidth}{0.15*\blockWidth}{darkGray!30/darkGray!30}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1 - \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 8 - \verticalMargin / 3 + 1*\blockHeight+\verticalMargin/3*2})
    {grayBlockPic={}{\blockWidth * 3 + \horizontalMargin * 2 + \horizontalMargin / 3 * 2 + \blockHeight / 3 * 2}{\blockHeight * 2 + \verticalMargin * 1 + \verticalMargin / 3 * 2}{///}{///}};

    \pic at ({(\blockWidth + \horizontalMargin) * 3 + \blockWidth + \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 8 - \verticalMargin / 3 + 1*\blockHeight+\verticalMargin/3*2})
    {rotatedBlockPic={Project}{\blockHeight / 3 * 2}{\blockHeight * 2 + \verticalMargin * 1 + \verticalMargin / 3 * 2}{///}{///}};
%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \pic at ({(\blockWidth + \horizontalMargin) * 0 - \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 4 - \verticalMargin / 3})
    {grayBlockPic={}{\blockWidth * 5 + \horizontalMargin * 4 + \horizontalMargin / 3 * 2 + \blockHeight / 3 * 2}{\blockHeight * 4 + \verticalMargin * 3 + \verticalMargin / 3 * 2}{///}{///}};

    \pic at ({(\blockWidth + \horizontalMargin) * 4 + \blockWidth + \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 4 - \verticalMargin / 3})
    {rotatedBlockPic={Mapping}{\blockHeight / 3 * 2}{\blockHeight * 4 + \verticalMargin * 3 + \verticalMargin / 3 * 2}{///}{///}};

%%%%%%%%%%%%%%%%%%%%%%%%%%%
    \pic at ({(\blockWidth + \horizontalMargin) * 2 - \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 1 - \verticalMargin / 3})
    {grayBlockPic={}{\blockWidth * 3 + \horizontalMargin * 2 + \horizontalMargin / 3 * 2 + \blockHeight / 3 * 2}{\blockHeight * 3 + \verticalMargin * 2 + \verticalMargin / 3 * 2}{///}{///}};

    \pic at ({(\blockWidth + \horizontalMargin) * 4 + \blockWidth + \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 1 - \verticalMargin / 3})
    {rotatedBlockPic={Integration}{\blockHeight / 3 * 2}{\blockHeight * 3 + \verticalMargin * 2 + \verticalMargin / 3 * 2}{///}{///}};
%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \pic at ({(\blockWidth + \horizontalMargin) * 0 - \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 0 - \verticalMargin / 3 - \blockHeight*1})
    {grayBlockPic={}{\blockWidth * 5 + \horizontalMargin * 3 + \horizontalMargin / 3 * 2 + \blockHeight / 3 * 2}{\blockHeight * 1 + \verticalMargin * 0 + \verticalMargin / 3 * 2}{///}{///}};

    \pic at ({(\blockWidth + \horizontalMargin) * 4 + \blockWidth + \horizontalMargin / 3 }, {(\blockHeight + \verticalMargin) * 0 - \verticalMargin / 3 - \blockHeight*1})
    {rotatedBlockPic={Target}{\blockHeight / 3 * 2}{\blockHeight * 1 + \verticalMargin * 0 + \verticalMargin / 3 * 2}{///}{///}};
%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \pic[rotate=90] at ({(\blockWidth + \horizontalMargin) * 0 + \blockWidth/2}, 0) {fancyArrow={(\blockHeight + \verticalMargin) * 9 - \verticalMargin*3}{0.3*\blockWidth}{0.15*\blockWidth}{darkGray!30/darkGreen!90}};
    \pic[rotate=90] at ({(\blockWidth + \horizontalMargin) * 1 + \blockWidth/2}, 0) {fancyArrow={(\blockHeight + \verticalMargin) * 9 - \verticalMargin*3}{0.3*\blockWidth}{0.15*\blockWidth}{darkGray!30/darkBlue!90}};
    \pic[rotate=90] at ({(\blockWidth + \horizontalMargin) * 2 + \blockWidth/2}, 0) {fancyArrow={(\blockHeight + \verticalMargin) * 9 - \verticalMargin*3}{0.3*\blockWidth}{0.15*\blockWidth}{darkGray!30/darkPurple!90}};
    \pic[rotate=90] at ({(\blockWidth + \horizontalMargin) * 3 + \blockWidth/2}, 0) {fancyArrow={(\blockHeight + \verticalMargin) * 9 - \verticalMargin*3}{0.3*\blockWidth}{0.15*\blockWidth}{darkGray!30/darkOrange!90}};
    \pic[rotate=90] at ({(\blockWidth + \horizontalMargin) * 4 + \blockWidth/2}, 0) {fancyArrow={(\blockHeight + \verticalMargin) * 9 - \verticalMargin*3}{0.3*\blockWidth}{0.15*\blockWidth}{darkGray!30/darkRed!90}};

    \pic at ({(\blockWidth + \horizontalMargin) * 0}, -\blockHeight*1) {coloredBlockPic={\faPython~Python}{\blockWidth}{\blockHeight}{///}{///}{darkGreen/darkGreen!90}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1}, -\blockHeight*1) {coloredBlockPic={\faCode~SW-Simulator}{\blockWidth}{\blockHeight}{///}{///}{darkBlue/darkBlue!90}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 2}, -\blockHeight*1) {coloredBlockPic={\faWaveSquare~RTL-Simulator}{\blockWidth}{\blockHeight}{///}{///}{darkPurple/darkPurple!90}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 3}, -\blockHeight*1) {coloredBlockPic={\faMicrochip~FPGA}{\blockWidth}{\blockHeight}{///}{///}{darkOrange/darkOrange!90}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 4}, -\blockHeight*1) {coloredBlockPic={\faMicrochip~ASIC}{\blockWidth}{\blockHeight}{///}{///}{darkRed/darkRed!90}{white}};

    \pic at ({(\blockWidth + \horizontalMargin) * 2}, \blockHeight + \verticalMargin) {coloredBlockPic={\faCopy[regular]~Testbenches}{\blockWidth}{\blockHeight}{///}{///}{darkGray/darkGray!95}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 3}, \blockHeight + \verticalMargin) {coloredBlockPic={\faLinux~Driver}{\blockWidth * 2 + \horizontalMargin}{\blockHeight}{///}{///}{darkGray/darkGray!95}{white}};

    \pic at ({(\blockWidth + \horizontalMargin) * 2}, {(\blockHeight + \verticalMargin) * 2}) {blockPic={\faFile[regular]~Binary Configuration}{\blockWidth * 3 + \horizontalMargin * 2}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 2}, {(\blockHeight + \verticalMargin) * 3}) {coloredBlockPic={\faTools~Binarization}{\blockWidth * 3 + \horizontalMargin * 2}{\blockHeight}{///}{///}{darkGray/darkGray!95}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1}, {(\blockHeight + \verticalMargin) * 4}) {blockPic={\faFileCode[regular]~Concrete Configuration}{\blockWidth * 4 + \horizontalMargin * 3}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1}, {(\blockHeight + \verticalMargin) * 5}) {coloredBlockPic={\faTools~Instantiation}{\blockWidth * 4 + \horizontalMargin * 3}{\blockHeight}{///}{///}{darkGray/darkGray!95}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 0}, {(\blockHeight + \verticalMargin) * 6}) {blockPic={\faFileCode[regular]~Python Code}{\blockWidth * 1 + \horizontalMargin * 0}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1}, {(\blockHeight + \verticalMargin) * 6}) {blockPic={\faFileCode[regular]~Symbolic Configuration}{\blockWidth * 4 + \horizontalMargin * 3}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1}, {(\blockHeight + \verticalMargin) * 7}) {coloredBlockPic={\faTools~Compilation}{\blockWidth * 4 + \horizontalMargin * 3}{\blockHeight}{///}{///}{darkGray/darkGray!95}{white}};
    \pic at ({(\blockWidth + \horizontalMargin) * 0}, {(\blockHeight + \verticalMargin) * 7}) {coloredBlockPic={\faTools~Code-Generator}{\blockWidth}{\blockHeight}{///}{///}{darkGray/darkGray!95}{white}};

    \pic at ({(\blockWidth + \horizontalMargin) * 1.5}, {(\blockHeight + \verticalMargin) * 8 + 1*\blockHeight+\verticalMargin/3*2}) {blockPic={\faFile*[regular]~Parameters}{\blockWidth}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 2.5}, {(\blockHeight + \verticalMargin) * 8 + 1*\blockHeight+\verticalMargin/3*2}) {blockPic={\faFile*[regular]~Constraints}{\blockWidth}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 1}, {(\blockHeight + \verticalMargin) * 9 + 1*\blockHeight+\verticalMargin/3*2}) {blockPic={\faFileCode[regular]~Data-Generator}{\blockWidth}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 2}, {(\blockHeight + \verticalMargin) * 9 + 1*\blockHeight+\verticalMargin/3*2}) {blockPic={\faFileCode[regular]~PAULA}{\blockWidth}{\blockHeight}{///}{///}};
    \pic at ({(\blockWidth + \horizontalMargin) * 3}, {(\blockHeight + \verticalMargin) * 9 + 1*\blockHeight+\verticalMargin/3*2}) {blockPic={\faFileCode[regular]~Architecture}{\blockWidth}{\blockHeight}{///}{///}};

    %faPython
    %faMicrochip

                                                                                           

    %\pic (regFile) at (6.625cm+0.25cm, -0.125cm) {rotatedBlockPic={Data Register File}{0.5cm}{\totalHeight}{///2}{///{In, Out}}};

}


\tikzpic{cgraPE}{2}{
    \pgfmathsetlengthmacro{\slotWidth}{#1 / 2.75};
    \pgfmathsetlengthmacro{\fontHeight}{#2};
    \pgfmathsetlengthmacro{\arrowLength}{\slotWidth*0.10};
    \tikzset{every node/.append style={font=\fontsize{\fontHeight}{\fontHeight}\selectfont}}


    \pic (background) at (-0.5 * \slotWidth, -1.5*\slotWidth) {grayBlockPic={}{#1}{#1}{}{}};
    \coordinate (SW) at (-0.5 * \slotWidth, -1.5*\slotWidth);
    \coordinate (NW) at (-0.5 * \slotWidth, -1.5*\slotWidth+#1);

    \pic (instr) at (1 * \slotWidth, -1 * \slotWidth) {blockPic={Instruction\\Memory}{\slotWidth * 0.75}{\slotWidth * 0.75}{/3/2/2}{/{Alu, North, East}/{West, South}/{Lr, Bar}}};
    \pic (bar) at (0 * \slotWidth, 0 * \slotWidth) {blockPic={Crossbar\\Switch}{\slotWidth * 0.75}{\slotWidth * 0.75}{4/3/4/2}{{n0, n1, Alu0, Alu1}/{e0, e1, Instr}/{s0, s1, Lr, Alu2}/{w0, w1}}};

    \pic (lr) at (0 * \slotWidth, -1 * \slotWidth) {blockPic={Local\\Registers}{\slotWidth * 0.75}{\slotWidth * 0.75}{2/1//}{{Bar, Alu}/Instr//}};
    \pic (alu) at (1 * \slotWidth,  0 * \slotWidth) {aluPic={ALU}{\slotWidth * 0.75}{\slotWidth * 0.75}{}{}};

    \pic (southIO) at (-0.25 * \slotWidth,  -1.5 * \slotWidth) {blockPic={South IO}{\slotWidth * 2.25}{\slotWidth * 0.25}{1///}{p///}};
    \pic (northIO) at (-0.25 * \slotWidth,  1.0 * \slotWidth) {blockPic={North IO}{\slotWidth * 2.25}{\slotWidth * 0.25}{//1/}{//p/}};
    \pic (eastIO) at (2.0 * \slotWidth,  -1.25 * \slotWidth) {rotatedBlockPic={East IO}{\slotWidth * 0.25}{\slotWidth * 2.25}{///1}{///p}};
    \pic (westIO) at (-0.5 * \slotWidth,  -1.25 * \slotWidth) {rotatedBlockPic={West IO}{\slotWidth * 0.25}{\slotWidth * 2.25}{/1//}{/p//}};


    \draw [thick, -{Latex[length=\arrowLength]}] (barn0) -- (barn0 |- northIOp);
    \draw [thick, {Latex[length=\arrowLength]}-] (barn1) -- (barn1 |- northIOp);
    \draw [thick, -{Latex[length=\arrowLength]}] (barw0) -- (barw0 -| westIOp);
    \draw [thick, {Latex[length=\arrowLength]}-] (barw1) -- (barw1 -| westIOp);

    \draw [thick, -{Latex[length=\arrowLength]}] (bare0) -- ([xshift=\slotWidth*0.2]bare0) |- ([yshift=0.05*\slotWidth]eastIOp);
    \draw [thick, {Latex[length=\arrowLength]}-] (bare1) -- ([xshift=\slotWidth*0.25]bare1) |- ([yshift=-0.05*\slotWidth]eastIOp);

    \draw [thick, {Latex[length=\arrowLength]}-] (bars0) -- ([yshift=-\slotWidth*0.1]bars0) -| ([xshift=-1.05*\slotWidth]southIOp);
    \draw [thick, -{Latex[length=\arrowLength]}] (bars1) -- ([yshift=-\slotWidth*0.15]bars1) -| ([xshift=-0.95*\slotWidth]southIOp);

    \draw [thick, -{Latex[length=\arrowLength]}] (barAlu0) |- ([yshift=\slotWidth*0.2]aluRs0) -- (aluRs0);
    \draw [thick, -{Latex[length=\arrowLength]}] (barAlu1) |- ([yshift=\slotWidth*0.15]aluRs1) -- (aluRs1);
    \draw [thick, -{Latex[length=\arrowLength]}] (aluRd) |- ([yshift=-\slotWidth*0.125]barAlu2) -- (barAlu2);
    \draw [thick, -{Latex[length=\arrowLength]}] (aluRd) -- ([yshift=-\slotWidth*0.125]aluRd) -| (lrAlu);
    \draw [thick, -{Latex[length=\arrowLength]}] (lrBar) |- ([yshift=-\slotWidth*0.2]barLr) -| (barLr);

    \draw [dashed, -{Latex[length=\arrowLength]}] (instrAlu) -- ([xshift=\slotWidth*0.1]instrAlu) |- (aluEast0);
    \draw [dashed, -{Latex[length=\arrowLength]}] (instrLr) -- ([xshift=-\slotWidth*0.1]instrLr) |- (lrInstr);
    \draw [dashed, -{Latex[length=\arrowLength]}] (instrBar) -| ([xshift=\slotWidth*0.1]barInstr) |- (barInstr);

    \draw [dashed, -{Latex[length=\arrowLength]}] (instrEast) -- (instrEast -| eastIOp);
    \draw [dashed, -{Latex[length=\arrowLength]}] (instrSouth) -- (instrSouth |- southIOp);
    \draw [dashed, -{Latex[length=\arrowLength]}] (instrNorth) -| ([xshift=1.05*\slotWidth]northIOp);
    \draw [dashed, -{Latex[length=\arrowLength]}] (instrWest) |- ([yshift=-1.05*\slotWidth]westIOp);

}

\tikzpic{cgra}{4}{
    \pgfmathsetlengthmacro{\peSize}{#3};
    \pgfmathsetlengthmacro{\peOffset}{#4};

    \pic (background) at (-\peOffset, \peSize) {grayBlockPic={}{\peSize * #2 + \peOffset * #2 + \peOffset * 2 + \peSize}{\peSize * #2 + \peOffset * #2 + \peOffset}{2/2/2/2}{{n0,n1}/{e0,e1}/{s0,s1}/{w0, w1}}};
    \pic (spm) at (0, \peSize + \peOffset) {rotatedBlockPic={Scratchpad Memory (SPM)}{\peSize}{\peSize * #2 + \peOffset * #2 - \peOffset}{2/2/2/2}{{n0,n1}/{e0,e1}/{s0,s1}/{w0, w1}}};

    \foreach \x in {1,...,#1}{
        \foreach \y in {1,...,#2}{
            \pic (PE\x\y) at ({\x * (\peSize + \peOffset)}, {\y * (\peSize + \peOffset)}) {blockPic={PE}{\peSize}{\peSize}{2/2/2/2}{{n0,n1}/{e0,e1}/{s0,s1}/{w0, w1}}};
        }
    }
    \foreach \x in {1,...,#1}{
        \foreach \y in {1,...,#2}{
            \ifthenelse{\x = 1}{}{
                \draw[->] (PE\x\y w0) -- (PE\the\numexpr\x-1\relax\y e0);
                \draw[<-] (PE\x\y w1) -- (PE\the\numexpr\x-1\relax\y e1);
            }
            \ifthenelse{\y = 1}{}{
                \draw[->] (PE\x\y s0) -- (PE\x\the\numexpr\y-1\relax n0);
                \draw[<-] (PE\x\y s1) -- (PE\x\the\numexpr\y-1\relax n1);
            }
        }
    }
    \foreach \y in {1,...,#2}{
        \draw[->] (PE1\y w0) -- (PE1\y w0 -| spme0);
        \draw[<-] (PE1\y w1) -- (PE1\y w1 -| spme1);
    }

    \pic (cgra) at ({#1 * (\peSize + \peOffset) + \peSize + \peOffset + \peOffset}, {#2 * (\peSize + \peOffset)}) {cgraPE={\peSize * 4.5}{\peSize * 4 * 0.065}};
    \draw[fill=black, opacity=0.5] ({#1 * (\peSize + \peOffset)}, {#2 * (\peSize + \peOffset)}) -- (cgraSW) -- (cgraNW) -- ({#1 * (\peSize + \peOffset)}, {#2 * (\peSize + \peOffset)+\peSize}) -- cycle;
}






%    \newpage
%%    \centering
%%    ~\\
%%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm/23*4.5, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 8.38cm) {\scriptsize \textbf{Scalar Product}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm/23*9.5, anchor=north west, inner sep=0, minimum height=0.35cm] at (97.75mm/23*4.5, 8.38cm) {\scriptsize \textbf{CGRA Mapping}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm/23*9, anchor=north west, inner sep=0, minimum height=0.35cm] at ({97.75mm/23*(4.5 + 9.5)}, 8.38cm) {\scriptsize \textbf{ALPACA Mapping}};
%
%        \draw[-, dotted] (97.75mm/23*4.5, 8.38cm) -- +(0, -4.1cm);
%        \draw[-, dotted] ({97.75mm/23*(4.5+9.5)}, 8.38cm) -- +(0, -4.1cm);
%
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 4.25cm) {\scriptsize \textbf{Loop Model}};
%
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 1: Loop model and corresponding mapping of iterations onto PEs of ALPACA.};
%
%        \tikzset{scale=0.44, every node/.style={scale=0.44}}
%        \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%
%        \pic (mapping) at (0, 17) {mappingComparison={}};
%        \pic (mapping) at (0, 0) {computeCapability={}};
%    \end{tikzpicture}
%    }
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 8.38cm) {\scriptsize \textbf{Architecture}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 3.3cm) {\scriptsize \textbf{Execution Flow}};
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 2: Overview of the chip's activities from configuration to parallel loop execution.};
%
%        \tikzset{scale=0.53, every node/.style={scale=0.53}}
%        \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%        \pic (alpaca) at (0.625, 6.25+0.25) {alpaca};
%
%        \definecolor{darkPurple}{RGB}{96, 25, 134}   
%        \definecolor{darkBlue}{RGB}{0, 59, 111}      
%        \definecolor{darkBrown}{RGB}{102, 51, 0}     
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%		\definecolor{darkRed}{RGB}{177, 0, 18}
%		\definecolor{darkGreen}{RGB}{0, 147, 146}
%		\definecolor{darkOrange}{RGB}{255, 111, 0}
%
%        \pic (b) at (5.0cm, 5.5cm) {waveformPic=
%            {0.5cm} % width of slot
%            {0.35cm} % height of slot
%            {0.52cm} % height of row
%            {0.12cm} % margins
%            {Input from Host, Output to Host, Configuration Manager, \glsentrylong{gc}, \glsentrylong{lion}, DMA, Address Generators, Processing Elements~(PEs)} % row names
%            {8} % number of rows
%            {23} % number of columns
%            {
%                 {
%                    {1/4/{\scriptsize Configuration}/white/darkOrange},
%                    {8/16/\scriptsize Input Data/white/darkBlue}%
%                }/t,
%                {
%                    {5/14/{\scriptsize DMA Requests}/white/darkGreen},
%                    {19/5/\scriptsize Output Data/white/darkBlue}%
%                }/t,
%                {%CM
%                    {1/4/\scriptsize Configure/white/darkOrange}%
%                }/t,
%                {%GC
%                    {1/1//white/darkOrange},
%                    {12/12/\scriptsize Generate Control Signals/white/darkRed}%
%                }/t,
%                {%LION
%                    {2/1//white/darkOrange},
%                    {5/19/\scriptsize Schedule DMA Requests/white/darkGreen}%
%                }/t,
%                {%DMA
%                    {10/4//white/darkGreen},
%                    {8/10/\scriptsize Write Banks/white/darkBlue},
%                    {19/5/\scriptsize Read Banks/white/darkBlue}%
%                }/t,
%                {%AGs
%                    {3/1//white/darkOrange},
%                    {12/12/\scriptsize Generate Addresses/white/darkRed}%
%                }/t,
%                {%PEs
%                    {4/1//white/darkOrange},
%                    {12/12/\scriptsize Run Programs/white/darkRed}%
%                }/t%
%            }
%            {}
%        };
%    \end{tikzpicture}
%    }
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 8.38cm) {\scriptsize \textbf{Processing Element}};
%
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm/3, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 2.1cm) {\scriptsize \textbf{Data Interconnect}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm/3, anchor=north west, inner sep=0, minimum height=0.35cm] at (97.75mm/3, 2.1cm) {\scriptsize \textbf{Instruction Format}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm/3, anchor=north west, inner sep=0, minimum height=0.35cm] at (97.75mm/3*2, 2.1cm) {\scriptsize \textbf{Control Interconnect}};
%
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 3: Architecture of the processing elements used in the array.};
%
%        \tikzset{scale=0.48, every node/.style={scale=0.48}}
%        \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%
%        \pic (processingElement) at (0.625, 4.25+0.145) {processingElement={4}{2}{2}};
%
%        \pic at (2.5, 0.75) {interConnectDataPlot={4}{4}};
%        \pic at (16, 0.75) {interConnectControlPlot={4}{4}};
%        \pic at (8, 1.45) {peProgram={8}{8}};
%    \end{tikzpicture}
%    }
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 8.38cm) {\scriptsize \textbf{Peripherals for Loop Control}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 5.0cm) {\scriptsize \textbf{I/O Buffers and DMA Interface}};
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 4: Architecture of peripheral hardware units.};
%
%        \tikzset{scale=0.45, every node/.style={scale=0.45}}
%        \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%        \pic (bufferModule) at (0.5, 1.3) {bufferModule={4}{2}{2}};
%        \pic (globalController) at (0.5, 11.5) {globalController={10cm}{6cm}{4}{8}{8}{10}{7}};
%        \pic (addressGenerator) at (11, 11.5) {addressGenerator={10cm}{6cm}};
%    \end{tikzpicture}
%    }
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \definecolor{darkPurple}{RGB}{96, 25, 134}   
%        \definecolor{darkBlue}{RGB}{0, 59, 111}      
%        \definecolor{darkBrown}{RGB}{102, 51, 0}     
%		\definecolor{darkRed}{RGB}{177, 0, 18}
%		\definecolor{darkGreen}{RGB}{0, 147, 146}
%		\definecolor{darkOrange}{RGB}{255, 111, 0}
%
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 8.38cm) {\scriptsize \textbf{Power/Frequency/Energy Efficiency versus Voltage}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 5.20cm) {\scriptsize \textbf{Power and Area Breakdown}};
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 5: Simulation and measurement results for power, area, and energy efficiency.};
%
%        \tikzset{scale=0.95, every node/.style={scale=0.95}}
%        {
%            \tikzset{scale=0.75, every node/.style={scale=0.75}}
%            \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%
%            \pgfmathsetlengthmacro{\width}{9.775cm * 1.40};
%            \pgfmathsetlengthmacro{\height}{8.38cm * 1.25};
%            \pgfmathsetlengthmacro{\plotMargin}{1.30cm};
%
%            \pgfmathsetlengthmacro{\plotWidth}{(\width - 3 * \plotMargin) / 3};
%            \pgfmathsetlengthmacro{\plotHeight}{\height * 0.25};
%
%            \pic (plot) at (-0.5cm + \plotMargin,                      8.1) {plotPic={results/power.dat}{\plotWidth}{\plotHeight}{Voltage~[V]/{0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3}/0.2cm}{Power~[W]/{0, 1, 2, 3, 4, 5, 6, 7, 8}/0.2cm}};
%            \pic (plot) at (-0.5cm + 2 * \plotMargin + \plotWidth,     8.1) {plotPic={results/frequency.dat}{\plotWidth}{\plotHeight}{Voltage~[V]/{0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3}/0.2cm}{Frequency~[MHz]/{0, 100, 200, 300, 400, 500, 600, 700}/0.2cm}};
%            \pic (plot) at (-0.5cm + 3 * \plotMargin + 2 * \plotWidth, 8.1) {plotPic={results/efficiency.dat}{\plotWidth}{\plotHeight}{Voltage~[V]/{0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3}/0.2cm}{Energy Efficiency~{[GFLOPS/W]}/{0, 50, 100, 150, 200, 250, 300, 350}/0.2cm}};
%
%        }
%        \tikzset{scale=0.5, every node/.style={scale=0.5}}
%        \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%
%
%        \pic (die) at (6, 5.80) {pieChart={2cm}{1.5cm}{0.5cm}{0.5cm}{3.75cm}{Simulated\\Total Power\\\qty{2284.4}{\milli\watt}}{{Leakage/darkBlue/{0.001}/{\qty{3.4}{\milli\watt}}}, {Data\\Switching/darkGray/{0.019}/{\qty{47.1}{\milli\watt}}}, {Clock\\Network/darkGreen/{0.23}/{\qty{518.9}{\milli\watt}}}, {Flip-Flop\\Activation/darkRed/{0.75}/{\qty{1715}{\milli\watt}}}}};
%        \pic (die) at (16, 5.80) {pieChart={2cm}{1.5cm}{0.5cm}{0.5cm}{3.75cm}{Measured\\Total Power\\\qty{3}{\watt}@\qty{0.9}{\volt}}{{Leakage/darkBlue/0.005/{\qty{10.6}{\milli\watt}}}, {Data\\Switching/darkGray/0.085/{\qty{260.6}{\milli\watt}}}, {Clock\\Switching/darkRed!100!darkGreen/0.91/{\qty{2739.4}{\milli\watt}}}}};
%
%        \pic (die) at (6, 1.30) {pieChart={2cm}{1.5cm}{0.5cm}{0.3cm}{1.75cm}{Total\\Flip-Flops\\\qty{1592827}{}}{{Others/darkGray/0.01/}, {LION/darkBlue/0.03/}, {AGs/darkGreen/0.06/}, {IO Buffers/darkRed/0.41/}, {PEs/darkOrange/0.49/}}};
%        \pic (die) at (16, 1.30) {pieChart={2cm}{1.5cm}{0.5cm}{0.2cm}{1.75cm}{Total\\Area\\\qty{10}{\square\milli\metre}}{{Others/darkGray/0.24/}, {DMA/darkGreen/0.01/}, {GC/darkBrown/0.01/}, {LION/darkBlue/0.02/}, {Pads/darkPurple/0.10/}, {IO Buffers \& AGs/darkRed/0.30/}, {PEs/darkOrange/0.30/}}};
%    \end{tikzpicture}
%    }
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 6: Control overhead in various loop benchmarks of Polybench~(top)\\[-0.200cm]\scriptsize and comparison of the ALPACA chip with related work~(bottom).};
%
%        \definecolor{darkPurple}{RGB}{96, 25, 134}   
%        \definecolor{darkBlue}{RGB}{0, 59, 111}      
%        \definecolor{darkBrown}{RGB}{102, 51, 0}     
%        \definecolor{darkGray}{RGB}{71, 79, 82}   
%		\definecolor{darkRed}{RGB}{177, 0, 18}
%		\definecolor{darkGreen}{RGB}{0, 147, 146}
%		\definecolor{darkOrange}{RGB}{255, 111, 0}
%
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 8.38cm) {\scriptsize \textbf{Control Overhead in Polybench Loop Kernels}};
%        \node[draw, fill=darkGray, text = white, minimum width=97.75mm, anchor=north west, inner sep=0, minimum height=0.35cm] at (0, 4.5cm) {\scriptsize \textbf{Flexibility/Performance Comparison}};
%
%
%        \tikzset{scale=0.95, every node/.style={scale=0.95}}
%        \tikzset{scale=0.5, every node/.style={scale=0.5}}
%        \tikzset{every node/.append style={font=\fontsize{10}{12}\selectfont}}
%
%        \pic  at (1, 11) {overheadTable={}};
%        \pic  at (0, 2) {comparisonTable={}};
%    \end{tikzpicture}
%}
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure 7: ALPACA's die photo and data sheet.};
%        \tikzset{scale=0.5, every node/.style={scale=0.5}}
%        \pic (die) at (0, 2) {dieShot={}};
%    \end{tikzpicture}
%    }
%    \newpage
%    \centering
%    ~\\
%    \vspace{53.8mm}%
%    \resizebox{\textwidth}{!}{
%    \begin{tikzpicture}
%        \node[align=left, anchor=south west] at (0, 0) {\scriptsize Figure S1: Measurement setup};
%        \pic  at (0.5, 4) {testSetup={}};
%        \node[anchor=south west] at (5, 1) { \includegraphics[width=4cm]{measure_blinded.jpg} };
%    \end{tikzpicture}
%    }

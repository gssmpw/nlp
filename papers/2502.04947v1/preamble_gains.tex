% \usepackage{amssymb}
% \usepackage{mathtools}
% %\usepackage[scale=0.8]{geometry}
% \usepackage{pgfplots}
% \usepackage{pgfplotstable}
% \usepackage{filecontents}
% \usepackage{datatool}
% \usepackage{fp}
% \pgfplotsset{
%     compat=newest,
% }
% \pgfplotsset{
%     smaller labels/.style={
%         label style={font=\footnotesize},
%         tick label style={font=\footnotesize}
%     }
% }
% \tikzset{font=\small}
% \usetikzlibrary{
%     fpu,
%     fixedpointarithmetic,
%     babel,
%     external,
%     arrows.meta,
%     plotmarks,
%     positioning,
%     angles,
%     quotes,
%     intersections,
%     calc,
%     spy,
%     decorations.pathreplacing,
%     matrix,
%     fit,
% }
% \usepgfplotslibrary{fillbetween}

\usepackage{booktabs}

% gains pour un q
\newcommand{\gainstable}[1]{
	\pgfplotstabletypeset[
		col sep=comma,
		every head row/.style={
		before row={\toprule[1.pt]
		& \multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} &
		\multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} \\
		& \multicolumn{4}{c}{\textbf{of our method w.r.t. PINN}} &
		\multicolumn{4}{c}{\textbf{of our method w.r.t. FEM}} \\
		\cmidrule(lr){2-5} \cmidrule(lr){6-9}
		},
		after row=\cmidrule(lr){1-1} \cmidrule(lr){2-5} \cmidrule(lr){6-9}},
		every last row/.style={after row=\bottomrule[1.pt]},
		columns/N/.style={
		column name=\textbf{N}%,
		%			postproc cell content/.append style={
			%				/pgfplots/table/@cell content/.add={$\fontfamily{pag}\selectfont}{$}
			%			}
			},
		columns/min_PINNs/.style={column name=\textbf{min},fixed},
		columns/max_PINNs/.style={column name=\textbf{max},fixed},
		columns/mean_PINNs/.style={column name=\textbf{mean},fixed},
		columns/std_PINNs/.style={column name=\textbf{std},fixed},
		columns/min_FEM/.style={column name=\textbf{min},fixed},
		columns/max_FEM/.style={column name=\textbf{max},fixed},
		columns/mean_FEM/.style={column name=\textbf{mean},fixed},
		columns/std_FEM/.style={column name=\textbf{std},fixed},
		columns={N,min_PINNs,max_PINNs,mean_PINNs,std_PINNs,min_FEM,max_FEM,mean_FEM,std_FEM},
		precision=2
	]{#1}
}

% gains pour tous les q
\newcommand{\gainstableallq}[1]{
    \pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} &
		\multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} \\
		& & \multicolumn{4}{c}{\textbf{of our method w.r.t. PINN}} &
		\multicolumn{4}{c}{\textbf{of our method w.r.t. FEM}} \\
		\cmidrule(lr){3-6} \cmidrule(lr){7-10}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
		columns/q/.style={column name=\textbf{k}},
        columns/N/.style={column name=\textbf{N}},
		columns/min_PINNs/.style={column name=\textbf{min},fixed},
        columns/max_PINNs/.style={column name=\textbf{max},fixed},
        columns/mean_PINNs/.style={column name=\textbf{mean},fixed},
		columns/std_PINNs/.style={column name=\textbf{std},fixed},
        columns/min_FEM/.style={column name=\textbf{min},fixed},
        columns/max_FEM/.style={column name=\textbf{max},fixed},
        columns/mean_FEM/.style={column name=\textbf{mean},fixed},
		columns/std_FEM/.style={column name=\textbf{std},fixed},
        columns={q,N,min_PINNs,max_PINNs,mean_PINNs,std_PINNs,min_FEM,max_FEM,mean_FEM,std_FEM},
        precision=2
    ]{#1}
}

% gains pour tous les q avec h (pas N)
\newcommand{\gainstableallqh}[1]{
    \pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} &
		\multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} \\
		& & \multicolumn{4}{c}{\textbf{of our method w.r.t. PINN}} &
		\multicolumn{4}{c}{\textbf{of our method w.r.t. FEM}} \\
		\cmidrule(lr){3-6} \cmidrule(lr){7-10}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
		columns/q/.style={column name=\textbf{k}},
        columns/h/.style={column name=\textbf{h},sci},
		columns/min_PINNs/.style={column name=\textbf{min},fixed},
        columns/max_PINNs/.style={column name=\textbf{max},fixed},
        columns/mean_PINNs/.style={column name=\textbf{mean},fixed},
		columns/std_PINNs/.style={column name=\textbf{std},fixed},
        columns/min_FEM/.style={column name=\textbf{min},fixed},
        columns/max_FEM/.style={column name=\textbf{max},fixed},
        columns/mean_FEM/.style={column name=\textbf{mean},fixed},
		columns/std_FEM/.style={column name=\textbf{std},fixed},
        columns={q,h,min_PINNs,max_PINNs,mean_PINNs,std_PINNs,min_FEM,max_FEM,mean_FEM,std_FEM},
        precision=2
    ]{#1}
}



% gains pour tous les q
\newcommand{\gainstableMult}[1]{
    \pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} &
		\multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} \\
		& & \multicolumn{4}{c}{\textbf{of our method w.r.t. PINN}} &
		\multicolumn{4}{c}{\textbf{of our method w.r.t. FEM}} \\
		\cmidrule(lr){3-6} \cmidrule(lr){7-10}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
		columns/method/.style={column name=\textbf{method},string type},
        columns/N/.style={column name=\textbf{N}},
		columns/min_PINNs/.style={column name=\textbf{min},fixed},
        columns/max_PINNs/.style={column name=\textbf{max},fixed},
        columns/mean_PINNs/.style={column name=\textbf{mean},fixed},
		columns/std_PINNs/.style={column name=\textbf{std},fixed},
        columns/min_FEM/.style={column name=\textbf{min},fixed},
        columns/max_FEM/.style={column name=\textbf{max},fixed},
        columns/mean_FEM/.style={column name=\textbf{mean},fixed},
		columns/std_FEM/.style={column name=\textbf{std},fixed},
        columns={method,N,min_PINNs,max_PINNs,mean_PINNs,std_PINNs,min_FEM,max_FEM,mean_FEM,std_FEM},
        precision=2
    ]{#1}
}

\newcommand{\gainstableMultData}[1]{
    \pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error of our}} &
		\multicolumn{4}{c}{\textbf{Gains in $L^2$ rel error}} \\
		& & \multicolumn{4}{c}{\textbf{method w.r.t. Data Network}} &
		\multicolumn{4}{c}{\textbf{of our method w.r.t. FEM}} \\
		\cmidrule(lr){3-6} \cmidrule(lr){7-10}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-6} \cmidrule(lr){7-10}},
		columns/method/.style={column name=\textbf{method},string type},
        columns/N/.style={column name=\textbf{N}},
		columns/min_PINNs/.style={column name=\textbf{min},fixed},
        columns/max_PINNs/.style={column name=\textbf{max},fixed},
        columns/mean_PINNs/.style={column name=\textbf{mean},fixed},
		columns/std_PINNs/.style={column name=\textbf{std},fixed},
        columns/min_FEM/.style={column name=\textbf{min},fixed},
        columns/max_FEM/.style={column name=\textbf{max},fixed},
        columns/mean_FEM/.style={column name=\textbf{mean},fixed},
		columns/std_FEM/.style={column name=\textbf{std},fixed},
        columns={method,N,min_PINNs,max_PINNs,mean_PINNs,std_PINNs,min_FEM,max_FEM,mean_FEM,std_FEM},
        precision=2
    ]{#1}
}

% Lap1D : gains pour comparaison PINNs/Data
\newcommand{\gainsbothNN}[2]{
	\pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & \textbf{FEM} \\
		\cmidrule(lr){2-2}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
        columns/N/.style={column name=\textbf{N}},
		columns/err/.style={column name=\textbf{error},sci},
        columns={N,err},
        precision=2
    ]{#1} \hspace{20pt}
	\pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{2}{c}{\textbf{PINN prior $u_{\theta}$}} &
		\multicolumn{2}{c}{\textbf{Data prior $u_{\theta}^\text{data}$}} \\
		\cmidrule(lr){3-4} \cmidrule(lr){5-6}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4} \cmidrule(lr){5-6}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4} \cmidrule(lr){5-6}},
		columns/method/.style={column name=\textbf{method},string type},
        columns/N/.style={column name=\textbf{N}},
		columns/PINNs_err/.style={column name=\textbf{error},sci},
        columns/PINNs_gains/.style={column name=\textbf{gain},fixed},
        columns/NN_err/.style={column name=\textbf{error},sci},
		columns/NN_gains/.style={column name=\textbf{gain},fixed},
        columns={method,N,PINNs_err,PINNs_gains,NN_err,NN_gains},
        precision=2
    ]{#2}
}


% Ell1D : gains pour mu2
\newcommand{\gainsPINNsecond}[2]{
	\pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & \textbf{FEM} \\
		\cmidrule(lr){2-2}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
        columns/N/.style={column name=\textbf{N}},
		columns/err2/.style={column name=\textbf{error},sci},
        columns={N,err2},
        precision=2
    ]{#1} \hspace{20pt}
	\pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{2}{c}{\textbf{PINN prior $u_{\theta}$}} \\
		\cmidrule(lr){3-4}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4}},
		columns/method/.style={column name=\textbf{method},string type},
        columns/N/.style={column name=\textbf{N}},
		columns/err2/.style={column name=\textbf{error},sci},
        columns/gains2/.style={column name=\textbf{gain},fixed},
        columns={method,N,err2,gains2},
        precision=2
    ]{#2}
}

% Lap2D : gains pour mu1
\newcommand{\gainsPINNfirst}[2]{
	\pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & \textbf{FEM} \\
		\cmidrule(lr){2-2}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
        columns/N/.style={column name=\textbf{N}},
		columns/err1/.style={column name=\textbf{error},sci},
        columns={N,err1},
        precision=2
    ]{#1} \hspace{20pt}
	\pgfplotstabletypeset[
        col sep=comma,
        every head row/.style={
        before row={\toprule[1.pt]
        & & \multicolumn{2}{c}{\textbf{PINN prior $u_{\theta}$}} \\
		\cmidrule(lr){3-4}
        },
        after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4}},
        every last row/.style={after row=\bottomrule[1.pt]},
        every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4}},
		columns/method/.style={column name=\textbf{method},string type},
        columns/N/.style={column name=\textbf{N}},
		columns/err1/.style={column name=\textbf{error},sci},
        columns/gains1/.style={column name=\textbf{gain},fixed},
        columns={method,N,err1,gains1},
        precision=2
    ]{#2}
}

% \newcommand{\gainsbothmu}[2]{
% 	\pgfplotstabletypeset[
%         col sep=comma,
%         every head row/.style={
%         before row={\toprule[1.pt]
%         & \multicolumn{2}{c}{\textbf{FEM errors}} \\
% 		\cmidrule(lr){2-3}
%         },
%         after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-3}},
%         every last row/.style={after row=\bottomrule[1.pt]},
%         every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2}},
%         columns/N/.style={column name=\textbf{N}},
% 		columns/err1/.style={column name=$\bm{\mu}^{(1)}$,sci},
%         columns/err2/.style={column name=$\bm{\mu}^{(2)}$,sci},
%         columns={N,err1,err2},
%         precision=2
%     ]{#1} \hspace{20pt}
% 	\pgfplotstabletypeset[
%         col sep=comma,
%         every head row/.style={
%         before row={\toprule[1.pt]
%         & & \multicolumn{2}{c}{$\bm{\mu}^{(1)}$} &
% 		\multicolumn{2}{c}{$\bm{\mu}^{(2)}$} \\
% 		\cmidrule(lr){3-4} \cmidrule(lr){5-6}
%         },
%         after row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4} \cmidrule(lr){5-6}},
%         every last row/.style={after row=\bottomrule[1.pt]},
%         every nth row={2}{before row=\cmidrule(lr){1-1} \cmidrule(lr){2-2} \cmidrule(lr){3-4} \cmidrule(lr){5-6}},
% 		columns/method/.style={column name=\textbf{method},string type},
%         columns/N/.style={column name=\textbf{N}},
% 		columns/err1/.style={column name=\textbf{error}},
%         columns/gains1/.style={column name=\textbf{gain},fixed},
%         columns/err2/.style={column name=\textbf{error}},
% 		columns/gains2/.style={column name=\textbf{gain},fixed},
%         columns={method,N,err1,gains1,err2,gains2},
%         precision=2
%     ]{#2}
% }
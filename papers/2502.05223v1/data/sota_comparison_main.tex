\begin{table}[t]
% \footnotesize %(smaller)
% \scriptsize %(very small)
\tiny %(smallest)
\centering
\setlength{\tabcolsep}{2pt}
\renewcommand{\arraystretch}{1.2} % Adjust the row height as needed

\resizebox{0.48\textwidth}{!}{ % Adjust width to 80%

\begin{tabular}{c|c||c|c|c|c}


\multicolumn{3}{l}{\small{\textbf{Efficiency and Effectiveness}} } & \multicolumn{3}{c}{\textbf{} } \\

% \hline

\hline
% \multirow{2}{*}{\textbf{Model}}   &  \multirow{2}{*}{\textbf{Metric}}    & \multirow{2}{*}{\textbf{AuotoDAN}}   & \multirow{2}{*}{\textbf{PAIR}}  & \multirow{2}{*}{\textbf{GPTFuzzer}} 
%   & \multicolumn{7}{c}{\textbf{Ours} } \\ 
\multirow{2}{*}{\textbf{Model}}   &  \multirow{2}{*}{\textbf{Metric}}    & \multicolumn{3}{c|}{\textbf{Baseline} }
  & \multicolumn{1}{c}{\textbf{Ours} } \\ 
\cline{3-6}
 &   & \textbf{AuotoDAN} &  \textbf{PAIR} & \textbf{GPTFuzzer}  & \textbf{$\text{KDA}$} \\ 
% \hline



\hline
\multirow{3}{*}{Llama 2 7B} 
& $\text{ASR}^{\text{HB}}_{30}$ & $16.0 \pm 5.2$ & $22.0 \pm 5.8$ & $38.0 \pm 6.8$ & $\mathbf{84.0 \pm 5.2}$ \\
& $\text{ASR}^{\text{TM}}_{30}$ & $62.0 \pm 6.9$ & $96.0 \pm 2.8$ & $80.0 \pm 5.7$ & $\mathbf{100.0}$ \\
& Time (s) & $410.6 \pm 239.9$ & $1222.9 \pm 446.0$ & $381.8 \pm 101.2$ & $\mathbf{36.7 \pm 3.9}$ \\
\hline
\multirow{3}{*}{Vicuna 7B} 
& $\text{ASR}^{\text{HB}}_{30}$ & $62.0 \pm 6.8$ & $90.0 \pm 4.2$ & $\mathbf{100.0}$ & $\mathbf{100.0}$ \\
& $\text{ASR}^{\text{TM}}_{30}$ & $\mathbf{100.0}$ & $\mathbf{100.0}$ & $\mathbf{100.0}$ & $\mathbf{100.0}$ \\
& Time (s) & $\mathbf{12.7 \pm 1.4}$ & $53.3 \pm 6.9$ & $15.1 \pm 0.6$ & $26.4 \pm 1.4$ \\
\hline
\multirow{3}{*}{GPT-3.5} 
& $\text{ASR}^{\text{HB}}_{30}$ & -- & $74.0 \pm 6.2$ & $88.0 \pm 4.6$ & $\mathbf{98.0 \pm 2.0}$ \\
& $\text{ASR}^{\text{TM}}_{30}$ & -- & $\mathbf{100.0}$ & $\mathbf{100.0}$ & $\mathbf{100.0}$ \\
& Time (s) & -- & $105.2 \pm 14.8$ & $27.8 \pm 2.8$ & $\mathbf{9.4 \pm 0.4}$ \\
\hline
\multirow{3}{*}{GPT-4} 
& $\text{ASR}^{\text{HB}}_{30}$ & -- & $34.0 \pm 6.7$ & $78.0 \pm 5.8$ & $\mathbf{88.0 \pm 4.6}$ \\
& $\text{ASR}^{\text{TM}}_{30}$ & -- & $\mathbf{100.0}$ & $\mathbf{100.0}$ & $\mathbf{100.0}$ \\
& Time (s) & -- & $369.3 \pm 118.2$ & $60.8 \pm 6.2$ & $\mathbf{24.7 \pm 2.5}$ \\











\hline
\addlinespace[5pt]

\multicolumn{3}{l}{\small{\textbf{Diversity and Coherence}}} & \multicolumn{3}{c}{\textbf{} } \\







\hline
\multirow{4}{*}{Llama 2 7B} 
& TDR (\%) & $15.4 \pm 1.0$ & $23.0 \pm 1.3$ & $36.2 \pm 3.2$ & $\mathbf{53.3 \pm 4.9}$ \\
& TTR (\%) & $63.2 \pm 2.8$ & $63.8 \pm 1.1$ & $\mathbf{66.4 \pm 0.5}$ & $63.7 \pm 0.4$ \\
& PPL $(\downarrow)$ & $50.1 \pm 15.1$ & $16.2 \pm 1.6$ & $35.7 \pm 1.6$ & $17.8 \pm 0.9$ \\
\hline
\multirow{4}{*}{Vicuna 7B} 
& TDR (\%) & $22.9 \pm 1.4$ & $60.7 \pm 5.4$ & $44.0 \pm 5.2$ & $\mathbf{61.3 \pm 5.5}$ \\
& TTR (\%) & $63.3 \pm 1.4$ & $61.7 \pm 0.3$ & $\mathbf{65.0 \pm 0.2}$ & $61.3 \pm 0.4$ \\
& PPL $(\downarrow)$ & $27.2 \pm 4.3$ & $9.4 \pm 0.2$ & $34.8 \pm 0.7$ & $17.7 \pm 0.6$ \\
\hline
\multirow{4}{*}{GPT-3.5} 
& TDR (\%) & -- & $\mathbf{57.5 \pm 4.9}$ & $35.8 \pm 4.1$ & $55.7 \pm 5.3$ \\
& TTR (\%) & -- & $61.4 \pm 0.7$ & $\mathbf{65.0 \pm 0.2}$ & $62.7 \pm 0.2$ \\
& PPL $(\downarrow)$ & -- & $10.0 \pm 0.4$ & $38.7 \pm 0.9$ & $16.2 \pm 0.3$ \\
\hline
\multirow{4}{*}{GPT-4} 
& TDR (\%) & -- & $39.8 \pm 3.3$ & $36.6 \pm 3.6$ & $\mathbf{54.0 \pm 5.1}$ \\
& TTR (\%) & -- & $62.8 \pm 1.2$ & $\mathbf{65.1 \pm 0.3}$ & $62.7 \pm 0.2$ \\
& PPL $(\downarrow)$ & -- & $12.3 \pm 1.1$ & $33.6 \pm 0.7$ & $16.5 \pm 0.3$ \\




\hline
\end{tabular}

}




\caption{\textbf{Comparison of baseline methods and our KDA.} The evaluation is conducted on the Harmful-Behavior dataset~\citep{chao_jailbreaking_2024}, with baseline attack methods including AutoDAN, PAIR, and GPTFuzzer. Our KDA method employs the format selection strategy $\texttt{trn}$. The table consists of two sections: (Top) \textbf{Efficiency and Effectiveness}, measured by the attack success rate with a target query budget of $M=30$ ($\text{ASR}^{\text{HB}}_{30}$ and $\text{ASR}^{\text{TM}}_{30}$), evaluated using the HB and TM evaluators (values reported in $\%$), along with the average attack time $\Bar{t}$ in seconds. (Bottom) \textbf{Diversity and Coherence}, where diversity is assessed using the topic diversity ratio (TDR) and type-token ratio (TTR), both reported in $\%$, with higher values indicating greater diversity. Coherence is measured using perplexity (PPL) computed via GPT-2, where lower values denote better coherence. Uncertainty for all metrics is reported as the mean $\pm$ standard deviation, computed from 10,000 bootstrap samples drawn with replacement.
}\label{tab:harmful_behavior_50_big_table}
\vspace{-4mm}
\end{table}



% \buyun{For a fair comparison we random sample 50 prompts for all methods for coherence and diversity. Only show 1 KDA here. KDA train usde here. Move the ablation to later parts; Analysis the number of diverse topics to show the advantage of ensemble. Seperate into ASR-time table and coherence/diversity table. Type token ratio seems wrong for PAIR.}
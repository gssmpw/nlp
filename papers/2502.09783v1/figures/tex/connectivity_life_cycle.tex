\begin{tikzpicture}[>=latex]

\tikzmath{\recW = 17.5; \recH = 2.4;}

\draw[-](0,\recH) -- (\recW,\recH) -- (\recW,\recH*-1) -- (0,\recH*-1) -- (0, \recH);
\draw[-](0, 0) -- (\recW, 0);

\draw[-](0.7,0) -- (0.7,\recH) node[midway, above, sloped]{Advertiser};
\draw[-](0.7,\recH*-1) -- (0.7,0) node[midway, above, sloped]{Discoverer};

\node[
	circle, 
	draw,
	minimum width=0.5cm,
	fill=black
]
(advertiser_init) at (1.5,1){};

\node[
	rectangle,
	draw,
	align=center
]
(advertiser_func) at (3.8, 1){Advertising};

\node[
	rectangle,
	draw,
	align=center
]
(advertiser_request) at (7.5, 1){Receive Connection \\ Request};

\node[
	diamond,
	draw,
	align=center
]
(advertiser_request_accept) at (11.2, 1){Accept};

\node[
	rectangle,
	draw,
	align=center
]
(advertiser_connection) at (14, 1){Establish \\ Connection};

\node[
	circle, 
	draw,
	minimum width=0.5cm,
	fill = black
]
(advertiser_end) at (16.5,1){};

\node[
	circle, 
	draw,
	minimum width=0.6cm
]
(advertiser_end_ext) at (16.5,1){};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55



\node[
	circle, 
	draw,
	minimum width=0.5cm,
	fill=black
]
(discovery_init) at (1.5,-1){};

\node[
	rectangle,
	draw,
	align=center
]
(discovery_func) at (3.8, -1){Discovering};

\node[
	diamond,
	draw,
	align=center
]
(discovery_find) at (7.5, -1){Found};

\node[
	rectangle,
	draw,
	align=center
]
(discovery_request) at (11, -1){Send \\ Resquest};

\node[
	diamond,
	draw,
	align=center
]
(discovery_request_accept) at (14, -1){Accept};

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](advertiser_init) -- (advertiser_func);
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](advertiser_request) -- (advertiser_request_accept);
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](advertiser_request_accept) -- (discovery_request_accept)node[midway, above]{Yes};
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](advertiser_connection) -- (advertiser_end);
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](advertiser_request_accept.north west) to [in=15,out=165]node[above]{No} (advertiser_func.north east);

\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_init) -- (discovery_func);
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_func.north east) to [out=30,in=155] (discovery_find.north west);
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_find) -- (discovery_func)node[midway, above]{No};
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_find) -- (discovery_request)node[midway, above]{Yes};
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_request.north) to [in=-80,out=140](advertiser_request.south);
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_request_accept) -- (advertiser_connection)node[midway, right]{Yes};
\draw[->,thick, -{Stealth[length=3mm, width=2mm]}](discovery_request_accept.south west) to [in=-15,out=-170]node[midway, above]{No} (discovery_func.south east);



\end{tikzpicture}
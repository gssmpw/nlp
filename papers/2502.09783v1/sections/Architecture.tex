%#############################################################################################
\section{Architecture guidelines for SLICES}
\label{section:Architecture}
% EOSC
%#############################################################################################

The initial guidelines on the various hardware building blocks for different types of SLICES facilities  can be categorized into four basic sub-systems:
\begin{itemize}
    \item Inter-Facility Interconnections and Intra-Facility Switching Fabric;
    \item Real-time and Non-real-time Computing;
    \item Radio Infrastructure;
    \item End-user devices. 

\end{itemize}
	
% Figure: A high-level view of a SLICES node from an equipment standpoint
\begin{figure*}[t]
    \centering
    \includegraphics{././figures/png/SLICES_node_view.png}
	\caption{A high-level view of a SLICES node from an equipment standpoint}
	\label{fig:SLICES-node-view}
\end{figure*}

The example of a SLICES node is shown in \Cref{fig:SLICES-node-view}. It demonstrates two interconnected clusters in the same geographic region, one of which is equipped with Radio Units and the other is a more generic computing platform. 
The left cluster has a long-distance interconnection with the national gateway, which itself is interconnected with the GEANT fabric and the rest of the SLICES network. In the following subsections we provide some initial guidelines for the architecture of the various components.
As a general rule for hardware and network topologies, SLICES nodes should aim to mutualize as much as possible the types of computing and networking equipment in order to reuse deployment and configuration methods and to be able to share and establish common best practices. This follows the spirit of similar large-scale platform projects such as the Linux Networking Foundation OPNFV \cite{opnfv}, Cloud-Native Computing Foundation \cite{cncf} and the Open Compute Foundation \cite{ocf}.
Because of the lack of space and its diversity, we will not describe further the hardware components envisaged in SLICES.


As SLICES aspires to provide fully programmable remotely accessible infrastructure to the Digital Infrastructure community, the respective frameworks shall be developed for ensuring seamless and easy access to the experimental resources. The different site facilities will form an integrated single pan-European facility, adopting common tools for managing and orchestrating experiments over the infrastructure, as well as providing single access credentials to users. A first attempt to sketch our reference architecture, with respect to the tools used for its management, is described in \Cref{fig:SLICES-conceptual-architecture}.

% Figure: SLICES infrastructure conceptual architecture
\begin{figure*}[t]
    \centering
%    \includegraphics{././figures/png/SLICES-conceptual-architecture.png}
    \includegraphics[width=0.9\textwidth]{././figures/png/SLICES_ARCHITECTURE_cropped.png}
	\caption{SLICES Infrastructure conceptual architecture}
	\label{fig:SLICES-conceptual-architecture}
\end{figure*}


Towards achieving this integration, the sites will adopt network virtualization for their disaggregated resources. Each node will be considered as a single domain for experimentation \cite{bernini2020multi}, while the overall orchestration of experiments will be performed through a centralized infrastructure. Site and node selection frameworks will be developed in the context of SLICES, towards ensuring the optimal use of resources among the sites. 

Moreover, and towards ensuring the smooth operation of the infrastructure, tools for facilitating access will be developed and deployed. Open-source software shall be employed, based on the paradigms of existing testbed access schemes, user authentication and authorization. This software will be appropriately tailored with new modules for managing the new equipment described in the previous section. 
\Cref{tab:frameworks-comparison} provides a comparison between the existing tools for the experimentation plane of the experiments, and the progress beyond them.


% Table 5: Comparison of different proposed frameworks vs existing ones for the SLICES architecture
\input{././tables/frameworks_comparison}

% %Figure: Software architecture and tools for experiment design and run-time
% \begin{figure*}[t]
%     \centering
%     \includegraphics{././figures/png/Software-architecture-and-tools.png}
% 	\caption{Software architecture and tools for experiment design and run-time}
% 	\label{fig:Software-architecture-and-tools}
% \end{figure*}

In terms of integration of the various components, the software tools shall encompass single-sign in procedures, with access certificates issued by a single authority. The resource discovery, reservation, and allocation shall comply with the access policies for SLICES (following the ESFRI principles) and be interchanged with the respective facility authorities through a standardized process. For this purpose, the SFA protocol \cite{sfa} has been extensively used in past and present solutions and  could inspire a future candidate together with new complementary or alternative proposals that will be considered as well. 

%Moreover, and towards realizing the full potential of the recent technology trends for network virtualization, SLICES will employ state-of-the-art resource management architectures, such as for example the Management and Orchestration (MANO) architecture for managing and deploying new services over the physical equipment. Through MANO, services and network elements are packed as Virtual Network Functions (VNFs) which can be instantiated over physical equipment; the same physical equipment can be used to execute different VNFs, whereas multiple VNFs can be instantiated over the same piece of hardware, thus allowing the equipment to be virtualized and shared among different operators (multi-tenancy). As the network infrastructure relies greatly on software, even for the RAN realization, the efficient and simple management and orchestration of these VNFs becomes of paramount importance. Specifically for the cellular RAN, emerging protocols and specifications like O-RAN and ONF SD-RAN will be adopted; such approaches will enable low level programmability of the cellular hardware, while creating the ground for further innovations beyond 5G and 6G networks.

Based on the automation tools %complying with the MANO architecture (e.g., OSM , ONAP), 
for accessing the infrastructure, 
we intend to equip new experimenters with a store in order to easily deploy services with a single click manner over the infrastructure. This can be achieved with these frameworks by using pre-compiled versions of services, and by supporting different methods for virtualization of resources (e.g., Virtual Machines, docker containers, Linux Containers). For example, public docker repositories provide different images that can be used to deploy commonly used services (e.g., databases, web services, applications and application servers) through a friendly interface. Moreover, the entire architecture will be augmented with the appropriate tools for experiment monitoring, experiment data and results visualization and cross-correlation analysis and inference with previous experiments executed over the infrastructure.

The SLICES architecture, illustrated in \Cref{fig:SLICES-Layered-architecture}, can be designed considering the limitations and challenges of existing federation-based architectures such as SFA. For example, the SLICES architecture could be designed by advancing the Slice-based Federation Architecture (SFA) and further enhancements are required to overcome the limitations and complexities to integrate wireless, edge and other experimental resources. We can consider a layer-based architecture as shown in \Cref{fig:SLICES-Layered-architecture}.

% Figure: Layered architecture for SLICES
\begin{figure*}[!th]
    \centering
    \includegraphics[width=0.6\textwidth]{././figures/png/SLICES_Layered_architecture2.png}
	\caption{Layered architecture for SLICES}
	\label{fig:SLICES-Layered-architecture}
\end{figure*}


In this architecture, every component of SLICES testbed falls under a certain layer:
\begin{enumerate}
    \item \textit{Resource Layer}: It includes experimental resources such as CPU’s, RAM, storage, containers, VM’s, network, wireless, HPC and IoT devices;
    \item \textit{Virtualization Layer}: This layer includes cloud computing platforms (e.g., Openstack) that virtualize the underlying hardware resources and provide interfaces to the higher layers for programming/instantiating services over them. Examples of such programming interfaces are the ones defined by the O-RAN alliance (e.g., A1/E2 interfaces ), or the P4 programming abstractions for wired networks;
    \item \textit{Orchestration Layer}: It includes tools that orchestrate and instantiate services over the infrastructure equipment. Examples of such tools are OSM, ONAP and Kubernetes, mainly involved in NFV Management and Orchestration. It provides Network-Function-as-a-service and exposes northbound interfaces (NBI) APIs to be used by external entities; 
    \item \textit{NBI Layer}: This Layer defines the Open APIs that can be used by the SLICES application framework. Examples of such interfaces are the SOL005, the SOL004 from the ETSI NFV-MANO architecture \cite{etsi013} that can be found as the NBI interface of several MANO compliant tools, or even more generic ones, like TM-Forum  based APIs for service lifecycle control;
    \item \textit{Application Layer}: This Layer will host the SLICES-Core application, located at the SLICES central hub. It is responsible for managing all experimental resources that are exposed by lower layers, saved in the database and is further exposed to experimenters as a Service-Catalogue. It also exposes NBI API’s that can be used by a 3rd party orchestrator. The architecture of SLICES-Core application will start from components similar to MySlice V2 ~\cite{baron:hal-01804013}, and will be further enhanced at later stages;
    \item \textit{UI Layer}: This Layer defines the User Interface for the experimenters. It should abstract the experiments enough to make them more user friendly as possible. 
\end{enumerate}


%6.2.2.	Multi-domain orchestrator Architecture
The operation of the central-hub relies on the control of multiple-domains through the SLICES core application. Its operation resembles the functionality of a multi-domain orchestrator, that brings together different domains (in different locations, managed from different authorities) under the supervision of a single authority. The multi-domain orchestrator glues NFV, MEC and Cloud-Native orchestrators using API abstraction layers. Different groups of experimental resources on any of those testbeds might be virtualized and managed based on different technologies (e.g., VMs and containers). This in turn requires that multi-domain orchestrators use different orchestrators, managing different types of resources. For example, an NFVO and a MEC (Multi-access Edge computing Application Orchestrator-MEAO) are likely to be required in individual testbeds services, both managed concurrently through similar APIs from the same central entity.

% %Figure: High level architecture of multi-domain orchestration solution
% \begin{figure*}[t]
%     \centering
%     \includegraphics{././figures/png/High-level-architecture-MDOS.png}
% 	\caption{High level architecture of multi-domain orchestration solution}
% 	\label{fig:High-level-architecture-MDOS}
% \end{figure*}

The central SLICES core application shall include an abstraction API, used to trigger the required API invocation chains on different domain orchestrators when a high-level action is performed. A set of southbound clients is used in order to connect to NFV, MEC and Cloud-native local domain orchestrators. 

% In order to provide access to the experimental resources to each site, two different APIs shall be offered to the experimenters: 1) a first API shall be provisioned through the core SLICES application (multi-domain orchestrator) to deploy and provide access to the experiment, 2) a local API provided by the local orchestrator at each testbed. Even for the case of the local access, user authentication and authorization shall rely on the central SLICES entity and the protocols that it implements (e.g., SFA), and provide access to the resources under the SLICES authority.

% %Figure: SLICES API design for experimenters
% \begin{figure}[h]
%     \centering
%     \includegraphics{././figures/png/SLICES-API.png}
% 	\caption{SLICES API design for experimenters}
% 	\label{fig:SLICES-API}
% \end{figure}

% Regarding the actual level of detail provided from the first type of API, it shall feature different levels of complexity and control for each experiment. For the most experienced users, low level details will be available for the resources they request, allowing the fine tuning of complex experiments with a low-level access to the different hardware. Such features will allow the users to have full control over the experiment (e.g., setting the modulation of the transmitted wireless signal during the experiment), by exposing even virtualization level parameters (e.g., O-RAN interfaces for the cellular equipment) to the experimenter. Those APIs will be further used to develop higher-level tools to automate or simplify experiments for some specific communities.  For the cases of inexperienced users, simplified versions of the same API will hide the low-level details of the experiment configuration. As SLICES covers a wide range of users, different levels of configuration might be needed depending on the experimenter type. For example, provisioning a simple wireless link can be sufficient for an application developer, while a new protocol designer will need a fully controlled environment with access to all the parameters affecting the experiment.
% Both options will be made available through a portal web GUI and other graphical interfaces for ease of access. Such access will allow fast experiment bootstrapping for novice users, while on demand providing low-level control parameters for expert users. Providing access through such interfaces will enable the quick replication of the experiment across different sites and will foster the capabilities of the infrastructure on reproducing experimental results.
It is worth noticing that the different levels of access provided over the facility will also correspond to finer or coarser grain control over the deployment of experimental resources. More experienced users would be willing to control exactly which experimental resource to use from which facility at which site, while less-experienced users might not even know that their experiment is actually using heterogeneous resources composed out of different facilities spread across Europe. In the latter case, SLICES, through dedicated management components, will automatically assign resources to the users’ experiments, in order to optimize the overall utilization of the RI’s resources or simplify the work of the experimenter.



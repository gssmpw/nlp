\usepackage{acro}
\usepackage{bm}
\usepackage{mathtools}
% \captionsetup[figure]{font=small,belowskip=-0mm}
%  	\captionsetup[subfigure]{font=small,justification=centerlast, indention=0cm, margin=0pt}
\usepackage{xcolor}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Define Acronyms
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareAcronym{ASL}{short = ASL, long = Autonomous Systems Lab}
\DeclareAcronym{OMAV}{short = OMAV, long = Omnidirectional Micro Aerial Vehicle}
\DeclareAcronym{MAV}{short = MAV, long = Micro Aerial Vehicle}
\DeclareAcronym{DoF}{short = DoF, long = degrees of freedom}
\DeclareAcronym{PBC}{short = PBC, long = passivity-based control}
\DeclareAcronym{PH}{short = PH, long = Port-Hamiltonian}
\DeclareAcronym{NDT}{short = NDT, long = non-destructive testing}
\DeclareAcronym{DOE}{short = DOE, long = design of experiments}
\DeclareAcronym{PEMS}{short = PEMS, long = Power and Energy Monitoring System}
\DeclareAcronym{WTC}{short = WTC, long = wrench tracking controller}
\DeclareAcronym{PTC}{short = PTC, long = pose tracking controller}
\DeclareAcronym{MBE}{short = MBE, long = momentum-based wrench estimator}
\DeclareAcronym{ASIC}{short = ASIC, long = Axis-Selective Impedance Control}
\DeclareAcronym{MPC}{short = MPC, long = Model Predictive Control}
\DeclareAcronym{MPPI}{short = MPPI, long = Model Predictive Path Integral}
\DeclareAcronym{APhI}{short = APhI, long = Aerial Physical Interaction}
\DeclareAcronym{LLE}{short = LLE, long = Largest Lyapunov Exponent}
\DeclareAcronym{ICBF}{short = ICBF, long = Integral Control Barrier Function}
\DeclareAcronym{CBF}{short = CBF, long = Control Barrier Function}
\DeclareAcronym{COM}{short = CoM, long = Center of Mass}
\DeclareAcronym{AM}{short = AM, long = Aerial Manipulator}
\DeclareAcronym{MR}{short = MR, long = Mixed Reality}
\DeclareAcronym{AR}{short = AR, long = Augmented Reality}
\DeclareAcronym{VR}{short = VR, long = Virtual Reality}
\DeclareAcronym{HRI}{short = HRI, long = Human-Robot Interaction}
\DeclareAcronym{RL}{short = RL, long = Reinforcement Learning}
\DeclareAcronym{PPO}{short = PPO, long = Proximal Policy Optimization}

\DeclareAcronym{NASA-TLX}{short = NASA-TLX, long = NASA Task Load Index}
\DeclareAcronym{MD}{short = MD, long = mental demand}
\DeclareAcronym{PD}{short = PD, long = physical demand}
\DeclareAcronym{TD}{short = TD, long = temporal demand}
\DeclareAcronym{EF}{short = EF, long = effort}
\DeclareAcronym{PE}{short = PE, long = performance}
\DeclareAcronym{FR}{short = FR, long = frustration}
\DeclareAcronym{SNR}{short = SNR, long = signal-to-noise ratio}
\DeclareAcronym{ANOVA}{short = ANOVA, long = Analyse of Variance}
\DeclareAcronym{LCD}{short = LCD, long = liquid crystal display}
\DeclareAcronym{ROS}{short = ROS, long = Robot Operating System}
%\DeclareAcronym{DoF}{short = DoF, long = degree of freedom, short-plural = s, long-plural-form = degrees of freedom}
\DeclareAcronym{FT}{short = F/T, long = force and torque, short-indefinite = an, long-indefinite = a}
\DeclareAcronym{BBT}{short = BBT, long = Box and Block Test}
\DeclareAcronym{ABBT}{short = ABBT, long = Aerial Box and Block Test}
\DeclareAcronym{MOCAP}{short = MOCAP, long = Motion Tracking System}
% ---------- Standard Commands ------------------

\newcommand\orange[1]{{\textcolor{orange}{#1}}}
\newcommand\red[1]{{\textcolor{red}{#1}}}
\newcommand\blue[1]{{\textcolor{blue}{#1}}}
\newcommand\violet[1]{{\textcolor{violet}{#1}}}
\newcommand{\inframe}[2]{{}^{#1}#2}
\newcommand{\tolie}[1]{\left[{#1}\right]_\times}

% ---------- Revision Commands ------------------
\newcommand{\MT}[1]{\red{(MT: #1)}}
\newcommand{\EC}[1]{#1}

%\renewcommand{\rwThree}[1]{#1}
%\renewcommand{\rwSix}[1]{#1}
%\renewcommand{\rwNine}[1]{#1}
%\renewcommand{\rwEditor}[1]{#1}

% ---------- new commands ------------------
\renewcommand{\vec}[1]{\bm{#1}}		% vectors
\renewcommand{\(}{\left(}		% left bracket
\renewcommand{\)}{\right)}		% left bracket
\renewcommand{\[}{\left[}		% left bracket
\renewcommand{\]}{\right]}		% left bracket
\newcommand{\matr}[1]{\bm{#1}}		% matrices
\newcommand{\blkdiag}[1]{\text{blkdiag}\left\{#1\right\}}		% matrices
\newcommand{\mat}[1]{\bm{#1}}		% matrices
\newcommand{\diag}[1]{\text{diag}\left(#1\right)}		% diagonal matrix
\newcommand{\nR}[1]{\mathbb{R}^{#1}}		% real number
\newcommand{\nN}[1]{\mathbb{N}^{#1}}		% natural number
\newcommand{\nT}[1]{\mathbb{T}^{#1}}		% real number
\newcommand{\SO}[1]{\mathsf{SO}(#1)}		% manifold SO
\newcommand{\SE}[1]{\mathsf{SE}(#1)}		% manifold SE
\newcommand{\define}{:=}			% define symbol
\newcommand{\modulus}[1]{\left| #1 \right|}	% abs
\renewcommand{\matrix}[1]{\begin{bmatrix} #1 \end{bmatrix}}	% matrix
\newcommand{\smallmatrice}[1]{\left[\begin{smallmatrix} #1 \end{smallmatrix}\right]}	% matrix
\newcommand{\cosp}[1]{\cos \left( #1 \right)}	% cos with brace
\newcommand{\sinp}[1]{\sin \left( #1 \right)}	% sin with brace
\newcommand{\determinant}[1]{\text{det}\left(#1\right)} 	% determinant
\newcommand{\sgn}[1]{\text{sgn}\left( #1 \right)}			% signum
\newcommand{\atanTwo}[1]{{\rm atan2}\left( #1\right)}		% atan2
\newcommand{\acotTwo}[1]{{\rm acot2}\left( #1\right)}		% acot2
\newcommand{\upperRomannumeral}[1]{\uppercase\expandafter{\romannumeral#1}}	% roman numbers
\newcommand{\lowerromannumeral}[1]{\romannumeral#1\relax}
\newcommand{\vSpace}{\;\,}
\newcommand{\transpose}{^\top}
\newcommand{\refer}{^{\text{ref}}}
\newcommand{\W}[1]{\prescript{}{W}{#1}}
\newcommand{\B}[1]{\prescript{}{B}{#1}}
\newcommand{\D}[1]{\prescript{}{D}{#1}}

%-----------Functions------------------------
\newcommand{\minEig}[1]{\lambda_{\text{min}}[#1]}
\newcommand{\maxEig}[1]{\lambda_{\text{max}}[#1]}
\newcommand{\transp}{\top}


% --------- Variables -----------------------

% General
% \renewcommand{\frame}{\mathcal{F}}		% frame
\renewcommand{\frame}[1]{\mathcal{F}_{#1}}		% frame
\newcommand{\world}{I}
\newcommand{\origin}{O}						% origin
\newcommand{\vX}{\vec{x}}					% x-axis
\newcommand{\bfx}{\vec{x}}					% dummy state
\newcommand{\bfU}{\mat{U}}					% dummy jacobian
\newcommand{\bfw}{\vec{w}}
\newcommand{\cbf}{h}
\newcommand{\powercbf}{\cbf_p}
\newcommand{\powercbfi}{\cbf_{p,i}}
\newcommand{\inputcbf}{\cbf_\tau}
\newcommand{\inputcbfi}{\cbf_{\tau,i}}
\newcommand{\vY}{\vec{y}}					% y-axis
\newcommand{\vZ}{\vec{z}}					% z-axis
\newcommand{\pos}{\vec{p}_B}				% position vector
\newcommand{\posRef}{\vec{p}_{B,\text{ref}}}    % position vector
\newcommand{\dpos}{\vec{v}}				    % velocity vector
\newcommand{\vel}{\vec{v}_B}				% velocity vector
\newcommand{\velRef}{\vec{v}_{B,\text{ref}}}	% velocity vector
\newcommand{\posH}{\vec{p}_H}				% position vector
\newcommand{\velH}{\vec{v}_H}				% velocity vector
\newcommand{\posC}{\vec{p}_C}				% position vector
\newcommand{\velC}{\vec{v}_C}				% velocity vector
\newcommand{\veli}{v_i}				% velocity vector
\newcommand{\velDes}{\vec{v}_d}				% velocity vector desired
\newcommand{\acc}{\vec{\dot{v}}_B}				% acceleration vector
\newcommand{\accH}{\dot{\vec{v}}_H^H}				% acceleration vector
\newcommand{\accB}{\dot{\vec{v}}_B^B}	
\newcommand{\acci}{\dot{v}_i}
\newcommand{\accDes}{\dot{\vel}_d}				% acceleration vector desired
\newcommand{\velB}{\inframe{B}{\vel}}
\newcommand{\velMax}{{v}_{max}}
\newcommand{\rotMat}{\matr{R}}				% rotation matrix
\newcommand{\rotMatVectAngle}[2]{\rotMat_{#1}(#2)}	% rotation matrix representing the rotation about a vector of a certain angle
\newcommand{\vZero}{\vec{0}}				% vect/matr of zeros
\newcommand{\eye}[1]{\matr{I}_{#1}}
\newcommand{\trace}[1]{\text{tr}\left(#1\right)}
\newcommand{\zeros}[1]{\matr{0}_{#1}}
\newcommand{\ones}[1]{\matr{1}_{#1}}
\newcommand{\genCoord}{\vec{H}}
\newcommand{\slack}{\vec{\delta}}
\newcommand{\slackPower}{\slack_p}
\newcommand{\slackInput}{\slack_\tau}
\newcommand{\slackWeight}{k_\delta}

% World and other frames
\newcommand{\frameW}{\frame{W}}			% world frame
\newcommand{\frameB}{\frame{B}}			% body frame
\newcommand{\frameM}{\frame{M}}			% inertial frame
\newcommand{\frameH}{\frame{H}}			% haptic frame
\newcommand{\frameV}{\frame{V}}			% haptic frame
\newcommand{\frameC}{\frame{C}}			% haptic frame
\newcommand{\originW}{\origin_W}		% origin world frame
\newcommand{\originH}{\origin_H}		% origin haptic frame
\newcommand{\originB}{\origin_B}		% origin body frame
\newcommand{\originM}{\origin_M}		% origin inertial frame
\newcommand{\originV}{\origin_V}		% origin virtual frame
\newcommand{\originC}{\origin_C}		% origin virtual frame
\newcommand{\xW}{\vX_W}				% x-axis world frame
\newcommand{\yW}{\vY_W}				% y-axis world frame
\newcommand{\zW}{\vZ_W}				% z-axis world frame
\newcommand{\xB}{\vX_B}				% x-axis body frame
\newcommand{\yB}{\vY_B}				% y-axis body frame
\newcommand{\zB}{\vZ_B}				% z-axis body frame
\newcommand{\xM}{\vX_M}				% x-axis inertial frame
\newcommand{\yM}{\vY_M}				% y-axis inertial frame
\newcommand{\zM}{\vZ_M}				% z-axis inertial frame
\newcommand{\xH}{\vX_H}				% x-axis haptic frame
\newcommand{\yH}{\vY_H}				% y-axis haptic frame
\newcommand{\zH}{\vZ_H}				% z-axis haptic frame
\newcommand{\xV}{\vX_V}				% x-axis virtual frame
\newcommand{\yV}{\vY_V}				% y-axis virtual frame
\newcommand{\zV}{\vZ_V}				% z-axis virtual frame
\newcommand{\xC}{\vX_C}				% x-axis MR camera frame
\newcommand{\yC}{\vY_C}				% y-axis MR camera frame
\newcommand{\zC}{\vZ_C}				% z-axis MR camera frame

% Platform
\newcommand{\xP}{\vX_L}				% x-axis load frame
\newcommand{\yP}{\vY_L}				% y-axis load frame
\newcommand{\zP}{\vZ_L}				% z-axis load frame
\newcommand{\pP}{\pos_L}			% load position
\newcommand{\pPW}{\prescript{W}{}{\pP}} % load position wrt world frame (explicit)
\newcommand{\pLx}{\pos_{L_x}}
\newcommand{\pLy}{\pos_{L_y}}
\newcommand{\pLz}{\pos_{L_z}}
\newcommand{\eulerAnglesP}{\vec{\eta}_L}
\newcommand{\deulerAnglesP}{\dot{\vec{\eta}}_L}
\newcommand{\roll}{\phi}
\newcommand{\pitch}{\theta}
\newcommand{\yaw}{\psi}
\newcommand{\eulerAnglesPDes}{\vec{\eta}_L^d}
\newcommand{\deulerAnglesPDes}{{\dot{\vec{\eta}}_L^d}}
\newcommand{\rotMatP}{\rotMat_L}	% rotation matrix for load orientation
\newcommand{\rotMatWB}{\rotMat_B^W}	% rotation matrix for load orientation
\newcommand{\rotMatWBRef}{\rotMat_{B,\text{ref}}^W}	% rotation matrix for load orientation
\newcommand{\rotMatWD}{\rotMat_{D}^W}	% rotation matrix for load orientation
\newcommand{\rotMatWH}{\rotMat_{H}^W}	% rotation matrix for load orientation
\newcommand{\rotMatW}{\rotMat_{W}}	% rotation matrix for load orientation
\newcommand{\rotMatH}{\rotMat_{H}}	% rotation matrix for load orientation
\newcommand{\rotMatMH}{\rotMat_H^M}	% rotation matrix for load orientation
\newcommand{\rotMatC}{\rotMat_{C}}	% rotation matrix for load orientation
\newcommand{\rotMatVC}{\rotMat_{C}^V}	% rotation matrix for virtual camera
\newcommand{\rotMatPW}{\prescript{W}{}{\rotMat_L}}	% rotation matrix for load orientation wrt world frame (explicit)
\newcommand{\dpP}{\dpos_L}			% load position time derivative
\newcommand{\angVel}{\dot{{\vec{\omega}}}}
\newcommand{\angVelRef}{\vec{\omega}_{B,\text{ref}}}
\newcommand{\angVelH}{\dot{{\vec{\omega}}}_H}
\newcommand{\angVelB}{\dot{{\vec{\omega}}}_B^B}
\newcommand{\angRot}{\vec{\omega}}
%\newcommand{\angVelB}{\inframe{B}{\vec{\omega}}}
\newcommand{\forceS}{f}			% external force
\newcommand{\torqueS}{\tau}			% external force
\newcommand{\force}{\bm{\forceS}}			% external force
\newcommand{\torque}{\bm{\torqueS}}			% external force
\newcommand{\wrenchGravity}{\bm{g}}
\newcommand{\wrenchSpring}{\wrench_{spr}}
\newcommand{\wrenchDamping}{\wrench_{dmp}}
\newcommand{\wrenchCommand}{\wrench_{c}}
\newcommand{\wrenchExt}{\wrench_\text{ext}}
\newcommand{\wrenchEst}{\hat{\wrench}_\text{ext}}
\newcommand{\wrenchTotal}{\wrench_\text{fb,total}}
\newcommand{\wrenchRec}{\wrench_\text{fb,rec}}
\newcommand{\wrenchFbExt}{\wrench_\text{fb,ext}}
\newcommand{\wrenchHAct}{\wrench_\text{H,act}}
\newcommand{\wrenchH}{\wrench_\text{H}}

\newcommand{\momentum}{\bm{p}}    % momentum
\newcommand{\momentumB}{\bm{p}}   % momentum in the body frame (was specified before by a "B" superscript, but probably not necessary as we're only using this definition of momentum
\newcommand{\momentumEst}{\hat{\bm{p}}}
\newcommand{\momentumEstDot}{\dot{\hat{\bm{p}}}}
\newcommand{\wrench}{\bm{\tau}}
\newcommand{\wrenchRef}{\wrench_d}
%\newcommand{\posRef}{\pos_d}
\newcommand{\forceRef}{\force_d}
\newcommand{\torqueRef}{\torque_{d}}
\newcommand{\bfH}{\bm{H}}
\newcommand{\bfh}{\bm{h}}
\newcommand{\bff}{\bm{f}}
\newcommand{\bfg}{\bm{g}}
\newcommand{\bfu}{\bm{u}}
\newcommand{\bfA}{\bm{A}}
\newcommand{\bfb}{\bm{b}}
\newcommand{\Hm}{\mathcal{H}}
\newcommand{\twist}{\bm{t}}    % twist
\newcommand{\bK}{\bm{K}}
\newcommand{\bE}{\bm{e}}
\newcommand{\inertia}{\bm{J}}
\newcommand{\inertiaDesired}{\bm{J}_d}
\newcommand{\totalInertia}{\bm{M}}
\newcommand{\totalInertiaDec}{m_i}
\newcommand{\totalInertiaDesired}{\bm{M}_d}
\newcommand{\mass}{m}
\newcommand{\massDesired}{m_d}
\newcommand{\kEst}{\bm{K}_{e}}
\newcommand{\bTtilde}{\bm{\Tilde{t}}}
\newcommand{\Coriolis}{\bm{c}}
\newcommand{\lle}{\hat{\lambda}^*}

\newcommand{\state}{\vec{x}}
\newcommand{\states}{\vec{x}}
\newcommand{\statesFull}{\bar{\vec{x}}}

\newcommand{\ddt}{\frac{d}{dt}}

\newcommand{\jacobianPos}{\mat{U}_p}
\newcommand{\jacobianForce}{U_\tau}

\newcommand{\wrenchCmd}{\wrench_{c}}
\newcommand{\wrenchCmdImpedance}{\wrench_{c,imp}}
\newcommand{\wrenchCmdTracking}{\wrench_{c,tr}}

\newcommand{\errorDot}{\dot{\bm{e}}}
\newcommand{\pdot}{\dot{\bm{p}}}
\newcommand{\error}{\bm{e}}
\newcommand{\errorPos}{\bm{e}_{p}}
\newcommand{\errorAng}{\bm{e}_{R}}
\newcommand{\errorVel}{\bm{e}_{v}}
\newcommand{\errorAngVel}{\bm{e}_{\omega}}
\newcommand{\errorPosi}{e_{p,i}}
\newcommand{\errorAngi}{e_{R,i}}
\newcommand{\errorVeli}{e_{v,i}}
\newcommand{\errorAngVeli}{e_{\omega,i}}
\newcommand{\errorAcci}{e_{v,i}}
\newcommand{\errorAngAcci}{e_{\omega,i}}
\newcommand{\errorPosStacked}{\tilde{\error}_p}
\newcommand{\errorPosWallStacked}{\tilde{\error}_s}
\newcommand{\errorPosWallStackedi}{\tilde{e}_{s,i}}
\newcommand{\errorVelStacked}{\tilde{\error}_v}
\newcommand{\velStacked}{\tilde{\vel}}
\newcommand{\errorAccStacked}{\dot{\tilde{\error}}_v}
\newcommand{\errorPosStackedi}{\tilde{e}_{p,i}}
\newcommand{\errorVelStackedi}{\tilde{e}_{v,i}}
\newcommand{\errorVelStackedOne}{\tilde{e}_{v,1}}
\newcommand{\errorVelStackedSix}{\tilde{e}_{v,6}}
\newcommand{\errorAccStackedi}{\dot{\tilde{e}}_{v,i}}
\newcommand{\errorForce}{\bm{e}_{F}}
\newcommand{\errorTorques}{\bm{e}_{M}}
\newcommand{\errorWrench}{\dot{\error}_{\tau}}
\newcommand{\errorWrenchi}{\dot{e}_{\tau,i}}
\newcommand{\errorWrenchIntegral}{\error_{\tau}}
\newcommand{\errorWrenchIntegrali}{e_{\tau,i}}
\newcommand{\Cmatrix}{\bm{C}}
\newcommand{\Mmatrix}{\bar{\bm{M}}}

\newcommand{\Uniform}[2]{\mathcal{U}\left(#1, #2\right)}
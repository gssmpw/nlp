\section{Analysis and Future Work}
\label{sec:analysis}

\subsection{Categories of Flakiness Root Causes}

Table~\ref{root-cause} presents the categories identified for the 53 tests through manual analysis in our study. We found that 33.9\% of these tests are affected by asynchronous waits. Among these, 38\% specifically are related to issues of \textit{improper wait}, which means tests do not properly wait for asynchronous operations to complete before moving on to assertions.
% \yang{is this correct?}
% \tom{It's basically just shorthand for 'missing synchronization point' - the code/test was missing some condition for waiting on some control/data dependency. The term 'wait' doesn't hold any official significance within Rust.}. 
Flakiness due to concurrency, logic, and network issues also appear frequently among the top causes. Additional root causes include I/O operations, randomness, time issues, unordered data and environment.

\input{Tables/root-cause-update}


\begin{figure}
    \centering
    \includegraphics[scale=0.65]
    {Figures/fixfig.pdf}
    \vspace{-10pt}
    \caption{\small Categories of fixes. (a) shows the effectiveness of fixes per root cause category; (b) outlines the scope of changes for fixes per root cause category.}
    % \vspace{-5mm}
    \label{fig:fix}
    \vspace{-4pt}
\end{figure}

\subsection{Categories of Fix Strategies}
To investigate the fixes of flaky tests, we categorize them based on the \textit{effectiveness of fixes} by assessing whether each fix completely removes flakiness or only reduces the likelihood of failure (Figure~\ref{fig:fix}(a)). Additionally, we evaluate the \textit{scope of changes}, determining whether the fix modifies test code or main code (Figure~\ref{fig:fix}(b)).
Four tests affected by async waits and one test caused by time issues have not been completely fixed but only have a reduced likelihood of test failures. The potential reason could be that the actual root cause was not fully understood or that completely removing flakiness through a patch is programmatically challenging.
% \yang{any reason here?}\tom{The most common reason is that the dependency between two actors is not fully understood or not available programmatically, so something like a timeout duration always has the possibility of failing}. 
Additionally, of the 53 tests, 27 were fixed by modifying the main code to address common root causes such as async waits, concurrency, and logic. The remaining tests were patched within the test code. 
% \yang{any observation of differences between fixes to main code and test code?}\tom{We're not explicitly tracking this currently. In general, the fixes are typically similar.}


% \subsection{Future Work}
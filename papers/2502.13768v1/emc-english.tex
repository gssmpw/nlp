%!TEX encoding = UTF-8 Unicode
%!TEX root =  main-emc.tex

\title{Rationally presented metric spaces and complexity, the case 
of the space of uniformly continuous real functions on a compact interval}

\author{S. Labhalla\\
 Dépt. de Mathématiques\\
 Univ. de Marrakech, Maroc\\
{\tt labhalla@ucam.ac.ma} 
\and H. Lombardi\\ Laboratoire de Mathématiques de Besançon \\
Université Marie et Louis Pasteur, France \\
{\tt henri.lombardi@univ-fcomte.fr}
\and E. Moutai\\
Dépt. de Mathématiques\\
Univ. de Marrakech, Maroc}


\maketitle

This is the English translation of the French paper 
``Espaces métriques rationnellement présentés et complexité, le cas de l'espace des fonctions réelles uniformément continues sur un intervalle compact'', \emph{Theoretical Computer Science} {\bf 250}, \num 1-2, 265--332, (2001). (Received April 1997; revised March 1999.) We have fixed some minor typos.

%: abstract
\begin{abstract} \label{abstract}
We define the notion of {\em rational
presentation of a complete metric space} in order to study metric spaces from the algorithmic complexity point of view. In this setting, we study some presentations of the space $\czu$ of uniformly continuous real functions over [0,1] with the usual norm:
$\norme{f}_{\infty} = {\bf Sup} \{ \abs{f(x)} ; \;
 0 \leq x \leq 1\}.$
This allows us to have a comparison of a global kind between complexity notions attached to these presentations. In particular, we get a generalisation of Hoover's results concerning the {\sl Weierstrass approximation theorem in polynomial time}. We get also a generalisation of previous results on analytic functions which are computable in polynomial time.
\end{abstract}


\noindent {\bf Key words}: Metric spaces, Real functions, Turing machine, Boolean 
circuit, Binary semilinear circuit, Arithmetic circuit, Algorithmic complexity, Weierstrass approximation theorem, Gevrey class, Chebyshev series.

\section*{Introduction}\label{sec0}
\addcontentsline{toc}{section}{Introduction}
\markboth{Introduction}{Introduction}
Let $\czu$ be the space of uniformly continuous real functions on the interval 
$[0,1]$.

\smallskip In \cite{KF82}, Ker-I.\ Ko and Friedman introduced and studied the notion of complexity of real functions defined via an oracle Turing machine. 
In the article \cite{Ho90}, Hoover studied presentations of the space 
$\czu$  via boolean circuits and arithmetic circuits.

In these two articles the complexity in the $\czu$ space is studied ``in a pointwise meaning''. In other words, they study sentences such as: 
%-----------------begin item------------------
\begin{itemize}

\item 
$f$ is a $\p$-point in the sense of Ker-I.\ Ko and Friedman.

\item 
$f$ is a $\p$-point in the sense of boolean circuits.

\item 
$f$ is a $\p$-point in the sense of arithmetic circuits.
\end{itemize}
%-----------------end item------------------

Ker-I.\ Ko and Friedman studied the properties of $\p$-points (in their sense). 
Hoover showed that $\p$-points in the sense of arithmetic circuits are the same as $\p$-points in the sense of Ker-I.\ Ko and Friedman.

\medskip In this paper, we study several presentations of the space $\czu$ based on the notion of {\em rational presentation of a complete metric space}. 
This allows us to make a global comparison between the notions of complexity attached to different presentations.
 
\medskip After some preliminaries in Section~\ref{sec1}, Section \ref{sec2} essentially contains an exposition of what seems to us to be a natural approach concerning complexity questions related to separable complete metric spaces. 

\smallskip 
Usually a metric space contains objects of infinite nature (the paradigm being real numbers defined à la Cauchy), which rules out a direct computer presentation (i.e.\ encoded on a finite alphabet) of these objects.

To get round this difficulty, we proceed as  usual for the space $\RR$. 
Let us consider a dense part~$Y$ of the metric space $X$ under consideration, which is simple enough that 
%-----------------begin item------------------
\begin{itemize}

\item 
its elements can be encoded as (certain) words on a fixed finite alphabet;

\item 
the distance function restricted to $Y$ is computable, i.e.\ given by a computable function:

\snic{\delta: Y\times Y\times \NN_1\to \QQ \; \qquad {\rm { with }}\qquad \; \abs{d_X(x,y) - \delta(x,y,n)}\; \leq 1/2^n.
}
\end{itemize}
%-----------------end item------------------

The space $X$ then appears as the completion of $Y$.

We will say that the proposed encoding of $Y$ and the proposed description of the distance function constitute a ``rational presentation'' of the metric space $X$.
 
It should be noted that we do not intend to deal with non-complete metric spaces, for which the encoding difficulties seem insurmountable, and for which it is practically impossible to demonstrate anything serious in constructive analysis.

Similarly, the metric spaces treated are ``separable'' (also known as ``second countable'').

\smallskip The metric spaces studied in constructive analysis (cf.\ \cite{BB}) are very often defined via a rational presentation of this type, or at least easy to define according to this scheme. 
The problem that arises is generally to define constructively a dense countable part of the space under consideration. This is obviously impossible for classical non-separable Banach spaces such as $L^\infty$, but it is precisely these spaces that cannot be treated in their classical form by constructive methods. 
The problem is more delicate for spaces that are classically separable but for which there is no natural constructive method that gives a dense countable part. 
For example, this is the case for an arbitrary closed subspace of a complete separable space, and it is still the case for certain spaces of continuous functions.

\smallskip The unary presentation and the binary presentation of $\ZZ$ are not equivalent from the point of view of polynomial time complexity. 
The unary presentation is a natural presentation of $\ZZ$ as a group whereas the binary presentation is a natural presentation of $\ZZ$ as a ring. Similar questions can be asked about the usual classical metric spaces.

\smallskip The first question that arises is the comparison of the different presentations of a usual metric space. 
Note that the usual presentation of $\RR$ is  to be the only natural one and that it is from this presentation of $\RR$ that the complexity of a presentation $(Y_1, \delta_1)$ of $X$ or the complexity of the map $\Id_X$ from $(Y_1, \delta_1)$ to $(Y_2, \delta_2)$ is defined when comparing two distinct presentations of~$X$.

\smallskip The next question is that of the complexity of computable  continuous maps between metric spaces. 
While there is a natural notion of the complexity of functions in the case of compact spaces, the question is much trickier in the general case, since it refers to the complexity of arbitrary type-2 functionals.
 
\smallskip Another question is that of the complexity of objects linked in a natural way to the metric space under study. 
For example, in the case of the reals, and considering only the algebraic structure of $\RR$, we are interested in the fact that the complexity of addition, multiplication or finding the complex roots of a polynomial with real coefficients are all ``low level''. 
This kind of result legitimises a posteriori the choice that is usually made to present $\RR$, and results of the opposite kind disqualify other presentations (cf.\ \cite{LL}), which are less efficient than the presentation via Cauchy sequences of rationals written in binary.\footnote{Nevertheless, the sign test is undecidable for the reals presented à la Cauchy. 
We are satisfied with the constructive test in polynomial time: $x + y \geq 1/2^n \Rightarrow ( x \geq 1/2^{n+2} \;\hbox{ or }y \geq 1/2^{n+2} )$.}
 
Similarly, a usual metric space is generally provided with a richer structure than just the metric structure, and it is then a question of studying, for each presentation, the complexity of these ``natural elements of structure''.


\medskip 
In Section \ref{sec3}, we introduce the space $\czu$ of uniformly continuous real functions on the interval $[0,1]$ from the point of view of its rational presentations.
 
The evaluation function $(f, x) \mapsto f(x)$ is not locally uniformly continuous. 
Given its importance, we discuss what the complexity of this function means when we have chosen a rational presentation of the space $\czu$. 

We then give two significant examples of such rational presentations:
%-----------------begin item------------------
\begin{itemize}

\item 
A binary semilinear circuit presentation, $\csl$, where the rational points are exactly the binary semilinear maps. Such a map can be defined by a binary semilinear circuit (cf.\ Definition~\ref{321}) and encoded by an evaluation program corresponding to the circuit.

\item 
A presentation, denoted by $\crf$, via rational functions suitably controlled and given in presentation by formula (cf.\ Definition~\ref{325}).
\end{itemize}
%-----------------end item------------------
Finally we establish complexity results related to Newman's approximation theorem. 
Briefly, Newman's theorem has polynomial complexity and consequently the piecewise linear functions are, each individually, points of complexity $\p$ in the rational presentation $\crf$.


\medskip In Section~\ref{sec4} we define and study several ``natural'' rational presentations of $\czu$, equivalent from the point of view of polynomial time complexity.
%-----------------begin item------------------
\begin{itemize}
\item 

The so-called Ko-Friedman presentation, denoted by $\ckf$, for which a rational point is given by a quadruplet $(Pr, n, m, T)$ where $Pr$ is a Turing machine program. The integers $n$, $m$, $T$ are control parameters. We make the link with the notion of complexity introduced by Ker-I.\ Ko and Friedman. We show a universal property that characterises this rational presentation from the point of view of polynomial-time complexity.

\item 

The boolean circuit presentation which is denoted by $\cbo$ and for which a rational point is given by a quadruplet $(C,n,m,k)$ where $C$ encodes a boolean circuit and $n$, $m$, $k$ are control parameters.

\item 

The presentation by arithmetic circuits (with magnitude) noted $\caf$. A rational point of this presentation is given by a pair $(C,M)$ where $C$ is the code of an arithmetic circuit, and $M$ is a control parameter.

\item 
The presentation by polynomial arithmetic circuits (with magnitude) noted $\capo$ analogous to the preceding one, but here the circuit is polynomial, i.e.\ it does not contain the ``pass to inverse'' gates). 
\end{itemize}
%-----------------end item------------------
We show in Section \ref{subsec42} that the presentations $\ckf$, $\cbo$, $\csl$, $\caf$ and $\capo$ are equivalent in polynomial time. 

This result generalises and clarifies Hoover's results. Not only are the $\p$-points of $\ckf$ ``the same'' as the $\p$-points of $\capo$, but even better, the bijections 
\[
\ckf \rightarrow \capo \;\; \; {\rm and} \; \; \; \capo \rightarrow \ckf
\]
which represent the identity of $\czu$ are computable in polynomial time. 
Thus we obtain a fully controlled formulation of the Weierstrass approximation theorem from an algorithmic point of view. 

\smallskip In Section~\ref{subsec43}, we show that these presentations are not of class $\p$ by establishing the infeasibility of computing the norm function (if $\p\neq \np$). 
More precisely, we properly define ``the norm problem'' and show that it is an $\np$-complete problem for the  presentations we have introduced. 

As for the membership test of the set of rational (codes of) points, it is a $\cnp$-complete problem for the presentations $\ckf$ and $\cbo$, while it is in linear time for the presentation $\csl$. The latter is therefore slightly more satisfactory.

\medskip In Section \ref{sec5} we define other presentations of the space $\czu$.
%-----------------begin item------------------
\begin{itemize}

\item 
The presentation denoted by $\cw$ (like Weierstrass) for which the set of rational points is the set of (one-variable) polynomials with rational coefficients given in dense presentation.

\item 
The presentation denoted by $\csp$ for which the set of rational points is the set of piecewise polynomial functions, each polynomial being given as for $\cw$.

\item 
The presentation $\csr$ is obtained from $\crf$ in the same way as $\csp$ is obtained from $\cw$.
\end{itemize}
%-----------------end item------------------
We try to see to what extent the $\p$ class character of these presentations provides a suitable framework for numerical analysis.

We characterise the $\p$-points of $\cw$ by establishing the equivalence between the following properties (cf.\ \thref{527}).

\begin{itemize}

\item [a)]
$f$ is a $\p$-point of $\cw$;

\item [b)]
the sequence $A_n(f)$ (which gives the expansion of $f$ in a Chebyshev series) is a $\p$-sequence in $\RR$ and verifies the inequality 

\snic{\abS{A_n(f)}\; \leq Mr^{n^{\gamma}} \;{\rm 
with }\;M > 0,~\gamma > 0,~0< r < 1;
}

\item [c)] 
$f$ is a $\p$-point of $\ckf$ and is in the Gevrey class. 
\end{itemize}
We deduce an analogous equivalence between the following properties (cf.\ \thref{528}).
\begin{itemize}

\item [a)] 
$f$ is an analytic function and is a $\p$-point of $\cw$;

\item [b)] 
$f$ is an analytic function and is a $\p$-point of $\ckf$.
\end{itemize}

 
The usual calculations on $\p$-points of $\cw$ (calculation of the norm, the maximum and the integral of a $\p$-point of $\cw$) are in polynomial time (cf.\ Proposition \ref{526}). 

Moreover a fairly good behaviour of  derivation with respect to complexity is obtained by showing that for any $\p$-point (or any $\p$-sequence) of $\cw$ the sequence (or double sequence) of its derivatives is a $\p$-sequence of $\cw$ (cf.\ \thref{5210} and Corollary \ref{5211}).

\smallskip In \thref{5213} and its Corollary \ref{5214}, we give a more uniform version of the previous results. Combined with Proposition \ref{526}
we get a significant improvement of the results in \cite{Mu87} and \cite{KF88}. And our proofs are more conceptual. 

\smallskip Moreover, these results, combined with Newman's theorem (in its version given in Section~\ref{subsec33}), show that the transition from the presentation by rational functions $\crf$ to the presentation by (dense) polynomials $\cw$ is not in polynomial time. 
Newman's theorem also shows that the presentations $\crf$ and $\csr$ are polynomially equivalent. 


\bigskip Summarising the results of sections \ref{sec4} and \ref{sec5}, we obtain that the identity of $\czu$ is uniformly of class $\p$ in the following cases: 
\[
\cw \rightarrow \csp \rightarrow \crf \equiv \csr 
\rightarrow \ckf \equiv \cbo \equiv \csl \equiv \caf 
\equiv \capo.
\] 
and none of the arrows in the line above is a $\p$-equivalence except perhaps $\csp \to \crf$ and also perhaps $\crf \to \ckf$ (but that would imply $\p = \np$).
 

\medskip We end this introduction with a few remarks on constructivism.

The work presented here is written in the style of constructive mathematics à la Bishop as developed in particular in the books by Bishop \cite{Bi}, Bishop \& Bridges \cite{BB}, Mines, Richman \& Ruitenburg \cite{mrr}. 
This is a kind of minimal body of constructive mathematics.\footnote{A pioneering work in a purely formal style is that of Goodstein \cite{Go1,Go}.}
All the theorems proved in this way are in fact equally valid for classical mathematicians, the advantage being that here the theorems and proofs always have an algorithmic content. 
The classical reader can therefore read this work as an extension of the work on recursive analysis by Kleene and Turing and later by Ker-I.\ Ko  \& H.\ Friedman (\cite{KF82}, \cite{Ko91}), N.\ Th.\ Müller \cite{Mu86,Mu87}, Pour El \& Richards \cite{PR}, who themselves work within a framework of classical mathematics.

On the other hand, theorems and their proofs in Bishop's style are also acceptable within the framework of other variants of constructivism, such as Brouwer's intuitionism or the Russian constructive school of A.A.\ Markov, G.S.\ Ceitin, N.A.\ Shanin, B.A.\ Kushner and their pupils. 
An enlightening discussion of these different variants of constructivism can be found in Bridges \& Richman's book \cite{BR}. 

Beeson's comprehensive book \cite{Be} also gives thorough discussions of these views and their variants, including a remarkable survey of the work of logicians who have attempted to formalise constructive mathematics. 

Russian constructive mathematics can be discovered through the books by Kushner \cite{Ku} and O.\ Aberth \cite{Ab}. 
A very relevant historical article on the subject is written by M.\ Margenstern~\cite{Ma}. 
Chapter IV of \cite[Beeson]{Be} is also very instructive. 
Beeson states on page 58: ``We hope to show that this mathematical universe is an extremely entertaining place, full of surprises (like any foreign country), but by no means too chaotic or unlivable''. 
Russian constructive mathematics restricts its objects of study to ```recursive beings'', and in this respect is similar to certain works of classical recursive analysis developed by Grzegorczyk, Kreisel, Lacombe, Schoenfield and Specker, with whom it shares many results.
 One of the principles of Russian constructive mathematics, for example, is that there are only recursive reals given by algorithms (which calculate sequences of rationals with a controlled speed of convergence). 
And a real function defined on the reals is an algorithm $F$ which takes as input an algorithm $x$ and gives as output, under the condition that $x$ is an algorithm producing a recursive real, an algorithm $y$ producing a recursive real. 
This leads, for example, to Ceitin's theorem, which is classically false, according to which any real function defined on the reals is continuous at any point.
Classical recursive analysis states: if an algorithm terminates each time the input is the code of a recursive real and then gives the code of a recursive real as output, and if it defines a function (i.e.\ two codes of the same recursive real as input lead to two codes of the same recursive real as output) then it defines a function that is continuous at any recursive real point (Kreisel-Lacombe-Schoenfield-Ceitin theorem). 
Beeson analysed the Kreisel-Lacombe-Schoenfield proof to clarify its non-constructive aspects. 
Ceitin's proof, which is more constructive than Kreisel-Lacombe-Schoenfield's, is analysed in \cite{BR}.
 
In Bishop's style, since the notion of effectivity is  to be a primitive notion that does not necessarily reduce to recursivity, and since recursivity, on the contrary, cannot be defined without this primitive notion of effectivity, real numbers and real functions are objects that retain a greater degree of ``freedom'' and are therefore closer to real numbers and real functions as intuitively conceived by classical mathematicians. 
And the preceeding ``Russian'' theorem is therefore unprovable in Bishop style. Symmetrically, theorems from classical mathematics that directly contradict results from Russian constructivism (such as the possibility of unambiguously defining real discontinuous functions) cannot be proved in Bishop-style mathematics. 

In conclusion, Russian constructivism is of undeniable historical interest, develops a very coherent mathematical philosophy and can undoubtedly be revived by theoretical computer science concerns. 
It would also be interesting to study this mathematics from the point of view of algorithmic complexity. 

\section{Preliminaries}\label{sec1}
\subsection{Notations}\label{subsec11}
%-----------------begin item------------------
\begin{description}\itemsep.5pt
\item [$\NN_1$] 
set of unary natural numbers.

\item [$\N$]  
set of natural integers in binary. From the point of view of complexity, $\NN_1$ is isomorphic to the part of $\NN$ formed by the powers of $2$.

\item [$\ZZ$] 
set of integers in binary.

\item [$\QQ$] 
set of rational numbers presented in the form of a fraction with numerator and denominator in binary.

\item [$\QQ^{\NN_1}$] 
set of sequences of rationals, where the index is in unary.

\item [$\DD$] 
set of numbers of the form $k/2^n$ with $(k,n) \in \ZZ \times \NN_1$.

\item [$\DD_{[0,1]}$] 
$\DD \cap [0,1]$.

\item [$\DD_n$] 
set of numbers of the form $k/2^n $ where $k \in \ZZ$.

\item [$\DD_{n,[0,1]}$] 
$\DD_n \cap [0,1]$.

\item [${\DD[X]}$] 
set of polynomials with coefficients in $\DD$ given in dense presentation.

\item [${\DD[X]_f}$] 
set of polynomials with coefficients in $\DD$ given in formula presentation.

\item [$\RR$] 
set of real numbers presented by Cauchy sequences in $\QQ$.

\item [$\CB$] 
set of codes of boolean circuits.

\item [$\CA$] 
set of codes of arithmetic circuits.

\item [{\rm TM}] 
Turing machine.

\item [{\rm OTM}] 
Turing machine with oracle.

\item [$\mu$] 
modulus of uniform continuity (cf.\ Definition \ref{221}).

\item [$\Lg(a)$] 
the length of the binary coding of the dyadic $\vert a \vert$ (for $a \in \DD$).

\item [$\sz(C)$] 
size of circuit $C$ (the number of its gates).

\item [$\depth(C)$] 
depth of circuit $C$.

\item [$\Mag(C)$] 
magnitude of the arithmetic circuit $C$ (cf.\ Definition \ref{4110}).

\item [$\wi{f}$] 
continuous function encoded by $f$.

\item [$\M(n)$] 
complexity of calculating the multiplication of two integers in binary representation (in fast multiplication $\M(n) = \Oo(n \log(n) \log\log(n)$).

\item[$\log(n)$] for a natural integer $n$ is the length of its binary code.

\item [$\flo d$]	
the length (of the discrete encoding) of the object $d$ (the encoding of $d$ is a word on a fixed finite alphabet).

\item[$\Flo{x}$] 
the largest integer $m$ such that $m\leq x$.  
 
\end{description}
%-----------------end item------------------

%---- paragraph{para }----
\paragraph{Presentations of the space $\czu$}~
%------------------------------------------------------------------

%-----------------begin item------------------
\begin{itemize}\itemsep.5pt

\item [$\ckf$] 
presentation by Turing Machine, à la Ko-Friedman\\
$\ykf$ is the set of (codes of) rational points  (cf.\ Definition \ref{411})

\item [$\caf$] 
presentation by arithmetic circuits\\
$\yaf$ is the set of (codes of) rational points (cf.\ Definition \ref{4110})

\item [$\capo$] 
presentation by divisionfree (or polynomial) arithmetic circuits\\
$\yap$ is the set of (codes of) rational points (cf.\ Section \ref{subsubsec414})

\item [$\cbo$] 
presentation by boolean circuits\\
$\ybc$ is the set of (codes of) rational points (cf.\ Definition \ref{418})

\item [$\csl$] 
presentation by binary semilinear circuits\\
$\ysl$ is the set of (codes of) rational points (cf.\ Definition \ref{321})

\item [$\crf$] 
presentation by rational functions in a formula encoding\\
$\yrf$ is the set of (codes of) rational points (cf.\ Definition \ref{325})

\item [$\cw$] 
presentation à la Weierstrass by polynomials in a dense encoding\\
$\yw$ is the set of (codes of) rational points (cf.\ Section \ref{subsec51})

\item [$\csp$] 
presentation by piecewise polynomial functions in a dense encoding\\
$\ysp$ is the set of (codes of) rational points (cf.\ Section \ref{subsubsec512})

\item [$\csr$] 
presentation by piecewise rational functions in a formula encoding\\
$\ysr$ is the set of (codes of) rational points (cf.\ Section \ref{subsubsec513})
\end{itemize}
%-----------------end item------------------

\subsection{Interesting classes of discrete functions}\label{subsec12} 

We shall consider classes of discrete functions $\ca$ (a discrete function is a function from $A^{\star}$ to $B^{\star}$, where~$A$ and $B$ are two finite alphabets)\footnote{If we want to make this sound more mathematical and less computational, we can replace $A^{\star}$ and $B^{\star}$ by sets~$\NN^k$.} with the following basic stability properties:
%-----------------begin item------------------
\begin{itemize}

\item 
 
$\ca$ contains the usual arithmetic functions and the comparison test in $\ZZ$ (for $\ZZ$ encoded in binary);

\item 
$\ca$ contains functions that can be calculated in linear time (i.e.\ $\LINT \subset \ca$);

\item 
$\ca$ is stable by composition;

\item 
$\ca$ is stable by lists: if $f:A^{\star} \to B^{\star}$ is in $\ca$ then $\lst(f): \lst(A^{\star}) \to \lst(B^{\star})$ is also in $\ca$ ($\lst(f)[x_1, x_2,\ldots, x_n] = [f(x_1), f(x_2),\ldots, f(x_n)]$).
\end{itemize}
%-----------------end item------------------
A class which verifies the above stability properties is said to be \emph{elementarily stable}.
In practice, we will be particularly interested in the following elementarily stable classes:
%-----------------begin item------------------
\begin{itemize}

\item 
 
$\Rec:$ the class of recursive functions.

\item 
 
$\Fnc:$ the class of constructively defined functions (in constructive mathematics, this concept is a primitive concept which does not coincide with the preceding one, and it is necessary to have it beforehand in order to be able to define the preceding one, recursivity being interpreted as a purely mechanical construction in its unfolding as a process of calculation).

\item $\Prim:$ the class of primitive recursive functions.

\item $\p :$ the class of functions computable in polynomial time.

\item  $\cE:$ the class of elementary recursive functions, i.e.\ functions that can still be calculated in time bounded by a compound of exponentials.

\item $\PSP:$ the class of functions computable in polynomial space (with an output polynomially bounded in size).

\item $\LINS:$ the class of functions computable in linear space (with an output linearly bounded in size).

\item $\DSRT(\Lin, \Lin, \Poly):$ the class of functions computable in linear space, in polynomial time and with an output linearly bounded in size.

\item $\DSRT(\Lin, \Lin, \Oo(n^k)):$ the class of functions computable in linear space, in $\Oo(n^k)$ time (with $k > 1$) and with an output linearly bounded in size.

\item $\DSRT(\Lin, \Lin, \Exp):$ the class of functions computable in linear space, in time $\exp(\Oo(n))$ and with an output linearly bounded in size.

\item $\DRT(\Lin, \Oo(n^k)):$ the class of functions computable in time $\Oo(n^k)$, (with $k > 1$) and with an output linearly bounded in size.

\item $\DSR(\Poly, \Lin):$ the class of functions computable in polynomial space with an output linearly bounded in size.

\item $\DSR(\Oo(n^k), \Lin):$ the class of functions computable in $\Oo(n^k)$ space, (with $k > 1$) with an output linearly bounded in size.

\item $\QL:$ the class of functions computable in quasilinear time (cf.\ Schnorr \cite{Sc}.)  \\($\QL: = \cup_b \DTI (\Oo(n.\log^b(n))) = \DTI (\QLin)$).
\end{itemize}
%-----------------end item------------------

\smallskip Note that, apart from the $\Rec$ and $\Fnc$ classes, all the classes we have defined are complexity classes (in Blum's sense). However, there is no need for this, as the examples of $\Rec$ and $\Fnc$ show. When we consider only the $\Fnc$ class, we develop a chapter of abstract constructive mathematics.
 Note that $\DTI (\Oo(n^k))$ for $k > 1$ is not stable by composition. But, more often than not, the $\Oo(n^k)$ time calculations that we will have to consider are in the class $\DRT(\Lin, \Oo(n^k))$ or even $\DSRT(\Lin, \Lin, \Oo(n^k))$ and these classes have the right stability properties.

\subsection{Complexity of a Universal Turing Machine}\label{subsec13} 
In the following we will need to use a Universal Turing Machine and estimate its algorithmic complexity. 
The following result, for which we have not found a reference, seems to be part of folklore, and was pointed out to us by Mr Margenstern.

\begin{lemma} \label{131} 
There is a universal TM $MU$ which does the following work.

\noindent 
It takes as input:

\noindent 
--- the code (whose size is $p$) of a TM $M_0$ (operating on a fixed alphabet, with one input band, one output band, several work bands) assumed to be of complexity in time $T$ and space $S$ (with $S(n) \geq n$);

\noindent 
--- an input $x$ (of size $n$) for $M_0$.

\noindent 
It outputs the result of the calculation performed by $M_0$ for input $x$.

\noindent 
It executes this task in time $\Oo(T(n)(S(n)+p))$ and using a space $\Oo(S(n)+p)$.
\end{lemma} 

\begin{proof} 
Machine $MU$ uses a work tape to write, at each elementary step of machine $M_0$, which it simulates, the list of the contents of each of the variables of $M_0.$ To simulate a step of $M_0$, machine $MU$ needs $\Oo(S(n)+p)$ elementary steps, using a space of the same order of magnitude. 
\end{proof}


\subsection{Circuits and evaluation programs}\label{subsec14} 

Circuit families are interesting computational models, particularly from the point of view of parallelism. 
Boolean circuit families are to some extent an alternative to the standard TM model. Small arithmetic circuits are able to calculate polynomials of very high degree. 
This is the case, for example, for an arithmetic circuit that simulates a Newton iteration for a map given by a rational function.
 
In all cases, the problem arises of knowing what coding to adopt for a circuit. We will always choose to code a circuit with one of the evaluation programs (or straight-line programs) which execute the same task as it does.\footnote{Different evaluation programs may correspond to the same circuit, depending on the order in which the instructions to be executed are written.}
 
Furthermore, w.r.t.\ arithmetic circuits, which represent polynomials or rational functions, we will consider them not from the point of view of exact calculation (which would be too costly), but from the point of view of approximate calculation. The question then arises as to how to evaluate their execution time when we want to guarantee a given precision on the result, for entries in $\DD$ which are themselves given with a certain precision. 
No reasonable bound in execution time can be obtained using general-purpose arguments unless the depth of the circuit is very small, as the degrees obtained are too large and the calculated numbers are likely to be too large. As it is not always possible to limit the depth of circuits to very small depths, it is essential to give a control parameter, called magnitude, which ensures that, despite a possible very large degree, the size of all the numbers calculated by the circuit (which will be evaluated with a precision that is itself limited) is not too large when the input represents a real number varying within a compact interval. 



\section{Rationally presented complete metric spaces}\label{sec2}

\subsection[Rational presentation of a metric space, complexity of points \ldots]{Rational presentation of a metric space, complexity of points and families of points}\label{subsec21}

Unless explicitly stated otherwise, the classes of discrete functions we consider will be elementarily stable classes.

\begin{definition}[rational presentation of class $\ca$ for a complete metric space] \label{211}


\noindent 
A complete metric space $(X, d_X)$ is {\em given in a rational presentation of class $\ca$} in the following way. We give a triple $(Y, \delta, \eta)$ where
%-----------------begin item------------------
\begin{itemize}

\item $Y$ is a $\ca$-part of a language $A^{\star}$

\item  $\eta$ is a map from $Y$ to $X$

\item $\delta: Y\times Y\times \NN_1\to
\DD$ is a function in the class $\ca$ and verifying (for $n\in\NN_1$ and $x , y , z \in Y$):

\noindent 
--- $\abs{d_X(x,y)-\delta(\eta(x),\eta(y))}\; \leq 1/2^n$

\noindent 
--- $\delta(x,y,n) \in \DD_n $

\noindent 
--- $\delta(x,y,n) = \delta(y,x,n)$

\noindent 
--- $\delta(x,x,n) = $0

\noindent 
--- $\abs{\delta(x,y,n+1)-\delta(x,y,n)}\; \leq 1/2^{n+1}$

\noindent 
--- $\delta(x,z,n) \leq \delta(x,y,n) + \delta(y,z,n) + 2/2^n$ 
\end{itemize}
%-----------------end item------------------
If we define the distance $d_Y(x,y)$ as the limit of $\delta(x,y,n)$ when $n$ tends to infinity, the map $\eta$ from~$Y$ to~$X$ identifies $(X,d_X)$ to the completion of $(Y,d_Y)$.
The set $\eta(Y)$ is called {\em the set of rational points of $X$ for the presentation under consideration}. If $y \in Y$ we will often note~$\wi{y}$ for~$\eta(y)$, and $y$ is called the code of~$\wi{y}$.
\end{definition}

We sometimes abbreviate ``$(Y,\delta,\eta)$ is a rational presentation of class $\ca$ for $(X,d_X)$'' to ``$(Y,\delta)$ is a $\ca$-presentation of $(X,d_X)$''.

\begin{remarks} \label{212}
1) We can replace $\DD$ by $\QQ$ in the definition above without modifying the notion that is defined. Choosing $\QQ$ is nicer mathematically, whereas choosing $\DD$ is more natural from a computing point of view. In addition, the constraint $\delta(x,y,n) \in \DD_n$ satisfies the natural request not to use more space than necessary to represent an approximation to within $1/2^n$ of a real number.

\noindent 
2) When we have given a rational presentation for an abstract metric space $(X,d_X)$, we will say that {\em we have provided $(X,d_X)$ with a calculability structure}. This is essentially the same as defining a language $Y \subset A^{\star}$ and then a  map $\eta$ from $Y$ to $X$ whose image is a dense part of $X$. The presentation is completely defined only when we have also given a map $\delta\colon Y \times Y \times \NN_1 \to \DD$ verifying the requirements of Definition \ref{211}. 
{\em In the following, we will nevertheless allow ourselves to say that an encoding of a dense part $Y$ of $X$ defines a presentation of class $\ca$ of $X$ when we show that the requests of Definition \ref{211} can be satisfied}. 

\noindent 
3) Understood in the constructive sense, the sentence included in the definition ``we give a  map $\eta$ from $Y$ to $X$'' requires that we have ``a certificate that $\eta(y)$ is indeed an element of $X$ for any $y$ in $Y$''. 	
It may be that this certificate of membership itself implies a natural notion of complexity. When this is the case, for example for the space $\czu$, it will be inevitable to take this complexity into account. {\em Thus, Definition \ref{211} is considered as being incomplete and needing to be specified on a case-by-case basis}. This is undoubtedly a pity from the point of view of the formal elegance of general definitions. But it is a de facto situation that seems very difficult to get round. 
\end{remarks}

\begin{examples}\label{213}~

\noindent 
--- The space $\RR$ is usually defined in the presentation where the set of rational points is $\QQ$. Equivalently, and this is what we will do in the following, we can consider as the set of rational points of $\RR$ the set $\DD$ of dyadic numbers.\footnote{This corresponds to the notation $\RR_{\rm conv}$ in \cite{LL} and $\RR_{\rm con}$ in \cite{Ko83}.}

\noindent 
--- We can easily define the product of two presentations for two metric spaces.

\noindent 
--- Any {\em discrete set} $Z$ ($Z$ is given as a part of a language $A^{\star}$ with an equivalence relation which defines equality in $Z$ and which is testable in the class $\ca$) gives rise to a {\em discrete metric space}, i.e.\ in which the distance of two distinct points is equal to $1$. 

\noindent 
--- The complete metric spaces of constructive mathematics in the style of Bishop \cite{BB} generally admit a rational presentation of class $\Fnc$. 
In each concrete case the presentation turns out to be a presentation of class $\Prim$ or even $\p$. 
\end{examples}

\begin{definition}[complexity of a point in a rationally presented metric space] \label{214} ~

\noindent 
Consider a complete metric space $X$ given in a presentation $(Y,\delta,\eta)$ of class $\ca'$. A point $x$ of $X$ is said to be of class $\ca$ when we know a sequence ($n \mapsto y_n$) of class $\ca$ (as a function $\NN_1 \to Y$) with $d_X(x,\eta(y_n)) \leq 1/2^n$.
We also say that $x$ is a \emph{$\ca$-point in $X$}.
\end{definition}

\begin{example} \label{215}
When $X = \RR$, the above definition corresponds to the usual notion of a real number of class $\ca$ (in the Cauchy sense).
\end{example}

\begin{remark} \label{216}
It would seem natural to require that the class $\ca'$ contain the class $\ca$, but this is not completely essential. This remark applies to almost all the definitions that follow.
\end{remark}


%--- defbis{214bis}-------------------- 
\mni
{\bf Definition \ref{214}bis}
{\em (complexity of a point in a rationally presented metric space, more explicit version)} 
 Consider a complete metric space $X$ given in a presentation of class $\ca'$: $(Y, \delta,\eta)$. 
\\ 
A point $x$ of class $\ca$ in $X$ is given by a sequence ($n \mapsto y_n$) of class $\ca$ (as a map $\NN_1 \to Y$) satisfying the  conditions
$
\delta(y_n,y_{n+1},n+1) \leq 1/2^n
$ 
and $x=\lim_{n\to \infty}\eta(y_n)$.
%--- end-defbis---------------------------


\medskip
We leave it to the reader to check that the two definitions \ref{214} and \ref{214}bis are equivalent.
We now turn to the definition of complexity for a family of points (with a discrete set of indices)

\begin{definition}[complexity of a family of points in a rationally presented metric space] \label{217} ~

\noindent 
Consider a discrete preset $Z$ (this is the set of indices of the family, it is given as a part of a language $A^{\star}$ over a finite alphabet $A$) and a complete metric space $X$ given in a presentation of class $\ca':~(Y, \delta,\eta)$. 
A function (or family) $f\colon Z \to X$ is said to be of class $\ca$ when we know a map $\varphi\colon Z \times \NN_1 \to Y$ which is of class $\ca$ and which verifies:
\[
d_X(f(z),\eta(\varphi(z,n))) \leq 1/2^n \;{\rm for\, all}\; z \in Z.
\] 
We then say that $\varphi$ is {\em a presentation of class $\ca$ of the family $f(z)_{z\in Z}$ of points of $X$.}
\end{definition}

\begin{examples} \label{218}~

\noindent 
--- When $Z = \NN_1$ and $X = \RR$ the above definition corresponds to the usual notion of ``sequence of real numbers of class $\ca$'' (we also say: ``a $\ca$-sequence in $\RR$''). 

\noindent 
--- The definition of a space rationally presented in class $\ca$ can be reread in the following way. We give: 

\noindent 
\spa -- a $\ca$-part $Y$ of a language $A^{\star}$. 

\noindent 
\spa -- a function $\varphi\colon Y \to X$ such that $\varphi(Y)$ is dense in $X$ and such that the family of real numbers $\; \; Y \times Y\to \RR$, $\; \; (y_1, y_2) \mapsto d_X(\varphi(y_1), \varphi(y_2))$ is of class $\ca$. 
\end{examples}
 
\begin{proposition} \label{219}
Let $(x_n)$ be a sequence of class $\ca$ (the index set is $\NN_1$) in a rationally presented metric space $(X,d)$. If the sequence is explicitly Cauchy with the inequality $d(x_n, x_{n+1}) \leq 1/2^n$ then the limit of the sequence is a point of class $\ca$ in $X$.
\end{proposition}

\begin{proof} Let $(Y, \delta, \eta)$ be a rational representation of $(X,d)$ and $x$ be the limit of the sequence $(x_n)$.
The sequence $(x_n)$ is of class $\ca$ in $X$, so there exists a function $\psi\colon \NN_1 \times \NN_1 \to Y$ of class $\ca$ such that: 
\[
d(x_n,\psi(n,m)) \leq 1/2^m \; \;{\rm for\; all}\; n, m \in \NN_1.
\]
Let $z_n = \psi(n+1,n+1)$,  this is a sequence of class $\ca$ and
\[
d(x,z_n) \leq d(x,x_{n+1}) + d(x_{n+1},\psi(n+1,n+1)) \leq 1/2^{n+1} +
1/2^{n+1} = 1/2^n.
\]
So $x$ is a $\ca$-point in $X$. 
\end{proof}

\begin{remark} \label{2110}
If we slow down the speed of convergence of the Cauchy sequence sufficiently, we can obtain as the limit point of a sequence of class $\DTI (n^2)$ an arbitrary recursive point of $X$ (cf.\ \cite{KF82} for the space $[0,1]$).
\end{remark} 

\mni
{\bf Definition \ref{217}bis }
{\em (complexity of a family of points in a metric space, more explicit version) }

\noindent 
Consider a discrete preset $Z$ (a part of a language $A^{\star}$) and a complete metric space $X$ given in a presentation of class $\ca': (Y,\delta,\eta).$ 
A family $ f\colon Z \to X$ is said to be of class $\ca$ if we have a function $ \varphi\colon Z \times \NN_1 \to Y$ of class $\ca$ which verifies
$
\delta(\varphi(z,n),\varphi(z,n+1),n+1) \leq 1/2^n 
$
and $f(z)=\lim_{n\to \infty}\eta(\varphi(z,n))$  for all  $z \in Z$.
%--- end-defbis---------------------------

\subsection{Complexity of uniformly continuous maps} \label{subsec22}

We begin by giving a ``reasonable'' definition, which will be justified by the examples and propositions that follow.

\begin{definition}[complexity of uniformly continuous maps between rationally presented metric spaces] \label{221}
Consider two complete metric spaces $X_1$ and $X_2$ given in presentations of class $\ca'$: 
$(Y_1,\delta_1,\eta_1)$ and $(Y_2,\delta_2,\eta_2)$. 
Let $f\colon X_1 \to X_2$ be a uniformly continuous map and $\mu\colon \NN_1 \to \NN_1$ be a sequence of integers.

\noindent 
We will say that $\mu$ is {\em a modulus of uniform continuity for the map $f$} if we have: 
\[
d_{X_1}(x,y) \leq 1/2^{\mu(n)} \Rightarrow d_{X_2}(f(x),f(y)) \leq
1/2^n \;{\rm for\, all}\; x, y \in X_1 \;{\rm and}\; n \in \NN_1
\]
We will say that the function $f$ is {\em uniformly of class} $\ca$ (for the considered presentations) when

\noindent 
--- it has a modulus of uniform continuity $\mu\colon \NN_1 \to \NN_1$ in the class $\ca$.

\noindent 
--- the restriction of $f$ to $Y_1$ is in the class $\ca$ in the sense of Definition \ref{217}, i.e.\ it is presented by a function $\varphi\colon\NN_1 \times Y_1 \to Y_2 $ which is in the class $\ca$ and which verifies:
\[
d_{X_2}(f(y),\eta_2(\varphi(y,n))) \leq 1/2^n \; {\rm for\, all}\;  y \in 
Y_1.
\]	
When $X_1 = X_2 =X$ the map $\Id_X$ has $\Id_{\NN_1}$ as its modulus of uniform continuity. If the two maps~$\Id_X$ (from $X_1$ to $X_2$ and from $X_2$ to $X_1$) are in the class $\ca$ we will say that {\em the two presentations are (uniformly) $\ca$-equivalent}.
\end{definition}

\begin{remarks} \label{222}~

\noindent 
1) We are not asking that, for $n$ fixed, the function $y \mapsto\varphi(y,n)$ be uniformly continuous on $Y_1$ or even that it be continuous at every point of $Y_1$.

\noindent 
2) Note that the definition here gives a modulus of uniform continuity corresponding (very nearly) to the definition given in  the classical approximation theory. A modulus of uniform continuity is there a nondecreasing sequence of integers 
$\NN\to\ZZ: n \mapsto \nu(n)$ which tends to $+\infty$ and verifies the following implication.
\[
d_{X_1}(x,y) \leq 1/2^n \Rightarrow d_{X_2}(f(x),f(y)) \leq 1/2^{\nu(n)}
\]
The function $\nu$ is a kind of ``reciprocal'' of the function $\mu$.
\end{remarks}

\begin{examples}\label{223}~

\noindent 
1) When $X_1 = [0,1]$, $X_2 = \RR$ and $\ca$ is an \emph{elementarily stable} class of complexity in time or space, the above definition is equivalent to the usual notion of a real function computable in the class $\ca$ (cf.\ \cite{KF82}, \cite{Ko91}), as we will prove in detail in Proposition~\ref{415}. 

\noindent 
2) When $X_1$ is a discrete metric space, Definition~\ref{221} gives back  Definition~\ref{217}. 
\end{examples}

Definition \ref{221} makes the notion of complexity accessible for uniformly continuous maps. It therefore deals with all continuous maps in the case where the initial space is compact. 
Remember that in constructive analysis, in the case of a compact space, continuity is defined as meaning uniform continuity (cf.\ \cite{Bi}) and not pointwise continuity. 

\begin{remark}\label{224} 
The control of continuity given by the modulus of uniform continuity is essential in Definition \ref{221}. For example, we can define a function $\varphi\colon [0,1] \to \RR$ which is continuous in the classical sense, whose restriction to $\DD_{[0,1]} = \DD\cap [0,1]$ is $\LINT$ but which does not have a recursive modulus of uniform continuity. For this we consider a function $\theta\colon \NN \to \NN$ of class $\LINT$ that is injective and has non-recursive range. For each $m \in \NN_1$ we consider $n = \theta(m)\; , a_n = 1/(3.2^n)$ and we define $\psi_m\colon [0,1] \to\RR$ everywhere zero except on an interval centred in $a_n$ on which the graph of $\psi_m$ makes a peak of height $1/2^n$ with a slope equal to $1/2^m$. 
Finally, we define $\varphi$ as the sum of the series $\sum_m \psi_m$. Although the sequence $\varphi(a_n)$ is not a recursive sequence of real numbers (which implies that $\varphi$ cannot have a recursive modulus of uniform continuity), the restriction of $\varphi$ to dyadic numbers is very easy to calculate (the disputed real numbers $a_n$ are not dyadic). 
This example clearly shows that {\em the classical definition of continuity (continuity at any point) does not give access to the calculation of the values of the function from its restriction to a dense part of the initial space}.
\end{remark}

\begin{remark}\label{225}
In \cite{KF82} it is ``proved'' that if a functional defined via an Oracle Turing Machine (OTM) computes a function from $[0,1]$ to $\RR$, then the function has a recursive modulus of uniform continuity. If we avoid all recourse to non-constructive principles (hidden in the Heine-Borel theorem), the proof of \cite{KF82} can be easily transformed into a constructive proof of the following theorem: 
\emph{if a function $f:[0,1] \to \RR$ is uniformly continuous and computable by an OTM then its modulus of uniform continuity is recursive}.

\noindent 
On the other hand, if we make the (by no means implausible) assumption that every oracle in~a TM is provided by a mechanical (but unknown) process, it is possible to define ``pathological'' functions from $[0,1]$ into $\RR$ by means of OTMs: these are functions that are continuous at any recursive real point but not uniformly continuous. 
This is based on the ``singular tree of Kleene'': an infinite recursive binary tree which has no infinite recursive branch. Cf.\ \cite{Be}, theorem from Section 7 of Chapter 4, page 70 where we are given a function $t(x)$ which is continuous at any recursive real point on $[0,1]$, but which is not bounded (hence not uniformly continuous) on this interval.

\noindent 
It seems strange that in a proof concerning computability issues, one can use without even mentioning it the hypothesis that the oracles of an OTM behave antagonistically with Church's Thesis (at least in the form in which it is admitted in Russian constructivism).
\end{remark}

We can easily verify that Definition \ref{221} can be translated into the following more explicit form. 

%--- defbis{221bis}--------------------
\mni
{\bf Definition \ref{221}bis}
{\em (complexity of uniformly continuous functions between rationally presented metric spaces, more explicit form).}
Consider two complete metric spaces $X_1$ and $X_2$ given in presentations of class $\ca'$,  $(Y_1,\delta_1,\eta_1)$ and $(Y_2,\delta_2,\eta_2). $ A uniformly continuous function $f\colon X_1 \to X_2 $ is said to be {\em uniformly of class $\ca$} (for the considered presentations) when it is presented by means of two data 

\noindent 
--- the restriction of $f$ to $Y_1$ is presented by a function $\varphi\colon Y_1\times \NN_1 \to Y_2$ which is of class $\ca$ and which verifies 
\[
\delta_2(\varphi(y,n),\varphi(y,n+1),n+1) \leq 1/2^n \; \rm{for \; all} \; 
y \in Y_1,
\]
with $f(y)=\lim_{n\to \infty}\eta_2(\varphi(y,n))$.

\noindent 
--- a sequence $\mu\colon \NN_1 \to \NN_1$ in the class $\ca$ satisfying: for all $x$ and $y$ in $Y_1$
\[
\delta_1(x,y,\mu(n))\le 1/2^{\mu(n)} \; \Rightarrow\; \delta_2(\varphi(x,n+2),\varphi(y,n+2),n+2) \leq 1/2^n.
\]
%--- end-defbis---------------------------

\medskip
The following results are easy to establish.

\begin{proposition} \label{226}
The composite of two maps uniformly of class $\ca$ is a map uniformly of class~$\ca$. 
\end{proposition}

\begin{proposition} \label{227}
The image of a point (respectively of a family of points) of class $\ca$ by a map uniformly of class $\ca$ is a point (respectively of a family of points) of class $\ca$. 
\end{proposition}

\begin{remark} \label{228}
Consider two rational presentations of the same complete metric space $X$ given by the two families of rational points $(\wi{y})_{y \in Y}$ and $(\wi{z})_{z \in Z}$ respectively. If the first family is $\LINT $ for the first presentation, it can naturally be of greater complexity for the second. \\
In general, {\em to say that the identity of $X$ is uniformly of class $\ca$ when we go from the first to the second presentation is exactly the same as saying that the family $(\wi{y})_{y \in Y}$ is a $\ca$-family of points for the second presentation}. \\
Thus the two presentations are $\ca$-equivalent if and only if the family $(\wi{y})_{y \in Y}$ is a family of class $\ca$ in the second presentation and $(\wi{z})_{z \in Z}$ is a family of class $\ca$ in the first. 
Proposition~\ref{227} allows us to formulate an analogous and more intrinsic result: {\em two rational presentations of the same complete metric space are $\ca$-equivalent if and only if they define the same families of points of class $\ca$}.
\end{remark}

We now turn to the definition of complexity for a family of uniformly continuous maps (with a discrete set of indices).

\begin{definition}[complexity of a family of uniformly continuous maps between rationally presented metric spaces] \label{229} 
Consider a discrete preset $Z$ (this is the set of indices of the family, it is given as a part of a language $A^{\star}$ over a finite alphabet $A$) and two complete metric spaces $X_1$ and $X_2$ given in 
$\ca'$-presentations: $(Y_1,\delta_1,\eta_1)$ and $(Y_2,\delta_2,\eta_2)$.

\noindent 
We denote by $\U(X_1,X_2)$ the set of uniformly continuous maps from $X_1$ into $X_2$. A family of uniformly continuous maps $\wi{f}: Z \to \U(X_1,X_2)$ is said to be {\em uniformly of class $\ca$} (for the considered presentations) when

\noindent 
--- the family has a modulus of uniform continuity $\mu\colon Z \times \NN_1 \to\NN_1$ in class $\ca$ : the function $\mu$ must satisfy 
\[
\forall n \in \NN_1\;\forall x,
y \in X_1 \;\; \; \; \big(d_{X_1}(x,y) \leq 1/2^{\mu(f,n)} \Rightarrow 
d_{X_2}(\wi{f}(x),\wi{f}(y)) \leq 1/2^n \big)
\] 
--- the family $(f,x) \mapsto \wi{f}(x)\colon Z \times X_2 \to
X_2$ is a family of points in $X_2$ of class $\ca$ in the sense of  Definition~\ref{217}, i.e.\ it is presented by a map $\varphi: Z \times Y_1 \times \NN_1 \to Y_2$ which is of class $\ca$ and which verifies:
\[
d_{X_2}\big(\wi{f}(x),\varphi(f,x,n)\big) \leq 1/2^n \; {\rm for\, all} \; (f, x, n) \in Z \times Y_1 \times \NN_.
\]
\end{definition}

\begin{remark} \label{2210}
The notion defined in 2.2.9 is natural because it is the relativisation to the class~$\ca$ of the constructive notion of a family of uniformly continuous maps. 
But this natural notion does not seem to be deducible from Definition \ref{221} by providing $Z \times X_1$ with a suitable structure of rationally presented metric space and by requiring that the map $(f,x) \mapsto \wi{f}(x)\colon Z \times X_2 \to X_2$ be uniformly of class $\ca$. If, for example, we take on $Z \times X_1$ the metric deduced from the discrete metric of $Z$ and the metric of $X_1$ we will obtain the second of the conditions of Definition \ref{229} but the first will be replaced by the requirement that all the maps of the family have the same modulus of uniform continuity of class $\ca$. In other words, the family should be uniformly equicontinuous. This condition is intuitively too strong.  Propositions \ref{2211} and \ref{2212} which follow are a confirmation that Definition \ref{229} is suitable.
\end{remark}

Propositions \ref{226} and \ref{227} generalise to the case of families of maps. The proofs present no difficulty.

\begin{proposition} \label{2211}
Let $X_1$ and $X_2$ be two rationally presented complete metric spaces. Let $\big(\wi{f}\,\big)_{f \in Z}$ be a family in $\U(X_1,X_2)$ uniformly of class $\ca$ and $(x_n)_{n \in \NN_1}$ be a family of class $\ca$ in $X_1$.

\noindent 
Then the family $(\wi{f}(x_n))_{(f,n) \in Z \times \NN_1}$ is a family of class $\ca$ in $X_2$.
\end{proposition}

\begin{proposition} \label{2212}
Let $X_1$, $X_2$ and $X_3$ be three rationally presented complete metric spaces. Let $\big(\wi{f}\,\big)_{f \in Z}$ be a family in $\U(X_1,X_2)$ uniformly of class $\ca$ and $(\wi{g})_{g \in Z'}$ be a family in $\U(X_2,X_3)$ uniformly of class $\ca$.  
Then the family $(\wi{f} \circ \wi{g})_{(f,g) \in Z \times Z'}$ in $\U(X_1,X_3)$ is uniformly of class $\ca$.
\end{proposition}

\subsection{Complexity of locally uniformly continuous maps} \label{subsec23}

The notion of complexity defined in the previous paragraph for uniformly continuous maps is entirely legitimate when the domain space is compact. 
In the case of a locally compact space in the sense of Bishop,\footnote{This means that every bounded subset is contained in a compact space \cite{BB}.} the  maps which are uniformly continuous on every bounded subset (from the classical point of view this is a theorem, from the constructive point of view it is a definition). This leads to the  following natural notion of complexity.

\begin{definition} \label{231}
Consider two complete metric spaces $X_1$ and $X_2$ given in presentations of class $\ca'$: $(Y_1,\delta_1,\eta_1)$ and $(Y_2,\delta_2,\eta_2).$ We assume that we have specified a point $x_0$ of $X_1$ and a point $y_0$ of~$X_2$. A map $f: X_1 \to X_2$ is said to be {\em locally uniformly continuous} if it is uniformly continuous and bounded on any bounded part.

\noindent 
It is said to be {\em locally uniformly of class $\ca$} (for the considered presentations) when

\noindent 
--- it has a bound computable in class $\ca$ on any bounded part, i.e.\ a $\ca$-sequence $\beta\colon \NN_1 \to \NN_1$ satisfying, for all $x$ in $X_1$ and all $m$ in $\NN_1$: 
\[
d_{X_1}(x_0,x) \leq 1/2^n \Rightarrow d_{X_2}(y_0,f(x)) \leq 1/2^{\beta(n)};
\]
--- it has in the class $\ca$ a modulus of uniform continuity on all bounded subsets, i.e.\ a $\ca$-map $\mu\colon \NN_1 \times \NN_1 \to \NN_1$ verifying, for $x, z$ in $X_1$ and $n, m$ in $\NN_1$: 
\[
\left( d_{X_1}(x_0,x) \leq 1/2^m, \; d_{X_1}(x_0,z) \leq 1/2^m, \; d_{X_1}(x,z) \leq 1/2^{\mu(m,n)}\right) \; \Rightarrow\; d_{X_2}(f(x),f(z)) \leq 1/2^n;
\] 
--- the restriction of $f$ to $Y_1$ is in class $\ca$ in the sense of Definition \ref{217}, i.e.\ it is presented by a $\ca$-map $\varphi:\NN_1 \times Y_1 \to Y_2 $ which verifies:
\[
d_{X_2}(f(y),\varphi(y,n)) \leq 1/2^n \;{\rm{for all}} \; y \in Y_1.
\]
\end{definition}
 
Note that the concept defined above does not depend on the choice of points
$x_0$ and $y_0$.
\begin{examples} \label{232}~

\noindent 
--- When $X_1 = \RR$ and $X_2 = \RR$ the above definition is equivalent to the natural notion of a real function computable in the class $\ca$ as found in \cite{Ho90} and \cite{Ko91}.

\noindent 
--- The function $x \mapsto x^2$ is locally uniformly continuous of class $\QL$ but it is not uniformly continuous on $\RR$.
\end{examples}

\begin{remarks}\label{233} ~

\noindent 
1) When $f$ is a uniformly continuous function, Definition \ref{231} and Definition \ref{221} are very similar. However, Definition \ref{221} is a priori more restrictive. Indeed, if $\mu(n)$ is a modulus of uniform continuity in Definition \ref{221}, then we can take in Definition \ref{231} $\mu'(m,n) = \mu(n)$. 
But conversely, suppose we have a modulus of uniform continuity on any bounded subset verifying $\mu'(m,n) = \inf(m, 2^n)$ then, the function is uniformly continuous but the best modulus of uniform continuity that we can deduce~is 
\[
\mu(n) = {\bf Sup} \left\{ \mu'(m,n): m \in \NN \right\} = 2^n
\]
and it has an exponential growth rate whereas $\mu'(m,n)$ is linear. Thus the function $f$ can be of linear complexity as a locally uniformly continuous function, and of exponential complexity as~a uniformly continuous function. 
The two definitions are equivalent if the space $X_1$ has a finite diameter.


\noindent 
2) In constructive analysis, a compact space is a precompact and complete space. It is not possible to prove constructively that any closed part of a compact space is compact. A (uniformly) locally compact space is a complete metric space in which every bounded subset is contained in~a compact~$K_n$, where the sequence $(K_n)$ is an nondecreasing sequence given once and for all (for example, the compact $K_n$ contains the ball $B(x_0, 2^n)$). A function defined on such a space is then said to be continuous if it is uniformly continuous on all bounded subsets. In particular, it is bounded on any bounded subset. In this case, Definition \ref{231} gives an ``algorithmic complexity'' version of the constructive definition of continuity.


\noindent 
3) Proposition \ref{226} about the composition of functions uniformly of class $\ca$ remains valid for functions locally uniformly of class $\ca$. Proposition \ref{227} is also valid.
\end{remarks}


\subsection{A general approach to the complexity of continuous functions} 
\label{subsec24}
 
The question of the complexity of continuous functions has clearly not been exhausted. 
As we have already pointed out, while it is true that a continuous function $f(x)$ is classically well known from a presentation $(y, n) \mapsto \varphi(y,n)$ which allows it to be computed with arbitrary precision on a dense part $Y$ of $X$, the complexity of $\varphi$ can only be considered a pale reflection of the complexity of $f$ (cf.\ remarks \ref{224} and \ref{233}(1)).
A crucial question, little studied until now, is to what extent we can certify that such a $\varphi$ datum corresponds to a continuous function $f$. If the answer is in the affirmative, we need to explain the procedure for calculating approximate values of~$f(x)$ when~$x$ is an arbitrary point of $X$ (given, for example, by a Cauchy sequence of rational points of the presentation in the case of a rationally presented metric space).

\noindent 
We propose a somewhat informal approach to this question.
Let $\phi\colon X_1 \to X_2$ be a map between metric spaces and $(F_{\alpha})_{\alpha \in M}$ a family of subsets of $X_1$. \emph{A modulus of uniform continuity for $\phi$ near each subset $F_{\alpha}$} is by definition a map $\mu \colon M \times \NN_1 \to \NN_1$ verifying:	
\[ 
\forall \alpha \in M \; \forall x \in F_{\alpha} \; \forall x'\in X_1\; \; \; \left(d_{X_1}(x,x') 
\leq 1/2^{\mu(\alpha,n)} \Rightarrow d_{X_2}(\phi(x),\phi(x'))
 \leq 1/2^n \right).
\]
 
\begin{definition}[general but somewhat informal definition of what a continuous function is and what its complexity is]\label{241}

Consider two complete metric spaces $X_1$ and $X_2$ given in rational presentations of class $\ca'$: $(Y_1,\delta_1,\eta_1)$ and $(Y_2,\delta_2,\eta_2)$. We assume that we have specified a $y_0\in X_2$.
Suppose we have defined a family $F_{X_1} = (F_{\alpha})_{\alpha \in M}$ of parts of $X_1$ with the following property:

\noindent 
--- (2.4.1.1) every compact of $X_1$ is contained in some $F_{\alpha}$. 


\noindent 
We will say that a map $\phi: X_1 \to X_2$ is {\em $F_{X_1}$-uniformly continuous} if it is bounded on each part $F_{\alpha}$ and if it has a modulus of uniform continuity near each subset $F_{\alpha}$.

\noindent 
Suppose now in addition that the family $(F_{\alpha})_{\alpha \in M}$ has the following property:

\noindent 
--- (2.4.1.2) the set of indices $M$ has a certain computability structure.

\noindent 
We will say that a map $\phi: X_1 \to X_2$ is \emph{$F_{X_1}$-uniformly continuous of class $\ca$} if it verifies the following properties:

\noindent 
--- a bound on each part $F_{\alpha}$ can be calculated as a map $ \beta\colon M \to \NN_1$ in class $\ca$ verifying  
\[
\forall \alpha \in M \; \forall x \in F_{\alpha} \; \;
 d_{X_2}(y_0, \phi (x)) \leq 2^{\beta(\alpha)};
\] 
--- a modulus of uniform continuity near to $F_{\alpha}$ can be calculated in the class $\ca$: a $\ca$-map $\mu\colon M \times \NN_1 \to \NN_1$  satisfying
\[
\forall \alpha \in M \; \forall x \in F_\alpha\; \forall x' \in X_1\;\;  \left(d_{X_1}(x,x') \leq 1/2^{\mu(\alpha,n)} \Rightarrow d_{X_2}(\phi(x),\phi(x')) \leq 1/2^n \right).
\]
--- the restriction of $\phi$ to $Y_1$ is $\ca$-computable.
\end{definition}

This is clearly an extension of Definitions \ref{221} and \ref{231}.
The informal nature of the definition is obviously due to the ``computability structure'' of $M$.
A priori we would like to take for $(F_{\alpha})_{\alpha \in M}$ a family of parts sufficiently simple to verify condition (2.4.1.2) and sufficiently large to verify condition (2.4.1.1).
But these two conditions pull in opposite directions.

Note that Definition \ref{241} is inspired by the notion of a continuous map defined by D.~Bridges in  \cite[Constructive functional analysis]{Br}.

\subsection {Open and closed subspaces} \label{subsec25}

We turn to the definition of a computability structure for an open subspace $U$ of a metric space~$X$ given with a computability structure. In general, the metric induced by $X$ on $U$ cannot satisfy us because the resulting space is generally not complete. Nevertheless, we have a construction that works in an important special case.

Let $X$ be a complete metric space and $f: X \to \RR$ a locally uniformly continuous map. The open $U_f = \{x \in X: f(x) > 0 \}$ is a complete metric space for the distance $d_f$ defined by 
\[
d_f(x,y) = d_X(x,y) + \abs{1/f(x) - 1/f(y)}.
\]

\begin{propdef} \label{251}
Let $X$ be a complete metric space given with a $\ca$-presentation $(Y, \delta, \eta)$, and $f: X \to \RR$ a locally uniformly  $\ca$-map represented by a modulus of uniform continuity and a discrete $\ca$-map,
$ \varphi\colon Y \times \NN_1 \to \DD$. Then the complete metric space $(U_f, d_f)$ can be provided with a $\ca$-presentation where the set of rational points is coded by the set $Y_U$ of pairs $(y,n)$ of $Y \times \NN_1$ satisfying: 
\[
n \geq 10 \; \; {\rm and} \; \; \varphi(y,n) \geq 1/2^{n/8}.
\]
\end{propdef}
\begin{proof} A detailed proof is given in \cite{Mo}. 
\end{proof}


We now turn to the definition of a computability structure for a closed subspace $F$ of a metric space $X$ with a computability structure. In constructive analysis, a closed subset is only really useful when it is \emph{located}, i.e.\ when the function $D_F$ ``distance to the closed subset $F$'' is computable. When translating this notion into terms of recursive computability or complexity, we must take care that in the constructive definition, the fact that the function $D_F$ is the function ``distance to the closed subset $F$'' must also be made explicit.

\begin{definition} \label{252}
Consider a complete metric space $X$ given by a $\ca$-presentation $(Y, \delta, \eta)$. 
A part~$F$ of $X$ is called a \emph{$\ca$-located closed subset of $X$} if:
\begin{itemize}
%
\item [i)] the function $D_F\colon x \mapsto d_X(x,F)$ from $X$ to $\R^{\geq 0}$ is $\ca$-computable,
%
\item [ii)] there exists a $\ca$-function  $P_F\colon Y \times \NN_1\to X$ which certifies the function $D_F$ in the following sense: 
for all $(y,n) \in Y \times \NN_1$,
\[
D_F(P_F(y,n)) = 0,\; \; \; \; d_X(y,P_F(y,n)) \leq D_F(y) + 1/2^n.
\] 
\end{itemize}
\end{definition}

\begin{remarks} \label{253}~

\noindent 
1) The function $P_F(y,n)$ calculates an element of $F$ whose distance from $y$ is close enough to $D_F(y)$. However, the function $P_F(y,n)$ does not in general define, by extension by continuity to~$X$ and by passage to the limit when $n$ tends to $\infty$, a projector on the closed subset $F$. 

\noindent 
2) We can show that the points $P_F(y,n)$ (coded by the pairs $(y,n) \in Y \times \NN_1$) form a dense countable part of $F$ which is the set of rational points of a $\ca$-presentation of $F$ (cf.\ \cite{Mo}).
\end{remarks}


\subsection{Rationally presented Banach spaces}\label{subsec26}

We give a minimal definition. It goes without saying that for each particular Banach space, notions of complexity naturally attached to the space under consideration may be taken into account in addition to obtain a truly reasonable notion. 

\begin{definition}[rational presentation of a Banach space] \label{261} 
A rational presentation of a separable Banach space $X$ over the field $\KK$ ($\RR$ or $\cit$) will be said to be of class $\ca$ if, on the one hand, it is of class $\ca$ as a presentation of the metric space and, on the other hand, the following vector space operations are in class $\ca$

\noindent 
--- the product by a scalar,

\noindent 
--- the sum of a list of vectors chosen from the rational points.

\end{definition}

In the context of the field $\CC$ we will denote by $\DD_\KK$ the set of complex numbers whose real and imaginary parts are in $\DD$. In the real context $\DD_\KK$ will only be another denomination of $\DD$.

\noindent 
The following proposition is not difficult to establish. 

\begin{proposition} \label{262}
To give a rational presentation of class $\ca$ of a Banach space $X$ in the sense of the definition above is equivalent to giving  

\noindent 
--- an encoding of class $\ca$ for a countable part $G$ of $X$ which generates $X$ as a Banach space,\footnote{We can suppose that all the elements of $G$ are vectors of norm between 1/2 and 1.}

\noindent 
--- a map $\nu\colon \lst(\DD_{\KK} \times G) \times \NN_1 \to \DD$ which is in the class $\ca$ (for the considered encoding of $G$) and which calculates the norm of a linear combination of elements of $G$ in the following sense:

\noindent 	
for all $\big([(x_1,g_1),(x_2,g_2),\ldots,(x_n,g_n)],m\big)$ in $\lst(\DD_{\KK} \times G) \times \NN_1$, we have the inequality
\[
\Abs{\;\nu\big([(x_1,g_1),(x_2,g_2),\ldots,(x_n,g_n)],m\big) - \Norme{ x_1.g_1 + x_2.g_2 +\cdots.+ x_n.g_n }_X \; }\; \leq 1/2^m.
\]
\end{proposition}

\begin{remarks}\label{263}~

\noindent 
1) As for Definition \ref{211} (cf.\ remark \ref{212} (3)), it may be that the certificate of inclusion of $G$ in~$X$ implies a notion of complexity, which it will be inevitable to take into account in a more precise definition, on a case-by-case basis.

\noindent 
2) The spaces $L^p(\RR)$ of functional analysis, with $1 \leq p < \infty$ can be rationally presented in different ways, according to different possible choices for the set of rational points and an encoding of this set. All reasonable choices turn out to give $\Prim$-equivalent presentations. 

\noindent 
3) It would be interesting to know whether the framework proposed by M. Pour El and I. Richards \cite{PR} concerning computability in Banach spaces can have concrete consequences which would go beyond what can be treated by rational presentations (which offer a natural framework not only for recursion problems but also for complexity problems). The ``counter example'' concerning $L^\infty$ given in \cite{PR} suggests the opposite. 
\end{remarks}

\section[Continuous real functions on a compact interval \ldots]{Space of continuous real functions on a compact interval, first properties}\label{sec3}

In this section, we introduce the problem of rational presentations for the space $\czu$: the space of uniformly continuous real functions on the interval [0,1], given the usual norm:
\[
\norme{f}_{\infty} = {\bf Sup} \{ \abs{f(x)} ; 0 \leq x \leq 1 \}.
\] 
Consider a rational presentation of the space $\czu$ given by a family $\big(\wi{f}\,\big)_{f \in Y}$ of uniformly continuous functions indexed by a part $Y$ of a language $A^{\star}$. We are interested in the following complexity problems:

\noindent 
--- the complexity of the set of (codes of) rational points of the presentation, i.e.\ more precisely the complexity of $Y$ as a part of the language $A^{\star}$ (i.e.\ the complexity of the membership test);

\noindent 
--- the complexity of vector space operations (the product by a scalar on the one hand, the sum of a list of vectors on the other);

\noindent 
--- the complexity of calculating the norm (or distance function);

\noindent 
--- the complexity of the set $\big(\wi{f}\,\big)_{f \in Y}$ of rational points of the presentation, as a family of uniformly continuous functions on $[0,1]$;

\noindent 
--- the complexity of the evaluation function $\Ev\colon \czu \times [0,1] \to \RR$: $ (g,x) \mapsto g(x)$.

\noindent 
It goes without saying that the interval $[0,1]$ can be replaced by another interval $[a,b]$ with $a$ and~$b$ in $\DD$ or of low complexity in $\RR$. 

\subsection{Definition of a rational presentation of the space of continuous functions}\label{subsec31}
 
The complexity of the set $\big(\wi{f}\,\big)_{f \in Y}$ of rational points of the presentation, as a family of uniformly continuous functions on $[0,1]$ is nothing other than the complexity of the map $f \mapsto \wi{f}$ from the set of codes of rational points $Y$ to the space $\czu$. 
We must therefore, in accordance with what we said in remark \ref{212}(3), include in the definition of what is a rational presentation of class $\ca$ of $\czu$, the fact that $\big(\wi{f}\,\big)_{f \in Y}$ is a family uniformly of class $\ca$ in the sense of Definition \ref{229}.
The problem of the complexity of the evaluation function is also an important one, since it would be ``immoral'' for the evaluation function not to be a function of class $\ca$ when we have a rational presentation of class $\ca$. 
However, the evaluation function is not uniformly continuous, nor even locally uniformly continuous.

\noindent 
To deal in general with the question of functions which are continuous but not locally uniformly continuous on the space $\czu$ we use the informal Definition \ref{241} with the following family of parts of $\czu$: 

\begin{notation} \label{311}
If $\alpha$ is a nondecreasing function from $\NN_1$ to $\NN_1$ and $r \in \NN_1$, we denote by $F_{\alpha,r}$ the part of $\czu$ formed by all the functions which, on the one hand, accept $\alpha$ as a modulus of uniform continuity, and on the other hand have their norm bounded by $2^r$.
\end{notation}

The ``calculability structure'' on the set of indices 
\[
M := \{(\alpha,r); \; \alpha \; \hbox{is a non-decreasing function} \; \NN_1\to\NN_1 \;{\rm and}\;r\in\NN_1\}
\]
is not a well-defined thing in the literature, but we will only need to resort to perfectly elementary operations such as ``evaluating $\alpha$ on an integer $n$''.\footnote{Note that the classical Ascoli theorem states that every compact part of $\czu$ is contained in a part $F_{\alpha,r}$, and that the parts $F_{\alpha,r}$ are compact. In constructive mathematics the direct part is still valid, but the second part of the statement needs to be refined, cf.\ \cite{BB} Chapter 4 Theorem 4.8, pages 96 to 98.}
The modulus of uniform continuity for the evaluation function is then ``very simple'' (uniformly linear for any reasonable definition of this notion).

\noindent 
Indeed, near the part $F_{\alpha , r} \times [0,1]$ of $\czu \times [0,1]$ a modulus of uniform continuity for the function $\Ev$ is given by 
\[
\mu(n,\alpha,r) = \max (\alpha(n+1),n+1) \; {\rm for} \; n \in \NN_1 \; {\rm and} \; (\alpha,r) \in M,
\] 
as is very easy to check. And the bound on $F_{\alpha ,r}$ is obviously given by $\beta(\alpha,r) = r$.

\noindent 
The whole question of the complexity of the evaluation function in a given presentation is therefore concentrated on the question of the complexity of the evaluation function restricted to the set of rational points 
\[
(f,x) \mapsto \wi{f}(x)\qquad  Y \times \DD_{[0,1]} \to \RR.
\]
Now this complexity is subordinate to that of $\big(\wi{f}\,\big)_{f \in Y}$ as a family of uniformly continuous functions: this is what we specify in the following proposition (the proof of which is immediate).

\begin{proposition} \label{312}
Let us consider on the space $\czu$ the family of parts $(F_{\alpha,r})_{(\alpha,r) \in M}$ in order to control questions of continuity on $\czu$ (cf.\ notation \ref{311} and Definition \ref{241}).

\noindent 
Then if $\big(\wi{f}\,\big)_{f \in Y}$ is a family uniformly of class $\ca$ and if we consider the rational presentation of the metric space $\czu$ attached to this  family when we see it as the set of rational points of the presentation, the evaluation function 
\[
\Ev\colon \czu \times [0,1] \to \RR\colon (g,x) \mapsto g(x)
\]
is itself of class $\ca$.
\end{proposition}

As we also require that the Banach space structure itself be of class $\ca$, this finally gives us the following definition.

\begin{definition}\label{313}
A rational presentation of class $\ca$ of the space $\czu$ is given by a family of functions $\big(\wi{f}\,\big)_{f \in Y}$ which is a family uniformly of class $\ca$, dense in $\czu$ and such that the following calculations are also in class $\ca$:


\noindent 
--- the product by a scalar,

\noindent 
--- the sum of a list of functions chosen from the rational points,

\noindent 
--- the calculation of the norm.
\end{definition}

In what follows, we shall be interested in a precise study of the complexities involved in Definition \ref{313}. Our conclusion is that there is no paradise in polynomial time for continuous functions, at least if $\p \not= \np$. 

\subsection{Two significant examples of rational presentations of the space \texorpdfstring{$\czu$}{C[0,1]}}\label{subsec32}

We now give two significant examples of presentations of $\czu$ (other examples will be given later).

\subsubsection{Presentation by binary semilinear circuits} 
\label{subsubsec321} 

This presentation and the set of codes for rational points will be noted $\csl$ and $\ysl$ respectively. We will call {\em a semilinear map with coefficients in $\DD$} a piecewise linear map which is equal to a combination by $\max$ and $\min$ of functions $x \mapsto ax+b$ with $a$ and $b$ in $\DD$.


\begin{definition}
\label{321}
A binary semilinear circuit is a circuit whose input ports are ``real'' variables~$x_i$ (here, only one will suffice because the circuit calculates a function of a single variable) and the two constants 0 and 1. There is only one output port.

\noindent 
Gates that are not input gates are of one of the following types:

\noindent 
--- single-entry gates of the following types: $x \mapsto 2x$, $x \mapsto x/2$, $x \mapsto -x$;

\noindent 
--- two-entry gates of the following types: 
$(x,y) \mapsto x + y$, $(x,y) \mapsto \max(x,y)$, $(x,y) \mapsto \min(x,y)$.

\noindent 
A binary semilinear circuit with a single input variable defines a semilinear map with coefficients in $\DD$. Such a circuit can be encoded by an evaluation program. The set $\ysl$ is the set of (codes of these) semilinear circuits, it is the set of rational points of the presentation $\csl$.
\end{definition}

We shall see later that this presentation is in some way the most natural, but that it fails to be a presentation of class $\p$ because of the calculation of the norm.

\noindent 
We have an easy bound of a Lipschitz modulus for the map defined by the circuit: 
\[
\abs{\wi{f}(x) - \wi{f}(y)}\;  \leq 2^p \abs{ x- y} \; 
{\rm where} \; p \; \hbox{is the depth of the circuit}
\]
This gives the modulus of uniform continuity $\mu(k) = k+n$. In particular, this implies that we need not restrict ourselves to a controlled precision in $\DD_{[0,1]}$ in the following proposition.
 
\begin{proposition}[complexity of the family of functions $\big(\wi{f}\,\big)_{f \in \ysl}$] \label{322} 

\noindent 
The family of functions $\big(\wi{f}\,\big)_{f \in \ysl }$ is uniformly of class $\p$. To be precise, this family has $\mu(f,k) = k+\depth(f)$ as a modulus of uniform continuity and we can provide a function $\varphi\colon \ysl \times \DD_{[0,1]} \times \NN_1 \to \DD_{[0,1]}$ of class $\DRT(\Lin, \Oo(N^2))$ (where $N$ is the size of the input $(f,x,k)$) with 
\[
\forall (f, x, k) \in \ysl \times \DD_{[0,1]} \times \NN_1 \;\abs{\wi{f}(x) - \varphi(f,x,k)}\; \leq 1/2^k.
\]
More precisely still, as it is not necessary to read all the bits of $x$, the size of $x$ does not come into play, and the function $\varphi$ is in the classes $\DRT(\Lin, \Oo(\sz(f)(\depth(f)+k)))$ and $\DSPA(\Oo(\depth(f) (\depth(f)+k)))$.
\end{proposition}

\begin{proof} 
To calculate $\varphi (f,x,k)$ we evaluate the circuit $f$ on the input $x$ for which only the first $k + 2 \depth(f)$ bits are considered, truncating the intermediate result calculated at the $\pi$ gate to  precision $k+2\ \depth(f)-\depth(\pi)$. Finally, only the precision $k$ is kept for the final result.

\noindent 
Such a naively applied method requires us to store all the results obtained at a fixed depth $p$ while we calculate results at depth $p+1$.
We then do $\sz(f)$ elementary calculations 
$(\bullet + \bullet, \bullet - \bullet,\bullet \times 2, \bullet/2, \max(\bullet, \bullet),\min(\bullet, \bullet))$ 
on objects of size $\leq k + 2 \depth(f)$. Each elementary calculation takes  time $\Oo(k+\depth(f))$, and so the global calculation is done in time $\Oo(\sz(f)(\depth(f)+k))$. And it also takes $\Oo(\sz(f)(\depth(f)+k))$ as  calculation space.

\noindent 
There is another method of evaluating a circuit, which is a little less time-consuming but much more economical space-consuming, based on Borodin's idea \cite{Bo}. With such a method we reduce the calculation space which becomes $\Oo(\depth(f)(\depth(f)+k))$.
\end{proof}


\begin{remark}\label{323}
We have not taken into account in our calculation the problem posed by the management of $t = \sz(f)$ objects (here dyadic numbers) of sizes bounded by $s = \depth(f)+k$. In the RAM model this management would a priori be in time $\Oo(t \Lg(t) s)$ which does not significantly increase the $\Oo(t s)$ we have found, and which remains in $\Oo(N^2)$ if we remember that encoding the semilinear circuit by an evaluation program gives it a size of $\Oo(t \Lg(t))$. In the TM model, on the other hand, this management requires a priori time $\Oo(t^2s)$ because the tape where the objects are stored must be traversed $t$ times over a total length $\leq ts$. We have therefore underestimated time to some extent by concentrating on what we consider to be the central problem: estimating the total cost of the arithmetic operations themselves. In the following, we will systematically omit the calculation of the {\em management time} of intermediate values (which is very sensitive to the chosen calculation model) each time we evaluate circuits.
\end{remark}

\subsubsection{Presentation \texorpdfstring{$\crf$}{Crff}
(via controlled rational functions given in formula presentation)} 
\label{subsubsec322}

The previous presentation of the space $\czu$ is not of class $\p$ (unless $\p$ = $\np$ as we shall see in Section 4.3) because the norm is not computable in polynomial time. To obtain a presentation of class $\p$ it is necessary to restrict quite considerably the set of rational points in the presentation, so that the norm becomes computable in polynomial time. A significant example is where the rational points are well-controlled rational functions given in dense presentation.
There are several variants to choose from and we have chosen to give the denominator and numerator in a presentation known as ``by formula''. 
A formula is a tree whose leaves are labelled by the variable~$X$ or by an element of $\DD$ and whose nodes are labelled by an arithmetic operator. 
In the formulae we are considering, the only operators used are $ \bullet + \bullet $, $\bullet - \bullet $ and $\bullet \times \bullet$, so that the tree is a binary tree (each node of the tree is a sub-formula and represents a polynomial of $\DD$[X]). 



\begin{lemma} 
\label{324} Let us denote by $\DD[X]_f$ the set of polynomials with coefficients in $\DD$, given in presentation by formula. For a one-variable polynomial with coefficients in $\DD$ the transition from the dense representation to the representation by formula is $\LINT$ and the transition from the representation by formula to the dense representation is polynomial. More precisely, if we proceed in a naive way, we are in $\DTI (\Oo(N^2{\cal M}(N))$).
\end{lemma}

\begin{proof} First of all, the dense representation can be considered as a special case of representation by formula, according to Horner's scheme.

\noindent 
 Then, moving from the formula representation to the dense representation means evaluating the formula in $\DD[X]$. Let's introduce the following control parameters. A polynomial $P \in \DD[X]$ has a degree denoted by $d_P$ and the size of its coefficients is controlled by the integer $\sigma(P) := \log(\sum_i \abs{a_i})$ where the $a_i$ are the coefficients of $P$. A formula $F \in \DD[X]_f$ contains a number of arithmetic operators denoted by $t_F$ and the size of its coefficients is controlled by the integer $\lambda(F) = \sum_i (\Lg(b_i))$ where the $b_i$ are the dyadics appearing in the formula.

\noindent 
The size $\flo F$ of the formula $F$ is obviously an upper bound of $t_F$ and $\lambda (F)$.

\noindent 
For  $a$ and $b\in\DD$ we always have $\Lg(a \pm b) \leq \Lg(a) + \Lg(b)$ and $ \Lg(ab) \leq \Lg(a)+ \Lg(b)$.

\noindent 
We can then easily check that $\sigma (P \pm Q) \leq \sigma(P) + \sigma(Q)$ and $\sigma (PQ) \leq \sigma (P) + \sigma (Q)$. The (naive) calculation time for $PQ$ is $\Oo(d_Pd_Q {\cal M}(\sigma(P) + \sigma(Q)))$.

\noindent 
We then show by induction on the size of the formula $F$ that the corresponding polynomial $P \in \DD[X]$ satisfies $d_P \leq t_F$ and $\sigma (P) \leq \lambda (F)$. We also show by induction that the time to calculate $P$ from $F$ is bounded by $t_F^2{ \cal M}(\lambda(F))$. 
 \end{proof}


\begin{definition}\label{325}
The set $\yrf \subset \DD[X]_f \times \DD[X]_f$ is the set of rational functions (with one variable) with coefficients in $\DD$, whose denominator is bounded below by $1$ on the interval $[0,1]$. The space $\czu$ provided with the set $\yrf$ as a family of codes of rational points is denoted by $\crf$.
\end{definition} 

\begin{proposition}[complexity of the family of maps $\big(\wi{f}\,\big)_{f \in \yrf }$] \label{326}  
The family of maps $\big(\wi{f}\,\big)_{f \in \yrf }$ is uniformly of class $\p$, more precisely of class $\DRT(\Lin, \Oo({\M}(N)N))$, where $\M(N)$ is the complexity of the multiplication of two integers of size~$N$.
\end{proposition}

\begin{proof} We need to compute a modulus of uniform continuity for the family $\big(\wi{f}\,\big)_{f \in \yrf }$. We must also specify a function $\varphi$  of class $\DRT(\Lin,\Oo(\M(N) N))$.
\[ 
\varphi\colon \yrf \times \DD_{[0,1]} \times \NN_1 \to \DD \; ,\;
(f,x,n) \mapsto \varphi(f,x,n)
\]
satisfying $\abs{\wi{f}(x) - \varphi(f,x,n)}\; \leq 1/2^n$.

\noindent In fact, the modulus of uniform continuity can be deduced from the calculation of $\varphi $.

\noindent 
Since the denominator of the fraction is bounded below by $1$, we only need to give a modulus of uniform continuity and a calculation procedure in time $\Oo(\M(N) N)$ to evaluate a formula $F \in \DD[X]_f$ with a precision of $1/2^n$ on the interval $[0,1]$ ($N = n+ \flo F$). We assume without loss of generality that the size $m = \flo F$ of the formula $F = F_1 * F_2$ is equal to $ m_1+m_2+2$ if $m_1 = \flo{F_1}$ and $m_2 = \flo{F_2}$ ( $*$ designates one of the operators $+,\;-$ or $\times$). 
We then establish (by induction on the depth of the formula) the following two facts:

\noindent 
--- when the formula $F \in \DD[X]_f$ is evaluated exactly at $x \in [0,1]$, the result is always bounded in absolute value by $2^m$, 

\noindent 
--- when we evaluate the formula $F$ in an $x \in [0,1]$ in an approximate way, taking $x$ and all the intermediate results with precision  $1/2^{n+m}$, the final result is guaranteed with precision $1/2^n$. 

\noindent 
We then conclude without difficulty.
\end{proof}

\begin{proposition} \label{327}~

\noindent 
a) The family of real numbers $(\Norme{ \wi{f}})_{f \in \yrf }$ is of complexity $\p$.

\noindent 
b) The membership test ``$\,f \in\yrf\; ?\,$'' is of complexity $\p$.
\end{proposition}

\begin{proof} 
a) Let $f = P/Q \in \yrf $. To calculate an approximate value to within $1/2^n$ of the norm of~$\wi{f}$, proceed as follows:


\noindent 
--- calculate $(P'Q - Q'P)$ as an element of $\DD[X]$ (\lemref{324}),

\noindent 
--- calculate  the precision $m$ 
 required on $x$ to be able to evaluate $\wi{f} (x)$ with precision $1/2^n$ (Proposition \ref{326}),

\noindent 
--- calculate the roots $(\alpha_i)_{1 \leq i \leq n})$ of $(P'Q - Q'P)$ on $[0,1]$ to within $2^{-m}$, 

\noindent 
--- calculate $\max \{\wi{f}(0);\wi{f}(1);\wi{f}(\alpha_i)
 \; 1 \leq i \leq s \}$ with precision $1/2^n$ (Proposition \ref{326}).

\noindent 
b) The code $f$ contains the codes of $P$ and $Q$. The point is to see that we can test in polynomial time that the denominator $Q$ is bounded below by $1$ on the interval $[0,1]$. 
This is a classical result concerning calculations with real algebraic numbers: it is a matter of comparing to $1$ the inf of $Q(\alpha_i)$ with $\alpha_i=0,1$ or a zero of $Q'$ on the interval. 
\end{proof}

\begin{remarks}\label{328}~

\noindent 
1) It is well known that calculating the real roots lying in a given rational interval of a polynomial in  $\ZZ[X]$ is a calculation of class $\p$. 
Perhaps the most efficient method is not the one we have indicated, but a slight variant. The search for the complex roots of a polynomial (for a given precision) is now extremely fast (cf.\ \cite {Pa}). 
Rather than looking specifically for the real zeros on the interval $[0,1]$ we could therefore search with precision $2^{-m}$ for the real or complex zeros $(\beta_j)_{1 \leq j \leq t}$ sufficiently close to the interval $[0,1]$ (i.e.\ their imaginary part is in absolute value $\leq 2^{-m}$ and their real part is on $[0,1]$ to within $2^{-m}$) and evaluate $\wi{f}$ at $\Re(\beta_j)$.

\noindent 
2) As follows from Proposition \ref{335} below, any semilinear function with coefficients in $\DD$ is a point of complexity $\p$ in $\crf$. 
The fact that the presentation $\csl$ is not of class $\p$ (if $\p \neq \np$, cf.\ Section \ref{subsec43}) implies on the other hand that the family of functions $\big(\wi{f}\,\big)_{f \in \ysl }$ is not a family of class~$\p$ in $\crf$.

\noindent 
3) It is easy to show that vector space operations are also in polynomial time. 
\end{remarks}

The previous results are summarised as follows.

\begin{theorem} \label{329}
The presentation $\crf$ of $\czu$ is of class $\p$.
\end{theorem}

\subsection{Newman's approximation theorem and its algorithmic complexity}\label{subsec33}

Newman's theorem is a fundamental theorem in approximation theory. The following statement is a special case.\footnote{We have taken the bound $n^2/2$ on the degrees so as to obtain a bound in $e^{-n}$.}

\begin{theorem}[Newman's theorem, \cite{Ne}, see for example \cite{PP} p. 73--75] \label{331}~

\noindent Let $n$ be an integer $\geq 6$, define
\[
H_n(x) = \prod_{ 1 \leq k < n^2}(x + e^{-k/n}).
\]
and consider the two polynomials $P_n(x)$ and $Q_n(x)$, of degrees  $\leq n^2/2$, given by
\[
P_n(x^2) = x(H_n(x) - H_n(-x)) \; \; {\rm and } \; \; Q_n(x^2) = H_n(x) + H_n(-x)
\]
Then for all $x \in [-1,1]$ we have 
\[
\abS{ \; \abs{x}\; - \;(P_n/Q_n)(x^2) \; } \; \leq 3e^{-n}\; \leq 2^{-(n+1)}
\]
and 
\[
\abS{Q_n(x^2)}\; \geq \;2H_n(0) = 2/e^{(n^3 - n)/2} \;\geq 1/2^{3(n^3 - 
n)/4} 
\]
\end{theorem}

It follows from Newman's theorem that semilinear functions can be individually approximated by rational functions that are easy to write and well controlled. This is made clear by \lemref{333} below and its corollaries, the propositions and theorems that follow. First, we recall the following result (cf.\ \cite{Brent}).

\begin{lemma}[Brent's theorem] \label{332} 
 Let $a \in [-1,1]\cap \DD_m$. The calculation of $\exp(a)$ with precision~$2^{-m}$ can be done in time $\Oo(\M(m)\log(m))$.  
In other words, the exponential function on the interval $[-1,1]$ is of complexity $\DTI(\Oo(\M(m)\log(m)))$ 
\end{lemma}

We can easily deduce the following result, by noting $\DD[X]_f$ the presentation of $\DD[X]$ by formulae.

\begin{lemma} \label{333}
There exists a sequence 
\[
\NN_1 \rightarrow \DD[X]_f \times \DD[X]_f \; ; \; n \mapsto (u_n, v_n),
\] 
 of class $\DRT(\Oo(n^5), \Oo({\M}(n^3) n^2 \log^3(n)))$, such that for all $x \in [0,1]$ 
\[
\abs{\;\abs{x} - p_n(x^2)/q_n(x^2) \;} \;\;\leq \;2^{-n}.
\]
The degrees of the polynomials $p_n$ and $q_n$ are bounded by $n^2/2$, their sizes in presentation by formula are bounded by $\Oo(n^5)$, and $q_n(x^2)$ is bounded below by $1/e^{(n^3-n)}$.
\end{lemma} 

\begin{proof} We define $p_n$ and $q_n$ as $P_n$ and $Q_n$ by replacing in the definition the real $e^{-k/n}$ by a sufficient dyadic approximation $c_{n,k}$  calculated by means of \lemref{332}. 

\noindent 
If $\abs{e^{-k/n}-c_{n,k}}\;\leq \varepsilon$ we check that for all $x\in [0,1]$ 
\[
\abs{P_n(x) - p_n(x)}\;  \leq  (n^{2}-1) 2^{n^2} \varepsilon  \quad  
{\rm  and}   \quad  \abs{Q_n(x)- q_n(x)}\; \leq  (n^2-1) 2^{n^2} \varepsilon  = \varepsilon_1. 
\]
For the difference between rational functions we use
\[
\abs{A/B - a/b};  \leq \;  
\abs{A/B} \;  \abs{b - B}  / b + \; \abs{A - a}  / b 
\leq   3 \varepsilon_1/ b. 
\]
As $ B \geq 1/2^{3(n^3-n)/4}$ we have $1/b \leq 2.2^{3(n^3-n)/4}$ if 
$\abs{b - B}\;\leq  B/2$, in particular if 
\[
(n^{2}-1) 2^{n^2} \varepsilon \leq (1/2) \cdot 1/2^{3(n^3-n)/4}.
\]
We are then led to take an $\varepsilon $ such that 
\[
3\varepsilon_1/b\leq 6(n^{2}-1)2^{n^2}2^{3(n^3-n)/4}\varepsilon 
\leq 1/2^{n+1}.
\]
It is therefore sufficient to take $\varepsilon \leq 2 ^{-n^3}$ (for $n$ large enough). 
large).

\noindent 
We will therefore have to describe $p_n$ and $q_n$ using formulae of 
``algebraic'' size $\Oo(n^2)$ involving base terms $(x+c_{n,k})$ 
where $c_{n,k}$ is a dyadic of size $\Oo(n^3)$. 
The (boolean) size of the formula is therefore $\Oo(n^5)$. 
Most of the calculation time is taken up by calculating $c_{n,k}$ using \lemref{332}. 
\end{proof}


Note that the increase in computation time is only slightly less than the 
size of the result.

We can immediately deduce the following results.

\begin{theorem} \label{334}
The function $x \mapsto \abs{ x - 1/2 }$ is a point of complexity $\p$ (more precisely $\DRT(\Oo(n^5), \Oo({\M}(n^3) n^2 \log^3(n)))$ 
in the space $\crf$. 
In other words, there is a sequence 
$\NN_1 \to \yrf \; , \; n \mapsto (u_n,v_n)$, of class
 $\DRT(\Oo(n^5), \Oo({\M}(n^3) n^2 \log^3(n)))$, such that 
\[
\Norme{ \; \abs{ x-1/2 } - u_n(x)/v_n(x) \;} \; \leq 2^{-n}
\]
The degrees of the polynomials $u_n$ and $v_n$ are bounded by $n^2$.
\end{theorem}

\begin{proposition} \label{335}
The function $x \mapsto \abs{x}$ on the interval $[-2^m , 2^m]$ can be approximated to within $1/2^n$ by a rational function $p_{n,m}/q_{n,m}$ whose denominator is less than $1$ (over the same 
interval), and the calculation 
\[
(n,m) \mapsto (p_{n,m},q_{n,m}) \; \; \NN_1 \times \NN_1 \to
 \DD[X]_f \times \DD[X]_f 
\] 
is of complexity $\DRT(\Oo(N^5), \Oo({\M}(N^3) N^2 \log^3(N)))$ 
where $N = n+m$. The degrees of the polynomials 
$p_{n,m}$ and $q_{n,m}$ are bounded by $N^2$.
Similarly the function $(x,y) \mapsto \max(x,y)$ 
(resp. $(x,y) \mapsto \min(x,y)$) on the square 
$[-2^m,2^m] \times [-2^m,2^m]$ can be approximated to within $1/2^n$  
by a rational function of the same type and complexity 
as the previous ones.
\end{proposition}

\begin{proof} For the absolute value function:


\noindent 
If $x \in [-2^m , 2^m]$ we write 
$
\abs{x}\;  = 2^m \abs{ x/2^m } 
$
with $x/2^m \in [-1 , 1]$. So, using the notations from the proof of  Lemma \ref{333}, it suffices to take $p_{n,m}(x) = 2^m p_{n+m}(x/2^m)$ and $q_{n,m}(x) = 2^m q_{n+m}(x/2^m)$.

\noindent 
For the functions $\max$ and $\min$, simply use the formulae:
\[
\max(x,y) = \frac{x+y\; + \abs{x-y}} {2}\quad  {\rm and} \quad  
\min (x,y) = \frac{x+y\; - \abs{x-y}}{2} 
\]
\end{proof}

In the following, we shall need to ``approximate'' the discontinuous function
\[ 
C_a(x) = \left\{
\begin{array}{cl}
1, & {\rm if } \; x \geq a 
\\
0, & {\rm otherwise} 
\end{array}
\right.
\]
Such an ``approximation'' is given by the continuous semilinear function $C_{p,a}$:
\[
 C_{p,a} = \min(1, \max(0, 2^p(x - a))) \; {\rm where} \; p \in \NN_1\; {\rm and}\; a \in \DD_{[0,1]}
\] 
\begin{figure}[htbp] 
\begin{center}
\includegraphics*[width=14cm]{fi336}
\end{center}
\caption[representative curve of the function $C_{p,a}$]{\label{fi336} 
the function $C_{p,a}$} 
\end{figure} 

\noindent 
The complexity of the family of functions $(p,a) \mapsto C_{p,a}$ is given in the following proposition. 

\begin{proposition} \label{337}
The family of functions 
$
 \NN_1 \times \DD_{[0,1]} \;: \; (p,a) \mapsto C_{p,a}
$ 
defined as:
\[
C_{p,a} = \min(1,\max(0, 2^p(x - a)))
\] 
is a family of class $\p$. 
More precisely, it has complexity 
$\DRT(\Oo(N^5), \Oo({\M}(N^3) N^2 \log^3(N)))$ where $N = \max(\Lg(a), n+p)$.
\end{proposition}

The following proposition concerns the square root function.

\begin{proposition} \label{338}
The function $ x \mapsto \sqrt {\abs { x - 1/2 }} $ on $[0,1]$ is a 
$\p$-point of $\crf$.
\end{proposition}

\begin{figure}[htbp] 
\begin{center}
\includegraphics*[width=10cm]{fi339}
\end{center}
\caption[Curve of the function $\sqrt {\abs{ x - 1/2 }} $]{\label{fi339} 
the function $ x \mapsto \sqrt {\abs { x - 1/2}} $} 
\end{figure} 

\begin{proof} Sketch. 
In the polynomials $P_n(x^2)$ and $Q_n(x^2)$ from Newman's theorem, if we 
replace $x^2$ by a good approximation of $\abs{x}$ on $[0,1]$, then 
by Newman's theorem, we obtain a rational function 
 $R_n(x)/S_n(x)$ such that 
\[
\forall x \in [0,1] \abs{\sqrt{ \abs{x}} - (R_n/S_n)(x) }\;  \leq 2^{-
n}.
\]
The degrees of $R_n(x)$ and $S_n(x)$ will be  $\Oo(n^4)$. 

\noindent 
Note that the fraction $(P_n/Q_n)(x)$ is not odd, so it provides a 
good approximation to the function~$\sqrt{ \abs{x}}$ only on the interval 
the interval $[0,1]$. 
\end{proof}

\section[A natural presentation of the space \texorpdfstring{$\czu$}{C[0,1]}]{A natural presentation of the space \texorpdfstring{$\czu$}{C[0,1]} 
and some equivalent 
equivalent presentations}\label{sec4}

A natural notion of complexity for points and sequences of points 
of the space $\czu$ is given by Ker-I.\ Ko and H.~Friedman in \cite{KF82}. 
In this section we study a rational presentation of the space $\czu$ which gives (more or less) the same notions of complexity. We also study 
other presentations using circuits, which turn out to be equivalent from the point of view of complexity. 
The proof of these equivalences is based on the proof of an analogous but less general result given in \cite{Ho87,Ho90}. 

\subsection {Definitions of some presentations of the space 
 \texorpdfstring{$\czu$}{C[0,1]}}\label{subsec41}
 
\subsubsection{KF presentation (KF as in Ko-Friedman)}
Recall that $\DD_n = \{ k/2^n ; k \in \ZZ \}$ and $\DD_{n,[0,1]} = 
\DD_n \cap [0,1]$. 

\noindent 
In the definition given by Ko and Friedman, for $f \in \czu$, an Oracle Turing Machine (OTM) ``computes'' the function function $f$ in the following sense. 
For the question ``$\,m\;?\,$'', where $m\in\NN_1$, the oracle delivers an approximation $\xi \in\DD_{m,[0,1]}$ of $x$ to within $2^{-m}$. 
For the input $n \in \NN_1$, the machine calculates, with the help of the previous oracles, a
$\zeta \in \DD_n$ approximating $f(x)$ to within $1/2^n$.

\noindent 
Reading the OTM program alone is obviously no way of knowing whether the OTM calculates~a function of $\czu$. 
Consequently, since we wish to have objects clearly identified as ``rational points'' of the presentation we want to define, we introduce control parameters. 
But for such parameters to be truly effective, it is necessary to restrict the execution of the machine to an output precision given a priori. 
As a result, the required input accuracy is also limited a priori. 
Thus, the OTM is approximated by a sequence of ordinary machines (without oracle), each executing only a finite number of computations. 
We are therefore led to define a rational presentation of $\czu$ which will be denoted by $\ckf$ (the set of codes for rational points will be denoted by $\ykf$) as follows.  
 
\begin{definition} \label{411}
We consider a language, chosen once and for all, to describe TM programs with a single input, in $\DD_{[0,1]}$ (denoted by $x$), and with a single output, in $\DD$ (denoted by $y$). Let ${\bf Prog}$ be the part of this language formed by well-written programs 
(according to a syntax specified once and for all).
Let $f = (Pr, n, m, T) \in {\bf Prog} \times \NN_1 \times \NN_1 
\times \NN_1$ where we have:


\noindent 
--- $n$ is the precision required for $y$,

\noindent 
--- $m$ is the precision with which $x$ is given.

\noindent 
The quadruplet $(Pr,n,m,T)$ is said to be {\em correct} when the following conditions are satisfied.


\noindent 
--- the program $Pr$ calculates a function from $\DD_{m,[0,1]}$ to 
$\DD_n$, i.e.\ for an entry in $\DD_{m,[0,1]}$ it obtains an output 
an element of $\DD_n$;

\noindent 
--- $T$ bounds the maximum execution time for all $x$ in 
$\DD_{m,[0,1]}$; 

\noindent 
--- for two consecutive elements ($1/2^m$ apart) of 
$\DD_{m,[0,1]}$ as input, the program gives two elements of 
$\DD_n$ no more than $1/2^n$ apart.

\noindent \rdb 
The set of correct quadruplets $(Pr,n,m,T)$ is denoted by $\ykf$\label{ykf}.
 When the data $f$ is correct, it defines the following rational point  
$\wi{f}$.
It is the piecewise linear function which joins the points of the graph given on the grid $\DD_{m,[0,1]} \times \DD_n$ by executing the program $Pr$ for all possible inputs in $\DD_{m,[0,1]}$.
So $\ckf=(\ykf,\eta,\delta)$ where $\eta(f)=\wi f$ and $\delta$ must be defined as required in Definition \ref{211}. The complexity of $\eta$ and $\delta$ is studied in Proposition \ref{413}.
\end{definition} 

\begin{remark} \label{412}
 Note that the first two conditions could be fulfilled 
by syntactic constraints that are easy to implement. 
 On the other hand, as we shall see in Proposition \ref{441}, 
the third is uncontrollable in polynomial time (unless $\p$ = $\np$) (this correctness condition defines a $\cnp$-complete problem). Note also that 
if we had not imposed the correctness condition for the points of $\ykf$ 
we would have had no a priori control of the modulus of uniform continuity for the piecewise linear function defined by the data, and the family $\big(\wi{f}\,\big)_{f \in \ykf}$ would not have been uniformly of class~$\p$.
\end{remark}

\begin{proposition}[complexity of the family of functions attached to $\ykf$] \label{413}~\\
The family of continuous functions $\big(\wi{f}\,\big)_{f \in \ykf}$ 
is uniformly of class $\DSRT(\Lin, \Lin, \Oo(N^2))$. 
\end{proposition}

\begin{proof} 
First of all, we note that the function $\wi{f}$ corresponding to 
$f = (Pr, n, m, T)$ is piecewise linear and that, since the data is 
correct, the slope of each piece is bounded in absolute value by 
$2^{m-n}$, which gives the modulus of uniform continuity $\mu(f,k) = k+m-n$ for the family 
$\big(\wi{f}\,\big)_{f \in \ykf }$. 

\noindent 
We need to find a map 
$\varphi\colon \ykf \times \DD_{[0,1]} \times \NN_1 \to \DD$ of complexity 
$\DSRT(\Lin, \Lin, N^2)$ such that
\[
\forall (f,x,k) \in \ykf  \times \DD_{[0,1]} \times \NN_1 \; \; 
\abs{ \varphi(f,x,k) - \wi{f}(x) }\;  \leq 2^{-k}.
\]
Let $z=(f,x,k)=((Pr,n,m,T),x,k) \in \ykf \times \DD_{[0,1]} \times \NN_1$.
We will assume without loss of generality that $k \geq n$ and that $x$ 
is given with at least $m$ bits.

\noindent 
By simply reading $x$ we can identify two consecutive elements $a$ and 
$b$ of $\DD_{m,[0,1]}$ such that $a \leq x \leq b$ and we find the 
dyadic $r \in \DD_{[0,1]}$ such that $x=a+r/2^n$. 

\noindent 
Let $\varepsilon \in \{-1,0,1\}$ be the integer satisfying 
$\wi{f}(a)=\wi{f}(b)+ \varepsilon/2^n$. 

\noindent 
Then $\wi{f}(x) = \wi{f}(a) + \varepsilon r/2^n$. In addition 
$\wi{f}(a)= \Exec (Pr,a)$ is the result of executing the program 
program $Pr$ for input $a$.
The complete calculation therefore essentially consists of:
 

\noindent 
--- reading $x$ (and deducing $a$, $b$ and $r$),

\noindent 
--- calculating $\Exec (Pr,a)$ and $\Exec (Pr,b)$.

\noindent 
The complexity is therefore bounded by the complexity of the Universal Turing Machine that 
we use to run the program $Pr$. According to \lemref{131} 
this is done in time $\Oo(T(T+ \flo{Pr}))$ and space $\Oo(T+ \flo{Pr})$. And the size of the output is bounded by $T$. 
\end{proof}

The fact that the presentation $\ckf$ which results from Definition \ref{411} is the Ko-Friedman presentation is justified by the following proposition. 


\begin{proposition} \label{414}
A function $f\colon [0,1] \to \RR$ is computable in polynomial time in the sense of Ko-Friedman if and only if it is a $\p$-point of $\ckf$. More 
precisely,
\begin{itemize}
%
\item [a)] if the function $f$ has time complexity $T(n)$ in the sense of Ko-Friedman then it is a $\DTI (T)$-point of $\ckf$;
%
\item [b)] if the function $f$ is a $\DTI (T)$-point of $\ckf$ then it has complexity $T^2(n)$ in the Ko-Friedman sense. 
%
\end{itemize}
\end{proposition}
We will first prove a characterisation of the complexity of a function in the sense of Ko-Friedman, for a class $\ca$ of complexity in time or space. We have already stated this without proof in  Example  \ref{223}. We give a more precise statement here.

\begin{proposition} \label{415}
Let $\ca$ be an elementarily stable class of type $\DTI(\bullet)$ 
or $\DSPA(\bullet)$ or $\DSRT(\bullet, \bullet, \bullet)$ or $\DRT(\bullet, 
\bullet)$ or $\DSR(\bullet, \bullet)$ and consider a continuous function 
$f\colon [0,1] \to \RR$. The following properties are equivalent:
\begin{itemize}
%
\item  [1)] the function $f$ is computable in the Ko-Friedman sense in the class $\ca$.
%
\item  [2)] the function $f$ is uniformly of class $\ca$.
%
\end{itemize}
{\bf NB}. 
As far as the complexity of an OTM is concerned, we mean here that the questions to the oracle must be counted among the machine's outputs. 
In other words, the size of the $m$ integers which are the questions to the oracle must have the bound required for the output in classes of the type $\DSRT(\bullet, \bullet, \bullet)$ or $\DRT(\bullet, \bullet, \bullet)$ or $\DSR(\bullet, \bullet, \bullet)$.
\end{proposition}

\begin{proof}[Proof of Proposition \ref{415}] 
Recall that a function is uniformly of class $\ca$ (cf.\ definition 
\ref{211}) when:


\noindent 
a) the function $f$ has a modulus of uniform continuity in the class $\ca$.

\noindent 
b) the family $(f(a))_{a \in \DD}$ is a $\ca$-family of 
real numbers.

\noindent 
Let $f \in \czu$ and $M$ be an OTM which, for any input $n \in \NN_1$ and any $x \in [0,1]$ (given as an oracle) calculates $f(x)$ to within $2^{-n}$ in the $\ca$ class. If we replace the oracle, which 
gives an approximation of $x$ to within $2^{-m}$ in the class by reading an arbitrary dyadic number $a$, we obtain a usual TM that calculates $(f(a))_{a \in \DD}$ as a family of real numbers, in the 
family of real numbers, in the class $\ca$. 

\noindent 
Let's look at the question of the modulus of uniform continuity. On the input $n$ (precision required for the output) and for any oracle for any $x \in [0,1]$, the OTM will calculate $y=f(x)$ to within $2^{-n}$ by querying the oracle for certain precision $m$. Since $\ca$ is a complexity class of the type expected, the largest of the integers $m$ used on the input $n$ can be  augmented by $\mu(n)$ where $\mu\colon \NN_1 \to \NN_1$ is a function in the class $\ca$.\footnote{For example, for a class of complexity class where we specify that the outputs are of linear size, the size of $m$ depends linearly on $n$ (independently of the oracle) since $m$, as a question put to the oracle, is one of the outputs.} This is the modulus of uniform continuity we are looking for.

\noindent 
Suppose now that the function $f$ is uniformly of class $\ca$.
 Let $M$ be the TM (without oracle) that calculates $(f(x))_{x \in \DD}$ as a family of real numbers in class class. 
Let $M'$ be a TM that computes a modulus of uniform continuity $\colon \NN_1 \to \NN_1$ in the class $\ca$. The Ko-Friedman OTM is then as follows. 
On the input $n$ it calculates $m = \mu(n+1)$ (using $M'$), it then queries the oracle with precision $m$, the oracle gives an element $a \in \DD_m$. The OTM then uses $M$ to calculate $f(a)$ to within $1/2^{n+1}$, which, deprived of its last bit, constitutes the output of the OTM. 
\end{proof}
 

Proposition \ref{415} shows, by contrast, that the non-perfect match obtained in Proposition \ref{414} is only due to the difficulty of putting exactly and every time the notion of complexity of a uniformly continuous map (as a function) into the mould of the notion of complexity of a point in a metric space. This perfect match occurs for classes such as $\p$, $\Prim $ or $\Rec $ but not for $\DRT(\Lin, \Oo(n^k))$. 
\\ 
Finally, note the great similarity between the proofs of the propositions \ref{415} and \ref{414}, with a slightly greater complication for the latter. 

\begin{proof}[Proof of Proposition \ref{414}] Let $f \in \czu$ and $M$ an OTM which, for any input $n \in \NN_1$ and any $x \in [0,1]$ (given as an oracle) calculates $f(x)$ to within $2^{-n}$, in time bounded by $T(n)$. 

\noindent 
Consider the sequence $f_n = (Pr_n, n, T(n), T(n))_{n \in \NN_1}$ where we have:

\noindent 
$Pr_n$ is obtained from the $Pr$ program of the $M$ machine by replacing the answer $(x_m)$ given by the oracle to the question ``$\,m\;?\,$'' by the instruction ``read $x$ with precision $m$''. 

\noindent 
The correction of $f_n$ is clear. 
Let $\wi{f_n}$ be the piecewise linear function corresponding to $f_n$. 
We have for $\xi \in [0,1]$ and $d$ an approximation of $\xi$ to within $1/2^{T(n)}$
\[ 
{\Exec}(Pr_n, d) = {\Exec} (Pr, n, \hbox{Oracle  for } \xi) = M^{\xi}(n)
\]
and therefore
\[
\abs{\wi{f_n}(\xi) - f(\xi)}\; \leq 
\abs{f(d) - {\Exec}(Pr_n, \xi)} + 
\abs{\wi{f_n}(d) - {\Exec} (Pr_n, \xi) }
\; \leq 2^{-n} + 2^{-n} \leq 2^{-(n-1)}
\] 
Finally, the sequence $n \mapsto f_{n+1}$ is of complexity $\DTI (\Oo(n))$.

\noindent 
Conversely, suppose $\norme{ f_n - f } \leq 2^{-n}$ with 
$n \mapsto f_n$ of class $\DTI (T(n))$. 

\noindent 
We have $f_n = (Pr_n, q(n), m(n), t(n))$. Consider the OTM $M$ which, for any integer $n \in \NN_1$ and any $xi \in [0,1]$, performs the following tasks 
as follows: 

\noindent 
--- take the element $f_{n+1} = (Pr_{n+1}, q(n+1), m(n+1), t(n+1))$, from the sequence, corresponding to $n+1$. 
sequence, corresponding to $n+1$. 

\noindent 
--- ask the oracle the question $Q(n) = m(n+1) + n+1 - q(n)$ (we obtain 
an approximation $d$ of~$\xi$ to within $2^{-Q(n)}$). 

\noindent 
--- calculate $\wi{f_{n+1}}(d)$ by linear interpolation (cf.\ Proposition \ref{413}): this is the output of $M$.

\noindent 
We then have for all $\xi \in [0,1]$
\[
\abs{\wi{f_n}(\xi) - M^{\xi}(n)} \; \leq 
\abs{\wi{f}_n(\xi) - \wi{f}_{n+1}(\xi)} + 
\abs{\wi{f}_{n+1}(\xi) - \wi{f}_{n+1}(d)}\; \leq 2^{-(n+1)} + 2^{-(n+1)} = 2^{-n}  
\]
so 
\[
\norme{ f - M^{\xi}(n) } \; \leq\; \norme{ f - \wi{f_n} } + \Norme{ \wi{f_n} - M^{\xi}(n) } \; \leq\; 2^{-n} + 2^{-n}
\]
Moreover the machine $M$ has complexity $\Oo(T^2(n))$ (cf.\ Proposition \ref{413}). 
\end{proof}


In the same style as Proposition \ref{415}, we obtain two natural characterisations, to within $\p$-equivalence, of the rational presentation $\ckf$ of $\czu$.
 
\begin{proposition} \label{416}
Let $\sC^{\star}$ be a rational presentation of the space $\czu$. 
The two following assertions are equivalent. 
%
\begin{enumerate}
%
\item The presentation $\sC^{\star}$ is $\p$-equivalent to $\ckf$.
%
\item A family $\big(\wi{f}\,\big)_{f \in Z}$ in $\czu$ is uniformly of class $\p$ if and only if it is a $\p$-family of points in~$\sC^{\star}$.
%
\end{enumerate}
\end{proposition}

\begin{proof} 
For any $\ca$-elementarily stable class, two rational presentations of an arbitrary 
metric space are $\ca$-equivalent if and only if they 
define the same $\ca$-families of points (cf.\ remark \ref{228}). It is then sufficient to
check that the rational presentation $\ckf$ satisfies condition (2). The 
proof is identical to that of Proposition \ref{414}. 
 \end{proof}



\begin{theorem} \label{417}
The presentation $\ckf$ is universal for evaluation in the following sense. \\
If $\sC_Y=(Y,\delta,\eta)$ is a rational presentation of $\czu$ for which the family $\big(\wi{f}\,\big)_{f \in Y}$ is uniformly of class $\p$,  then the function $\Id_\czu$ from $\sC_Y$ to $\ckf$ is uniformly of class $\p$. 
 

\noindent The result generalises to any elementarily stable class of complexity $\ca$ which verifies the following property:
if $F \in \ca$ then the computation time of $F\colon \NN_1 \to \NN_1,\; N 
\mapsto F(N)$, is bounded by a function of class~$\ca$.
\end{theorem}

\begin{proof} 
This follows from \ref{416}. However, let us give the proof. We must show that the family $\big(\wi{f}\,\big)_{f \in Y}$ is a family of points of class $\p$ for the presentation $\ckf$. Since the family $\big(\wi{f}\,\big)_{f \in Y}$ is uniformly of class $\p$, we have two functions $\psi$ and $\mu$ of class 
$\p$:
\[
 \psi\colon Y \times \DD_{[0,1]} \times \NN_1 \to \DD \qquad  
(f,d,n) \mapsto \psi(f,d,n) = \wi{f}(d) \; \hbox{to within} \; 1/2^n
\]
and 			
\[
\mu: Y \times \NN_1 \to \DD \qquad (f,n) \mapsto \mu(f,d,n) = m 
\]
where $\mu$ is a modulus of uniform continuity for the family. 
Let $S\colon \NN_1 \to \NN_1$ be a map of class~$\p$ which gives a bound for the computation time of $\psi$. 

\noindent 
Let us then consider the function $\varphi\colon Y \times \NN_1 \to \ykf $ defined by:
\[
\varphi(f,n) = (Pr(f,n), n, \mu(f,n), S(\flo{f} + \mu(f,n) + n))
\]
where $\flo{f}$ is the size of $f$ and $Pr$ is the program calculating 
$\psi$, barely modified: 
it takes as input only the $d \in \DD_{m,[0,1]}$ and retains for output only the significant digits in $\DD_n$.

\noindent 
The $\varphi$ function is also in  class $\p$. 

\noindent 
Furthermore, it is clear that the rational point coded by $(Pr,n,m,S(\flo{f} +m+n))$ approximates~$\wi  f$ to within~$1/2^n$. 	 
\end{proof}

Note that this universal property of the presentation $\ckf$ is obviously shared by all presentations $\p$-equivalent to $\ckf$.

\subsubsection{Presentation by boolean circuits} \label{subsubsec412}

Boolean circuit presentation is essentially the same as Ko-Friedman presentation. It is a little more natural within our framework of rational 
presentations. 

Let us denote by $\CB$ the set of (codes for) boolean circuits. A boolean circuit $C$ is simply given by a boolean evaluation program (boolean straight-line program) which represents the execution of the circuit $C$.
A rational point of the presentation by boolean circuits is a map $\wi{f}$ encoded by a quadruplet $f = (C, n, m, k)$ where $C$ is (the code of) a boolean circuit, $n$ is the required precision for $f(x)$, $m$ is the required precision input, and $2^{k+1}$ is an upper bound for the norm of $\wi{f}$. 

\begin{definition} \label{418}
A rational point of the presentation by boolean circuits $\cbo$ is encoded by a quadruplet $f = (C, n, m, k) \in \CB \times \NN_1 \times \NN_1 \times 
\NN_1$ where $C$ is (the code of) a boolean circuit with~$m$ input gates and $k+n+1$ output gates: the $m$ input gates are used to code an element of $\DD_{m,[0,1]}$ and the $k+n+1$ output gates are used to code elements of $\DD$ of the form $\pm 2^k\left( \sum_{i=1}^{n+k}b_i2^{-i}\right)$ ($b_i\in\{0,1\}$, $b_0$ codes $\pm$).

\noindent 
The data $f = (C, n, m, k)$ is said to be {\em correct} when two entries 
encoding elements  $1/2^m$ apart of $\DD_{m,[0,1]}$ give outputs 
encoding elements at most $1/2^n$ apart of $\DD$. The set of correct data is $\ybc$.

\noindent 
When a given $f$ is correct, it defines a piecewise linear function function $\wi{f}$ which is well controlled (it is the ``rational point'' defined by the data).
\end{definition}

It should be noted that the control parameters $n$, $m$ and $k$ are mainly indicated for the user's convenience. In fact $n+k$ and $m$ are 
directly readable on the $C$ circuit. 

From this point of view, the situation is slightly improved compared to the presentation for which the control parameters are absolutely essential. 
The size of $C$ alone controls the execution time of the circuit 
(i.e.\ the function which calculates, from the code of a boolean circuit and the list of its inputs, the list of its outputs is a function of very low complexity).

\begin{proposition}[complexity of the family of functions attached to $\ybc$] \label{419} 
The family of continuous functions $\big(\wi{f}\,\big)_{f \in \ybc }$ is uniformly of 
class $\DSRT(\Lin, \Lin, \QLin)$.
\end{proposition}

\begin{proof}
We copy the proof of Proposition \ref{413} concerning the family $\big(\wi{f}\,\big)_{f \in \ykf}$. The only difference is the replacement of the function $\Exec(Pr,a)$ by the evaluation of a boolean circuit. 
The function which calculates, from the code of a boolean circuit and the list of its inputs, the list of its outputs is a function of time complexity $\Oo(t\log(t))$ (where $t = \sz(C)$), 
so of class $\DSRT(\Lin,\Lin,\QLin)$. 	 
\end{proof}


\noindent {\bf NB}. If we had taken ``management time'' into account (cf.\ remark 
\ref{323}) we would have found a complexity $\DSRT(\Lin, \Lin, \Oo(N^2))$, i.e.\ the 
same result as for the family $\big(\wi{f}\,\big)_{f \in \ykf}$ (the complexity of $\Exec(Pr,a)$ precisely takes into account ``management time'').

 \subsubsection{Presentation by arithmetic circuits (with 
magnitude)}\label{subsubsec 413}
Remember that an {\em arithmetic circuit} is, by definition a circuit whose input gates are ``real'' variables $x_i$ and constants in $\QQ$. Obviously, we could tolerate only the two constants $0$ and $1$ without significant change. 

\noindent 
The other gates are:

\noindent 
--- single-input gates of the following types: $x \mapsto x^{-1}, \; x \mapsto -x$, 

\noindent 
--- two-input gates of the following two types: $x+y, \; x \times y$. 

\noindent 
An arithmetic circuit calculates a rational function, (or possibly gives error if you ask it to invert the identically zero function).
We shall consider arithmetic circuits with a single input variable and a single output gate, and we shall denote by $\CA$ the set of (codes of) arithmetic circuits with a single input. 
The code of a circuit is the text of an evaluation program (in a language and with a syntax) corresponding to the arithmetic circuit in question. 


\begin{definition} \label{4110}
An integer $M$ is called {\em a coefficient of magnitude} for an 
arithmetic circuit~$\alpha$ with a single input when $2^M$ bounds in absolute value 
all the rational functions in the circuit (i.e.\ those calculated at all  the gates of the circuit) at any point in the interval~$[0,1]$. 

\noindent 
A pair $f = (\alpha, M) \in \CA \times \NN_1$ is a  \emph{correct}  datum when $M$ is  a magnitude coefficient for the circuit~$\alpha$. 
This defines the elements of $\yaf$. An element $f$ of $\yaf$ 
defines the rational function $\wi{f}$ when it is  
seen as an element of $\czu$. 
The family $\big(\wi{f}\,\big)_{f \in \yaf }$ is the family of rational points of a presentation of $\czu$ which will be noted $\caf$.
\end{definition} 

Note that, because of the presence of multiplications and the transition  to the inverse, the size of $M$ can be exponential compared to that of $\alpha$, even when no rational function of $\alpha$ has a pole on $[0,1]$. This kind of mishap did not occur with binary semilinear circuits.
It even seems unlikely that the correction of a pair $(\alpha, M) \in \CA \times \NN_1$ could be tested in polynomial time. 

\begin{proposition}[complexity of the family of functions attached to $\yaf$] \label{4111} 
The family of continuous functions $\big(\wi{f}\,\big)_{f \in \yaf }$ is uniformly of class  $\p$, and more precisely of class $\DSRT(\Oo(N^3),\Lin,\Oo(N{\M}(N^2)))$.
\end{proposition}

\begin{proof} Let $ f = (\alpha,M) $ be an element of $\yaf$. Let $ p $ be the 
depth of the product $\alpha$. We show by induction on $\pi$ that, for 
a gate of depth $\pi$ the corresponding 
has a derivative bounded by $2^{2M \pi}$ on the interval 
the interval $[0,1]$. This gives the modulus of uniform continuity $\mu(f,k) = k + 2Mp$ (which is $\Oo(N^2)$) for the family $\big(\wi{f}\,\big)_{f \in \yaf }$. 

\noindent 
We now need to show a function 
$\psi\colon \yaf \times \DD_{[0,1]} \times \NN_1 \to \DD$ 
of complexity $ \DRT(\Lin,\Oo(N\M(N^2))) $ such that
\[
\forall (f, x, k) \in \yaf  \times \DD_{[0,1]} \times \NN_1 \; \;
\abs{ \psi(f,x,k) - \wi{f}(x)} \;  \leq 2^{-k}.
\]
Let $(f, x, k) \in \yaf \times \DD_{[0,1]} \times \NN_1$ where 
$f = (\alpha,M)$. Let $ t = \sz(\alpha) $ be the number of gates in the circuit $\alpha$. The size of the inputs is $N = t+M+k$. 

\noindent 
To calculate $\psi((\alpha,M), x, k)$ proceed as follows. 
Read $ m = k+2Mp+p $ bits of $x$ which gives the two consecutive points
 $a$ and $b$ of $\DD_{m,[0,1]}$ such that $a \leq x \leq b$. 
We execute the $\alpha$ circuit at input~$a$, truncating the calculation performed on each gate to the first $m$ significant bits. The value obtained at the output, truncated to the first $k$ significant bits, is the element $\psi((\alpha,M), x, k)$. 
As multiplication (or division) takes place in time ${\M}(m)$, the time of the arithmetic operations themselves is an $\Oo(t\,\M(k+2Mp+p))= \Oo(N\M(N^2))$ and the used space is in $\Oo(N^3)$. 
\end{proof}
 

\noindent {\bf NB}. If we had taken ``management time'' into account (cf.\ Remark \ref{323}) we would have said: 

\noindent 	
the time for the arithmetic operations themselves is $\Oo(N \M(N^2)),$ 
and the management of objects is $\Oo(N^4).$ So if we consider the 
fast (respectively naive) multiplication, the evaluation function 
is in $ \DRT(\Lin,\Oo(N^4))$ (respectively $\DRT(\Lin,\Oo(N^5))$) where $N$ is the size of the data.

\subsubsection{Presentation by polynomial arithmetic circuits (with 
magnitude)}\label{subsubsec414}

The following presentation of $\czu$ will be denoted by $\capo$. The set of codes for rational points will be denoted by~$\yap$. 

\noindent 
This is the same as the arithmetic circuits, except that 
the ``inverse pass'' gates are removed. We therefore do not give 
the definition in detail.

\noindent 
We find the same difficulties with magnitude, but a little less serious. 
 It does not seem possible to obtain for polynomial circuits significantly better complexity bounds than those obtained in Proposition 
\ref{4111} for circuits with divisions.


\subsection{Comparisons of previous presentations}\label{subsec42}

In this section we show an important result, the equivalence between 
the Ko-Friedman presentation and the four circuit presentations in the previous section, from the point of view of polynomial time complexity. 
 In particular we obtain an  algorithmically fully controlled formulation 
for the Weierstrass approximation theorem. 

\noindent 
To show the equivalence between these five presentations from the point of view of complexity, we will follow the plan below.

\begin{figure}[htbp]
\begin{center}
$$
\xymatrix @R=15pt{
  \ckf\ar[r] &  \cbo\ar[r] &  \csl\ar[r] &  \caf\ar[r] & \capo\ar@/^25pt/[llll] 
}
$$ 
\end{center}
\medskip\caption[Proof diagram]{\label{fi421}proof diagram  
}  
\end{figure}  


To give an equivalence between two different presentations, we need to 
construct maps that transform a rational point of the first presentation into a rational point of the other presentation, which approximates conveniently the first rational point. And vice versa.

\begin{proposition} \label{421}
The identity of $\czu$ from $\ckf$ to $\cbo$ is uniformly of class $\p$, in fact of class  $\DTI (N^{14})$.
\end{proposition}

The proof of this proposition is based on \lemref{131} which describes 
the complexity of a Universal Turing Machine and on the following lemma.
\begin{lemma} \label{422}
{\rm (cf.\ \cite{St} and \cite{Mo}) } 

\noindent 
Let $ M $ be a fixed TM, and $ T $ and $ m $ be elements of 
$\NN_1$. Then we have a function computable in time $\Oo((T+m)^7)$ which computes 
$\gamma_{T,m}$: a boolean circuit simulating the first $ T $ configurations of~$M$ for any entry in $\{0,1\}^m$.
\end{lemma} 

\begin{remark} \label{423}
J. Stern has given in \cite {St}, for any integer $T \in \NN_1$, a fairly simple construction of a circuit $\gamma_T$ which calculates the configuration of $M$ obtained after $T$ calculation steps from an initial configuration of size $\leq T$ (we can assume that $T \geq m$ or take $\max(T,m)$). The size of the circuit $\gamma_T$ is $\Oo(T^2)$. The author also mentions that this construction is done in polynomial time. A more precise bound ($\Oo(T^7)$) is given in \cite{Mo}.
\end{remark}

\begin{proof}[Proof of Proposition \ref{421}] Consider the Turing Machine 
 MU from \lemref{131}.\\ Let $f=(Pr,n,m,T)$ be an element of 
$\ykf$. Let $ p $ be the size of the program $Pr$. 
The size of $f$ is $N = p+n+m+T.$ The machine $ MU $ takes as inputs the program $ Pr $, an input $ x \in \DD_{m,[0,1]}$ and the number of steps $T$. 
It executes in $\Oo(T (\max(T,m)+p)) = \Oo(N^2)$ steps (cf.\ \lemref{131}) the task of calculating the output for the program $Pr$ on the same input $x$ after $T$ calculation steps. 
By applying \lemref{422} we obtain time $\Oo(N^{14})$ for 
calculating an element $g$ of $\ybc$ from the input $f$ 
(a boolean circuit and its control parameters) 
for which we have $\wi{g} = \wi{f}$. 
\end{proof}


\begin{proposition} \label{424}
The identity of $\czu$ from $\cbo$ to $\csl$ is uniformly of class 
$\LINT$. More precisely, we have a discrete function which, starting from an element $ f = (\gamma,n,m,k) $ of $\ybc$ and an integer 
$ q \in \NN_1$, calculates in time $ \Oo(N) $ (where $ N $ is the size of the the input $ ((\gamma,n,m,k),q)$, a binary semilinear circuit $ g $ such that 
\[
\forall x \in [0,1]  \;\;
\abs{ \wi{f}(x) - \wi{g}(x)} \;  \leq 2^{-q}    \eqno(\F4.2.4).
\]  
\end{proposition}

The proof of this proposition uses the following lemma.

\begin{lemma} \label{425} 
There exists a function computable in time $\Oo(N)$ which transforms any 
element $f = ((\gamma,n,m,k),h)$ of $\ybc \times \NN_1$ into an element 
$f' = (\gamma',n+h,m+h,k)$ of $\ybc$ corresponding to the same function.
\end{lemma}

\begin{proof} 
Suppose that the circuit $\gamma$ calculates, for the input $x = u/2^m$ where $0 \leq u \leq 2^m - 1$, the value $y = \ell/2^n$, and for $x' = (u+1)/2^m$, the value $y' = \ell'/2^n$ with $\ell , \ell' \in \ZZ$ and $\abs{ \ell - \ell'} \;  \leq 1$.
 Then the circuit $\gamma'$ calculates, for the input $x+r2^{-h}2^{-m}$, 
$0 \leq r \leq 2^h$, the value $y+(y'-y)r2^{-h}$. 

\noindent 
Note also that $ \sz(\gamma') = \Oo(\sz(\gamma )+h) $ and $\depth(\gamma') = \Oo(\depth(\gamma)+h)$.	 
\end{proof}


\begin{proof}[Proof of Proposition \ref{424}] 
According to \lemref{425}, the condition (\F4.2.4) of the 
can be replaced by the condition: 
\[\forall x \in [0,1]  \;\;
 \abs {\wi{f}(x) - \wi{g}(x)} \;  \leq 2^{-(n-1)}  
   \eqno(\F4.2.5)
\] 
Indeed: if $q < n$ then (\F4.2.4) follows from (\F4.2.5), otherwise, we use linear interpolation given in the proof of \lemref{425}.

\noindent 
We now seek to simulate the boolean circuit $f = (\gamma,n,m,k)$ by a binary semilinear circuit $g$ to within $ 1/2^n$. 

\noindent 
First of all, let's note that it's easy to simulate all the gates exactly, ``except for the input'', by a simple $\lambda$ semilinear circuit which consists of:

\noindent 
1) replacing the boolean constants $ 0$ and $ 1$ of $ \gamma$ by the rational rational constants $0$ and $1$.

\noindent 
2) replacing each vertex of $\gamma$ calculating $\neg u$ by a vertex of 
$\lambda$ calculating $1-u$. 

\noindent 
3) replacing each vertex of $ \gamma $ calculating $u \land v$ by a vertex 
of $ \lambda $ calculating $\min(u,v)$.

\noindent 
4) replacing each vertex of $ \gamma $ calculating $u \lor v$ by a vertex
 of $ \lambda $ calculating $\max(u,v)$. 

\noindent 
5) calculating, from the outputs $c_0, c_1, \ldots,c_{n+k}$ of the circuit 
$\gamma$, the rational point:
\[
\pm 2^k \sum_{i=1,\ldots,n+k}c_i2^{-i} \; (c_0 \;\rm{ codes \;the \;sign})
\]
It is clear that the circuit $\lambda$ is constructed in linear time and 
has a size $\sz(\lambda) = \Oo(\sz(\gamma))$ and a depth $\depth(\lambda) = \Oo(\depth(\gamma))$.

\noindent 
Now we want to ``simulate the input'' of the circuit $\gamma$, 
i.e.\ the bits encoding $x$, by a binary semilinear circuit.

\noindent 
Usually, to determine the binary expansion of a real number $x$, we use the following pseudo-algorithm which uses the discontinuous function function $ C $ defined by:
\[
C(x) = \left\{
\begin{array}{cl} 
1 & {\rm if } \; x \geq 1/2 
\\
0 &
{\rm otherwise} 
\end{array}
\right.
\]


\sni {\bf Algorithm 1} (calculation of the first $m$ bits of a real number $x\in [0,1]$)
\begin{itemize}

\item [] Inputs: $ x \in [0,1], \; m \in \N$ 

\noindent 
 Output: the list $(b_1, b_2,\ldots, b_m) \in \{ 0,1 \}^m$ 
	\begin{itemize}
	
\item [] 

For $j:=1$ to $m$ Do
		\begin{itemize}
		
\item [] 

$ b_j \leftarrow C(x)$ 

\noindent 
		$	 x \leftarrow 2x - b_j$ 
		\end{itemize}
	 Done 

\noindent 
 	End.
\end{itemize}
\end{itemize}

\sni The map $C$ is discontinuous, so Algorithm 1 {\em is not really 
an algorithm}; and it cannot be simulated by a binary semilinear 
binary circuit. We then consider the continuous function
\[
C_p(x) := C_{p,1/2} = \min(1, \max(0,2^p(x-1/2))) \eqno\hbox{(cf.\ Figure \ref{fi336})}
\]
which ``approximates'' the 
function $C$. And we consider the following algorithm:

\mni {\bf Algorithm 2} (approximate calculation of the first $ m $ bits which 
encode a real number $x$)
\begin{itemize}

\item [] 

Inputs: $ x \in [0,1], \; m \in \NN_1$ 

\noindent 
 Output: a list $(b_1, b_2,\ldots, b_m) \in [ 0,1 ]^m$ 
	\begin{itemize}
	
\item [] 

$p \leftarrow m+2$ 

\noindent 
			 For $j:=1$ to $m$ Do
		\begin{itemize}
		
\item [] 

$ b_j \leftarrow C_p(x)$ 

\noindent 
			 $x \leftarrow 2x - b_j$ 

\noindent 
				$p \leftarrow p-1$
	 \end{itemize}
	 Done 

\noindent 
 	End.
\end{itemize}
\end{itemize}

\sni This is achieved by a circuit of size and depth $\Oo(m)$ in the following form.

\mni {\bf Algorithm 2bis} (semilinear circuit form of algorithm 2)
\begin{itemize}

\item [] 

Inputs: $ x \in [0,1], \; m \in \NN_1$ 

\noindent 
 Output: a list $(b_1, b_2,\ldots, b_m) \in [ 0,1 ]^m$ 
	\begin{itemize}
	 
\item [] 

$p \leftarrow m+2 , \; q \leftarrow 2^p$ 

\noindent 
			 For $j:=1$ to $m$ Do
				\begin{itemize}
			 
\item [] 

$y \leftarrow q(x-1/2)$ 

\noindent 
			 		 $ b_j \leftarrow \min (1, \max(0,y))$ 

\noindent 
					$x \leftarrow 2x - b_j$ 

\noindent 
 				 $q \leftarrow q/2$
				 \end{itemize}
	 Done 

\noindent 
 	End
	 \end{itemize}
\end{itemize}

\sni But a crucial problem arises when the input real $x$ is in 
an interval of type $\;  (k/2^m, k/2^m + 1/2^p) \; $ where 
$0 \leq k \leq 2^m-1$. In this case, at least one bit calculated in algorithm 2 
is in $(0,1)$. Consequently, the final result of the 
boolean circuit simulation may be inconsistent. 
To get round this difficulty, we use a technique introduced by 
Hoover \cite{Ho87,Ho90}. We make the following remarks.

\noindent 
--- For all $x \in [0,1]$ at most one of the values 
$x_{\sigma} = x + \frac \sigma   {2^{m+2}}$ (where $ \sigma \in \{-1, 0, 1 \} $) is in an interval of the previous type.

\noindent 
--- Let $z_{\sigma} = \sum_{j=1,\ldots,m}b_j2^{-j}$ where the $b_j$ are 
provided by Algorithm 2bis on the input $x_{\sigma}$. According to the 
previous remark, at least two values 
$\wi {\lambda}(z_{\sigma})$ $(\sigma \in \{-1,0,1\})$, 
correspond exactly to the output of the arithmetic circuit $\gamma$ 
when the first $m$ bits of $x_{\sigma}$ are input. 
In other words, for at least two values of $ \sigma $, we have $ z_{ \sigma } \in 
\DD_m $ and 
$\wi \lambda(z_{\sigma}) = \wi{f}(z_{\sigma})$ with in addition
 $\abs{ z_{\sigma} - x }\;  \leq 1/2^m + 1/2^{m+2} \leq 1/2^{m-1}$ 
	(hence $\abS{ \wi{f}(z_{\sigma}) - \wi{f}(x) }\;  \leq 1/2^{n-1}$).

\noindent 
--- Therefore, any incorrect value calculated by the semilinear 
semilinear circuit can only be the first or the third of the values if 
we order them in ascending order.
Thus, if $y_{-1}$, $y_0$ and $y_1$, are the three values respectively 
calculated by the circuit at the points $x_{\sigma}$ ($\sigma=-1,0,1$), 
then the second of the 3 values correctly approaches $\wi{f}(x)$. 
Given three real numbers $y_{-1}$, $y_0$ and $y_1$, the 2nd one in ascending order, $\theta(y_{-1},y_0,y_1)$, is calculated by one of the two semilinear circuits represented by the second member in the equations:
\[
\theta (y_{-1},y_0,y_1) = y_{-1}+y_0+y_1 - \min (y_{-1},y_0,y_1) - \max (y_{-1},y_0,y_1)
\]
\[
\theta (y_{-1},y_0,y_1) = \min (\max (y_0,y_1), \max (y_1,y_{-1}), \max (y_0,y_{-1}))
\]
To summarise: from the input $x$ we calculate the $x_{\sigma} = x +\frac \sigma {2^{m+2}}$ (where $\sigma \in \{-1,0,1 \}$), and we apply successively:

\noindent 
--- the circuit $\varepsilon$ (of size $\Oo(m) = \Oo(N)$) which decodes 
correctly the first $m$ digits of $x_{\sigma}$ for at least two of the three $x_{\sigma}$; 

\noindent 
--- the circuit $\lambda$ which simulates the boolean circuit proper and 
recodes the output digits in the form of a dyadic, this circuit is of size 
$\Oo(N)$;

\noindent 
--- then the circuit $\theta$ which chooses the 2nd calculated value in 
ascending order.

\noindent 
We therefore obtain a circuit which calculates the function:
\[
\wi{g}(x) = \theta (\lambda(\varepsilon (x-1/2^p)),\lambda(\varepsilon (x)), \lambda(\varepsilon (x+1/2^p))) \; {\rm with} \; p = m+2
\]
of size and depth $\Oo(N)$ and such that
\[
\abs{ \wi{f}(x) - \wi{g}(x) }\;  \leq 2^{-n} \; \forall x \in 
[0,1].
\]
\begin{figure}[htbp] 
\begin{center}
\includegraphics*[width=3cm]{fi422}
\end{center}
\caption[global view of the calculation]{\label{fi422} 
global view of the calculation} 
\end{figure} 
\noindent In addition, the time taken to calculate (the code for) $g$ from the 
input $f$ is also in $\Oo(N)$. 
\end{proof}

We now move on to the simulation of a binary semilinear circuit by an arithmetic circuit (with divisions). First we give a circuit version of  Proposition \ref{335}.

\begin{proposition} \label{426}
The functions $(x,y) \mapsto \max(x,y)$ and $(x,y) \mapsto \min(x,y)$ on the square $[-2^m, 2^m] \times [-2^m, 2^m]$ can be approximated to within $1/2^n$ by arithmetic circuits of size $\Oo(N^3)$, of magnitude $\Oo(N^3)$ and which can be calculated in the class $\DTI (\Oo(N^3))$ where  $(N = n+m)$.
\end{proposition} 

\begin{proof} 
The proof of \lemref{333} is repeated. The representation of polynomials 
approximating $ P_n $ and $ Q_n $ by means of circuits is more economical in space. First of all, we need to construct a circuit that calculates an 
approximation of $ e^{-1/n} $ to within $1/2^{n^3}$. 
Consider the Taylor expansion 
\[
F_m(z) = \sum_{0\leq k\leq m} \frac{(-1)^k}{k!} z^k
\] 
which approaches $ e^{z}$ to within $1/2^{m+2}$ if $m\geq 5$ and $0\leq z\leq 1$. 
Here, we can simply give a circuit which calculates $d_n = F_{n^3}(1/n)$, 
whose size and calculation time are a priori in $ \Oo(n^3) $ (whereas we 
had to explicitly give a dyadic approximation $c_{n,1}$ of $d_n$). 
We then construct a circuit that calculates a good approximation of $H_n(x) = \prod_{1 \leq k < n^2} (x+e^{-k/n})$ in the form $h_n(x) = (x+d_n)(x+d_n^2)\cdots(x+d_n^{n^2-1})$.
This requires a calculation time (and circuit size) in $\Oo(n^2)$. 
This means that the arithmetic circuit which calculates an approximation to within 
$1/2^n$ of $\abs{x}$ on $[0,1]$ 
is calculated in time $\Oo(n^3)$. 
 
\noindent It is also easy to see that the coefficient of magnitude is bounded by the size of $1/h_n(0)$, i.e.\ also an $\Oo(n^3)$. 	 
\end{proof}
 

Note that the magnitude coefficient can hardly be improved. 
On the other hand, it does not seem impossible that $ d_n $ could be 
 calculated by a circuit of smaller size than the naive size in $\Oo(n^3)$.

\begin{proposition} \label{427}
The identity of $\czu$ from $\csl$ to $\caf$ is uniformly of class $\p$, in fact of class $\DTI (N^4)$. More precisely, we have a discrete function which, starting from an element~$g$ of $\ysl$ of size 
$\sz(g) = t $ and depth $ \depth(g) = p $, and an integer 
$n \in \NN_1$, calculates in time $ \Oo( t (n+p)^3 ) $ an element 
$f = (\alpha,M) \in \yaf$

\noindent 
\spa of size $ \sz(\alpha) = \sz(g) \Oo((n+p)^3) $, 

\noindent 
\spa of depth $ \depth(\alpha) = \Oo(p(n+p)^3) $, 

\noindent 
\spa with magnitude coefficient $ M = \Mag(\alpha) = \Oo((n+p)^3) $, 

\noindent 
and such that $\abS{\wi{f}(x)-\wi{g}(x)}\; \leq 2^{-n} \; \; \forall x \in [0,1]$. 
\end{proposition} 

\begin{proof}
Let $ p = \depth(g). $ The gates of $ g $ for an input $x \in [0,1]$ take values in the interval 
$[-2^p,2^p]$. 
We want to simulate to within $2^{-n}$ the circuit $g$ by an arithmetic circuit. 
 Simply simulate the $\max$ and $\min$ gates of the 
semilinear circuit to within $2^{-(n+p)}$ on the interval $[-2^p,2^p]$. 
According to Proposition \ref{426}, each simulation requires an 
arithmetic circuit (with division), all the characteristics of which are 
bounded by an $\Oo(n+p)^3$.	
\end{proof}
%

We move on to the simulation of an arithmetic circuit with divisions by a polynomial arithmetic circuit.

\begin{proposition} \label{428}
The identity of $\czu$ from $\caf$ to $\capo$ is uniformly of class $\p$, in fact of class $\DTI (N^2)$. 
More precisely, we have a discrete function which, starting from an element 
 $f=(\alpha,M)$ of $\yaf$ and an integer 
$n\in\NN_1$, calculates in time $\Oo(N^2)$ an arithmetic polynomial circuit $(\Gamma, M') \in \yap $ ($N$ is the size of the input $((\alpha,M),n)$ 

\noindent 
--- of size $ \sz(G) = \Oo( \sz(\alpha) (n + M) ) $, 

\noindent 
--- of depth $ \depth(G) = \Oo( \depth(\alpha) (n + M) ) $, 

\noindent 
--- of magnitude $ \Mag(G) = M'= \Oo( n + M ) $, 

\noindent 
--- and such that $\abS{ \wi{f}(x) - \wi{g}(x) }\;  \leq 2^{-n}$ 
for all $x \in [0,1]$.
\end{proposition} 

The problem only arises at the level of the ``pass to inverse'' gates. 
We therefore try to simulate them using polynomial circuits while 
keeping the magnitude well bounded.

\begin{lemma} \label{429}
The map $ x \mapsto 1/x $ on the interval $[2^{-m}, 2^m]$ can be 
realised to within $ 1/2^n $ by a polynomial circuit of 
magnitude $ \Oo(m)$, of size $ \Oo(m+n) $ and which is constructed in 
linear time.
\end{lemma}

\begin{proof}
Like Hoover, we use Newton's method to calculate 
the inverse of a real $z$ to within $2^{-n}$ in a reasonable number of additions and multiplications w.r.t.\ to $n$.

\smallskip \noindent 
{\bf Newton's method} (for calculating the inverse of $z$)

\noindent 
 For $2^{-m} < z < 2^m$ we define 
\[
C(x) = \left\{
\begin{array}{l} 
y_0 = 2^{-m} 
\\
y_{i+1} = y_i (2- zy_i) 
\end{array}
\right.
\]
It is easy to check that, for $i \geq 3m + \log(m+n)$, we have
\[
\abs{ z^{-1} - y_i }\;  \leq 2^{-n}.
\]
So for the input $(n,m) \in \NN_1 \times \NN_1$, the application of Newton's method up to iteration $i = 3m + \log(m+n)$ is represented by a polynomial circuit of size $\Oo(m+n)$ and magnitude $\Oo(m+n)$. It is also easy to check that the circuit is constructed in linear time.
\end{proof}


\begin{proposition} \label{4210}
The identity of $\czu$ from $\capo$ to $\ckf$ is uniformly of class $\p$, in fact of class $\DRT(\Lin, \Oo(N^4))$.
\end{proposition} 

\begin{proof}
The fact of being of class $\p$ follows from \thref{417} and Proposition \ref{4111}. A precise reading of the proofs of \thref{417} and Proposition \ref{4111} gives the result $\DRT(\Lin,\Oo(N^4))$ (taking into account the Nota bene after \ref{4111}). 
\end{proof}
%

Summarising the previous results we obtain the following theorem.

\begin{theorem} \label{4211}
The five presentations $\ckf$, $\cbo$, $\csl$, $\caf$ and $\capo$ of $\czu$ are $\p$-equivalent.
\end{theorem}

\begin{notation} \label{4212}
As long as we are at a sufficiently high level of complexity to make the comparison theorem valid (in particular the class $\p$ suffices) there is no reason to make any difference between the five presentations $\ckf$, $\cbo$, $\csl$, $\caf$ and $\capo$ of $\czu$. 
Consequently, from now on the notation $\czu$ will mean that we consider the space $\czu$ with the calculability structure~$\csl$.
\end{notation}

\subsection{Complexity of the norm problem}\label{subsec43}
We know that determining the maximum, on an interval $[0,1]$ of a function computable in polynomial time $f\colon \NN \to \{ 0,1 \}$ is more or less the same thing as the most classic $\np$-complete problem: SAT.

It is therefore not surprising to find as an $\np$-complete problem a problem related to the calculation of the norm for a continuous function. First we need to formulate the norm problem attached to a given rational presentation of the space $\czu$ in a sufficiently precise and invariant way. 
 
\begin{definition}\label{431}~\\
We call ``the norm problem'', relative to a presentation $\ca_1 = (Y_1, \delta_1, \eta_1)$ of $\czu$) the problem:

\noindent 
--- Solve \emph{approximately} the question ``$\, a \leq \norme{f}_{\infty}\;?\,$'' in the presentation $\ca_1$ of $\czu$.

\noindent 
The precise formulation of this problem is as follows:

\noindent 
--- Inputs: $(f,a,n) \in Y_1 \times \DD \times \NN_1$ 

\noindent 
--- Output: Correctly provide one of the two answers:

\noindent 
~~~~~~~~~~~~--- I give you an $x \in \DD$ such that 
$\abs{f(x)} \geq a - 1/2^n$, i.e.\  $\norme{f}_{\infty}\geq a - 1/2^n$,

\noindent 
~~~~~~~~~~~~--- there is no $x \in \DD$ satisfying 
$\abs{f(x)} \geq a$,  i.e.\  $\norme{f}_{\infty}\leq a$.
\end{definition}

This definition is justified by the following lemma.

\begin{lemma} \label{432}
For two polynomially equivalent rational presentations $\ca_1$ and $\ca_2$ of $\czu$, the corresponding norm problems are also polynomially equivalent.
\end{lemma}

\begin{proof}
The transformation from the problem corresponding to one presentation $\ca_1$ to the problem corresponding to another presentation $\ca_2$ is carried out by an algorithm with the same complexity as the algorithm used to present the identity function between $\ca_1$ and $\ca_2$. For the data $(f,a,n) \in Y_1 \times \DD \times \NN_1$, we look for $g \in Y_2$ such that $\norme{ f-g }_{\infty} \leq 2^{-(n+2)}$, then solve the problem with the inputs $(g,a-1/2^{n+1}, n+2)$. 

\noindent 
If we find $x \in \DD$ such that $\abs{g(x)}  \geq a - 2^{-(n+1)}- 2^{-(n+2)}$, then $\abs{f(x)}  \geq a - 2^{-n}$. 

\noindent 
If we declare a forfeit, it means that there is no $x \in \DD$ such that $\abs{g(x)}\;  \geq a - 2^{-(n+1)}$. 
A fortiori, there is no $x \in \DD$ such that $\abs{f(x)} \geq a$. 
\end{proof}



\begin{theorem} \label{433}~\\
The norm problem is $\np$-complete for the presentations $\ckf$, $\cbo$, $\csl$, $\caf$ and $\capo$.
\end{theorem}
%
\begin{proof}
According to \lemref{432} it suffices to do the proof for the presentation $\cbo$. 
The $\np$ character of the problem is immediate. 
To see the $\np$-hardness, we consider the norm problem limited to the inputs $((\gamma,1,m,1), 3/4, 2)$ where $\gamma$ is an arbitrary boolean circuit with $m$ inputs and one output (the quadruplet is then obviously correct), and the answer yes corresponds to the satisfiability of the  circuit $\gamma$.
\end{proof}
%

We also have the following result, which is essentially negative,\footnote{Because $\p \neq \np$ !.} and therefore less interesting.

\begin{proposition} \label{434}
For the considered presentations, the norm function $f \mapsto \norme{f}_{\infty}$ from $\czu$ to $\R^{+}$ is uniformly of class $\p$ if and only if $\p = \np$.
\end{proposition}
%
\begin{proof}
It suffices to reason with the presentation $\cbo$. If the norm function is $\p$-computable,\footnote{We sometimes use the terminology $\p$-computable as an abbreviation for computable in polynomial time.} the norm problem is solved in polynomial time, and therefore $\p$ = $\np$.

\noindent 
If $\p = \np$, the norm problem is solved in polynomial time, which means that the norm can be calculated by dichotomy by initialising with the $2^k$ upper bound, until the accuracy of $1/2^q$ is obtained. This requires $k+q$ dichotomy steps. 
The whole calculation is in polynomial time on the input $(g,q) \in \ybc \times \NN_1$. 
\end{proof}

\begin{corollary} \label{435}
The identity of $\czu$ from $\ckf$ to $\crf$ is not computable in polynomial time, at least if $\p \neq \np$.
\end{corollary}
%
\begin{proof}
The norm function is computable in polynomial time for the presentation $\crf$ according to Proposition \ref{327}. We conclude with the previous proposition. 
\end{proof}
 

\begin{proposition} \label{436}
For the five previous presentations of $\czu$, if the evaluation is in $\DSPA(S(N))$ with $S(N) \geq N$, then the norm function is also in $\DSPA(S(N))$.
\end{proposition}
%
\begin{proof}
If $k \mapsto \mu(k)$ is a modulus of uniform continuity for a rational point $\wi{f}$ of a given presentation of $\czu$, then to compute the norm with precision $n$ it suffices to evaluate $\wi{f}$ over the elements of $\DD_{m,[0,1]}$ (where $ m = \mu(n)$) and take the maximum value.
Since useless intermediate results are immediately deleted, and since $S(N) \geq N \geq m$ the computation space of the norm function is the same as that of the evaluation function. 
\end{proof}

\subsection{Complexity of the considered rational presentations}\label{subsec44}
In this section, we briefly present the complexity of the membership test and the vector space operations for the five considered presentations, and we summarise all the results obtained. 

\begin{proposition} \label{441}
The membership test (for the set of codes of rational points) is:

\noindent 
--- $\LINS$ and $\cnp$-complete for  presentations $\ckf$ and $\cbo$; 

\noindent 
--- $\LINT$ for the presentation $\csl$.
\end{proposition}
 
\begin{proof}
For the presentation $\csl$, this is obvious. The proofs are essentially the same for the two presentations $\ckf$ and $\cbo$. 
We only give one for each.

\noindent 
Let us see that the membership test is $\LINS$ for $\ykf$. 
For an entry $(Pr,n,m,T)$ we do the following calculation: 

\noindent 
 for $i = 1,\ldots,2^m$ check that
\[
Pr(i/2^m) \in \DD_n \quad  {\rm and} \quad  \Abs{ Pr((i-1)/2^m) - Pr(i/2^m) }\;  
\leq 1/2^n.
\]
This calculation is $\LINS$.\\
For the $\cnp$-completeness of the membership test, we give the proof for boolean circuits. We can restrict ourselves to the inputs $(\gamma,2,m,0)$ where $\gamma$ is a circuit which only calculates an output corresponding to the first bit, the other two bits being zero. Consistency is required at two consecutive points on the grid. Only constant functions are therefore tolerated.

\noindent 
The problem opposite to the membership test is to find out whether a boolean circuit is non-constant, which involves solving the satisfiability problem. 
\end{proof}


\begin{proposition} \label{442}
 The vector space operations (on the set of of codes for rational points) are in $\LINT$ for the five presentations $\ckf$, $\cbo$, $\csl$, $\caf$ and $\capo$ of $\czu$.
\end{proposition} 
%
\begin{proof}
The calculations are obvious. For example if $(f_1,\ldots,f_s) \in \lst(\ykf )$ and $n \in \NN_1$, we can easily calculate $f \in \ykf $ such that: 
\[
\NOrme{ \wi{f} - \sum_{i=1,\ldots,s} \wi{f_i} } \leq 
1/2^n
\] 
because it is sufficient to know each $\wi{f_i}$ with the precision $1/2^{n+\log(s)}$. 
\end{proof}



The only ``drama'' is obviously that the presentations $\ckf$ and $\cbo$ are not $\p$-presentations of $\czu$ (unless $\p = \np$ cf.\ Proposition \ref{434}.). 

 
To finish this section we give a summary table in which we group together almost all the complexity results established for the five rational presentations $\ckf$, $\cbo$, $\csl$, $\caf$ and $\capo$ of~$\czu$.

\bni {%\small
\begin{tabular}{ c l p{3cm} c c } 
& Evaluation & Norm & Membership 
& Vectorial \cr
& & function 
& test 
& space \cr
&&&&operations\cr\cr
 $\ckf$ & $\DSRT(\Lin,\Lin,\Oo(N^2))$ & $\LINS$ and & $\LINS$ and & $\LINT $\cr
 and $\cbo$ & &$\np$-complete 
& $\cnp$-complete & \cr\cr
 $\csl$ & $\DSRT(\Oo(N^2),\Lin,\Oo(N^2))$ & $\DSPA(\Oo(N^2))$ 
& $\LINT $ & $\LINT $\cr
 & &and $\np$-complete\cr\cr
$\caf$ & $\DSRT(\Oo(N^3),\Lin,\Oo(N^4))$ & 
$\DSPA(\Oo(N^3))$ 
& $\PSP$ & $\LINT $\cr
 and $\capo$ & & and $\np$-complete
\end{tabular}
}

\bni For the $\PSP$ membership test, its complexity is probably much less.

\begin{remark}\label{444}
Despite the ease with which the evaluation function can be calculated for the presentations $\ckf$ and $\cbo$, it is still the presentation using binary semilinear circuits that seems to be the simplest. 
Its consideration has also shed light on the comparison \thref{4211}, which is a strengthened, uniform version of the results established by Hoover. 
\\ 
The unavoidable flaw (if $\p \neq \np$) of the presentations defined so far is the non-feasibility of calculating the norm. 
This prevents us from having a feasible control procedure for Cauchy sequences of rational points. 
This reduces the interest in $\p$-points of $\csl$. 
This underlines the fact that it is somewhat artificial to study the $\p$-points of a space that is given in a presentation of non-polynomial complexity.\\
In addition, problems that are at least as difficult a priori as the calculation of the norm, such as the calculation of a primitive or the solution of a differential equation, are also without hope of a reasonable solution within the framework of the presentations we have just studied.
\\ 
It is therefore legitimate to turn to other rational presentations of $\czu$  to see to what extent they are better suited to the aims of numerical analysis.
\end{remark}




\section{Some  \texorpdfstring{$\p$}{P}-presentations 
for the space \texorpdfstring{$\czu$}{C[0,1]}}\label{sec5}

In this section we address the question of how far rational $\p$-presentations  of the space $\czu$ provide a suitable framework for numerical analysis. This is only a first study, which should be seriously developed.

\subsection{Definitions of some $\p$-presentations}\label{subsec51}

\subsubsection{Presentation \texorpdfstring{$\cw$}{Cw}
 (à la Weierstrass)}\label{subsubsec511}

The set $\yw$ of codes for rational points of the presentation $\cw$ is simply the set $\DD[X]$ of (one-variable) polynomials with coefficients in $\DD$ given in dense presentation.


\smallskip So $\cw=(\yw,\eta,\delta)$ where the reader will give precisely $\eta$ and $\delta$ as required in Definition \ref{211}.

\smallskip A $\p$-point $f$ of $\cw$ is therefore given by a $\p$-computable sequence: 
\[
m \mapsto u_m \; : \; \NN_1 \to \DD[X] \quad {\rm with }\quad \forall m \, \norme{ u_m - f }_{\infty} \leq 1/2^m.
\]

And a $\p$-sequence $f_n$ of $\cw$ is given by a $\p$-computable double sequence: 
\[
(n,m) \mapsto u_{n,m} \; : \; \NN_1 \times \NN_1 \to \DD[X] \quad {\rm with }\quad  \forall n,m  \; \norme{ u_{n,m} - f_n }_{\infty} 
\leq 1/2^m
\]

\begin{remark} \label{511}
An equivalent definition for a $\p$-point $f$ of $\cw$ is obtained by requiring that $f$ be written as the sum of a series $\sum_ms_m$, where $(s_m)_{m\in\NN_1}$ is a $\p$-computable sequence in $\DD[X]$ satisfying: 
$\norme{ s_m }_{\infty} \leq 1/2^m$. 
This gives a nice way of presenting the $\p$-points of $\cw$. Indeed, we can check in polynomial time (with respect to $m$) that the sequence is correct for the terms from~$1$ to~$m$. Moreover, from the point of view of lazy computation, we can control the sum of the series as the need for precision increases. This remark is valid for any other rational presentation of class~$\p$ whereas it would not be valid for the presentations studied in Section \ref{sec4}.
\end{remark}

The following result is immediate.

\begin{proposition} \label{512}
The presentation $\cw$ of $\czu$ is of class $\p$.
\end{proposition}


\smallskip Here is a result comparing the rational presentations $\crf$ and $\cw$. 


\begin{proposition} \label{513}~

\noindent 
--- The identity of $\czu$ from $\cw$ to $\crf$ is $\LINT$.

\noindent 
--- The identity of $\czu$ from $\crf$ to $\cw$ is not of class $\p$.
\end{proposition}

%
\begin{proof}
The first statement is trivial. 
The second results from the fact that the function $x \mapsto \abs {x-1/2}  $ is a $\p$-point of $\crf$ (\thref{334}) whereas all the $\p$-points of $\cw$ are infinitely differentiable functions (cf.\ \thref{527} below). 
\end{proof}
%


The interest of the presentation $\cw$ is underlined in particular by the characterisation theorems (cf.\ Section \ref{subsec52}) which specify  ``well-known''  phenomena in numerical analysis, with Chebyshev polynomials as a method of attacking the problems.



\subsubsection{Presentation \texorpdfstring{$\csp$}{Csp}
(via semipolynomials in dense presentation)}\label{subsubsec512}

This is a presentation which significantly increases the set of $\p$-points (compared with $\cw$). An element of $\ysp$ represents a piecewise polynomial function (also called a semi-polynomial) given in dense presentation. 

More precisely $\ysp \subset \lst(\DD) \times \lst(\DD[X])$, and the two lists in $\DD$ and $\DD[X]$ are subject to the following conditions:

\noindent 
--- the list $(x_i)_{0 \leq i \leq t}$ of dyadic rational numbers is ordered in ascending order: 
\[
0 = x_0 < x_1 < x_2 <\cdots< x_{t-1} < x_t =1;
\]
--- the list $(P_i)_{1 \leq i \leq t}$ in $\DD[X]$ verifies $P_i(x_i) = P_{i+1}(x_i)$ for $ 1 \leq i \leq t-1$.

\noindent 
The code $f = ((x_i)_{0 \leq i \leq t},(P_i)_{1 \leq i \leq t})$ defines the rational point $\wi{f}$, that is the function which coincides with  $\wi{P_i}$ on each interval $[x_{i-1},x_i]$. 

\smallskip So $\csp=(\ysp,\eta,\delta)$ where the reader will give precisely $\eta$ and $\delta$ as required in Definition \ref{211}.

\smallskip 
The presentation $\csp$ of $\czu$ is clearly of class $\p$.
The following proposition is proved in the same way as Proposition \ref{513}.

\begin{proposition} \label{514} ~

\noindent 
--- The identity of $\czu$ from $\cw$ to $\csp$ is $\LINT$.

\noindent 
--- The identity of $\czu$ from $\csp$ to $\cw$ is not of class $\p$.
\end{proposition} 

\subsubsection{Presentation $\csr$ (via controlled semirational function s given in presentation by formula)}\label{subsubsec513}

The set $\ysr$ of codes of rational points is now the set of codes of piecewise rational functions (also called semi-rational function s) with dyadic coefficients. 

More precisely, $\ysr \subset \lst(\DD) \times \lst(\DD[X]_f \times \DD[X]_f)$, and the two lists in $\DD$ and $\DD[X]_f \times \DD[X]_f$ are subject to the following conditions:

\noindent 
--- the list $(x_i)_{0 \leq i \leq t}$ of dyadic rational numbers is ordered in ascending order: 
\[
0 = x_0 < x_1 < x_2 <\cdots< x_{t-1} < x_t =1;
\]
--- each pair $(P_i,Q_i) \; (1 \leq i \leq t$ from the 2nd list represents a rational function $R_i = P_i/Q_i$ with its denominator $\geq  1$ on the interval $[x_{i-1} , x_i]$;

\noindent 
--- the list $(R_i)_{1 \leq i \leq t}$ verifies $R_i(x_i) = R_{i+1}(x_i)$
 for $1 \leq i < t$.
\\
The code  $f = ((x_i)_{0 \leq i \leq t},(P_i,Q_i)_{1 \leq i \leq t})$ defines the rational point  \smash{$\wi{f}$}, that is the function which coincides with $\wi{R_i}$ on each interval $[x_{i-1} , x_i]$.

\smallskip So $\csr=(\ysr,\eta,\delta)$ with $\eta(f)=\wi f$ and the reader will give $\delta$ as required in Definition~\ref{211}.

\smallskip The presentation $\csr$ of $\czu$ is clearly of class $\p$.

\subsection {Results concerning the Weierstrass presentation}\label{subsec52}

This section is mainly a  devlopment of Section C-c in the paper \cite{Lo89} which is the third part of the PhD thesis of the second author.

We use the classical references for the theory of approximations 
\cite[Bakhvalov, 1973]{Ba},
\cite[Cheney, 1966]{Ch} et \cite[Rivlin, 1974]{Ri}. Concerning the Gevrey class we refer to \cite[Hörmander, 1983]{Ho}. Our notations are as in \cite{Ch}.   

\smallskip  
Before characterising the $\p$-points of $\cw$, we need to recall some classical results from the theory of uniform approximation by polynomials.

\medskip\noindent  {\bf Warning!} Given the usual way in which the theory of approximation is formulated, we will use the interval $[-1,1]$ to give the results and proofs concerning $\cw$.


\subsubsection{Some definitions and results in the theory of uniform approximation by polynomials}\label{subsubsec521}

See for example \cite{Ba}, \cite{Ri} and \cite{Ch}. 

\begin{notation} \label{521}~ 
%-----------------begin item------------------
\begin{itemize}\itemsep2pt

\item [] 
$\cab$ is the space of continuous real functions on the segment $[a,b]$.

\item [] 
$\C$ is the space $\cuu$, the uniform norm on this interval is denoted by $\norme{f}_{\infty}$ and the corresponding distance $d_{\infty}$. 

\item []
 $\C^{(k)}$ is the space of functions $k$ times continuously differentiable on $[-1,1]$. 

\item [] 
$\Ci$ is the space of indefinitely differentiable functions on $[-1,1]$. 

\item [] 
$\po_n$ is the space of polynomials of degree $\leq n$. 

\item [] 
$\Tch_n$ is the Chebyshev polynomial of degree $n$: 
\[
\Tch_n\big(\varphi (z)\big)= \varphi(z^n) \; {\rm with } \; \varphi(z) = \frac {1} {2} (z + 1/z)
\]
they can also be defined by $\Tch_n\big(\cos (x)\big) = \cos (nx)$ or by 
\[
F(u,x) = \frac {1-u\,x} {1-u^2-2u\,x} = \sum_{n=0}^{\infty} \Tch_n(x)u^n
\]
\item []
We note \fbox{$E_n(f) = d_{\infty} (f, \po_n)$} for $f \in \C=\cuu$. 

\item [] 
We consider on $\C$ the scalar product 
\[
\left < g,h \right > := \int_{-1}^1 \frac {g(x)\,h(x)} {\sqrt {1-x^2}}\, dx 
= \int_0^{\pi} g\big(\cos (x)\big)\,h \big(\cos (x)\big)dx. 
\]
Let $\norme{f}_2$ be the norm in the sense of this scalar product. 
The polynomials $(\Tch_i)_{0 \leq i \leq n}$ form an orthogonal $\po_n$-basis for this scalar product, with 
\[
\left < \Tch_0,\Tch_0 \right > = \pi \quad  {\rm and}  \quad  \left < \Tch_i,\Tch_i \right > = 
\pi /2 \; {\rm for } \; i>0.
\]

\item [] 
We note
\[
A_k = A_k(f):= \frac {2} {\pi} \int_{-1}^{1}  \frac {f(x)\,\Tch_k(x)} {\sqrt {1-x^2}}\, {dx}= \frac {2} {\pi} \int_{0}^{\pi} \cos (kx) f(\cos (x))dx
\]
The $A_k$ are called the \emph{Chebyshev  coefficients} of $f$.

\item [] 
The function 
\[
s_n(f) := A_0/2 + \sum_{i=1}^{n}A_i\Tch_i  \hbox{ also denoted by } 
 {\sum_{i=0}^n}\,'\, A_i\Tch_i
\]  
is the orthogonal projection of $f$ onto $\po_n$ in the sense of the above scalar product. 

\item [] 
The corresponding series is called {\em the Chebyshev series} of $f$.\footnote{It converges in the sense of $L^2$ for the scalar product. The Chebyshev series are to continuous functions on $[-1,1]$ what the Fourier series are to periodic continuous functions, which is easy to understand when you consider the change of variable $z\mapsto 1/2( z + 1/z )$ which transforms the unit circle of the complex plane into the segment $[-1,1]$ and the function $z\mapsto z^n$ into the polynomial $\Tch_n$.} 

\item [] 
We note \fbox{$S_n(f) := \norme{ f - s_n(f) }_{\infty}$}.
We immediately have $\abs {A_{n+1}(f)}\; \leq S_n(f) + S_{n+1}(f)$. 

\item [] 
The zeros of $\Tch_n$ are the points 
\[
\xi_i^{[n]} = \cos \left(\frac{2i-1} {n}\cdot \frac {\pi} {2}\right) \; \; \; i =1,\ldots,n
\]
and we have 
\[
\Tch_n(x) = 2^{n-1} \prod_{i=1}^{n} (x - \xi_i^{[n]}) \; \; ({\rm for}\; n \geq 1).
\] 

\item [] 

The extrema of $\Tch_n$ on $[-1,1]$ are equal to $\pm 1$ and obtained at the points
\[
\eta_i^{[n]} = \cos (\frac{i} {n}\cdot \pi) \; \; \; i =0,1,\ldots,n.
\] 

\item [] 

Approximate values of $s_n(f)$ can be calculated by means of interpolation formulae. We let
\[
\alpha_k^{[m]} = \frac {2} {m} \;
{\sum_{i=0}^m}\,'f(\xi_i^{[m]})\Tch_k(\xi_i^{[m]}), \; \; \; \; u_n^{[m]} = \sum_{k=1}^{n} \alpha_k^{[m]}\Tch_k(x)
\]
and we have: $u_n^{[n+1]}$ is the polynomial which interpolates $f$ at the zeros of $\Tch_{n}$
\end{itemize}
%-----------------end item------------------
\end{notation}

The theory of uniform approximation by polynomials establishes close links between ``being sufficiently well approximated by polynomials'' and ``being sufficiently regular''.


\subsubsection{Some classical results}\label{subsubsec522}

You find most of these results in \cite{Ch}.

\smallskip  In this subsection the functions are in $\C=\cuu$.

\smallskip \noindent {\bf Evaluation of a polynomial} $P=\sum_{k=0}^{n}a_k\Tch_k$

\noindent 
 The recursive formulae $\Tch_{m+1}(x) = 2x\Tch_m(x) - \Tch_{m-1}(x)$ lead to a Horner-style algorithm:
\[
B_{n+1} = B_{n+2} = 0, \; B_k = 2xB_{k+1} - B_{k+2} + a_k, \; P(x) = \frac 
{B_0 - B_2} {2}
\]

\smallskip\noindent {\bf Markov's inequalities} 

\noindent 
If $g \in \po_n$ then (A.A. Markov, \cite[page 91]{Ch})
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.1}
\Norme{ g' }_\infty \leq n^2 \norme{ g }_{\infty}
\end{equation}
%---------------------end equation--------------
and for $k \geq 2$ (V.A. Markov, \cite[Theorem 2.24]{Ri})
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.2}
\Norme{ g^{(k)} }_\infty \leq \Tch_n^{(k)}(1) \norme{ g }_{\infty} = \frac {n^2(n^2-1)\cdots(n^2-(k-1)^2)} {1.3.5\cdots(2k-1)} \,\norme{ g }_\infty
\end{equation}
%---------------------end equation--------------


\smallskip\noindent {\bf Comparison of $E_n(f)$ and $S_n(f)$}
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.3}
E_n(f) \leq S_n(f) \leq \left(4+ \frac {4} {\pi^{2}} \log (n)\right)\,E_n(f)
\end{equation}
%---------------------end equation--------------

\smallskip\noindent {\bf Comparison of $E_n(f)$ and $A_{n+1}(f)$}

\noindent 
For $n \geq 1$ we have	
\[
\int_{-1}^{1} \frac {\abs {\Tch_n(x)}} {\sqrt {1-x^2}}\,dx = 2
\]
from which we deduce 
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.4}
(\pi /4) \abs {A_{n+1}(f)}  \leq E_n(f)
\end{equation}
%---------------------end equation--------------

\smallskip\noindent {\bf Jackson's Theorems}

\noindent 
Let $f \in \C$. For any integer $n \geq 1$ we have 
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.5}
E_n(f) \leq \pi \lambda /(2n+2) \; \; \; \hbox{if} \; \; \; \abs{f(x)-f(y)}\;  \leq \lambda \abs{x-y}
\end{equation}
%---------------------end equation--------------
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.6}
E_n(f) \leq (\pi /2)^k \Norme{ f^{(k)} }_{\infty} \big/ \big((n+1)(n)(n-
1)\cdots(n-k+2)\big) \; \; \hbox{if} \; f \in \C^{(k)} \; \hbox{and} \; n\geq k
\end{equation}
%---------------------end equation--------------

\smallskip\noindent {\bf Convergence of the Chebyshev series of a function} 


\noindent 
The Chebyshev series of a function $f \in \C^{(k)}$ converges uniformly to $f$ if $k \geq 1$, and is absolutely convergent (for the norm $\norme{f}_{\infty}$) if $k \geq 2$. 
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.7}
S_n(f) = \norme{ s_n(f)-f }_{\infty}\; \leq \sum_{j=n+1}^{\infty} \abs {A_j}
\end{equation}
%---------------------end equation--------------
and (cf.\ \cite{Ri} Theorem 3.12 p. 182)
%--------------------begin equation---------------
\begin{equation} \label{F 5.2.8}
\NOrme{ s_n(f)- u_n^{[n+1]} }_\infty\; \leq \sum_{j=n+2}^\infty \abs {A_j} 
\end{equation}
%---------------------end equation--------------

\smallskip\noindent {\bf Uniform approximation of functions in $\Ci$ by polynomials} 

\noindent 
The following properties are equivalent. 
%-----------------begin item------------------
\begin{itemize}\itemsep2pt

\item [(i)] 
$\forall k \; \; \exists M > 0 \; \; \forall n> 0, \; \; E_n(f) \leq M/n^k$. 

\item [(ii)]
$\forall k \; \; \exists M > 0 \; \; \forall n> 0, \; \; S_n(f) \leq M/n^k$.

\item [(iii)]
$\forall k \; \exists M > 0 \; \forall n> 0, \; \abs {A_n(f)}\; \leq M/n^k$.

\item [(iv)] 
$\forall k \; \exists M > 0 \; \forall n> 0, \; \NOrme{ u_n^{[n+1]} - f }_{\infty} \leq M/n^k$.

\item [(v)] 
The function $f$ is of class $\ca^{\infty}$ (i.e., $f \in \Ci$).
\end{itemize}
%-----------------end item------------------

%
\begin{proof}
(i) and (ii) are equivalent according to (\ref{F 5.2.3}). 

\noindent 
(iv) $\Rightarrow$ (i) trivially. 

\noindent 
(ii) $\Rightarrow$ (iii) because $\abS{A_n(f)}\;  \leq S_n(f) + S_{n-
1}(f)$. 

\noindent 
(iii) $\Rightarrow$ (iv) according to (\ref{F 5.2.7}) and (\ref{F 5.2.8}). 

\noindent 
(iii) $\Rightarrow$ (v). The series $\sum'A_i\Tch_i^{(h)}$ is absolutely convergent according to (\ref{F 5.2.2}) and the inequalities~(iii); therefore we can derive $h$ times term by term the Chebyshev series. 

\noindent 
(v) $\Rightarrow$ (i) from (\ref{F 5.2.6}). 
\end{proof}

\smallskip\noindent {\bf Analyticity and uniform approximation by polynomials} 

\noindent 
The following properties are equivalent 
%-----------------begin item------------------
\begin{itemize}\itemsep2pt

\item [(i)] 

$ \exists M > 0, \;  r < 1 \; \; \forall n> 0  \;\;\, E_n(f) \leq Mr^n$.

\item [(ii)] 

$\exists M > 0, \;  r < 1 \; \; \forall n> 0  \;\;\, S_n(f) \leq Mr^n$. 

\item [(iii)] 

$\exists M >0, \;  r < 1 \;\; \forall n> 0 \; \abS{A_n(f)} \leq Mr^n$.

\item [(iv)] 

$ \exists M > 0, \;  r < 1 \; \; \forall n> 0  \; \NOrme{ u_n^{[n+1]} - f }_{\infty}   \leq Mr^n$.

\item [(v)] 

$\exists r < 1$ such that $f$ is analytic in the complex plane inside the ellipse $\sE_\rho$ of foci $1$, $-1$ and whose half-sum of principal diameters is equal to $\rho = 1/r$.

\item [(vi)] 

$ \exists M > 0, \;  R > 1 \; \; \forall n \;  \NOrme{f^{(n)} }_{\infty}  \leq MR^nn!$\,.

\item [(vii)] 

$f$ is analytic on the interval $[-1,1]$.
\end{itemize}
%-----------------end item------------------
Furthermore the lower bound on the possible values of $r$ is the same in the first 5 cases.\footnote{The equivalences (i) \ldots (iv) are shown as for the previous proposition. For the equivalence with (v) see for example \cite{Ri}. Condition (vi) very nearly represents analyticity in the open $U_R$ formed by points whose distance from the interval is less than $1/R$.}

\begin{figure}[htbp] 
\begin{center}
\includegraphics*[width=10cm]{fi521}
\end{center}
\caption[The ellipse $\sE_\rho$]{\label{fi521} 
the ellipse $\sE_\rho$} 
\end{figure} 

\begin{remarks}\label{rem-anal}~

\noindent 
1) The space of analytic functions on a compact interval therefore has a good constructive description, in terms of Chebyshev series for example. It appears as a nested countable union of complete metric spaces (those obtained using definition (iii) and setting the integer $M$ and the rational $r$, for example). 
The space of $\Ci$-functions is much more difficult to describe constructively, mainly because there is no pleasant way of generating rapidly decaying sequences of rationals, due to the $\forall k\; \exists M$ in the definition of rapid decay.\footnote{This alternation of quantifiers takes an explicit form when we give explicitly $M$ as a function of $k$. But, by virtue of Cantor's diagonal argument, there is no effective way of generating effective functions from $\NN$ to $\NN$.} 

\noindent 
2) Condition (i) can also be read as follows: the function $f$ can be approximated to within $1/2^n$ (for the uniform norm) by a polynomial of degree $\leq c.n$, where $c$ is a fixed constant, i.e.\ again: there exists an integer $h$ such that
$E_{hn}(f) \leq 1/2^n$. 

\noindent 
 The same applies to conditions (ii), (iii) and (iv). This implies that the function $f$ can be approximated to within $1/2^n$ by a polynomial with dyadic coefficients whose size (in dense presentation on the basis of $X^n$ or on the basis of $\Tch_n$) is in $\Oo(n^2)$. The size of the sum of the absolute values of the coefficients is $\Oo(n)$. 
Bakhvalov (cf.\ \cite {Ba} IV-8 Th.\ p.\ 233) gives a sufficient condition of the same kind for a function $f$ to be analytic in a lens with extremities $-1$ and $1$ of the complex plane (and no longer in a neighbourhood of the segment): it is sufficient that the sum of the absolute values of the coefficients of a polynomial giving $f$ to within $1/2^n$ is bounded by $M2^{qn}$ (where $M$ and $q$ are fixed constants). In other words
the size of the sum of the absolute values of the coefficients of a polynomial approximating $f$ to within $1/2^n$ is $\Oo(n)$.
\begin{figure}[htbp] 
\begin{center}
\includegraphics*[width=12cm]{fi522}
\end{center}
\caption[Bakhvalov's lens]{\label{fi522} 
Bakhvalov's lens} 
\end{figure} 
\end{remarks}



\smallskip\noindent {\bf Gevrey class and uniform approximation by polynomials} 

\noindent 
If $f$ is a $\p$-point of $\cw$ given by a $\p$-sequence $\; m \mapsto P_m\; $
 (with $\Norme{ f - P_m}_{\infty} \leq 2^m$), then the degree of $P_m$ is bounded by a polynomial in $m$, so there exists an integer $ k$ and a constant $ B$ such that the degree of $ P_m$ is bounded by $(Bm)^k$. 
Let $ n $ be arbitrary, and consider the largest integer~$ m $ such that $(Bm)^k \leq n$, i.e.\ $m:= \Flo{\sqrt[k]{n}/B}$. 
We therefore have $m+1 \geq \sqrt[k]{n}/B$. By letting $r := 1/2^{1/B}$
 and $\gamma := 1/k$, we obtain: 
\[
E_n(f) \leq 1/2^m \leq 2.r^{n^{\gamma}}, \; {\rm with} \; r \in  (0,1) , \; 
\gamma > 0.
\]
In particular, the sequence $E_n(f)$ decreases rapidly and $f\in\Ci$.
This leads us to study the functions $f$ for which this kind of bound is obtained.

\begin{definition}[Gevrey class\footnote{Cf. for example Hörmander \cite{Ho}: The Analysis of Linear Partial Differential Operators I p 281 (Springer 1983). 
A function is Gevrey of order $ 1 $ if and only if it is analytic.}] \label{522}

\noindent 
A function $f\in \Ci$ is said to be in the Gevrey class of order $\alpha > 0 $ if its derivatives satisfy a majorisation: 
\[
\NOrme{f^{(n)} }_{\infty}\leq  MR^n n^{\alpha n}
\]
The Gevrey class is obtained when the order $\alpha$ is not specified. 
\end{definition}

\begin{theorem} \label{523}
Let $f\in \C$. The following properties are equivalent. 
%-----------------begin item------------------
\begin{itemize}

\item [(i)] 

$ \exists M > 0, \; \; r < 1, \; \; \gamma > 0 \; \; \forall n> 0, \; \; E_n(f) \leq Mr^{n^{\gamma}}$,

\item [(ii)]
 
$ \exists M > 0, \; \; r < 1, \; \; \gamma > 0 \; \; \forall n> 0, \; \; S_n(f) \leq Mr^{n^{\gamma}}$,

\item [(iii)]
 
$ \exists M > 0, \; \; r < 1, \; \; \gamma > 0 \; \; \forall n> 0, \; \; \abS{A_n(f)}\; \leq Mr^{n^{\gamma}}$, 

\item [(iv)]
 
$ \exists M > 0, \; r < 1 \; \forall n> 0, \; \NOrme{ u_n^{[n+1]} - f }_{\infty} \leq Mr^{n^{\gamma}}$,

\item [(j)] 

$ \exists c, \beta > 0 \; \forall n> 0\; \forall m \geq cn^{\beta}, \; E_m(f) \leq 1/2^n $,

\item [(jj)]

$ \exists c, \beta > 0 \; \forall n> 0,\; \forall m \geq cn^{\beta}, \; S_m(f) \leq 1/2^n $,

\item [(jjj)] 

$ \exists c, \beta > 0 \; \forall n> 0,\; \forall m \geq cn^{\beta}, \; 
\abS{A_m(f)}\; \leq 1/2^n $,

\item [(jw)]
 
$ \exists c, \beta > 0 \; \forall n> 0\;\forall m \geq cn^{\beta}, \NOrme{ u_m^{[m+1]} - f }_{\infty} \leq 1/2^n $,

\item [(k)] 

$f$ is in the Gevrey class.
\end{itemize}
%-----------------end item------------------
\end{theorem}

%
\begin{proof}
(i) $\Leftrightarrow$ (ii) from Equation (\ref{F 5.2.3}). 

\noindent 
(i) $\Rightarrow$ (iii) from Equation (\ref{F 5.2.4}). 

\noindent 
(iv) $\Rightarrow$ (i) is trivial.

\noindent 
The 4 equivalences of type (i) $\Leftrightarrow$ (j) result from the same kind of calculation as the one done before the theorem.

\noindent 
The implication (jjj) $\Rightarrow$ (jw) results from a simple inequality  using the equations (\ref{F 5.2.7}) and (\ref{F 5.2.8}). 

\noindent 
Assume (k), i.e.\ that $f$ is Gevrey of order $\alpha$, and show (i). 
Finding an upper bound is only tricky for $\alpha \geq 1$, which we will now assume. Applying Jackson's theorem, we obtain an inequality $E_n(f) \leq \pi^{k} \Norme{f^{(k)} }_{\infty} /n^k$
 as soon as $n \geq 2k$, which with Gevrey's bound gives $E_n(f) \leq A(Ck^{\alpha}/n)^k$. 
We can assume $C^{1/ \alpha} \geq 2$ and take for $k$ an integer close to $(n/2C)^{1/ \alpha}$ ($ \leq n/2$), hence to a very close approximation:
\[
E_n(f) \leq A(1/2)^{(n/2C)^{1/ \alpha}} = Ar^{n^{\gamma}}, \; {\rm with} \; \gamma = 1/ \alpha.
\]
Now we suppose that $f$ verifies (j) and we show that $f$ is Gevrey. 

\noindent 
Finding an upper bound is only tricky for $\beta \geq 1$, which we will now assume. We write $f^{(k)} = \sum' A_m \Tch_m^{(k)}$. 
Hence $\Norme{f^{(k)} }_{\infty} \leq \sum' \abS{A_m} m^{2k}$ according to V.A.\ Markov's inequality (\ref{F 5.2.2}). 
We now use the bound (jjj). We take $c$ and $\beta$ to be integers for simplicity (this is not a restriction). In the sum above, group the terms for $ m $ between $cn^{\beta}$ and $c(n+1)^{\beta}$. In the packet obtained, each term is bounded by $ (1/2^n) m^2k$, and the number of terms is bounded by $ c(n+1)b,$ hence:
\[
\Norme{f^{(k)} }_\infty \leq \sum_n (c(n+1)^{\beta}/2^n)(c(n+1)^{\beta})^{2k} \leq 2c^{2k+1} \sum_n (n+1)^{\beta (2k+1)}/2^n
\]
\[
\leq 4c^{2k+1} \sum_n n^h/2^n, \; {\rm where} \; h = \beta(2k+1).
\] 
We bound this series by the series obtained by deriving $h$ times the series $\sum_n x^n$ (then making $x=1/2$) and we obtain that $f$ is Gevrey of order $2\beta$. 
\end{proof}



\begin{remarks}\label{524}~

\noindent 
1) The space of Gevrey functions therefore has a pleasant constructive presentation.

\noindent 
2) For $\gamma = 1$ we obtain the analytic functions. For $\gamma > 1$, we obtain the entire functions.

\noindent 
3) For $\gamma \leq 1$, the upper limit of possible $\gamma$ is the same in (i), (ii), (iii) and (iv), the lower limit of possible $\beta$ is the same in (j), (jj), (jjj) and (jw), with $\gamma = 1/ \beta$. 

\noindent 
4) Based on the case of analytic functions ($\alpha = \beta = \gamma = 1$), we can hope, for the implication (j) $\Rightarrow$ (k), to obtain that $f$ is Gevrey of order $\beta$ by means of a more sophisticated majorisation calculation.

\noindent 
5) In (j), (jj), (jw) we can remove the quantifier $\forall m$ if we take $ c$ and $\beta$ to be integers and $m = cn^{\beta}$.
\end{remarks} 


\subsubsection{Returning to questions of complexity in the space $\cw$}
\label{subsubsec 523}

We start with an

\smallskip \noindent 
{\bf Important remark}. With respect to $\DD[X]$, the ordinary dense presentation (based on $X^n$) and the dense presentation based on Chebyshev polynomials $\Tch_n$, are equivalent in polynomial time. We will use either of the two bases, depending on the convenience of the moment.

\smallskip  Recall also that the norm $\; P \to \norme{ P }_{\infty}\; $ is a $\p$-computable function from $\DD[X]$ to $\RR$.

The proof of the following proposition is immediate. In fact, any functional defined on $\cw$ which has a polynomial modulus of uniform continuity and whose restriction to $\DD[X]$ is easy to compute is itself easy to compute. This proposition takes on its full value in view of the characterisation \thref{527}.

\begin{proposition}[good behaviour of usual functionals] \label{526}~ 

\noindent 
The functionals:
\[
\cw \to \RR \quad  f \mapsto \norme{f}_{\infty}, \; \norme{f}_2, \; \norme{f}_1
\]
are  uniformly of class $\p$.\\
The functionals:
\[
\cw \times [0,1] \times [0,1] \to \RR \quad  (f,a,b) \mapsto \sup_{x 
\in [a,b]} (f(x)), \; \int_{a}^{b} f(x) dx
\]
are uniformly of class $\p$.
\end{proposition}

\begin{theorem}[characterisation of the $\p$-points of $\cw$] \label{527}~ 

\noindent 
Let $f \in \C$. The following properties are equivalent.

\begin{itemize}
%
\item [a)]
 The function $f$ is a $\p$-point of $\ckf$ and is in the Gevrey class.

\item  [b)]  The sequence $A_n(f)$ is a $\p$-sequence in $\RR$ and verifies an inequality $\abS{A_n(f)}\; \leq Mr^{n^{\gamma}}$ with $M > 0$, $\gamma > 0$ and $0 < r < 1$. 

\item  [c)] The function $f$ is a $\p$-point of $\cw$.
\end{itemize}
\end{theorem}
%
\begin{proof}
The implications (c) $\Rightarrow$ (a) and (c) $\Rightarrow$ (b) are easy from \thref{523}. 

\noindent 
(b) $\Rightarrow$ (c). A polynomial (in dense presentation on the basis of $\Tch_n$) approximating $f$ with precision $1/2^{n+1}$ is obtained with the partial sum extracted from the Chebyshev series of $f$ stopping at the index $(Bn)^h$ (where $B$ and $h$ are calculated from $M$ and $\gamma$). It remains to replace each Chebyshev coefficient by a dyadic approximating it with precision 
\[
1/ \Flo{(Bn)^h2^{n+1}}  = 1/2^{n+1+h \log(Bn)}.
\]

\noindent 
(a) $\Rightarrow$ (c). A polynomial approximating $f$ to within $1/2^{n+1}$ is obtained with $u_m^{[m+1]}$ (where $m = (Cn)^k$), $C$ and $k$ are calculated from $M$ and $\gamma$, taking into account equations (\ref{F 5.2.7}) and (\ref{F 5.2.8})). 
The formula defining $u_m^{[m+1]}$ provides its coefficients on the basis of $\Tch_n$ and we can calculate (in polynomial time) an approximation to within $1/2^{n+1+k \log(Cn)}$ of these coefficients by taking advantage of the fact that the double sequence $\xi_i^{[n]}$ is a $\p$-sequence of reals and that the function~$f$ is a $\p$-point of $\ckf$. 
\end{proof}

An immediate consequence of the previous theorem is obtained in the case of analytic functions.

\begin{theorem} \label{528}
Let $f \in \C$. The following properties are equivalent. 
%-----------------begin item------------------
\begin{itemize}

\item [(a)] 

The function $f$ is an analytic function and it is a $\p$-point of $\ckf$.

\item [(b)] 

The sequence $A_n(f)$ is a $\p$-sequence in $\RR$ and verifies an inequality
\[
 \abS{A_n(f)}\; \leq Mr^n \; (M > 0, \; r < 1).
\]

\item [(c)] 

The function $f$ is an analytic function and is a $\p$-point of $\cw$.
\end{itemize}
%-----------------end item------------------
\end{theorem}

\begin{definition}[$\p$-analytic functions]\label{529} 

\noindent 
When these properties are verified, we say that the function $f$ is $\p$-analytic on the interval $[-1,1]$.
\end{definition}

\begin{theorem}[fairly good behaviour of derivation with respect to complexity] \label{5210} 
~

\noindent 
Let $f$ be a $\p$-point of $\cw$. Then the sequence $k \mapsto f^{(k)}$ is a $\p$-sequence of $\cw$. 
More generally, if $(f_p)$ is a $\p$-sequence of $\cw$ then the double sequence $(f_p^{(k)})$ is a $\p$-sequence of $\cw$.
\end{theorem}

\begin{proof} We give the proof for the first part of the proposition. It would apply without change for the case of a $\p$-sequence of $\cw$. 

\noindent 
The function $f$ is a $\p$-point of $\cw$ given as the limit of a  $\p$-computable sequence $n \mapsto  P_n$. 
The double sequence $P_n(k)$ is $\p$-computable (unary entries). There are two integers $a$ and $b$ such that the degree of $\po_n$ is bounded by $2^a n^b$. Therefore, according to V.A.\ Markov's inequality (\ref{F 5.2.2}) we have the bound
\[
\NOrme{ P_n^{(k)} - P_{n-1}^{(k)} }_\infty \leq (2^an^{2b})^k \Norme{ P_n - P_{n-1} }_{\infty} \leq (2^an^{2b})^k /2^{n-2} = 1/2^{n-(k.(a+2b \log(n))+2)}.
\]
We can then easily determine a constant $n_0$ such that, for $n \geq 2n_0k$, we have 
\[
n \geq 2(k.(a+2b \log(n))+2),
\] 
and therefore 
\[
\NOrme{ P_n^{(k)} - P_{n-1}^{(k)} }_\infty \leq 1/2^{n/2},
\] 
so that by posing $\nu(n) := 2 \sup(n_0k,n)$, we have, for $q \geq \nu(n),$ 
\[
\NOrme{ P_q^{(k)} - P_{q+1}^{(k)} }_\infty \leq 1/2^n,
\]
and therefore, since $\nu(n+1) = \nu(n)$ or $\nu(n)+2,$ 
\[
\NOrme{ P_{\nu(n)}^{(k)} - P_{\nu(n+1)}^{(k)} }_\infty \leq 1/2^{n-1},
\]
 hence finally 
\[
\NOrme{ P_{\nu(n)}^{(k)} - f^{(k)} }_\infty \leq 1/2^{n-2}.
\]
We end by noting that the double sequence $(n,k) \mapsto P_{\nu(n+2)}^{(k)}$ is $\p$-computable. 
\end{proof}


\begin{corollary} \label{5211}
If $f$ is a $\p$-point of $\cw$ and $a, b$ two $\p$-points of $[-1,1]$, then the sequences 
\[
\NOrme{f^{(n)} }_{\infty}, \; \NOrme{f^{(n)} }_2, \; \NOrme{f^{(n)} }_1, \; \NOrme{f^{(n)}(a)} \;{\rm and} \; \sup\nolimits_{x \in [a,b]} (f^{(n)}(x))
\]
are $\p$-sequences in $\RR$.

\noindent
More generally, if $(f_p)$ is a $\p$-sequence of $\cw$ then the double sequences 
\[
\NOrme{f_p^{(n)}}_\infty, \; \NOrme{f_p^{(n)} }_2, \; \NOrme{f_p^{(n)} }_1, \; \NOrme{f_p^{(n)}(a)} \; {\rm and} \; \sup\nolimits_{x \in [a,b]} (f_p^{(n)}(x))
\]
are $\p$-sequences in $\RR$.
\end{corollary}

The proof of \thref{5210} (and therefore of Corollary \ref{5211}) is somewhat uniform and has a more general meaning. We will now define the natural framework in which this theorem applies and give a new, more general and more satisfactory statement.

\begin{definition}\label{5212}
For $c$ and $\beta > 0$ let $\Gv_{c,\beta}$ be the class of Gevrey functions satisfying the inequality (of the kind (jjj) in \ref{523})
\[
 \forall m > cn^{\beta} \; \; \abS{A_m(f)}\; \leq 1/2^n
\] 
This is a closed convex part of $\C$. For any $c$ and $\beta$, 
let $\Y_{\Gv_{c, \beta}}$ be the elements of $\DD[X]$ which are in the class $\Gv_{c, \beta}$. 
This set $\Y_{\Gv_{c, \beta}}$ can be taken as the set of rational points of a rational presentation $\sC_{\Gv,c,\beta}$ of $\Gv_{c,\beta}$.
\end{definition}

Note that the test for membership of the subset $\Y_{\Gv_{c, \beta}}$  of 
$\DD[X]$ is in polynomial time, since the $A_m(f)$'s for a polynomial $f$ are its coefficients on the Chebyshev basis.
In this new framework \thref{528} has a more uniform and efficient formulation.

\begin{theorem} \label{5213}
Each functional $f \mapsto f^{(n)}$ is a function uniformly of class $\p$ from $\sC_{\Gv_{c, \beta}}$ to $\cw$. 
More precisely, the sequence of functions 
\[
(k,f) \mapsto f^{(k)} \; : \; \NN_1 \times \sC_{\Gv_{c, \beta}} \to \cw 
\]
is uniformly of class $\p$ (in the sense of Definition \ref{229}).
\end{theorem}

\begin{proof} 
The double sequence $(k,f) \mapsto f^{(k)}$ is of low complexity as a function from $\NN_1 \times \DD[X]$ to~$\DD[X]$ and therefore also as a function from $\NN_1 \times \Y_{\Gv, \beta}$ to $\DD[X]$.

\noindent 
The whole problem is therefore to show that we have a polynomial modulus of uniform continuity (in the sense of \ref{229}). 
We need to calculate a function $\mu(k,h)$ such that for all $f$ and $g$ in $\Y_{\Gv, \beta}$:
\[
\norme{ f - g }_\infty \leq 1/2^{\mu (k,h)} \Rightarrow \NOrme{f^{(k)} - g^{(k)} }_\infty \leq 1/2^h. 
\] 
This calculation is rather similar to the one used in the proof of Theorem \ref{528}. We write 
\[
\NOrme{f^{(k)} - g^{(k)} }_\infty \leq \NOrme{f^{(k)} - s_n(f)^{(k)} }_{\infty} + \NOrme{ g^{(k)} - s_n(g)^{(k)} }_{\infty} + \NOrme{ s_n(f-g)^{(k)} }_{\infty}.
\]
In the sum of the second member, the first two terms are bounded as follows
\[
\NOrme{f^{(k)} - s_n(f)^{(k)} }_{\infty}\leq  \sum_{q>n} \abS{A_q(f)} \NOrme{ T_q^{(k)} }_\infty \leq \sum_{q>n} \abS{A_q(f)} q^{2k}.
\]
Since we have: $\forall q > cn^{\beta} \; \abS{A_q(f)}\; \leq 1/2^n$, $\sum_{q>n} \abS{A_q(f)} q^{2k}$ is convergent and we can give exlicitly a polynomial $\alpha(k,h)$ such that (see explanation at the end of the proof),
\[
{\rm with} \; n = \alpha(k,h) \; \; \forall f \in \Y_{\Gv,c,\beta} \; : \; \; 
\sum_{q>n} \abS{A_q(f)} q^{2k} \leq 1/2^{h+2}.
\]
Once we have set $n = \alpha(k,h)$ we need to make small the term $\NOrme{ s_n(f-g)^{(k)} }_{\infty}$.
V.A.\ Markov's inequality (\ref{F 5.2.2}) implies that 
\[
\NOrme{ s_n(f-g)^{(k)} }_\infty \leq \Norme{ s_n(f-g) }_{\infty} n^{2k}.
\]
All that remains is to obtain a suitable bound for 
$\norme{s_n(f-g)}_{\infty}$ from $\norme{ f-g }_{\infty}$.
For example, we can use the inequality $S_n(f) \leq (4+ \log (n)) E_n(f)$ (from Formula (\ref{F 5.2.3})) whence
\[
\Norme{f^{(k)} }_\infty \leq \norme{f}_\infty + S_n(f) \leq \norme{f}_\infty + (4+ \log (n)) E_n(f) \leq (5+ \log (n)) \norme{f}_\infty.
\]
Finally, let's explain $\alpha(k,h)$. We have the inequalities
\[
\sum_{q \geq cn_0^{\beta}} \abS{A_q(f)} q^{2k} \leq \sum_{n \geq n_0}\sum_{q \leq c(n+1)^{\beta}}q^{2k}/2^n \leq \sum_{n \geq n_0} c(n+1)^{\beta}(c(n+1)^{\beta})^(2k)/2^n,
\]
so
\[
\sum_{q \geq cn_0^{\beta}} \abS{A_q(f)} q^{2k} \leq \sum_{n \geq n_0} (c(n+1)^{\beta})^{2k+1}/2^n \leq \sum_{n \geq n_0} 1/2^{\varphi (n, \beta ,c, k)}
\]
with, if $2^a \geq c$,
\[
\varphi (n, \beta ,c, k) \geq n- (2k+1)a-(2k+1) \beta \log(n+1).
\]
If we have 
\[
{\rm for} \; n \geq n_0 \; \; \varphi (n, \beta ,c, k) \geq h+n/2+4, \eqno (\star)
\]
we obtain
\[
\sum_{q \geq cn_0^{\beta}} \abS{A_q(f)} q^{2k} \leq \sum_{n \geq n_0} 1/2^{\varphi (n, \beta ,c, k)} \leq (1/2^{h+2}(1/4) \sum_{n \geq n_0} 1/2^{n/2} \leq 1/2^{h+2}.
\]
And we can take $\alpha (k,h) = cn_0^{\beta}$. 

\noindent 
It remains to be seen how we can achieve the $(\star)$ condition. 

\noindent 
For any integer $b$ we have an integer $\nu(b)\leq \max(8,b^2)$ for which 
\[
n > \nu (b) \; \Rightarrow\; n \geq b \log (n+1).
\]
If therefore $n \geq \nu (4(2k+1) \beta)$ we obtain
\[
\varphi (n, \beta ,c, k) \geq n-(2k+1)a-(2k+1)\beta \log(n+1) \geq (3n/4)-(2k+1)a
\]
and the condition $\varphi (n, \beta ,c, k)\geq h+n/2+4$ is fulfilled if $n/4 \geq (2k+1)a +h +4$.
Hence $\alpha(h,k) = c \max(\nu (4(2k+1)\beta ),4((2k+1)a + h +4))^{\beta}$. 
\end{proof}
 
Applying Proposition \ref{526}, we obtain:

\begin{corollary} \label{5214}~\\
i) The three sequences of functionals 
\[
(n,f) \mapsto \Norme{f^{(n)} }_{\infty} , \;  \Norme{f^{(n)} }_2, \; \Norme{f^{(n)} }_1 \qquad  \NN_1 \times \sC_{\Gv,c, \beta} \to \RR
\]
are uniformly of class $\p$ (in the sense of Definition \ref{229}).

\noindent 
ii) The sequence of functionals
\[(n,f,x) \mapsto f^{(n)}(x) \qquad 
\NN_1 \times \sC_{\Gv,c, \beta} \times [-1,1] \to \RR  
\] 
is uniformly of class $\p$.

\noindent 
iii) The sequence of functionals
\[  (n,f,a, b) \mapsto \sup_{x \in [a,b]} (f^{(n)}(x)) \qquad 
\NN_1 \times \sC_{\Gv,c, \beta} \times [-1,1] \times [-1,1] \to \RR 
\] 
is uniformly of class $\p$. 
\end{corollary}

\begin{remark} 
Theorems \ref{527}, \ref{528}, \ref{5210}, \ref{5213}, Proposition \ref{526} and Corollaries \ref{5211} and \ref{5214} significantly improve the results of \cite{KF82}, \cite{KF88} and \cite{Mu87} on analytic functions computable in polynomial time (in the Ko-Friedman sense).
\end{remark}


\subsection {Comparisons of different presentations of class $\p$}\label{subsec53}

In this section, we obtain the following chain of functions uniformly of class $\p$ for the identity of $\czu$. 
\[
\cw \to \csp \to \crf \equiv \csr \to \ckf 
\] 
and none of the $\to$ arrows in the line above is a $\p$-equivalence except perhaps $\csp \to \crf$ and very possibly $\crf \to \ckf$ (it would imply $\p = \np$).
First of all, it is clear that the identity of $\czu$ is of class $\LINT$ for the following cases: 
\[
\cw \to \csp ; \quad  \csp \to \csr; \quad  \crf \to \csr .
\]
Furthermore, the identity of $\czu$ is of class $\p$ in the following case 
\[
\crf \to \caf 
\] 
(in fact, only the calculation of the magnitude is not completely trivial, and it is surely in $\DTI (\Oo(N^2))$). 

We still have to show that the identity of $\czu$ from $\csp$ to $\crf$ and the one from $\csr$ to $\crf$ are of class~$\p$.

\begin{theorem} \label{531}
The identity of $\czu$ from $\csp$ to $\crf$ is uniformly of class $\p$.
\end{theorem}

\begin{proof} 
Let $n \in \NN_1$ and $f \in \ysp$. We need to calculate an element $g \in \yrf $ such that 
\[
\Norme{ \wi{f} - \wi{g} }_{\infty} \leq 1/2^n.
\] 
We have $f = ((x_0,x_1,\ldots,x_t),(P_1,P_2,\ldots,P_t))$ with $x_0=0$, $x_t=1$ and $P_i(x_i) = P_{i+1}(x_i)$ for $i = 1,\ldots,t-1$.
 We calculate $m \in \NN_1$ such that $2^m$ bounds  
$\norme{P_i}_{\infty}$ and  $\norme{P_i'}_{\infty}$ for each $i$. 

\noindent 
We let $p=m+n+1$ and $z_i = x_i - 1/2^{p+1}$ for $i=0,\dots,t-1$. For $i = 0$  we let $h_0 := -C_{p,z_1}$. For $i = t-1$ we let $h_{t-1}:=C_{p,z_{t-1}}$. 
For $i = 1,\ldots,t-2$ we let $h_i := C_{p,z_i} - C_{p,z_{i+1}}$  (see Figure \ref{fi531}). 

\noindent 
\begin{figure}[htbp] 
\begin{center}
\includegraphics*[width=12cm]{fi531}
\end{center}
\caption[The $h_i$ function]{\label{fi531} 
the function $h_i$} 
\end{figure} 

\noindent 
The function $\wi{f}$ is roughly equal to 
$h = \sum_i h_iP_{i+1}$: on the intervals $[z_i+1/2^p, z_{i+1} ]$ 
we get $h =\wi{f}$, while on an interval 
\[
[z_i, z_i +1/2^p] = [x_i - 1/2^{p+1}, x_i +1/2^{p+1}]
\]
we obtain $h = h_{i-1}P_i + h_i P_{i+1}$ which is a weighted average of $P_i$ and $P_{i+1}$, instead of $P_i$ or $P_{i+1}$. 
At a point $x$ on this interval, we have $\abs{x-x_i}\; \leq 1/2^{p+1}$, 
we apply the mean value theorem and using $P_i(x_i) =P_{i+1}(x_i)$ we obtain
\[
\abs{P_i(x) - P_{i+1}(x)}\; \leq \abs{P_i(x) - P_i(x_i)} + \abs{P_{i+1}(x) - P_{i+1}(x_i)}\; \leq 2^{m+1}/2^{p+1} \leq 1/2^{n+1}
\]
and therefore
\[
\Norme{ \wi{f} - h }_{\infty} \leq 1/2^{n+1}.
\]
It remains to replace each $h_i$ by an element $g_i$ of $\yrf$ satisfying $\Norme{ \wi{g_i} - h_i }_{\infty} \leq 1/(t2^{p})$
 (so that
$\Norme{\wi{g_i}P_{i+1}-h_iP_{i+1}}_{\infty}\leq 1/(t2^{n+1})$
and therefore
\[
\NOrme{ h - \sum\nolimits_i \wi{g_i}P_{i+1} }_\infty \leq 1/2^{n+1}.
\]
In view of Proposition \ref{337} concerning the approximation of functions $C_{p,a}$ by rational functions, the calculation of $g_i$ is done in polynomial time from the data $(f,n)$. It remains to express $\sum_i\wi{g_i}P_{i+1}$ in form $\wi{g}$ with $ g \in \yrf$, which is not difficult, to obtain $\Norme{ \wi{f} - \wi{g} }_{\infty} \leq 1/2^n.$ 
\end{proof}

\begin{theorem} \label{532}
The representations $\crf$ and $\csr$ of $\czu$ are $\p$-equivalent.
\end{theorem}

\begin{proof}
From an arbitrary element $f=((x_0,x_1,\ldots,x_t),((P_1,Q_1),\ldots,(P_t,Q_t)))$ of $\ysr$ we can calculate in polynomial time dyadic numbers $d_1, d_2,\ldots,d_t \geq 1$  satisfying $d_iQ_i(x_i) = d_{i+1}Q_{i+1}(x_i)$ (and therefore also $d_iP_i(x_i) = d_{i+1}P_{i+1}(x_i)$) for $i = 1, \ldots, t-1$.
Then $\wi{f} = \wi{g} / \wi{h}$ where $g,h \in \Y_{Sp}$ are given by:
\[
g = ((x_0,x_1,\ldots,x_t),(d_1P_1,\ldots,d_tP_t)) \quad  {\rm and} \quad  h = ((x_0,x_1,\ldots,x_t),(d_1Q_1,\ldots,d_tQ_t)).
\]
We conclude by using  \thref{531} which allows us to approximate $\wi g$ and $\wi h$ by rational functions. 
\end{proof}
 



%--- SECTION{sec Conclusion}---------------
\section*{Conclusion}\label{sec Conclusion}
\addcontentsline{toc}{section}{Conclusion}
%-------------------------------------------
Hoover has linked in an interesting way the natural notion of complexity of continuous real functions given by Ko and Friedman to another notion, based on arithmetic circuits. In this way he gave a certain ``polynomial time'' version of the Weierstrass approximation theorem. 

In this paper we have generalised Hoover's approach, introducing a uniform  point of view to the notion of rational presentation of a metric space.
This provides a satisfactory general framework for the study of many algorithmic complexity problems in analysis. 
We have also generalised to this approach the results of Ko, Friedman and Müller concerning analytic functions computable in polynomial time. 
The rational presentation $\csl$ $\p$-equivalent to $\ckf$ is the most natural from the point of view of theoretical computer science. 
However, it is not a $\p$-presentation and is ill-suited to numerical analysis as soon as problems more complicated than evaluation arise (the calculation of the norm, or of a primitive, for example).

Among the representations we have studied, the presentation $\cw$ seems to be the easiest to use for many numerical analysis problems. 

As for the presentation by rational functions, it deserves further study. We would like to obtain an analogue of the theorem (given for the presentation $\cw$) concerning the characterisation of $\p$-points.
It would also be interesting to obtain for $\crf$ the $\p$-calculability of certain usual operations in numerical analysis, such as the calculation of a primitive or more generally the calculation of the solution of an ordinary differential equation. 

\bni
{\bf Acknowledgements.}
We would like to thank Maurice Margenstern and the referee for their comments.

%---------------- biblio ----------------------
\addcontentsline{toc}{section}{Bibliographic references}
\begin{thebibliography}{50}

%\vspace*{0.8cm}

\bibitem{Ab} Aberth O.: {\em Computable analysis.}
McGraw-Hill (1980).

\bibitem{Ba} Bakhvalov: {\em Méthodes Numériques.} Editions MIR. Moscou 
(1973).

\bibitem{Be} Beeson M.: {\em Foundations of Constructive Mathematics.} Springer-Verlag (1985).

\bibitem{Bi} Bishop E.: {\em Foundations of Constructive Analysis}. McGraw-Hill, New York  (1967).

\bibitem{BB} Bishop E., Bridges D.: {\em Constructive Analysis.} Springer-Verlag (1985).

\bibitem{Bo} Borodin A.: {\em On relating time and space to size and depth.}
SIAM J. Comput. {\bf 6} (4), 733--744 (1977).

\bibitem{Brent} Brent R.: {\em Fast multiple-precision evaluation of elementary functions.} Journal of the ACM {\bf 23} (2), 242--251 (1976).

\bibitem{Br} Bridges D.: {\em Constructive Functional Analysis.} Pitman, London (1979).

\bibitem{BR} Bridges D., Richman F. : {\em Varieties of Constructive 
Mathematics.} London Math. Soc. LNS 97. Cambridge University Press (1987)

\bibitem{Ch} Cheney E. W.: {\em Introduction to Approximation Theory.}
 Mc Graw Hill Book Company (1966).

\bibitem{Go1} Goodstein R.: {\em Recursive number theory. A development of recursive arithmetic in a logic-free equation calculus}. Studies in Logic and the Foundations of Mathematics. Amsterdam, North-Holland  (1957).

\bibitem{Go} Goodstein R.: {\em Recursive Analysis}. Studies in Logic and the Foundations of Mathematics. Amsterdam, North-Holland  (1961).

\bibitem{Ho87} Hoover J.: {\em Feasibly constructive analysis.} PhD (1987).

\bibitem{Ho90} Hoover J.: {\em Feasible real functions and arithmetic circuits.} Siam J.\ Comput.\ {\bf 19} (1), 182--204 (1990).

\bibitem{Ho} Hörmander: {\em The Analysis of Linear Partial Differential 
Operators I.} Springer (1983).

\bibitem{KF82} Ker-I. Ko, Friedman H.: {\em Computational complexity of real functions.} Theoretical Computer Science {\bf 20}, 323--352 (1982).

\bibitem{KF88} Ker-I. Ko, Friedman H.: {\em Computing power series in polynomial time.}
Adv. Appl. Math. {\bf 9}, 40--50 (1988).

\bibitem{Ko83} Ker I. Ko: {\em On the definitions of some complexity classes of real numbers.} Math System Theory {\bf 16}, 95--109 (1983).

\bibitem{Ko91} Ker I. Ko: {\em Complexity theory of real functions.}
 Birkhäuser (1991).

\bibitem{Ku} Kushner B. A.: {\em Lectures on constructive mathematical 
analysis.} AMS Translations of Mathematical monographs \num60  (1984) (Russian version in 1973).

\bibitem{LL} Labhalla S., Lombardi H.: {\em Real numbers, continued fractions and complexity classes.}
Annals of Pure and Applied Logic {\bf 50}, 1--28 (1990).

\bibitem{Lo89} Lombardi H.: {\em Nombres algébriques et approximations.}
 Publications Mathématiques de l'Université (Besan\c con) 
Théorie des Nombres. Fascicule 2. (1989). \url{http://hlombardi.free.fr/publis/these_part3.pdf}

\bibitem{Ma} Margenstern M.: {\em L'école constructive de Markov}. Revue 
d'Histoire des Mathématiques, {\bf 1} (2), 271--305 (1995)

\bibitem{mrr} Mines R., Richman F., Ruitenburg W. {\em A Course in Constructive Algebra.} Springer-Verlag. Universitext. (1988).

\bibitem{Mo} Moutai E.M.: {\em Complexité des fonctions réelles, comparaison de différentes présentations.}
 Thèse de Troisième Cycle, Marrakech (1995).

\bibitem{Mu86} N. Th. Müller: {\em Subpolynomial complexity classes
 of real functions and real numbers.}
Proc 13th ICALP LNCS \num226. 284--293 (1986).

\bibitem{Mu87} N. Th. Müller: {\em Uniform computational complexity 
classes of Taylor series.}
Lecture Notes in Computer Science 267 (1987).

\bibitem{Ne} Newman D.J.: {\em Rational approximation to $\vert x\vert$.}
 Michigan Math. Journal (1964).

\bibitem{Pa} Pan V.: {\em Solving a polynomial equation: some history and recent progress.}
SIAM Rev.  {\bf 39}  (2), 187--220 (1997).

\bibitem{PP} Petrushev P.P., Popov V.A.: {\em Rational approximation of real functions.} Encyclopedia of Mathematics and its applications. Cambridge University Press (1987).

\bibitem{PR} Pour El M., Richards I.: {\em Computability in Analysis and 
Physics.} Perspectives in Mathematical logic. Springer Verlag (1989).

\bibitem{Ri} Th. J. Rivlin: {\em The Chebyshev Polynomials.}
A Wiley Interscience Publication. Wiley \& Sons. New York (1974). 

\bibitem{Sc} Schnorr C.P.: {\em Satisfiability is quasilinear complete in NQL.}
J. Ass. Comput. Machinery {\bf 25} (1), 136--145 (1978).

\bibitem{St} Stern J.: {\em Fondements mathématiques de l'informatique.}
Mc Graw-Hill, Paris, (1990).


\end{thebibliography}







\usepackage[most]{tcolorbox}
\usepackage{graphicx} 
% \usepackage{subfigure}
\usepackage{subcaption}
\usepackage{wrapfig}
\usepackage{xcolor}
\usepackage{xspace}
\usepackage{booktabs}
\usepackage{url}
\usepackage{multirow}
\usepackage[linesnumbered, boxed]{algorithm2e}
\usepackage{amsmath, amsthm}
\usepackage{listings}

\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}    
\usepackage{hyperref}       
\usepackage{url}            
\usepackage{amsfonts}       
\usepackage{nicefrac}       
\usepackage{microtype}      

\usepackage{amssymb}
\usepackage{mylstlinebgrd}

\usepackage{geometry}
\geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
\usepackage[numbers, sort]{natbib} 
\usepackage{babel}
\usepackage{siunitx}
\usepackage{bm}
\usepackage{bbm}
\usepackage{caption}
\usepackage{appendix}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\definecolor{eclipseBlue}{RGB}{42,0.0,255}
\definecolor{eclipseGreen}{RGB}{63,180,95}
\definecolor{eclipsePurple}{RGB}{175,0,25}
\definecolor{codewhite}{rgb}{0.70,0.70,0.70}

\definecolor{moderator}{HTML}{e3716e}
\definecolor{player1}{HTML}{bdb5e1}
\definecolor{player2}{HTML}{7ac7e2}
\definecolor{player3}{HTML}{f7df87}
\definecolor{player4}{HTML}{54beaa}
\definecolor{player5}{HTML}{2983b1}
\definecolor{player6}{HTML}{eca680}

\lstset{linewidth=.95\textwidth, xleftmargin=.08\textwidth}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,
    breakindent=-3.5pt,
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4,
    postbreak={
    	\mbox{
    		\lst@linebreakbgrd
    		\rotatebox[y=0.7ex]{180}{\color{black}$\Lsh\,$}
    	}
    },
}

\lstdefinelanguage{Dialog}{
	backgroundcolor=\color{backcolour},   
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,   
    breakindent=-3.5pt,
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=4,
	morecomment = [l][\color{eclipseGreen}\bfseries]{Assistant:},
    morecomment = [s][\color{eclipseGreen}\bfseries]{1.}{more.},
    morecomment = [l][\color{eclipseBlue}\bfseries]{User:},
}

\lstdefinelanguage{Werewolf}{
	backgroundcolor=\color{backcolour},   
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,   
    breakindent=-3.5pt,
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=4,
    morecomment = [l][\color{player1}\bfseries]{Player1:},
     morecomment = [l][\color{player2}\bfseries]{Player2 :},
     morecomment = [l][\color{player3}\bfseries]{Player3 :},
     morecomment = [l][\color{player4}\bfseries]{Player4 :},
     morecomment = [l][\color{player5}\bfseries]{Player5 :},
     morecomment = [l][\color{player6}\bfseries]{Player6 :},
     morecomment = [s][\color{moderator}\bfseries]{Moderator :}{\}},
}

\lstset{style=mystyle}

\newcommand{\etal}{\emph{et~al.}\xspace}
\newcommand{\eg}{\emph{e.g.},\xspace}
\newcommand{\ie}{\emph{i.e.},\xspace}
\newcommand{\etc}{etc.\xspace}
\newcommand{\cf}{cf.\/~}
\newcommand\figref[1]{Fig.~\ref{#1}}
\newcommand\figsubref[1]{Fig.~\subref{#1}}
\newcommand\lstref[1]{Listing~\ref{#1}}
\newcommand\tabref[1]{Table~\ref{#1}}
\newcommand\tabsubref[1]{Table~\subref{#1}}
\newcommand\secref[1]{Sec.~\ref{#1}}
\newcommand\equref[1]{Eq.~(\ref{#1})}
\newcommand\appref[1]{Appendix~\ref{#1}}
\newcommand\algref[1]{Alg.~\ref{#1}}
\newcommand\defref[1]{Definition~\ref{#1}}

\newcommand{\ours}{\texttt{KIMAs}\xspace}

\renewcommand{\lstlistingname}{Example}

\setlength{\fboxsep}{0pt}
\newcommand{\mypar}[1]{\noindent{\textbf{#1}}}
\newcommand{\mysubpar}[1]{\noindent{\textit{#1}}}

\newcommand{\zt}[1]{\textcolor{blue}{Zitao: #1}}
\newcommand{\change}[1]{\textcolor{purple}{#1}\xspace}
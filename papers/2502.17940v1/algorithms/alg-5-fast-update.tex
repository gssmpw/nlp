\begin{algorithm}[t]
    \caption{\oursolution:FastUpdate($\boldsymbol{x}_i,\boldsymbol{y}_i$)}
    \label{alg:fast-update}
    \DontPrintSemicolon
    % \KwInput{Graph $\mathcal{G}=(\mathcal{V},\mathcal{E})$, feature matrix $\vect{X}$, threshold $\theta$, stopping probability $\alpha$, propagation step $\mathcal{K}$, training budget $\mathcal{B}$,}
    \KwInput{$\boldsymbol{x}_i$: the column vector of $\boldsymbol{X}$ arriving at timestamp $i$;
    $\boldsymbol{y}_i$: the column vector of $\boldsymbol{Y}$ arriving at timestamp $i$}
    
    \While{$S[0].t+N\leq i$} 
    {
    % \Comment{Remove the overdue snapshot}
        $S$.POPLEFT()
    }
    
    $(\hat{\boldsymbol{A}},\hat{\boldsymbol{B}})\leftarrow (\begin{bmatrix} \hat{\boldsymbol{A}} , \boldsymbol{x}_i \end{bmatrix}, \begin{bmatrix} \hat{\boldsymbol{B}} , \boldsymbol{y}_i \end{bmatrix})$

    \If{columns of $\hat{\boldsymbol{A}} \geq l$}
    {
        $(\hat{\boldsymbol{A}},\hat{\boldsymbol{B}}) \leftarrow COD(\hat{\boldsymbol{A}},\hat{\boldsymbol{B}})$

        $(\boldsymbol{Q}_X,\boldsymbol{R}_X) \leftarrow QR(\hat{\boldsymbol{A}})$
        
        $(\boldsymbol{Q}_Y,\boldsymbol{R}_Y) \leftarrow QR(\hat{\boldsymbol{B}})$
    }
    \Else
    {
        $(\boldsymbol{Q}_X,\boldsymbol{R}_X)\leftarrow IncDec(\boldsymbol{Q}_X,\boldsymbol{R}_X,\boldsymbol{x}_i)$
        
        $(\boldsymbol{Q}_Y,\boldsymbol{R}_Y)\leftarrow IncDec(\boldsymbol{Q}_Y,\boldsymbol{R}_Y,\boldsymbol{y}_i)$
    }

    $(\boldsymbol{U},\boldsymbol{\Sigma},\boldsymbol{V}) \leftarrow SVD(\boldsymbol{R}_X\boldsymbol{R}_Y^T)$
    
    \For{$i = 1,\cdots,l$}
    {
        \If{$\sigma_i\geq \theta$}
        {
            $S$ append snapshot ($\boldsymbol{v}=\boldsymbol{Q}_X\boldsymbol{u}_i\sqrt{\sigma_i}$, $\boldsymbol{u} = \boldsymbol{Q}_Y\boldsymbol{v}_i\sqrt{\sigma_i}$, $s=S[-1].t$, $t=i$)

            $\hat{\boldsymbol{A}}{'}\leftarrow \hat{\boldsymbol{A}} - \boldsymbol{Q}_X\boldsymbol{u}_i\boldsymbol{u}_i^T\boldsymbol{R}_X$

            $\hat{\boldsymbol{B}}{'} \leftarrow \hat{\boldsymbol{B}} - \boldsymbol{Q}_Y\boldsymbol{v}_i\boldsymbol{v}_i^T\boldsymbol{R}_Y$
            
            $\boldsymbol{R}_X' \leftarrow \boldsymbol{R}_X - \boldsymbol{u}_i\boldsymbol{u}_i^T\boldsymbol{R}_X$

            $\boldsymbol{R}_Y' \leftarrow \boldsymbol{R}_Y - \boldsymbol{v}_i\boldsymbol{v}_i^T\boldsymbol{R}_Y$

            $(\hat{\boldsymbol{A}},\hat{\boldsymbol{B}},\boldsymbol{R}_X,\boldsymbol{R}_Y) \leftarrow (\hat{\boldsymbol{A}}{'},\hat{\boldsymbol{B}}{'},\boldsymbol{R}_X',\boldsymbol{R}_Y')$
        }
    }
    
Repeat the above process to the auxiliary sketch  
    
\end{algorithm}

\begin{algorithm}[t]
    \caption{\oursolution: Update(\(\boldsymbol{x}_i,\boldsymbol{y}_i\))}
    \label{alg:simple-update}
    \DontPrintSemicolon
    \KwInput{
     $\boldsymbol{x}_i$: the column vector of $\boldsymbol{X}$ arriving at timestamp $i$;
    $\boldsymbol{y}_i$: the column vector of $\boldsymbol{Y}$ arriving at timestamp $i$
    }
    
    \If{\(i \equiv 1 \pmod{N}\)} 
    {        
        \((\hat{\boldsymbol{A}}, \hat{\boldsymbol{B}}) \leftarrow (\hat{\boldsymbol{A}}', \hat{\boldsymbol{B}}')\).
    
        \((\hat{\boldsymbol{A}}', \hat{\boldsymbol{B}}') \leftarrow (\boldsymbol{0}^{d_x\times l}, \boldsymbol{0}^{d_y\times l})\).

        \(S \leftarrow S'\) and reinitialize \(S'\) as empty.
    }
    
    \While{\(S[0].t + N \le i\)}
    {
        \(S\).POPLEFT() \tcp*[r]{\small Remove expired snapshots}
    }
    
    \(\hat{\boldsymbol{A}},\hat{\boldsymbol{B}} \leftarrow \text{COD}(\hat{\boldsymbol{A}},\hat{\boldsymbol{B}},\boldsymbol{x}_i,\boldsymbol{y}_i)\).\;
    \While{\(\|\hat{\boldsymbol{a}}_1\|_2 \cdot \|\hat{\boldsymbol{b}}_1\|_2 \ge \theta\)}
    {
        Append a snapshot to \(S\): record
        \(
        (\boldsymbol{v}=\hat{\boldsymbol{a}}_1,\, \boldsymbol{u}=\hat{\boldsymbol{b}}_1,\, s=S[-1].t,\, t=i).
        \)
        
        Remove the first row from both \(\hat{\boldsymbol{A}}\) and \(\hat{\boldsymbol{B}}\).\;
        $\hat{\boldsymbol{a}}_2, \hat{\boldsymbol{b}}_2$ becomes the new $\hat{\boldsymbol{a}}_1, \hat{\boldsymbol{b}}_1$
    }
    
    Repeat Lines 5-11 for the auxiliary sketch\;
\end{algorithm}


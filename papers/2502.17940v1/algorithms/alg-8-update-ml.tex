\begin{algorithm}[t]
    \caption{\newsolution:Update($\boldsymbol{x}_i,\boldsymbol{y}_i$)}
    \label{alg:update-ml}
    \DontPrintSemicolon
    \KwInput{$\boldsymbol{x}_i$: the column vector of $\boldsymbol{X}$ arriving at timestamp $i$;
    $\boldsymbol{y}_i$: the column vector of $\boldsymbol{Y}$ arriving at timestamp $i$}

    \For{$j = 0,\cdots,L-1$}
    {
        \While{$len(M[j].S)> \lsn$ or $M[j].S[0].t \leq i-N$}
        {
            $M[j].S.POPLEFT()$
        }
        \If{$\left\|\boldsymbol{x}_i\right\|_2\left\|\boldsymbol{y}_i\right\|_2 \geq 2^j\epsilon N$}
        {
            $M[j].S$ append snapshot ($\boldsymbol{u}=\boldsymbol{x}_i$, $\boldsymbol{v}=\boldsymbol{y}_i$, $s=M[j].S[-1].t$, $t = i$)
            
            $M[j].S'$  append snapshot ($\boldsymbol{u} = \boldsymbol{x}_i$, $\boldsymbol{v} = \boldsymbol{y}_i$, $s=M[j].S'[-1].t$, $t = i$)
        }
        \Else
        {
            $M[j].\textit{FastUpdate}(\boldsymbol{x}_i,\boldsymbol{y}_i)$
        }
    }
    
\end{algorithm}
    
        
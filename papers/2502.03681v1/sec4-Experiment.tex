\section{EXPERIMENT} \label{sec:Experiment}
\begin{figure}[tb]
	\centering
	\begin{minipage}{0.9\linewidth}
		\centering
		\hspace*{-0.1\linewidth}
		\input{img/IMG_ScooterLabeled.tex}
	\end{minipage}
	\caption{Autonomous \ac{e-scooter}~\cite{Straesser2024}.}
	\label{IMG:Exp:EScooter}
\end{figure}
In this section, we validate the theoretical result presented in the previous section on a real system and show that the effects of the rotational orientation can play a significant role in feedback systems. 
To this end, we consider an autonomous \ac{e-scooter} illustrated in Fig.~\ref{IMG:Exp:EScooter}~\cite{Soloperto2021,Straesser2025}.
The \ac{e-scooter} is equipped with a reaction wheel to stabilize it around the upper equilibrium to enable autonomous driving.
To avoid falling over, the \ac{e-scooter} needs to be able to measure or at least estimate the current roll angle $\varphi$.
This estimate is fed into a cascaded PI- and PD-controller, which calculates a desired motor current to simultaneously keep the \ac{e-scooter} from falling over and keep the reaction wheel speed low~\cite{Wenzelburger2020}.
The \ac{e-scooter} is controlled by two \emph{VESC 6 MK V} motor controllers.
Each \emph{VESC 6 MK V} has a built-in \emph{BMI 160} \ac{IMU} with gyroscope and accelerometer.
The first one is placed behind the reaction wheel at height $l = \SI{0.4}{\meter}$ and actuates the reaction wheel itself.
The second motor controller is located in the deck at height $l = \SI{0.12}{\meter}$ and ensures that a desired speed is maintained.
For comparison, the center of gravity is in between at a height of $\SI{0.17}{\meter}$.
\begin{figure*}[tb]	
	\begin{minipage}{0.48\textwidth}
		\centering
		\includegraphics[scale=0.57]{img/Exp_Mah_kp10_ki1.eps}
		\caption{Closed loop with Mahony filter, $k_p = 10$, $k_i = 1$.}
		\label{IMG:Exp:MahonyKp10Ki1}		
	\end{minipage}
	\begin{minipage}{0.04\textwidth}
	\end{minipage}
	\begin{minipage}{0.48\textwidth}
		\centering
		\includegraphics[scale=0.57]{img/Exp_Mah_kp2,2_ki1.eps}
		\caption{Closed loop with Mahony filter, $k_p = 2.2$, $k_i = 1$.}
		\label{IMG:Exp:MahonyKp2,2Ki1}
	\end{minipage}		
\end{figure*}

\begin{figure*}[tb]	
	\begin{minipage}{0.48\textwidth}
		\centering
		\includegraphics[scale=0.57]{img/Exp_Mad_beta_0,1.eps}
		\caption{Closed loop with Madgwick filter, $\beta = 0.1$.}
		\label{IMG:Exp:Madgwick_Beta0,1}		
	\end{minipage}
	\begin{minipage}{0.04\textwidth}
	\end{minipage}
	\begin{minipage}{0.48\textwidth}
		\centering
		\includegraphics[scale=0.57]{img/Exp_Mad_beta_0,01.eps}
		\caption{Closed loop with Madgwick filter, $\beta = 0.01$.}
		\label{IMG:Exp:Madgwick_Beta0,01}
	\end{minipage}		
\end{figure*}

To investigate the effects of the \ac{IMU}, we let the scooter stabilize the upper equilibrium at standstill without any external excitation.
For the first $\SI{10}{\second}$ we use the estimated roll angle of the lower \ac{IMU}.
After $\SI{10}{\second}$ the controller switches to the estimate of the upper \ac{IMU} and switches back after another $\SI{10}{\second}$.
As an estimation algorithm, we compare the Mahony filter for different values of $k_p$ and $k_i$.
A specific characteristic of the chosen controller structure is that by controlling the reaction wheel velocity to be small, while also including only a proportional part for the control of $\varphi$, the \ac{e-scooter} automatically converges to the equilibrium with $\dot{\varphi}=0\tfrac{^\circ}{\si{\s}}$ and no reaction wheel velocity. 
However, due to minor calibration mismatches in the accelerometer and a slight imbalance of the \ac{e-scooter}, this equilibrium is not exactly zero, but is about $\pm 0.3^\circ$ depending on the \ac{IMU}.
For visualization purposes, we center the following plots around $0^\circ$ and indicate the mismatch by using $\Delta$ as the difference to the upper equilibrium.
Further, we only show $\bar{a}_2^K$, since this is the only measurement depending on $\ddot{\varphi}$.
Fig.~\ref{IMG:Exp:MahonyKp10Ki1} shows the resulting closed-loop behavior for $k_p = 10$ and $k_i = 1$.
For the first $\SI{10}{\second}$ the lower \ac{IMU} is used and the \ac{e-scooter} remains at the equilibrium.
However, when switching to the upper \ac{IMU}, the slight mismatch in the calibration of the accelerometers leads to a small excitation of the system.
As indicated by the measurements of $\dot{\varphi}$, this results in fast oscillations in the roll angle, which do not vanish over time.
This oscillation also leads to significantly varying acceleration measurements $\Delta a^K_2$ and consequently to the varying estimated roll $\Delta \hat{\varphi}$.
As shown in Section~\ref{sec:Analysis}, the lower \ac{IMU} is less affected by this effect.
When switching back to the lower \ac{IMU} in the deck, the oscillations quickly vanish and the acceleration measurements and estimates $\Delta \hat{\varphi}$ resemble each other again.
This highlights the effect of taking feedback into account.
When the lower \ac{IMU} is used for control, the estimates of the upper and the lower \ac{IMU} behave similarly.
In this case, the upper \ac{IMU} operates in open loop and has no effect on the system. 
However, when using the upper \ac{IMU}, the non-minimum phase behavior is more prevalent and the estimation error is amplified in the closed loop.

To illustrate the effects of different filter parameters, we reduce $k_p$ to $k_p=2.2$ in Fig.~\ref{IMG:Exp:MahonyKp2,2Ki1}.
For this parameter set, there are no oscillations when employing the upper \ac{IMU} in the control loop.
The lower value of $k_p$ reduces the effect of the accelerometer, such that the filter relies more on the integrated measurements of the gyroscope and the corresponding zeros of the filter are farther away from the controller bandwidth.

Fig.~\ref{IMG:Exp:Madgwick_Beta0,1} and Fig.~\ref{IMG:Exp:Madgwick_Beta0,01} show the same experiment, but for the Madgwick filter with $\beta = 0.1$ and $\beta = 0.01$ instead.
The closed loop shows a similar behavior as for the Mahony filter.
Large values of $\beta$ increase the effects of $\ddot{\varphi}$ and result in fast oscillations when the upper \ac{IMU} is employed in the closed loop.
A smaller $\beta$ attenuates the angular acceleration by relying more on the gyroscope and less on the accelerometer, but requires a sufficiently accurate gyroscope.

With the conducted experiments we are able to recover the theoretical results of Section~\ref{sec:Analysis}.
To further reduce the effects of $\ddot{\varphi}$, multiple \acp{IMU} can be used~\cite{Gajamohan2012}.
Alternatively, if there are no further sensors available and the existing sensor cannot be placed closer to the rotational axis, one possibility is to jointly design the controller and the filter to directly account for the effects of angular accelerations in the closed loop.

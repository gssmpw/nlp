\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.14 0.0 0.164 0.011775681155103792 0.04 0.009797958971132711 0.156 0.014966629547095756 0.25866666666666666 0.015084944665313026
1 4 0.256 0.0 0.19200000000000003 0.024657656011875903 0.11466666666666665 0.006798692684790379 0.29066666666666663 0.009428090415820642 0.3746666666666667 0.004988876515698593
2 8 0.28 0.0 0.23066666666666666 0.02174600857373346 0.2293333333333333 0.013597385369580758 0.428 0.02262741699796954 0.48 0.008640987597877129
3 16 0.292 0.0 0.2733333333333334 0.004988876515698593 0.35200000000000004 0.021416504538945343 0.532 0.019866219234335136 0.6026666666666666 0.008219218670625309
4 32 0.296 0.0 0.3 0.005656854249492386 0.4653333333333333 0.020997354330698156 0.6386666666666666 0.015434449203720314 0.6707 0.0222
}{\llamamath}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.33031674208144796 0.0 0.334841628959276 0.01954974569655463 0.07692307692307693 0.006399156390828481 0.3197586726998492 0.023752663270020555 0.4962292609351433 0.005643525470247277
1 4 0.4434389140271493 0.0 0.38009049773755654 0.016930576410741804 0.2730015082956259 0.026211383404197246 0.5113122171945701 0.012798312781656976 0.6003016591251885 0.007690828828948417
2 8 0.45701357466063347 0.0 0.43288084464555054 0.01297484957321663 0.4841628959276018 0.037495634674678896 0.645550527903469 0.007690828828948402 0.6787330316742081 0.016930576410741797
3 16 0.45701357466063347 0.0 0.4419306184012066 0.007690828828948391 0.669683257918552 0.0230724864868452 0.7345399698340875 0.018958982036163686 0.7601809954751131 0.009774872848277315
4 32 0.45701357466063347 0.0 0.45248868778280543 0.011083663994494026 0.779788838612368 0.005643525470247252 0.8054298642533938 0.006399156390828514 0.8099547511312218 0.0036945546648313263
}{\llamagsm}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.1308411214953271 0.0 0.14174454828660435 0.01803089860247698 0.040498442367601244 0.005828126770675922 0.14174454828660435 0.01803089860247698 0.21495327102803738 0.0066084745905284825
1 4 0.24299065420560748 0.0 0.14174454828660435 0.01803089860247698 0.09190031152647975 0.009601890970356661 0.2554517133956386 0.009601890970356651 0.30062305295950154 0.014444888622267452
2 8 0.2850467289719626 0.0 0.14174454828660435 0.01803089860247698 0.1308411214953271 0.01375663686343901 0.3707165109034268 0.014444888622267452 0.3862928348909658 0.009601890970356661
3 16 0.29906542056074764 0.0 0.14330218068535824 0.01720461217630414 0.19003115264797507 0.007942397996250445 0.4657320872274144 0.01957913565416906 0.48286604361370716 0.0223562306766469
4 32 0.29906542056074764 0.0 0.13707165109034267 0.01803089860247698 0.22897196261682243 0.010094611679763024 0.5420560747663551 0.01375663686343899 0.5607476635514018 0.02124327367131751
}{\llamambpp}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.16666666666666666 0.0 0.14814814814814814 0.0604812282168686 0.043209876543209874 0.017459426695964134 0.14814814814814814 0.0604812282168686 0.24691358024691357 0.03147542909625176
1 4 0.35185185185185186 0.0 0.14814814814814814 0.0604812282168686 0.1111111111111111 0.01512030705421715 0.3518518518518518 0.02618914004394619 0.3703703703703704 0.01512030705421715
2 8 0.3888888888888889 0.0 0.14814814814814814 0.0604812282168686 0.1728395061728395 0.031475429096251756 0.4691358024691357 0.017459426695964137 0.49382716049382713 0.04619330107128325
3 16 0.3888888888888889 0.0 0.14814814814814814 0.0604812282168686 0.24691358024691357 0.057244558614171014 0.5802469135802469 0.008729713347982055 0.5987654320987654 0.03805193828993194
4 32 0.3888888888888889 0.0 0.12345679012345678 0.05310077325334955 0.2962962962962963 0.08000914442478839 0.6666666666666666 0.01512030705421717 0.6851851851851851 0.0302406141084343
}{\llamahumaneval}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.0 0.0 0.06922498118886382 0.011109723897843043 0.05417607223476298 0.013915155762909656 0.06696764484574869 0.009276770508606438 0.11361926260346127 0.004256474228361455
1 4 0.11254019292604502 0.0 0.08653122648607976 0.011109723897843041 0.07072987208427389 0.011109723897843043 0.15951843491346876 0.013833541242174742 0.18434913468773514 0.005924761379993844
2 8 0.13504823151125403 0.0 0.109104589917231 0.0069778920206890185 0.08728367193378479 0.007673468041524134 0.25959367945823925 0.012901751843101775 0.27915726109857036 0.015675445188863543
3 16 0.13504823151125403 0.0 0.1361926260346125 0.009091832937241967 0.10609480812641083 0.008446179202649982 0.3829947328818661 0.008512948456722924 0.380737396538751 0.014783207452512045
4 32 0.13504823151125403 0.0 0.1617757712565839 0.001064118557090362 0.12641083521444693 0.012086063509562834 0.46501128668171554 0.01026198773287123 0.4740406320541761 0.008033918925531462
}{\mistralmath}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.0 0.0 0.18166455428812844 0.006890370270511227 0.13181242078580482 0.0017924126265818718 0.16603295310519647 0.004742278056747701 0.3565694972539079 0.01285604060388926
1 4 0.15716096324461343 0.0 0.2336290663286861 0.0043084237546200084 0.18250950570342206 0.006209099474735556 0.3967046894803549 0.005377237879745629 0.4879594423320659 0.011753635608993267
2 8 0.1634980988593156 0.0 0.2995352767215885 0.004308423754620012 0.22475707646810306 0.009041374972130423 0.5792141951837769 0.010192089633979539 0.6117448246725813 0.012856040603889275
3 16 0.16603295310519645 0.0 0.33586818757921416 0.0027379555126353537 0.2691170257710182 0.0041822961286910295 0.694972539079003 0.0041822961286910295 0.7165188001689903 0.0033265770485897185
4 32 0.16856780735107732 0.0 0.3548795944233207 0.005174249562279624 0.3269961977186312 0.005174249562279624 0.7777777777777778 0.0047797670042182905 0.7828474862695396 0.0048905098871103924
}{\mistralgsm}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.0 0.0 0.11361200428724545 0.012407113507813749 0.09860664523043944 0.004010350896863818 0.11361200428724545 0.012407113507813749 0.1747052518756699 0.009939569662910722
1 4 0.11254019292604502 0.0 0.11146838156484458 0.010930374091302864 0.12754555198285103 0.0015157701633152123 0.22186495176848875 0.005250781870917845 0.24544480171489816 0.028919051582490973
2 8 0.13504823151125403 0.0 0.11789924973204717 0.015383387025088234 0.1639871382636656 0.004547310489945637 0.31939978563772775 0.012950745952405758 0.34941050375133975 0.020051754484319093
3 16 0.13504823151125403 0.0 0.12433011789924973 0.01183854342678163 0.195069667738478 0.007578850816576075 0.4030010718113612 0.017870666667238022 0.4308681672025723 0.01837773654821248
4 32 0.13504823151125403 0.0 0.12433011789924973 0.01347245990351183 0.23365487674169347 0.009939569662910722 0.4919614147909968 0.018377736548212457 0.4962486602357985 0.0015157701633152255
}{\mistralmbpp}

\pgfplotstableread[col sep=space,string type]{
id num mean1 std1 mean2 std2 mean3 std3 mean4 std4 mean5 std5
0 2 0.0 0.0 0.13 0.035590260840104374 0.13333333333333333 0.020548046676563257 0.13 0.035590260840104374 0.18666666666666668 0.01699673171197594
1 4 0.1 0.0 0.12 0.03741657386773942 0.19666666666666666 0.0262466929133727 0.2933333333333334 0.04642796092394707 0.31666666666666665 0.009428090415820642
2 8 0.1 0.0 0.12 0.03741657386773942 0.24333333333333332 0.02867441755680877 0.41 0.029439202887759492 0.43333333333333335 0.012472191289246483
3 16 0.1 0.0 0.10333333333333333 0.02357022603955158 0.30666666666666664 0.016996731711975962 0.5366666666666667 0.026246692913372727 0.5533333333333333 0.009428090415820642
4 32 0.1 0.0 0.10333333333333333 0.02357022603955158 0.3466666666666667 0.0262466929133727 0.64 0.016329931618554536 0.6633333333333334 0.012472191289246483
}{\mistralhumaneval}

\begin{figure*}[t!]
    \centering
    \makeatletter
    % temporally disable hyperref
    \let\ref\@refstar
    \ref{grouplegend}
    \makeatother
    % \vspace{-0.2in}
    \begin{tikzpicture}
        \begin{groupplot}[
            group style={group size=4 by 2, horizontal sep=45pt, vertical sep=15pt},
            width=1.0\textwidth,
            height=0.3\textwidth,
            legend cell align={left},
            legend pos=north west,
            enlargelimits=0.1,
            legend style={
                font=\small,
                draw=none,
                column sep=5pt,
                legend columns=5,
            },
        ]
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\llamamath}{num},
            ylabel={MATH},
            ylabel near ticks,
            % xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            legend pos=south west,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            legend to name=grouplegend,
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Self-Consistency}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{FTTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\llamamath};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\llamamath};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\llamamath};
                \expandafter\addlegendentry\expandafter{\name}
                % \pgfplotstablegetelem{\n}{name}\of{\modeldata}
                % \addlegendentry{\pgfplotsretval}
            }
            % https://tex.stackexchange.com/questions/705041/newcommand-and-macro-expansion-in-pgfplots
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\llamagsm}{num},
            ylabel={GSM8K},
            ylabel near ticks,
            % xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Stochastic Beam Search}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{TTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\llamagsm};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\llamagsm};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\llamagsm};
            }
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\llamambpp}{num},
            ylabel={MBPP},
            ylabel near ticks,
            % xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Stochastic Beam Search}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{TTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\llamambpp};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\llamambpp};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\llamambpp};
            }
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\llamahumaneval}{num},
            ylabel={HumanEval},
            ylabel near ticks,
            % xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Stochastic Beam Search}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{TTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\llamahumaneval};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\llamahumaneval};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\llamahumaneval};
            }
            
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\mistralmath}{num},
            ylabel={MATH},
            ylabel near ticks,
            xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            legend pos=south west,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Self-Consistency}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{FTTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\mistralmath};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\mistralmath};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\mistralmath};
            }
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\mistralgsm}{num},
            ylabel={GSM8K},
            ylabel near ticks,
            xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Stochastic Beam Search}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{FTTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\mistralgsm};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\mistralgsm};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\mistralgsm};
            }
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\mistralmbpp}{num},
            ylabel={MBPP},
            ylabel near ticks,
            xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Stochastic Beam Search}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{FTTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\mistralmbpp};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\mistralmbpp};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\mistralmbpp};
            }
        \nextgroupplot[
            width=0.25\textwidth,height=0.3\textwidth,
            yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=1},
            xticklabels from table={\mistralhumaneval}{num},
            ylabel={HumanEval},
            ylabel near ticks,
            xlabel={Budget},
            xlabel near ticks,
            xmajorgrids=true,
            ymajorgrids=true,
            grid style=dashed,
            xtick={0,...,4},
            every tick label/.append style={font=\small},
            label style={font=\small},
            ylabel style={yshift=0pt},
            xmin=0,xmax=4,
            % ymax=60,ymin=0,
        ]
            \foreach \c/\marker/\name [count=\n] in {purple/{otimes}/{Revision}, orange/{star}/{Stochastic Beam Search}, lyygreen/{diamond*}/{Self-Refine}, lyyred/{*}/{Best-of-N}, lyyblue/{square*}/{FTTT}}{
                \addplot [name path=lower, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} - \thisrow{std\n}] {\mistralhumaneval};
                \addplot [name path=upper, fill=none, draw=none, forget plot] table [
                    x=id, y expr=\thisrow{mean\n} + \thisrow{std\n}] {\mistralhumaneval};
                \expandafter\addplot\expandafter [\c!60, semitransparent, forget plot] fill between[of=lower and upper];
                \edef\tempoptions{\c,thick,mark=\marker,mark options={scale=0.7}}
                \expandafter\addplot\expandafter [\tempoptions] table [
                    x=id, y=mean\n,
                ] {\mistralhumaneval};
            }
        \end{groupplot}
    \end{tikzpicture}
    \caption{The scaling trends of different methods under varying budgets. The colored area around the line denotes the standard deviation. The first row is the results of \texttt{Llama-3.1-8B-Instruct} and the second row is \texttt{Mistral-7B-Instruct-v0.3}.}
    \label{fig:scale}
    % \vspace{-0.4cm}
\end{figure*}
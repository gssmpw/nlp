\section{Discussion}
\subsection{Case Study}


Fig. \ref{fig:casestudy} shows 2-D UMAP \cite{mcinnes2020umapuniformmanifoldapproximation} projections of embedding vectors for PetClinic Microservices \cite{microapps2024petclinic} using VoyageAI, ME-unixcoder-340K, and ME-llm2vec-340K. ME-unixcoder and ME-llm2vec show clearer microservice clusters compared to VoyageAI and Fig. \ref{fig:mexample}. For instance, \textit{API-Gateway} service classes are split in VoyageAI's representation but closer in the other models. ME-llm2vec demonstrates the closest grouping within microservices and clearest separation between them. In fact, ME-llm2vec's figure shows only 6 clear outliers which we review in detail and display their names and neighbors.



The two \textit{MetricConfig} classes, \textit{ResourceNotFoundException} and \textit{CacheConfig} lack domain-specific terms since they are utility classes, which highlights the importance of separating them from domain-related ones during the decomposition. However, ME-llm2vec was able correctly represent classes with even slight domain hints. For instance, most models struggle to differentiate between the nearly identical entry-point classes (e.g. \textit{ConfigServerApplication}), as seen in Fig. \ref{fig:mexample} and \ref{fig:casestudy} while ME-llm2vec managed to correctly place them within their services. On the other hand, the class \textit{PetRequest}, which was closer to \textit{API-Gateway} instead of \textit{Customers}, shows an intriguing outlier. Despite ME-llm2vec correctly matching the "Pet" related classes, it failed with \textit{PetRequest}. its function as a Request object, which is typically associated with the Gateway pattern, is a potential reason. Notably, ME-llm2vec successfully identified \textit{API-Gateway} classes, differentiating them from \textit{Customers}. We find this interesting because \textit{API-Gateway} includes classes representing various bounded contexts, often causing confusion in other models. ME-llm2vec recognized these classes' distinct purpose, grouping them together despite their diverse domains.

% Both \textit{API-Gateway} and \textit{Customers} services contain a "PetType" class. But in \textit{Customers}'s case, this class was closer to the "Specialty" class from \textit{Vets}, which is likely due to nearly identical source code they have. 

\subsection{Discussion}


We designed the analysis component to be as abstract as possible to accommodate the rapidly evolving representation learning landscape. As new and improved embedding models are published, they can be integrated with minimal effort. While our evaluation results show that with ME-LLM2Vec, we can generate highly cohesive and consistent decompositions, one of our objectives is to highlight the potential of Language Models in generating more efficient representations than traditional approaches for the decomposition problem. In fact, MonoEmbed is both a decomposition approach (when considering the full approach) and an embedding model (when using models such as ME-LLM2Vec). These models can be used to enrich existing decomposition approaches. For example, MicroMiner's CodeBERT \cite{trabelsi2023microminer} can be replaced with ME-LLM2Vec and the GNN based methods \cite{desai2021cogcn,yedida2023deeply,mathai2022chgnn,qian2023gdcdvf} can be extended by using ME-LLM2Vec as the encoder. In fact, it can be used as an additional representation type in approaches such as \cite{khaled2022hydecomp,qian2023gdcdvf}. These models can be even extended further by incorporating unstructured inputs (e.g. resources, configurations, documentation) and different PLs.




\subsection{Threats to Validity}
\subsubsection{Internal Validity}
Clustering algorithms and decomposition approaches have hyper-parameters that can affect performance on evaluation benchmarks. To mitigate this threat, we compared their performance with different hyper-parameter inputs across a varied set of evaluation applications.

\subsubsection{External Validity}
To address the threat of our approach to generalize on monolithic applications and PLs, we used a large set of monolithic and microservices applications from related work \cite{kalia2021mono2micro,khaled2022hydecomp,yedida2023deeply,jin2021fosci} to benchmark decomposition approaches. 

\subsubsection{Construct Validity}
This threat can potentially be in the form of the evaluation metrics used in our experiments. In order to mitigate this threat, we employ established metrics in supervised learning tasks (RQ1-3) and different metrics from decomposition research \cite{khaled2022hydecomp,kalia2021mono2micro,jin2021fosci,yedida2023deeply,mathai2022chgnn} (RQ4). 
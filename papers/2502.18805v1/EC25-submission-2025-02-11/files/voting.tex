% \newpage
\section{Single-Winner Ranked Voting}\label{sec:single-winner-voting}
We consider $n$ voters (the agents) who need to elect one winner from a set $C$ of $m$ \emph{candidates}.
The agents' preferences are given by strict linear orderings $\succ_i$ over the candidates.

When there are only two candidates, the majority rules and its variants (weighted majority rules)  are truthful.
With three or more candidates, the   Gibbard--Satterthwaite Theorem implies that the only truthful rules are dictatorships. 
Our goal is to find non-dictatorial rules with a high RAT-degree.

%\eden{if we have time: maybe to change 'Alice' to 'voter $v_1$'} \erel{I think ``agent'' is better as it is more consistent with the rest of the paper.}

Throughout the analysis, we consider a specific agent Alice, who looks for a safe profitable manipulation. Her true ranking is $c_m \succ_A \cdots \succ_A c_1$.
We assume that, for any $j>i$, Alice strictly prefers a victory of $c_j$ to a tie between $c_j$ and $c_i$, and strictly prefers this tie to a victory of $c_i$.%
\footnote{We could also assume that ties are broken at random, but this would require us to define preferences on lotteries, which we prefer to avoid in this paper.}




\subsection{Positional voting rules: general upper bound}
\newcommand{\scorevector}{\mathbf{s}}
\newcommand{\score}{\operatorname{score}}
A \emph{positional voting rule}
is parameterized by a vector of scores, $\scorevector=(s_1,\ldots,s_m)$, where $s_1\leq \cdots \leq  s_m$ and $s_1 < s_m$.
Each voter reports his entire ranking of the $m$ candidates. Each such ranking is translated to an assignment of a score to each candidate: the lowest-ranked candidate is given a score of $s_1$, the second-lowest candidate is given $s_2$, etc., and the highest-ranked candidate is given a score of $s_m$. 
The total score of each candidate is the sum of scores he received from the rankings of all $n$ voters. The winner is the candidate with the highest total score. 

Formally, for any subset $N'\subseteq N$ and any candidate $c\in C$, we denote by $\score_{N'}(c)$ the total score that $c$ receives from the votes of the agents in $N'$. Then the winner is $\arg\max_{c\in C}\score_N(c)$. If there are several agents with the same maximum score, then the outcome is considered a tie.

Common special cases of positional voting are \emph{plurality voting}, in which $\scorevector = (0,0,0,\ldots,0,1)$, and 
\emph{anti-plurality voting}, in which $\scorevector = (0,1,1,\ldots,1,1)$.
By the Gibbard--Satterthwaite theorem, all positional voting rules are manipulable, so their RAT-degree is smaller than $n$.
But, as we will show next, some positional rules have a higher RAT-degree than others.


In the upcoming lemmas, we identify the manipulations that are safe and profitable for Alice under various conditions on the score vector $\scorevector$. We assume throughout that there are $m\geq 3$ candidates, and that $n$ is sufficiently large.
We allow an agent to abstain, which means that his vote gives the same score to all candidates.%
\footnote{
We need the option to abstain in order to avoid having different constructions for even $n$ and odd $n$; see the proofs for details.
}

\begin{lemmarep}
\label{lem:sm>sm1}
Let $m\geq 3$ and $n\geq 4$.
If $s_m > s_{m-1}$
and there are $k\geq \ceil{n/2}+1$ known agents,
then
switching the top two candidates ($c_m$ and $c_{m-1}$) may be a safe profitable manipulation for Alice.
\end{lemmarep}
\begin{proofsketch}
For some votes by the known agents, the manipulation is safe since $c_m$ has no chance to win, and it is profitable as it may help $c_{m-1}$ win over worse candidates.
\end{proofsketch}
\begin{proof}
Suppose there is a subset $K$ of $\ceil{n/2}+1$ known agents, who vote as follows:
\begin{itemize}
\item $\floor{n/2}-1$ known agents rank $c_{m-2} \succ c_{m-1} \succ \cdots \succ c_m$.
\item One known agent ranks $c_{m-2} \succ c_m \succ
c_{m-1} \succ \cdots $. 
\item One known agent ranks $c_{m-1} \succ c_{m-2} \succ \cdots \succ c_m$. 
\item In case $n$ is odd, the remaining known agent abstains.
\end{itemize}
We first show that $c_m$ cannot win. To this end, we show that the difference in scores between $c_{m-2}$ and $c_m$ is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
\score_K(c_{m-2})-\score_K(c_m) =
&
(\floor{n/2}-1)(s_m-s_1) 
+ (s_m-s_{m-1})
+ (s_{m-1}-s_1).
%+ (s_{m-1}-s_1) 
%+ (s_m-s_2)
\\
=&
(\floor{n/2})(s_m-s_1) 
%(s_m-s_1)
%+ 
%(s_{m-1}-s_2).
\end{align*}
\item There are
$\floor{n/2}-1$ agents not in $K$ (including Alice).
These agents can reduce the score-difference by at most 
$(\floor{n/2}-1)(s_m-s_1)$.
Therefore, 
\begin{align*}
\score_N(c_{m-2})-\score_N(c_m) \geq (s_m-s_1),
\end{align*}
which is positive for any score vector.
So $c_m$ has no chance to win or even tie.
\end{itemize}
Therefore, switching $c_m$ and $c_{m-1}$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_{m-1}$ win. We compute the score-difference between $c_{m-1}$ and the other candidates with and without the manipulation. 

Suppose that the agents not in $K$ vote as follows:
\begin{itemize}
\item the $\floor{n/2}-2$ unknown agents%
\footnote{Here we use the assumption $n\geq 4$.}
rank $c_{m-1}\succ c_{m-2}\succ \cdots $.
\item Alice votes truthfully $c_m\succ c_{m-1}\succ c_{m-2} \cdots \succ c_1$.
\end{itemize}
Then,
\begin{align*}
\score_N(c_{m-2}) - \score_N(c_{m-1})
=&
(\floor{n/2}-1)(s_{m}-s_{m-1}) 
+ (s_m-s_{m-2})
+ (s_{m-1}-s_{m})
\\
&+
(\floor{n/2}-2)(s_{m-1}-s_{m}) 
+ (s_{m-2}-s_{m-1})
\\
=&
(s_{m}-s_{m-1}),
\end{align*}
which is positive by the assumption $s_m>s_{m-1}$.
The candidates $c_{j<m-2}$ are ranked even lower than $c_{m-1}$ by all agents. Therefore the winner is $c_{m-2}$.

If Alice switches $c_{m-1}$ and $c_m$, then the score of $c_{m-1}$ increases by $s_m-s_{m-1}$ and the scores of all other candidates except $c_m$ do not change. Therefore, 
$\score_N(c_{m-2}) - \score_N(c_{m-1})$ becomes $0$, and there is a tie between $c_{m-2}$ and $c_{m-1}$, which is better for Alice by assumption.
Therefore, the manipulation is profitable.

\iffalse % EREL: old proof, without abstinence
Specifically, suppose the $\ceil{n/2}+1$ known-agents rank as follows:
\begin{itemize}
\item $\floor{n/2}-1$ known agents rank $c_1 \succ c_{m-1} \succ \cdots \succ c_m$;
\item One known agent ranks $c_{m-1} \succ c_1 \succ \cdots \succ c_m$. 
\item In case $n$ is odd, another known agent ranks $c_{m-1} \succ c_1 \succ \cdots \succ c_m$.
\item One known agent ranks $c_1 \succ  \cdots \succ  c_m \succ c_{m-1}$;
\end{itemize}
We first show that $c_m$ cannot win. To this end, we show that the difference in scores between $c_1$ and $c_m$ is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
&
(\floor{n/2}-1)(s_m-s_1) + (1+n\bmod 2)(s_{m-1}-s_1) + (s_m-s_2)
\\
=&
(\floor{n/2}-1)(s_m-s_1) + 
(s_m-s_1)
+ 
(s_{m-1}-s_2)
+
(n\bmod 2)(s_{m-1}-s_1)
\end{align*}
\item There are
$\floor{n/2}-1$ agents not in $K$ (including Alice).
These agents can reduce the score-difference by at most 
$(\floor{n/2}-1)(s_m-s_1)$.
Therefore, the score-difference is at least 
$(s_m-s_1)
+ 
(s_{m-1}-s_2)
+
(n\bmod 2)(s_{m-1}-s_1)$,
which is positive for any score-vector when $m\geq 3$. So $c_m$ has no chance to win or even tie for victory.
\end{itemize}
Therefore, switching $c_m$ and $c_{m-1}$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_{m-1}$ win. To this end, we show that the manipulation may affect the score-difference between $c_{m-1}$ to $c_1$.

We assume that the $\floor{n/2}-2$ unknown agents rank $c_{m-1}\succ c_1\succ \cdots $. Then, without Alice's vote, the score-difference is
\begin{align*}
&
(\floor{n/2}-1)(s_{m-1}-s_m) + (1+n\bmod 2)(s_m-s_{m-1}) + (s_1-s_m)
+
(\floor{n/2}-2)(s_m-s_{m-1})
\\
=&
(n\bmod 2)(s_m-s_{m-1}) 
+ (s_1-s_m).
\end{align*}
Alice's vote can affect the outcome in the following way:
\begin{itemize}
\item If Alice votes truthfully $c_m\succ c_{m-1}\succ \cdots \succ c_1$, then the vote adds $s_{m-1}-s_1$ to the difference, which becomes 
$(n\bmod 2-1)(s_m - s_{m-1})$.

\item If Alice switches $c_{m-1}$ and $c_m$, then 
the vote adds $s_m - s_1$ to the difference, so the difference becomes $(n\bmod 2)(s_m - s_{m-1})$.
\end{itemize}
When $n$ is even, the manipulation changes the difference from $s_{m-1}-s_m$, which is negative by the assumption $s_m > s_{m-1}$, to $0$; so the manipulation replaces a victory for $c_1$ with a tie between $c_{m-1}$ and $c_1$, which by assumption is better for Alice.

When $n$ is odd, the manipulation changes the difference from $0$ to $s_{m}-s_1$, which is positive by the assumption $s_m > s_{m-1}$, so the manipulation replaces a tie between $c_{m-1}$ and $c_1$ with a victory for $c_{m-1}$, which is again better for Alice. In both cases, the manipulation is profitable.
\fi
\end{proof}

%The following lemma is a special case of \Cref{lem:st1>st}; we prove it explicitly as a warm-up. 
\begin{lemmarep}
\label{lem:s2>s1}
Let $m\geq 3$ and $n\geq 2m$.
If $s_2 > s_1$
and there are $k\geq \ceil{n/2}+1$ known agents,
then
switching the bottom two candidates ($c_2$ and $c_1$) may be a safe profitable manipulation for Alice.
\end{lemmarep}
\begin{proofsketch}
For some votes by the known agents,
$c_1$ has no chance to win, so the worst candidate for Alice that could win is $c_2$. Therefore, switching $c_1$ and $c_2$ cannot harm, but may help a better candidate win over $c_2$.
\end{proofsketch}

\iffalse % EREL: tried an alternative proof --- using n-k
\begin{proof}
Suppose there is a subset $K$ of $k$ known agents, who vote as follows (Note that the assumption on $k$ implies $k\geq n-k+2$):
\begin{itemize}
\item $n-k$ known agents rank $c_2 \succ c_m \succ \cdots \succ c_1$.
\item Two known agents rank $c_m \succ c_2 \succ
\cdots \succ c_1$.
\item The remaining known agents (if any) abstain.
\end{itemize}


We first show that $c_1$ cannot win. To this end, we show that the difference in scores between $c_2$ and $c_1$ is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
\score_K(c_2)-\score_K(c_1) =
&
(n-k)(s_m-s_1) 
+ 2(s_{m-1}-s_1).
\end{align*}
\item The $n-k$ agents not in $K$ (including Alice) 
can reduce the score-difference by at most 
$(n-k)(s_m-s_1)$.
Therefore, 
\begin{align*}
\score_N(c_2)-\score_N(c_1) 
\geq  &
(n-k)(s_m-s_1) 
+ 2(s_{m-1}-s_1)
-(n-k)(s_m-s_1)
\\
= &
2(s_{m-1} - s_1),
\end{align*}
which is positive 
by the assumption $s_2>s_1$.
So $c_1$ has no chance to win or even tie.
\end{itemize}
Therefore, switching $c_2$ and $c_1$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_m$ win, when the agents not in $K$ vote as follows:
\begin{itemize}
\item $n-k-2$ unknown agents rank $c_m\succ c_2\succ \cdots $,
where each candidate except $c_1,c_2,c_m$ is ranked last by at least one voter (here we use the assumption $n\geq 2m$).
\item One unknown agent ranks 
$c_2\succ \cdots \succ c_m \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_2 \succ c_1$.  
\end{itemize}
Then,
\begin{align*}
\score_N(c_2) - \score_N(c_m)
=&
(n-k)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(n-k-2)(s_{m-1}-s_{m}) 
+ (s_m-s_2)
+ (s_2-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\not\in\{1,2,m\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_2) - \score_N(c_j)
\geq &
(n-k)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(n-k-3)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_2-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_2-s_{m-1})
\\
= & s_2 - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_2$.

If Alice switches $c_1$ and $c_2$, then the score of $c_2$ decreases by $s_2-s_1$, which is positive by the lemma assumption, and the scores of all other candidates except $c_1$ do not change. So $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}
\fi % alternative proof - using n-k


\begin{proof}
Suppose there is a subset $K$ of $\ceil{n/2}+1$ known agents, who vote as follows:
\begin{itemize}
\item $\floor{n/2}-1$ known agents rank $c_2 \succ c_m \succ \cdots \succ c_1$.
\item Two known agents rank $c_m \succ c_2 \succ
\cdots \succ c_1$. 
\item In case $n$ is odd, the remaining known agent abstains.
\end{itemize}
We first show that $c_1$ cannot win. To this end, we show that the difference in scores between $c_2$ and $c_1$ is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
\score_K(c_2)-\score_K(c_1) =
&
(\floor{n/2}-1)(s_m-s_1) 
+ 2(s_{m-1}-s_1).
\end{align*}
\item There are
$\floor{n/2}-1$ agents not in $K$ (including Alice).
These agents can reduce the score-difference by at most 
$(\floor{n/2}-1)(s_m-s_1)$.
Therefore, 
\begin{align*}
\score_N(c_2)-\score_N(c_1) \geq 2(s_{m-1}-s_1),
\end{align*}
which is positive 
by the assumption $s_2>s_1$.
So $c_1$ has no chance to win or even tie.
\end{itemize}
Therefore, switching $c_2$ and $c_1$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_m$ win, when the agents not in $K$ vote as follows:
\begin{itemize}
\item $\floor{n/2}-3$ unknown agents rank $c_m\succ c_2\succ \cdots $,
where each candidate except $c_1,c_2,c_m$ is ranked last by at least one voter (here we use the assumption $n\geq 2m$).
\item One unknown agent ranks 
$c_2\succ \cdots \succ c_m \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_2 \succ c_1$.  
\end{itemize}
Then,
\begin{align*}
\score_N(c_2) - \score_N(c_m)
=&
(\floor{n/2}-1)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(\floor{n/2}-3)(s_{m-1}-s_{m}) 
+ (s_m-s_2)
+ (s_2-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\not\in\{1,2,m\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_2) - \score_N(c_j)
\geq &
(\floor{n/2}-1)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(\floor{n/2}-4)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_2-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_2-s_{m-1})
\\
= & s_2 - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_2$.

If Alice switches $c_1$ and $c_2$, then the score of $c_2$ decreases by $s_2-s_1$, which is positive by the lemma assumption, and the scores of all other candidates except $c_1$ do not change. So $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}

\iffalse
\begin{lemmarep}
Let $m\geq 4$ and $n\geq 2m$.
If $s_3 > s_2 = s_1$,
and there are $k\geq \ceil{n/2}+1$ known agents,
then
switching $c_3$ and $c_2$ may be a safe profitable manipulation for Alice.
\end{lemmarep}
\begin{proofsketch}
The idea is that, for some votes by the known agents, both $c_2$ and $c_1$ have has no chance to win, 
so the worst candidate that could win is $c_3$.
Therefore, switching $c_2$ and $c_3$ cannot harm, but can help better candidates win over $c_3$.
\end{proofsketch}
\begin{proof}
Suppose there is a subset $K$ of $\ceil{n/2}+1$ known agents, who vote as follows:
\begin{itemize}
\item $\floor{n/2}-1$ known agents rank $c_3 \succ c_m \succ \cdots \succ c_2 \succ c_1$.
\item Two known agents rank $c_m \succ c_3 \succ
\cdots \succ c_2 \succ c_1$. 
\item In case $n$ is odd, the remaining known agent abstains.
\end{itemize}
We first show that both $c_1$ and $c_2$ cannot win. 
Note that, by the lemma assumption $s_1=s_2$, these two candidates receive exactly the same score by all known agents. We show that the difference in scores between $c_3$ and both $c_2$ and $c_1$ is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
\score_K(c_3)-\score_K(c_2) =
&
(\floor{n/2}-1)(s_m-s_1) 
+ (s_{m-1}-s_1).
\\
%=&
%(\floor{n/2})(s_m-s_1) 
\end{align*}
\item There are
$\floor{n/2}-1$ agents not in $K$ (including Alice).
These agents can reduce the score-difference by at most 
$(\floor{n/2}-1)(s_m-s_1)$.
Therefore, 
\begin{align*}
\score_N(c_3)-\score_N(c_2) \geq (s_{m-1}-s_1),
\end{align*}
which is positive 
by the assumptions $m\geq 4$ and $s_3>s_2$.
So both $c_2$ and $c_1$ have no chance to win or even tie.
\end{itemize}
Therefore, switching $c_3$ and $c_2$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_m$ win. We compute the score-difference between $c_m$ and the other candidates with and without the manipulation. 

Suppose that the agents not in $K$ vote as follows:
\begin{itemize}
\item $\floor{n/2}-3$ unknown agents rank $c_m\succ c_3\succ \cdots $,
where each candidate except $c_1,c_2,c_3,c_m$ is ranked last by at least one voter (here we use the assumption $n\geq 2m$).
\item One unknown agent ranks 
$c_3\succ \cdots \succ c_m \succ c_2 \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_3 \succ c_2 \succ c_1$.  
\end{itemize}
Then,
\begin{align*}
\score_N(c_3) - \score_N(c_m)
=&
(\floor{n/2}-1)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(\floor{n/2}-3)(s_{m-1}-s_{m}) 
+ (s_m-s_3)
+ (s_3-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\not\in\{1,2,3,m\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_3) - \score_N(c_j)
\geq &
(\floor{n/2}-1)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(\floor{n/2}-4)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_3-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_3-s_{m-1})
\\
= & s_3 - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_3$.

If Alice switches $c_2$ and $c_3$, then the score of $c_3$ decreases by $s_3-s_2$, which is positive by the lemma assumption, and the scores of all other candidates except $c_2$ do not change. So $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}
\fi

\Cref{lem:s2>s1} can be generalized as follows. 

\begin{lemmarep}
\label{lem:st1>st}
Let $m\geq 3$ and $n\geq 2m$.
For every integer $t \in \{1,\ldots, m-2\}$,
if $s_{t+1} > s_t = \cdots = s_1$,
and there are $k\geq \ceil{n/2}+1$ known agents,
then switching $c_{t+1}$ and $c_t$ may be a safe profitable manipulation.
\end{lemmarep}
%Note that \Cref{lem:s2>s1} is the special case $t=1$.

\begin{proofsketch}
For some votes by the known agents,
all candidates $c_1,\ldots,c_t$ have no chance to win, 
so the worst candidate for Alice that could win is $c_{t+1}$.
Therefore, switching $c_t$ and $c_{t+1}$ cannot harm, but can help better candidates win over $c_{t+1}$.
\end{proofsketch}
\begin{proof}
Suppose there is a subset $K$ of $\ceil{n/2}+1$ known agents, who vote as follows:
\begin{itemize}
\item $\floor{n/2}-1$ known agents rank $c_{t+1} \succ c_m$ first and rank $c_t \succ \cdots \succ c_1$ last.
\item Two known agents rank $c_m \succ c_{t+1}$ first and rank $c_t \succ \cdots \succ c_1$ last.
\item In case $n$ is odd, the remaining known agent abstains.
\end{itemize}
We first show that the $t$ worst candidates for Alice ($c_1,\ldots, c_t$) cannot win. 
Note that, by the lemma assumption $s_t = \cdots = s_1$, all these candidates receive exactly the same score by all known agents. We show that the difference in scores between $c_{t+1}$ and $c_t$ (and hence all $t$ worst candidates) is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
\score_K(c_{t+1})-\score_K(c_t) =
&
(\floor{n/2}-1)(s_m-s_1) 
+ (s_{m-1}-s_1).
\end{align*}
\item There are
$\floor{n/2}-1$ agents not in $K$ (including Alice).
These agents can reduce the score-difference by at most 
$(\floor{n/2}-1)(s_m-s_1)$.
Therefore, 
\begin{align*}
\score_N(c_{t+1})-\score_N(c_t) \geq (s_{m-1}-s_1),
\end{align*}
which is positive 
by the assumption $m-2 \geq t$ and $s_{t+1}>s_t$.
So no candidate in $c_1,\ldots,c_t$ has a chance to win or even tie.
\end{itemize}
Therefore, switching $c_{t+1}$ and $c_t$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_m$ win. We compute the score-difference between $c_m$ and the other candidates with and without the manipulation. 

Suppose that the agents not in $K$ vote as follows:
\begin{itemize}
\item $\floor{n/2}-3$ unknown agents rank $c_m\succ c_{t+1}\succ \cdots $,
where each candidate in $c_{t+2},\ldots,c_{m-1}$ is ranked last by at least one voter (here we use the assumption $n\geq 2m$).
\item One unknown agent ranks 
$c_{t+1}\succ \cdots \succ c_m \succ c_t \succ \cdots \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_{t+1} \succ  c_t \succ \cdots \succ c_1$.  
\end{itemize}
Then,
\begin{align*}
\score_N(c_{t+1}) - \score_N(c_m)
=&
(\floor{n/2}-1)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(\floor{n/2}-3)(s_{m-1}-s_{m}) 
+ (s_m-s_{t+1})
+ (s_{t+1}-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\in\{t+2,\ldots,m-1\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_{t+1}) - \score_N(c_j)
\geq &
(\floor{n/2}-1)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(\floor{n/2}-4)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_{t+1}-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_{t+1}-s_{m-1})
\\
= & s_{t+1} - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_{t+1}$.

If Alice switches $c_t$ and $c_{t+1}$, then the score of $c_{t+1}$ decreases by $s_{t+1}-s_t$, which is positive by the lemma assumption, and the scores of all other candidates except $c_t$ do not change. As $c_t$ cannot win, $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}

Combining the lemmas leads to an upper bound on the RAT-degree of any positional voting rule:
\begin{theorem}
\label{thm:upper-positional}
The RAT-degree of any positional voting rule for $m\geq 3$ candidates and $n\geq 2m$ agents is at most $\ceil{n/2}+1$.
\end{theorem}
\begin{proof}
Consider a positional voting rule with score-vector $\scorevector$. Let $t \in \{1,\ldots,m-1\}$ be the smallest index for which $s_{t+1} > s_t$ (there must be such an index by definition of a score-vector).

If $t\leq m+2$, then \Cref{lem:st1>st} implies that, for some votes by the $\ceil{n/2}+1$ known agents, switching $c_{t+1}$ and $c_t$ may be a safe and profitable manipulation for Alice.

Otherwise, $t=m-1$, and \Cref{lem:sm>sm1} implies the same.

In all cases, Alice has a safe profitable manipulation.
\end{proof}

Next, we show that the \emph{plurality voting rule}, which is the positional voting rule with score-vector $(0,0,0,\ldots,0,1)$, attains the upper bound of \Cref{thm:upper-positional}
(at least when $n$ is even).


\begin{lemmarep}
\label{lem:lower-plurality}
Let $n\geq 4$ be an even number.
For the plurality voting rule,  if there are at most $n/2$ known agents, then Alice has no safe profitable manipulation.
\end{lemmarep}

\begin{proof}
For any potential manipulation by Alice
we have to prove that, 
for any set $K$ of $n/2$ agents and any combination of votes by the agents of $K$, 
either (1) the manipulation is not profitable 
(for any preference profile for the $(n/2-1)$ unknown agents, Alice weakly prefers to tell the truth); or (2) the manipulation is not safe (there exists a preference profile for the unknown agents such that Alice strictly prefers to tell the truth).

\newcommand{\aFav}{c_m}
\newcommand{\aAlt}{c^A_{alt}}
\newcommand{\kAlt}{c^K_{alt}}

If the manipulation does not involve Alice's top candidate $c_m$, then it does not affect the outcome and cannot be profitable. So let us consider a manipulation in which Alice ranks another candidate $\aAlt\neq c_m$ at the top.

Let $\displaystyle \kAlt = \argmax_{j \in [m-1]} \score_K(c_j)$ denote the candidate with the highest number of votes among the known agents, except Alice's top candidate ($c_m$).
Consider the following two cases.

\paragraph{\underline{Case 1:} $\score_K(\kAlt) = 0$.} Since $\kAlt$ is a candidate who got the maximum number of votes from $K$ except $\aFav$, this implies that all $n/2$ known agents either vote for $\aFav$ or abstain,
Then, it is possible that the $n/2-1$ unknown agents vote for $\aAlt$ or abstain, such that the score-difference $\score(c_m)-\score(\aAlt) = 1$.
Then, when Alice tells the truth, her favorite candidate, $\aFav$ wins, as $\score_N(c_m) -\score_N(\aAlt) = 2$ and the scores of all other candidates are $0$. 
But when Alice manipulates and votes for $\aAlt$, the outcome is a tie between $\aFav$ and $\aAlt$, which is worse for Alice.
Hence, Alice's manipulation is not safe.


\paragraph{\underline{Case 2:} $\score_K(\kAlt) \geq 1$.}
Then again the manipulations not safe, as it is possible that the unknown agents vote as follows: 
\begin{itemize}
\item Some $\score_K(\aFav)$ agents vote for $\kAlt$;
\item Some 
$\score_K(\kAlt) -1$ agents vote for $c_m$. 

Note that 
this is possible as both values are non-negative and $\score_K(\aFav) + \score_K(\kAlt) \leq \sum_{j =1}^m \score_K(c_j) \leq  n/2$,
which means that $\score_K(\aFav) + \left(\score_K(\kAlt)-1\right) \leq n/2-1$ (the number of unknown agents);
\item 
The remaining unknown agents (if any) are split evenly between $c_m$ and $\kAlt$; if the number of remaining unknown agents is odd, then the extra agent votes for $c_m$.
\end{itemize}
We now prove that the manipulation is harmful for Alice. We distinguish three sub-cases. Denote by $R$ the set of Remaining unknown agents, mentioned in the third bullet above:
\begin{itemize}
\item If $R=\emptyset$
(which means that $\score_K(\aFav) + \score_K(\kAlt) -1 = n/2 -1$),
then
the scores of $\aFav$ and $\kAlt$ without Alice's vote are $n/2$ and $n/2-1$ respectively, which are at least $2$ and $1$ respectively (as $n\geq 4$).
The scores of all other candidates are $0$.

% There is another candidate with one vote. \erel{???}
% However, as $2 < n/2$, even if Alice was voting for this candidate, it has no chance to win, even as tie. 
% Thus only $\aFav$ and $\kAlt$ can win. 
% \eden{I think we need to assume that $n \geq 6$(?)}
When Alice is truthful, the outcome is a tie between $\aFav$ and $\kAlt$;
when Alice manipulates and votes for $\aAlt$, $\kAlt$ wins, which is worse for Alice.



\item If $|R|>0$ and it is even,
then without Alice's vote, 
$\score(\kAlt)$ is strictly higher than the scores of all other candidates, and higher than $\score(\aFav)$ by exactly $1$.

When Alice is truthful, the outcome is a tie between $\aFav$ and $\kAlt$.
But when Alice manipulates and votes for $\aAlt$, 
either $\kAlt$ wins or there is a tie between $\aAlt$ and $\kAlt$; both outcomes are worse for Alice.

\item If $|R|>0$ and it is odd, 
% (i.e., $\score_K(\aFav) + \score_K(\kAlt) -1 < n/2 -1$ and $n/2 -1 - \left(\score_K(\aFav) + \score_K(\kAlt) -1\right)$ is odd):
then without Alice's vote, $\score(\aFav) = \score(\kAlt)$, and both scores are at least the maximum score among the other candidates.
When Alice is truthful, her favorite candidate $\aFav$ wins. 
But when Alice manipulates and votes for $\aAlt$,
then either $\aAlt$ wins, or there is a tie between $\aFav$ and $\kAlt$ (and possibly some other candidates); both outcomes are worse for Alice.
\end{itemize}
Thus, in all cases, Alice does not have a safe profitable manipulation.
\end{proof}


Combining \Cref{lem:sm>sm1} and 
\Cref{lem:lower-plurality} gives the exact RAT-degree of plurality voting.
\begin{corollary}
When $m\geq 3$ and $n\geq 4$ and $n$ is even, the RAT-degree of plurality voting is $n/2+1$.    
\end{corollary}

\subsection{Positional voting rules: tighter upper bounds}

We now show that positional voting rules may have a RAT-degree substantially lower than plurality.

\iffalse % Special case; kept for didactic purposes.
\begin{lemmarep}
\label{lem:b:s2>s1}
Let $m\geq 3$ and $n\geq 3m$.
If $s_2 > s_1$ and there are $k$ known agents,
where 
\begin{align*}
k > \frac{2 s_m - s_2 - s_1}    {3 s_m + s_{m-1} - s_2 - 3 s_1} n,
\end{align*}
then
switching the bottom two candidates ($c_2$ and $c_1$) may be a safe profitable manipulation for Alice.
\end{lemmarep}
\begin{proofsketch}
Note that the expression on the right-hand side can be as small as $n/3$. 
Still, an adaptation of the construction of \Cref{lem:s2>s1} works: for some votes of the known agents,
the score of $c_1$ is necessarily lower than the \emph{arithmetic mean} of the scores of $c_m$ and $c_2$; hence, it is lower than either $c_m$ or $c_2$.
Therefore ,$c_1$ still cannot win, so switching $c_1$ and $c_2$ is safe.
\end{proofsketch}
\begin{proof}
Suppose there is a subset $K$ of $k$ known agents, who vote as follows:
\begin{itemize}
\item $k-2$ known agents rank $c_2 \succ c_m \succ \cdots \succ c_1$.
\item Two known agents rank $c_m \succ c_2 \succ
\cdots \succ c_1$. 
\end{itemize}
We first show that $c_1$ cannot win. To this end, we show that the difference in scores between $c_2$ and $c_1$, or between $c_m$ and $c_1$, is always strictly positive.
\begin{itemize}
\item The differences in scores given by the known agents is 
\begin{align*}
\score_K(c_2)-\score_K(c_1) =
&
(k-2)(s_m-s_1) 
+ 2(s_{m-1}-s_1).
\\
\score_K(c_m)-\score_K(c_1) =
&
(k-2)(s_{m-1}-s_1) 
+ 2(s_{m}-s_1).
\end{align*}
\item There are $n-k$ agents not in $K$ (including Alice). 
These agents give $c_2$ and $c_m$ together at least $(n-k)(s_1+s_2)$ points, and give $c_1$ at most $(n-k)s_m$ points. Therefore, we can bound the sum of score differences as follows:
\begin{align*}
&
[\score_N(c_2)-\score_N(c_1)]+[\score_N(c_m)-\score_N(c_1)] 
\\
\geq
&
k(s_m+s_{m-1}-2 s_1) 
+ 
(n-k)(s_2 + s_1 - 2 s_m)
\\
=
&
k(3 s_m + s_{m-1}-s_2 -3 s_1) 
- 
n(2 s_m - s_2 - s_1).
\end{align*}
The assumption on $k$ implies that this expression is positive. Therefore, either 
$\score_N(c_2)-\score_N(c_1)$ or $\score_N(c_m)-\score_N(c_1)$ or both are positive.
So $c_1$ has no chance to win or even tie.
Therefore, switching $c_2$ and $c_1$ is a safe manipulation.
\end{itemize}


Next, we show that the manipulation can help $c_m$ win, when the agents not in $K$ vote as follows:
\begin{itemize}
\item $k-4$ unknown agents rank $c_m\succ c_2\succ \cdots $,
where each candidate except $c_1,c_2,c_m$ is ranked last by at least one voter (here we use the assumption $n\geq 3m$: the condition on $k$ implies $k>n/3\geq m$, so $k\geq m+1$ and $k-4\geq m-3$).
\item One unknown agent ranks 
$c_2\succ \cdots \succ c_m \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_2 \succ c_1$.  
\item All other unknown voters (if any) abstain.
\end{itemize}
Then,
\begin{align*}
\score_N(c_2) - \score_N(c_m)
=&
(k-2)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(k-4)(s_{m-1}-s_{m}) 
+ (s_m-s_2)
+ (s_2-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\not\in\{1,2,m\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_2) - \score_N(c_j)
\geq &
(k-2)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(k-5)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_2-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_2-s_{m-1})
\\
= & s_2 - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_2$.

If Alice switches $c_1$ and $c_2$, then the score of $c_2$ decreases by $s_2-s_1$, which is positive by the lemma assumption, and the scores of all other candidates except $c_1$ do not change. So $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}

In particular, for the anti-plurality rule the condition is $k>n/3$.
\begin{corollary}
The RAT-degree of anti-plurality is at most $\floor{n/3}+1$.
\end{corollary}
\fi

The following lemma strengthens 
\Cref{lem:s2>s1}.

\newcommand{\topLscores}{s_{\mathrm{top:}\ell}}
\newcommand{\botLscores}{s_{\mathrm{bot:}\ell}}
\begin{lemmarep}
\label{lem:z:s2>s1}
Let $\ell \in \{2,\ldots, m-1\}$ be an integer.
Consider a positional voting setting with $m\geq 3$ candidates and $n\geq (\ell+1)m$ agents.
Denote $\topLscores := \sum_{j=m-\ell+1}^m s_j = $  the sum of the $\ell$ highest scores and $\botLscores := \sum_{j=1}^{\ell}s_j = $ the sum of the $\ell$ lowest scores.

If $s_2 > s_1$ and there are $k$ known agents,
where 
\begin{align*}
k > \frac{\ell s_m - \botLscores}{\ell s_m + \topLscores - \botLscores - \ell s_1} n,
\end{align*}
then switching the bottom two candidates ($c_2$ and $c_1$) may be a safe profitable manipulation for Alice.
\end{lemmarep}
\begin{proofsketch}
The proof has a similar structure to that of \Cref{lem:s2>s1}.
Note that the expression at the right-hand side can be as small as $\displaystyle \frac{1}{\ell+1}n$ (for the anti-plurality rule), which is much smaller than the $\ceil{n/2}+1$ known agents required in \Cref{lem:s2>s1}.
Still, we can prove that, for some reports of the known agents, the score of $c_1$ is necessarily lower than the \emph{arithmetic mean} of the scores of the $\ell$ candidates $\{c_m, c_2, \cdots, c_{\ell}\}$. Hence, it is lower than at least one of these scores. Therefore ,$c_1$ still cannot win, so switching $c_1$ and $c_2$ is safe.
\end{proofsketch}
\begin{proof}
Suppose there is a subset $K$ of $k$ known agents, who vote as follows:
\begin{itemize}
\item $k-2$ known agents rank $c_2 \succ c_m$, then all candidates $\{c_3, \cdots , c_{\ell}\}$ in an arbitrary order, then the rest of the candidates in an arbitrary order, and lastly $c_1$.
\item Two known agents rank $c_m \succ c_2$, then all candidates $\{c_3 , \cdots , c_{\ell}\}$ in an arbitrary order, then the rest of the candidates in an arbitrary order, and lastly $c_1$.
\end{itemize}
We first show that $c_1$ cannot win. 
Denote $L := \{c_m, c_2, c_3, \ldots, c_{\ell}\}$.
We show that the difference in scores between some of the $\ell$ candidates in $L$ and $c_1$ is always strictly positive.
\begin{itemize}
\item The known agents rank all candidates in $L$ at the top $\ell$ positions. Therefore, each agent gives all of them together a total score of $\topLscores$. So
\begin{align*}
\sum_{c\in L} (\score_K(c)-\score_K(c_1)) =
&
k(\topLscores - \ell s_1).
\end{align*}
\item There are $n-k$ agents not in $K$ (including Alice). 
Each of these agents gives all candidates in $L$ together at least $\botLscores$, and gives $c_1$ at most $s_m$ points. Therefore, we can bound the sum of score differences as follows:
\begin{align*}
\sum_{c\in L} (\score_N(c)-\score_N(c_1)) \geq
&
k (\topLscores - \ell s_1)
+ (n-k) (\botLscores - \ell s_m)
\\
=&
k (\ell s_m + \topLscores - \botLscores - \ell s_1)
+ n(\botLscores - \ell s_m).
\end{align*}
The assumption on $k$ implies that this expression is positive. Therefore, for at least one $c\in L$, $\score_N(c)-\score_N(c_1) > 0$.
So $c_1$ has no chance to win or even tie.
Therefore, switching $c_2$ and $c_1$ is a safe manipulation.
\end{itemize}


Next, we show that the manipulation can help $c_m$ win, when the agents not in $K$ vote as follows:
\begin{itemize}
\item $k-4$ unknown agents rank $c_m\succ c_2\succ \cdots $,
where each candidate except $c_1,c_2,c_m$ is ranked last by at least one voter (here we use the assumption $n\geq (\ell+1)m$: the condition on $k$ implies $k>n/(\ell+1)\geq m$, so $k\geq m+1$ and $k-4\geq m-3$).
\item One unknown agent ranks 
$c_2\succ \cdots \succ c_m \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_2 \succ c_1$.  
\item If there are remaining unknown agents, then they are split evenly between 
$c_m\succ c_2\succ \cdots $ and 
$c_2\succ c_m\succ \cdots $ (if the number of remaining agents is odd, then the last one abstains).
\end{itemize}
Then,
\begin{align*}
\score_N(c_2) - \score_N(c_m)
=&
(k-2)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(k-4)(s_{m-1}-s_{m}) 
+ (s_m-s_2)
+ (s_2-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\not\in\{1,2,m\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_2) - \score_N(c_j)
\geq &
(k-2)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(k-5)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_2-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_2-s_{m-1})
\\
= & s_2 - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_2$.

If Alice switches $c_1$ and $c_2$, then the score of $c_2$ decreases by $s_2-s_1$, which is positive by the lemma assumption, and the scores of all other candidates except $c_1$ do not change. So $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}

In particular, for the anti-plurality rule the condition in \Cref{lem:z:s2>s1} for $\ell=m-1$ is $k>n/m$.
\begin{corollary}
Let $m\geq 3$ and $n\geq m^2$.
The RAT-degree of anti-plurality is at most $\floor{n/m}+1$.
\end{corollary}
Intuitively, the reason that anti-plurality fares worse than plurality is that, even with a small number of known agents, it is possible to deduce that some candidate has no chance to win, and therefore there is a safe manipulation.

While we do not yet have a complete characterization of the RAT-degree of positional voting rules, our current results already show the strategic importance of the choice of scores.


\iffalse
The following lemma strengthens \Cref{lem:st1>st}
in a similar way.
\begin{lemma}
\label{lem:z:st1>st}
Let $\ell \in \{2,\ldots, m-1\}$ 
and $t\in\{1,\ldots,m-\ell \}$ be integers.

Consider a positional voting setting with $m\geq 3$ candidates and $n\geq (\ell+1)m$ agents.
Denote $\topLscores := \sum_{j=m-\ell+1}^m s_j = $  the sum of the $\ell$ highest scores and $\botLscores := \sum_{j=1}^{\ell}s_j = $ the sum of the $\ell$ lowest scores.
If $s_{t+1} > s_t = \cdots = s_1$ and there are $k$ known agents,
where 
\begin{align*}
k > \frac{\ell s_m - \botLscores}{\ell s_m + \topLscores - \botLscores - \ell s_1} n,
\end{align*}
then switching $c_{t+1}$ and $c_t$ may be a safe profitable manipulation.
\end{lemma}


\begin{proof}

Suppose there is a subset $K$ of $k$ known agents, who vote as follows:
\begin{itemize}
\item $k-2$ known agents rank $c_{t+1} \succ c_m$ first, then all candidates $\{c_{m-1}, \cdots , c_{m-\ell+1}\}$ in an arbitrary order, then the rest of the candidates in an arbitrary order, and lastly the candidates $\{c_1,\ldots,c_t\}$ in an arbitrary order (note this is possible as $t+\ell\leq m$).
\item Two known agents rank $c_m \succ c_{t+1}$ first, then all candidates $\{c_{m-1}, \cdots , c_{m-\ell+1}\}$ in an arbitrary order, then the rest of the candidates in an arbitrary order, and lastly the candidates $\{c_1,\ldots,c_t\}$ in an arbitrary order.
\end{itemize}

We first show that the $t$ worst candidates for Alice ($c_1,\ldots, c_t$) cannot win. 
Note that, by the lemma assumption $s_t = \cdots = s_1$, all these candidates receive exactly the same score by all known agents. We show that the difference in scores between $c_{t+1}$ and $c_t$ (and hence all $t$ worst candidates) is always strictly positive.
\begin{itemize}
\item The difference in scores given by the known agents is 
\begin{align*}
\score_K(c_{t+1})-\score_K(c_t) =
&
(\floor{n/2}-1)(s_m-s_1) 
+ (s_{m-1}-s_1).
\end{align*}
\item There are
$\floor{n/2}-1$ agents not in $K$ (including Alice).
These agents can reduce the score-difference by at most 
$(\floor{n/2}-1)(s_m-s_1)$.
Therefore, 
\begin{align*}
\score_N(c_{t+1})-\score_N(c_t) \geq (s_{m-1}-s_1),
\end{align*}
which is positive 
by the assumption $m-2 \geq t$ and $s_{t+1}>s_t$.
So no candidate in $c_1,\ldots,c_t$ has a chance to win or even tie.
\end{itemize}
Therefore, switching $c_{t+1}$ and $c_t$ can never harm Alice --- the manipulation is safe.

Next, we show that the manipulation can help $c_m$ win. We compute the score-difference between $c_m$ and the other candidates with and without the manipulation. 

Suppose that the agents not in $K$ vote as follows:
\begin{itemize}
\item $\floor{n/2}-3$ unknown agents rank $c_m\succ c_{t+1}\succ \cdots $,
where each candidate in $c_{t+2},\ldots,c_{m-1}$ is ranked last by at least one voter (here we use the assumption $n\geq 2m$).
\item One unknown agent ranks 
$c_{t+1}\succ \cdots \succ c_m \succ c_t \succ \cdots \succ c_1$;
\item Alice votes truthfully $c_m\succ  \cdots \succ c_{t+1} \succ  c_t \succ \cdots \succ c_1$.  
\end{itemize}
Then,
\begin{align*}
\score_N(c_{t+1}) - \score_N(c_m)
=&
(\floor{n/2}-1)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(\floor{n/2}-3)(s_{m-1}-s_{m}) 
+ (s_m-s_{t+1})
+ (s_{t+1}-s_m)
\\
=&
0.
\end{align*}
Moreover, for any $j\in\{t+2,\ldots,m-1\}$, the score of $c_j$ is even lower (here we use the assumption that $c_j$ is ranked last by at least one unknown agent):
\begin{align*}
\score_N(c_{t+1}) - \score_N(c_j)
\geq &
(\floor{n/2}-1)(s_{m}-s_{m-2}) 
+ 2(s_{m-1}-s_{m-2})
\\
&+
(\floor{n/2}-4)(s_{m-1}-s_{m-2}) 
+ (s_{m-1}-s_1)
+ (s_m-s_{m-1})
+ (s_{t+1}-s_{m-1})
\\
\geq & (s_{m-1}-s_{1})
+ (s_{t+1}-s_{m-1})
\\
= & s_{t+1} - s_1,
\end{align*}
which is positive by the lemma assumption.
Therefore, when Alice is truthful, the outcome is a tie between $c_m$ and $c_{t+1}$.

If Alice switches $c_t$ and $c_{t+1}$, then the score of $c_{t+1}$ decreases by $s_{t+1}-s_t$, which is positive by the lemma assumption, and the scores of all other candidates except $c_t$ do not change. As $c_t$ cannot win, $c_m$ wins, which is better for Alice than a tie.
Therefore, the manipulation is profitable.
\end{proof}


The following lemma extends \Cref{lem:sm>sm1}.
\begin{lemma}
\label{lem:z:sm>sm1}
Let $\ell \in \{2,\ldots, m-1\}$ be an integer.
Consider a positional voting setting with $m\geq 3$ candidates and  $n\geq 4$ agents.
If $s_m > s_{m-1}$
and there are $k$ known agents, where
\begin{align*}
k > \frac{\ell s_m - \botLscores}{\ell s_m + \topLscores - \botLscores - \ell s_1} n,
\end{align*}
then switching the top two candidates ($c_m$ and $c_{m-1}$) may be a safe profitable manipulation for Alice.
\end{lemma}

\begin{proof}
Suppose there is a subset $K$ of $k$ known agents, who vote as follows:
\begin{itemize}
\item $k-2$ known agents rank $c_{m-2} \succ c_{m-1}$ first, 
then all candidates $\{c_{m-3},\ldots,c_{m-\ell}\}$,
then the other candidates in an arbitrary order,
and lastly $c_m$.
\item Two known agents rank $c_{m-1} \succ c_{m-2}$ first, 
then all candidates $\{c_{m-3},\ldots,c_{m-\ell}\}$,
then the other candidates in an arbitrary order,
and lastly $c_m$.
\end{itemize}

We first show that $c_m$ cannot win. 
Denote $L := \{c_{m-1}, \ldots, c_{m-\ell}\}$.
We show that the difference in scores between some of the $\ell$ candidates in $L$ and $c_m$ is always strictly positive.
\begin{itemize}
\item The known agents rank all candidates in $L$ at the top $\ell$ positions. Therefore, each agent gives all of them together a total score of $\topLscores$. So
\begin{align*}
\sum_{c\in L} (\score_K(c)-\score_K(c_m)) =
&
k(\topLscores - \ell s_1).
\end{align*}
\item There are $n-k$ agents not in $K$ (including Alice).
Each of these agents gives all candidates in $L$ together at least $\botLscores$, and gives $c_1$ at most $s_m$ points. Therefore, we can bound the sum of score differences as follows:
\begin{align*}
\sum_{c\in L} (\score_N(c)-\score_N(c_m)) \geq
&
k (\topLscores - \ell s_1)
+ (n-k) (\botLscores - \ell s_m)
\\
=&
k (\ell s_m + \topLscores - \botLscores - \ell s_1)
+ n(\botLscores - \ell s_m).
\end{align*}
The assumption on $k$ implies that this expression is positive. Therefore, for at least one $c\in L$, $\score_N(c)-\score_N(c_m) > 0$.
So $c_m$ has no chance to win or even tie.
\end{itemize}
Therefore, switching $c_m$ and $c_{m-1}$ is a safe manipulation.

Next, we show that the manipulation can help $c_{m-1}$ win. We compute the score-difference between $c_{m-1}$ and the other candidates with and without the manipulation. 

Suppose that the agents not in $K$ vote as follows:
\begin{itemize}
\item Some $k-4$ unknown agents
rank $c_{m-1}\succ c_{m-2}\succ \cdots $.
\item One unknown agent ranks $c_m \succ c_{m-2} \succ c_{m-1}\succ \cdots $.
\item If there are remaining unknown
agents, then they split evenly between 
$c_{m-1}\succ c_{m-2}\succ \cdots $ and $c_{m-2}\succ c_{m-1}\succ \cdots $ 
(if the number of these remaining agents is odd, the last one abstains).
\item Alice votes truthfully $c_m\succ c_{m-1}\succ c_{m-2} \cdots \succ c_1$.
\end{itemize}
Then,
\begin{align*}
\score_N(c_{m-2}) - \score_N(c_{m-1})
=&
(k-2)(s_{m}-s_{m-1}) 
+ 2(s_{m-1}-s_{m})
\\
&+
(k-4)(s_{m-1}-s_{m}) 
+ (s_{m-1}-s_{m-2})
+ (s_{m-2}-s_{m-1})
\\
=&
0.
\end{align*}
The candidates $c_{j<m-2}$ are ranked even lower than $c_{m-1}$ by all agents. Therefore the outcome is a tie between $c_{m-1}$ and $c_{m-2}$.

If Alice switches $c_{m-1}$ and $c_m$, then the score of $c_{m-1}$ increases by $s_m-s_{m-1}$ and the scores of all other candidates except $c_m$ do not change. Therefore, 
$\score_N(c_{m-2}) - \score_N(c_{m-1})$ becomes negative, so $c_{m-1}$ wins, which is better for Alice by assumption.
Therefore, the manipulation is profitable.
\end{proof}
\fi


\iffalse
% EREL: interesting, but not enough time to complete..
We now show a partial lower bound for positional voting.


\begin{proposition}\label{lower:score-voting-old}
Suppose there are $m=3$ candidates
and $n$ is odd. 
Then the RAT-degree of any score-vector voting rule is at least $
\floor{(n+1)/6}$.
\end{proposition}
\begin{proof}
Let $K$ be a set of $k$ known agents.
Let $T_1$ be the true preferences of Alice and let $P_1$ be a potential manipulation. We show that it is not a safe manipulation.

If $P_1$ does not change the score given to any candidate, then it has no effect on the outcome and therefore cannot be profitable.
Otherwise, there are some two candidates, say $c_j$ and $c_k$, such that $c_j$ gets a higher score by $T_1$ and $c_k$ gets a higher score by $P_1$. We will show that, for some set of reports by the unknown agents, $c_j$ and $c_k$ are tied for the first place. This means that if Alice reports $T_i$ then $c_j$ wins, but if $i$ manipulates to $P_i$ then $c_k$ wins, which is a worse outcome for Alice.

Specifically, suppose the unknown agents report as follows:
\begin{itemize}
\item Some $k$ unknown agents report exactly as the agents in $K$, except that $c_j$ and $c_k$ switch places (this guarantees that $c_j$ and $c_k$ are tied).
\item Some $2 k + 2$ unknown agents report $c_k > c_j > c_l$, where $c_l$ is the third candidate.
\item Some $2 k + 2$ unknown agents report $c_j > c_k > c_l$.
\end{itemize}
Now, the score of $c_k$ and $c_j$ is equal, and at least $(k s_1 + k s_2) + (2 k+2) s_2 + (2 k+2) s_3 = k s_1 + (3 k +2) s_2 + (2 k + 2)s_3$. The score of $c_l$ is at most $2 k s_3 + (4 k + 4) s_1$.
The difference in scores is at least $2 (s_3-s_1) + (3k + 2)(s_2-s_1)$, which is positive for any score vector. So $c_j$ and $c_k$ tie for the first place. Moreover, the difference remains positive regardless of Alice's vote. Therefore, if Alice votes truthfully then $c_j$ wins; otherwise $c_k$ wins. 

The total number of agents required for the construction (including Alice) is $6 k + 5$. We have shown that $k$ known agents are not sufficient for a safe manipulation; hence the RAT-degree is at least $k+1 = (n+1)/6$.

If $n$ is odd and $k+1 = \floor{(n+1)/6}$, then $n$ can be either $6k+5$ or $6k+7$ or $6k+9$. The above construction covers the first case; for the two latter cases, simply add one or two unknown agents that report $c_k > c_j > c_l$ and $c_j > c_k > c_l$.

Future work: extend to $m\geq 4$ candidates and more general values of $n$. See question here: \url{https://math.stackexchange.com/q/5029581}
\end{proof}

\fi


\iffalse
\subsection{Condorcet rules}
\erel{Just some initial thoughts}
A \emph{Condorcet voting rule} is a rule that always selects a Condorcet winner if one exists. Condorcet rules differ in how they pick the winner when a Condorcet winner does not exist.

A simple Condorcet rule is the MaxMin-Condorcet rule. It works in the following way:
\begin{itemize}
\item For each ordered pair of candidates $(c,c')$, compute $S(c,c')$ as the number of voters who prefer $c$ to $c'$.
\item The score of each candidate $c$ is $\min_{c'} S(c,c')$, that is, the lowest score of $c$ in all pairwise competitions.
\item The candidate with the highest score wins. 
\end{itemize}
Note that, if there is a Condorcet winner, then his score will be larger than $n/2$, and the score of all other candidates will be smaller than $n/2$, so the Condorcet winner will be selected.

This rule potentially has a high RAT-degree, as the winner depends on $m-1$ scores per agent, rather than one. 
\erel{I could not compute its RAT-degree - some brain-storming on this could help.}
\fi


\subsection{Higher RAT-degree?}
\Cref{thm:upper-positional} raises the question of whether some other, non-positional voting rules have RAT-degrees substantially higher than $n/2$.
%
Using ideas similar to those in \Cref{sect:indivisible-EF1-n-1}, 
we could use a selection rule $\Gamma$ to choose a ``dictator'', and implement the dictator's first choice.
This deterministic mechanism has RAT-degree $n-1$, as without knowledge of all other agents' inputs, every manipulation might cause the manipulator to lose the chance of being a dictator. 
However, besides the fact that this is an unnatural mechanism, it suffers from other problems such as the \emph{no-show paradox} (a participating voter might affect the selection rule in a way that will make another agent a dictator, which might be worse than not participating at all).

Our main open problem is therefore to devise natural voting rules with a high RAT-degree.
\begin{open}
Does there exist a non-dictatorial voting rule that satisfies the participation criterion (i.e. does not suffer from the no-show paradox),  with RAT-degree larger than $\ceil{n/2}+1$? 
\end{open}


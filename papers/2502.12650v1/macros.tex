%%%%%%%%%%%%% Mechanism's Name %%%%%%%%%%%%%%%% 


%%%%%%%%%%%%% Author's Colors %%%%%%%%%%%%%%%% 
\definecolor{gfored}{rgb}{0.580, 0.050, 0.211}
\definecolor{ao}{rgb}{0.007, 0.520, 0.867}
\definecolor{moegi}{rgb}{0.357, 0.537, 0.188}
\definecolor{jl}{rgb}{1.0, 0.2, 0.8}
\definecolor{brown(web)}{rgb}{0.65, 0.16, 0.16}
\definecolor{bisque}{rgb}{1.0, 0.89, 0.77}
\definecolor{nbs}{rgb}{0.88, 0.07, 0.37}
\definecolor{yt}{rgb}{0.58, 0.44, 0.86}
\definecolor{iy}{rgb}{0.0, 0.36, 0.05}
\definecolor{burntorange}{rgb}{0.8, 0.33, 0.0}
\definecolor{ouscolor}{rgb}{0.25, 0.41, 0.88}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{%
  \node[shape=circle,fill,inner sep=0.5pt] (char) {\textcolor{white}{#1}};}%
}%

\newcommand{\dingZero}{\circledtest{0}}
\newcommand{\dingOne}{\circledtest{1}}
\newcommand{\dingTwo}{\circledtest{2}}
\newcommand{\dingThree}{\circledtest{3}}
\newcommand{\dingFour}{\circledtest{4}}
\newcommand{\dingFive}{\circledtest{5}}
\newcommand{\dingSix}{\circledtest{6}}


\newcommand{\one}{1)}
\newcommand{\two}{2)}
\newcommand{\three}{3)}
\newcommand{\four}{4)}
\newcommand{\five}{5)}
\newcommand{\six}{6)}
\newcommand{\seven}{7)}
\newcommand{\eight}{8)}



%\newif\ifdraft


% \newcommand{\xxx}[1]{\param{XXX}} % to highlight hardcoded numbers
\newcommand{\addrefs}[0]{\textcolor{orange}{[CITE]}}

\newcommand{\ignore}[1]{}

\newcommand{\outlinep}[1]{\noindent\textbf{#1}}
\newcommand{\outline}[1]{\textcolor{orange}{\noindent\textbf{[OUTLINE]: #1}}}

% \usepackage[colorinlistoftodos,prependcaption,textsize=scriptsize]{todonotes} % For margin notes
%  
%\iffalse
%\let\marginpar\marginnote
%\setlength{\marginparwidth}{0.4in}
%\newcommand\revmid[2]{\todo[linecolor=#1,backgroundcolor=#1!15,bordercolor=#1]{\textcolor{black}%{\textbf{#2}}}}
%\fi

\newcommand{\rev}[1]{\textcolor{red}{#1}}
\newcommand{\revA}[1]{\textcolor{brown}{#1}}
\newcommand{\revAp}[1]{\revmid{brown}{#1}}

\newcommand{\revB}[1]{\textcolor{orange}{#1}}
\newcommand{\revBp}[1]{\revmid{orange}{#1}}

\newcommand{\revCC}[1]{\textcolor{blue}{#1}}
\newcommand{\revCCp}[1]{\revmid{blue}{#1}}

\newcommand{\revD}[1]{\textcolor{red}{#1}}
\newcommand{\revDp}[1]{\revmid{red}{#1}}

\newcommand{\revE}[1]{\textcolor{magenta}{#1}}
\newcommand{\revEp}[1]{\revmid{magenta}{#1}}

\ifdraft
    
    % \usepackage{color,soul}
%%%%%%%%%%%% Extend the margin for todo-notes %%%%%%%%%%%% 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
    \newcommand{\param}[1]{\textcolor{red}{#1}} 
    % \newcommand{\placeholder}{\textcolor{red}{\textbf{X} }}
%%%%%%%%%%%% Author's Changes and Comments %%%%%%%%%%%%%%% 
   %  \newcommand{\agy}[1]{\textcolor{gfored}{#1}}
   %  \newcommand{\agycomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{gfored}{\textbf{@gy:} #1}}}
   %  \renewcommand{\agycomment}[1]{{\textcolor{gfored}{\textbf{\hl{[@gy:}} \hl{#1}\textbf{]}}}}
   %  \newcommand{\agyt}[1]{{\textcolor{brown(web)}{#1}}}

   %  \newcommand{\ms}[1]{\textcolor{cyan}{#1}}
   %  \newcommand{\mscomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{red}{\textbf{@MS:} #1}}}
   %  \renewcommand{\mscomment}[1]{{\textcolor{red}{\textbf{\hl{[@MS:}} \hl{#1}\textbf{]}}}}

   %  \newcommand{\atb}[1]{\textcolor{ao}{#1}}
   %  \newcommand{\atbnote}[1]{\textcolor{ao}{\emph{note: #1}}}
   %  \newcommand{\atbinline}[1]{\textcolor{ao}{\textbf{ATB:} #1}}
   %  \newcommand{\atbcomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{ao}{\textbf{@atb:} #1}}}
   % % \renewcommand{\atbcomment}[1]{{\textcolor{ao}{\textbf{\hl{[@atb:}} \hl{#1}\textbf{]}}}}

    
   %  \newcommand{\yct}[1]{\textcolor{yt}{#1}}
   %  \newcommand{\yctcomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{\textbf{@yct:} #1}}}
   %  \renewcommand{\yctcomment}[1]{{\textcolor{yt}{\textbf{\hl{[@yct:}} \hl{#1}\textbf{]}}}}

   %  \newcommand{\gf}[1]{\textcolor{blue}{#1}}
   %  \newcommand{\gfcomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{\textbf{@gf:} #1}}}

   %  \newcommand{\juan}[1]{\textcolor{blue}{#1}}
   %  \newcommand{\jgll}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{\textbf{@jgl:} #1}}}
   %  \newcommand{\jgl}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{\textbf{@jgl:} #1}}}
   %  \renewcommand{\jgl}[1]{{\color{blue}{\textbf{\hl{[@jgl:}} \textit{\hl{#1}}\textbf{]}}}}
    
   %  \newcommand{\nb}[1]{\textcolor{nbs}{#1}}
   %  \newcommand{\nbcomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{nbs}{\textbf{@nb:} #1}}}
   %  %\renewcommand{\nbcomment}[1]{{\textcolor{nbs}{\textbf{\hl{[@nb:}} \hl{#1}\textbf{]}}}}

   %  %\newcommand{\nbcomment}[1]{{\textcolor{nbs}{\textbf{[@nbs:} #1\textbf{]}}}}

    
   %  \newcommand{\hluo}[1]{\textcolor{moegi}{#1}}
   %  \newcommand{\hluocomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{moegi}{\textbf{@hluo:} #1}}}
   %  \newcommand{\hluoinline}[1]{{\textcolor{moegi}{\textbf{[@hluo:} #1\textbf{]}}}}
    

    
   %  \newcommand{\iey}[1]{\textcolor{iy}{#1}}
   %  \newcommand{\ieyinline}[1]{{\color{iy}{\textbf{\hl{[@iey:}} \textit{\hl{#1}}\textbf{]}}}}
   %  \newcommand{\ieycomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{iy}{\textbf{@iey:} #1}}}
   %  %\renewcommand{\ieycomment}[1]{{\color{iy}{\textbf{\hl{[@iey:}} \textit{\hl{#1}}\textbf{]}}}}

   %  \newcommand{\om}[1]{\textcolor{teal}{#1}}
   %  \newcommand{\omcomment}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{teal}{\textbf{@om:} #1}}}
   %  \newcommand{\ominline}[1]{{\textcolor{teal}{\textbf{[@om:} #1\textbf{]}}}}
   %  %\renewcommand{\omcomment}[1]{{\color{teal}{\textbf{\hl{[@om:}} \textit{\hl{#1}}\textbf{]}}}}
    
   %  \newcommand{\mma}[1]{\textcolor{red}{#1}}

    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\else
    % \newcommand{\placeholder}{\textcolor{red}{\textbf{XXXXXXXXXXXXXXXXXXXXXXXXX}}}
    % \newcommand{\param}[1]{\textcolor{black}{#1}} % to highlight hardcoded numbers
%%%%%%%%%%%% Author's Changes and Comments %%%%%%%%%%%%%%% 
    % \newcommand{\agy}[1]{{#1}}
    % \newcommand{\agycomment}[1]{}
    % \newcommand{\agyinline}[1]{}
    % \newcommand{\agyt}[1]{#1}

    % \newcommand{\mscomment}[1]{}
    
    % \newcommand{\atb}[1]{{#1}}
    % \newcommand{\atbcomment}[1]{}
    
    % \newcommand{\yct}[1]{{#1}}
    % \newcommand{\yctcomment}[1]{}
    
    % \newcommand{\gf}[1]{{#1}}
    % \newcommand{\gfcomment}[1]{}

    
    % \newcommand{\nb}[1]{{#1}}
    % \newcommand{\nbcomment}[1]{}

    % \newcommand{\hluo}[1]{{#1}}
    % \newcommand{\hluocomment}[1]{}


    % \newcommand{\iey}[1]{#1}
    % \newcommand{\ieycomment}[1]{}
    % \newcommand{\ieyinline}[1]{}
    
    % \newcommand{\om}[1]{#1}
    % \newcommand{\omcomment}[1]{}
    % \newcommand{\ominline}[1]{}

    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

%%%%%%%%%%%% Disable todo-notes %%%%%%%%%%%% 
    %\usepackage[disable]{todonotes}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi

\lstset { %
    language=Matlab,
    %backgroundcolor=\color{black!5}, % set backgroundcolor
    basicstyle=\footnotesize,% basic font setting
    numbers=left,
    xleftmargin=2em,
    frame=single,
    framexleftmargin=2em,
    %basicstyle       = \ttfamily,
    keywordstyle     = \bfseries,
    identifierstyle  = \color{blue},
    commentstyle     = \color{olive},
    moredelim        = [s][\color{ForestGreen}]{/**}{*/},
    stringstyle      = \color{magenta},
    showstringspaces = false,
    columns          = fullflexible,
    escapechar       = {|}
}  
%%%%%%%%%%%% Filled Circle with Index Number %%%%%%%%%%%% 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand*\DRAMCMD[1]{\texttt{#1}}
\newcommand*\DRAMTIMING[1]{t\textsubscript{#1}}
\newcommand*\nCHIPS{52}
\newcommand*\nMODULES{6}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Observations
%\newcounter{obs}
%\setcounter{obs}{0}
%\newcommand\observation[1]{%
   %\leavevmode\par
   %\stepcounter{obs}
%   \refstepcounter{obs}
%   \noindent
%   \colorbox{gray!20}{\textbf{Observation \theobs.}} \emph{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{frenchblue}{rgb}{0.19, 0.55, 0.91}

\usepackage[most]{tcolorbox} 
\tcbset{before skip=1.5pt, after skip=4pt}

\newtcolorbox[auto counter]{obsx}[3][]{%
    colframe = #2!45,
    colback  = #2!10,
    coltitle = #2!20!black, 
    colbacktitle=#2!20,
    coltitle=black,
    fonttitle=\bfseries, 
    title=#3~\thetcbcounter.\ ,
    enhanced,
    attach boxed title to top left={yshift=-2.8mm, xshift=0.15cm},
    bottom=-2.2pt,
    %top=0.5pt,
    #1% 
}


\usepackage[most]{tcolorbox} 
\newtcolorbox[auto counter]{tkx}[2][]{%
    enhanced, breakable, center title,
    colframe = #2!45,
    colback  = #2!10,
    %coltitle = #2!20!black, 
    colbacktitle=#2!20,
    %coltitle=black,
    %fonttitle=\bfseries, 
    %title=\ ,
    %enhanced,
    %attach boxed title to top left={yshift=-2.6mm, xshift=0.15cm},
    left=-0.5pt,
    right=-0.5pt,
    bottom=-2pt,
    top=-0.25pt,
    #1% 
}
\newcounter{obs}
\setcounter{obs}{0}
\newcommand\observation[1]{
\refstepcounter{obs}
\begin{tkx}{moegi}
\noindent\textbf{Observation~\theobs.} #1
\end{tkx}
}


% \newcounter{tkw}
% \setcounter{tkw}{0}
% \newcommand\takeaway[1]{
% \stepcounter{tkw}
% \begin{tkx}{frenchblue}
% \noindent\textbf{Takeaway~\thetkw.} #1
% \end{tkx}
% }


% \newcounter{observation}
% \newcommand{\obs}[2]{%
%     \refstepcounter{observation}%
%     \label{#1}%
%     \noindent\textbf{Observation \theobservation.} #2\par
% }

% \newcounter{corollary}
% \newcommand{\cor}[2]{%
%     \refstepcounter{corollary}%
%     \label{#1}%
%     \noindent\textbf{Corollary \thecorollary.} #2\par
% }

% \newcounter{takeaway}
% \newcommand{\takeaway}[2]{%
%     \refstepcounter{takeaway}%
%     \label{#1}%
%     \noindent\textbf{Takeaway \thetakeaway.} #2\par
% }

% \newcounter{claim}
% \newcommand{\claim}[2]{%
%     \refstepcounter{claim}%
%     \label{#1}%
%     \noindent\textbf{Claim \theclaim.} #2\par
% }

% \newcounter{proof}
% \newcommand{\proof}[2]{%
%     \refstepcounter{proof}%
%     \label{#1}%
%     \noindent\textbf{Proof \theproof.} #2\par
% }


%\definecolor{gfored}{rgb}{0.580, 0.050, 0.211}
%\definecolor{ao}{rgb}{0.007, 0.520, 0.867}
%\definecolor{moegi}{rgb}{0.357, 0.537, 0.188} --
%\definecolor{jl}{rgb}{1.0, 0.2, 0.8}
%\definecolor{brown(web)}{rgb}{0.65, 0.16, 0.16} --
%\definecolor{bisque}{rgb}{1.0, 0.89, 0.77}
%\definecolor{nbs}{rgb}{0.88, 0.07, 0.37}
%\definecolor{yt}{rgb}{0.58, 0.44, 0.86}
%\definecolor{iy}{rgb}{0.0, 0.36, 0.05}
%\begin{mybox}{black}{Observation}
%XXXXXXXX
%\end{mybox}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Takeaway
%\newcounter{tkw}
%\setcounter{tkw}{0}
%\newcommand\takeaway[1]{%
   %\leavevmode\par
   %\stepcounter{obs}
  %\vspace{0.5em}
%  \refstepcounter{tkw}
%  \noindent
%  \begin{tabular}{|p{0.95\linewidth}|}
%       \hline
%       \textbf{{Takeaway \thetkw}.} \emph{{#1}}\\
%       \hline 
%  \end{tabular}
  %\vspace{-0.5em}
%  \addtocounter{table}{-1} 
%  }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Takeaway Box
%\newcommand\takeawaybox[1]{%
%   \refstepcounter{tkw}
%  \vspace{0.5em}
%  \noindent
%  \begin{tabular}{|p{0.95\linewidth}|}
%       \hline
%       \textbf{{Takeaway \thetkw}.} \emph{{#1}}\\
%       \hline 
%  \end{tabular}
%  \vspace{0.5em}
%  \addtocounter{table}{-1} % prevent incrementing table count
%}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\cosDRAMPumAllCitations}[0]{\cite{olgun2021quactrng, gao2019computedram, gao2022frac, kim2019drange, kim2018dram}}

\newcommand{\PUDAllCitations}[0]{\cite{
olgun2021quactrng, gao2022frac, kim2019drange, kim2018dram,olgun2023dram,olgun2021pidram,
aga2017compute, besta2021sisa,chi2016prime,deng2018dracc,eckert2018neural,flashcosmos,fujiki2019duality,gao2019computedram,hajinazar2020simdram,he2020sparse,imani2019floatpim,li2017drisa,oliveira2022accelerating,seshadri.arxiv16,seshadri2013rowclone,seshadri2015fast,seshadri2016processing,seshadri2017ambit,seshadri2017simple,seshadri2018rowclone,seshadri2019dram,shafiee2016isaac,song2017pipelayer,song2018graphr,xin2020elp2im}}

\newcommand{\PUMAllCitations}[0]{\cite{aga2017compute, besta2021sisa,chi2016prime,deng2018dracc,eckert2018neural,flashcosmos,fujiki2019duality,gao2019computedram,hajinazar2020simdram,he2020sparse,imani2019floatpim,li2016pinatubo,li2017drisa,oliveira2022accelerating,seshadri.arxiv16,seshadri2013rowclone,seshadri2015fast,seshadri2016processing,seshadri2017ambit,seshadri2017simple,seshadri2018rowclone,seshadri2019dram,shafiee2016isaac,song2017pipelayer,song2018graphr,xin2020elp2im, gao2022frac}}
\newcommand{\dataMovementProblemsCitations}[0]{~\cite{
mutlu2013memory,
mutlu2015research,
dean2013tail,
kanev_isca2015,
ferdman2012clearing,
wang2014bigdatabench,
mutlu2019enabling,
mutlu2019processing,
kim2012case,
wulf1995hitting,
ghose.sigmetrics20,
ahn2015scalable,
PEI,
hsieh2016transparent,
wang2020figaro}}



% \newcommand{\figref}[1]{Fig.~\ref{#1}}
% \newcommand{\figsref}[1]{Figs.~\ref{#1}}
% \newcommand{\secref}[1]{§\ref{#1}}
% \newcommand{\secsref}[1]{\agycomment{PLEASE USE \\secref MACRO}~\secref{#1}}
% \newcommand{\tabref}[1]{Table~\ref{#1}}
% \newcommand{\tabsref}[1]{Tables~\ref{#1}}
% \newcommand{\obsvref}[1]{Obsv.~\ref{#1}}
% \newcommand{\obsvsref}[1]{Obsvs.~\ref{#1}}
% \newcommand{\expref}[1]{Exp.~\ref{#1}}
% \newcommand{\expsref}[1]{Exps.~\ref{#1}}
\newcommand{\fnref}[1]{$^\ref{#1}$}
\newcommand{\maj}[1]{\texttt{MAJ{#1}}}
\newcommand{\majop}[1]{\texttt{MAJ{#1}}}


\definecolor{amber}{rgb}{1.0, 0.49, 0.0}
\definecolor{awesome}{rgb}{1.0, 0.13, 0.32}
\definecolor{dollarbill}{rgb}{0.52,0.73,0.4}
\definecolor{moegi}{rgb}{0.357, 0.537, 0.188}
\definecolor{burgundy}{rgb}{0.5, 0.0, 0.13}
\definecolor{ballblue}{rgb}{0.13, 0.67, 0.8}
\definecolor{ups-truck}{rgb}{0.53, 0.28, 0.21}
\definecolor{airforceblue}{rgb}{0.36, 0.54, 0.66}
\definecolor{cadmiumgreen}{rgb}{0.0, 0.42, 0.24}
\definecolor{darkcyan}{rgb}{0.0, 0.55, 0.55}
\definecolor{caribbeangreen}{rgb}{0.0, 0.8, 0.6}
\definecolor{flamingopink}{rgb}{0.99, 0.56, 0.67}
\definecolor{jazzberryjam}{rgb}{0.65, 0.04, 0.37}
\definecolor{mediumpersianblue}{rgb}{0.0, 0.4, 0.65}
\definecolor{coolblack}{rgb}{0.0, 0.18, 0.39}
\definecolor{bleudefrance}{rgb}{0.19, 0.55, 0.91}
\definecolor{ao}{rgb}{0.0, 0.0, 1.0}
\definecolor{babyblueeyes}{rgb}{0.63, 0.79, 0.95}
\definecolor{darkwarmgray}{rgb}{0.2,0,0}
\definecolor{brightpink}{rgb}{1.0, 0.0, 0.5}
\definecolor{iy}{rgb}{0.0, 0.36, 0.05}
\definecolor{nbcolor}{rgb}{1.0, 0.33, 0.64}

% \newcommand{\circled}[1]{{\tikz[baseline=(char.base)]{\node[shape=circle,inner sep=1pt,fill=black, text=white] (char) {\footnotesize \textbf{#1}};}}}
% \newcommand{\circledletter}[1]{\tikz[baseline=(char.base)]{\node[shape=circle,inner sep=1pt,fill=black, text=white] (char) {\tiny \textbf{#1}};}}

\DeclareRobustCommand{\bgyellow}[1]{\textbf{{\sethlcolor{soulyellow}\hl{#1}}}}
\DeclareRobustCommand{\bgblue}[1]{\textbf{{\sethlcolor{babyblueeyes}\hl{#1}}}}
\DeclareRobustCommand{\bgred}[1]{\textbf{{\sethlcolor{red}\hl{#1}}}}
\DeclareRobustCommand{\bgpink}[1]{\textbf{{{\sethlcolor{flamingopink}{\hl{#1}}}}}}


\newcommand{\squishlist}{
 \begin{list}{$\circ$}
  { \setlength{\itemsep}{0pt}
     \setlength{\parsep}{0pt}
     \setlength{\topsep}{0pt}
     \setlength{\partopsep}{0pt}
     \setlength{\leftmargin}{1em}
     \setlength{\labelwidth}{1em}
     \setlength{\labelsep}{0.5em} } }

\newcommand{\squishsublist}{
\begin{list}{$\rightarrow$}
 { \setlength{\itemsep}{0pt}
    \setlength{\parsep}{0pt}
    \setlength{\topsep}{-10em}
    \setlength{\partopsep}{-3pt}
    \setlength{\leftmargin}{1em}
    \setlength{\labelwidth}{1em}
    \setlength{\labelsep}{0.5em} } }

\newenvironment{squishenum}
{\begin{enumerate}[leftmargin=*]
  \setlength{\itemsep}{0em}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}
  \setlength{\topsep}{3pt}
  \setlength{\partopsep}{0pt}}
{\end{enumerate}}

\newcommand{\squishend}{
  \end{list}  }

\newcommand{\head}[1]{\noindent\textbf{#1.}} 
\newcommand{\subhead}[1]{\noindent\textit{#1.}} 


   
\newcounter{take}
\setcounter{take}{0}
\newcommand\takebox[1]{\refstepcounter{take}
    \begin{tcolorbox}[colback=white!25!white,colframe=black!65!white, arc=1pt, boxrule=0.5pt, left=2pt,right=2pt,top=0pt,bottom=0pt,  title=\textbf{{Takeaway \thetake.}}]
        \emph{{#1}}
   \end{tcolorbox}
}
\ifdraft
\paperwidth=\dimexpr \paperwidth + 4cm\relax
\oddsidemargin=\dimexpr\oddsidemargin + 2cm\relax
\evensidemargin=\dimexpr\evensidemargin + 2cm\relax
\marginparwidth=\dimexpr \marginparwidth + 2cm\relax
% \setlength{\marginparwidth}{4cm}
\fi
\newcommand{\gf}[2]{\ifnum#1=\value{version}\textcolor{red}{#2}\else{#2}\fi}
\newcommand{\agy}[2]{\ifnum#1=\value{version}\textcolor{blue}{#2}\else{#2}\fi}
\newcommand{\atb}[2]{\ifnum#1=\value{version}\textcolor{orange}{#2}\else{#2}\fi}
\newcommand{\yct}[2]{\ifnum#1=\value{version}\textcolor{yt}{#2}\else{#2}\fi}
\newcommand{\ous}[2]{\ifnum#1=\value{version}\textcolor{ouscolor}{#2}\else{#2}\fi}
\newcommand{\iey}[2]{\ifnum#1=\value{version}\textcolor{iy}{#2}\else{#2}\fi}
\newcommand{\nb}[2]{\ifnum#1=\value{version}\textcolor{nbcolor}{#2}\else{#2}\fi}
\newcommand{\hluo}[2]{\ifnum#1=\value{version}\textcolor{moegi}{#2}\else{#2}\fi}
\newcommand{\om}[2]{\ifnum#1=\value{version}\textcolor{gfored}{#2}\else#2\fi}



\newcommand{\agytodo}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{TODO:~#2}}\else{}\fi}
\newcommand{\ycttodo}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{TODO:~#2}}\else{}\fi}
\newcommand{\ieytodo}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{iey}{TODO:~#2}}\else{}\fi}


\newcommand{\agycomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{blue}{Giray: #2}}\else{}\fi}
\newcommand{\atbcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{orange}{Atb: #2}}\else{}\fi}
\newcommand{\yctcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{Yahya: #2}}\else{}\fi}
\newcommand{\ouscomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{ouscolor}{Oguzhan: #2}}\else{}\fi}
\newcommand{\gfcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{purple}{Geraldo: #2}}\else{}\fi}
\newcommand{\ieycomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{iy}{Ismail: #2}}\else{}\fi}
\newcommand{\omcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{gfored}{Onur: #2}}\else{}\fi}
\newcommand{\nbcomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{nbcolor}{Nisa: #2}}\else{}\fi}
\newcommand{\hluocomment}[2]{\ifnum#1=\value{version}\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{moegi}{Haocong: #2}}\else{}\fi}
\newcommand{\versionedparam}[2]{\ifnum#1=\value{version}{#2}\else{#2}\fi}
\providecommand{\param}[1]{\versionedparam{\value{version}}{#1}}
\newcommand{\N}[0]{\versionedparam{\value{version}}{XX}}


\newcommand{\X}[0]{Chronus}
\newcommand{\Xlong}[0]{}


\newcommand{\equ}[2]{
\vspace{-0.75em}
\begin{equation}
    \footnotesize
    #1
    \label{#2}
    \vspace{0.25em}
\end{equation}
}

% \newcommand{\footref}[1]{\textsuperscript{\ref{#1}}}
\newcommand{\secref}[1]{§\ref{#1}}
\newcommand{\secsref}[1]{§§\ref{#1}}
\newcommand{\tabref}[1]{Table~\ref{#1}}
\newcommand{\algref}[1]{Alg.~\ref{#1}}
\newcommand{\figref}[1]{Fig.~\ref{#1}}
\newcommand{\figsref}[1]{Figs.~\ref{#1}}
\newcommand{\expref}[1]{Exp.~\ref{#1}}
\newcommand{\expsref}[1]{Exps.~\ref{#1}}
\newcommand{\obsref}[1]{Obsv.~\ref{#1}}
\newcommand{\obssref}[1]{Obsvs.~\ref{#1}}
% \renewcommand{\figref}[1]{Fig.~\ref{#1}}
% \renewcommand{\figsref}[1]{Figs.~\ref{#1}}
% \renewcommand{\expref}[1]{Exp.~\ref{#1}}
% \renewcommand{\expsref}[1]{Exps.~\ref{#1}}
% \renewcommand{\figurename}{Fig.}
% \renewcommand{\secref}[1]{§\ref{#1}}

\newcommand{\revtag}[1]{}
\newcommand{\copied}[2]{#2}
% \ifcameraready
%     \renewcommand{\copied}[2]{#2}
% \else
%     \ifrev 
%         \renewcommand{\revtag}[1]{\todo{\footnotesize #1}}
%     \else
%         \renewcommand{\copied}[2]{\todo{Copied from #1}\textcolor{gray}{#2}}
%     \fi
% \fi

\newcommand{\rhmemisolationrefs}[0]{\cite{fournaris2017exploiting, poddebniak2018attacking, tatar2018throwhammer, carre2018openssl, barenghi2018software, zhang2018triggering, bhattacharya2018advanced, google-project-zero, kim2014flipping, rowhammergithub, seaborn2015exploiting, van2016drammer, gruss2016rowhammer, razavi2016flip, pessl2016drama, xiao2016one, bosman2016dedup, bhattacharya2016curious, burleson2016invited, qiao2016new, brasser2017can, jang2017sgx, aga2017good, mutlu2017rowhammer, tatar2018defeating, gruss2018another, lipp2018nethammer, van2018guardion, frigo2018grand, cojocar2019eccploit,  ji2019pinpoint, mutlu2019rowhammer, hong2019terminal, kwong2020rambleed, frigo2020trrespass, cojocar2020rowhammer, weissman2020jackhammer, zhang2020pthammer, yao2020deephammer, deridder2021smash, hassan2021utrr, jattke2022blacksmith, tol2022toward, kogler2022half, orosa2022spyhammer, zhang2022implicit, liu2022generating, cohen2022hammerscope, zheng2022trojvit, fahr2022frodo, tobah2022spechammer, rakin2022deepsteal, park2016statistical, park2016experiments,lim2017active, ryu2017overcoming, yun2018study, yang2019trap, walker2021ondramrowhammer, kim2020revisiting, orosa2021deeper, yaglikci2022understanding, khan2018analysis, agarwal2018rowhammer, li2014write, ni2018write, genssler2022reliability, mutlu2023fundamentally}}

\newcommand{\exploitingRowHammerAllCitations}[0]{\cite{fournaris2017exploiting, poddebniak2018attacking, tatar2018throwhammer, carre2018openssl, barenghi2018software, zhang2018triggering, bhattacharya2018advanced, google-project-zero, kim2014flipping, rowhammergithub, seaborn2015exploiting, van2016drammer, gruss2016rowhammer, razavi2016flip, pessl2016drama, xiao2016one, bosman2016dedup, bhattacharya2016curious, burleson2016invited, qiao2016new, brasser2017can, jang2017sgx, aga2017good, mutlu2017rowhammer, tatar2018defeating, gruss2018another, lipp2018nethammer, van2018guardion, frigo2018grand, cojocar2019eccploit,  ji2019pinpoint, mutlu2019rowhammer, hong2019terminal, kwong2020rambleed, frigo2020trrespass, cojocar2020rowhammer, weissman2020jackhammer, zhang2020pthammer, yao2020deephammer, deridder2021smash, hassan2021utrr, jattke2022blacksmith, tol2022toward, kogler2022half, orosa2022spyhammer, zhang2022implicit, liu2022generating, cohen2022hammerscope, zheng2022trojvit, fahr2022frodo, tobah2022spechammer, rakin2022deepsteal, aydin2022cyber, mus2022jolt, wang2022research, lefforge2023reverse,fahr2022effects, kaur2022work, cai2022feasibility, li2022cyberradar, roohi2022efficient, staudigl2022neurohammer, yang2022socially, islam2022signature, canpolat2024leveraging, baek2025marionette}}

\newcommand{\understandingRowHammerAllCitations}[0]{\cite{redeker2002investigation, kim2014flipping, park2014active, park2016statistical, yang2016suppression, park2016experiments,lim2017active, ryu2017overcoming, yang2017scanning, lim2018study, yun2018study, yang2019trap, gautam2019row, walker2021ondramrowhammer, kim2020revisiting, orosa2021deeper, jiang2021quantifying, orosa2022spyhammer, cohen2022hammerscope, yaglikci2022understanding, khan2018analysis, agarwal2018rowhammer, li2014write, ni2018write, genssler2022reliability, mutlu2023fundamentally, he2023whistleblower, baeg2022estimation, frigo2020trrespass, mutlu2017rowhammer, mutlu2018rowhammer, mutlu2019rowhammer, olgun2023hbm, olgun2023drambender, zhou2023double, luo2023rowpress, lang2023blaster, baek2025marionette}}

\newcommand{\understandingRowHammerNVMCitations}[0]{\cite{khan2018analysis, agarwal2018rowhammer, li2014write, ni2018write, genssler2022reliability}}

\newcommand{\mitigatingRowHammerAllCitations}[0]{\cite{AppleRefInc, hp2015rowhammer, lenovo2015rowhammer, greenfield2012throttling, kim2014flipping, kim2014architectural, jedec2017ddr4, aichinger2015ddr, aweke2016anvil, bains-merged, bains2015row, bains2016distributed, bains2016row, gomez2016dummy, yang2016suppression, son2017making, seyedzadeh2018cbt, irazoqui2016mascat, ryu2017overcoming, yang2017scanning, you2019mrloc, lee2019twice, park2020graphene, yaglikci2021security, yaglikci2021blockhammer, frigo2020trrespass, kang2020cattwo, hassan2021utrr, qureshi2022hydra, saileshwar2022randomized, brasser2017can, konoth2018zebram, van2018guardion, vig2018rapid, hassan2019crow, gautam2019row, kim2022mithril, lee2021cryoguard, marazzi2022protrr, zhang2022softtrr, joardar2022learning, juffinger2023csi, yaglikci2022hira, saxena2022aqua, enomoto2022efficient, manzhosov2022revisiting, ajorpaz2022evax, naseredini2022alarm, joardar2022machine, hassan2022acase, zhang2020leveraging,loughlin2021stop, devaux2021method, han2021surround, fakhrzadehgan2022safeguard, saroiu2022price, saroiu2022configure, loughlin2022moesiprime, zhou2022ltpim, hong2023dsac, mutlu2023fundamentally, marazzi2023rega, didio2023copyonflip, sharma2022areview, woo2023scalable, park2022rowhammer, wi2023shadow, kim2023ddr5, gude2023defending, guha2022criticality, france2022modeling, france2022reducing, bennett2021panopticon, arikan2022processor, tomita2022extracting, saxena2023pt, zhou2023dnndefender}}

\newcommand{\mcBasedRowHammerMitigations}[0]{\cite{kim2014flipping, saxena2022aqua, park2020graphene, kim2022mithril, you2019mrloc, kang2020cattwo, yaglikci2022hira, hassan2022acase, zhou2022ltpim, son2017making, saileshwar2022randomized, ryu2017overcoming, saroiu2022price, han2021surround, saroiu2022configure, lee2019twice, yaglikci2021blockhammer, greenfield2012throttling, devaux2021method, lee2021cryoguard, joardar2022learning, joardar2022machine, qureshi2022hydra, mutlu2023fundamentally, ajorpaz2022evax, loughlin2022moesiprime, bains2016distributed, france2022modeling, zhang2022softtrr, van2018guardion, loughlin2021stop, kim2014architectural, bains2015row, frigo2020trrespass, sharma2022areview, aichinger2015ddr, rh-hp, brasser2017can, LenovoRefInc, AppleRefInc, gude2023defending, woo2023scalable, didio2023copyonflip, bains2016row, juffinger2023csi, kim2023ddr5, gautam2019row, bains-merged, enomoto2022efficient, fakhrzadehgan2022safeguard, manzhosov2022revisiting, guha2022criticality, hassan2021utrr, wi2023shadow, konoth2018zebram, vig2018rapid, tomita2022extracting, zhou2023dnndefender, irazoqui2016mascat, arikan2022processor, yang2017scanning, zhang2020leveraging, saxena2023pt, aweke2016anvil, france2022reducing, park2022rowhammer}}

\newcommand{\noCiteMcBasedRowHammerMitigations}[0]{\nocite{kim2014flipping, saxena2022aqua, park2020graphene, kim2022mithril, you2019mrloc, kang2020cattwo, yaglikci2022hira, hassan2022acase, zhou2022ltpim, son2017making, saileshwar2022randomized, ryu2017overcoming, saroiu2022price, han2021surround, saroiu2022configure, lee2019twice, yaglikci2021blockhammer, greenfield2012throttling, devaux2021method, lee2021cryoguard, joardar2022learning, joardar2022machine, qureshi2022hydra, mutlu2023fundamentally, ajorpaz2022evax, loughlin2022moesiprime, bains2016distributed, france2022modeling, zhang2022softtrr, van2018guardion, loughlin2021stop, kim2014architectural, bains2015row, frigo2020trrespass, sharma2022areview, aichinger2015ddr, rh-hp, brasser2017can, LenovoRefInc, AppleRefInc, gude2023defending, woo2023scalable, didio2023copyonflip, bains2016row, juffinger2023csi, kim2023ddr5, gautam2019row, bains-merged, enomoto2022efficient, fakhrzadehgan2022safeguard, manzhosov2022revisiting, guha2022criticality, hassan2021utrr, wi2023shadow, konoth2018zebram, vig2018rapid, tomita2022extracting, zhou2023dnndefender, irazoqui2016mascat, arikan2022processor, yang2017scanning, zhang2020leveraging, saxena2023pt, aweke2016anvil, france2022reducing, park2022rowhammer}}

\newcommand{\inDRAMRowHammerMitigations}[0]{\cite{jedec2020jesd794c, jedec2020jesd795, gomez2016dummy, seyedzadeh2017counterbased, seyedzadeh2018mitigating, yang2016suppression, yaglikci2021security, devaux2021method, marazzi2022protrr, hassan2019crow, hong2023dsac, marazzi2023rega, bennett2021panopticon, wi2023shadow}}

\newcommand{\deterministicRowHammerDefenseCitations}[0]{\cite{lee2019twice, yaglikci2021blockhammer, seyedzadeh2017cbt, seyedzadeh2018cbt, kang2020cattwo, park2020graphene, kim2022mithril, saileshwar2022randomized, saxena2022aqua, kim2014architectural, bains2016row}}

\newcommand{\probabilisticRowHammerDefenseCitations}[0]{\cite{kim2014flipping, you2019mrloc, son2017making}}

\newcommand{\refreshBasedRowHammerDefenseCitations}[0]{\cite{lee2019twice, seyedzadeh2017counterbased, seyedzadeh2018mitigating, kang2020cattwo, park2020graphene, kim2022mithril, kim2014architectural, bains2015row, bains2016distributed, bains2016row, aweke2016anvil, AppleRefInc, kim2014flipping, son2017making, you2019mrloc, yaglikci2021security, frigo2020trrespass, hassan2021utrr, qureshi2022hydra, devaux2021method, lee2021cryoguard, marazzi2022protrr, zhang2022softtrr, joardar2022learning}}

\newcommand{\rowHammerGetsWorseCitations}[0]{\cite{kim2014flipping, kim2020revisiting, frigo2020trrespass, yaglikci2022understanding, orosa2021deeper, mutlu2017rowhammer, mutlu2018rowhammer, mutlu2019rowhammer, cojocar2020rowhammer, mutlu2023fundamentally, luo2023rowpress}}
\newcommand{\rowHammerDefenseScalingProblemsCitations}[0]{\cite{kim2020revisiting, yaglikci2021blockhammer, park2020graphene, mutlu2017rowhammer, mutlu2018rowhammer, mutlu2019rowhammer, mutlu2023fundamentally, hassan2021utrr}}
\newcommand{\rhdefinition}[0]{\cite{kim2014flipping, kim2020revisiting, mutlu2017rowhammer, yang2019trap, mutlu2019rowhammer, walker2021ondramrowhammer, park2016experiments, park2016statistical, yaglikci2022understanding}}
\newcommand{\rhdefrefresh}[0]{\cite{AppleRefInc, kim2014flipping, kim2014architectural, bains2015row, aweke2016anvil, bains2016row, bains2016distributed, son2017making, seyedzadeh2018cbt, you2019mrloc, lee2019twice, park2020graphene, yaglikci2021security, frigo2020trrespass, kang2020cattwo, hassan2021utrr, qureshi2022hydra, kim2022mithril, devaux2021method, lee2021cryoguard, marazzi2022protrr, zhang2022softtrr, joardar2022learning}}
\newcommand{\rhdef}[0]{\cite{AppleRefInc, kim2014flipping, kim2014architectural, aweke2016anvil, bains2015row, bains2016row, bains2016distributed, son2017making, seyedzadeh2018cbt, you2019mrloc, lee2019twice, park2020graphene, yaglikci2021security, yaglikci2021blockhammer, frigo2020trrespass, kang2020cattwo, hassan2021utrr, qureshi2022hydra, saileshwar2022randomized, brasser2017can, konoth2018zebram, van2018guardion, greenfield2012throttling, kim2022mithril, lee2021cryoguard, marazzi2022protrr, zhang2022softtrr, joardar2022learning, juffinger2023csi}}
\newcommand{\perrefreshscaling}[0]{\cite{nguyen2018nonblocking, liu2012raidr, baumann2005radiation, liu2013experimental, chang2014improving, kang2014co, mukundan2013understanding, nair2014refresh, nair2013arch}}
\newcommand{\rhsafe}[0]{\cite{frigo2020trrespass, lee2014green, micron2014ddr4}}
\newcommand{\rhworse}[0]{\cite{kim2014flipping,mutlu2017rowhammer,mutlu2019rowhammer,kim2020revisiting, frigo2020trrespass, hassan2021utrr, orosa2021deeper, jattke2022blacksmith, yaglikci2022understanding, deridder2021smash}}
\newcommand{\rhdefworse}[0]{\cite{kim2020revisiting,hassan2021utrr, orosa2021deeper, yaglikci2021security, yaglikci2021blockhammer, park2020graphene, qureshi2022hydra}}
\newcommand{\rhattacks}[0]{\cite{seaborn2015exploiting, van2016drammer, gruss2016rowhammer, razavi2016flip, pessl2016drama, xiao2016one, bosman2016dedup, bhattacharya2016curious, qiao2016new, jang2017sgx, aga2017good, mutlu2017rowhammer, tatar2018defeating, gruss2018another, lipp2018nethammer, van2018guardion, frigo2018grand, cojocar2019eccploit,  ji2019pinpoint, mutlu2019rowhammer, hong2019terminal, kwong2020rambleed, frigo2020trrespass, cojocar2020rowhammer, weissman2020jackhammer, zhang2020pthammer, rowhammergithub, yao2020deephammer,deridder2021smash,
hassan2021utrr, jattke2022blacksmith, tol2022toward,burleson2016invited, brasser2017can, kim2014flipping, kogler2022half}}
\newcommand{\salprefs}[0]{\cite{salp, chang2014improving, wang2020figaro, zhang2014cream}}
\newcommand{\integrityBasedMitigationsAllCitations}[0]{\cite{dell1997white, huang2010ivec, saileshwar2018synergy, chen2014memguard, juffinger2023csi, fakhrzadehgan2022safeguard, qureshi2021rethinking, manzhosov2022revisiting}}


%Nisa added the following blocks
\newcommand{\citeHardwareBasedMitigations}[0]{\cite{kim2014flipping, saxena2022aqua, park2020graphene, kim2022mithril, you2019mrloc, kang2020cattwo, yaglikci2022hira, hassan2022acase, zhou2022ltpim, son2017making, saileshwar2022randomized, ryu2017overcoming, saroiu2022price, han2021surround, saroiu2022configure, lee2019twice, yaglikci2021blockhammer, greenfield2012throttling, devaux2021method, lee2021cryoguard, joardar2022learning, joardar2022machine, qureshi2022hydra, seyedzadeh2018cbt, naseredini2022alarm, kim2015architectural, woo2022scalable, seyedzadeh2017cbt, yang2016suppression, gomez2016dummy, bostanci2024comet, olgun2024abacus, yaglikci2024spatial, marazzi2022protrr, bennett2021panopticon, hassan2019crow, mutlu2023fundamentally, wang2021discreet}}

\newcommand{\noCiteHardwareBasedMitigations}[0]{\nocite{kim2014flipping, saxena2022aqua, park2020graphene, kim2022mithril, you2019mrloc, kang2020cattwo, yaglikci2022hira, hassan2022acase, zhou2022ltpim, son2017making, saileshwar2022randomized, ryu2017overcoming, saroiu2022price, han2021surround, saroiu2022configure, lee2019twice, yaglikci2021blockhammer, greenfield2012throttling, devaux2021method, lee2021cryoguard, joardar2022learning, joardar2022machine, qureshi2022hydra, seyedzadeh2018cbt, naseredini2022alarm, kim2015architectural, woo2022scalable, seyedzadeh2017cbt, yang2016suppression, gomez2016dummy, bostanci2024comet, olgun2024abacus, yaglikci2024spatial, marazzi2022protrr, bennett2021panopticon, hassan2019crow, mutlu2023fundamentally, wang2021discreet}}

% The Minesh script
% \titlespacing\section{0pt}{5pt plus 2pt minus 2pt}{1pt plus 2pt minus 2pt}
% \titlespacing\subsection{0pt}{5pt plus 2pt minus 2pt}{0pt plus 2pt minus 2pt}
% \titlespacing\subsubsection{0pt}{5pt plus 2pt minus 2pt}{0pt plus 2pt minus 2pt}

 % \makeatletter
 % \g@addto@macro{\normalsize}{%
 %   \setlength{\abovedisplayskip}{2pt plus 0.5pt minus 1pt}
 %   \setlength{\belowdisplayskip}{2pt plus 0.5pt minus 1pt}
 %   \setlength{\abovedisplayshortskip}{0pt}
 %   \setlength{\belowdisplayshortskip}{0pt}
 %   \setlength{\intextsep}{2pt plus 1pt minus 1pt}
 %   \setlength{\textfloatsep}{2pt plus 1pt minus 1pt}
 %   \setlength{\skip\footins}{2pt plus 1pt minus 1pt}}
 %   \setlength{\abovecaptionskip}{2pt plus 1pt minus 1pt}
 % \makeatother

\makeatletter
\def\bstctlcite{\@ifnextchar[{\@bstctlcite}{\@bstctlcite[@auxout]}}
\def\@bstctlcite[#1]#2{\@bsphack
 \@for\@citeb:=#2\do{%
   \edef\@citeb{\expandafter\@firstofone\@citeb}%
   \if@filesw\immediate\write\csname #1\endcsname{\string\citation{\@citeb}}\fi}%
 \@esphack}
\makeatother

%

\newcounter{observation}
\newcounter{corollary}
\newcounter{takeaway}
\newcounter{claim}
\newcounter{proof}

\newcommand{\obs}[2]{%
    \refstepcounter{observation}%
    \label{#1}%
    \noindent\textbf{Observation \theobservation.} #2\par
}

\newcommand{\cor}[2]{%
    \refstepcounter{corollary}%
    \label{#1}%
    \noindent\textbf{Corollary \thecorollary.} #2\par
}

\newcommand{\takeaway}[2]{%
    \refstepcounter{takeaway}%
    \label{#1}%
    \noindent\textbf{Takeaway \thetakeaway.} #2\par
}

\newcommand{\claim}[2]{%
    \refstepcounter{claim}%
    \label{#1}%
    \noindent\textbf{Claim \theclaim.} #2\par
}

\newcommand{\proof}[2]{%
    \refstepcounter{proof}%
    \label{#1}%
    \noindent\textbf{Proof \theproof.} #2\par
}

\newcommand\revmid[2]{\todo[linecolor=#1,backgroundcolor=#1!15,bordercolor=#1]{\textcolor{black}{\textbf{#2}}}}

\ifrev
    \definecolor{darkblue}{rgb}{0.0, 0.0, 0.55}
    \newcommand{\cqrev}[1]{\textcolor{red}{#1}}
    \newcommand{\iqrev}[1]{\textcolor{blue}{#1}}
    \newcommand{\mirev}[1]{\textcolor{darkblue}{#1}}
    \newcommand{\cql}[2]{#2\todo[size=\small,color=jazzberryjam]{\textbf{\textrm{\textcolor{white}{#1}}}}}
    \newcommand{\iql}[2]{#2\todo[size=\small,color=babyblueeyes]{\textbf{\textrm{\textcolor{black}{#1}}}}}
    \newcommand{\todorev}[1]{\todo[size=\scriptsize, linecolor=orange, bordercolor=orange, backgroundcolor=white]{\textcolor{yt}{\textbf{@TODO:} #1}}}

\else
    \newcommand{\cqrev}[1]{{#1}}
    \newcommand{\iqrev}[1]{{#1}}
    \newcommand{\mirev}[1]{{#1}}
    \newcommand{\cql}[1]{}
    \newcommand{\iql}[1]{}
\fi
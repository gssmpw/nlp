\begin{figure*}[!htb]
    \centering
    
    \begin{tikzpicture}
        \matrix (m1) [matrix of nodes,
            nodes={draw, minimum width=2cm, minimum height=1cm, inner sep=0pt, line width=1.5pt},
            row sep=0.45cm,
            column sep=0.443cm
        ] {
            \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_age_emotion/person.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_age_emotion/age.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_age_emotion/emotion.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_age_emotion/result_1.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_age_emotion/result_2.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_age_emotion/result_3.jpg} \\
            \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_clothes_color/person.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_clothes_color/outfit.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_clothes_color/outfit_color.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_clothes_color/result_1.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_clothes_color/result_2.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/3_way/person_clothes_color/result_3.jpg} \\
        };

        \path (m1-1-1) -- (m1-1-2) node[midway] {\Large $+$};
        \path (m1-1-2) -- (m1-1-3) node[midway] {\Large $+$};
        \path (m1-1-3) -- (m1-1-4) node[midway] {\Large $=$};

        \path (m1-2-1) -- (m1-2-2) node[midway] {\Large $+$};
        \path (m1-2-2) -- (m1-2-3) node[midway] {\Large $+$};
        \path (m1-2-3) -- (m1-2-4) node[midway] {\Large $=$};

        \node[below=-0.05cm of m1-1-1] {\small ``Person''};
        \node[below=-0.05cm of m1-1-2] {\small ``Age''};
        \node[below=-0.05cm of m1-1-3] {\small ``Expression''};
        \node[below=-0.05cm of m1-1-5] {\small Results};

        \node[below=-0.05cm of m1-2-1] {\small ``Person''};
        \node[below=-0.05cm of m1-2-2] {\small ``Outfit''};
        \node[below=-0.05cm of m1-2-3] {\small ``Color''};
        \node[below=-0.05cm of m1-2-5] {\small Results};
        
        \node[below=0.6cm of m1] (bottom-container) {
            \begin{tikzpicture}
                \matrix (m2) [
                    matrix of nodes,
                    nodes={draw, minimum width=2cm, minimum height=1cm, inner sep=0pt, line width=1.5pt},
                    row sep=0.3cm,
                    column sep=0.3cm
                ] {
                    \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/fruit_arrangement/scene.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/fruit_arrangement/fruit_1.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/fruit_arrangement/result_1.jpg} \\
                    \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/fruit_arrangement/scene.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/fruit_arrangement/fruit_2.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/fruit_arrangement/result_2.jpg} \\
                };

        
                \node[below=-0.05cm of m2-2-1] {\small ``Layout''};
                \node[below=-0.05cm of m2-2-2] {\small ``Fruit''};
                \node[below=-0.05cm of m2-2-3] {\small Result};

                \path (m2-1-1) -- (m2-1-2) node[midway, yshift=5.0pt] {\Large $+$};
                \path (m2-1-2) -- (m2-1-3) node[midway, yshift=5.0pt] {\Large $=$};
                \path (m2-2-1) -- (m2-2-2) node[midway, yshift=5.0pt] {\Large $+$};
                \path (m2-2-2) -- (m2-2-3) node[midway, yshift=5.0pt] {\Large $=$};
                
                \matrix (m3) [
                    matrix of nodes,
                    nodes={draw, minimum width=2cm, minimum height=1cm, inner sep=0pt, line width=1.5pt},
                    row sep=0.3cm,
                    column sep=0.3cm,
                    right=0.8cm of m2
                ] {
                    \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/patterns/object.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/patterns/pattern_1.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/patterns/result_1.jpg} \\
                    \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/patterns/object.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/patterns/pattern_2.jpg} & \includegraphics[width=2.2cm,height=2.2cm]{images/qualitative_results/2_way/patterns/result_2.jpg} \\
                };

                \node[below=-0.05cm of m3-2-1] {\small ``Object''};
                \node[below=-0.05cm of m3-2-2] {\small ``Pattern''};
                \node[below=-0.05cm of m3-2-3] {\small Result};

                \path (m3-1-1) -- (m3-1-2) node[midway, yshift=5.0pt] {\Large $+$};
                \path (m3-1-2) -- (m3-1-3) node[midway, yshift=5.0pt] {\Large $=$};
                \path (m3-2-1) -- (m3-2-2) node[midway, yshift=5.0pt] {\Large $+$};
                \path (m3-2-2) -- (m3-2-3) node[midway, yshift=5.0pt] {\Large $=$};
                
                \begin{pgfonlayer}{background}
                    \node[draw, rounded corners, inner sep=0.3cm, fit=(m2), line width=1pt] {};
                    \node[draw, rounded corners, inner sep=0.3cm, fit=(m3), line width=1pt] {};
                \end{pgfonlayer}
            \end{tikzpicture}
        };
        
        \begin{pgfonlayer}{background}
            \node[draw, rounded corners, inner sep=0.3cm, fit=(m1), line width=1pt] {};
        \end{pgfonlayer}
    \end{tikzpicture}
    \caption{Examples of visual concept compositions enabled by IP-Composer. Our method can seamlessly tackle texture-based tasks like colorization and pattern changes, but also convey layouts or modify object-level content. }
    \label{fig:our_results}
\end{figure*}

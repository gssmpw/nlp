\begin{tikzpicture}[
	font=\footnotesize,
	node distance=0.3cm
	]
	%		\draw[rounded corners,thick] (0, 0) rectangle (1,3) { bla };
	\node[] (P) at (0,0)  {
		 AttProt
	};
	\node[] (c) [below = 0.5cm of P] {
		\begin{minipage}{0.42\columnwidth}
            \begin{minted}[fontsize=\footnotesize,escapeinside=&&,highlightlines={4,5},highlightcolor=lYellow!20]{coq}
prot(c)
  #import sig_prot ;;

  s <- #get @&$\mathcal{ST}$&
  #let m := &$\mathcal{H}$& s c ;;
  a := sig_prot m ;;
  
  #ret a
			\end{minted}
		\end{minipage}
	};
	\node[] (s) [above right = 0cm and 0cm of c.north west] {
		\begin{minipage}{0.45\columnwidth}
            \begin{minted}[fontsize=\footnotesize,escapeinside=&&,autogobble]{coq}
	&$\mathcal{ST}$&: State
			\end{minted}
		\end{minipage}
	};

%%%%%%%% imports %%%%%%%
	\draw[->] ([xshift=-1.8cm]c.west) -- ([xshift=-0.2cm]c.west)
	 node[midway,above] { \mintinline{Coq}{sig_prot} };
	
%%%%%%%% exports %%%%%%%
    \draw[->] ([xshift=0.2cm]c.east) -- ([xshift=1.8cm]c.east) 
    node[midway,above] { \mintinline{Coq}{prot} };
%% \node[] (X) [right = 0.25cm of c.east] {
%% 	\begin{minipage}{0.2\columnwidth}
%% 		\begin{minted}[fontsize=\footnotesize,escapeinside=@@,autogobble]{coq}
%% ra_prot
%% 		\end{minted}
%% 	\end{minipage}
%% };


	% Package frame and stuff
	\draw[] (c.north west) -- (c.north east);
	\draw[] (c.north west) |- (s.north) -| (c.north east);
	\draw[] (s.north west) |- (P.north) -| (c.north east);
	\draw[] (c.north east) |- (c.south) -| (c.north west);
	
\end{tikzpicture}

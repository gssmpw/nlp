
\begin{algorithm}[t]
    \caption{$\RegToRL(\MO,(x_1^{(i)},x_2^{(i)},y^{(i)})_{i=1}^n,\epsilon,\delta)$: Two-context regression-to-RL reduction}
    \label{alg:regtorl}
	\begin{algorithmic}[1]\onehalfspacing
          \State \textbf{input:} Reward-free episodic RL oracle $\MO$ for $\Phi$; samples $(x_1^{(i)},x_2^{(i)},y^{(i)})_{i=1}^n$; tolerances $\epsilon,\delta$.
		\State \textbf{return:} \[\MR \gets \TwoAug(\TwoRed(\MO,\cdot),(x_1^{(i)},x_2^{(i)},y^{(i)})_{i=1}^n,\epsilon,\delta).\]
	\end{algorithmic}
\end{algorithm}


\begin{algorithm}[t]
	\caption{$\TwoRed(\MO,(x_1^{(i)},x_2^{(i)},y^{(i)})_{i=1}^n,\epsilon,\delta)$: Main subroutine in $\RegToRL$}
	\label{alg:twored}
	\begin{algorithmic}[1]\onehalfspacing
          \State \textbf{input:} Reward-free episodic RL oracle $\MO$ for $\Phiaug$; samples $(x_1^{(i)},x_2^{(i)},y^{(i)})_{i=1}^n$; tolerances $\epsilon,\delta$.
		\State Set $\epa := \frac{\epsilon}{2|\MS|}$. Initialize $\MO$ with $H = 2$ and $\MA = \{0,\epa,\dots,1-\epa\}$ and tolerances $\frac{\epsilon^2}{4|\MS|^2},\delta/2$.\label{line:initialize-oracle}
        \Repeat
            \State Simulate episode $i$ of interaction with $\MO$ as follows: pass observation $x_1^{(i)}$ and receive action $a \in \MA$. With probability $(a - y^{(i)})^2$, pass observation $0$. Otherwise, pass observation $x_2^{(i)}$.
        \Until{$\MO$ returns policy cover $\Psi$}\label{line:oracle-policy-cover}
        \For{$\pi \in \Psi$}
            \State $\MC^\pi \gets \emptyset$
            \For{$n/2 + 1 \leq i \leq n$}
                \State Sample $z^{(i)} \sim \Ber((\pi(x_1^{(i)}) - y^{(i)})^2)$.
                \State $\MC^\pi \gets \MC^\pi \cup \{(x_2^{(i)}, z^{(i)}\}$.
            \EndFor 
            \State Compute $\MR^\pi \gets \OneRed(\MO, \MC^\pi)$.\Comment{See \cref{alg:onered}}
        \EndFor
        \State \textbf{return:} predictor $\MR: \MX \times \MX \to [0,1]$ defined as $\MR(x_1,x_2) := (\argmin_{\pi \in \Psi} \MR^\pi(x_2))(x_1)$, where ties are broken in some canonical fashion.
	\end{algorithmic}
\end{algorithm}

\usepackage[colorlinks=true, linkcolor=red, urlcolor=blue, citecolor=gray]{hyperref}
\usepackage[dvipsnames,svgnames,table]{xcolor}


\newcommand{\theHalgorithm}{\arabic{algorithm}}



\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{amsfonts,amssymb,amsthm,amsmath}
\usepackage{bbm}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{color}
\usepackage[capitalize, nameinlink, noabbrev]{cleveref}
\usepackage{commath}
\usepackage{enumitem}
\usepackage{float}
\usepackage{graphicx}
\usepackage{mathtools}
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{subcaption}
\usepackage{xspace}
\usepackage{url}
\usepackage{breakcites}

\usepackage{microtype}


% Allow \Cref to work with \texorpdfstring, from tex.stackexchange.com/questions/504968
\usepackage{crossreftools}
\pdfstringdefDisableCommands{%
    \let\Cref\crtCref
    \let\cref\crtcref
}
% 


% Nice underlines from https://alexwlchan.net/2017/10/latex-underlines/
\usepackage{contour}
\usepackage[normalem]{ulem}
\renewcommand{\ULdepth}{1.8pt}
\contourlength{0.8pt}
\newcommand{\unline}[1]{%
  \uline{\phantom{#1}}%
  \llap{\contour{white}{#1}}%
}

% Packages that want to be loaded last
\usepackage{todonotes}


\makeatletter
\def\hlinewd#1{%
	\noalign{\ifnum0=`}\fi\hrule \@height #1 \futurelet
	\reserved@a\@xhline}
\makeatother

\newtheorem{theorem}{Theorem}
\newtheorem{proposition}[theorem]{Theorem}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{assumption}[theorem]{Assumption}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{setting}[theorem]{Setting}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{problem}[theorem]{Problem}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{importedtheorem}[theorem]{Imported Theorem}
\newtheorem{importedlemma}[theorem]{Imported Lemma}
\newtheorem{incompletetheorem}[theorem]{Incomplete Theorem}

\crefname{setting}{setting}{settings}
\Crefname{setting}{Setting}{Settings}
\crefname{problem}{problem}{problems}
\Crefname{problem}{Problem}{Problems}

% Repeated Theorems / Lemmas
\makeatletter
\newtheorem*{rep@theorem}{\rep@title}
\newcommand{\newreptheorem}[2]{%
\newenvironment{rep#1}[1]{%
 \def\rep@title{\Cref{##1} Restated}%
 \begin{rep@theorem}}%
 {\end{rep@theorem}}}
\makeatother
%
\makeatletter
\newtheorem*{rep@lemma}{\rep@title}
\newcommand{\newreplemma}[2]{%
\newenvironment{rep#1}[1]{%
 \def\rep@title{\Cref{##1} Restated}%
 \begin{rep@lemma}}%
 {\end{rep@lemma}}}
\makeatother
%
\newreptheorem{theorem}{Theorem}
\newreplemma{lemma}{Lemma}

%% Use \numberthis in align* environments to have numbered equations.
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}

%% Musco^2 default latex definitions
\newcommand{\algoname}[1]{\textnormal{\textsc{#1}}}
% \newcommand{\comment}[1]{\text{\phantom{(#1)}} \tag{#1}}
\newcommand{\spara}[1]{\smallskip\noindent{\bf #1}}
% \newcommand{\eqdef}{\mathbin{\stackrel{\rm def}{=}}}
\newcommand{\defeq}[0]{\ensuremath{\;{\vcentcolon=}\;}\xspace}
\newcommand{\spaneq}{\ensuremath{\,\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily span}}}{=}}\,}}

\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\HH}{\mathcal{H}}
\newcommand{\bs}[1]{\boldsymbol{#1}}
\newcommand{\bv}[1]{\mathbf{#1}}
\newcommand{\wh}{\widehat}
\let\normlr\norm
\let\norm\relax
\newcommand{\norm}[1]{\enVert[0]{#1}}
\newcommand{\opnorm}[1]{\|#1\|_\mathrm{op}}
\DeclareMathOperator{\supp}{\mathrm{supp}}
\DeclareMathOperator{\poly}{poly}
\DeclareMathOperator{\sinc}{sinc}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\Var}{Var}
% \newcommand{\E}{\mathbb{E}}
\DeclareMathOperator*{\E}{\mathbb{E}}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\err}{err}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\erf}{erf}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\Null}{null}
\DeclareMathOperator{\nnz}{nnz}


%% Will`s latex definitions
\newcommand{\inner}[2]{\left\langle #1, #2 \right\rangle}
\newcommand{\CIC}{\text{CIC}}
\newcommand{\IC}{\text{IC}}

\newcommand{\sphere}[1]{\mathbb{S}^{#1}}
\newcommand{\td}[1]{\todo[inline]{#1}}



%% Annotations
\newcommand{\Raph}[1]{\textcolor{blue}{[Raphael: #1]}}
\newcommand{\Will}[1]{\textcolor{red}{[Will: #1]}}
\newcommand{\David}[1]{\textcolor{orange}{[David: #1]}}
\newcommand{\newtext}[1]{\textcolor{brown}{#1}}


%% English
\newcommand{\ie}{\text{i.e.}\xspace}
\newcommand{\etal}{\text{et al.}\xspace}
\newcommand{\naive}{\text{na\"ive}\xspace}
\newcommand{\wrt}{\text{w.r.t.}\xspace}
\newcommand{\whp}{\text{w.h.p.}\xspace}
\newcommand{\resp}{\text{resp.}\xspace}
\newcommand{\eg}{\text{e.g.}\xspace}
\newcommand{\cf}{\text{cf.}\xspace}
\newcommand{\visavis}{\text{vis-\`a-vis}\xspace}


%% Rename \eps to have \varepsilon
\newcommand{\eps}[0]{\ensuremath{\varepsilon}}
\let\epsilon\eps


% Small fraction for use in big equations.
\newcommand{\tsfrac}[2]{{\textstyle\frac{#1}{#2}}}

% Indicator Function
\newcommand{\indic}{\ensuremath{{\mathbbm 1}}\xspace}

% Local functions
\newcommand{\herm}{\textsf{\upshape H}} %

%%
%% LINEAR ALGEBRA NOTATION
%%

%% Basics
\let\abs\relax
\newcommand{\abs}[1]{\ensuremath{\vert{#1}\vert}\xspace} % Absolute Value
\newcommand{\mat}[1]{\mathbf{#1}} % Matrix
\renewcommand{\vec}[1]{\boldsymbol{\mathrm{#1}}} % Vector
\newcommand{\vecalt}[1]{\boldsymbol{#1}} % Vector, but better for greek letters
\newcommand{\tensor}[1]{\boldsymbol{\mathcal{#1}}} % Vector, but better for greek letters

%% Block Matrices
\newcommand{\pmat}[1]{\begin{pmatrix} #1 \end{pmatrix}} % ( Parentheses Matrix )
\newcommand{\bmat}[1]{\begin{bmatrix} #1 \end{bmatrix}} % [   Bracket Matrix   ]
\newcommand{\spmat}[1]{\left(\begin{smallmatrix} #1 \end{smallmatrix}\right)} % Small parenetheses matrix
\newcommand{\sbmat}[1]{\left[\begin{smallmatrix} #1 \end{smallmatrix}\right]} % Small bracket matrix


%%
%%
%%
%  JUST DEFINING LETTERS AND ALPHABETS BELOW
%%
%%
%%


%% Matrices
\newcommand{\mA}{\ensuremath{\mat{A}}\xspace}
\newcommand{\mB}{\ensuremath{\mat{B}}\xspace}
\newcommand{\mC}{\ensuremath{\mat{C}}\xspace}
\newcommand{\mD}{\ensuremath{\mat{D}}\xspace}
\newcommand{\mE}{\ensuremath{\mat{E}}\xspace}
\newcommand{\mF}{\ensuremath{\mat{F}}\xspace}
\newcommand{\mG}{\ensuremath{\mat{G}}\xspace}
\newcommand{\mH}{\ensuremath{\mat{H}}\xspace}
\newcommand{\mI}{\ensuremath{\mat{I}}\xspace}
\newcommand{\mJ}{\ensuremath{\mat{J}}\xspace}
\newcommand{\mK}{\ensuremath{\mat{K}}\xspace}
\newcommand{\mL}{\ensuremath{\mat{L}}\xspace}
\newcommand{\mM}{\ensuremath{\mat{M}}\xspace}
\newcommand{\mN}{\ensuremath{\mat{N}}\xspace}
\newcommand{\mO}{\ensuremath{\mat{O}}\xspace}
\newcommand{\mP}{\ensuremath{\mat{P}}\xspace}
\newcommand{\mQ}{\ensuremath{\mat{Q}}\xspace}
\newcommand{\mR}{\ensuremath{\mat{R}}\xspace}
\newcommand{\mS}{\ensuremath{\mat{S}}\xspace}
\newcommand{\mT}{\ensuremath{\mat{T}}\xspace}
\newcommand{\mU}{\ensuremath{\mat{U}}\xspace}
\newcommand{\mV}{\ensuremath{\mat{V}}\xspace}
\newcommand{\mW}{\ensuremath{\mat{W}}\xspace}
\newcommand{\mX}{\ensuremath{\mat{X}}\xspace}
\newcommand{\mY}{\ensuremath{\mat{Y}}\xspace}
\newcommand{\mZ}{\ensuremath{\mat{Z}}\xspace}
\newcommand{\mLambda}{\ensuremath{\mat{\Lambda}}\xspace}
\newcommand{\mDelta}{\ensuremath{\mat{\Delta}}\xspace}
\newcommand{\mSigma}{\ensuremath{\mat{\Sigma}}\xspace}
\newcommand{\mPbar}{\bar{\mP}\xspace}


% Vectors
\newcommand{\va}{\ensuremath{\vec{a}}\xspace}
\newcommand{\vb}{\ensuremath{\vec{b}}\xspace}
\newcommand{\vc}{\ensuremath{\vec{c}}\xspace}
\newcommand{\vd}{\ensuremath{\vec{d}}\xspace}
\newcommand{\ve}{\ensuremath{\vec{e}}\xspace}
\newcommand{\vf}{\ensuremath{\vec{f}}\xspace}
\newcommand{\vg}{\ensuremath{\vec{g}}\xspace}
\newcommand{\vh}{\ensuremath{\vec{h}}\xspace}
\newcommand{\vi}{\ensuremath{\vec{i}}\xspace}
\newcommand{\vj}{\ensuremath{\vec{j}}\xspace}
\newcommand{\vk}{\ensuremath{\vec{k}}\xspace}
\newcommand{\vl}{\ensuremath{\vec{l}}\xspace}
\newcommand{\vm}{\ensuremath{\vec{m}}\xspace}
\newcommand{\vn}{\ensuremath{\vec{n}}\xspace}
\newcommand{\vo}{\ensuremath{\vec{o}}\xspace}
\newcommand{\vp}{\ensuremath{\vec{p}}\xspace}
\newcommand{\vq}{\ensuremath{\vec{q}}\xspace}
\newcommand{\vr}{\ensuremath{\vec{r}}\xspace}
\newcommand{\vs}{\ensuremath{\vec{s}}\xspace}
\newcommand{\vt}{\ensuremath{\vec{t}}\xspace}
\newcommand{\vu}{\ensuremath{\vec{u}}\xspace}
\newcommand{\vv}{\ensuremath{\vec{v}}\xspace}
\newcommand{\vw}{\ensuremath{\vec{w}}\xspace}
\newcommand{\vx}{\ensuremath{\vec{x}}\xspace}
\newcommand{\vy}{\ensuremath{\vec{y}}\xspace}
\newcommand{\vz}{\ensuremath{\vec{z}}\xspace}
\newcommand{\vpi}{\ensuremath{\vecalt{\pi}}\xspace}
\newcommand{\vzero}{\ensuremath{\vec{0}}\xspace}
\newcommand{\vtheta}{\ensuremath{\vecalt{\theta}}\xspace}
\newcommand{\vsigma}{\ensuremath{\vecalt{\sigma}}\xspace}
\newcommand{\valpha}{\ensuremath{\vecalt{\alpha}}\xspace}
\newcommand{\vlambda}{\ensuremath{\vecalt{\lambda}}\xspace}

%% Cal Alphabets
\newcommand{\cA}{\ensuremath{{\mathcal A}}\xspace}
\newcommand{\cB}{\ensuremath{{\mathcal B}}\xspace}
\newcommand{\cC}{\ensuremath{{\mathcal C}}\xspace}
\newcommand{\cD}{\ensuremath{{\mathcal D}}\xspace}
\newcommand{\cE}{\ensuremath{{\mathcal E}}\xspace}
\newcommand{\cF}{\ensuremath{{\mathcal F}}\xspace}
\newcommand{\cG}{\ensuremath{{\mathcal G}}\xspace}
\newcommand{\cH}{\ensuremath{{\mathcal H}}\xspace}
\newcommand{\cI}{\ensuremath{{\mathcal I}}\xspace}
\newcommand{\cJ}{\ensuremath{{\mathcal J}}\xspace}
\newcommand{\cK}{\ensuremath{{\mathcal K}}\xspace}
\newcommand{\cL}{\ensuremath{{\mathcal L}}\xspace}
\newcommand{\cM}{\ensuremath{{\mathcal M}}\xspace}
\newcommand{\cN}{\ensuremath{{\mathcal N}}\xspace}
\newcommand{\cO}{\ensuremath{{\mathcal O}}\xspace}
\newcommand{\cP}{\ensuremath{{\mathcal P}}\xspace}
\newcommand{\cQ}{\ensuremath{{\mathcal Q}}\xspace}
\newcommand{\cR}{\ensuremath{{\mathcal R}}\xspace}
\newcommand{\cS}{\ensuremath{{\mathcal S}}\xspace}
\newcommand{\cT}{\ensuremath{{\mathcal T}}\xspace}
\newcommand{\cU}{\ensuremath{{\mathcal U}}\xspace}
\newcommand{\cV}{\ensuremath{{\mathcal V}}\xspace}
\newcommand{\cW}{\ensuremath{{\mathcal W}}\xspace}
\newcommand{\cX}{\ensuremath{{\mathcal X}}\xspace}
\newcommand{\cY}{\ensuremath{{\mathcal Y}}\xspace}
\newcommand{\cZ}{\ensuremath{{\mathcal Z}}\xspace}

%% Black-board Bold Alphabets
\newcommand{\bbA}{\ensuremath{{\mathbb A}}\xspace}
\newcommand{\bbB}{\ensuremath{{\mathbb B}}\xspace}
\newcommand{\bbC}{\ensuremath{{\mathbb C}}\xspace}
\newcommand{\bbD}{\ensuremath{{\mathbb D}}\xspace}
\newcommand{\bbE}{\ensuremath{{\mathbb E}}\xspace}
\newcommand{\bbF}{\ensuremath{{\mathbb F}}\xspace}
\newcommand{\bbG}{\ensuremath{{\mathbb G}}\xspace}
\newcommand{\bbH}{\ensuremath{{\mathbb H}}\xspace}
\newcommand{\bbI}{\ensuremath{{\mathbb I}}\xspace}
\newcommand{\bbJ}{\ensuremath{{\mathbb J}}\xspace}
\newcommand{\bbK}{\ensuremath{{\mathbb K}}\xspace}
\newcommand{\bbL}{\ensuremath{{\mathbb L}}\xspace}
\newcommand{\bbM}{\ensuremath{{\mathbb M}}\xspace}
\newcommand{\bbN}{\ensuremath{{\mathbb N}}\xspace}
\newcommand{\bbO}{\ensuremath{{\mathbb O}}\xspace}
\newcommand{\bbP}{\ensuremath{{\mathbb P}}\xspace}
\newcommand{\bbQ}{\ensuremath{{\mathbb Q}}\xspace}
\newcommand{\bbR}{\ensuremath{{\mathbb R}}\xspace}
\newcommand{\bbS}{\ensuremath{{\mathbb S}}\xspace}
\newcommand{\bbT}{\ensuremath{{\mathbb T}}\xspace}
\newcommand{\bbU}{\ensuremath{{\mathbb U}}\xspace}
\newcommand{\bbV}{\ensuremath{{\mathbb V}}\xspace}
\newcommand{\bbW}{\ensuremath{{\mathbb W}}\xspace}
\newcommand{\bbX}{\ensuremath{{\mathbb X}}\xspace}
\newcommand{\bbY}{\ensuremath{{\mathbb Y}}\xspace}
\newcommand{\bbZ}{\ensuremath{{\mathbb Z}}\xspace}

%% Tensors
\newcommand{\tA}{\ensuremath{\tensor{A}}\xspace}
\newcommand{\tB}{\ensuremath{\tensor{B}}\xspace}
\newcommand{\tC}{\ensuremath{\tensor{C}}\xspace}
\newcommand{\tD}{\ensuremath{\tensor{D}}\xspace}
\newcommand{\tE}{\ensuremath{\tensor{E}}\xspace}
\newcommand{\tF}{\ensuremath{\tensor{F}}\xspace}
\newcommand{\tG}{\ensuremath{\tensor{G}}\xspace}
\newcommand{\tH}{\ensuremath{\tensor{H}}\xspace}
\newcommand{\tI}{\ensuremath{\tensor{I}}\xspace}
\newcommand{\tJ}{\ensuremath{\tensor{J}}\xspace}
\newcommand{\tK}{\ensuremath{\tensor{K}}\xspace}
\newcommand{\tL}{\ensuremath{\tensor{L}}\xspace}
\newcommand{\tM}{\ensuremath{\tensor{M}}\xspace}
\newcommand{\tN}{\ensuremath{\tensor{N}}\xspace}
\newcommand{\tO}{\ensuremath{\tensor{O}}\xspace}
\newcommand{\tP}{\ensuremath{\tensor{P}}\xspace}
\newcommand{\tQ}{\ensuremath{\tensor{Q}}\xspace}
\newcommand{\tR}{\ensuremath{\tensor{R}}\xspace}
\newcommand{\tS}{\ensuremath{\tensor{S}}\xspace}
\newcommand{\tT}{\ensuremath{\tensor{T}}\xspace}
\newcommand{\tU}{\ensuremath{\tensor{U}}\xspace}
\newcommand{\tV}{\ensuremath{\tensor{V}}\xspace}
\newcommand{\tW}{\ensuremath{\tensor{W}}\xspace}
\newcommand{\tX}{\ensuremath{\tensor{X}}\xspace}
\newcommand{\tY}{\ensuremath{\tensor{Y}}\xspace}
\newcommand{\tZ}{\ensuremath{\tensor{Z}}\xspace}

\newcommand{\alphabet}{\cL}
\newcommand{\algo}{\(\text{Algo}\)\xspace}

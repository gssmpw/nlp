\input{plots/pgfplots-config.tex}
\noindent%
\begin{tikzpicture}
\pgfplotsset{cycle list/Set1-5}
\begin{groupplot}[
	group style = {
		group size = 3 by 1,
		horizontal sep=1mm,
		vertical sep=17mm,
	},
	colormap/Dark2,
	colormap/Paired,
	colormap/Set2,
	title style={at={(0.5,0.9)}},
	ymin=0
]

\nextgroupplot[
	width={137pt},
	xshift={7mm},
	title={\mirage (top 10)},
	ybar=0.5pt, bar width=4.5pt,
	legend columns=-1,
	legend style={fill=none, at={(1.1,1.15)}},
	xlabel={Question set},
	xlabel style={at={(1,-0.5)}},
	ylabel={Queries ($\times 10^4$)},
	ylabel style={at={(-0.1,0.5)}},
	symbolic x coords={{pubmedqa},{medqa},{bioasq},{medmcqa},{mmlu}},
	xtick=data,
	xticklabels={{bioasq},{medmcqa},{medqa},{mmlu-med},{pubmedqa}},
	every axis plot/.append style={fill,draw=none,no markers},
	cycle list name=Dark2,
	enlarge x limits=0.12,
	x tick label style={rotate=30,anchor=east,yshift=-2mm,xshift=0.5mm},
]

\foreach \qa in {{Naive},{Relevant}}{
	\addplot+[%
	]
	table[	col sep=comma, x={Benchmark}, y expr={\thisrow{\qa}/10^4}, 
	]
	{raw_data//communication_reduction_top_10.csv};
}

\foreach \qa in {{Predicted}}{
	\addplot+[index of colormap={4 of Paired}, ]
	table[	col sep=comma, x={Benchmark}, y expr={\thisrow{\qa}/10^4}, 
	]
	{raw_data//communication_reduction_top_10.csv};
}




\nextgroupplot[
	width={137pt},
	title={\mirage (top 32)},
	ybar=0.5pt, bar width=4.5pt, 
	legend columns=-1,
	legend style={fill=none,at={(0.25,1.2)}},
	symbolic x coords={{pubmedqa},{medqa},{bioasq},{medmcqa},{mmlu}},
	xtick=data,
	xticklabels={{bioasq},{medmcqa},{medqa},{mmlu-med},{pubmedqa}},
	yticklabels={\empty},
	every axis plot/.append style={fill,draw=none,no markers},
	cycle list name=Dark2,
	enlarge x limits=0.12,
	x tick label style={rotate=30,anchor=east,yshift=-2mm,xshift=0.5mm},
]

\foreach \qa in {{Naive},{Relevant}}{
	\addplot+[%
	]
	table[	col sep=comma, x={Benchmark}, y expr={\thisrow{\qa}/10^4}, 
	]
	{raw_data/communication_reduction_top_32.csv};
}

\foreach \qa in {{Predicted}}{
	\addplot+[index of colormap={4 of Paired}, ]
	table[	col sep=comma, x={Benchmark}, y expr={\thisrow{\qa}/10^4}, 
	]
	{raw_data/communication_reduction_top_32.csv};
}

\legend{{Naive},{Relevant},{Predicted by \textbf{\sys}}}


\nextgroupplot[
	xshift={3.5mm},
	title={\mmlu},
	width={63.58pt},
	ybar=0.5pt, bar width=4.5pt, 
	enlarge x limits=0,
	symbolic x coords={{wiki}},
	xtick=data,
	every axis plot/.append style={fill,draw=none,no markers},
	cycle list name=Dark2,
	enlarge x limits=0.15,
	x tick label style={rotate=30,anchor=east,yshift=-2mm,xshift=0.5mm},
]

\foreach \qa in {{Naive},{Relevant}}{
	\addplot+[%
	]
	table[	col sep=comma, x={Benchmark}, y expr={\thisrow{\qa}/10^4}, 
	]
	{raw_data/communication_reduction_wiki.csv};
}

\foreach \qa in {{Predicted}}{
	\addplot+[index of colormap={4 of Paired}, ]
	table[	col sep=comma, x={Benchmark}, y expr={\thisrow{\qa}/10^4}, 
	]
	{raw_data/communication_reduction_wiki.csv};
}

\end{groupplot}


\end{tikzpicture}

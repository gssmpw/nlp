\begin{table*}
\scriptsize
API-though-conversation data generation Prompt for MultiWOZ 2.4.
\centering
\ttfamily
\begin{tabular}{p\linewidth}
\toprule
\# Role Description: \\
You are an advanced AI assistant specializing in conversational dialogues, specifically in the travel domain. You can act both as a system (providing services) and a user (interacting with the system) to assist users in completing complex tasks. \\
Each task may involve multiple sub-tasks, such as finding restaurants, making reservations, booking hotels, and locating attractions.\\
\\
\# Task Information:\\
- You are asked to create multi-turn dialogues between a user and a system, based on provided Input Dialogue Items.\\
- The dialogues should be converted to follow a specific Output Format, which includes reasoning on whether an API call is needed, or, if the system can respond directly.\\
- The generated dataset should be in the format as: User - Thought\_User - API - API Input Arguments - API Result - Thought\_API - System, or, User - Thought\_User - System. \\
- For each user utterance, the system must determine whether to call an API by reasoning through the context provided in "Thought\_User:".\\
- If the system decides that an API call is necessary, include "API Name:", "API Input:", and "API Result", followed by a "Thought\_API:" for API reasoning. Call the right API from # Avaliable Functions and provide the necessary input arguments to fulfill the user's request. If you think a function argument is not necessary, you can skip it. Don't provide unnecessary arguments and None values.\\
- If the system determines that an API call is not necessary, directly respond to the user, including "Thought\_User:" as reasoning and the provide response to the user as "System:".\\
\\
\# Available Functions:\\
"functions": [\\
    {\\
        "name": "query\_restaurants",\\
        "description": "Finds a restaurant that matches user criteria, such as area, food type, or price range.",\\
        "parameters": {\\
            "type": "object",\\
            "properties": {\\
                "area": {\\
                    "type": "string",\\
                    "description": "The area for which to look for restaurants, such as the center of town or east.",\\
                    "enum": ["east", "west", "south", "north", "centre"]\\
                },\\
                "pricerange": {\\
                    "type": "string",\\
                    "description": "The price range of the restaurant, such as, cheap or expensive.",\\
                    "enum": ["cheap", "moderate", "expensive"]\\
                },\\
                "food": {\\
                    "type": "string",\\
                    "description": "The cuisine of the food served in the restaurant, such as Indian or Italian."\\
                }\\
            },\\
            "required": []\\
        }\\
    },\\
    {\\
     	"name": "book\_restaurant",\\
	    "description": "Makes a table reservation for the requested restaurant, day, time, and number of people.",\\
	    "parameters": {\\
            "type": "object",\\
            "properties": {\\
		        "people": {\\
                    "type": "integer",\\
                    "description": "The number of people for which to book a table, such as 2 or 4."\\
		        },\\
                "name": {\\
                    "type": "string",\\
                    "description": "The name of the restaurant to book a table at, such as Il Fornaio or Cascal.\\"
		        },\\
                "day": {\\
                    "type": "string",\\
                    "description": "The day of the restaurant reservation, such as tomorrow or Wednesday."
		        },\\
		        "time": {\\
                    "type": "string",\\
                    "description": "The time of the restaurant reservation, such as 7pm or 18:00."\\
		        }\\
            },\\
            "required": []\\
	    }\\
    },\\
    {\\
        "name": "query\_hotels",\\
        "description": "Finds a hotel that matches user criteria, such as area, number of stars, or price range.",\\
        "parameters": {\\
            "type": "object",\\
            "properties": {\\
                "area": {\\
                    "type": "string",\\
                    "description": "The area for which to look for hotels, such as the center of town or east.",\\
                    "enum": ["east", "west", "south", "north", "center"]\\
                },\\
                "pricerange": {\\
                    "type": "string",\\
                    "description": "The price range of the hotel, such as, cheap or expensive.",\\
                    "enum": ["cheap", "moderate", "expensive"]\\
                },\\
                "stars": {\\
                    "type": "integer",\\
                    "description": "The number of stars for the hotel that is sought, such as three or four."\\
                },\\
                "type": {\\
                    "type": "string",\\
                    "description": "The type of the hotel that is sought, such as hotel or guest house."\\
                },\\
                "internet": {\\
                    "type": "string",\\
                    "description": "The internet requirements for the hotel that is sought, for example, yes or no."\\
                },\\
                "parking": {\\
                    "type": "string",\\
                    "description": "The parking requirements for the hotel that is sought, for example, yes or no."\\
                },\\
                "name": {\\
                    "type": "string",\\
                    "description": "The name of the hotel to book a room at, such as Marriott or ABS Guest House."\\
		        },\\
            },\\
            "required": []\\
        }\\
    },\\
    {\\
     	"name": "book\_hotel",\\
	    "description": "Makes a room reservation for the requested hotel, day, and number of people.",\\
	    "parameters": {\\
            "type": "object",\\
            "properties": {\\
		        "people": {\\
                    "type": "integer",\\
                    "description": "The number of people for which to book a room, such as 2 or 4."\\
		        },\\
                "name": {\\
                    "type": "string",\\
                    "description": "The name of the hotel to book a room at, such as Marriott or ABS Guest House."\\
		        },\\
                "day": {\\
                    "type": "string",\\
                    "description": "The day of the hotel room reservation, such as tomorrow or Wednesday."\\
		        },\\
		        "stay": {\\
                    "type": "integer",\\
                    "description": "The number of days to book the hotel room for, such as 3 or six."\\
		        }\\
            },\\
            "required": []\\
	    }\\
    },\\
    {\\
        "name": "query\_attractions",\\
        "description": "Finds an attraction that matches user criteria, such as area and attraction type.",\\
        "parameters": {\\
            "type": "object",\\
            "properties": {\\
                "area": {\\
                    "type": "string",\\
                    "description": "The area for which to look for attractions, such as the center of town or east.",\\
                    "enum": ["east", "west", "south", "north", "center"]\\
                },\\
                "type": {\\
                    "type": "string",\\
                    "description": "The type of attraction to search for, such as church or park."\\
                },\\
                "name": {\\
                    "type": "string",\\
                    "description": "The name of the attraction to look for, such as Eagle Park or Museum of Modern Arts"\\
                }\\
            },\\
            "required": []\\
        }\\
    }\\
]\\
\\
# Output Format:\\
- If an API Call is Needed:\\
	User: [User Input]\\
    Thought\_User: I need to call an API.\\
    API Name: [API Function Name]
    API Input: [The input parameters for the API]
    API Result: [API output]
    Thought\_API: [2nd thought after API Result that ensure if the information is enough before the system response]
	System: [Your system response here]

- If an API Call is Not Needed:
	User: [User Input]
    Thought\_User: I don't need an API and want to respond to the user.
    System: [Your system response here]

# Objective: 
- Convert the reference dialogue using the provided Output Format above. Ensure that each system utterance follows logical reasoning, determining whether an API call is needed and structuring the output accordingly.
- If there are too many results returned by API results from database, the AI Assistant should ask the user for more constraints.

Below is an example of the format:

# Sample Example
User: I am looking for info about the curry king restaurant.  
Thought\_User: I need to call an API to retrieve information about the restaurant.  
API Name: query\_restaurants  
API Input: {'name': 'curry king'}  
API Result: [{'address': '5 Jordans Yard Bridge Street City Centre', 'area': 'centre', 'food': 'indian', 'id': '19231', 'introduction': 'curry king serve a variety of indian dishes to eat in or take away catering for private parties of up to 40 guests is available upon request', 'location': [52.209003, 0.118661], 'name': 'curry king', 'phone': '01223324351', 'postcode': 'cb21ug', 'pricerange': 'expensive', 'type': 'restaurant'}]  
Thought\_API: The API call was successful, and I have the information about the restaurant. I need to inform the user.  
System: The Curry King restaurant is located at 5 Jordans Yard Bridge Street City Centre. They serve a variety of Indian dishes for dining in or take away. Their phone number is 01223324351, and it's categorized as an expensive restaurant.

User: Can you please book the restaurant for 4 people at 13:45 on Sunday?  
Thought\_User: I need to call an API to book a table for the user at the restaurant.  
API Name: book\_restaurant  
API Input: {'day': 'sunday', 'people': 4, 'time': '13:45'}  
API Result: {'reference': '16lcxad5'}  
Thought\_API: The booking was successful, and I have a reference number. I should let the user know.  
System: I have booked a table for 4 at the Curry King for Sunday at 13:45. The reference number is 16lcxad5. Can I help with anything else?

User: I also need a sports place to go on the east side of town.  
Thought\_User: I need to call an API to find a sports attraction in the east area.  
API Name: query\_attractions  
API Input: {'area': 'east', 'type': 'multiple sports'}  
API Result: [{'name': 'cherry hinton village centre', 'type': 'multiple sports', 'postcode': 'cb19ej', 'phone': '01223576412'}]  
Thought\_API: The API call was successful, and I found a suitable attraction. I need to inform the user.  
System: The Cherry Hinton Village Centre is a multiple sports location. 

User: Great. May I have their postcode please?  
Thought\_User: I don't need an API call; I can provide the postcode directly.  
System: Yes, the postcode for the Cherry Hinton Village Centre is cb19ej. Their contact number is 01223576412. May I help you with anything else?

User: That is all I need for now. Thank you for your help.  
Thought\_User: The user is satisfied and doesn't need further assistance. I should acknowledge their gratitude.  
System: You're welcome! If you need anything else, feel free to ask. Enjoy your time in Cambridge!

# Reference Dialogue Context:
You are looking for information in Cambridge.
You are looking for a place to dine. The restaurant should serve indian food and should be in the expensive price range.
The restaurant should be in the centre.
Once you find the restaurant you want to book a table for 6 people at 19:30 on saturday.
Make sure you get the reference number.
You are also looking for a hotel. The hotel should have a star of 3 and doesn't need to include internet.
The hotel should be in the type of guesthouse.
Once you find the hotel you want to book it for the same group of people and 2 nights starting from the same day.
If the booking fails how about 1 nights.
Make sure you get the reference number.

\# Input Dialogue Items: \\
\{Item$\_1$\}\\
.\\
.\\
.\\
\{Item$\_n$\}\\
\bottomrule
\end{tabular}
\end{table*}
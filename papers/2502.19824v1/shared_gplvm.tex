% \documentclass[tikz, border=50pt]{standalone}
% \usepackage{tikz}
% \usetikzlibrary{bayesnet}
% \usetikzlibrary{fit}
% \usepackage{bm}

% \begin{document}
\begin{tikzpicture}[scale=0.5]
  % Define nodes: latent, obs, det, const, factor
    \node[const, yshift=0.5cm] (Z) {$Z$};
    \node[latent, right=of Z, yshift=1.0cm] (fd) {$f_d$};
    \node[latent, right=of Z, yshift=-1.0cm] (fl) {$f_l$};
    \node[latent, right=of fd ] (xn) {$\bm{x}_n$};
    \node[latent, right=of fl] (yn) {$\bm{y}_n$};
    \node[const, above=of xn] (sigmax) {{$\sigma^2_{x}$}}; 
    \node[const, below=of yn] (sigmay) {{$\sigma^2_{y}$}}; 
    \node[const, above= of fd] (thetax) {$\theta_{x}$};
    \node[const, below = of fl] (thetay) {$\theta_{y}$};

    \edge {fd} {xn};
   \edge {fl} {yn};
   \edge {Z} {fd};
   \edge {Z} {fl};
   \edge {sigmax} {xn};
   \edge {sigmay} {yn};
   % \path[->,draw]
  %(fd) edge[out=15, in=-290, loop] (fd);
  %\path[->,draw]  (fl) edge[out=10, in=-300, loop] (fl);
    \edge {thetax} {fd};
    \edge {thetay} {fl}
   % Plates
   \plate{yf} {(yn)(xn)} {$N$} ;
   \plate{f1d} {(fd)} {$D$};
      \plate{f1l} {(fl)} {$L$};

\end{tikzpicture}
%\end{document}
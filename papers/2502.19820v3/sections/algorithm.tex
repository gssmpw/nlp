% \begin{algorithm}[t]
% \caption{Self-Corruption Jailbreak}
% \label{alg:jailbreak}
% \begin{algorithmic}[1]

% \REQUIRE Malicious query $q^*$, a target model $\mathcal{T}$, malicious level $n$
% \ENSURE Jailbroken result

% \STATE $
% q_1, q_2, \dots, q_m \gets \text{getLevelQuery}(n, q^*)
% $

% \STATE // Initialize the chat history for $\mathcal{T}$
% \STATE $\mathcal{H} \gets \{\}$

% \FOR{$i = 1$ to $n$}
%     \STATE $\mathcal{H} \gets \mathcal{H}\text{.}\text{add}(q^0_i)$
%     \STATE $r_i \gets \mathcal{T}(\mathcal{H})$
%     \IF{not $\text{isRejection}(r_i)$}
%         \STATE $\mathcal{H} \gets \mathcal{H}\text{.}\text{add}(r_i)$
%     \ELSE
%         \STATE $\mathcal{H} \gets \mathcal{H}\text{.}\text{pop}(q^0_i)$
%         \STATE // Validate response alignment with the last query
%         \STATE $(q_{\mathrm{last}}, r_{\mathrm{last}}) \gets \text{LastQueryResponse}(\mathcal{H})$
%         \IF{$\text{isAligned}(r_{\text{last}}, q_{\text{last}})$}
%             \STATE $\mathcal{H} \gets \text{paraphraseQuery}(q_i, \mathcal{H})$
%         \ELSE
%             \STATE $\mathcal{H} \gets \text{alignResponse}(\mathcal{H})$
%         \ENDIF
%     \ENDIF
% \ENDFOR

% \end{algorithmic}
% \end{algorithm}


% % back
% \begin{algorithm}
% \caption{Self-Corruption Jailbreak}
% \label{alg:jailbreak}
% \begin{algorithmic}[1]

% \REQUIRE Malicious query $q^*$, a target model $\mathcal{T}$, malicious level $n$
% \ENSURE Jailbroken result

% \STATE $
% q_1^{(0)}, q_2^{(0)}, \dots, q_m^{(0)} \gets \text{getLevelQuery}(n, q^*)
% $

% \STATE // Initialize the chat history for $\mathcal{T}$
% \STATE $\mathcal{H} \gets \{\}$

% \FOR{$i = 1$ to $n$}
%     \STATE $\mathcal{H} \gets \mathcal{H}\text{.}\text{add}(q^0_i)$
%     \STATE $r_i^{(0)} \gets \mathcal{T}(\mathcal{H})$
%     \IF{not $\text{isRejection}(r_i^{(0)})$}
%         \STATE $\mathcal{H} \gets \mathcal{H}\text{.}\text{add}(r_i^{(0)})$
%     \ELSE
%         \STATE $\mathcal{H} \gets \mathcal{H}\text{.}\text{pop}(q^0_i)$
%         \STATE // Validate response alignment with the last query
%         \STATE $(q_{\mathrm{last}}, r_{\mathrm{last}}) \gets \text{LastQueryResponse}(\mathcal{H})$
%         \IF{$\text{isAligned}(r_{\text{last}}, q_{\text{last}})$}
%             \STATE $\mathcal{H} \gets \text{paraphraseQuery}(q_i^{(0)}, \mathcal{H})$
%         \ELSE
%             \STATE $\mathcal{H} \gets \text{alignResponse}(\mathcal{H})$
%         \ENDIF
%     \ENDIF
% \ENDFOR

% \end{algorithmic}
% \end{algorithm}










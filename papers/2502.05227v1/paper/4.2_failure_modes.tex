% \textbf{Question 4.} \textit{What are the dominant failure modes?}
\textbf{Finding 4.} Dominant failures in both settings stem from rule violations and goal misinterpretations.

Fig.~\ref{fig:piechart_taxonomy} shows a nested piechart that captures failure modes of \gptfo{} \react{} on the synchronous and asynchronous datasets. We define our failure modes in terms of uncertainty over the MDP of the environment. The 4 main failure categories include uncertainty in the state (S), actions (A), transition function (T) and the goal (G). For a detailed description of the subcategories and dataset annotation, see Appendix~\ref{app:taxonomy-details}.

For synchronous failures, the uncertainty in the goal accounts for the majority at 64.1\% followed by the uncertainty in the transition function at 32.1\%. Goal failures could be due to (1) an incorrect understanding at the start of the plan or (2) a mistake during plan execution, such as using an ingredient without cutting it, which is incorrectly believed to satisfy the goal. We observe that case (1) occurs 28.3\% of the time under Bad Start; the LLM agent restates goals incorrectly for complex tasks with strict ordering dependencies like Task 6 or tasks with many diverse ingredients like Task 10 which we show in Appendix~\ref{app:qualitative-bad-starts}. We observe that case (2) occurs 35.8\% of the time under the remaining subcategories; although the LLM agent starts with a correct goal, it misunderstands the goal during execution by choosing the wrong action.
% Case (2) occurs; although the LLM agent stated the goal correctly, it misremember the goal during execution thereby choosing the wrong action (e.g. using an ingredient without cutting it, don't use this example though since you stated it before). 
% make easy to understand
For transition failures, violating the `one item at a station' rule accounts for the majority of failures at 24.5\%. We qualitatively observe that the agent attempts to use cutting stations for ingredient preparation while other items occupy the station; however, we also observe that once the agent has recovered from this failure it is unlikely to repeat it which we show in Appendix~\ref{app:unlikely-repeat}.

\input{figures/final/fig_piechart_taxonomy}

For asynchronous failures, the inverse is true with uncertainty in the transition function accounting for 56.8\% of failures and uncertainty in the goal accounting for 34.1\% of failures. Similar to the synchronous failures, violating the `one item at a station' rule dominates failures at 53.4\%. This is due to the increased number of unique stations in the asynchronous setting compared to the synchronous setting which increases the potential number of recoveries necessary. In the synchronous setting, which only uses the cutting board station, an agent may need to recover once from violating the 'one item at a station' rule. In the asynchronous setting, which uses stoves, fryers, and sinks, an agent, in the worst case, may need to recover from violating rules on each station in a task.

We point out that while we designed the synchronous and asynchronous datasets to test different capabilities of LLM agents, we mainly observe similar transition failures in both settings. This demonstrates the need to improve LLM agents at following environment constraints to improve their decision-making ability. We investigate this further in Section~\ref{sec:follow-ups}.

% \textbf{Question 5.} \textit{How effective are failure recoveries?}
\textbf{Finding 5.} Asynchronous recovery is worse than synchronous recovery.

Fig.~\ref{fig:histogram_repeated_transitions} shows a histogram of the repeated transitions of \gptfo{} \react{} runs on the synchronous and asynchronous datasets. We use repeated transitions as a proxy for measuring \react{}'s effectiveness at recovering from failure.

% For the failures, approximately 66\% of the attempts have 6 or less repeated transitions which correspond to attempts that recovered effectively but misunderstood the goal; this aligns with goal failures being dominant for the synchronous setting in Fig.~\ref{fig:piechart_taxonomy}. In the asynchronous setting, we also see successes with little to no repeated transitions. For the failures, approximately 55\% of the attempts have 7 or more repeated transitions which correspond to attempts that were ineffective at recovery, with the worst attempt having 29 repeated transitions; this aligns with transition failures being dominant for the asynchronous setting in Fig.~\ref{fig:piechart_taxonomy}.

In both the synchronous and asynchronous datasets, we see that the majority of successes have 0 repeated transitions; few successes have repeated transitions but successfully recover. For failures, the asynchronous dataset's lower and upper quartiles are 103.1\% and 55.8\% larger than the synchronous dataset's quartiles. This means that failures on the asynchronous dataset are expected to have higher repeated transitions; this ineffectiveness at recovery aligns with the transition failures being dominant for the asynchronous setting in Fig.~\ref{fig:piechart_taxonomy}. Similarly, since the synchronous dataset has lower quartiles than the asynchronous dataset, we expect to see less repeated transitions which suggests less transition failures. We do a further investigation in Appendix~\ref{app:stochasticity} by introducing stochasticity and find that even in synchronous settings LLMs struggle at recovery.

% Since the agent is still failing in these runs despite making progress towards its goal, its goal must be misaligned with the task; this aligns with goal failures being dominant for the synchronous setting in Fig.~\ref{fig:piechart_taxonomy}.

\input{figures/final/fig_histogram_repeated_transitions}
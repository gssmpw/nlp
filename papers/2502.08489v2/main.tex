\documentclass[numbers,sort&compress]{article}

\usepackage[preprint]{neurips_2023}
\usepackage[hidelinks]{hyperref}
%\usepackage[utf8]{inputenc} % allow utf-8 input % Now using a UTF-8 Latex Compiler: LuaLaTex
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality 
\usepackage{natbib}         % supporting citet and citep
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{fancyhdr}       % header
\usepackage{graphicx}       % graphics
\usepackage{authblk}        % author block
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{amssymb}        % more math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{lipsum}
\usepackage{relsize}
\usepackage{makecell}
\usepackage{enumitem}
\usepackage{colortbl}
\usepackage{longtable}
\usepackage{caption} 
\usepackage{float}
\usepackage{graphicx,xcolor,lipsum}
\usepackage{siunitx}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage[nameinlink]{cleveref}
\usepackage{dialogue}
%\usepackage{emoji}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{adjustbox}
\usepackage{comment}
\usepackage{lscape}
\usepackage{rotating}
\usepackage{hhline}
\usepackage{xcolor} %For custom colors
\usepackage{listings} %For code blocks
\usepackage{todonotes} %For review notes
\usepackage{booktabs}
% do not use natbib and biblatex at the same time
%\usepackage{biblatex}

\bibliographystyle{plainnat}
\captionsetup[table]{skip=5pt}
\graphicspath{{media/}}
\renewcommand{\arraystretch}{1.2}

%\setcounter{tocdepth}{2} % set table-of-contents depth


% Commands for logos:
\newcommand{\huggingface}{\raisebox{-1.5pt}{\includegraphics[height=1.05em]{logos/hf.pdf}}}
\newcommand{\github}{\raisebox{-1.5pt}{\includegraphics[height=1.05em]{logos/github.pdf}}}
\newcommand{\wandb}{\raisebox{-1.5pt}{\includegraphics[height=1.05em]{logos/wandb.png}}}
\newcommand{\zenodo}{\raisebox{-1.5pt}{\includegraphics[height=1.05em]{logos/db.png}}}
\newcommand{\play}{\raisebox{-1.5pt}{\includegraphics[height=1.05em]{logos/play_button_blue.pdf}}}

% Commands for writer-specific colors
%\newcommand{\todo}[1]{\textcolor{red}{#1}}
\newcommand{\marc}[1]{\textcolor{blue}{Marc Pamies}}
\newcommand{\javi}[1]{\textcolor{cyan}{Javi Aula}}
\newcommand{\saiz}[1]{\textcolor{purple}{Javier Saiz}}
\newcommand{\mario}[1]{\textcolor{orange}{Mario Mina}}
\newcommand{\seve}[1]{\textcolor{teal}{Seve DaDalt}}
\newcommand{\aitor}[1]{\textcolor{magenta}{Aitor Gonzalez}}

% Light gray background for code snippets.
% If we want code snippets with syntax highlights, we need to use "minted" and compile the document with "shell-escape" enabled.
\definecolor{lightgray}{HTML}{EFEFEF}

\input{lstset_utf8}
\lstset{
  backgroundcolor=\color{lightgray},
  basicstyle=\ttfamily\smaller, 
  frame=single,
  rulecolor=\color{black},
  breaklines=true,
  captionpos=b,
  escapeinside={(*@}{@*)} % Allows LaTeX commands between (*@ and @*)
}
% Change the caption name from "Listing" to "Snippet".
\renewcommand{\lstlistingname}{Snippet}

% Add PDF metadata to help others organize their library
\hypersetup{
pdftitle={Salamandra Technical Report},
pdfsubject={llm},
pdfauthor={LangTech Unit BSC},
pdfkeywords={salamandra, llm, nlp, bsc},
colorlinks=true,
linkcolor=black,
urlcolor=cyan,
}

\newcommand{\flag}[1]{\includegraphics[width=1.5em]{#1}}
\newcommand{\refnumtitle}[1]{\hyperref[#1]{Section \ref{#1}: \nameref{#1}}}

\newcommand{\gmidrule}{\arrayrulecolor{gray!50}\midrule\arrayrulecolor{black}}

\title{Salamandra Technical Report}

\author{
  Language Technologies Unit \\
  \textbf{Barcelona Supercomputing Center} \\
}

% \footnote{See Contributions section for full author list. Please send correspondence to langtech@bsc.es.}
\input{terminology}
\begin{document}
\maketitle

% \arrayrulecolor{gray!50}

\begin{abstract}
    \input{sections/abstract}
\end{abstract}

\begin{center}
    \renewcommand{\arraystretch}{1.2}
    \begin{tabular}{rll}
        \huggingface & \textbf{Models} & \href{https://huggingface.co/collections/BSC-LT/salamandra-66fc171485944df79469043a}
        {https://huggingface.co/BSC-LT/salamandra} \\
        \github & \textbf{Code} & \href{https://github.com/langtech-bsc/salamandra}{https://github.com/langtech-bsc/salamandra} \\
        %\github & \textbf{Eval. Code} & \url{https://github.com/blibli}\\
        % \wandb & \textbf{Logs} & \url{https://wandb.ai/bloblo}\\
        % \zenodo & \textbf{Data} & \url{https://zenodo.com/blublu}\\
        % \play & \textbf{Demo} & \url{https://aina.cat/blabla}\\
    \end{tabular}
\end{center}

\clearpage
\tableofcontents
\clearpage

\section{Introduction}
\label{sec:intro}
\input{sections/intro}

\clearpage
\section{Model Overview}
\label{sec:model}
\input{sections/model}

\clearpage
\section{Pre-Training}
\label{sec:pretraining}
\input{sections/pretraining}

\clearpage
\section{Post-Training}
\label{sec:post_training}
\input{sections/post_training}

\clearpage
\section{Evaluation and Benchmarking}
\label{sec:eval}
\input{sections/eval}

\clearpage
\section{Bias, Safety and Ethics}
\label{sec:safety}
\input{sections/safety}

% \section{Limitations and Challenges}
% \label{sec:limits}
% \input{sections/limits}

% \section{Future Work}
% \label{sec:futures}
% \input{sections/futures}

\section{Conclusion and Future Work}
\label{sec:conclusion}
\input{sections/conclusion}


% ARXIV submission modif
%%\clearpage
%%\bibliography{references}
\clearpage
\input{references.tex}


\clearpage
\appendix

\section{Author Contribution}
\label{sec:authors}
\input{appendix/authors}

\section{Acknowledgements}
\label{sec:ack}
\input{appendix/ack}

\clearpage
\section{Model Card}
\label{app:card}
\input{appendix/model_card}

\clearpage
\section{Datasheet}
\label{app:datasheet}
\input{appendix/datasheet}

\clearpage
\section{Tokenizer Fertility Study}
\label{app:fertility}
\input{appendix/fertilities}

\clearpage
\section{Creation of prompts for \llmJudge{}}
\label{app:judge_prompts}
\input{appendix/judge_prompts}

\clearpage
\section{Rubrics used in \llmJudge{}}
\label{app:judge_rubrics}
\input{appendix/judge_rubrics}

\clearpage
\section{\RedTeaming{} Examples}
\label{app:rt_examples}
\input{appendix/red_teaming}
\clearpage

\clearpage
\section{Vision Examples}
\label{app:visualLMexamples}
\input{appendix/visualLMexamples}

% \clearpage
% \section{Tool Use Example}
% \label{app:tool_use_example}
% \input{appendix/tool_use_example}

% \section{License}
% \section{Carbon Footprint}
% \section{Recommendations for Developers}



\end{document}

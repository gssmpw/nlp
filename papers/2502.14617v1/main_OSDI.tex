%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Template for USENIX papers.
%
% History:
%
% - TEMPLATE for Usenix papers, specifically to meet requirements of
%   USENIX '05. originally a template for producing IEEE-format
%   articles using LaTeX. written by Matthew Ward, CS Department,
%   Worcester Polytechnic Institute. adapted by David Beazley for his
%   excellent SWIG paper in Proceedings, Tcl 96. turned into a
%   smartass generic template by De Clarke, with thanks to both the
%   above pioneers. Use at your own risk. Complaints to /dev/null.
%   Make it two column with no page numbering, default is 10 point.
%
% - Munged by Fred Douglis <douglis@research.att.com> 10/97 to
%   separate the .sty file from the LaTeX source template, so that
%   people can more easily include the .sty file into an existing
%   document. Also changed to more closely follow the style guidelines
%   as represented by the Word sample file.
%
% - Note that since 2010, USENIX does not require endnotes. If you
%   want foot of page notes, don't include the endnotes package in the
%   usepackage command, below.
% - This version uses the latex2e styles, not the very ancient 2.09
%   stuff.
%
% - Updated July 2018: Text block size changed from 6.5" to 7"
%
% - Updated Dec 2018 for ATC'19:
%
%   * Revised text to pass HotCRP's auto-formatting check, with
%     hotcrp.settings.submission_form.body_font_size=10pt, and
%     hotcrp.settings.submission_form.line_height=12pt
%
%   * Switched from \endnote-s to \footnote-s to match Usenix's policy.
%
%   * \section* => \begin{abstract} ... \end{abstract}
%
%   * Make template self-contained in terms of bibtex entires, to allow
%     this file to be compiled. (And changing refs style to 'plain'.)
%
%   * Make template self-contained in terms of figures, to
%     allow this file to be compiled. 
%
%   * Added packages for hyperref, embedding fonts, and improving
%     appearance.
%   
%   * Removed outdated text.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[letterpaper,twocolumn,10pt]{article}
\usepackage{OSDI_25/usenix}

% to be able to draw some self-contained figs
\usepackage{tikz}
\usepackage{amsmath}

% inlined bib file
\usepackage{filecontents}

%-------------------------------------------------------------------------------
\begin{filecontents}{\jobname.bib}
%-------------------------------------------------------------------------------
@Book{arpachiDusseau18:osbook,
  author =       {Arpaci-Dusseau, Remzi H. and Arpaci-Dusseau Andrea C.},
  title =        {Operating Systems: Three Easy Pieces},
  publisher =    {Arpaci-Dusseau Books, LLC},
  year =         2015,
  edition =      {1.00},
  note =         {\url{http://pages.cs.wisc.edu/~remzi/OSTEP/}}
}
@InProceedings{waldspurger02,
  author =       {Waldspurger, Carl A.},
  title =        {Memory resource management in {VMware ESX} server},
  booktitle =    {USENIX Symposium on Operating System Design and
                  Implementation (OSDI)},
  year =         2002,
  pages =        {181--194},
  note =         {\url{https://www.usenix.org/legacy/event/osdi02/tech/waldspurger/waldspurger.pdf}}}
\end{filecontents}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% *** MATH PACKAGES ***
%
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{gensymb}
\usepackage{ulem}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Avoids contiguous empty spaces
\usepackage{xspace}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% *** SUBFIGURE PACKAGES ***
\usepackage{subfig} %[caption=false,font=footnotesize,labelfont=sf,textfont=sf]


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{enumitem}
\usepackage{verbatim}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \usepackage[usenames,dvipsnames,svgnames,x11names]{xcolor}
\usepackage{multirow}

\newcommand{\nbc}[3]{
 {\colorbox{#3}{\bfseries\sffamily\tiny\textcolor{white}{#1}}}
 {\textcolor{#3}{\sf\footnotesize$\blacktriangleright$\textit{#2}~$\blacktriangleleft$}}
}
\newcommand{\sys}{{\scshape SageServe}\xspace} % RaquetServe

\usepackage[most]{tcolorbox}

\newtcolorbox{mytextbox}[1][]{%
  sharp corners,
  enhanced,
  colback=white,
  % height=10cm,
  attach title to upper,
  #1
}


\definecolor{yscolor}{rgb}{0.7,0.3,0.7}
\newcommand{\ysnote}[1]{ {\nbc{YS}{#1}{yscolor}}} % needs a response
\newcommand{\pglen}[1]{\textcolor{red}{\small\textit{#1pgs}}} % needs a response

% Pick your fave color...
\newcommand{\apnote}[1]{ {\nbc{AP}{#1}{orange}}}
\newcommand{\amnote}[1]{ {\nbc{AM}{#1}{orange}}}
\newcommand{\sjnote}[1]{ {\nbc{SJ}{#1}{blue}}}
\newcommand{\kjnote}[1]{ {\nbc{KJ}{#1}{teal}}}

\newcommand{\Note}[1]{\textcolor{red}{#1}} % verify if this is correct

\newcommand{\ysnoted}[1]{ {\textcolor{green} { ***TODO Later: #1 }}} % postpone addressing of comment
% Change tracking for article revisions. Added, Deleted, Replaced, or Modified content.
%
\newcommand{\modc}[1]{{\textcolor{blue}{#1}}}
\newcommand{\addc}[1]{{\textcolor{teal}{#1}}}
%% NOTE: \sout will break if the text has citations with an error that there is an extra "}". Place the citation within mbox: \mbox{foo~\cite{foo}}
\newcommand{\delc}[1]{ {\textcolor{gray} {\sout{#1}} }}
%\newcommand{\delc}[1]{} % uncomment this (and comment above line) to ignore showing deletion
\newcommand{\repc}[2]{ {\textcolor{gray} {\sout{#1}} }{\textcolor{teal} {#2}}}
%\newcommand{\repc}[2]{{\textcolor{teal}{#2}}} % uncomment this (and comment above line) to ignore showing deletion
\newcommand{\para}[1]{{\noindent \bf #1.~}} % RaquetServe



% \renewcommand{\ysnote}[1]{}
\renewcommand{\ysnoted}[1]{}
% \renewcommand{\apnote}[1]{}
\renewcommand{\amnote}[1]{}
\renewcommand{\sjnote}[1]{}
% \renewcommand{\kjnote}[1]{}
\renewcommand{\Note}[1]{#1}
\renewcommand{\delc}[1]{}
\renewcommand{\pglen}[1]{}

\newcommand{\footremember}[2]{%
   \footnote{#2}
    \newcounter{#1}
    \setcounter{#1}{\value{footnote}}%
}
\newcommand{\footrecall}[1]{%
    \footnotemark[\value{#1}]%
} 

%-------------------------------------------------------------------------------
\begin{document}
%-------------------------------------------------------------------------------

%don't want date printed
\date{}

% make title bold and 14 pt font (Latex default is non-bold, 16 pt)
\title{Serving Models, Fast and Slow:\\
Optimizing Heterogeneous LLM Inferencing Workloads at Scale}

%for single author (just remove % characters)
% \author{
% Shashwat Jaiswal\\
% UIUC
% }
% \author{
% Kunal Jain\\
% Microsoft
% } % end author
\author{
{\rm Shashwat Jaiswal$^{1}$\thanks{Equal contribution. Shashwat Jaiswal was an intern at Microsoft}, Kunal Jain$^{2*}$, Yogesh Simmhan$^{3}$, Anjaly Parayil$^{2}$, Ankur Mallick$^{2}$,}\\
{\rm Rujia Wang$^{2}$, Renee St. Amant$^{2}$, Chetan Bansal$^{2}$, Victor RÃ¼hle$^{2}$,}\\
{\rm Anoop Kulkarni$^{2}$, Steve Kofsky$^{2}$ and Saravan Rajmohan$^{2}$}\\
$^{1}$University of Illinois Urbana-Champaign\quad$^{2}$Microsoft\quad$^{3}$Indian Institute of Science
} % end author


\maketitle
% \footnotetext[*]{text}
%-------------------------------------------------------------------------------
\begin{abstract}
%-------------------------------------------------------------------------------
Large Language Model (LLM) inference workloads handled by global cloud providers can include both latency-sensitive and insensitive tasks, creating a diverse range of Service Level Agreement (SLA) requirements. Managing these mixed workloads is challenging due to the complexity of the inference stack, which includes multiple LLMs, hardware configurations, and geographic distributions. Current optimization strategies often silo these tasks to ensure that SLAs are met for latency-sensitive tasks, but this leads to significant under-utilization of expensive GPU resources despite the availability of spot and on-demand Virtual Machine (VM) provisioning.
We propose \sys, a comprehensive LLM serving framework that employs adaptive control knobs at varying time scales, ensuring SLA compliance while maximizing the utilization of valuable GPU resources. Short-term optimizations include efficient request routing to data center regions, while long-term strategies involve scaling GPU VMs out/in and redeploying models to existing VMs to align with traffic patterns. These strategies are formulated as an optimization problem for resource allocation and solved using Integer Linear Programming (ILP).
We perform empirical and simulation studies based on production workload traces with over 8M requests using four open-source models deployed across three regions. \sys achieves up to 25\% savings in GPU-hours while maintaining tail latency and satisfying all SLOs, and it reduces the scaling overhead compared to baselines by up to 80\%, confirming the effectiveness of our proposal. In terms of dollar cost, this can save cloud providers up to \$2M over the course of a month.
%{\color{red}\sys achieves significant savings in GPU-hours with a $7\times$ reduction in tail latency and a $3.5\times$ reduction in the scaling overhead with respect to the baseline, confirming the effectiveness of our proposal.} 
\end{abstract}
% \footnote{Equal contribution. Shashwat Jaiswal was an intern at Microsoft}


%-------------------------------------------------------------------------------
\input{OSDI_25/introduction}
%-------------------------------------------------------------------------------
\input{OSDI_25/RelatedWork}
\input{OSDI_25/SystemandApplication}
\input{OSDI_25/Optimization}
\input{OSDI_25/architecture}
\input{OSDI_25/evaluation}
%\input{OSDI_25/Longterm}
% \input{OSDI_25/Results}
\input{OSDI_25/Conclusions}

%----------------------------------------------------------------------------------
% \section*{Acknowledgments}
%-------------------------------------------------------------------------------

%-----------------------------------------------------------------------------
%-------------------------------------------------------------------------------
\bibliographystyle{plain}
%\bibliography{\jobname}
\bibliography{main}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%  LocalWords:  endnotes includegraphics fread ptr nobj noindent
%%  LocalWords:  pdflatex acks
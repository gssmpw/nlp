\begin{algorithm}[t] %
	\SetKwComment{tcp}{$\triangleright$\ }{}%
	\SetCommentSty{small}
	$\M \gets \emptyset$; $\tau_i \gets 0$ for all $i$;
	$\ads_j \gets \{ i: j \in \slots_i \}$ for all $j$\;
	\For{slot $j = \nV, \ldots, 1$ (in a reverse order)}{
		\lIf{it exists $j' \text{ s.t.\ } (i, j') \in \M$}{$\sigma(i) \gets j'$}
		\lElse{$\sigma(i) \gets j$}
		$i^* \gets \arg\max_{i \in \ads_j} \{\rw_{ij} - \tau_i (1-\q)^{\sigma(i)-j}\}$\label{step:greedy-proxy}\;
		$g_{\text{LB}} \gets \rw_{i^*j}  -\q f_j(\M) - \tau_{i^*} (1-\q)^{\sigma(i^*)-j}$\label{step:LB}\;
		\If{$g_{\text{LB}} > 0$}{
			$\M \gets (\M \setminus \{ (i^*, j'): j' \in [\nV] \}) + (i^*, j)$\tcp*{(re-)assign $a_{i^*}$}
			$\tau_{i^*} \gets \rw_{i^* j} - \q \, f_j(\M)$\;
			\If{$\ad_{i^*}$ is re-assigned}{
				$\tau_{i} \gets \rw_{ij'} - \q \, f_{j'}(\M)$ for every $(i,j') \in \M$\;
			}
		}
	}
	\Return \M\;
	\caption{Non-oblivious backwards greedy (\alggbackproxy)}
	\label{alg:greedy-backproxy}
\end{algorithm}

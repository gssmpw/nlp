
A significant share of the current web traffic originates from user-generated content platforms,
such as X (formerly Twitter), Facebook, and TikTok~\cite{Alhabash2017Socials}.
These platforms primarily engage users through their \emph{content feeds}, 
which display a continuous stream of organic content items, 
such as social updates or videos,
arranged in a carefully crafted order and formatted for infinite scrolling~\citep{Milano2020Recc}.
The main monetization strategy of major social-media platforms is to insert sponsored content in between the content items, 
such as promoted posts, content seeking higher user engagement, 
or pay-per-click ads. 
The sponsored content is often designed to provide a well-integrated look and non-intrusive user experience, 
which is also known as \emph{native} advertising~\citep{wojdynski2016native}.
Advertisers incur a charge every time users interact with sponsored content, and
native advertising has evolved into a huge business with a market of
about 100 billion USD~\citep{stats2,stats3},
accounting for nearly two thirds of total display ad spending in the US~\citep{stats4}.


The placement of sponsored content within an infinite feed poses a unique allocation challenge
as it requires balancing two factors: 
(a) prioritizing advertisements at the top of the feed,
since users will eventually stop scrolling further %
their feed;
and (b) ensuring contextual coherence~\citep{yoon2023native},
to boost interaction rates. 
For instance, an airline advertisement is more attractive when displayed after a travel-related post rather than after a political one.
This setting is significantly different from traditional online advertising~\citep{mehta2013online,devanur2022online},
e.g., search advertising, 
where ads are sold through auctions for each opportunity, and
showing the winning ad is assumed to have no influence on a user session and future revenue.
In contrast, for native advertising in content feeds, 
showing an ad reduces the number of items a user will explore. %
Therefore, if no suitable advertisement fits a specific content, the optimal approach would be to forgo immediate revenue in favor of potential earnings later in the user session. %
For an illustration, consider \cref{example:decay} and \cref{fig:decay}.

\begin{figure}[t]
	\centering
	
	\subcaptionbox{ }{ %
		\input{fig-decay1}
	}
	\hfill
	\subcaptionbox{ }{ %
		\input{fig-decay2}
	}
	\caption{\label{fig:decay}An illustration of the expected reward being non-monotone 
	with respect to the 
	ad placement.
	Here $a,v$ and $s$ denote ads, videos, and slots respectively.
	In the first scenario (a) an ad $a_2$ with reward 2 is allocated to slot $s_2$ after video~$v_2$, 
	and a user sees the ad $a_2$ with probability~$p$.
	In the second scenario (b) an additional ad $a_1$ with reward 1 is allocated to slot $s_1$ after video $v_1$.  
	Due to decaying user attention, 
	in (b), %
	the user sees the ad~$\ad_2$ with a probability $p'<p$. 
	Thus, placing an additional ad may lead to a smaller expected reward.}
\end{figure}

%\newpage
\begin{example}\label{example:decay}
	As illustrated in \cref{fig:decay}, 
	assume that there is a \emph{slot} to which an ad can be allocated to, after every organic video.
	Consider two videos $v_1, v_2$ that are presented to a user in order.
	Suppose that an ad $\ad_2$ has been allocated to the slot after $v_2$.
	The crucial observation here is that 
	placing a new ad
	$\ad_1$ before $v_2$ 
	may lead to a loss in the total expected reward over the user session,
	as it reduces the probability that a user interacts with ad $\ad_2$.
\end{example}


\citet{ieong2014advertising} initiated a mathematical formulation for native advertising in content feeds,
denoted as the \streamads problem,
where in addition to %
given rewards for every feasible ad-item pair (e.g., collected through an ad auction),
users have %
decaying attention~\citep{craswell2008experimental}, and may quit browsing with a fixed probability after observing an item or an ad. 
Under such a model, the \streamads problem is to maximize the expected total reward over a user session, by suitably deciding a strategy to display ads.
\citet{ieong2014advertising} show that there exists a \PTAS (i.e., an algorithm that returns nearly optimal solutions) for the \streamads problem.
However, such an algorithm 
relies on solving expensive combinatorial problems, making it impractical.
To the best of our knowledge, the state-of-the-art practical algorithm only achieves a 4-approximation guarantee, %
that solves the problem by finding a suitable maximum weighted matching (\mwm) with %
cardinality constraints~\citep{ieong2014advertising}. 

In this paper, we develop practical and efficient 2-approximation greedy algorithms for the \streamads problem.
To deal with decaying attention,
our algorithms exploit a counter-intuitive structure of the problem, namely,
while top items are seemingly more important due to the decaying attention, 
finding a good position for the bottom items is key to obtaining improved approximation guarantees.
In addition, to carefully account for the constraints of \streamads, 
which require to allocate rewarding ads while considering the decaying attention of a user,
we devise a novel charging scheme based on a %
non-trivial decomposition of the \streamads's objective function. 
This result is then used to identify high-quality ad allocation strategies, and 
is leveraged in our proofs to obtain improved approximation~guarantees.

In addition, to the best of our knowledge, 
we provide the first comprehensive empirical study on the \streamads problem,
in which we verify the strong empirical performance of our novel algorithms. %

More specifically, our contributions are as follows.
\begin{itemize}
	\item We provide an exact greedy algorithm for a special case of the \streamads problem, 
	where each ad can be displayed more than once.
	\item We provide two 2-approximation greedy algorithms for the \streamads problem.
	The first algorithm uses a greedy criterion guided by the exact marginal gain in reward,
	and the second one leverages a lower bound of the marginal gain.
	The second algorithm is also particularly efficient in practice.
	\item We provide the first comprehensive empirical study on the \streamads problem, showing the high-quality ad allocations computed by our novel algorithms.
\end{itemize}


The rest of the paper is organized as follows.
We formally define the problem in \cref{sec:def}.
We characterize the structure of the problem in 
\cref{sec:case}.
We describe our novel algorithms and prove their approximation guarantees in \cref{sec:algs}.
Related work is discussed in \cref{sec:related} and
extensive experiments are in \cref{sec:exp}.
We conclude in \cref{sec:conclusion}. All the missing proofs are reported in~\cref{app:proofs}.



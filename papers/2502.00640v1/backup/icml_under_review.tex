%%%%%%%% ICML 2025 EXAMPLE LATEX SUBMISSION FILE %%%%%%%%%%%%%%%%%

\documentclass{article}
\usepackage[T1]{fontenc}
\usepackage{inconsolata}

\usepackage{enumitem}
\usepackage{hyperref}


% Attempt to make hyperref and algorithmic work together better:
\newcommand{\theHalgorithm}{\arabic{algorithm}}

% Use the following line for the initial blind version submitted for review:
\usepackage{icml2025_anon} %% DON'T USE FOR FINAL PAPER

% If accepted, instead use the following line for the camera-ready submission:
% \usepackage[accepted]{icml2025}

% For theorems and such
\newcommand{\xhdr}[1]{{\noindent\bfseries #1}.}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{colortbl}
\usepackage{makecell}
\usepackage{caption}
\usepackage{multirow}
\usepackage{listings}
\usepackage{cuted}
\usepackage{multicol}
\usepackage{titling}
\usepackage{manyfoot}
\usepackage{verbatim}
\usepackage{xspace}
\usepackage{marginnote}
\usepackage{xcolor}
% if you use cleveref..
\usepackage[capitalize,noabbrev]{cleveref}

\usepackage{tikz}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=0.5pt] (char) {#1};}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% THEOREMS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{assumption}[theorem]{Assumption}
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\usepackage{tabularx}
\usepackage{quoting}
\newenvironment{ex}[1]
 {%
  \quoting[leftmargin=0.1cm,rightmargin=0.1cm]%
  \noindent\textcolor{blue!75}{} \itshape\ignorespaces
 }
 {\endquoting}
\newcommand{\numturker}{201}
 \newcommand{\realsatisfy}{95.9\%\xspace}
 \newcommand{\realsatisfyimprov}{17.6\%\xspace}
 \newcommand{\realtimeimprov}{10.4\%\xspace}

 
\newcommand{\taskimprov}{18.5\%\xspace}
\newcommand{\itrimprov}{46.3\%\xspace}
\newcommand{\efficiencyimprov}{13.3\%\xspace}
\newcommand{\ie}{\textit{i.e., }}
\newcommand{\eg}{\textit{e.g., }}
\newcommand{\etal}{\textit{et al.}}
\newcommand{\st}{\textit{s.t. }}
\newcommand{\etc}{\textit{etc.}}
\newcommand{\wrt}{\textit{w.r.t. }}
\newcommand{\cf}{\textit{cf. }}
\newcommand{\aka}{\textit{aka. }}

% Customize monospaced font here. zi4 looks professional.
\renewcommand{\ttdefault}{zi4}

%\newcommand{\mathc }{\texttt{MATH-Chat} } 
%\newcommand{\mathct}{\texttt{MATH-Chat}} 
%\newcommand{\ambcoqa }{\texttt{Abg-CoQA} } 
%\newcommand{\ambcoqat}{\texttt{Abg-CoQa}} 
%\newcommand{\code }{\texttt{BigCodeBench-Chat} } 
%\newcommand{\codet}{\texttt{BigCodeBench-Chat}} 
%\newcommand{\doc }{\texttt{MediumDocEdit-Chat} } 
%\newcommand{\doct}{\texttt{MediumDocEdit-Chat}} 
%\newcommand{\llama}{\texttt{Meta-Llama-3.1-8B-Instruct }}
%\newcommand{\ourst}{\textsc{MR}} 
%\newcommand{\ours}{\textsc{MR }}
%\newcommand{\objectt}{interactive LLM}
%\newcommand{\object}{interactive LLM }
%\newcommand{\Objectt}{Interactive LLM}
%\newcommand{\Object}{Interactive LLM }
%\newcommand{\Objectst}{Interactive LLMs}
%\newcommand{\Objects}{Interactive LLMs }
%\newcommand{\objectst}{interactive LLMs}
%\newcommand{\objects}{interactive LLMs }

\renewcommand{\thefootnote}{\fnsymbol{footnote}}
% Please check this works, but \xspace should solve the spacing issues (the t versions could be removed).
\newcommand{\mathc}{\texttt{MATH-Chat}\xspace} 
\newcommand{\mathct}{\texttt{MATH-Chat}\xspace} 
\newcommand{\ambcoqa}{\texttt{Abg-CoQA}\xspace} 
\newcommand{\ambcoqat}{\texttt{Abg-CoQa}\xspace} 
\newcommand{\code}{\texttt{BigCodeBench-Chat}\xspace} 
\newcommand{\codet}{\texttt{BigCodeBench-Chat}\xspace} 
\newcommand{\doc}{\texttt{MediumDocEdit-Chat}\xspace} 
\newcommand{\doct}{\texttt{MediumDocEdit-Chat}\xspace} 
\newcommand{\llama}{Llama-3.1-8B\xspace}
\newcommand{\ourst}{\textsc{MR}\xspace} 
\newcommand{\ours}{\textsc{MR}\xspace}
% \newcommand{\objectt}{interactive LLM\xspace}
% \newcommand{\object}{interactive LLM\xspace}
% \newcommand{\Objectt}{Interactive LLM\xspace}
% \newcommand{\Object}{Interactive LLM\xspace}
% \newcommand{\Objectst}{Interactive LLMs\xspace}
% \newcommand{\Objects}{Interactive LLMs\xspace}
% \newcommand{\objectst}{interactive LLMs\xspace}
% \newcommand{\objects}{interactive LLMs\xspace}

\newcommand{\name}{\textsc{CollabLLM}\xspace}
\newcommand{\namewithspace}{\textsc{Collab LLM}\xspace}
\newcommand{\objectt}{collaborative LLM\xspace}
\newcommand{\object}{collaborative LLM\xspace}
\newcommand{\Objectt}{Collaborative LLM\xspace}
\newcommand{\Object}{Collaborative LLM\xspace}
\newcommand{\Objectst}{Collaborative LLMs\xspace}
\newcommand{\Objects}{Collaborative LLMs\xspace}
\newcommand{\objectst}{collaborative LLMs\xspace}
\newcommand{\objects}{collaborative LLMs\xspace}
\usepackage{inconsolata} % Import modern font package
\lstset{
  basicstyle=\fontfamily{pcr}\selectfont\itshape\small, % Monospace + Italic + Small font
  frame=tb,                   
  breaklines=true,             
  breakatwhitespace=false,     
  linewidth=\linewidth,        
  numbers=left,                
  numberstyle=\tiny\color{gray}, 
  xleftmargin=10pt,            
  framexleftmargin=10pt,       
  tabsize=4,                   
  showstringspaces=false,      
  keywordstyle=\color{blue}\bfseries,  
  commentstyle=\color{gray},   
  stringstyle=\color{red},     
  aboveskip=10pt,              
  belowskip=10pt               
}
\usepackage{pifont}
\usepackage{xcolor}
% Changes globally:
\setlist[itemize]{leftmargin=10pt, itemsep=0pt, topsep=0pt, parsep=0pt}

%\newcommand{\TODO}[2]{\textcolor{red}{\textbf{TODO (#1)}: \textit{#2}}}
%\newcommand{\jure}[1]{\textcolor{red}{\textbf{Jure}: \textit{#1}}}
%\newcommand{\james}[1]{\textcolor{blue}{\textbf{James}: \textit{#1}}}
% \newcommand{\jure}[1]{\marginnote{\textcolor{red}{\textbf{Jure}: \textit{#1}}}}
% \newcommand{\james}[1]{\marginnote{\textcolor{blue}{\textbf{James}: \textit{#1}}}}

% Todonotes is useful during development; simply uncomment the next line
%    and comment out the line below the next line to turn off comments
%\usepackage[disable,textsize=tiny]{todonotes}
\usepackage[textsize=tiny]{todonotes}


% The \icmltitle you define below is probably too long as a header.
% Therefore, a short form for the running title is supplied here:
\icmltitlerunning{\name{}: From Passive Responders to Active Collaborators}

\begin{document}
\onecolumn  % Hank Hack
% \twocolumn[  % Hank Hack
\icmltitle{\name{}: From Passive Responders to Active Collaborators}

% It is OKAY to include author information, even for blind
% submissions: the style file will automatically remove it for you
% unless you've provided the [accepted] option to the icml2025
% package.

% List of affiliations: The first argument should be a (short)
% identifier you will use later to specify author affiliations
% Academic affiliations should list Department, University, City, Region, Country
% Industry affiliations should list Company, City, Region, Country

% You can specify symbols, otherwise they are numbered in order.
% Ideally, you should not use this facility. Affiliations will be numbered
% in order of appearance and this is the preferred way.
% \icmlsetsymbol{equal}{*}

\begin{icmlauthorlist}
\icmlauthor{Firstname1 Lastname1}{equal,yyy}
\icmlauthor{Firstname2 Lastname2}{equal,yyy,comp}
\end{icmlauthorlist}

% \author{Shirley Wu$^1$\thanks{Major work done at Microsoft Research. Correspondence: \{shirwu@cs.stanford.edu, mgalley@microsoft.com\}}\ ,\ Michel Galley$^2$,\ Baolin Peng$^2$,\ Hao Cheng$^2$,\ Yao Dou$^3$, Weixin Cai$^2$,\ \\
% \textbf{Jure Leskovec}$^1$, \textbf{James Zou}$^1$,\ \textbf{Jianfeng Gao}$^2$\\
% $^1$ Stanford University\quad $^2$ Microsoft Research\\
% % (--Tentative, free to edit anything)\\
% \vspace{20pt}
% }
\icmlaffiliation{}{}
\icmlaffiliation{comp}{Company Name, Location, Country}
\icmlaffiliation{sch}{School of ZZZ, Institute of WWW, Location, Country}

\icmlcorrespondingauthor{anonymous}{anonymous}

% You may provide any keywords that you
% find helpful for describing your paper; these are used to populate
% the "keywords" metadata in the PDF but will not be shown in the document
\icmlkeywords{Machine Learning, ICML}

\vskip 0.3in
% ] 

\begin{figure}[H]
    \centering
    \vspace{-28pt}
    \includegraphics[width=0.87\linewidth]{figures/cropped/first_v7b}
    %\includegraphics[width=0.87\linewidth]{figures/first_v5}
    \vspace{-5pt}
    \captionof{figure}{\name{} Framework: Given a context \circled{\small 1}, the model generates a response \circled{\small 2} to maximize long-term collaboration gains, termed \textit{Multiturn-aware Rewards} (MR). During training, MRs are estimated via \circled{\small 3} collaborative simulation, which forward-samples conversations with simulated users.
    %and computes averaged conversation-level rewards. 
    Finally, \circled{\small 4} reinforcement fine-tuning is applied using the MRs.
    %OLD: \captionof{figure}{\name{} Training Framework: Given a context \circled{\small 1}, the model aims to generate a response \circled{\small 2} maximizing long-term collaboration gains, referred to as \textit{Multiturn-aware Rewards} (MR). During training, MRs are estimated through \circled{\small 3} collaborative simulation, which involves forward sampling to generate future conversations with simulated users and computing the average conversation-level reward. Finally, \circled{\small 4} reinforcement fine-tuning is performed using the MRs.
    }
     % by \eg suggesting follow-up questions or alternative explorations. 
    %\captionof{figure}{Our interactive LLM training framework: Given a context, our models learn to maximize long-term gains, encouraging the model to effectively collaborate with real users, \eg by proposing follow-up questions or alternative explorations.}
    %\captionof{figure}{Our interactive LLM training framework. Given a context, our framework trains the LLM to output responses that maximize long-term gains instead of intermediate rewards, encouraging the model to effectively collaborate with real users, \eg by proposing follow-up questions or alternative explorations.}
    \label{fig:overview}
\end{figure}

\begin{multicols}{2}  % Hank Hack
% this must go after the closing bracket ] following \twocolumn[ ...

% This command actually creates the footnote in the first column
% listing the affiliations and the copyright notice.
% The command takes one argument, which is text to display at the start of the footnote.
% The \icmlEqualContribution command is standard text for equal contribution.
% Remove it (just {}) if you do not need this facility.

%\printAffiliationsAndNotice{}  % leave blank if no need to mention equal contribution
\printAffiliationsAndNotice{} % otherwise use the standard text.


\input{chapters/abstract}
\input{chapters/introduction}
\input{chapters/method}
\input{chapters/experiments}
\input{chapters/conclusion}
\newpage
\newpage
\input{chapters/impact_statement}

\bibliography{main}
\bibliographystyle{icml2025}

\end{multicols}  
\newpage
\onecolumn
\appendix
\input{chapters/appendix/claim}
\input{chapters/appendix/discussion}
\input{chapters/related_works}
\input{chapters/appendix/ds_train}
\input{chapters/appendix/examples}
\input{chapters/appendix/prompts}
\input{chapters/appendix/abg_coqa}
\input{chapters/appendix/user_study}

\end{document}

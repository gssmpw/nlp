%\tdplotsetmaincoords{120}{-40};

\begin{tikzpicture}[>={latex},scale=0.4,every node/.style={scale=0.4}]
%\begin{tikzpicture}[>={latex},tdplot_main_coords]
%\begin{tikzpicture}[>={latex}]

\def\tripole at (#1,#2){
\node (A) [scale = 0.3, cylinder, shape border rotate=90, shape aspect=.5, draw = red, minimum height= 60, minimum width=1] at (#1+0,#2+0.35) {};
\node (A) [scale = 0.3, cylinder, shape border rotate=90, shape aspect=.5, draw = red, minimum height= 60, minimum width=1] at (#1+0,#2-0.35) {};
\node (A) [scale = 0.3,cylinder, shape border rotate=0, shape aspect=.5, draw = blue, minimum height= 60, minimum width=1] at (#1+0.35,#2+0) {};
\node (A) [scale = 0.3,cylinder, shape border rotate=0, shape aspect=.5, draw = blue, minimum height= 60, minimum width=1] at (#1-0.35,#2+0) {};
\node (A) [scale = 0.3,cylinder, rotate=43, shape aspect=.5, draw = black!60!green, minimum height= 60, minimum width=1] at (#1+0.35/1.25,#2+0.32/1.25) {};
\node (A) [scale = 0.3,cylinder, rotate=43, shape aspect=.5, draw = black!60!green, minimum height= 60, minimum width=1] at (#1-0.35/1.2,#2-0.33/1.2) {};
}

\def\tripoleGros at (#1,#2){
\node (A) [cylinder, shape border rotate=90, shape aspect=.5, draw = red, minimum height= 60, minimum width=1] at (#1+0,#2+1.3) {};
\node (A) [cylinder, shape border rotate=90, shape aspect=.5, draw = red, minimum height= 60, minimum width=1] at (#1+0,#2-1.3) {};
\node (A) [cylinder, shape border rotate=0, shape aspect=.5, draw = blue, minimum height= 60, minimum width=1] at (#1+1.3,#2+0) {};
\node (A) [cylinder, shape border rotate=0, shape aspect=.5, draw = blue, minimum height= 60, minimum width=1] at (#1-1.3,#2+0) {};
\node (A) [cylinder, rotate=43, shape aspect=.5, draw = black!60!green, minimum height= 60, minimum width=1] at (#1+1.3/1.25,#2+1.1/1.25) {};
\node (A) [cylinder, rotate=43, shape aspect=.5, draw = black!60!green, minimum height= 60, minimum width=1] at (#1-1.3/1.2,#2-1.5/1.2) {};
}

\draw [->] (0,0) node (v4) {} -- (12,0) node[right] {\LARGE $z$};
\draw [->] (0,-1) -- (0,5) node[left] {\LARGE $x$};
\draw [<-] (-1.3*4,-1.2*4)  node[below] {\LARGE $y$} -- (1.3*4,1.2*4) ;
\draw [<->] (-1.3*3.1-2.3,-1.2*3.1)  -- (1.3*3.1-2.3,1.2*3.1) ;
\node [right] at (-2.25,1.25) {\LARGE $2L$};

 \foreach \x in {-3,...,3}
       	\tripole at (1.3*\x,1.2*\x);
    	 

 
      
%\draw (10.5,0) node (v3) {} -- (10.5,4.5) coordinate (v1) {} -- (v1) -- (8.5,3) node (v2) {} -- (v2) -- (v3) -- (v2) -- (v4);
%\draw (10.5,0) node (v3) {} -- (12.5,2.5) coordinate (v1) {}; % -- (v1) -- (8.5,3) node (v2) {} ;
%\draw (8.5,3) node (v2) {} -- (v2) -- (v3) -- (v2) -- (v4);

% 
%\draw[<->] (4.5,1.5) .. controls (5,1) and (5.5,0.5) .. (5.5,0);
%\draw[<->] (11.5,1.5) .. controls (11,2) and (10,2) .. (9.5,1.5);
%\node at (5.5,1) {\LARGE $\theta$};
%\node at (10,2.5)  {\LARGE $\varphi$};


%\draw [<->] (-4.5,-4) -- (-4.5,-2.3);
%\node at (-5,-3) {\LARGE $\Delta_T$};

\draw [<->] (-2.2,-1.2) -- (-0.9,0);
\node [right] at (-2.5,-0.3) {\LARGE $\Delta_T$};

\node [right] at (-5.5,-3) {\LARGE $M$};
\node [right] at (-5.6,-1.7) {\LARGE $(M-1)$};
\node [right] at (0.0,3.5) {\LARGE $-(M-1)$};
\node [right] at (2.5,4.5) {\LARGE $-M$};
 
%\draw [<->] (6.5,0.4) node (v5) {} -- (-1.3,-6.8) node (v6) {};
%\node [right] at (3,-3.5) {\LARGE $2M\Delta_T$};
% \draw [<->] (-6.5,-0.3) -- (-6.5,-6.8);
% \node [rotate=90] at (-7,-3.5) {\LARGE $2K\Delta_T$};
 
%\draw [dotted,very thick] (3.5,0.4) -- (v5);
%\draw [dotted,very thick] (-6.5,-6.8) --   (v6);
%\draw [dotted,very thick] (-6.5,-0.35) -- (-3.9,-0.35);
\node [right] at (5.8,1.6) {\LARGE $D$};

\tripoleGros at (7, -3.5); 

\begin{scope} [scale=1.5, shift={(-5.5,1.5)}]
\draw[red] (10.15,-3.62) .. controls (10.35,-4.1) and (10.9,-4.1) .. (11.3,-4.2);
\draw[red] (10.15,-4) .. controls (10.15,-3.7) and (10.5,-4.3) .. (11.3,-4.35);
\draw [blue] (9.99,-3.83) .. controls (10.34,-3.74) and (9.65,-3.54) .. (9.2,-3.25);
\draw [blue] (10.37,-3.84) .. controls (10.14,-3.81) and (9.65,-3.3) .. (9.2,-3.1);
\draw [black!60!green] (10.36,-3.68) .. controls (9.95,-4.05) and (9.7,-4.05) .. (9.35,-4.1);
\draw [black!60!green] (9.95,-4.15) .. controls (10.05,-4.05) and (9.8,-4.05) .. (9.35,-4.25);
\draw [blue] (9.2,-3) rectangle node {RF} (8.5,-3.4);
\draw [red] (11.85,-4.1) rectangle node {RF} (11.3,-4.45);
\draw [black!60!green] (8.65,-4) rectangle node {RF} (9.35,-4.35);

\end{scope}



% 
% 
% 
% 
% 
% 
% 
% 
% 
% 
% 
% 
% 
% 
% % \pgfmathsetmacro{\Lx}{10}
% %   \pgfmathsetmacro{\Ly}{5}
% %   \pgfmathsetmacro{\Rx}{4}
% %   \pgfmathsetmacro{\Ry}{1}
% %   \pgfmathsetmacro{\Rz}{15}
% \pgfmathsetmacro{\Lx}{5}
%   \pgfmathsetmacro{\Ly}{2.5}
%   \pgfmathsetmacro{\Rx}{2}
%   \pgfmathsetmacro{\Ry}{.5}
%   \pgfmathsetmacro{\Rz}{12}
%   
% \pgfmathsetmacro{\r1}{2}
% \pgfmathsetmacro{\r2}{1.75}
% \pgfmathsetmacro{\r3}{1.5}
% \pgfmathsetmacro{\r4}{1}
% 
% \begin{scope}
% \draw[thick,->] (0,0,0) -- (1,0,0) node[anchor=south]{$z$};
% \draw[thick,->] (0,0,0) -- (0,-1,0) node[anchor=south ]{$x$};
% \draw[thick,->] (0,0,0) -- (0,0,1) node[anchor=south]{$y$};
% %\draw[thick,->] (0,0,0) -- (.5,0,0) node[anchor=south]{$x_t$};
% %\draw[thick,->] (0,0,0) -- (0,.5,0) node[anchor=south]{$y_t$};
% %\draw[thick,->] (0,0,0) -- (0,0,.5) node[anchor=south]{$z_t$};
% \coordinate (pp) at (0,-\Lx,\Ly);
% \coordinate (pm) at (0,-\Lx, -\Ly);
% \coordinate (mp) at (0,\Lx,\Ly);
% \coordinate (mm) at (0,\Lx,-\Ly);
% \coordinate (vv) at (0,-\Rx,\Ry);
% \coordinate (RX) at (\Rz,-\Rx,\Ry);
% \draw [very thick] (pp)--(pm)--(mm)--(mp)--cycle;
% \draw [cyan,dashdotted] (vv)--(RX);
% \draw [cyan,dashdotted] (0,-\Rx,-\Ly) -- (0,-\Rx,\Ly);
% \draw [cyan,dashdotted] (0,-\Lx,\Ry) -- (0,\Lx,\Ry);
% \draw [cyan,very thick] (0,-\Lx,\Ly) --node[above right] {$\mathsf{d}_{++}$} (RX);
% \draw [cyan,very thick] (0,-\Lx,-\Ly) --node[left] {$\mathsf{d}_{+-}$}  (RX);
% \draw [cyan,very thick] (0,\Lx,-\Ly) --node[above left] {$\mathsf{d}_{--}$} (RX);
% \draw [cyan,very thick] (0,\Lx,\Ly) --node[above] {$\mathsf{d}_{-+}$} (RX);
% \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,\Ly)(0,-\Lx,\Ly)
% \tdplotdrawpolytopearc[very thick, cyan]{4}{anchor=south}{$\gamma_x^{+}$}
% \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Lx,-\Ly)(0,\Lx,-\Ly)
% \tdplotdrawpolytopearc[very thick, cyan]{4}{anchor=south}{$\gamma_x^{-}$}
% \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Lx,-\Ly)(0,-\Lx,\Ly)
% \tdplotdrawpolytopearc[very thick, cyan]{7}{anchor=east}{$\gamma_y^{+}$}
% \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,\Ly)(0,\Lx,-\Ly)
% \tdplotdrawpolytopearc[very thick, cyan]{7}{anchor=east}{$\gamma_y^{-}$}
% \end{scope}
% 
% \begin{scope}[yshift = - 8 cm]
%  \draw[thick,->] (0,0,0) -- (1,0,0) node[anchor=south]{$z$};
%  \draw[thick,->] (0,0,0) -- (0,-1,0) node[anchor=south ]{$x$};
%  \draw[thick,->] (0,0,0) -- (0,0,1) node[anchor=south]{$y$};
% % \draw[thick,->] (0,0,0) -- (.5,0,0) node[anchor=south]{$x_t$};
% % \draw[thick,->] (0,0,0) -- (0,.5,0) node[anchor=south]{$y_t$};
% % \draw[thick,->] (0,0,0) -- (0,0,.5) node[anchor=south]{$z_t$};
% \coordinate (pp) at (0,-\Lx,\Ly);
% \coordinate (pm) at (0,-\Lx, -\Ly);
% \coordinate (mp) at (0,\Lx,\Ly);
% \coordinate (mm) at (0,\Lx,-\Ly);
% \coordinate (vv) at (0,-\Rx,\Ry);
% \coordinate (RX) at (\Rz,-\Rx,\Ry);
% \draw [very thick] (pp)--(pm)--(mm)--(mp)--cycle;
% \draw [cyan,dashdotted] (vv)--(RX);
% \draw [cyan,very thick] (0,-\Rx,-\Ly) -- (0,-\Rx,\Ly);
% \draw [cyan,very thick] (0,-\Lx,\Ry) -- (0,\Lx,\Ry);
% \draw [cyan,very thick] (0,-\Rx,\Ly) -- (RX);
% \draw [cyan,very thick] (0,-\Rx,-\Ly) -- (RX);
% \draw [cyan,very thick] (0,\Lx,\Ry) -- (RX);
% \draw [cyan,very thick] (0,-\Lx,\Ry) -- (RX);
% \tdplotdefinepoints(0,-\Rx,\Ly)(\Rz,-\Rx,\Ry)(0,-\Rx,-\Ly)
%  \tdplotdrawpolytopearc[very thick, cyan]{1.2}{anchor=south }{$\beta_y^{+}$}
%  \tdplotdefinepoints(0,-\Rx,-\Ly)(\Rz,-\Rx,\Ry)(0,-\Rx,\Ly)
%  \tdplotdrawpolytopearc[very thick, cyan]{1.2}{anchor=south west}{$\beta_y^{-}$}
%   \tdplotdefinepoints(0,-\Lx,\Ry)(\Rz,-\Rx,\Ry)(0,\Lx,\Ry)
%  \tdplotdrawpolytopearc[very thick, cyan]{1.2}{anchor=north east}{$\beta_x^{+}$}
%   \tdplotdefinepoints(0,\Lx,\Ry)(\Rz,-\Rx,\Ry)(0,-\Lx,\Ry)
%  \tdplotdrawpolytopearc[very thick, cyan]{1.2}{anchor=south west}{$\beta_x^{-}$}
%  
% %   \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,\Ry)(0,-\Lx,\Ry)
% %  \tdplotdrawpolytopearc[very thick, cyan]{3}{anchor=south east}{$\beta_x$}
% %   
% %   \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Rx,\Ly)(0,-\Rx,-\Ly)
% %  \tdplotdrawpolytopearc[very thick, cyan]{5}{anchor=east}{$\beta_y$}
% \end{scope}
% 
% \begin{scope}[xshift = 15 cm]
% % 
%    \draw[thick,->] (0,0,0) -- (1,0,0) node[anchor=south]{$z$};
%    \draw[thick,->] (0,0,0) -- (0,-1,0) node[anchor=south ]{$x$};
%   \draw[thick,->] (0,0,0) -- (0,0,1) node[anchor=south]{$y$};
% %  \draw[thick,->] (0,0,0) -- (.5,0,0) node[anchor=south]{$x_t$};
% %  \draw[thick,->] (0,0,0) -- (0,.5,0) node[anchor=south]{$y_t$};
% %  \draw[thick,->] (0,0,0) -- (0,0,.5) node[anchor=south]{$z_t$};
% \coordinate (pp) at (0,-\Lx,\Ly);
% \coordinate (pm) at (0,-\Lx, -\Ly);
% \coordinate (mp) at (0,\Lx,\Ly);
% \coordinate (mm) at (0,\Lx,-\Ly);
% \coordinate (vv) at (0,-\Rx,\Ry);
% \coordinate (RX) at (\Rz,-\Rx,\Ry);
% \draw [very thick] (pp)--(pm)--(mm)--(mp)--cycle;
% \draw [cyan,dashdotted] (vv)--(RX);
% \draw [cyan,dashdotted] (0,-\Rx,-\Ly) -- (0,-\Rx,\Ly);
%  \draw [cyan,dashdotted] (0,-\Lx,\Ry) -- (0,\Lx,\Ry);
% \draw [brown,very thick] (RX)-- (0,-\Rx,\Ly);
% \draw [purple,very thick] (RX)-- (0,-\Rx,-\Ly);
% \draw [brown,very thick] (RX)-- (0,-\Lx,\Ly);
% \draw [brown,very thick] (RX)-- (0,\Lx,\Ly);
% \draw [purple,very thick] (RX)-- (0,-\Lx,-\Ly);
% \draw [purple,very thick] (RX)-- (0,\Lx,-\Ly);
% 
%  \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,\Ly)(0,-\Rx,\Ly)
%  \tdplotdrawpolytopearc[very thick, brown]{6}{anchor=south}{$\gamma_x^{-+}$}
%  \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Rx,\Ly)(0,-\Lx,\Ly)
%  \tdplotdrawpolytopearc[very thick, brown]{9}{anchor=south}{$\gamma_x^{++}$}
%  \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,-\Ly)(0,-\Rx,-\Ly)
%  \tdplotdrawpolytopearc[very thick, purple]{6}{anchor=south}{$\gamma_x^{--}$}
%  \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Rx,-\Ly)(0,-\Lx,-\Ly)
%  \tdplotdrawpolytopearc[very thick, purple]{10}{anchor=south}{$\gamma_x^{+-}$}
%  
% \end{scope}
% 
% \begin{scope}[yshift = - 8 cm, xshift = 15 cm]
% 
%   \draw[thick,->] (0,0,0) -- (1,0,0) node[anchor=south]{$z$};
%   \draw[thick,->] (0,0,0) -- (0,-1,0) node[anchor=south ]{$x$};
%  \draw[thick,->] (0,0,0) -- (0,0,1) node[anchor=south]{$y$};
% %  \draw[thick,->] (0,0,0) -- (.5,0,0) node[anchor=south]{$x_t$};
% %  \draw[thick,->] (0,0,0) -- (0,.5,0) node[anchor=south]{$y_t$};
% %  \draw[thick,->] (0,0,0) -- (0,0,.5) node[anchor=south]{$z_t$};
% \coordinate (pp) at (0,-\Lx,\Ly);
% \coordinate (pm) at (0,-\Lx, -\Ly);
% \coordinate (mp) at (0,\Lx,\Ly);
% \coordinate (mm) at (0,\Lx,-\Ly);
% \coordinate (vv) at (0,-\Rx,\Ry);
% \coordinate (RX) at (\Rz,-\Rx,\Ry);
% \draw [very thick] (pp)--(pm)--(mm)--(mp)--cycle;
% \draw [cyan,dashdotted] (vv)--(RX);
% \draw [cyan,dashdotted] (0,-\Rx,-\Ly) -- (0,-\Rx,\Ly);
%  \draw [cyan,dashdotted] (0,-\Lx,\Ry) -- (0,\Lx,\Ry);
% \draw [brown,very thick] (RX)-- (0,-\Lx,\Ry);
% \draw [purple,very thick] (RX)-- (0,\Lx,\Ry);
% \draw [brown,very thick] (RX)-- (0,-\Lx,\Ly);
% \draw [purple,very thick] (RX)-- (0,\Lx,\Ly);
% \draw [brown,very thick] (RX)-- (0,-\Lx,-\Ly);
% \draw [purple,very thick] (RX)-- (0,\Lx,-\Ly);
% 
%   \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Lx,\Ry)(0,-\Lx,\Ly)
%   \tdplotdrawpolytopearc[very thick, brown]{9}{anchor=south east}{$\gamma_y^{++}$}
%   \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,-\Lx,\Ry)(0,-\Lx,-\Ly)
%   \tdplotdrawpolytopearc[very thick, brown]{7}{anchor=south east}{$\gamma_y^{+-}$}
%     \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,\Ry)(0,\Lx,\Ly)
%   \tdplotdrawpolytopearc[very thick, purple]{11}{anchor=east}{$\gamma_y^{-+}$}
%   \tdplotdefinepoints(\Rz,-\Rx,\Ry)(0,\Lx,\Ry)(0,\Lx,-\Ly)
%   \tdplotdrawpolytopearc[very thick, purple]{7}{anchor=east}{$\gamma_y^{--}$}
% 
% 
% \end{scope}

\draw[->] (v4) -- (9.6,2) node (v1) {};
 \tripole at (9.6,2);

\draw (3.5,0) .. controls (4,0.5) and (4,0.5) .. (4,0.8);
\node at (4.2,0.5) {\LARGE $\theta$};

%\draw[dashed] (v1) -- (3.9,3.6);
%\draw[dashed] (-3.9,-3.6) -- (v1) -- cycle;
%\draw (7.9,1.3) .. controls (7.7,1.8) and (7.8,2.1) .. (8.2,2.4);

%\node at (7.5,2) {\LARGE $\Gamma$};
\end{tikzpicture}
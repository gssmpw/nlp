\begin{table}[!tbp]
\centering
\caption{\looseness-1Downstream evaluations for language models trained on the Pile dataset. Comparisons include a 24-layer 1B-parameter baseline model, iso-flop looped models \loopy{k}{24/k} for various parameter budgets $k$, and the corresponding iso-param baselines \loopy{k}{1}. Downstream evaluations are averaged over tasks within 4 task groups. We also include the \% Gap metric for each $k$ to measure the gap between the iso-param and iso-flop baselines that is covered by the looped model (see \Cref{eq:gap_pct}). Overall the looped models are worse on perplexity and closed book QA (memorization benchmarks), but the \% Gap is much higher for task groups that require reasoning (open book QA, math word problems). In fact for reasoning primitives, which are purely testing for reasoning skills, the looped models are much better than the 1B baseline for all $k$, despite having $24/k \times$ fewer parameters.}
\label{table:language_modeling_results}
\scalebox{0.7}{
% \begin{tabular}{lll|r|rrr|r}
\begin{tabular}{lcc|cccc|c}
\toprule
 & Params / & Perplexity ($\downarrow$) & Closed & Open   & Math Word & All Tasks & Reasoning  \\
  & FLOPs & \tiny{(validation)} & Book QA ($\uparrow$) & Book QA ($\uparrow$)  &  Problems ($\uparrow$) & Average ($\uparrow$) & Primitives ($\uparrow$) \\
  & &  & \tiny{(4 tasks)} & \tiny{(5 tasks)}  &  \tiny{(6 tasks)} & \tiny{(15 tasks)}  & \tiny{(4 tasks)}  \\
\midrule
\hline
\rowcolor{lightgray}
\multicolumn{3}{c}{24 layers}  \\
\hline
Baseline & 24x / 24x & 7.40 & 11.2 & 33.9  & 29.3 & 26.0 & 47.5 \\
\hline
\hline
\rowcolor{lightgray}
\multicolumn{3}{c}{12 layers}  \\
\hline
Base \loopy{12}{1} & 12x / 12x & 8.16 & 8.2 & 26.9  & 26.7 & 21.8 & 35.7 \\
Loop \loopy{12}{2} & 12x / 24x & 7.90 & 9.3 & 30.8  & 34.3 & 26.5 & 51.2\\
% \cline{1-3}
\hline
\% Gap &  & \ApplyGradient{34}\% & \ApplyGradient{37}\% & \ApplyGradient{56}\%  & \ApplyGradient{282}\% & \ApplyGradient{110}\% & \ApplyGradient{131}\%\\
%%
%%
\hline
% \new{
Middle Loop & 12x / 24x & 7.81 & 11.0 & 32.3  & 28.3 & 25.0 & 56.5\\
\loopy{4}{1,4,1} & &  &  &   &  &  & \\

% \cline{1-3}
\hline
\% Gap &  & \ApplyGradient{46}\% & \ApplyGradient{94}\% & \ApplyGradient{78}\%  & \ApplyGradient{62}\% & \ApplyGradient{95}\% & \ApplyGradient{176}\%\\
%%
%%
% \% Gap &  & 34\% & 37\% & 56\%  & 282\% & 110\% & 131\%\\
% }
\hline
\hline
\rowcolor{lightgray}
\multicolumn{3}{c}{8 layers}  \\
\hline
Base \loopy{8}{1} & 8x / 8x & 8.75 & 6.3 & 22.7 & 17.1 & 16.1 & 33.0 \\
Loop \loopy{8}{3} & 8x / 24x & 8.19 & 8.5 & 30.8 & 28.4 & 23.9 & 55.3 \\
\% Gap &  & \ApplyGradient{41}\% & \ApplyGradient{44}\% & \ApplyGradient{72}\% & \ApplyGradient{92}\% & \ApplyGradient{78}\% & \ApplyGradient{153}\% \\
% \% Gap &  & 41\% & 44\% & 72\% & 92\% & 78\% & 153\% \\
\hline
\hline
\rowcolor{lightgray}
\multicolumn{3}{c}{6 layers}  \\
\hline
Base \loopy{6}{1} & 6x / 6x & 9.25 & 4.0 & 19.3 & 17.7 & 14.6 & 24.1 \\
Loop \loopy{6}{4} & 6x / 24x & 8.42 & 8.2 & 28.7 & 29.8 & 23.7 & 56.1 \\
\% Gap &  & \ApplyGradient{44}\% & \ApplyGradient{58}\% & \ApplyGradient{64}\% & \ApplyGradient{104}\% & \ApplyGradient{80}\% & \ApplyGradient{136}\% \\
% \% Gap &  & 44\% & 58\% & 64\% & 104\% & 80\% & 136\% \\
\hline
\hline
\rowcolor{lightgray}
\multicolumn{3}{c}{4 layers}  \\
\hline
Base \loopy{4}{1} & 4x / 4x & 10.12 & 1.8 & 13.8 & 9.7 & 9.0 & 19.4 \\
Loop \loopy{4}{6} & 4x / 24x & 8.79 & 6.7 & 26.2 & 24.8 & 20.4 & 56.9 \\
\% Gap &  & \ApplyGradient{48}\% & \ApplyGradient{52}\% & \ApplyGradient{61}\% & \ApplyGradient{77}\% & \ApplyGradient{67}\% & \ApplyGradient{133}\% \\
% \% Gap &  & 48\% & 52\% & 61\% & 77\% & 67\% & 133\% \\
\hline
\end{tabular}
}
\end{table}
\begin{table*}[htb!]
\centering
\caption{The detailed evaluation results from LongBench of all tasks.}
\label{table:app_longbench}
\resizebox{\textwidth}{!}{%
\begin{tabular}{@{}ccccccccccccccccccc@{}}
\toprule
 &  & \multicolumn{3}{c}{\textbf{Single-DocumentQA}} & \multicolumn{3}{c}{\textbf{Multi-DocumentQA}} & \multicolumn{3}{c}{\textbf{Summary}} & \multicolumn{3}{c}{\textbf{Few-shot Learning}} & \multicolumn{2}{c}{\textbf{Synthetic}} & \multicolumn{2}{c}{\textbf{Code}} &  \\
 
\cmidrule(lr){3-5}\cmidrule(lr){6-8}\cmidrule(lr){9-11}\cmidrule(lr){12-14}\cmidrule(lr){15-16}\cmidrule(lr){17-18}

\multirow{-2}{*}{\textbf{Budget}} & \multirow{-2}{*}{\textbf{Method}} & \small \rotatebox[origin=c]{-45}{NrtvQA} & \small \rotatebox[origin=c]{-45}{Qasper} & \small \rotatebox[origin=c]{-45}{MF-en} & \small \rotatebox[origin=c]{-45}{HotpotQA} & \small \rotatebox[origin=c]{-45}{2WikiMQA} & \small \rotatebox[origin=c]{-45}{Musique} & \small \rotatebox[origin=c]{-45}{GovReport} & \small \rotatebox[origin=c]{-45}{QMSum} & \small \rotatebox[origin=c]{-45}{MultiNews} & \small \rotatebox[origin=c]{-45}{TREC} & \small \rotatebox[origin=c]{-45}{TriviaQA} & \small \rotatebox[origin=c]{-45}{SAMSum} & \small \rotatebox[origin=c]{-45}{PCount} & \small \rotatebox[origin=c]{-45}{PRe} & \small \rotatebox[origin=c]{-45}{Lcc} & \multicolumn{1}{l}{\small \rotatebox[origin=c]{-45}{RB-P}} & \multirow{-2}{*}{\textbf{Averageâ†‘}}  \\  \midrule

\multicolumn{19}{c}{\textbf{Longchat-v1.5-7b-32k}} \\ \midrule
\textbf{Full} & \textbf{Full cache} & 20.70 & 29.41 & 43.09 & 33.05 & 24.14 & 14.66 & 30.84 & 22.79 & 26.61 & 66.50 & 83.99 & 40.90 & 0.00 & 30.50 & 52.94 & 56.78 & 36.06 \\ \midrule
 & \textbf{StreamingLLM} & 15.03 & 17.71 & 27.14 & 27.00 & 21.52 & 9.09 & 21.51 & 19.39 & 21.97 & 55.00 & 81.07 & 37.07 & 0.50 & 5.00 & 46.40 & 53.05 & 28.65 \\
 & \textbf{H2O+} & \textbf{19.01} & 24.00 & 33.08 & 30.60 & 22.47 & 12.23 & 21.01 & 21.59 & 22.07 & 50.50 & 83.42 & 39.62 & 0.00 & 27.50 & 51.35 & 54.63 & 32.07 \\
 & \textbf{SnapKV} & 18.73 & 25.21 & 38.18 & 33.26 & \textbf{23.79} & 13.27 & 21.84 & 21.15 & 22.58 & 59.00 & 84.20 & 38.41 & 0.00 & 25.50 & 54.39 & \textbf{57.43} & 33.56 \\
 & \textbf{Quest} & 16.80 & \textbf{31.43} & 38.01 & 27.95 & 23.73 & 10.03 & 27.91 & \textbf{22.58} & \textbf{25.68} & 60.50 & 81.27 & 39.95 & 0.00 & \textbf{41.50} & 51.95 & 50.22 & 34.34 \\
\multirow{-5}{*}{\textbf{512}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}17.69 & \cellcolor[HTML]{E7E6E6}28.49 & \cellcolor[HTML]{E7E6E6}\textbf{41.63} & \cellcolor[HTML]{E7E6E6}\textbf{34.13} & \cellcolor[HTML]{E7E6E6}23.67 & \cellcolor[HTML]{E7E6E6}\textbf{14.18} & \cellcolor[HTML]{E7E6E6}\textbf{28.40} & \cellcolor[HTML]{E7E6E6}21.82 & \cellcolor[HTML]{E7E6E6}25.52 & \cellcolor[HTML]{E7E6E6}\textbf{64.00} & \cellcolor[HTML]{E7E6E6}\textbf{84.66} & \cellcolor[HTML]{E7E6E6}\textbf{40.56} & \cellcolor[HTML]{E7E6E6}\textbf{1.00} & \cellcolor[HTML]{E7E6E6}25.50 & \cellcolor[HTML]{E7E6E6}\textbf{54.42} & \cellcolor[HTML]{E7E6E6}55.89 & \cellcolor[HTML]{E7E6E6}\textbf{35.10} \\ \midrule
 & \textbf{StreamingLLM} & 16.30 & 20.06 & 32.30 & 28.60 & 21.37 & 9.56 & 25.52 & 20.36 & 23.51 & 60.50 & 82.15 & 39.29 & \textbf{1.50} & 6.00 & 52.74 & 53.71 & 30.84 \\
 & \textbf{H2O+} & 18.92 & 24.65 & 37.38 & 32.40 & 22.28 & 12.46 & 22.72 & 21.62 & 24.22 & 59.00 & 84.39 & 39.90 & 0.00 & 28.00 & 53.74 & 55.60 & 33.58 \\
 & \textbf{SnapKV} & \textbf{19.46} & 26.97 & 38.96 & 34.01 & 23.22 & 14.33 & 23.17 & 21.46 & 24.50 & 64.00 & 84.33 & 39.93 & 0.00 & 28.00 & \textbf{53.96} & \textbf{57.72} & 34.63 \\
 & \textbf{Quest} & 18.51 & 31.09 & 41.32 & 29.92 & 22.95 & 11.35 & \textbf{30.16} & \textbf{22.67} & \textbf{26.52} & \textbf{66.00} & 83.35 & \textbf{40.86} & 0.00 & \textbf{35.00} & 50.77 & 54.16 & 35.29 \\
\multirow{-5}{*}{\textbf{1024}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}19.36 & \cellcolor[HTML]{E7E6E6}\textbf{29.50} & \cellcolor[HTML]{E7E6E6}\textbf{41.67} & \cellcolor[HTML]{E7E6E6}\textbf{33.64} & \cellcolor[HTML]{E7E6E6}\textbf{24.30} & \cellcolor[HTML]{E7E6E6}\textbf{14.91} & \cellcolor[HTML]{E7E6E6}29.92 & \cellcolor[HTML]{E7E6E6}22.30 & \cellcolor[HTML]{E7E6E6}26.09 & \cellcolor[HTML]{E7E6E6}\textbf{66.00} & \cellcolor[HTML]{E7E6E6}\textbf{84.85} & \cellcolor[HTML]{E7E6E6}40.58 & \cellcolor[HTML]{E7E6E6}0.00 & \cellcolor[HTML]{E7E6E6}28.00 & \cellcolor[HTML]{E7E6E6}52.22 & \cellcolor[HTML]{E7E6E6}56.54 & \cellcolor[HTML]{E7E6E6}\textbf{35.62} \\ \midrule
 & \textbf{StreamingLLM} & 15.52 & 22.66 & 36.20 & 29.03 & 22.15 & 10.13 & 27.59 & 21.04 & 26.20 & 64.00 & 81.93 & 38.62 & \textbf{2.00} & 9.50 & 49.78 & 55.46 & 31.99 \\
 & \textbf{H2O+} & 19.10 & 26.62 & 36.82 & 33.23 & 22.66 & 12.83 & 25.13 & 21.93 & 21.09 & 62.50 & 84.65 & 40.60 & 0.00 & 29.00 & 53.33 & 55.99 & 34.09 \\
 & \textbf{SnapKV} & 20.02 & 28.69 & 40.61 & 34.13 & 24.02 & 14.67 & 26.05 & 21.82 & 25.59 & 65.00 & 84.71 & 40.89 & 0.00 & 28.50 & \textbf{54.93} & \textbf{58.44} & 35.50 \\
 & \textbf{Quest} & 19.12 & \textbf{32.08} & \textbf{43.72} & 31.91 & \textbf{24.97} & \textbf{14.83} & \textbf{31.56} & \textbf{22.65} & 26.36 & 66.50 & \textbf{85.09} & 41.69 & 0.00 & \textbf{31.50} & 50.53 & 55.73 & 36.14 \\
\multirow{-5}{*}{\textbf{2048}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}\textbf{20.07} & \cellcolor[HTML]{E7E6E6}30.06 & \cellcolor[HTML]{E7E6E6}42.60 & \cellcolor[HTML]{E7E6E6}\textbf{34.26} & \cellcolor[HTML]{E7E6E6}24.20 & \cellcolor[HTML]{E7E6E6}14.64 & \cellcolor[HTML]{E7E6E6}30.53 & \cellcolor[HTML]{E7E6E6}22.07 & \cellcolor[HTML]{E7E6E6}\textbf{26.61} & \cellcolor[HTML]{E7E6E6}\textbf{67.00} & \cellcolor[HTML]{E7E6E6}84.94 & \cellcolor[HTML]{E7E6E6}\textbf{41.86} & \cellcolor[HTML]{E7E6E6}0.00 & \cellcolor[HTML]{E7E6E6}30.50 & \cellcolor[HTML]{E7E6E6}52.45 & \cellcolor[HTML]{E7E6E6}56.59 & \cellcolor[HTML]{E7E6E6}\textbf{36.15} \\ \midrule
 & \textbf{StreamingLLM} & 19.45 & 27.90 & 41.53 & 28.54 & 20.50 & 10.99 & 26.86 & 20.73 & 26.54 & 58.00 & 75.71 & 34.82 & \textbf{2.50} & 13.00 & 54.31 & 56.41 & 32.36 \\
 & \textbf{H2O+} & \textbf{20.53} & 28.28 & 41.41 & 32.78 & 23.87 & 14.52 & 27.81 & 21.76 & 21.71 & 64.50 & 84.09 & 40.90 & 0.00 & 29.50 & 52.71 & 56.61 & 35.06 \\
 & \textbf{SnapKV} & 20.30 & 28.90 & 42.36 & 33.49 & \textbf{24.46} & \textbf{15.11} & 28.37 & 22.54 & 26.54 & 66.00 & 84.19 & 41.20 & 0.00 & 29.00 & \textbf{54.70} & \textbf{58.69} & 35.99 \\
 & \textbf{Quest} & 19.67 & 29.26 & \textbf{43.90} & 32.72 & 23.61 & 12.61 & \textbf{31.49} & \textbf{22.95} & 26.27 & \textbf{67.00} & \textbf{84.38} & 41.18 & 0.00 & \textbf{31.00} & 51.62 & 55.61 & 35.83 \\
\multirow{-5}{*}{\textbf{4096}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}20.12 & \cellcolor[HTML]{E7E6E6}\textbf{29.33} & \cellcolor[HTML]{E7E6E6}42.88 & \cellcolor[HTML]{E7E6E6}\textbf{34.12} & \cellcolor[HTML]{E7E6E6}24.27 & \cellcolor[HTML]{E7E6E6}15.10 & \cellcolor[HTML]{E7E6E6}30.74 & \cellcolor[HTML]{E7E6E6}22.70 & \cellcolor[HTML]{E7E6E6}\textbf{26.59} & \cellcolor[HTML]{E7E6E6}\textbf{67.00} & \cellcolor[HTML]{E7E6E6}84.14 & \cellcolor[HTML]{E7E6E6}\textbf{41.42} & \cellcolor[HTML]{E7E6E6}0.00 & \cellcolor[HTML]{E7E6E6}29.50 & \cellcolor[HTML]{E7E6E6}53.00 & \cellcolor[HTML]{E7E6E6}56.69 & \cellcolor[HTML]{E7E6E6}\textbf{36.10} \\ \midrule
\multicolumn{19}{c}{\textbf{LLaMA-3.1-8B-Instruct}} \\ \midrule
\textbf{Full} & \textbf{Full cache} & 29.28 & 45.36 & 56.12 & 56.67 & 48.90 & 32.43 & 33.77 & 25.20 & 27.08 & 74.00 & 91.48 & 40.85 & 5.07 & 99.50 & 56.86 & 48.15 & 48.17 \\ \midrule
 & \textbf{StreamingLLM} & 22.49 & 24.93 & 38.64 & 48.48 & 41.41 & 29.43 & 24.08 & 20.24 & 23.38 & 58.50 & 81.60 & 38.22 & 8.00 & 98.50 & 55.32 & 45.49 & 41.17 \\
 & \textbf{H2O+} & 25.93 & 29.59 & 45.53 & 50.59 & 45.75 & 29.24 & 24.50 & 23.28 & 23.56 & 48.50 & 88.90 & 41.39 & 8.16 & \textbf{99.50} & 56.06 & 47.88 & 43.02 \\
 & \textbf{SnapKV} & 26.51 & 39.81 & 52.05 & 54.60 & 46.31 & 26.92 & 24.27 & 23.22 & 24.16 & 65.50 & 90.93 & \textbf{40.31} & 4.39 & 99.00 & 55.66 & \textbf{46.64} & 45.02 \\
 & \textbf{Quest} & 25.82 & 44.01 & 53.99 & \textbf{58.08} & 43.96 & 28.84 & \textbf{32.90} & 24.50 & \textbf{26.80} & \textbf{70.00} & 88.55 & 39.42 & 11.16 & \textbf{99.50} & 51.65 & 42.03 & 46.33 \\
\multirow{-5}{*}{\textbf{512}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}\textbf{27.29} & \cellcolor[HTML]{E7E6E6}\textbf{45.60} & \cellcolor[HTML]{E7E6E6}\textbf{57.43} & \cellcolor[HTML]{E7E6E6}56.20 & \cellcolor[HTML]{E7E6E6}\textbf{48.85} & \cellcolor[HTML]{E7E6E6}\textbf{32.20} & \cellcolor[HTML]{E7E6E6}30.50 & \cellcolor[HTML]{E7E6E6}\textbf{24.82} & \cellcolor[HTML]{E7E6E6}26.53 & \cellcolor[HTML]{E7E6E6}68.00 & \cellcolor[HTML]{E7E6E6}\textbf{91.09} & \cellcolor[HTML]{E7E6E6}40.18 & \cellcolor[HTML]{E7E6E6}\textbf{13.50} & \cellcolor[HTML]{E7E6E6}\textbf{99.50} & \cellcolor[HTML]{E7E6E6}\textbf{56.88} & \cellcolor[HTML]{E7E6E6}45.09 & \cellcolor[HTML]{E7E6E6}\textbf{47.73} \\ \midrule
 & \textbf{StreamingLLM} & 24.69 & 27.84 & 42.65 & 48.20 & 37.82 & 26.50 & 26.80 & 21.55 & 22.40 & 64.00 & 89.42 & 40.65 & 8.00 & 94.50 & 56.18 & 46.33 & 42.35 \\
 & \textbf{H2O+} & 26.24 & 36.30 & 48.47 & 53.97 & 45.78 & 27.08 & 26.11 & 23.59 & 25.05 & 53.00 & 88.54 & 40.88 & 9.05 & \textbf{99.50} & 55.20 & 49.22 & 44.25 \\
 & \textbf{SnapKV} & 27.63 & 41.86 & 52.37 & 55.83 & \textbf{46.39} & 27.69 & 26.39 & 24.06 & 25.49 & 70.00 & \textbf{90.66} & 40.76 & 8.12 & \textbf{99.50} & 55.55 & \textbf{49.58} & 46.37 \\
 & \textbf{Quest} & 27.46 & 43.58 & 54.95 & 57.22 & 44.53 & 29.86 & \textbf{33.64} & \textbf{25.37} & 26.68 & 72.00 & 88.61 & 40.05 & \textbf{9.55} & \textbf{99.50} & 53.92 & 43.82 & 46.92 \\
\multirow{-5}{*}{\textbf{1024}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}\textbf{28.50} & \cellcolor[HTML]{E7E6E6}\textbf{47.35} & \cellcolor[HTML]{E7E6E6}\textbf{54.99} & \cellcolor[HTML]{E7E6E6}\textbf{57.53} & \cellcolor[HTML]{E7E6E6}45.91 & \cellcolor[HTML]{E7E6E6}\textbf{31.63} & \cellcolor[HTML]{E7E6E6}32.52 & \cellcolor[HTML]{E7E6E6}24.51 & \cellcolor[HTML]{E7E6E6}\textbf{26.78} & \cellcolor[HTML]{E7E6E6}\textbf{73.00} & \cellcolor[HTML]{E7E6E6}89.54 & \cellcolor[HTML]{E7E6E6}\textbf{42.12} & \cellcolor[HTML]{E7E6E6}6.49 & \cellcolor[HTML]{E7E6E6}\textbf{99.50} & \cellcolor[HTML]{E7E6E6}\textbf{56.96} & \cellcolor[HTML]{E7E6E6}47.43 & \cellcolor[HTML]{E7E6E6}\textbf{47.80} \\ \midrule
 & \textbf{StreamingLLM} & 25.79 & 32.35 & 45.03 & 49.84 & 36.71 & 23.29 & 29.31 & 22.43 & 26.83 & 69.00 & 86.87 & 38.53 & 7.25 & 83.00 & 43.32 & 46.66 & 41.64 \\
 & \textbf{H2O+} & 28.07 & 40.35 & 53.22 & 54.81 & 44.75 & 31.77 & 28.20 & 23.50 & 26.37 & 64.50 & 90.71 & 41.32 & 6.71 & \textbf{100.00} & 57.97 & 49.19 & 46.34 \\
 & \textbf{SnapKV} & 28.00 & 45.34 & 54.98 & \textbf{57.97} & 45.89 & 30.50 & 28.92 & 24.29 & 26.32 & 71.50 & 89.36 & 40.71 & 6.64 & \textbf{100.00} & \textbf{58.79} & \textbf{49.90} & 47.44 \\
 & \textbf{Quest} & \textbf{29.25} & \textbf{46.05} & \textbf{55.90} & 57.91 & 45.51 & 30.82 & \textbf{34.05} & 24.89 & 26.93 & \textbf{74.00} & \textbf{92.41} & 41.77 & 8.50 & \textbf{100.00} & 54.29 & 45.72 & 48.00 \\
\multirow{-5}{*}{\textbf{2048}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}27.32 & \cellcolor[HTML]{E7E6E6}45.23 & \cellcolor[HTML]{E7E6E6}55.78 & \cellcolor[HTML]{E7E6E6}56.32 & \cellcolor[HTML]{E7E6E6}\textbf{46.96} & \cellcolor[HTML]{E7E6E6}\textbf{32.47} & \cellcolor[HTML]{E7E6E6}33.21 & \cellcolor[HTML]{E7E6E6}\textbf{25.13} & \cellcolor[HTML]{E7E6E6}\textbf{27.04} & \cellcolor[HTML]{E7E6E6}71.00 & \cellcolor[HTML]{E7E6E6}91.25 & \cellcolor[HTML]{E7E6E6}\textbf{42.52} & \cellcolor[HTML]{E7E6E6}\textbf{11.25} & \cellcolor[HTML]{E7E6E6}99.50 & \cellcolor[HTML]{E7E6E6}56.87 & \cellcolor[HTML]{E7E6E6}46.74 & \cellcolor[HTML]{E7E6E6}\textbf{48.04} \\ \midrule
 & \textbf{StreamingLLM} & 25.88 & 43.45 & 55.55 & 49.90 & 37.78 & 28.79 & 28.13 & 22.18 & 26.70 & 62.00 & 78.53 & 36.32 & 8.29 & 74.00 & 58.63 & 45.91 & 42.63 \\
 & \textbf{H2O+} & 28.37 & 45.33 & 55.72 & 56.27 & 47.74 & \textbf{31.63} & 30.91 & 24.15 & 26.89 & 65.50 & \textbf{90.96} & 41.97 & 7.08 & 99.50 & 57.52 & \textbf{49.70} & 47.45 \\
 & \textbf{SnapKV} & 29.17 & 44.03 & 55.40 & 56.14 & 49.01 & 30.86 & 31.36 & 24.73 & 26.85 & 72.00 & 90.31 & 40.58 & 8.68 & 99.50 & \textbf{57.75} & 49.03 & 47.84 \\
 & \textbf{Quest} & \textbf{29.30} & \textbf{46.43} & 54.66 & 55.88 & 47.01 & 30.65 & \textbf{34.54} & \textbf{25.23} & 26.31 & 71.00 & 89.76 & \textbf{43.92} & 6.42 & \textbf{100.00} & 55.25 & 45.06 & 47.59 \\
\multirow{-5}{*}{\textbf{4096}} & \cellcolor[HTML]{E7E6E6}\textbf{\ours} & \cellcolor[HTML]{E7E6E6}28.13 & \cellcolor[HTML]{E7E6E6}45.48 & \cellcolor[HTML]{E7E6E6}\textbf{55.81} & \cellcolor[HTML]{E7E6E6}\textbf{56.48} & \cellcolor[HTML]{E7E6E6}\textbf{49.41} & \cellcolor[HTML]{E7E6E6}30.46 & \cellcolor[HTML]{E7E6E6}33.57 & \cellcolor[HTML]{E7E6E6}24.77 & \cellcolor[HTML]{E7E6E6}\textbf{27.10} & \cellcolor[HTML]{E7E6E6}\textbf{72.50} & \cellcolor[HTML]{E7E6E6}90.26 & \cellcolor[HTML]{E7E6E6}41.45 & \cellcolor[HTML]{E7E6E6}\textbf{9.32} & \cellcolor[HTML]{E7E6E6}99.50 & \cellcolor[HTML]{E7E6E6}55.88 & \cellcolor[HTML]{E7E6E6}46.53 & \cellcolor[HTML]{E7E6E6}\textbf{47.92} \\ \bottomrule
\end{tabular}%
}

\end{table*}
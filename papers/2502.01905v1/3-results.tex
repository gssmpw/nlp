\section{Relative gain in opinion shares in a real-world network}
\label{bitcoin}
As a first step we explore the extent to which knowledge of negative ties benefits a controller in a real-world influence maximisation setting. To do this, we consider a real-world Bitcoin trust network \cite{kumar2016edge,kumar2018rev2}, where edges are labelled with positive and negative signs. The network is formed by members of the Bitcoin OTC platform who rate each other based on their interactions and transaction experiences. Ratings (or votes) show the extent to which a member is trusted in the community, and hence it forms their reputation on the platform for future transactions. 
Here we examine the extent to which relationships of distrust, if unobserved, can jeopardise influence maximisation efforts.   

The Bitcoin network is a weighted-directed graph of 5.8K nodes. Edges are weighted between -10 and +10, where -10 implies ultimate distrust and +10 stands for complete trust. 
For our experiment, we focus on the single largest connected component of size 4.7K nodes that contains $\approx 94\%$ of all edges. 
Within this component, $\approx 8.6\%$ of all edges are negatively weighted. In our model, influence flows in the direction opposite to that of rating, i.e. if a user $i$ gives a score of +10 to user $j$, we assume that user $i$ would copy the opinion state of user $j$ with strength $w_{ji}=10$. In case of a negative score (-10), user $i$ adopts the opposing state with strength $w_{ji}=-10$. 

We then run $GA$ and $GA^{(+)}$ on the network to measure the advantage of using a negative-tie aware optimisation process. This is obtained as the relative gain in vote-shares $[X_{A}^{(GA)}/X_{A}^{(GA+)} - 1]$ and yields the the fraction of vote-shares a controller can gain from a negative-tie aware approach. In the rest of the paper, we use this metric as a standard to measure the advantage of navigating negative ties in these settings.

 
We assume that the competing controller is naïve and targets the network indiscriminately with uniform allocations $p_{B,i} = 1$ (budget $B_{B} = N$). Intuitively, it would make sense to assume that the $GA$ algorithm would perform better in comparison to $GA^{(+)}$ if controller B was aware of negative edges and adopted a negative-tie aware strategy. By assigning an indiscriminate strategy to B we control for any effect of the competitor strategy on vote-share gains and tease out the gain in vote-shares that is obtained from following a negative-tie aware approach. Later in the paper, we explore the effect of competitor strategy on vote-share gains.

For our simulations, we initialise $p_{A}$ with a uniform random vector (constrained by $B_{A}$) and use the gradient to improve the distribution vector until it converges to an optimum. The learning rate is set as $\eta=N$ and 
an approximation factor of $\mu = 10^{-7}$ is used to terminate the algorithms. 
Simulation results are summarised in \cref{Fig-1} for the instance $B_{A} = N/4$ as the budget ratio $B_{A}/B_{B}=0.25$ yields the highest gain in vote-shares (see \cref{appendix-rem}).

In \cref{Fig-1a} we illustrate the performance of the $GA$ algorithm on the Bitcoin OTC network. In particular, we show the convergence of the algorithm over the final $500$ steps. Note how the allocation vector $p_{A}^{(t)}$ is incrementally changed at each time step $t$ by stepping $\eta\nabla_{p_{A}^{(t)}}X_{A}$ in the direction of the gradient, where $\eta$ is the step-length. The resulting vector is then projected back onto an $N$-simplex to preserve the budget constraint $\sum_{i}^{N} p_{A,i} = B_{A}$.  
%The axes here represent the fraction of resources given to nodes with negative links $\epsilon_{A}$ and to the rest of the network with strictly positive edges $(1-\epsilon_{A})$. 

In \cref{Fig-1b} we illustrate the evolution of vote-shares using both algorithms over time $t$. We find that when using $GA$ the vote-share monotonically increases to a final configuration of $X_{A}^{*(GA)} \approx 0.3908$. While $GA^{(+)}$ has a suboptimal outcome and converges to $X_{A}^{*(GA+)} = 0.3582$, resulting in an overall gain of $\approx 9\%$ for $GA$. Thus highlighting that even in the presence of a naïve competitor, it is useful to consider negative edges when maximising influence in a signed network.


\begin{figure}
  \begin{subfigure}[b]{0.475\textwidth}
  \centering
    \includegraphics[width=\textwidth]{figures/GA_Bitcoin.eps}
    \caption{}
    \label{Fig-1a}
  \end{subfigure}
   \hspace{1em}
  \begin{subfigure}[b]{0.475\textwidth}
  \centering
    \includegraphics[width=\textwidth]{figures/Bitcoin_ua.eps}
    \caption{}
    \label{Fig-1b}
  \end{subfigure}
  \caption{Simulations are performed on the single-largest connected component ($N = 4734$ nodes) of the Bitcoin OTC network. Panel (a) shows step-wise allocations to nodes in the $GA$ algorithm. The axes represent the total allocations $\alpha$ to nodes with negative links and the total allocations $\beta$ to nodes with strictly positive edges.   Panel (b) shows the change in vote-shares ($X_{A}$) 
  obtained by both algorithms ($GA$ and $GA^{(+)}$) as a function of the number of iterations performed. Controller B passively targets all nodes in the network, uniformly, with a budget $B_{B} = N$. Controller A here has only a quarter of the resources available to B, $B_{A} = B_{B}/4 = N/4$. Algorithms are terminated using an approximation factor of $\mu = 10^{-7}$. The learning rate is initialised at $\eta=N$.}
  \label{Fig-1}
\end{figure}



\section{Numerical analysis}
\label{numerical}
We now analyse the problem more thoroughly under controlled settings.
In the model introduced above, there are three salient factors that can affect the difference in performance of both algorithms (\emph{GA} and ${GA^{(+)}}$). These are the (a) topology of the network ($L$ and $L^{(+)}$), (b) resource conditions ($B_{A}/B_{B}$) and (c) competitor strategies ($p_{B}$). Below, we systematically explore the effect of each of these factors on the gain in vote-shares.  

\subsection{Role of network topology}
\label{hetero}

First, we investigate the effect of network topology. Specifically, we examine how the placement and distribution of negative edges in the network can affect gain in vote-shares. To do this we generate synthetic networks that vary in terms of the distribution of negative ties. For our analysis, we consider undirected networks of size N=1000 nodes with an average positive degree ${\textstyle\sum}_{i}^N k_{a,i}/N = \langle k_{a} \rangle =16$ and average negative degree ${\textstyle\sum}_{i}^N k_{b,i}/N =\langle k_{b} \rangle =4$. Here $k_{a,i} = {\textstyle \sum}_{i}^{{\cal N}_{i}^+} w_{ji}$ and $k_{b,i} = - {\textstyle \sum}_{i}^{{\cal N}_{i}^-} w_{ji}$ represent the total positive strength and the total negative strength on a node $i$. We set $\langle k_{a} \rangle$ and $\langle k_{b} \rangle$ such that only $20\%$ of all edges in the network are negative. We keep this fraction low, first and foremost, to imitate real-world networks \cite{leskovec2010signed}, and secondly to determine the importance of considering negative ties even when they are sparingly present. 

We generate synthetic signed networks for our analysis by first generating a network of N=1000 nodes with all positive edges where $\langle k_{a} \rangle =16$. We then add negative edges to this network to form our signed network. As we are interested to determine how the structure of the networks impact the efficiency of the negative-tie aware approach, we vary the distribution of negative edges in the network by using a parameter $p$ which determines the fraction of nodes in the network that have negative edges. Thus for lower values of $p$, negative edges are concentrated on a few nodes, whereas for $p=1$, every node in the network has at least one negative edge.



Signed networks for our experiment are synthesised by merging independently constructed positive and negative graphs. Merging the two graphs helps us control the distribution and placement of the negative edges.
The positive component has a size of N=1000 nodes with $\langle k_{a} \rangle =16$. The size of the negative graph is given by $p \cdot N$, where $p$ indicates the fraction of nodes in the network with a negative edge. Once the negative component is generated it is superimposed on the positive graph, by first choosing $p\cdot N$ nodes from the positive graph and then aligning them with the nodes of the negative graph to combine both subgraphs, i.e. each node from the negative graph is mapped to a node in the positive component, such that the node retains both positive and negative edges (from both subgraphs). The placement of negative edges is controlled by the way in which nodes are chosen while merging the networks\footnote{Discussed later in the section.}. Note that while combining the subgraphs, if two nodes have both a positive and a negative edge between them, we then keep the positive edge and ignore the negative tie. 

To perform our analysis on a broad spectrum of network structures, we vary the heterogeneity of degree distribution in the subgraphs. In this instance, subgraphs can be either homogeneous regular graphs \cite{newman2011structure} or heterogeneous core-periphery type networks \cite{rombach2017core} with bi-modal degree distributions\footnote{We use the configuration model \cite{newman2018networks} to generate the network structures.}. We then combine positive and negative subgraphs with different degree-distributions to generate three distinct classes of networks for our experiment.

\textbf{Reg-Reg :} Our benchmark is a homogeneous network where both positive and negative subgraphs are regular graphs (Reg-Reg). The positive component is a $k^+$-regular graph where $k^+=\langle k_{a} \rangle = 16$. For the negative subgraph, we generate homogeneous networks of size $p \cdot N$ and degree $k^- = \langle k_b \rangle / p$, where $p$ is varied between $0.1 \leq p \leq 1$ \footnote{Where $k^{-} \notin \mathbb{Z_+}$, we generate a $k^{-}$-regular graph and add ties to a fraction of randomly selected nodes to increase their negative degree by 1 ($k^{-} + 1$). This roughly preserves the average negative degree and consequently the percentage of negative edges in the network.}. Subgraphs are then combined by merging nodes from the negative subgraph with randomly chosen nodes from the positive subgraph.

\textbf{CP-Reg :} In this class of networks, the positive graphs have a heterogeneous core-periphery structure where half of all nodes (N/2) have high-degrees $k_{a,high} = 30$ and the rest have low-degrees $k_{a,low} = 2$. The negative component here has a regular or pseudo-regular structure (as described in the earlier section). 
We adopt three different approaches to merge the positive and the negative graph components, which varies the placement of negative ties in the network. 
Negative edges are either preferentially added to: (i) high-degree nodes in the positive component (i.e. only nodes with high-degrees in the positive component are chosen for merging (labelled CP-Reg-High)), (ii) low degree nodes in the positive component (CP-Reg-Low) or (iii) negative edges are randomly placed (CP-Reg-Rand).

\textbf{Reg-CP :} Our final set of networks have a homogeneous positive component and is a $k^{+}$-regular graph where $k^{+} = \langle k_{a} \rangle = 16$, and the negative component has a core-periphery structure with $\langle k_{b} \rangle = 4$. Nodes in the negative subgraph are split equally into two classes: (i) high-degree nodes ($k_{b,high} = 2(k_{b}/p-1)$) and (ii) low-degree nodes ($k_{b,low} = 2$). Here $p$ ranges from $0.15 \leq p \leq 1$ as it is not feasible to form core-periphery structures for $p=0.1$.

For each class of networks discussed above, we run simulations over 10 networks and summarise the results in \cref{Fig-2a}. We assume controller B is unaware of negative edges and passively targets each node with unit resource $p_{B,i}  = 1$ $\forall i \in \{1,2,..,N\}$ and controller A has a budget $B_{A} = N$.


\textbf{Scale-free and random networks}
We also extend our study to commonly studied Erdös-Rényi (ER) graphs \cite{erdHos1960evolution} and Barabási-Albert (BA) networks \cite{barabasi2013network}. Here the positive subgraph is either a regular graph (Reg) or a scale-free network (SF), and the negative component varies between a regular graph (Reg), a random graph (ER) and a scale-free network (SF).
We assume heterogeneity is analogous to degree variance \cite{bell1992note}, and is gradually increased in the negative components by replacing regular networks (Reg-Reg) with random graphs (Reg-ER) and then with scale-free networks (Reg-SF). In each case, the placement of negative edges is random. Finally, as before, results are compared against the homogeneous Reg-Reg graphs where both positive and negative components are k-regular networks, i.e. $ k = k^{+} + k^{-}=\langle k_{a} \rangle + (\langle k_{b} \rangle/p)$. 
We present the results in \cref{Fig-2b}.  

\begin{figure}
  \begin{subfigure}[b]{0.475\textwidth}
  \centering
    \includegraphics[width=\textwidth]{figures/Plot1_Gain_vs_kb.eps}
    \caption{}
    \label{Fig-2a}
  \end{subfigure}
   \hspace{1em}
  \begin{subfigure}[b]{0.475\textwidth}
  \centering
    \includegraphics[width=\textwidth]{figures/Plot1_2_Gain_vs_kb.eps}
    \caption{}
    \label{Fig-2b}
  \end{subfigure}
  \caption{Figure showing relative gain in vote-shares as the distribution of negative edges (p) is varied. Panel (a) shows the effect of heterogeneity of positive (CP-Reg) and negative edges (Reg-CP), compared against networks where both positive and negative components are regular (Reg-Reg). Similarly, panel (b) examines the role of heterogeneity in other commonly studied networks. The heterogeneity of negative edges is varied as the negative graph is changed from a regular (Reg-Reg) to a random (Reg-ER), and finally, a scale-free (Reg-SF) network. Heterogeneity of the positive component is achieved by replacing the regular positive graph (Reg-Reg) with a scale-free network (SF-Reg). 
  For all simulations, networks of size $N=1000$ with $\langle k_{a} \rangle = 16$ and $\langle k_{b} \rangle = 4$ are used. Results are averaged over 10 instances and error bars depict 95\% confidence intervals. Note that the panels are scaled differently for clarity.}
  \label{Fig-2}
\end{figure}

\cref{Fig-2} highlights the effect of degree heterogeneity on the gain in vote-shares as the distribution of negative edges $p$ is varied.
In general, we find that the relative gain in vote-shares first increases and then decreases as negative edges are distributed more evenly in the network. For networks with a homogeneous negative component the relative gain reduces to $0$. An analytical explanation of this effect is provided in \cref{gain0}.    


In \cref{Fig-2a}, we find that networks with a positive core-periphery component and a regular negative subgraph (CP-Reg) yield the highest relative gain in vote-shares. Furthermore, relative gain is higher when placement of negative ties are degree-correlated (as in CP-Reg-High and CP-Reg-Low) compared to when randomly placed in the network (CP-Reg-Rand). 
A controller achieves maximum relative gain in vote-shares when negative edges are confined to nodes of a single degree-type ($p=0.5$), high-degree (CP-Reg-High) or low-degree nodes (CP-Reg-Low).
The maximum gain in vote-shares is $9.5\%$ when only hub nodes (with high positive degrees) have negative ties (CP-Reg-High). Similarly gain is $9.4\%$ when only peripheral nodes (with low positive degrees) have negative ties (CP-Reg-Low) . 
We observe similar trends in \cref{Fig-2b} where a maximum gain of $4.5\%$ is obtained in networks with a heterogeneous scale-free positive component and a homogeneous regular graph (SF-Reg). This result is close to the $6.9\%$ gain observed in CP-Reg-Rand networks where negative edges are randomly added to nodes (as in SF-Reg). We also find that substituting negative regular subgraphs with more heterogeneous components, such as a random graph (ER) or a scale-free network (SF), progressively decreases gain in vote-shares. Therefore suggesting that gains are high only in networks where nodes vary significantly based on their positive degrees and where negative ties are uniformly spread to about $50\%$ of the population. 




% \begin{figure}[H]
%   \begin{subfigure}[b]{0.475\textwidth}
%   \centering
%     \includegraphics[width=\textwidth]{figures/allo_nbrs_kb.eps}
%     \caption{}
%     \label{Fig-3a}
%   \end{subfigure}
%   \hspace{1em}
%   \begin{subfigure}[b]{0.475\textwidth}
%   \centering
%     \includegraphics[width=\textwidth]{figures/allo_nbrs.eps}
%     \caption{}
%     \label{Fig-3b}
%   \end{subfigure}
%   \caption{Figure showing dependence of mean optimal allocations $\bar {P_{A}}$ on the number of (a) nodes using GA 
%   on nodes given the number of neighbours with negative edges $j_{n}$. Panels (a) and (b) represent CP-Reg-High and CP-Reg-Low networks respectively. As before, networks are of size 1000 nodes with $\langle k_{a} \rangle = 16$ and $\langle k_{b} \rangle = 4$. Results are shown for values of $p \in [0.1,1]$. Simulations are averaged over 10 instances.}
%   \label{Fig-3}
% \end{figure}




%discuss results
% \cref{Fig-2} shows that relative gain from negative-tie-aware optimisation is higher when the 


\subsection{Role of resource conditions and competitor allocations}
\label{resources}
We now examine how resource availability ($B_{A}/B_{B}$) impacts the relative gain in vote-shares. 
Preliminary results indicate insignificant gains ($\leq1\%$) when the controller has more budget than its competitor $B_{A,i} > B_{B,i}$. This shows that controllers with large budgets can only marginally gain from exploiting their knowledge of negative ties in the network and therefore we focus our analysis on conditions of lower resources, i.e. $B_{A,i} \leq B_{B,i}$, in the remainder of the section.

To determine if resource conditions can further exacerbate the difference in vote-shares for $GA$ and $GA^{(+)}$ and to make our analysis more effective, we restrict our investigation to topologies that yielded the highest gains in the previous section. Thus, we choose networks with heterogeneous positive components and homogeneous negative subgraphs (CP-Reg). Simulations are performed only on CP-Reg-High networks, for conciseness.  

The budget for controller B is fixed at $B_{B,i} = 1$ per node for the rest of the experiments in this section. Controller A has a per node budget of $0.05 \leq B_{A,i} \leq B_{B,i}$.
For simplicity, controller B continues to target the network passively. We consider three strategies for controller B to allocate resources: (i) avoid nodes with negative edges, (ii) only target nodes with negative edges, and (iii) target all nodes uniformly. Note that in each case, B evenly distributes its resources over all targeted nodes. In the first two cases, we assume controller B is aware of negative edges, and decides to either target or avoid them. This allows us to examine how the gain in vote-shares depends on the adversary's knowledge of the network structure.


Gain in vote-shares for each case is presented in \cref{Heatmap-1,Heatmap-2,Heatmap-3}. Here \cref{Heatmap-1} illustrates the gain in vote-shares when controller B avoids nodes with negative edges. In \cref{Heatmap-2}, controller B exclusively targets nodes with negative ties and in \cref{Heatmap-3} controller B targets the network uniformly.

From the numerical experiments presented in \cref{Heatmap-1,Heatmap-2,Heatmap-3}, we make the following observations. First, we find that controller A can lose considerable vote-shares by not adopting a negative-tie aware approach when controller B avoids negative edges.
On the other hand, the difference in vote-shares is the least when controller B deliberately targets nodes with negative edges. 

% Once again, we find that in all three cases, maximum gain is obtained when negative ties are restricted to high-degree nodes in the network ($p=0.5$).
We observe that gain in vote-shares first increases with $p$, and then gradually decreases to $0$.  
In \cref{Heatmap-1}, a maximum gain of $17.85\%$ is observed when the budget ratio is $B_{A}/B_{B} = B_{A} = 0.3$.
In \cref{Heatmap-2}, gain is maximum ($5.75\%$) when controllers have equal budgets $B_{A} = B_{B} = 1$, and we note that difference in vote-shares is typically positively correlated with the budget $B_{A}$.
Finally in \cref{Heatmap-3}, we find that the gain in vote-shares reaches a maximum of $10.32\%$ at $B_{A}=0.6$.



%RESULTS

\begin{figure}
  \begin{subfigure}[b]{0.45\textwidth}
    \includegraphics[width=\textwidth]{figures/Heatmap1.eps}
    \caption{}
    \label{Heatmap-1}
  \end{subfigure}
\hspace{2em}
  %
  \begin{subfigure}[b]{0.45\textwidth}
    \includegraphics[width=\textwidth]{figures/Heatmap2.eps}
    \caption{}
    \label{Heatmap-2}
  \end{subfigure}

  \begin{subfigure}[b]{0.45\textwidth}
    \includegraphics[width=\textwidth]{figures/Heatmap3.eps}
    \caption{}
    \label{Heatmap-3}
  \end{subfigure}
   \hspace{2em}
  %
  \begin{subfigure}[b]{0.45\textwidth}
    \includegraphics[width=\textwidth]{figures/Heatmap4.eps}
    \caption{}
    \label{Heatmap-4}
  \end{subfigure}
\caption{Panel showing relative gain in vote-share as $p$ and budget ratios are varied against different competitor strategies. We examine three cases, controller B: (a) avoids nodes with negative ties, (b) targets nodes with negative ties and (c) targets all nodes uniformly. For all cases, controller B has a fixed budget $B_{B}=1$.
Lastly, in (d) we quantify gain in vote-share as controller B changes its strategy by varying the fraction of budget $\epsilon_{b}$ used to target nodes with negative edges. Here both controllers have fixed budgets where $B_{A} = 0.3$ and $B_{B}=1$. 
Results are averaged over 10 CP-Reg-High networks of size $N = 1000$ nodes and $\langle k_{a} \rangle =16$, $\langle k_{b} \rangle = 4$. }
\end{figure}

Next, we examine the effect of competitor strategies on relative gain in vote-shares. We fix the available resources for both controllers at $B_{A} = B_{B} = N$ to reduce any impact of uneven budgets on the results. Once again we consider CP-Reg-High networks. 

We define competitor strategy for controller B, using $\epsilon_{B}$, which is the fraction of resources B allocates to nodes with negative edges. It is assumed that resources are always uniformly spread over targeted nodes, where $\epsilon_{B} \cdot B_{B}/p$ amount of influence is applied on every node that has a negative link, while $(1-\epsilon_{B}) \cdot B_{B}/(1-p)$ is given to the rest of the nodes (with strictly positive edges).
We gradually vary $0 \leq \epsilon_{B} \leq 1$. Here boundary conditions correspond to instances where controller B either strictly targets nodes with negative ties ($\epsilon_{B}=1$) or avoids them completely ($\epsilon_{B}=0$). Results are shown in \cref{Heatmap-4}. 

We observe that gain in vote-shares is high only when a fraction of the population has negative ties $p \leq 0.75$ and controller B targets these nodes (with negative ties) with less resources. As B discriminates between nodes with negative ties and the rest of the network, controller A stands to gain more from following a negative-tie aware approach.
The maximum gain of $10.13\%$ is obtained when controller B allocates a quarter of its budget $p_{B} = 0.25 \cdot B_{B}$ to all hub-nodes with negative edges where $p=0.5$.




\section{Analytical support}
\label{mean-field}
We now propose an analytical framework in support of our numerical results. Note that, obtaining closed-form analytical solution for \cref{optimisation} on networks with complex structures can be challenging. We simplify the problem by adopting a degree-based mean-field approach that approximates system dynamics and helps us obtain analytical expressions for optimal allocations. This approach works by grouping nodes with the same positive ($k_{a}$) and negative degrees ($k_{b}$). Here nodes are assigned $k_{a}$ and $k_{b}$ independently of each other, and there is no correlation between them. We then assume that the opinion state of nodes $x_{k_{a}k_{b}}$ is correlated to their overall degree ($\{k_{a},k_{b}\}$). In doing so, we homogenise the effect of a heterogeneous neighbourhood on the state of a node, which increases the  tractability of the problem. Additionally, we assume external controllers A and B uniformly target all nodes within a given class (with $a_{k_{a}k_{b}}$ and $ b_{k_{a}k_{b}}$ allocations respectively), which further reduces the degrees of freedom in our problem. 

We first derive the state of a node, with positive degree $k_{a}$ and negative degree $k_{b}$, from the steady-state equation \cref{steady-state} as
\begin{align}
    x_{k_{a}k_{b}} = \frac{a_{k_{a}k_{b}} + k_{b} + k_{a} \langle x_{a} \rangle - k_{b} \langle x_{b} \rangle}{k_{a} + k_{b} + a_{k_{a}k_{b}} + b_{k_{a}k_{b}}}.
    \label{ss}
\end{align}
Here $\langle x_{a} \rangle$ and $\langle x_{b} \rangle$ represent the expected state of a neighbouring node across a positive and a negative edge, respectively. 
Assuming that $P_{a} (k_{a})$  and $P_{b} (k_{b})$ describe the positive and negative degree distributions of a network, the expected behaviour of a neighbour at the end of a positive or a negative edge ($\langle x_{a} \rangle$ and $\langle x_{b} \rangle$) can be obtained as

\begin{align}
\begin{aligned}
     & \langle x_{a} \rangle = \sum_{k_{b}} P_{b} \sum_{k_{a}} P_{a} \frac{k_a}{\langle k_{a} \rangle} x_{k_{a}k_{b}} \\ 
     & \langle x_{b} \rangle = \sum_{k_{a}} P_{a} \sum_{k_{b}} P_{b} \frac{k_b}{\langle k_{b} \rangle} x_{k_{a}k_{b}}
\end{aligned}
\label{nbr}
\end{align}


% \begin{align}
% \begin{array}{l}
%      & \langle x_{a} \rangle = \sum_{k_{b}} P_{b} \sum_{k_{a}} P_{a} \frac{k_a}{\langle k_{a} \rangle} x_{k_{a}k_{b}} \\ 
%      & \langle x_{b} \rangle = \sum_{k_{a}} P_{a} \sum_{k_{b}} P_{b} \frac{k_b}{\langle k_{b} \rangle} x_{k_{a}k_{b}.}
% \end{array}
% \label{nbr}
% \end{align}
Note that here the term $k_{a}/\langle k_{a} \rangle$ (or $k_{b}/\langle k_{b} \rangle$) ensures that a node with higher positive (or negative) degree $k_{a}$ (or $k_{b}$) has a higher chance of appearing as a neighbour exerting positive influence.

Now, using \cref{ss} and \cref{nbr} we obtain the following self-consistency relations,
\begin{align}
\begin{aligned}
     & \langle x_{a} \rangle = \langle \frac{k_{a}}{\langle k_{a} \rangle} \frac{a_{k_{a}k_{b}} + k_{b}}{\Delta} \rangle + \langle \frac{k_{a}^2}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle \langle x_{a} \rangle - \langle \frac{k_{a}k_{b}}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle \langle x_{b} \rangle 
     \\ 
     & \langle x_{b} \rangle = \langle \frac{k_{b}}{\langle k_{b} \rangle} \frac{a_{k_{a}k_{b}} + k_{b}}{\Delta} \rangle + \langle \frac{k_{a}k_{b}}{\langle k_{b} \rangle} \frac{1}{\Delta} \rangle \langle x_{a} \rangle - \langle \frac{k_{b}^2}{\langle k_{b} \rangle} \frac{1}{\Delta} \rangle \langle x_{b} \rangle
\end{aligned}
\end{align}
% \begin{align}
% \begin{array}{l}
%      & \langle x_{a} \rangle = \langle \frac{k_{a}}{\langle k_{a} \rangle} \frac{a_{k_{a}k_{b}}+k_{b}}{\Delta} \rangle + \langle \frac{k_{a}^2}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle \langle x_{a} \rangle - \langle \frac{k_{a}k_{b}}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle \langle x_{b} \rangle 
%      \\ \\ 
%      & \langle x_{b} \rangle = \langle \frac{k_{b}}{\langle k_{b} \rangle} \frac{a_{k_{a}k_{b}}+k_{b}}{\Delta} \rangle + \langle \frac{k_{a}k_{b}}{\langle k_{b} \rangle} \frac{1}{\Delta} \rangle \langle x_{a} \rangle - \langle \frac{k_{b}^2}{\langle k_{b} \rangle} \frac{1}{\Delta} \rangle \langle x_{b} \rangle .
% \end{array}
% \end{align}
These can be further solved to finally arrive at the mean-field expressions 
\begin{align}
    \begin{split}
       \langle x_{a} \rangle &= \Bigg[\langle \frac{k_{a}}{\langle k_{a} \rangle} \frac{a_{ab}+k_{b}}{\Delta} \rangle - \frac{\langle \frac{k_{a}k_{b}}{\langle k_{a} \rangle} \frac{1}{\Delta}\rangle \langle \frac{k_{b}}{\langle k_{b} \rangle} \frac{a_{ab}+k_{b}}{\Delta} \rangle }{1 + \langle \frac{k_{b}^2}{\langle k_{b} \rangle} \frac{1}{\Delta} \rangle}\Bigg]
    \Bigg[1 - \langle \frac{k_{a}^2}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle + \frac{\langle \frac{k_{a}k_{b}}{\Delta} \rangle^2 \frac{1}{\langle k_{a} \rangle \langle k_{b} \rangle}}{1 + \langle \frac{k_{b}^2}{\langle k_{b}\rangle} \frac{1}{\Delta} \rangle}\Bigg]^{-1}, \\  
    \text{and,} \qquad \langle x_{b} \rangle  &= \Bigg[\langle \frac{k_{b}}{\langle k_{b}\rangle} \frac{a_{ab}+k_{b}}{\Delta} \rangle + \frac{\langle \frac{k_{b}}{\langle k_{b} \rangle} \frac{k_{a}}{\Delta}\rangle \langle \frac{k_{a}}{\langle k_{a} \rangle} \frac{a_{ab}+k_{b}}{\Delta} \rangle}{1 - \langle \frac{k_{a}^2}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle}\Bigg]
    \Bigg[1 + \langle \frac{k_{b}^2}{\langle k_{b} \rangle} \frac{1}{\Delta} \rangle + \frac{\langle \frac{k_{a}k_{b}}{\Delta} \rangle^2 \frac{1}{\langle k_{a} \rangle \langle k_{b} \rangle}}{1 - \langle \frac{k_{a}^2}{\langle k_{a} \rangle} \frac{1}{\Delta} \rangle}
    \Bigg]^{-1}.
    \end{split}
    \label{xa-xb}
\end{align}
Note that here $\Delta = a_{k_{a}k_{b}} + b_ {k_{a}k_{b}} + k_{a} + k_{b}$. 

Using the above, an approximation for the final vote-share at equilibrium can be obtained as
\begin{equation}
    X_{A} = \langle x_{k_{a},k_{b}} \rangle = \langle \frac{a_{ab}+k_{b}}{\Delta} \rangle + \langle \frac{k_{a}}{\Delta} \rangle \langle x_{a} \rangle - \langle \frac{k_{b}}{\Delta} \rangle \langle x_{b} \rangle,
    \label{XA-MF}
\end{equation}
where expressions for $\langle x_{a} \rangle$ and $\langle x_{b} \rangle$ come from \cref{xa-xb}. 

Using \cref{XA-MF} to derive closed-form analytical expressions for optimal allocations is still a complex task. Thus, we proceed with two alternative approaches. The first method uses a semi-analytical approach to obtain optimal allocations in simplified network structures using \cref{XA-MF}. 
Alternatively, we study the problem under limiting conditions, which further streamlines the analytical approach by adding more assumptions to the model. 

\subsection{Semi-analytical approach}
\label{semi-analytical}
We approximate optimal allocations by solving \cref{XA-MF} numerically in three types of networks, (i) Reg-Reg, (ii) CP-Reg-High and (iii) Reg-CP. 

In Reg-Reg networks, we have two types of nodes:   
(i) $p \cdot N$ nodes with $k_{a,1}=16$ positive edges and $k_{b,1}=4/p$ negative edges and the remaining (ii) $(1-p) \cdot N$ nodes with $k_{a,2}=16$ positive edges and no negative ties $k_{b,2}=0$. 
We assume controller A distributes $\epsilon_{A}$ fraction of its budget equally over all nodes with negative edges, $a_{k_{a,1}k_{b,1}} = \epsilon_{A} \cdot B_{A}/p$. The rest of the nodes receive $a_{k_{a,2}k_{b,2}} = (1-\epsilon_{A}) \cdot B_{A}/(1-p)$ allocations.


In CP-Reg-High networks, nodes can be segregated in two or three classes depending on the value of $p$. The positive component in these networks have a core-periphery structure with high-degree nodes $k_{a,1}=30$ and low-degree nodes $k_{a,2}=2$.
When $p=0.5$, we have two groups of nodes, (i) high-degree nodes with negative links and (ii) low degree nodes with only positive edges. As described earlier, resources are split into $\epsilon_{A}$ which is allocated to high-degree nodes and $(1-\epsilon_{A})$ given to low-degree nodes. For $p<0.5$, we have three groups of nodes, (i) high-degree nodes with negative links $(k_{a,1}+k_{b,1})$, (ii) high-degree nodes with only positive links $(k_{a,1})$ and (iii) low degree nodes with only positive links $(k_{a,2})$. The same can be derived for $p>0.5$, where all high-degree nodes and a fraction of low-degree nodes have negative links. In each case, the budget is split over three groups as $\epsilon_{A,1}$, $\epsilon_{A,2}$ and $[1 - ( \epsilon_{A,1}+\epsilon_{A,2})]$. We simultaneously solve for $\epsilon_{A,1}$ and $\epsilon_{A,2}$ to determine the optimal allocation on the network. The amount of budget allocated to nodes with negative edges is given by $\epsilon_{A} = \epsilon_{A,1}$ when $p<0.5$ and by $\epsilon_{A} = \epsilon_{A,1}+\epsilon_{A,2}$ when $p>0.5$. 



\begin{figure}
  \begin{subfigure}[b]{0.475\textwidth}
    \includegraphics[width=\textwidth]{figures/MF_epsilon.eps}
    \caption{}
    \label{MF-1}
  \end{subfigure}
  \hspace{1em}
  \begin{subfigure}[b]{0.475\textwidth}
    \includegraphics[width=\textwidth]{figures/MF_ua.eps}
    \caption{}
    \label{MF-2}
  \end{subfigure}
  \caption{Figures showing (a) the optimal allocations and (b) the vote-shares at equilibrium for values of $p \in [0.075,0.975]$. Results shown for three types of networks : (i) Reg-Reg, (ii) CP-Reg and (iii) Reg-CP. Analytical solutions are shown using dashed lines.
  Numerical results are obtained through simulations on networks of size N=1000 nodes and averaged over 10 networks. Error bars are shown for $95\%$ confidence intervals.}
  \label{MF}
\end{figure}

Optimal allocations are derived in Reg-CP networks using a comparable approach. Nodes form three clusters, (i) $p_{1}$ nodes with high-negative-degrees $k_{b,1} = 2(\langle k_{b} \rangle/p -1)$ and $k_{a,1}$ positive edges, (ii) $p_{2}$ nodes with low-negative-degree $k_{b,2} = 2$ and $k_{a,2}$ positive edges, and finally (iii) nodes with only $k_{a,3}$ positive edges. Here all classes of nodes have the same positive degree $k_{a,1} = k_{a,2} = k_{a,3} = 16$ and the fraction of nodes with negative edges are given as $p=p_{1}+p_{2}$. 
Budget allocation for each class of nodes is given as $a_{k_{a,1}k_{b,1}}=\epsilon_{A,1}/p_{1}$, $a_{k_{a,2}k_{b,2}}=\epsilon_{A,2}/p_{2}$ and $a_{k_{a,3}k_{b,3}}=(1 - \epsilon_{A})/(1-(p_{1}+p_{2}))$, where nodes with negative edges receive $\epsilon_{A} = \epsilon_{A,1}+\epsilon_{A,2}$ fraction of the budget.

For each type of network, we obtain related expressions using \cref{XA-MF}, which we solve semi-analytically to obtain optimal allocations $\epsilon_{A}^*$ and maximum vote-shares $X_{A}^*$. Results are presented in \cref{MF} against previous numerical results for comparison. 


We compare our analytical results to numerical results obtained in the networks of size $N=1000$ nodes with $\langle k_{a} \rangle=16$ and $\langle k_{b} \rangle=4$, and are generated using the approach described in \cref{hetero}. Distribution of negative ties is controlled by varying $p$ between $0.075\leq p \leq 0.975$. In all cases, controller B targets all nodes equally $b_{k_{a,i}k_{b,i}} = 1$, $\forall i \in \{1,...,m\}$ where there are $m$ types (or groups) of nodes. 

Comparison between the semi-analytical and numerical results in \cref{MF-1,MF-2} shows that our numerical results are in good agreement with the theoretical solutions. There is, however, some discrepancy in vote-share results (\cref{MF-2}), which can be attributed to uniform allocations to each group of nodes in the analytical approach. The numerical method in contrast allows more sophisticated, flexible allocations to nodes of the same type, thereby realising higher vote-shares. 
In \cref{MF-1}, we note that for lower values of $p$, nodes with negative edges are strictly avoided in Reg-Reg and CP-Reg-High networks. However, as $p$ increases and negative edges are dispersed over the network, allocations to these nodes increase. This behaviour contrasts with Reg-CP graphs, where we find positive allocations to nodes with negative ties even at low values of $p$. We further observe that these allocations are to nodes with low-negative-degrees in the core-periphery negative components, hinting that allocations to a node may be a function of its negative degree.



\subsection{In the limit of large $\langle k_{a} \rangle$}
\label{limiting-case}
As an alternative to the semi-analytical approach presented in \cref{mean-field}, we expand the mean-field approximation in \cref{XA-MF} in the limit of large average positive degree, compared to controller budgets and average negative degree, i.e. $\langle k_{a} \rangle \gg \langle a_{k_{a}k_{b}} \rangle + \langle b_{k_{a}k_{b}} \rangle+\langle k_{b} \rangle$. This is a reasonable approximation as data for real-world networks have shown relatively small fractions of negative edges \cite{leskovec2010signed}. We begin by performing a series expansion on \cref{XA-MF} in the above limit to obtain,

\begin{equation}
\begin{split}
    X_{A} \approx \langle \frac{a_{k_{a}k_{b}}}{k_{a}} \rangle + \langle \frac{k_{b}}{k_{a}} \rangle + \frac{a_{k_{a}k_{b}}+\langle k_{b} \rangle}{a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+2\langle k_{b} \rangle} - \frac{\langle \frac{(a_{k_{a}k_{b}}+k_{b})(a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+2k_{b})}{k_{a}} \rangle}{a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+2\langle k_{b} \rangle} \\ + \frac{a_{k_{a}k_{b}}+\langle k_{b} \rangle}{(a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+2\langle k_{b} \rangle)^2}\Bigg( \langle \frac{k_{b}^2}{k_{a}} \rangle  + \langle \frac{(a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+k_{b})(a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+3k_{b})}{k_{a}} \rangle \\ 
    - \langle \frac{a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+k_{b}}{k_{a}} \rangle \frac{a_{k_{a}k_{b}}+\langle k_{b} \rangle }{a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+2\langle k_{b}\rangle} - \langle \frac{k_{b}}{k_{a}} \rangle  \frac{a_{k_{a}k_{b}}+\langle k_{b}\rangle}{a_{k_{a}k_{b}}+b_{k_{a}k_{b}}+\langle k_{b}\rangle} \Bigg).
\end{split}
\label{approx-Xa}
\end{equation}
We further use the above expression to derive optimal allocations $a_{k_{a}k_{b}}^*$, obtained as 

\begin{equation}
        a_{k_{a}k_{b}}^* = \frac{1}{2} \Bigg( \frac{\langle a_{k_{a}k_{b}}\rangle - \langle b_{k_{a}k_{b}}\rangle}{\langle b_{k_{a}k_{b}} \rangle +\langle k_{b} \rangle}  b_{k_{a}k_{b}} + \frac{\langle a_{k_{a}k_{b}} \rangle - 3\langle b_{k_{a}k_{b}} \rangle -2 \langle k_{b} \rangle}{\langle b_{k_{a}k_{b}} \rangle +\langle k_{b} \rangle} k_{b} + \langle a_{k_{a}k_{b}}\rangle + \langle b_{k_{a}k_{b}}\rangle+2\langle k_{b} \rangle \Bigg).
  \label{optimal-allo}
\end{equation}
Details of the derivation can be found in \cref{appendix-A}. 






\begin{figure}
  \begin{subfigure}[b]{\textwidth}
  \centering
    \includegraphics[width=1\textwidth]{figures/B_pos_corr.eps}
    \caption{}
    \label{Ana-num-1}
  \end{subfigure}
  
    \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=1\textwidth]{figures/B_neg_corr.eps}
    \caption{}
    \label{Ana-num-2}
  \end{subfigure}
  \caption{Figures showing mean allocations to nodes as a function of competitor allocations $b_{k_{a}k_{b}}$ in SF-Reg networks of size $N=1000$, where $\langle k_{a} \rangle = 50$ and $\langle k_{b} \rangle = 2$. We examine three instances of negative tie distributions $p \in [0.4,0.6,0.8]$ (left to right). Panel (a) shows positive correlations between optimal allocations and competitor allocations and Panel (b) shows negative correlations between optimal allocations and competitor allocations. Different symbols (and colours) correspond to nodes with different negative degrees $k_{b}$. Controllers have the following budgets: (a) $\langle a_{k_{a}k_{b}} \rangle = 5.5$ and $\langle b_{k_{a}k_{b}} \rangle = 0.5$, and (b) $\langle a_{k_{a}k_{b}} \rangle = 4.5$ and $\langle b_{k_{a}k_{b}} \rangle = 5$. Controller B here follows a $k_{a}-$dependent strategy. Numerical results are averaged over 10 networks. Error bars show 95\% confidence intervals.}
  \label{Ana-num-b}
  \end{figure}



From \cref{optimal-allo} we can see that the optimal allocation $a_{k_{a}k_{b}}^*$ to a node characteristically depends on its negative degree $k_{b}$ and the competitor influence $b_{k_{a}k_{b}}$ on it. We verify these findings in the remainder of the section using numerical simulations.  

We first validate the dependence of optimal allocations $a_{k_{a}k_{b}}^*$ on competitor allocations $b_{k_{a}k_{b}}$. SF-Reg networks are employed to test this relationship. Here the scale-free positive component is exploited to extract multiple data points for comparison between numerical and analytical results. For this reason we assume controller B has a $k_{a}$-dependent strategy. 
Note that there is a negative-degree dependent term in \cref{optimal-allo} that contributes to optimal allocations. We reduce the effect of this term in our analysis by first setting the per node budget for controller A to $\langle a_{k_{a}k_{b}} \rangle = 3\langle b_{k_{a}k_{b}} \rangle + 2\langle k_{b} \rangle$. However, this condition constrains the analysis to positive correlations between allocations from both controllers, as now $\langle a_{k_{a}k_{b}} \rangle > \langle b_{k_{a}k_{b}} \rangle$ (see the first term in \cref{optimal-allo}). When analysing the negative relation between optimal and competitor allocations, the budget is set such that $\langle a_{k_{a}k_{b}} \rangle < \langle b_{k_{a}k_{b}} \rangle$. In this case however, the negative-degree-dependent term contributes to the optimal allocation result. The regular structure of the negative component in the networks are chosen to limit the variation in optimal allocation $a_{k_{a}k_{b}}^*$ caused by negative degrees.

For our simulations we consider networks where $\langle k_{a} \rangle=50$, is sufficiently large compared to $\langle k_{b} \rangle=2$. Controller B distributes its budget in proportion to the positive degree of nodes ($p_{B,i} \propto k_{a,i}$). When analysing the positive relation between allocations $a_{k_{a}k_{b}}^*$ and $b_{k_{a}k_{b}}$, the budget for controllers A and B are $\langle a_{k_{a}k_{b}} \rangle=5.5$ and $\langle b_{k_{a}k_{b}} \rangle=0.5$ respectively. For negative correlations we choose $\langle a_{k_{a}k_{b}} \rangle=4.5$ and $\langle b_{k_{a}k_{b}} \rangle=5$ to avoid defying the positivity constraint on optimal allocations. We summarise results from the simulations in \cref{Ana-num-1,Ana-num-2}, where for the sake of brevity, we illustrate results in only three instances of $p \in [0.4,0.6,0.8]$.

\begin{figure} 
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=1\textwidth]{figures/Reg-ER.eps}
    \caption{}
    \label{Ana-num-3}
  \end{subfigure}

  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=1\textwidth]{figures/Reg-SF.eps}
    \caption{}
    \label{Ana-num-4}
  \end{subfigure}
  \caption{Figures showing mean allocations to nodes as a function of negative degrees $k_{b}$ in networks of size $N=1000$. We examine three instances of negative tie distributions $p \in [0.4,0.6,0.8]$ (left to right). Figure (a) illustrates positive correlations between optimal allocations and negative degrees $k_{b}$ in Reg-ER networks where $\langle k_{a} \rangle = 50$ and $\langle k_{b} \rangle = 2$. Similarly, Figure (b) shows a negative relation between optimal allocations and negative degrees in Reg-SF networks where $\langle k_{a} \rangle = 16$ and $\langle k_{b} \rangle = 4$.
  Controllers have the following budgets: (a) $\langle a_{k_{a}k_{b}} \rangle = 7$ and $\langle b_{k_{a}k_{b}} \rangle = 0.5$, and (b) $\langle a_{k_{a}k_{b}} \rangle = 1$ and $\langle b_{k_{a}k_{b}} \rangle = 1$. Controller B targets the network uniformly. Numerical results are averaged over 10 networks. Error bars show 95\% confidence intervals.}
  \label{Ana-num-kb}
\end{figure}


Next, we explore the dependence of optimal allocations $a_{k_{a}k_{b}}^*$ on the negative degree $k_{b}$ of nodes. For the same reason as before, we now study positive regular graphs with negative heterogeneous components. Note that the correlation is positive when $ \langle a_{k_{a}k_{b}} \rangle > 3 \langle b_{k_{a}k_{b}} \rangle + 2\langle k_{b} \rangle$, and negative when $\langle a_{k_{a}k_{b}} \rangle < 3 \langle b_{k_{a}k_{b}} \rangle  - 2\langle k_{b} \rangle $. We conduct simulations to test each relation and present the results in \cref{Ana-num-3,Ana-num-4}.
To analyse the positive correlation, we run simulations in Reg-ER networks where $\langle k_{a} \rangle =50$ and $\langle k_{b} \rangle =2$. Here controller B evenly distributes $B_{B} = \langle b_{k_{a}k_{b}} \rangle \cdot N = 0.5 \cdot N$ resources to the network. Uniform allocation from the adversary limits the effect of the corresponding $b_{k_{a}k_{b}}$ term on optimal allocations. We assume controller A has a budget of $\langle a_{k_{a}k_{b}} \rangle = 7$ which satisfies the necessary condition $\langle a_{k_{a}k_{b}} \rangle > 3 \langle b_{k_{a}k_{b}} \rangle  - 2\langle k_{b} \rangle $. 
For the second sub-case, we use a Reg-SF network with $\langle k_{a} \rangle =16$ and $\langle k_{b} \rangle =4$. Controllers have equal budgets $\langle a_{k_{a}k_{b}} \rangle = \langle b_{k_{a}k_{b}} \rangle =1$, which reduces the numeric value of the $b_{k_{a}k_{b}}$-dependent term in \cref{optimal-allo} to $0$. As before, controller B targets the network uniformly. 

As shown in \cref{Ana-num-b,Ana-num-kb}, we find that analytical results approximate numerical simulations reasonably well in the limit of large average positive degrees. 
\cref{Ana-num-1} corroborates a positive linear relation between optimal allocations $a_{k_{a}k_{b}}^*$ and competitor allocation $b_{k_{a}k_{b}}$ under conditions of excess budget. We also observe that agreeability between numerical and analytical results increases with homogeneity of negative edges in the network ($p=0.8$). Furthermore, as expected, we find that negative degree of the node does not influence optimal allocations (as $\langle a_{k_{a}k_{b}} \rangle  = 3 \langle b_{k_{a}k_{b}} \rangle + 2\langle k_{b} \rangle$). \cref{Ana-num-2} verifies a negative relation between $a_{k_{a}k_{b}}^*$ and $b_{k_{a}k_{b}}$ when resources are scarce. We find that optimal allocations now depend on the negative degree of the node.

In \cref{Ana-num-2,Ana-num-3}, we measure correlations between optimal allocations and negative degree of nodes $k_{b}$. \cref{Ana-num-2} shows a positive linear relation with negative degree $k_{b}$ for larger budgets $ \langle a_{k_{a}k_{b}} \rangle > 3 \langle b_{k_{a}k_{b}} \rangle + 2\langle k_{b} \rangle$. 
Contrarily, an inverse relationship is observed with $k_{b}$, in \cref{Ana-num-3}, when budget $\langle a_{k_{a}k_{b}} \rangle < 3 \langle b_{k_{a}k_{b}} \rangle  - 2\langle k_{b} \rangle$.

The above results show that the proposed analytical framework provides a good estimate of the system dynamics in heterogeneous signed networks. We further show that in the limit of large average positive degree, optimal allocations depend on negative degree and competitor allocations on nodes, and not on the positive degree. The type of correlation, positive or negative, relies on the budget available to the focal controller. When resources are in excess, allocations increase linearly with competitor allocation and negative degree, whereas under low budget conditions this relation becomes inversely proportional.  



\section{Game-theoretic setting}
\label{game-theory}
So far we have optimised allocations for controller A against a passive adversary B. In this section, we explore the problem in a game-theoretic setting where both controllers A and B actively optimise budget distributions over the network. In our game, controllers represent players who optimise their respective strategies ($p_{A}$ and $p_{B}$), to maximise their utilities or vote-shares ($X_{A}$ and $X_{B}$). 

Consider a setting where two companies use word-of-mouth marketing on a social network. Each company has a budget which they distribute over the network to maximise adoption of their product.
One may assume that neither company has any prior knowledge of the competitor's allocation on the network, as there is no incentive to disclose this information in advance. However, companies can gain this information through their interaction with the network during the marketing process and they can then use this knowledge to strategise in following campaigns.  
In our model this translates to a scenario where controllers simultaneously and iteratively target the network. Each player observes the opponent's strategy in the ongoing game and then plays the best response to this strategy in the following round. In our model, allocation vectors are revealed at the end of each round, which then helps players strategise in the next round.
Finally, we assume multiple iterations of the game are played until a state is achieved from which neither controller deviates. In the real world, this would correspond to a stable state where companies obtain their optimal outcome and are no longer motivated to change their marketing strategies.  

In the following, we aim to explore how much a controller can gain from the knowledge of negative ties. We address this by comparing outcomes in two scenarios. First, we consider a setting in which the controller A has complete knowledge of the network structure (with full knowledge of negative ties), while controller B is unaware of the negative edges. Second, both controllers A and B observe the entire network as an unsigned (positive) graph. We then measure how much the controller A benefits from the knowledge of the network structure by comparing both scenarios. 

% Note that in each setting controllers assume play a zero-sum game 

% We explore and compare two cases that emerge from varying awareness of negative ties in controller A. 
% In the first case, we assume A has complete knowledge of the network structure and in the second, they are unaware of negative edges and observe the entire network as an unsigned (positive) graph. Controller B in both cases is unaware of signed edges. Our motive here, as before, is to determine if the controller A receives a more favourable outcome against an active controller B, when they are fully informed of the network structure. 

We first solve the problem semi-analytically and then compare it to numerical results in \cref{GT}.  
To begin, we derive an analytical expression for the instance where controllers do not have complete knowledge of the network. Say the network is a signed network where a node $i$ has $k_{a}$ positive edges and $k_{b}$ negative edges. As controllers cannot discriminate between positive and negative edges, they assume that the node $i$ has degree $k_{i}$ where $k_{i}=k_{a,i}+k_{b,i}$. 

Using the degree-based mean-field approach discussed in \cref{mean-field} we assume that node behaviour $\langle x_{k} \rangle$ strongly correlates with their degree $k$. Now, using the steady-state equation (\cref{steady-state}) we obtain the state of a node with degree $k$ as,

\begin{align}
    x_{k} = \frac{k\langle x \rangle+a_{k}}{k+a_{k}+b_{k}},
    \label{x_k}
\end{align} 
where $a_{k}$ and $b_{k}$ are allocations from controllers A and B for the given class of nodes, and $\langle x \rangle$ is the average behaviour of a node in the network. Here controllers are assumed to distribute allocations uniformly within each class. 

Given a degree distribution $P_{k}$, the expected behaviour of a node in the network is,
\begin{align}
    \langle x \rangle = \frac{\sum_{k} P_{k} k x_{k}}{\langle k \rangle} = \frac{\sum_{k} P_{k} k x_{k}}{\sum_{k} P_{k} k}.
    \label{<x>}
\end{align}

Using \cref{x_k} and \cref{<x>}, we obtain 
\begin{align}
    \langle x \rangle  = \frac{\sum_{k} \frac{P_{k} k a_{k}}{k+a_{k}+b_{k}}}{\sum_{k} \frac{P_{k} k (a_{k}+b_{k})}{k+a_{k}+b_{k}}}.
\end{align}

This leads us to an expression for the total vote-share at equilibrium,

\begin{align}
    X_{A}^{(+)} = \sum_{k} P_{k}x_{k} = \frac{(\sum_{k} \frac{P_{k} k }{k+a_{k}+b_{k}})(\sum_{k} \frac{P_{k} k a_{k}}{k+a_{k}+b_{k}})}{(\sum_{k} \frac{P_{k} k (a_{k}+b_{k})}{k+a_{k}+b_{k}})}+ (\sum_{k} \frac{P_{k} k}{k+a_{k}+b_{k}}).
    \label{XA-positive}
\end{align}

Although we show the above derivations for A, the same process can be repeated to determine the utility function for controller B,
\begin{align}
    X_{B}^{(+)} = \frac{(\sum_{k} \frac{P_{k} k }{k+a_{k}+b_{k}})(\sum_{k} \frac{P_{k} k b_{k}}{k+a_{k}+b_{k}})}{(\sum_{k} \frac{P_{k} k (a_{k}+b_{k})}{k+a_{k}+b_{k}})}+ (\sum_{k} \frac{P_{k} k}{k+a_{k}+b_{k}}).
    \label{XB-positive}
\end{align}

Note that \cref{XA-positive} is the utility function we use for controller A when they cannot observe negative edges, while \cref{XA-MF} guides a negative-tie sensitive approach.
 To determine how much controller A gains from exploiting their knowledge of the network in the game-theoretic setting, we compare vote-shares obtained using both approaches.
 We first determine the optimal strategies at equilibrium, once using \cref{XA-MF} and then \cref{XA-positive}, both against a negative-tie agnostic competitor B whose utility is given by \cref{XB-positive}. In the case where both controllers are unaware of negative ties in the network, the utility functions are simultaneously solved to arrive at the equilibrium state $[X_{A},X_{B}]$. The corresponding strategies at this point are given by $[p_{A},p_{B}]$. 
 Given that both controllers are negative-tie agnostic, they observe their utilities at $[p_{A},p_{B}]$ as $[X_{A},X_{B}]$, which is different to their actual utilities $[\widehat{X}_{A}^{*},\widehat{X}_{B}^{*}]$ which should include negative-tie dynamics and is calculated by replacing $p_{A}$ and $p_{B}$ in \cref{optimisation}. In the other instance, controller A has access to their actual utility function at all times. Once an equilibrium state is reached, $[p_{A}^*,p_{B}^*]$ are used the determine the actual utility for B $\widehat{X}_{B}^{*}]$. 
 Here it is important to note that both controllers assume the network structure to be common knowledge at all times. Therefore, from both their perspectives, the game always appears to be a constant sum game.
 
 While solving the problem semi-analytically, we express strategies using $\epsilon_{A}$ (or $\epsilon_{B}$), which represent the fraction of resources allocated by a controller to nodes with negative ties. Solving $X_{A}$ and $X_{B}$ simultaneously, we obtain the equilibrium state $(\epsilon_{A}^{*},\epsilon_{B}^{*})$, and finally measure the difference in vote-shares. 
 For our simulations, we explore three types of networks that have been considered so far: (i) Reg-Reg, (ii) CP-Reg-High and (iii) Reg-CP, where $\langle k_{a} \rangle=16$ and $\langle k_{b} \rangle=4$. For brevity, we examine only one instance of negative tie distribution with $p=0.5$. 
Note that for Reg-Reg and CP-Reg-High networks, resources are split between two node classes as $\epsilon_{A}$ and $1-\epsilon_{A}$. The same is true for controller B. For Reg-Reg networks these are (i) $\{k_{a,1},k_{b,1}\}=\{16,8\}$ and (ii) $\{k_{a,2},k_{b,2}\}=\{16,0\}$, and for CP-Reg-High networks (i) $\{k_{a,1},k_{b,1}\}=\{30,8\}$ and (ii) $\{k_{a,2},k_{b,2}\}=\{2,0\}$. In Reg-CP networks, we have three classes of nodes (i) for $p_{1}=0.25$, $\{k_{a,1},k_{b,1}\}=\{16,14\}$, (ii) for $p_{2}=0.25$, $\{k_{a,2},k_{b,2}\}=\{16,2\}$ and finally (iii) for $p_{3}=0.5$, $\{k_{a,3},k_{b,3}\}=\{16,0\}$. Consequently the budget is split three-ways into $\epsilon_{1}$, $\epsilon_{2}$ and $\epsilon_{3} = 1 - (\epsilon_{1}+\epsilon_{2})$.  
 In all cases, the necessary boundary conditions are imposed. 
 \cref{GT} shows how equilibrium strategies and gain in vote-shares depend on budget ratios. Analytical results are complemented with numerical simulations. $GA$ is used as an optimiser when controller A has complete knowledge of the network and conversely $GA^{(+)}$ is used when they cannot discern polarity of the edges. In both cases, controller B uses $GA^{(+)}$ to determine best response. 
 
 \begin{figure}
 \centering
  \begin{subfigure}[b]{0.85\textwidth}
    \includegraphics[width=\textwidth]{figures/Reg-Reg.eps}
    \caption{}
    \label{GT-1}
  \end{subfigure}
    \begin{subfigure}[b]{0.85\textwidth}
    \centering
    \includegraphics[width=\textwidth]{figures/Cp-Reg.eps}
    \caption{}
    \label{GT-2}
  \end{subfigure}
      \begin{subfigure}[b]{0.85\textwidth}
    \centering
    \includegraphics[width=\textwidth]{figures/Reg-CP.eps}
    \caption{}
    \label{GT-3}
  \end{subfigure}
  \caption{Figures compare analytical and numerical results of equilibrium states. Figures on the left depict change in strategies ($\epsilon$) for both players as the budget ratio changes. Here $\epsilon$ is the fraction of resource given to nodes with negative edges. Figures on the right show gain in true vote-shares at equilibrium $[X_{A}^{*(GA)} - X_{A}^{*(GA+)}]$. Simulations are conducted in networks of size N=200,  $\langle k_{a} \rangle = 16$, $\langle k_{b} \rangle = 4$ where negative ties are distributed only over half the network $(p=0.5)$. 
  We consider three network types (a) Reg-Reg, (b) CP-Reg-High and (c) Reg-CP networks. In Reg-CP networks, $\epsilon=\epsilon_{1}+\epsilon_{2}$, where $\epsilon_{1}$ and $\epsilon_{2}$ are fractions of resources given to high-negative degree and low-negative degree nodes in the negative core-periphery component respectively. Numerical simulations are run with a step-size $\eta=5$ and terminated using a $\mu=10^{-7}$ approximation factor. Results are averaged over 10 networks and show error bars with $95\%$ confidence intervals. }
  \label{GT}
\end{figure}
 

We find that simulations always converge to an equilibrium in all cases.
When both controllers are blind, the equilibrium strategy is identical for both controllers which is to uniformly target the network ($\epsilon_{A} = \epsilon_{B} = p = 0.5$) \cite{romero2021shadowing}. On the other hand, controller A avoids nodes with negative ties when they have full knowledge of the network and only have limited resources. This strategy influences the allocation patterns of competitor B, who is driven by the competitor's allocation to nodes and thus diverts less resources to these nodes. We see that by avoiding negative edges in the network, controller A inadvertently gives out information about negative ties in the network \textemdash through their own prioritisation of nodes, which then results in a loss in vote-shares as shown in \cref{GT}. 

 As the budget ratio increases, controller A starts redirecting some resources to nodes with negative edges. When this occurs, controller B increases their allocations to these nodes. As the budget ratio increases to $B_{A}/B_{B} \approx 5$, controller B stops competing over nodes with negative ties and begins to gradually reduce their allocation ($\epsilon_{B}$) to them. Around $B_{A}/B_{B} = 10$, both controllers target the network uniformly ($\epsilon_{A} = \epsilon_{B} = p = 0.5$), and beyond this point, $\epsilon_{B}$ continues to decrease as $\epsilon_{A}$ increases steadily. Once again, we find that controller A loses vote-shares by using their knowledge of negative edges in the network, as they start pursuing nodes with negative edges with more than half of their budget $\epsilon_{A} > 0.5$. However, as budget ratio increases to $B_{A}/B_{B} \approx 10^2$, controller A once again starts gaining from the knowledge of the network structure.
 
We also note that the results are similar across all three types of networks, and numerical simulations closely approximate semi-analytical results in all cases. Gain in vote-shares is significant in CP-Reg networks compared to the other networks. We find early allocations to nodes with negative edges in Reg-CP networks, which is consistent with results in \cref{MF}. Moreover, we observe that controller B never completely avoids negative edges in the Reg-CP networks. 
\section{Regret bounds}\label{app: regret bounds}

\subsection{Entropic regret bounds}\label{subsec: entropic regret}


To facilitate the analysis and the presentation of results, recall the entropic transport functional
\[
    \entf:(c,\pi)\in L^2(\Rb^d;\varrho)\times\Pi(\mu,\nu)\mapsto \langle c\vert\pi\rangle + \ve\entropy(\pi)\,.
\]
Thus, $\ent(\mu,\nu,c,\ve)=\inf_{\pi\in\Pi(\mu,\nu)}\entf(c,\pi)$ and~\eqref{eq: entropic regret} becomes
\[
    \regret_T^{\entropy,\ve}(\pi):= \sum_{t=1}^T \entf(c^*,\pi_t)+\xi_t - \ent(\mu,\nu,c^*,\ve)\,.
\]

\ThmEntropicRegret*


\begin{proof}
    Recall the we identify $\Ac$ with the $\Fb$-adapted process $\bm{\pi}:={(\pi_t)}_{t\in\Nb}\subset\Pi(\mu,\nu)$ of transport plans played. The instantaneous regret of the algorithm at time $t\in\Nb$ is defined as
    \[
        r_t:= \entf(c^*,\pi_t)+\xi_t - \ent(\mu,\nu,c^*,\ve)\,.
    \]
    It is clear that $\regret_T^\entropy(\Ac)=\sum_{t=1}^T r_t$.
    Before pursuing further, let us apply \cref{lemma: sub-gaussian sum} to the sequence ${(\xi_t)}_{t\in\Nb}$, in view of \cref{asmp: estimate + subG}, to obtain that for any $\delta>0$ we have
    \begin{align}
        \Pb\left(\sum_{i=1}^T \xi_i \le \sigma\sqrt{2T\log\left(\frac2\delta\right)}\right)\ge 1-\frac\delta2\,.\label{eq: sub-gaussian sum bound regret}
    \end{align}
    Now, let $\bar r_t :=  \entf(c^*,\pi_t)- \ent(\mu,\nu,c^*,\ve)$ as we continue the decomposition. By definition of the algorithm, let 
    \begin{align} 
        (\tilde\pi_t,\tilde c_t)\in\argmin_{\substack{\pi\in\Pi(\mu,\nu)\\c\in\confset_t(\delta)}} \entf(c,\pi)\notag\,,
    \end{align}
    where $\confset_t(\delta)$ is the confidence set defined in~\eqref{eq: confidence set}.
    
    Let us place ourselves on the event $\cap_{t=1}^\infty\left\{c^*\in\fourier^{-1}\confset_t(\delta)\right\}$, an event which happens with probability at least $1-\delta/2$ by \cref{lemma: probability of confsets unif in N}. By optimism, we have 
    \[
        \bar r_t \le  \entf(c^*,\pi_t)- \ent(\mu,\nu,\tilde c_t,\ve)
    \]
    The instant regret can be decomposed as
    \begin{align*}
        \bar r_t &= \entf(c^*,\pi_t) -\entf(\tilde c_t,\pi_t) + \entf(\tilde c_t,\pi_t) -\ent(\mu,\nu,\tilde c_t,\ve) 
    \end{align*}
    The first term $\entf(c^*,\pi_t) -\entf(\tilde c_i,\pi_t)=\langle c^*-\tilde c_t\vert \pi_t\rangle$ can be bounded by \cref{lemma: bound on width term}, while the second term is $0$ by definition of \cref{alg: alg shared}. The proof is completed by taking a union bound over $\cap_{t=1}^\infty\left\{c^*\in\fourier^{-1}\confset_t(\delta)\right\}$ and the event of~\eqref{eq: sub-gaussian sum bound regret}.
\end{proof}


\subsection{Kantorovich regret bounds}\label{subsec: kantorovich regret}

Let us begin by giving the requisite results on approximation of the Kantorovich problem by the entropic one. 
Let $d_{\entropy}(\gamma)$ (for $\gamma\in\{\mu,\nu\}$) denote the \textit{upper Renyi dimension} of $\gamma$, defined by 
\[ d_\entropy(\gamma):=\limsup_{\epsilon\downarrow0}\frac{H_\varepsilon(\gamma)}{\log(\varepsilon^{-1})}\,\]
in which $H_\varepsilon(\gamma)$ is the infimum (over all countable partitions of $\supp(\gamma)$ into Borel subsets of diameter at most $\varepsilon$) of the discrete entropy of $\gamma$ with respect to the partition, see~\cite{carlier_convergence_2023}.

\begin{lemma}[{\cite[Prop.~3.1]{carlier_convergence_2023}}]\label{lemma carlier pegon lipschitz UB}
    If $c^*$ is $L$-Lipschitz on $\supp(\mu)\times\supp(\nu)$, then
    \[\ent(\mu,\nu,c^*,\ve) - \kant(\mu,\nu,c^*)\le \varepsilon\left((d_{\entropy}(\mu)\wedge d_{\entropy}(\nu))\log(\varepsilon^{-1}) + L \right) \,\]
    as $\varepsilon\downarrow0$.
\end{lemma}

Extensions of this result exist for more general absolute continuity conditions, see~\cite[Rem.~3.4]{carlier_convergence_2023}. This constant is sharp, but tighter bounds may be obtained under stronger regularity assumptions, see e.g.~\cite[Prop.~3.7]{carlier_convergence_2023}. In view of \cref{lemma carlier pegon lipschitz UB}, we can define $\kappa:= (d_{\entropy}(\mu)\wedge d_{\entropy}(\nu)) + L$. In spite of its apparent complexity, upper Renyi dimension is a relatively well behaved object, and can be bounded in many common situations, see the following remarks.

\begin{remark}[{\cite[Prop.~3.2]{carlier_convergence_2023}}]
    If $\gamma$ is a measure on $\Rb^d$ satisfying
    \[ \int 0\vee\log(\norm{x}_2)\de\gamma(x)<+\infty\]
    then $d_{\entropy}(\gamma)\le d$.
\end{remark}

\begin{remark}[{\cite[Rem.~3.5]{carlier_convergence_2023}}]
    If $\gamma$ is finitely supported, then $d_\entropy(\gamma)=0$. 
\end{remark}



\ThmKantorovichRegret*



\begin{proof}
    The proof follows the same lines as the proof of \cref{thm: entropic regret}. Again, we identify $\Bc$ with the transport plans $\bm{\pi}:={(\pi_t)}_{t\in\Nb}\subset\Pi(\mu,\nu)$ it plays. The instantaneous regret is different due to the change of objective, it is given by 
    \[
        r_t:= R_t - \kant(\mu,\nu,c^*) = \langle c^*\vert \pi_t-\pi^*\rangle +\xi_t\,.
    \]
    As before, apply \cref{lemma: sub-gaussian sum} to the sequence ${(\xi_i)}_{i\in\Nb}$, and pass to $\bar r_t := \langle c^*\vert \pi_t-\pi^*\rangle$, which can be decomposed as
    \begin{align}
        \bar r_t &= \langle c^*\vert \pi_t\rangle - \langle c^*\vert \pi^*\rangle\notag\\
        &= \langle c^*\vert \pi_t\rangle  - \ent(\mu,\nu,c^*,\ve)+\ent(\mu,\nu,c^*,\ve) - \kant(\mu,\nu,c^*)\notag\\
        &\le \langle c^*\vert \pi_t\rangle -\ent(\mu,\nu,c^*,\ve) + \ve (d_\entropy(\mu)\wedge d_\entropy(\nu))\log(\ve^{-1}) + L\ve\notag
    \end{align}
    for any $\ve>0$, by \cref{lemma carlier pegon lipschitz UB}. In particular, for $\ve=\ve_t$ as used by \cref{alg: alg shared}, we have
    \begin{align}
        \sum_{t=1}^T \ve_t(d_\entropy(\mu)\wedge d_\entropy(\nu))\log(\ve_t^{-1}) + L\ve_t \le \frac{\kappa\alpha}{1-\alpha}\left(T^{1-\alpha}\log(T) + \frac{\alpha}{2^\alpha}\log(6)\right)\,.\label{eq: bound on sum epsilons}
    \end{align}
    by \cref{lemma: sum of terms from pegon bound}.
    Let us recall that optimism implies that 
    \begin{align} 
        (\tilde\pi_t,\tilde c_t)\in\argmin_{\substack{\pi\in\Pi(\mu,\nu)\\c\in\confset_t(\delta)}} \Psi^{\ve_t}_{\mu,\nu}(c,\pi)\notag\,,
    \end{align}
    for $\ve_t>0$ as used by \cref{alg: alg shared}, so that 
    \[
    \ent(\mu,\nu,\tilde c_t,\ve_t)\le \ent(\mu,\nu,c^*,\ve_t) \mbox{ on } \event_t(\delta)\,.
    \]

    Let us place ourselves on the event $\cap_{t=1}^\infty\left\{c^*\in\fourier^{-1}\confset_t(\delta)\right\}\supset \cap_{t=1}^\infty \Ec_t(\delta)$, which happens with probability at least $1-\delta/2$ by \cref{lemma: probability of confsets unif in N}.
   On this event, we thus have 
    \begin{align*}
        \langle c^*\vert \pi_t\rangle -\ent(\mu,\nu,c^*,\ve_t) &\le \langle c^*\vert \pi_t-\tilde\pi_t\rangle + \langle c^*-\tilde c_t\vert \tilde\pi_t\rangle\,,
    \end{align*}
    since $\entropy\ge 0$.
    Applying $\pi_t=\tilde\pi_t$ we obtain the desired result, up to combining the $\bar r_t$ over $t\in\Nb$, recalling~\eqref{eq: bound on sum epsilons} and taking a union bound over the two events.
\end{proof}



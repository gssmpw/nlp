% fix listings UTF-8
\usepackage[utf8]{inputenc}
\usepackage{color}
\usepackage[usenames,dvipsnames]{xcolor}

\definecolor{keywordcolor}{rgb}{0.7, 0.1, 0.1}   % red
\definecolor{tacticcolor}{rgb}{0.0, 0.1, 0.6}    % blue
\definecolor{commentcolor}{rgb}{0.4, 0.4, 0.4}   % grey
\definecolor{symbolcolor}{rgb}{0.0, 0.1, 0.6}    % blue
\definecolor{sortcolor}{rgb}{0.1, 0.5, 0.1}      % green
\definecolor{attributecolor}{rgb}{0.7, 0.1, 0.1} % red
\definecolor{white}{rgb}{1.0,1.0,1.0}

\usepackage{xspace}
\usepackage{nicefrac}
\usepackage{caption}
\captionsetup[table]{name=Listing}
\usepackage{makecell}

\usepackage{tikz}

% colors for links
\hypersetup{
    colorlinks=true,  
    urlcolor=blue,
}

\usepackage[final,nomargin,inline,index]{fixme} % Simplified management of FIXME's
\fxusetheme{color}
\FXRegisterAuthor{bart}{anbart}{\color{magenta} {\underline{bart}}}
\FXRegisterAuthor{enrico}{anenrico}{\color{red} {\underline{enrico}}}
\FXRegisterAuthor{silvia}{ansilvia}{\color{blue} {\underline{silvia}}}

\crefname{table}{Listing}{Listings}  

% \renewcommand{\ttdefault}{lmtt}  % to use bold and italic within code

\definecolor{LightGrey}{rgb}{0.975,0.975,0.975}
% \definecolor{keyword}{HTML}{7F0055}

% Packages initialization
%
% Packages initialization

\lstset{
	nolol=true,
	breaklines=true,
	xleftmargin=0pt,
	xrightmargin=0pt,
	framexleftmargin=0pt,
	framextopmargin=0pt,
        % frame=ltbr, 
	framerule=0pt,        
	% framexrightmargin=10pt,
	framexbottommargin=2pt, 
	% frame=ltbr, 
        % framerule=0pt,
	showstringspaces=false,
	%basicstyle=%
        %\ttfamily\linespread{1.15}\scriptsize%
        %\lst@ifdisplaystyle\footnotesize\fi,
        % basicstyle=\fontseries{m}\scriptsize\ttfamily,
	backgroundcolor=\color{LightGrey},
        numberstyle=\fontsize{4}{4}\color{MidnightBlue}\ttfamily,
        stringstyle=\color{RoyalBlue}
}

\lstdefinelanguage{solidity}{
, basicstyle=\ttfamily\linespread{1.15}\scriptsize\lst@ifdisplaystyle\scriptsize\fi
, commentstyle=\color{Gray}
, morecomment=[l]{//}
, morecomment=[s]{/*}{*/}
, escapechar=\$
% commands => NavyBlue
, classoffset=0,
, keywordstyle=\color{NavyBlue}\bfseries
, morekeywords={assert,require,if,then,else,for,break,call,delegatecall,transfer,send,case, catch,continue,do,while,emit, new, return, revert, selfdestruct, try, with, throw, switch, suicide}
% declarations context => BlueGreen
, classoffset=1
, keywordstyle=\color{YellowGreen}\bfseries
, morekeywords={external, implements, import, interface, internal, library, payable, pragma, private, protected, public, pure, returns, super, using, view}
% types => blue
, classoffset=2
, keywordstyle=\color{blue}
, morekeywords={function, constructor, contract, constant, struct, address, bool, byte, bytes, bytes1, bytes2, bytes3, bytes4, bytes5, bytes6, bytes7, bytes8, bytes9, bytes10, bytes11, bytes12, bytes13, bytes14, bytes15, bytes16, bytes17, bytes18, bytes19, bytes20, bytes21, bytes22, bytes23, bytes24, bytes25, bytes26, bytes27, bytes28, bytes29, bytes30, bytes31, bytes32, enum, int, int8, int16, int24, int32, int40, int48, int56, int64, int72, int80, int88, int96, int104, int112, int120, int128, int136, int144, int152, int160, int168, int176, int184, int192, int200, int208, int216, int224, int232, int240, int248, int256, mapping, string, uint, uint8, uint16, uint24, uint32, uint40, uint48, uint56, uint64, uint72, uint80, uint88, uint96, uint104, uint112, uint120, uint128, uint136, uint144, uint152, uint160, uint168, uint176, uint184, uint192, uint200, uint208, uint216, uint224, uint232, uint240, uint248, uint256, var, void, ether, finney, szabo, wei, days, hours, minutes, seconds, weeks, years}
% constants and fields => Plum
, classoffset=3
, keywordstyle=\color{Plum}\bfseries
, morekeywords={balance, block, blockhash, instanceof, coinbase, difficulty, gaslimit, number, timestamp, msg, data, gas, sender, value, sig, value, now, tx, gasprice, origin}
}

\lstdefinelanguage{move}{%
, basicstyle=\ttfamily\linespread{1.15}\scriptsize\lst@ifdisplaystyle\scriptsize\fi
% , sensitive
, commentstyle=\color{Gray},
, morecomment=[l]{//}%
, morecomment=[s]{/*}{*/}%
, moredelim=[s][{\itshape\color[rgb]{0,0,0.75}}]{\#[}{]}%
% , morestring=[b]{"}%
% , alsodigit={}%
% , alsoother={}%
% , alsoletter={!}%
, escapechar=\$
%
% commands => NavyBlue
, classoffset=0,
, keywordstyle=\color{NavyBlue}\bfseries
, morekeywords={assert!, move_to, move_from, borrow_global, borrow_mut, borrow_global_mut, exists, break, continue, else, for, if, in, loop, match, return, while}  
% declarations context => BlueGreen
, classoffset=1
, keywordstyle=\color{YellowGreen}\bfseries
, morekeywords={as, const, let, move, mut, ref, static}  % in the context of variables
% in the context of declarations
, morekeywords={module, public, external, acquires}  % in the context of modularisation
%
, keywordstyle=\color{blue}\bfseries
, classoffset=2
, morekeywords={spec, enum, fun, impl, Self, self, struct, trait, type, union, use, where}
, morekeywords={signer, address, bool, char, f32, f64, i8, i16, i32, i64, isize, str, u8, u16, u32, u64, unit, usize, i128, u128}  % primitive types
%
% constants and fields => Plum
, classoffset=3
, keywordstyle=\color{Plum}\bfseries
, morekeywords={address_of, Err, false, None, Ok, Some, true},
, classoffset=4
, keywordstyle=\color{red}\bfseries
, morekeywords={spec,ensures,post,global,spec_get}
}

\lstdefinelanguage{cvl}{
, basicstyle=\ttfamily\linespread{1.15}\scriptsize\lst@ifdisplaystyle\scriptsize\fi
, commentstyle=\color{Gray}
, morecomment=[l]{//}
, morecomment=[s]{/*}{*/}
, classoffset=0
, escapechar=\$
, morekeywords={anonymous, assembly, balance, break, call, callcode, case, catch, class, constant, continue, constructor, contract, debugger, default, delegatecall, delete, do, else, emit, event, experimental, export, external, false, finally, for, function, gas, if, implements, import, in, indexed, instanceof, interface, internal, is, length, library, log0, log1, log2, log3, log4, memory, modifier, new, payable, pragma, private, protected, public, pure, push, return, returns, revert,  selfdestruct, send, solidity, storage, struct, suicide, super, switch, then, this, throw, transfer, true, try, typeof, using, value, view, while, with, addmod, ecrecover, keccak256, mulmod, ripemd160, sha256, sha3}
, keywordstyle=\color{NavyBlue}\bfseries
, classoffset=1
, morekeywords={address, bool, byte, bytes, bytes1, bytes2, bytes3, bytes4, bytes5, bytes6, bytes7, bytes8, bytes9, bytes10, bytes11, bytes12, bytes13, bytes14, bytes15, bytes16, bytes17, bytes18, bytes19, bytes20, bytes21, bytes22, bytes23, bytes24, bytes25, bytes26, bytes27, bytes28, bytes29, bytes30, bytes31, bytes32, enum, int, int8, int16, int24, int32, int40, int48, int56, int64, int72, int80, int88, int96, int104, int112, int120, int128, int136, int144, int152, int160, int168, int176, int184, int192, int200, int208, int216, int224, int232, int240, int248, int256, mapping, string, uint, uint8, uint16, uint24, uint32, uint40, uint48, uint56, uint64, uint72, uint80, uint88, uint96, uint104, uint112, uint120, uint128, uint136, uint144, uint152, uint160, uint168, uint176, uint184, uint192, uint200, uint208, uint216, uint224, uint232, uint240, uint248, uint256, var, void, ether, finney, szabo, wei, days, hours, minutes, seconds, weeks, years}
, keywordstyle=\color{blue}
, classoffset=2
, morekeywords={block, blockhash, coinbase, difficulty, gaslimit, number, timestamp, msg, data, gas, sender, sig, value, now, tx, gasprice, origin}
, keywordstyle=\color{Plum}\bfseries
, classoffset=3
, morekeywords={invariant,rule,assert,satisfy,require}
, keywordstyle=\color{red}\bfseries,
}

\lstset{
	language=solidity,
}
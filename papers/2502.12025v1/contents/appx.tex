\input{assets/tab_thinksetup}
\section{\textsc{SafeChain} Details}

\subsection{Dataset Details}
\label{appx:dataset-detail}

In the first step of data synthesis uniformly from $4$ categories  according to \citet{jiang2024wildteaming}, each contains $12.5$K samples and sums up to $50$K samples. 
Table \ref{tab:safechain-databreakup} presents the number of instructions per category in final \textsc{SafeChain} after processing.


\begin{table}[h]
    \centering
    \begin{tabular}{l r c c }\toprule
       Category  & \# Samples \\ \midrule
        Vanilla Benign &  11056\\
        Vanilla Harmful & 8591 \\
        Adversarial Benign & 11056\\
        Adversarial Harmful & 9297\\ \midrule
        Sum & 40000 \\ \bottomrule
    \end{tabular}
    \caption{Overview of \textsc{SafeChain} Dataset.}
    \label{tab:safechain-databreakup}
\end{table}



\subsection{Training Details}
\label{appx:training-setup}
Our model training is conducted using LLaMA-Factory \citep{zheng2024llamafactory}, on a server with four NVIDIA A100-SXM4-80GB GPUs, an AMD EPYC 7763 64-Core Processor, and 512 GB of RAM. Table \ref{tab: training-hyperparameters} lists the hyper-parameters for supervised fine-tuning. 


\begin{table}[htbp]
\small
\centering
\begin{tabular}{ll}
\toprule
\textbf{Hyper-parameter} & \textbf{Value} \\ \midrule
Learning Rate & $1 \times 10^{-5}$ \\
Number of Epochs & $2$ \\
Number of Devices & $4$ \\
Per-device Batch Size & $2$ \\
Optimizer & \texttt{Adamw} \\
Learning Rate Scheduler & \texttt{cosine} \\
Max Sequence Length  & $8192$ \\ \bottomrule
\end{tabular}
\caption{This table shows the hyper-parameters for supervised fine-tuning.}
\label{tab: training-hyperparameters}
\end{table}







\section{Prompt and Response Library}\label{app:example}
This section presents the prompts for evaluation in Figure \ref{fig:judge-prompt}, and example responses for a harmful query in Figure \ref{fig:MoreThink-example} and \ref{fig:safechain-trained-example}.

\clearpage
\input{assets/prompt_pairwise_eval}
\input{assets/prompt_morethink}
\input{assets/prompt_safechain_trained}

\begin{algorithm}[H]
    {
    \small
    \caption{\textproc{process\_event}: Processing an event in the event queue}
    \label{alg:process_event}
    \algrenewcommand{\algorithmicindent}{0.5em}
        \begin{algorithmic}[1]
        \Function{process\_event}{E, Q, Net2Event, PendingTrigger}
            \State \textit{cell} =  the cell instance that receives event E at its input
            \State remove\_event = list() \textit{// List for processed events}
            \State NE = list() \textit{// List for output events}
            \State \textit{// Step PE1: Find the cell type of the cell that receives E as input.} 
            \If {\textit{cell} is a coupling or shorting cell}
                \State \textit{pin} = the pin of \textit{cell} that event E occurs at
                \State \textit{// Step PE2: Find the direction of the path that E lies on.}
                \If {\textit{pin} is $h_{in}^{f}$ or $v_{in}^{f}$}
                    \State \textit{// Step PE3: Find an interacting event for the forward path.}
                    \If {event E' exists on other input} \label{alg:forward_start}
                        \If {E and E' are within a window of W}
                            \State NE $\xleftarrow{}$ Calculate output events from E and E'
                            \State remove\_event.add([E, E'])
                        \Else
                            \State NE $\xleftarrow{}$ Calculate output event from E
                            \State remove\_event.add(E)
                        \EndIf \label{alg:forward_end}
                    \Else
                        \State \textit{// Step PE4: Look back to find events that might result in interaction.}
                        \State \textit{net} = the net connected to other input of cell
                        \State (left, right) = (E.arrival\_time - W, E.arrival\_time + W)
                        \State status = \Call{look\_back}{\textit{net}, (left, right), left, Net2Event}
                        \If {status}
                            \State PendingTrigger[\textit{net}] = E
                        \Else
                            \State NE $\xleftarrow{}$ Calculate output event from E
                            \State remove\_event.add(E)
                        \EndIf
                    \EndIf
                \Else
                    \State \textit{// Calculate events on the backward path.} \label{alg:backward_start}
                    \State NE $\xleftarrow{}$ Calculate output event from E
                    \State remove\_event.add(E) \label{alg:backward_end}
                \EndIf
            \Else 
                \State \textit{// enable cell} \label{alg:enable_start}
                \State NE $\xleftarrow{}$ Calculate output event from E
                \State remove\_event.add(E) \label{alg:enable_end}
            \EndIf
            \State \textit{// Step PE5: Check if events in NE are triggers to a pending event}
            \If {NE not empty} 
                \For {new\_event $\in$ NE}
                    \State Q.add(new\_event)
                    \State Net2Event[new\_event.netname] = new\_event
                    \If {new\_event.netname \textbf{in} PendingTrigger}
                        \State Q.add(PendingTrigger[new\_event.netname])
                        \State PendingTrigger.pop(new\_event.netname)
                    \EndIf
                \EndFor
            \EndIf
            \State \textit{// Remove consumed events}
            \For {used\_event $\in$ remove\_events}
                \State Net2Event.pop(used\_event.netname)
            \EndFor
        \EndFunction
        \end{algorithmic}
    }
\end{algorithm}
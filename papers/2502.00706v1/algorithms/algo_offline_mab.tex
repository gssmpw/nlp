\begin{algorithm}[h]
  \caption{Tester based on Best Arm Identification}
  \label{alg:offline_mab}
  \begin{algorithmic}
      \Require{Model $g$, candidate set $F=\{f_1,\ldots,f_s\}$, set of control models $C=\{c_1,\ldots,c_m\}$, prompt space $\Omega$, number of prompts $T$, significance  parameter $\alpha$, maximum average prompts per model $N$ 
      }
    \State $M \gets F \cup C$ \Comment{Set of all models}
%
  \State $\confinterval{t}{\confidence} := \sqrt{\frac{\log(4t^2 / \confidence)}{2t}}$ \Comment{Confidence interval for BAI}
\State $\text{hits}[m] \gets 0 \text{ for all } m \in M$ \Comment{\# same tokens with $g$}
\State $\text{tots}[m] \gets 0 \text{ for all } m \in M$ \Comment{\# queried }
\State $A\gets M$ \Comment{Active set of models}
\State $t \gets 0$
\While{\textsc{True}}
    \State $x \stackrel{\text{iid}}{\sim} \Omega$ \Comment{Sample prompt}
    \State $y_g\gets g(x)$ \Comment{Query $g$}
    \For{$m \in A$} \Comment{Update hits/tots}
    \State $y_m \gets m(x)$ \Comment{query model $m$}
    \State $hits[m] {+}= \mathds{1}(y_g,y_m)$ \Comment{Update hit counters}
    \State $tots[m] {+}= 1$ \Comment{Update total queries}
    \EndFor
\State $\mu_{best} \gets \max_{m \in M} \{\frac{\text{hits}[m]}{\text{tots}[m]}\}$ \Comment{Find best $\mu$}
\State $u \gets U(t,\confidence)$ \Comment{Confidence radius}
\For{$m \in A$} 
    \If{$\mu_{best} - u > \frac{\text{hits}[m]}{\text{tots}[m]} + u $}
    \State $A \gets A \setminus \{m\}$ \Comment{$\mu_m$ too far from best}
    \EndIf
\EndFor
\If{$|A| = 1$} \Comment{Only 1 model left}
\State \textbf{break}
\EndIf
\If{$\sum_{m \in M} \text{tots}[m] > N \cdot |M|$} \Comment{Reached max queries}
\State \textbf{break}
\EndIf
    \State $t \gets t + 1$
\EndWhile
\If{$|A| = 1 \text{ and } A \subseteq F$} \Comment{Model needs to be from $F$}
\State \Return $(\textsc{True},A)$
\EndIf
\State \Return \textsc{False}
\end{algorithmic}
\end{algorithm}
  
\section{Related Work}
\label{sec:related_work}
 \paragraph{\textbf{Equal entitlements.}}
 \cite{steinhaus1948problem} initiated fair allocation with the cake-cutting problem, followed by \cite{foley1966resource} advocacy for envy-free resource allocation. Challenges with indivisible items were outlined by \cite{schmeidler1971fair}. 
 
 \paragraph{\textbf{Fair allocation with Monetary Transfers.}}
 The concept of compensating an indivisible resource allocation with money has been explored in the literature ever since 
 \cite{demange1986multi} introduced an ascending auction for envy-free allocation using monetary payments for unit demand agents.
 
 Recently, the topic of multi-demand fair division with subsidies has attracted significant attention (see, e.g., a survey article \cite{LLSW24}).
 \cite{HaSh19a} showed that
 an allocation is envy-freeable with money if and only if the agents cannot increase
 social welfare by permuting bundles.
 \cite{Brustle2020} study the more general class of monotone valuations. They demonstrate that a total subsidy of $2(n-1)^2   V$ is sufficient to guarantee the existence of an envy-freeable allocation. Moreover, they showed that 
 for additive valuations where the value of each item is at most $V$,
 giving at most $V$ to each agent (i.e., a total subsidy of at most $(n-1)V$) is sufficient to eliminate envies.
 \cite{kawase2024towards} improved this bound to $\frac{n^2 - n - 1}{2}$.
 
 \cite{caragiannis2020computing} developed an algorithm that approximates the minimum subsidies with any required accuracy for a constant number of agents, though with increased running time. However, for a super-constant number of agents, they showed that minimizing subsidies for envy-freeness is both hard to compute exactly and difficult to approximate.
 
 \cite{Aziz21a} presented a sufficient condition and an algorithm to achieve envy-freeness and equitability (every agent should get the same utility) when monetary transfers are allowed for agents with quasi-linear utilities and superadditive valuations (positive or negative).
 
 \cite{barman2022achieving} studied agents with  dichotomous valuations (agents whose marginal value for any good is either zero or one), without any additivity requirement.
 They proved that, for $n$ agents, there exists an allocation that achieves envy-freeness with total required subsidy of at most $n-1$, which is tight even for additive valuations.
 
 \cite{Goko2024} study an algorithm for an envy-free allocation with subsidy, that is also \emph{truthful}, when agents have submodular \emph{binary} valuations. The subsidy per agent is at most $V=1$.
 Their algorithm works only for agents with equal entitlements.
 % \erel{Check if our truthful mechanism can be extended to submodular-binary valuations.}
 
 The case where multiple items can be allocated to each agent while the agents pay some amount of money to the mechanism designer, is extensively studied in combinatorial auctions \citep{cramton2006combinatorial}. A representative mechanism is the well-known Vickrey-Clarke-Groves (VCG)  mechanism (~\cite{clarke,groves:econometrica:1973,vickrey:1961}), 
 which is truthful and maximizes social welfare. Envy-freeness is not a central issue in combinatorial auctions, with a notable exception presented by \cite{Papa03b}.
 
 \paragraph{\textbf{Different entitlements.}}
 In the past few years, several researchers have examined a more general model in which different agents may have different entitlements, included weighted fairness models like \emph{weighted maximin share fairness (WMMS)} and \emph{weighted proportionality up to one item (WPROP1)} (\cite{chakraborty2021picking,BEF23a,ACL19a}).
 \cite{CISZ21} established \emph{maximum weighted Nash welfare (MWNW)} satisfies \emph{Pareto optimality} and introduced a weighted extension of EF1. \cite{suksompong2022maximum} demonstrated MWNW properties under binary additive valuations and its polynomial-time computability. They further extended these findings to various valuation types. 
 
 \paragraph{\textbf{Different entitlements with subsidies.}}
 There is a long-standing tradition in fair division to revisit settings and extend them to the case of weighted entitlements. In a classic book by \cite{BrTa96a}, many algorithms and results are extended to the cases of weighted entitlements. This tradition continues in the context of the allocation of indivisible items. 
 \cite{WuZZ23} presented a polynomial-time algorithm for computing 
 a PROP allocation of \emph{chores} among agents with additive valuations, with total subsidy at most $\frac{n  V}{4}$, which is tight.
 For agents with different entitlements, they compute a WPROP allocation with total subsidy at most $\frac{(n-1)  V}{2}$. 
 In a subsequent work (\cite{wu2024tree}), they further improved this bound to $(\frac{n}{3} - \frac{1}{6})V$. 
 
 As far as we know, weighted envy-freeness with subsides has not been studied yet. Our paper aims to fill this gap.
 
 \paragraph{\textbf{Matroid-rank valuations.}}
 Recent studies have considered \emph{matroid-rank} valuation (binary submodular). \cite{montanari2024weighted} introduce a new family of weighted envy-freeness notions based on the concept of \emph{transferability} and provide an algorithm for computing transferable allocations that maximize welfare. \cite{babaioff2021fair} design truthful allocation mechanisms that maximize welfare and are fair. Particularly relevant to our work is a recent work by \cite{viswanathan2022yankee}, who devised a fair allocation method inspired by Yankee Swap, achieving efficient and fair allocations when agents have submodular binary valuations. We use some of their techniques in our algorithms. Later, \cite{viswanathan2023general} generalize the Yankee Swap algorithm to efficiently compute allocations that maximize any fairness objective, called General Yankee Swap.
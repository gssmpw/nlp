% Dependencies:
% \usepackage{tikz}
% \usetikzlibrary{shapes.geometric, arrows}
% \usetikzlibrary{shapes.multipart}
{
\definecolor{blue0}{HTML}{3182BD}
\definecolor{blue1}{HTML}{1F77B4}
\definecolor{orange0}{HTML}{E6550D}
\definecolor{orange1}{HTML}{FF7F0E}
\definecolor{green0}{HTML}{31A354}
\definecolor{green1}{HTML}{74C476}
\definecolor{green2}{HTML}{A1D99B}
\definecolor{green3}{HTML}{C7E9C0}
\definecolor{purple0}{HTML}{756BB1}
\definecolor{purple1}{HTML}{9467BD}
\definecolor{grey0}{HTML}{636363}
\definecolor{grey1}{HTML}{969696}
\definecolor{red1}{HTML}{D62728}
\tikzstyle{io} = [rectangle, node distance=1.5cm, fill=white!80!black, draw, anchor=center, minimum width=1.5cm]
\tikzstyle{module} = [rectangle split, rectangle split parts=3, rounded corners, minimum width=1.5cm, minimum height = 0.5cm, text centered, align=center, draw=black]
\tikzstyle{operation} = [diamond, aspect=1.5, text centered, draw=black]
\tikzstyle{arrow} = [thick, ->, >=stealth]
\tikzstyle{i8_sty}=[draw, fill=blue1]
\tikzstyle{w8_sty}=[draw, fill=orange1]
\tikzstyle{o32_sty}=[draw, fill=purple1]
\tikzstyle{b32_sty}=[draw, fill=red1]
\tikzstyle{o8_sty}=[draw, fill=green1]
\tikzstyle{nlf8_sty}=[draw, fill=grey1]
%
\newcommand\drawmodule[7]{
    \node (#1) [module, #5_sty, #2, #3]{Q
        \nodepart{two} FI#7
        \nodepart{three} DQ};
    \ifthenelse{\equal{#6}{e}}{%
        \node (#1-label) at (#1.east) [anchor=west]{$#5$};
    }{\ifthenelse{\equal{#6}{e-s}}{
        \node (#1-label) at (#1.east) [anchor=south]{$#5$};
    }{\ifthenelse{\equal{#6}{w-s}}{
        \node (#1-label) at (#1.west) [anchor=south]{$#5$};
    }{
        \node (#1-label) at (#1.north) [anchor=south]{$#5$};
    }}}
    
}
%
%
\begin{tikzpicture}[node distance=2.5cm]
    \node (operation) [operation] {Operation};
    \drawmodule{iq}{above of=operation}{node distance=2cm}{i8}{i8}{e}{};
    \node (input) [io, above of=iq, node distance=1.4cm] {Inputs};
    \drawmodule{wq}{left of=operation}{rotate=90, anchor=center}{w8}{w8}{e-s}{};
    \node (weight) [io, left of=wq, rotate=90] {Weights};
    \drawmodule{bq}{right of=operation}{rotate=270, anchor=center}{b32}{b32}{w-s}{};
    \node (bias) [io, right of=bq, rotate=270] {Bias};
    \drawmodule{qout32}{below of=operation}{node distance=2cm}{o32}{o32}{e}{};
    \drawmodule{qout8}{below of=qout32}{node distance=2cm}{o8}{o8}{e}{};
    \node (output) [io, below of=qout8, node distance=1.4cm] {Outputs};
%
    \draw [arrow] (input) -- (iq);
    \draw [arrow] (iq) -- (operation);
    \draw [arrow] (wq) -- (operation);
    \draw [arrow] (weight) -- (wq);
    \draw [arrow] (bq) -- (operation);
    \draw [arrow] (bias) -- (bq);
    \draw [arrow] (operation) -- (qout32);
    \draw [arrow] (qout32) -- (qout8);
    \draw [arrow] (qout8) -- (output);
\end{tikzpicture}
}
%!TEX root = ./mainRSCED.tex

\begin{figure}[H]
\centering
\begin{tikzpicture}[circuit ee IEC, scale=1]
	\coordinate (b1) at (0, 2);
	\coordinate (b2) at (0, 0);
	\coordinate (b3) at (3, 1);
	\def\busLength{0.5}
	\def\busSep{0.75}
	\def\lineSep{0.4}
	\def\compSep{0.7}
	\def\threeCompBusSep{0.3}
	\def\twoCompBusSep{0.2}
	
	\node [label={above:$1$}] at ($(b1) + (0,\busLength)$) {};
	\node [label={above:$2$}] at ($(b2) + (0,\busLength)$) {};
	\node [label={above:$3$}] at ($(b3) + (0,\busLength)$) {};

	\draw [very thick] ($(b1) + (0,\busLength)$) -- ($(b1) - (0, \busLength)$);
	\draw [very thick] ($(b2) + (0,\busLength)$) -- ($(b2) - (0, \busLength)$);
	\draw [very thick] ($(b3) + (0,\busLength)$) -- ($(b3) - (0, \busLength)$);

	% Bus 1 -----------------------------------------------------------
	\node [ac source, info=$g_1$, label={below:\small$\$5$/MWh}] at ($(b1) - (\busSep + \busSep, -\twoCompBusSep)$) (g1) {};
% 	\node [wind source, info=$\xi$] at ($(b1) - (\busSep + \busSep, 0)$) (w1) {};
	\node [] at ($(b1) - (\busSep, \compSep + \twoCompBusSep)$) (d1) {\small $110$ MW};

	\draw [-] ($(b1) + (0, \twoCompBusSep)$) -- (g1);
% 	\draw [-] (b1) -- (w1);
	\draw [arrows={-angle 60}] ($(b1) - (0, \twoCompBusSep)$) -| (d1);

	% Bus 2 -----------------------------------------------------------
	\node [ac source, info=$g_2$, label={below:\small$\$1.2$/MWh}] at ($(b2) - (\busSep + \busSep, -\twoCompBusSep)$) (g2) {};
	\node [] at ($(b2) - (\busSep, \compSep + \twoCompBusSep)$) (d2) {\small $110$ MW};

	\draw [-] ($(b2) + (0, \twoCompBusSep)$) -- (g2);
	\draw [arrows={-angle 60}] ($(b2) - (0, \twoCompBusSep)$) -| (d2);

	% Bus 3 -----------------------------------------------------------
	\node[ac source, info=$g_3$,, label={below:\small$\$10$/MWh}] at ($(b3) - (-\busSep - \busSep, -\twoCompBusSep)$) (g3) {};
	\node [] at ($(b3) - (-\busSep, \compSep + \twoCompBusSep)$) (d3) {\small $95$ MW};

    \draw [-] ($(b3) + (0, \twoCompBusSep)$) -- (g3);
	\draw [arrows={-angle 60}] ($(b3) - (0, \twoCompBusSep)$) -| (d3);

	% Lines -----------------------------------------------------------
	\path [draw] ($(b1) + (0, -\twoCompBusSep)$)
				-- ($(b1) + (\lineSep, -\twoCompBusSep)$) 
				-- node [midway,right] {\small$X_{12} = 0.62 p.u.$} ($(b2) + (\lineSep, \twoCompBusSep)$) 
				-- ($(b2) + (0, \twoCompBusSep)$);

	\path [draw] ($(b1) + (0, \twoCompBusSep)$) 
				-- ($(b1) + (\lineSep, \twoCompBusSep)$)
				-- node [midway,above,sloped] {\small$X_{13} = 0.9 p.u.$} ($(b3) - (\lineSep, -\twoCompBusSep)$) 
				-- ($(b3) + (0, \twoCompBusSep)$);

	\path[draw] ($(b2) - (0, \twoCompBusSep)$)
				-- ($(b2) + (\lineSep, -\twoCompBusSep)$)
				-- node [midway,below,sloped] {\small$X_{23} = 0.75 p.u.$} ($(b3) - (\lineSep, \twoCompBusSep)$)
				-- ($(b3) - (0, \twoCompBusSep)$);
\end{tikzpicture}
\caption{A 3-bus network example.}
\label{fig:3bus}
\end{figure}


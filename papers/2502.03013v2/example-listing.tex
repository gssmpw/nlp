

\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegray},
    keywordstyle=\color{blue},
    numberstyle=\tiny\color{codepurple},
    basicstyle=\linespread{0.9}\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=1,
    morecomment=[l]{//},
morecomment=[s]{/*}{*/},
basewidth = {.47em}
}

\lstset{style=mystyle,  morekeywords={game,  input, state, formula, def, assert, assume, keep, from,to, with, Safety,loc}}

\begin{lstlisting}[label=lst:example,caption=Example specification in \issy format.,escapeinside={@}{@}]
input real add		  input real rem
state real load1		state real load2 	  state real rem1  		 state real rem2
formula {
 /* Assumption: From some time point on, the environment will always set the input variable add to be less than or equal to zero. */
 assume F G [add <= 0]
 /* Guarantee: From some point on,   load1 and load2 will always be zero. */     
 @\label{lst:lassert}@assert F G ([load1 = 0] && [load2 = 0])
 }
// Macros to make the specification easier to read
@\label{lst:baldef}@def balanced  = [load1 >= load2] && [load1 <= 2 * load2] 
              ||[load2 >= load1] && [load2 <= 2 * load1]
def addtoone  = [load1' = load1 + add] && [load2' = load2] 
              ||[load2' = load2 + add] && [load1' = load1]
def validrem  = [rem >= 0.1] && [rem <= load1 + 2/3 * load2]
def decrease  = [load1' = load1 - rem1'] && [rem1' + rem2' = rem]
              &&[load2' = load2 - 3/2 * rem2'] 
/* Two-player game with locations init, lbal, lrem, done and err,  and safety winning condition for the system, requiring that err is never reached. */
game Safety from init {
  loc init 1	   loc lbal 1	   	loc lrem 1	   loc done 1	  	loc err 0
  from init to done with [load1 < 0] || [load2 < 0]
  from init to lbal with [load1 >= 0] && [load2 >= 0] && keep(load1 load2)
  @\label{lst:lbalrem}@from lbal to lrem with [load1' + load2' = load1 + load2] 
  @\label{lst:lremerr}@from lrem to err  with !balanced 
  from lrem to done with balanced &&(!validrem ||([load1 = 0] && [load2 = 0]))
  @\label{lst:lrembal}@from lrem to lbal with balanced && [add > 0]  && addtoone
  from lrem to lrem with balanced && [add <= 0] && validrem && decrease
  from done to done with true 
  from err  to err  with keep(load1 load2)
 }
\end{lstlisting}
\section{Combinatorics Game Representations}
\label{appendix:F}

\paragraph{Problem setup as a game.}
Given a problem \(\mathcal{P}\) in English, we interpret it as a Markov game, that may be partially observable:
$G_{\mathcal{P}} \;=\; \bigl(\mathcal{S},\, \Omega,\,\mathcal{O},\, \mathcal{A},\, T,\, R\bigr),$
where $\mathcal{S}$ is the set of hidden states describing the true status of the problem,
$\Omega$ is the set of observations (partial information) that might be available to an agent,
$\mathcal{O}:\mathcal{S}\to\Omega$ is an observation function describing how states map to (possibly partial) observations,
$\mathcal{A}$ is the set of actions in the game,
$T:\mathcal{S}\times \mathcal{A}\to \Delta(\mathcal{S})$ a transition function, giving a distribution over next states given the current state and action, and $R:\mathcal{S}\times \mathcal{A}\to \mathbb{R}$ a reward function capturing the objective to be optimized (e.g., correctness of a solution, or tightness of a bound.



\subsection*{2024 IMO}
\label{appendix:F_2024_IMO}

\begin{table}[htb]
\caption{2024 IMO combinatorics problem 3: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
  Space    & Description \\
  \midrule
  State    & Sequence \( S = (a_1, a_2, \ldots, a_n) \), where \( n \leq N \) initially, then extended beyond \( N \): \\
           & • For \( n \leq N \), \( a_n \) are chosen by the agent \\
           & • For \( n > N \), \( a_n = \text{count}(a_{n-1}, S[1 : n - 1]) \) \\
           & • Counts \( C_k \): number of times integer \( k \) appears in \( S[1 : n] \) \\
  Action   & For each \( n \leq N \), select \( a_n \in \mathbb{N}^+ \) (positive integers) \\
  Reward   & After extending the sequence sufficiently: \\
           & • If at least one of \( a_1, a_3, a_5, \ldots \) or \( a_2, a_4, a_6, \ldots \) is eventually periodic: Reward \( = +1 \) \\
           & • If both sequences are non-periodic up to maximum length: Reward \( = -1 \) \\
  Terminal & Episode ends when either: \\
           & • Periodicity is detected in \( a_{\text{odd}} \) or \( a_{\text{even}} \) sequences \\
           & • Maximum sequence length is reached \\
  \bottomrule
\end{tabular} 
\end{table}

\begin{table}[htb]
\caption{2024 IMO combinatorics problem 5: State space, action space, and rewards.}
  \centering
  \small
  \begin{tabular}{cl}
    \toprule
    Space    & Description \\
    \midrule
    State    & Grid \( S \in \{0,1\}^{n \times (n-1)} \), where $n=2024$,\\
             & • \( S_{i,j} = 1 \) if cell \( (i,j) \) is visited \\
             & • \( S_{i,j} = 0 \) if cell \( (i,j) \) is unexplored \\
             & • Known monster locations are marked as blocked \\
    Action   & Four possible moves from the current position \( (i,j) \): \\
             & • Up: \( (i-1,j) \) if \( i > 1 \) \\
             & • Down: \( (i+1,j) \) if \( i < 2024 \) \\
             & • Left: \( (i,j-1) \) if \( j > 1 \) \\
             & • Right: \( (i,j+1) \) if \( j < 2023 \) \\
    Reward   & Each move: \( -0.01 \) step penalty \\
             & Monster collision: \( -1 \), and the episode ends \\
             & Reaching the last row rewards: \\
             & • First, second, third attempts: $+30$,$+20$,$+10$\\
    Terminal & Episode ends when either: \\
    States   & • Agent reaches any cell in row 2024 (success) \\
             & • Agent hits a monster (failure) \\
    \bottomrule
    
  \end{tabular}  
\end{table}

\newpage
\clearpage

\subsection*{2024 USAMO}
\label{appendix:F_2024_USAMO}

\begin{table}[htb]
\caption{2024 USAMO combinatorics problem 2: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
  Space    & Description \\
  \midrule
  State    & Current assignment of elements to the sets \( S_1, S_2, \ldots, S_{100} \): \\
           & • \( S_{i,j} = 1 \) if element \( e_i \) is in set \( S_j \), \( 0 \) otherwise \\
           & • The intersection of all sets is not empty: \\
           &   – There exists at least one element \( e_i \) present in all sets \\
  Action   & Assign or remove an element \( e_i \) to selected sets \( S_j \): \\
           & • Decide for each element which sets it belongs to \\
  Reward   & For each action: \\
           & • Penalty \( -1 \) if constraints are violated \\
           & • Reward \( +1 \) for satisfying constraints \\
           & • Additional reward \( +10 \) for minimizing the number of elements in at least 50 sets \\
  Terminal & Episode ends when: \\
  States   & • All elements have been assigned and constraints are satisfied (success) \\
           & • Constraints cannot be satisfied (failure) \\
  \bottomrule
\end{tabular}
\end{table}


\begin{table}[htb]
\caption{2024 USAMO combinatorics problem 4: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
  Space    & Description \\
  \midrule
  State    & Configuration of the necklace with \( m n \) beads: \\
           & • Each bead \( b_i \) is colored red (R) or blue (B) \\
           & • The necklace is circular; beads are arranged in positions \( 1 \) to \( m n \) \\
  Action   & Change the color of a bead: \\
           & • Select bead \( b_i \) and flip its color (R to B or B to R) \\
  Reward   & For each action: \\
           & • Step penalty \( -0.1 \) per action \\
           & • If condition is satisfied: \\
           &   – Reward \( +100 \) \\
           & • If condition is not satisfied after maximum steps: \\
           &   – Penalty \( -100 \) \\
           & • Condition: \\
           &   – No matter how the necklace is cut into \( m \) blocks of \( n \) consecutive beads, \\
           &     each block has a distinct number of red beads \\
  Terminal & Episode ends when: \\
  States   & • The condition is satisfied (success) \\
           & • Maximum number of steps is reached (failure) \\
  \bottomrule
\end{tabular}
\end{table}

\newpage
\clearpage








\subsection*{2023 IMO Shortlist}
\label{appendix:F_2023_IMO_Shortlist}

\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 1: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space    & Description \\
\midrule
State    & Grid $S \in \{0,1\}^{m \times n}$, where $m,n > 1$ \\
         & • $S_{i,j} = 0$ if the coin at position $(i,j)$ shows tail-side up \\
         & • $S_{i,j} = 1$ if the coin at position $(i,j)$ shows head-side up \\
Action   & Select a $2 \times 2$ square starting at $(i,j)$, where \\
         & $1 \leq i \leq m-1$, $1 \leq j \leq n-1$, and perform: \\
         & • Flip coins at positions $(i,j)$ (top-left) and $(i+1,j+1)$ (bottom-right) \\
         & • Flip the coin at either $(i,j+1)$ (top-right) or $(i+1,j)$ (bottom-left) \\
Reward   & Each move incurs a cost of $-1$ \\
         & Reaching the state where all coins show head-side up gives a reward of $+1000$ \\
Terminal & Episode ends when all coins show head-side up (success) \\
States   & \\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 2: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space    & Description \\
\midrule
State    & Current sequence $a_1, a_2, \ldots, a_k$, where $k \leq L$ \\
         & • Each $a_i \in \{1, 2, \ldots, 2^{2023}\}$ \\
Action   & Choose the next integer $a_{k+1}$ such that $1 \leq a_{k+1} \leq 2^{2023}$ \\
Reward   & $+1$ for each valid addition that maintains the condition: \\
         & • No consecutive subsequence $a_i, \ldots, a_j$ and signs $s_i, \ldots, s_j \in \{1,-1\}$ \\
         &   satisfying $s_i a_i + \ldots + s_j a_j = 0$ \\
         & Episode ends with zero reward if condition is violated \\
Terminal & Episode ends when either: \\
States   & • The sequence violates the condition (failure) \\
         & • The maximal length $L$ is reached (success) \\
\bottomrule
\end{tabular}
\end{table}


\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 3: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space    & Description \\
\midrule
State    & Triangle grid with $n$ rows \\
         & • Each circle is either red or not \\
         & • Current position in the path (row $i$, position $j$) \\
Action   & Move to one of the two circles directly below: \\
         & • Left child at $(i+1, j)$ \\
         & • Right child at $(i+1, j+1)$ \\
Reward   & For each move: \\
         & • If the circle is red, reward $+1$ \\
         & • Otherwise, reward $0$ \\
Terminal & Episode ends when the path reaches the bottom row \\
States   & Goal is to maximize the total reward (number of red circles in the path) \\
\bottomrule
\end{tabular}
\end{table}

\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 4: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space    & Description \\
\midrule
State    & Arrangement of pieces created from cuts \\
         & • Positions of pieces in the $n \times n$ grid \\
Action   & Decide where to make cuts in the strip (between positions $1$ to $n^2 -1$) \\
         & Place each piece into the grid, without rotations or flips \\
Reward   & Each cut incurs a penalty of $-1$ \\
         & Assembling the grid satisfying $a_{ij} - (i+j-1) \equiv 0 \mod n$ rewards $+1000$ \\
Terminal & Episode ends when the grid is correctly assembled satisfying the property \\
States   & Goal is to minimize the number of cuts (pieces) \\
\bottomrule
\end{tabular}
\end{table}





\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 5: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space    & Description \\
\midrule
State    & For each chest $i$ ($1 \leq i \leq 2023$): \\
         & • Number of gems $g_i$ \\
         & • Status: locked or unlocked \\
Action   & Elisa selects an unlocked chest to add a gem \\
         & Fairy then locks an unlocked chest (if more than one) or unlocks all chests (if only one) \\
Reward   & Negative reward proportional to the maximum gem difference: \\
         & • $R = - (\max_{i,j} |g_i - g_j|)$ \\
Terminal & Process continues indefinitely; focus is on maintaining $\max_{i,j} |g_i - g_j| \leq C$ \\
\bottomrule
\end{tabular}
\end{table}






\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 6: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space    & Description \\
\midrule
State    & Current partitioning of the $N \times N$ grid into paths \\
Action   & Assign cells to paths following right-down or right-up rules \\
Reward   & Penalty of $-1$ for each new path created \\
         & Reward for successfully partitioning all cells with minimal number of paths \\
Terminal & Episode ends when all cells are assigned to paths \\
\bottomrule
\end{tabular}
\end{table}





\begin{table}[htb]
\caption{2023 IMO Shortlist combinatorics problem 7: State space, action space, and rewards.}
  \centering
  \small
\begin{tabular}{cl}
  \toprule
Space & Description \\
\midrule
State    & A complete graph of \( n \) islands with edges labeled by one of \( k \) companies. \\
Action   & Analyze the graph to determine the impact of removing any one company's edges. \\
Reward   & Correctly identifying the maximal \( k \) based on \( n \) earns a reward \( +1 \). \\
         & Incorrect determination incurs a penalty \( -1 \). \\
Terminal & Episode ends after determining the maximal possible \( k \). \\
\bottomrule
\end{tabular}
\end{table}


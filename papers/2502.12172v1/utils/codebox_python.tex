\usepackage[listings,many]{tcolorbox}
\usetikzlibrary{calc}
\tcbuselibrary{breakable}

\definecolor{bluPoli}{RGB}{0,43,73}

\tcbset{listing engine=listings}
\tcbset{mystyle/.style={
  breakable,
  enhanced,
  leftrule=1pt,
  rightrule=1pt,
  toprule=1pt,
  bottomrule=1pt,
  outer arc=0pt,
  arc=0pt,
  colframe=bluPoli,
  colback=white,
  attach boxed title to top left,
  boxed title style={
    colback=bluPoli,
    outer arc=0pt,
    arc=0pt,
    top=1pt,
    bottom=1pt,
    },
  },
}


\newtcblisting[auto counter]{mycodebox}[2][]{
    mystyle,
    listing options={language=Python,
                     basicstyle=\ttfamily\footnotesize,
                     xleftmargin=0mm,
                     breaklines=true, % Automatic line breaking
                     breakatwhitespace=true, % Break lines at whitespace
                     commentstyle=\color{green!50!black}, % Comment color
                     showstringspaces=false,
                     },
    listing only,
    title=Code~\thetcbcounter,
    fonttitle=\footnotesize\sffamily,
    overlay unbroken and first={
        \path
            let
            \p1=(title.north east),
            \p2=(frame.north east)
            in
            node[anchor=west,font=\footnotesize\sffamily,color=bluPoli,text width=\x2-\x1]
            at (title.east) {#1};
    },
    label=#2
}
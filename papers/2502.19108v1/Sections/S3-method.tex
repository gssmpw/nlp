\section{Our Dataset}
Telegram \cite{telegram_tos} is a widely used open-source messaging platform, offering publicly accessible conversations. The interactions within these groups are natural, making them a valuable source for understanding human behavior, particularly in the context of personalization. As such, they present a promising dataset for emoticon-related research \cite{analysis-of-telegram-an-instant-messaging-service, analyzing-predicting-news, pushshift, unearthing, data-collection-opportunies, tgdataset}.

However, the raw data requires preprocessing before it can be utilized effectively. In the following sections, we outline the process of constructing the dataset. We begin by defining the criteria used in the construction process.

% 1, open, natural, personalized

% no limitations on the public chats
% and checking to make sure no copyright problems

\subsection{Construction Criteria}
Given the significant implications of this dataset for future research, we adhere to the following criteria to ensure the quality and reliability of the data source 

We firstly define the envision for the final user-emoticon dataset. Since emoticons are the focal point of this dataset, we would like a \textbf{high presence of emoticons}. Additionally, since we would like to analyze interactions across different domains, the final dataset should involve \textbf{diverse topics}. We would also like the dataset to be of high-quality; avoidance of spam, advertisement and groups with single person. Moreover, we noticed that previous studies overlooked linguistic variety, hence, we wish our final dataset to have \textbf{multilingual coverage}. Finally, to ensure a robust and generalizable dataset, we strive for \textbf{sufficient dataset size}. 

We translate the above goals into the following dataset construction criteria,
\begin{enumerate}
    \item \textbf{Emoticon prevalence}: Conversations must contain a significant number of emoticons.
    \item \textbf{Topic diversity}: A wide range of discussion topics should be represented.
    \item \textbf{Authentic interactions}: We focus on real user-to-user conversations while avoiding:
    \begin{enumerate}
        \item Announcement-based channels with a single speaker.
        \item Conversations dominated by spam, advertisements, or inappropriate content.
    \end{enumerate}
    \item \textbf{Linguistic diversity}: Conversations should represent multiple languages.
    \item \textbf{Scalability}: We aim to capture as many suitable conversations as possible.
\end{enumerate}

Following these criteria, we manually screened hundreds of conversation groups and ultimately selected \textbf{71} conversation groups to crawl their content.

\subsection{Dataset Pre-processing}
The dataset, crawled using Telethon \cite{telethon}, contains key components from user messages, including the unique conversation group ID, group name, message datetime, user ID, media types, message ID, message text, and emoticon details (ID, set ID, access hash, and mime type). Users may participate in multiple conversation groups.
% The dataset presented in Table \ref{tab:crawled_message_components} was crawled using Telethon \cite{telethon}, capturing key components of user messages. The data includes several attributes, such as a unique conversation group ID and its corresponding name, which identify the specific conversation group. Each message is timestamped with the date and time it was sent, and it includes the user ID of the person who sent it. The dataset also tracks the types of media included in messages, as well as a unique message ID. In addition to the message text content, emoticons used in the conversation are recorded, including their unique emoticon ID, emoticon set ID, access hash, and the format or mime type of the emoticons. Itâ€™s important to note that users can participate in multiple conversation groups, and therefore the dataset may contain multiple entries for a single user.
% We present the information found in the dataset in Table \ref{tab:crawled_message_components}, crawled using Telethon \cite{telethon}. Note that users can participate in more than one conversation group.

% \begin{table}[ht]
% \centering
% \caption{Table of Crawled Data Components from Messages}
% \begin{tabular}{cl}
% \toprule
% \textbf{Name}                & \textbf{Description}                                                \\ \midrule
% Conversation group ID        & Unique conversation identifier                                     \\
% Conversation group name      & Group name                                                          \\
% Datetime                     & Message sent datetime                                               \\
% User ID                      & User identifier \\
% Media types                  & Message media                                                       \\
% Message ID                   & Unique message identifier                                  \\
% Message text                 & Message text content                                                \\
% Emoticon ID                   & emoticon identifier                                                  \\
% Emoticon set ID               & emoticon set identifier                                              \\
% emoticon access hash          & Unique access hash to emoticon                                       \\
% emoticon mime type            & emoticon format            \\ \bottomrule
% \end{tabular}
% \label{tab:crawled_message_components}
% \end{table}

\subsubsection{Text Processing}
As our dataset has been collected with multilingual diversity in mind, we identify the languages utilized for ease of downstream processing. We utilize the \textbf{xlm-roberta-base-language-detection} model \cite{conneau2019unsupervised} for language identification. The model provides both the detected language and a confidence score, and we utilize a threshold of 0.99 used to ensure high reliability in language detection.

After language detection, we manually review the classification results, removing entries with fewer than 20 occurrences and those from administrative bots. The final language distribution is illustrated in Figure ~\ref{fig:language-distribution}. In total, we detect 18 languages, with the top ten languages in order being English, Russian, French, Spanish, Chinese, Polish, Italian and German, Turkish, Portugese. As can be seen, emoticonU features 18 languages which is potentially viable for multilingualism emoticon-related task.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.8\linewidth]{Images/language-distribution.jpg}
    \caption{Distribution of detected languages in the dataset. The dataset features over 18 languages. The top ten languages are English, Russian, French, Spanish, Chinese, Polish, Italian and German, Turkish, Portugese.}
    \label{fig:language-distribution}
\end{figure}

% \subsubsection{Conversation Content}
% \todo{in a table, name, description}
% In the first phase, we crawl text messages using the iter\_messages method. This phase provides us with various information, including the group name, group ID, and member details. Additionally, we gather message-specific metadata, such as the message ID, user ID of the sender, any reply relationships (reply-to message ID, if applicable), the presence of emoticons, and other media types (e.g., videos, images, and audio metadata). For each message, we also collect the datetime of the message and the message text itself. emoticons are further detailed by their ID, emoticon set ID, mime type, and access hash. Following this, we analyze the collected data to extract relevant metadata for further processing.

% \begin{table}[h]
%     \centering
%     \caption{Preliminary Statistics of raw data. At this point, the dataset has 424,793 users, 487,128 emoticons. }
%     \begin{tabular}{lr} 
%     \toprule
% Field & Number\\ \hline
%     % \# Groups                                   & 71 \\
%     % \# Messages                                 & 8,964,560 \\
%     % \# emoticons                                 & 512,192 \\
%     % \# Users                                    & 24,370 \\
%     % \# Unique emoticons                          & 142,981 \\
%     % Avg. \# emoticon per User                    & 21.02 \\
%     \# Groups                                   & 71 \\
%     \# Users                                    & 24,370 \\
%     \# emoticons                                 & 142,981 \\
%      \# Messages\_Text                               & 8,452,368 \\
%      \# Messages\_emoticon                                 & 512,192 \\
%      Avg. \# M\_emoticon per User                    & 21.02 \\
%     \bottomrule     
%     \end{tabular}
%     \label{tab:dataset-statistics}
% \end{table}

\subsubsection{Emoticon Processing}
% After selecting the groups, we proceeded to crawl the individual emoticons using the \texttt{get\_media} API. This allowed us to download emoticons for further analysis. We encountered several challenges during this phase. First, the access hash, which is critical for downloading emoticons, expires after a short period, complicating the download process. Second, the messages themselves also have an expiration window, which means they cannot be re-crawled once the period has passed. Additionally, the Telethon API access keys allow for single-threaded downloads, significantly increasing the time required for the emoticon download process. With this, our dataset contains \textbf{507,812} emoticons, an approximate conversion rate of \textbf{99.14\%} with the missing emoticons mainly due to copyright or expired messages.
The downloaded emoticons come in three formats; \texttt{.webp}, \texttt{.webm}, and \texttt{.tgs}, we present the extension distribution in Figure \ref{fig:emoticons-extension-distribution}. We convert all \texttt{tgs} files to the \texttt{.gif} extension using \texttt{tgsconverter} \cite{tgsconverter}, \texttt{.webp} is converted to \texttt{.png} and no conversion is done to \texttt{.webm}. We break up dymamic images into frames and save a frame every second to prepare for later use.

% After processing, there are an average of 2.69 frames per dynamic emoticon. 

% Finally, we present the distribution of the downloaded emoticons in Fig ~\ref{fig:emoticons-extension-distribution}. 

% \textbf{Distribution of emoticon Formats:} We present the distribution of the downloaded emoticons in three formats: \texttt{.tgs}, \texttt{.webp}, and \texttt{.webm}. 

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.7\linewidth]
    % \includegraphics[width=\textwidth]
    {Images/piechart-stickers-ext-distribution.jpg}
    \caption{Preliminary emoticons extension distribution. 65.6\% of the emoticons are static and 34.4\% are dyanimc.}
    \label{fig:emoticons-extension-distribution}
\end{figure}

% We spent approximately 72 hours crawling the text and another 336 hours crawling the emoticons. The conversion process was negligible in terms of time, as it was conducted in parallel with the crawling process. 
% In total, the entire crawling process took approximately 408 hours.

% Previously there was no xxx, then we intend to xxx. UserID, time, conversations and emoticons, userID is shared amongst different groups (domains).
% Spent more than 720 hours crawling the data. First the messages, initially emoticon packs were crawled but constrained by resources (memory and time), then just the emoticons. We also considered the gifs but prioritized the emoticons first. Notice that messages expire which means we have to re-crawl messages. Since these messages are tagged to a single user, they can only be crawled single-thread which makes the process tedious. Since formats are downloaded as webp, webm, and tgs, where they are converted to png, mp4 and gif, the process is time consuming.

% - defined 10 categories

% \subsection{Automatic Sensitive Data Detection}
% content tagging
% With the conversation and emoticons crawled, we perform data verification. Naturally with a lenient moderation platform, offensive language and images could potentially exists. Hence, we utilize a series of tools to moderate and tag the messages.  We implement a two-phase content moderation pipeline to identify and filter out NSFW (Not Safe For Work) language and images in our dataset.

\subsection{Unsafe Text Detection and Replacement}
% The goal of text content moderation is to remove unsafe text. We perform this in two phases; offensive language detection and hyperlinks detection.

We aim to moderate the safety of textual content. We perform this in two phases; (1) unsafe text detection and (2) offensive text replacement.

\subsubsection{Unsafe Text Detection}
We identify two types of unsafe text; offensive language and hyperlinks. 

\paragraph{Offensive Language}
Offensive text are content that could contain racism, vulgarities or other potentially offensive content. Since different languages require specialized tools for detecting offensive content, we focus on the ten most used languages in our dataset: \textbf{English, Russian, French, Spanish, Chinese, Polish, Italian and German, Turkish, Portugese}. For each, we employ well-established moderation models that have been published in peer-reviewed conferences, we describe the models in the following and the threshold values.

\begin{itemize}
    \item \textbf{roberta-base-cold} \cite{chinese-moderate}: Detects offensive language in \textbf{Chinese}. The model returns a binary label, positive values are tagged as offensive language.
    \item \textbf{twitter-roberta-base-offensive} \cite{en-moderation}: Identifies offensive language in \textbf{English}. The model returns a 0 to 1 score for offensive and not-offensive tags. We set the offensive threshold as 0.87.
    \item \textbf{russian-sensitive-topic} \cite{russian-content-moderation}: Flags sensitive or offensive content in \textbf{Russian}. The model returns "sensitive" or "not-sensitive" tags. We set "sensitive" content as offensive.
    \item \textbf{toxic-bert} \cite{multi-content-moderation}: A multilingual model that detects offensive language in \textbf{French, Turkish, Portuguese, Italian, Spanish, English, and Russian}. The model returns a score from 0 to 1. We set offensive threshold to be less than 0.0004.
    \item \textbf{dehatebert-mono-polish} \cite{aluru2020deep}: Detects hate speech in \textbf{Polish} language. The model returns a binary label, positive values are tagged as offensive language.
\end{itemize}

We present the offensive language detection results in the Figure ~\ref{fig:image-detection}, where the blue are safe and red are potentially offensive.

\begin{figure}[htbp]
    \centering
    \includegraphics[width=1.0\linewidth]{Images/safety-language.jpg}
    \caption{Distribution of offensive comments among language groups.}
    \label{fig:image-detection}
\end{figure}

The dataset shows that offensive language is relatively rare, with only 0.43\% of messages flagged as NSFW. This reflects typical user-generated platforms, where offensive content is present but remains a minority of overall interactions.

\paragraph{Hyperlinks}
Links are naturally present in group conversations. However, these links could potentially contain unsafe content. Hence, we use regular expression \cite{regex} detection to uncover 463,367 links in 313,906 messages and tag them for future modification.

\subsubsection{Unsafe Text Replacement}
\begin{itemize}
    \item \textbf{Offensive Language Replacement}:  
    Offensive or harmful language detected in text messages is replaced with the placeholder label:  
    \textit{detects this as offensive text.}  
    This approach preserves conversation structure while flagging offensive text, ensuring safety without losing context.
    
    \item \textbf{URL/Link Replacement}:  
    When URLs or links are identified in messages, they are replaced with the label:  
    \textit{emoticonU detects a link.}  
    This ensures private or potentially harmful web addresses are not exposed in the dataset, while preserving the flow of conversation and preventing leakage of sensitive data.
\end{itemize}

\subsection{Unsafe Image Moderation and Replacement}
Next, we move on to unsafe image moderation, where we employ (1) detection and (2) text replacement.

\subsubsection{Unsafe Image Detection}
The purpose of image moderation is to remove offensive images; these include violent, sexual or offensive. To achieve this, we employ several readily available tools. We introduce them in the following;
\begin{itemize}
    \item \textbf{nsfw-image-detection} \cite{falconsai2024nsfw}: has over 54 million downloads on Huggingface and classifies images into normal and not safe for work (nsfw).
    \item \textbf{nsfw-classifier} \cite{giacomo_arienti_2024}: classifies images into four categories - (1) drawings, (2) neutral, (3) hentai and (4) sexy.
    \item \textbf{vit-base-violence-detection} \cite{jaranohaal2024violence}: outputs binary labels for image violence detection.
    \item \textbf{vit-base-nsfw-detector} \cite{adamcodd2024nsfw}: classifies images into nsfw and Safe For Work (sfw).
\end{itemize}

% Since the above models can only support static images whereas 34.4\% of our emoticons are dynamic and break up dymamic images into frames, we save a frame every second. We ran the framing process simultaneously with other processes and hence the recorded time is neglible. After processing the dynamic emoticons, there are an average of 2.69 frames per dynamic emoticon. 

\begin{figure}[htbp]
    \centering
    \includegraphics[width=1.0\linewidth]{Images/vertical-barchart-image-detection_v2.jpg}
    \caption{Distribution of nsfw vs. sfw amongst the four offensive image detection models on the raw data.}
    \label{fig:image-detection-v2}
\end{figure}

% Explanation for why the vit-base-violence-detection is so high?

We utilize the frame processed above and static images into the four models, where we obtain the nsfw to sfw ratio. We present the results in Figure \ref{fig:image-detection-v2}. nsfw-image-detection is 0.88\%, nsfw-classifier is 0.93\%, vit-base-violence-detection is 27.27\%, vit-base-nsfw-detector  is 0.47\%. Then, \textbf{471,517 (92.06\%)} emoticons do not contain offensive taggings and and {40,675 (7.94\%)} images are considered offensive. Finally, there are a remaining \textbf{67} conversation groups.

\subsubsection{Unsafe Image Removal and Replacement}
For the identified offensive images, we replace the textual content with the placeholder \textit{detects this as offensive image}. This helps maintain the integrity of the dataset while ensuring that no harmful visuals, such as explicit or violent content, are retained, thus reducing the risk of privacy violations or inappropriate representations. Then, we remove the emoticon entirely from our emoticon database.

% \subsection{Automatic Sensitive Data Modification}
% but really, its just data replacement
% Finally, we sanitize the acquired data. In this section, we tackle privatization and censorship.
\subsection{Privatization}
In addition to safety, the privacy of the data is paramount.

\subsubsection{User Identifier}
\paragraph{Hashing sender identifier}
To protect the user's privacy, we anonymize the user identifiers by hashing their original integer identifiers using the SHA-256 hash function \cite{sha256}. Originally, the user identifiers were integers ranging from five-digital value to a maximum value of ten-digit value. After applying the SHA-256 hashing algorithm \cite{sha256}, the user identifiers are transformed into 256-bit strings, which are irreversible and do not retain any direct correlation with the original numeric values. This ensures that the users' identities are kept private, while still allowing for secure and effective data processing and analysis.
one more

\paragraph{Replacing Mentions}
It is common for users to interact with each other in the conversation group. To protect user privacy, we use regular expressions \cite{regex} to identify user identifiers and mentions (e.g., \@username) within text and replace them with the label \textit{\#USER}. Additionally, when users are mentioned via hyperlinks, these occurrences are replaced with \textit{\#USER\_ID}. Importantly, we do not replace the entire utterance but rather focus on replacing only the sensitive information, thus preserving the majority of the conversational context.

\subsubsection{Message Information}
We also anonymize message identifiers through the same SHA-256 hashing algorithm mentioned above.

\subsubsection{Other Sensitive Information}
To prevent the leakage of sensitive user information such as names, ages, addresses, organizations, or phone numbers, we use predefined context dictionaries to search the conversation logs. These logs are then further tagged by Llama-3.1-8B-Instruct \cite{llama}. Any sensitive information found is replaced with the label \textit{\#SENSITIVE-INFORMATION} within the conversation, but are not replaced entirely.



% \subsubsection{Censorship}
% Ensuring the safety and appropriateness of the emoticonU dataset is paramount, while maintaining its fluency and richness is equally important. Instead of removing potentially harmful or sensitive content entirely, we adopt a moderation approach where such content is replaced with predefined labels. This ensures that the dataset remains intact for analysis while protecting sensitive users and preserving the datasetâ€™s integrity.

% \begin{itemize}
    % \item \textbf{Text}: Offensive or harmful language detected in the text messages is replaced with a placeholder label, \textit{emoticonU detects this is offensive text}. This approach allows us to retain the structure and flow of conversations without compromising the privacy or safety of individuals. The offensive text is thus flagged without removing the contextual richness of the message.
    
    % \item \textbf{Images}: 
    
    % \item \textbf{Hyperlinks}: 
% \end{itemize}

\subsection{Manual Verification}
% \subsubsection{Manual Review}
After implementing the automatic process unsafe text, image and privatization we conduct a \textbf{manual review} as an additional safeguard to ensure the datasetâ€™s safety and quality. We perform this in three phases (1) browsing through the conversation for private information leakage and, (2) relabeling them with appropriate tags.

% In this phase, a subset of the dataset is randomly sampled and carefully examined by human reviewers. The goal is to verify that the automated procedures have successfully removed or replaced all sensitive and harmful content without affecting the overall structure or meaning of the messages. The manual review process is essential for catching any potential issues that automated processes may have missed, such as false negatives or inaccuracies in labeling. 

% The manual review also serves to ensure that the balance between data sanitization and contextual richness is maintained. Human reviewers assess not only the appropriateness of the labels but also confirm that the dataset remains useful for analysis and research purposes. This step reinforces the datasetâ€™s integrity and ensures that it meets the privacy and safety standards required for further processing. Finally, we have a dataset that is ready for further analysis.

% Purpose to ensure the reasonability and safety issues.
% 1. Human checking how many samples, and if there are any problems
% 2. GPT to confirm, which ones we have sampled

% \subsubsection{Removing Obsolete Groups}
% Since our dataset focuses on emoticons, we remove groups that have no emoticons due to content moderation. This remains us with 67 groups.

\subsection{Conversation Topic Labeling}
% \todo{dont mention multi-group in telegram, all rename to group-conversation}
% not to separate the group, for analysis and future scenario analysis, amend the motivation
To enable groups for future scenario analysis, we categorize conversations into domains. We utilize a two-step approach. First, we read the conversation name, which often provides a clear indication of the conversation's general focus. Next, we browse through the conversation content, examining the topics and discussions that occur within. This process enables us to accurately identify the predominant subject matter of the conversation.

Our categorization is based on domains related to common hobbies and interests. We identify ten primary domains: 

\begin{itemize}
    \item \textbf{Language:} This domain includes conversations focused on learning new languages, sharing language learning resources, or discussing language-related topics.
    \item \textbf{Arts:} Conversations under this domain typically involve the sharing of artwork, discussions around different forms of art, drawing techniques, and other creative activities.
    \item \textbf{Games:} Conversations in this domain revolve around various forms of gaming, whether they are video games, board games, or other interactive entertainment.
    \item \textbf{Technology:} Conversations here engage in code sharing, learning new programming languages, discussing software development, or delving into the latest technological innovations.
    \item \textbf{Finance:} This domain focuses on topics related to financial discussions, including traditional investing, cryptocurrency, blockchain technologies, and financial exchanges.
    \item \textbf{Social:} Conversations under the Social domain are centered around meeting new people, making friends, or organizing social events such as meetups and hangouts.
    \item \textbf{Media Sharing:} Conversations in this category often focus on sharing and discussing media content such as emoticons, memes, gifs, and videos for entertainment and social interaction.
    \item \textbf{Outdoor:} Conversations here revolve around nature, outdoor activities like hiking and camping, and the appreciation of animals and the environment.
    \item \textbf{Anime:} This domain is dedicated to discussions about anime, cartoons, and related pop culture topics, including anime recommendations and fan theories.
    \item \textbf{Fan Club:} Conversations in this category are focused on specific celebrities, idols, or fictional characters, where users come together to share their admiration and discuss fan-related topics.
\end{itemize}

While these categories cover a wide range of interests, some topics naturally overlap. For instance, the increasingly popular genre of crypto-based gaming involves elements of both gaming and finance, as users play games to earn cryptocurrency. However, to maintain a concise and organized dataset, we prioritize the dominant domain in such casesâ€”crypto gaming would thus fall under the Finance category in this example. The final dataset, after domain labeling, is presented and analyzed in the following section, where we examine the distribution of conversations across these domains and the insights derived from this classification.

\section{Dataset Analysis}
% We ignore censored data herein. 
% large, multi domain, multilingual, user interaction, 5.2 > 4.3, check 
We analyze our dataset and share our findings in the following section. Firstly, we present a statistical overview of the dataset. Secondly, we dive into the multi-domain characteristics of our dataset. Finally, we analyze potential user behavior found in our dataset.

\subsection{Statistic}
% In this section, we present the scale of the dataset, as well as the language and emoticons distributions.

\subsubsection{Overall Information}

\begin{table}[h]
    \centering
    \caption{Statistics of the raw data and final emoticon dataset. Ours is the largest in size and contains user IDs across conversations.}
    \begin{tabular}{@{}lccc@{}} 
    \toprule
    Field & Raw Data & Ours \\ \hline
    \# Domains                               & -       & 10     \\
    \# Groups                                   & 70      & 67 \\
    % \# Unique Users                                 & \todo{24,933}  & \todo{22,629} \\
    % \# Unique emoticon Users                                 & 24,370  & 21,901 \\
    \# Unique Emoticons                          & 142,981 & 105,933 \\
    \midrule
    \ \textit{Messages} &&& \\
    % \# Text                          & 8,964,549 & 8,399,179 \\
    \# emoticons                      & 512,192   & 370,222 \\
    % \# Text                         & 8,964,549 & 8,399,179 \\
    \# Text                          & 8,332,351 & 8,286,422 \\
    \midrule
    % \# Avg. emoticons per User        & 20.54    & 16.36 \\
    \# Avg. Emoticons per User        & 21.01    & 16.90 \\
    \bottomrule     
    \end{tabular}
    \label{tab:dataset-statistics}
\end{table}

% Notably, we have defined domains and reduced sparse groups from 70 to 67. While ensuring the safety and privacy of the emoticonU with the automatic sensitive data detection, replacement and human verification, our dataset is, to the best of our knowledge, the largest with \textbf{370,222} emoticons, \textbf{22,629} emoticon users and \textbf{16.36} average emoticons per user.

As shown in Table~\ref{tab:dataset-statistics}, our dataset is large in size and contains user information for cross conversation and cross domain analysis and modeling.
Notably, we filter the raw data from the public platform for safety and privacy concerns to form the final dataset. 
% \begin{table}[h]
%     \centering
%     \caption{Summary statistics of the final emoticonU. emoticonU contains 8,399,179 utterances, 370,222 emoticons, 22,629 users and an average of 16.36 emoticons per user.}
%     \begin{tabular}{@{}lccc@{}} 
%     \toprule
%     Field & Before & After & Difference \\ \hline
%     \# Categories                               & -       & 10      & -     \\
%     \# Groups                                   & 70      & 67      & 0.0429 \\
%     \# Users                                    & 24,933  & 22,629  & ($\textcolor{black}\triangledown$ 0.0924) \\
%     \# Unique emoticons                          & 142,981 & 105,933 & ($\triangledown$ 0.2591) \\
%     \midrule
%     \ \textit{Messages} &&& \\
%     \# Text                          & 8,964,549 & 8,399,179 & ($\triangledown$ 0.0631) \\
%     \# emoticons                      & 512,192   & 370,222  & ($\triangledown$ 0.2772) \\
%     \midrule
%     \# Avg. emoticons per User        & 20.54    & 16.36    & ($\triangledown$ 0.2036) \\
%     \bottomrule     
%     \end{tabular}
%     \label{tab:dataset-statistics}
% \end{table}


% before and after, and remove the groups (triangle for percentages), update the captions, bigger words within the images. add dot in the figures. categories in the first line of tTable 3
\begin{table*}[h]
    \centering
    \caption{Domain Statistics.}
    \begin{tabular}{@{}lcccccccc@{}} 
    \toprule
    \textbf{Category} & \textbf{Text Messages} & \textbf{Emoticons}& & & \textbf{Users}&& \textbf{Sparsity} & \textbf{Dom. Language} \\
    &  & \textit{Global}& \textit{Unique} & \textit{Avg. Per User}& \textit{Global} & \textit{Use Emoticons} & & \\ \midrule

    Anime & 364,543 & 87,833 & 22,572 & 44.90 & 10,448 & 1,956 & 0.001989 & French \\
    Arts & 19,515 & 219 & 176 & 3.37 & 328 & 65 & 0.019143 & English\\
    Fan Club & 551,409 & 2,287 & 1,234 & 13.61 & 6,341 & 168 & 0.011032 &  Turkish\\
    Finance & 2,013,689 & 45,655 & 10,083 & 5.78 & 245,020 & 7,894 & 0.000574 &  Chinese\\
    Game & 2,289,100 & 79,367 & 16,382 & 32.16 & 48,297 & 2,468 & 0.001963 &  English \\
    Language & 2,388,938 & 51,556 & 15,801 & 14.92 & 50,734 & 3,456 & 0.000944 & German \\
    Outdoor & 353,789 & 2,088 & 953 & 7.88 & 6,230 & 265 & 0.008268 & English \\
    Social & 416,469 & 13,077 & 3,894 & 11.12 & 42,180 & 1,176 & 0.002856 & English \\
    Media Sharing & 176,581 & 87,827 & 45,451 &  11.71 & 14,309 & 7,498 & 0.000258 & English \\
    Technology & 20,305 & 313 & 210 & 4.17 & 4,425 & 75 & 0.019873 & English \\
    \bottomrule     
    \end{tabular}
    \label{tab:category-language-sparsity}
\end{table*}

\subsubsection{Emoticon Usage Distribution}
\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/stickers_distribution.jpg} 
    \caption{Our Dataset Emoticon Usage Distribution. Number of users versus the number of emoticons. Our dataset emoticon usage follows a tail-shaped distribution.} 
\label{fig:emoticons-user-distribution} 
\end{figure}

Next, we analyze the distribution of emoticon usages. To better visualize this distribution and prevent distortion, we apply a logarithmic transformation to the number of users. As demonstrated in Figure ~\ref{fig:emoticons-user-distribution}, Our dataset exhibits a tail-shaped distribution, highlighting the real-world emoticon usage patterns.

\subsubsection{Language Distribution}
Then, we analyze the language distribution of our dataset, shown in Figure ~\ref{fig:language-distribution-v2}. Our dataset features Arabic, Bulgarian, Chinese, Dutch, English, French, German, Hindi, Italian, Japanese, Modern Greek, Polish, Portuguese, Russian, Spanish, Swahili, Thai, Turkish, Urdu, and Vietnamese. English is the most dominant language with an domineering 62.6\%. Russian (9.6\%) is the second most popular language followed by French (8.6\%) and Chinese (8.0\%). 

\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/language-distribution-global.jpg} 
    \caption{Dataset Language Distribution. Our dataset features 20 languages.} 
\label{fig:language-distribution-v2} 
\end{figure}

\subsection{Multi-Topic Characteristics}
In this section, we analyze the multi-domain characteristics of our dataset. Firstly, we analyze the domain-group distribution. Secondly, we introduce the domain statistics. Lastly, we analyze the user-emoticon usage overlap across domains.

% number of groups
% figure 6: the unique emoticon in domain, unique users, utterances, with emoticons only, sparsity (msg_w_emoticons/user/unique_emoticons).
% sparsity of the groups and the labels, split into a few charts

\subsubsection{Group Distribution}
As mentioned above, our dataset contains 67 groups and 10 domains, with the median group being five. We illustrate this in Figure \ref{fig:piechart-categories-group-distribution}. The minimum group count is one, being Arts, and the maximum group count is media sharing. This is due to the nature of resource, focusing on emoticons. Games and Social come close as they tend to be relaxed and so more expressed.

\begin{figure}[htbp] 
    % \centering \includegraphics[width=1.0\linewidth]{Images/group-distribution.jpg} 
    \centering \includegraphics[width=1.0\linewidth]{Images/final-categoriesd-distribution.jpg} 
    \caption{Our dataset features 67 groups and 10 domains. The median group count per domain is five.} 
\label{fig:piechart-categories-group-distribution} 
\end{figure}
% sequence of the titleï¼š 4.2, 4.3, prevalent from the user level, user usage. distribution (long tail). show that it is normal distribution. single emoticon, from user usage, from utterances.

\subsubsection{Domain Statistics}
Table \ref{tab:category-language-sparsity} shows the domain overview statistics. Anime has the most emoticons, followed by Media Sharing and Game, reflecting the expressive nature of these groups. Technology is the sparsest domain, while Media Sharing is the densest, with Finance and Language being unexpectedly dense as well. The average emoticons per user are highest in Anime (44.90) and Game (32.16), while Technology (4.17) and Finance (5.78) have the lowest, suggesting that the nature of the domain influences emoticon usage.

% \begin{table*}[h]
%     \centering
%     \caption{Statistics of each domain with Sparsity.}
%     \begin{tabular}{@{}lcccccccccc@{}} 
%     \toprule
%     Category & Messages (Not Censored) & Messages (Censored) & Messages (Not emoticons) & emoticons (Global) & emoticons (Unique) & emoticon Users & Use emoticons & Language & Sparsity \\ \hline
%     Language & 2,440,494 & 2,388,938 & 51,556 & 15,801 & 10,035 & 3,834 & 50,734 & 3,456 & de & 0.000944 \\
%     Finance & 2,059,344 & 2,013,689 & 45,655 & 10,083 & 7,213 & 1,841 & 245,020 & 7,894 & zh & 0.000573 \\
%     Technology & 20,618 & 20,305 & 313 & 210 & 115 & 73 & 4,425 & 75 & en & 0.019873 \\
%     emoticon & 264,408 & 176,581 & 87,827 & 45,451 & 29,765 & 15,306 & 14,309 & 7,498 & en & 0.000258 \\
%     Social & 429,546 & 416,469 & 13,077 & 3,894 & 3,788 & 1,016 & 42,180 & 1,176 & en & 0.002856 \\
%     Game & 2,368,467 & 2,289,100 & 79,367 & 16,382 & 28,588 & 5,457 & 48,297 & 2,468 & en & 0.001963 \\
%     Outdoor & 355,877 & 353,789 & 2,088 & 953 & 1,881 & 353 & 6,230 & 265 & en & 0.008268 \\
%     Anime & 452,376 & 364,543 & 87,833 & 22,572 & 59,420 & 11,665 & 10,448 & 1,956 & fr & 0.001989 \\
%     Arts & 19,734 & 19,515 & 219 & 176 & 158 & 118 & 328 & 65 & en & 0.019143 \\
%     % Travel & 148,602 & 141,585 & 7,017 & 1,436 & 2,500 & 407 & 5,500 & 639 & en & 0.007647 \\
%     Fan Club & 553,696 & 551,409 & 2,287 & 1,234 & 1,007 & 351 & 6,341 & 168 & tr & 0.011032 \\
%     \bottomrule     
%     \end{tabular}
%     \label{tab:category-language-sparsity}
% \end{table*}

\subsubsection{User Emoticon Usage Overlap Across Domains}
% context emoticon pair for the different groups, and then merge 
% domain > domain's groups 
% 4.3 user analysis 
Lastly, we analyze the appearance of users in the same domain but in other groups, or in entirely different domain. We plot our findings in Figure \ref{fig:emoticon-overlap-distribution}.

\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/sticker-user-overlap.jpg} 
    \caption{Distribution of users' emoticon usage.} 
\label{fig:emoticon-overlap-distribution} 
\end{figure}

Firstly, we establish that users do join other groups and participate; these could be within the same domain or an entirely different domain. The number beside the label on the horizontal axis reveals the total number of emoticon users within the domain, the blue bar represents the percentage of users that appear in other groups within the same domain and the red represents the percentage of users that appear in domains entirely different. We omit domains with fewer than 50 user emoticons to avoid generalization.

Secondly, two of the largest groups with more than 7000 emoticon users (Finance and Media Sharing domain) with roughly 15\% and 3\% to 85\% and 97\% different to same domain ratios. In fact, other than the Social domain, domains all have more users participating in the same domain than somewhere else; which could possibly reveal user preference and taste. Naturally, Social domain is clearly an explorative domain and therefore behaves as such.

% \subsubsection{emoticon Distribution}
% % messages contain emoticons
% % u. emoticons and users be on the same level
% % 
% \begin{figure}[htbp] \centering \includegraphics[width=1.0\linewidth]{Images/category-emoticon-distribution.jpg} \caption{Distribution of emoticons across categories in the dataset. The chart highlights the large number of emoticons in categories such as Anime (147,183), Games (118,029), and Media Sharing (117,252), while categories like Arts (377) and Technology (428) have far fewer emoticons. This distribution reflects the level of user engagement and interest in each category, with Anime and Games being particularly popular for emoticon sharing.} \label{fig:category-emoticon-distribution} \end{figure}
% % kinda not necssary, normalize it, otherwise cant be analyzed fairly
% % think about the min 0? 
% Then, we review the emoticon distribution of the categories, shown in Figure \ref{fig:category-emoticon-distribution}. As summarized in the chart, Finance has the highest number of emoticons with 42,734, followed closely by Game (118,029) and Anime (147,183). On the other hand, Arts (377) and Technology (428) represent the categories with the least number of emoticons. The distribution exhibits a significant skew, with categories like Media Sharing (117,252) and Language (61,577) also containing a large number of emoticons. The minimum number of emoticons in a category is 377 (Arts), while the maximum is 147,183 (Anime), with a median value that falls in between.

% This distribution indicates that categories like Anime and Games dominate due to their broad, popular appeal in emoticon sharing, particularly in communities where visual content such as emoticons is extensively used. These categories are often associated with fan-driven content and gaming, both of which encourage frequent sharing of emoticons among large communities. Conversely, categories like Arts and Technology have fewer emoticons, possibly due to their more specialized focus, where the creation and sharing of emoticons might not be as prevalent. This suggests that the prominence of a category in emoticon sharing is linked to the level of user engagement and interest within that category.

% % \subsubsection{User-emoticon Distribution}
% % Here we find out how many users use how many emoticons. We present the findings in \ref{}.

% % \subsubsection{Language Distribution}
% %
\section{Application Case 1: User Behavior Analysis}
% - frequency of user's domain exchange
% - how many emoticons per user
% - cross domain patterns, 

Next, we move on to the user behavior analysis on the dataset. More specifically, we demonstrate our dataset's potential on showcasing (1) user distinct style (2) multi-domain behavior (3) temporal behavior change (4) user behavior with different respondents.

\subsection{Distinct User Styles}

% hwo many didfffent users behave in the same group 

\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/user-profile.png} 
    \caption{User A emoticons in the Language group.} 
\label{fig:emoticon-user-profile-A} 
\end{figure}

\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/userb-game.png} 
    \caption{User B emoticons in the Game group.} 
\label{fig:emoticon-user-profile-B} 
\end{figure}

As shown in Figure \ref{fig:emoticon-user-profile-A}, User A's emoticon styles are predominantly cat-themed and cute, while User Bâ€™s emoticons are more idol-based, with an emphasis on adorable and charming designs, as shown in Figure \ref{fig:emoticon-user-profile-B}. This demonstrates that users generally have a distinct emoticon preference and this potentially be used for user modeling.

\subsection{Cross Domain Behavior Change}

More interestingly, we analyze if user, due to different context, could change their style. Herein, the same User A, Figure \ref{fig:emoticon-user-profile-A-2}, displays a significantly different style in the Media Sharing group, which is more structured and cartoonish in appearance. This is contrastive to the originally cartoonish style.

\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/usera-another-category.png} 
    \caption{User A emoticons in the Media Sharing group.} 
\label{fig:emoticon-user-profile-A-2} 
\end{figure}

\begin{figure}[htbp] 
    \centering \includegraphics[width=1.0\linewidth]{Images/userb-outdoor.png} 
    \caption{User B emoticons in the Outdoor group.} 
\label{fig:emoticon-user-profile-B-2} 
\end{figure}

On the other hand, User Bâ€™s emoticons, Figure \ref{fig:emoticon-user-profile-B-2}, still retain elements of their signature adorable style but are subtly tuned to match the outdoor-themed context of the new domain, which is about rats. This behavior reveals that different user have different consistency level in emoticon-usage. There are possibly many factors for this behavior such as the group context. 

\subsection{Temporal Behavior Change}
\begin{figure}[htbp] 
    % \centering \includegraphics[width=1.0\linewidth]{Images/top-stickers-by-user-overtime.png} 
    \centering \includegraphics[width=1.0\linewidth]{Images/emoticons-2.png} 
    \caption{User C emoticon usage over time where count is more than three.} 
\label{fig:emoticon-usage-overtime} 
\end{figure}
We collate the top emoticon by usage count from User C and present in Figure ~\ref{fig:emoticon-usage-overtime}. As can be seen, the user's emoticon preferences evolve over time. In September and October, the user gravitates toward dog-themed, cartoonish emoticons. However, by January, their preference shifts to smaller, cuter dog emoticons. Interestingly, in June, the user shows a renewed interest in a different set of realistic dog emoticons, while still maintaining a fondness for the smaller, cuter dog designs.

Overall, despite fluctuations in style, the user consistently displays a preference for dog emoticons, with a notable emphasis on the cute, cartoonish variations. This suggests that while the user's style may vary, their core preference remains for dog-themed emoticons, particularly those with a cute and cartoonish aesthetic.

% combine together
\begin{figure}[htbp] 
    % \centering \includegraphics[width=0.5\linewidth]{Images/user-same-stickers.png} 
    \centering \includegraphics[width=0.6\linewidth]{Images/emoticons-3.png} 
    \caption{User D emoticon usage over time. The user uses the green frog emoticon frequently overtime.} 
\label{fig:emoticon-top-emoticons} 
\end{figure}
On the other hand, User D demonstrates a consistent use of a certain green laughing frog, except the months where no emoticons are used, as seen in Figure ~\ref{fig:emoticon-top-emoticons}. Herein, the user demonstrates a consistent usage of a certain emoticon, unlike User C.

\subsection{User Behavior with Different Respondents}

\begin{figure}[htbp] \centering \includegraphics[width=1.0\linewidth]{Images/user-same-sticker-diff-user.png} \caption{User E shows a consistent style preference when replying to Users F and G.} \label{fig:user-same-emoticon-diff-user} \end{figure}

We present two distinct cases of user behavior in response to different users. In the first case, User E replies to both Users F and G using a similar set of emoticons. As shown in Figure ~\ref{fig:user-same-emoticon-diff-user}, User E consistently selects a boy emoticon with a nonchalant expression, regardless of the recipient. Although the third and fourth emoticons in the sequence differ, the first two emoticons remain frequently used, with counts of 12 and 8 respectively, indicating a strong preference for these emoticons.

\begin{figure}[htbp] \centering \includegraphics[width=1.0\linewidth]{Images/user-diff-sticker-diff-user.png} \caption{User H shows contrasting style preferences when replying to Users I and J.} \label{fig:user-diff-emoticon-diff-user} \end{figure}

In contrast, User H exhibits a clear difference in emoticon usage when replying to Users I and J. As illustrated in Figure ~\ref{fig:user-diff-emoticon-diff-user}, User H uses bubbly, cheerful, and generally cute emoticons when replying to User I. However, when replying to User J, User H switches to a more melancholic and indifferent style, favoring stickman emoticons that are notably less cute. This shift in emoticon preference highlights the variation in user behavior based on the recipient of the message.

In conclusion, these examples demonstrate that the dataset captures meaningful differences in emoticon usage across various contexts. This variation, influenced by the person being replied to, suggests the potential for deeper personalization and more insightful user behavior analysis.
% \subsubsection{General Statistics}
% \begin{table}[h]
%     \centering
%     \caption{Summary of group-level statistics for the emoticonU dataset, showing the distribution of emoticons, utterances, and users across 70 groups.}
%     \begin{tabular}{@{}lcccc@{}} 
%     \toprule
% Field & Average & Median & Min & Max\\ \hline
%     \# emoticons per Group                     & 2,047.86 & 884.5  & 0   & 144,654 \\
%     \# Utterances per Group                    & 9,060.84 & 11,966.5 & 0   & 966,831 \\
%     \# Users per Group                          & 833.21  & 866     & 3   & 96,331 \\
%     \# Users w/ emoticon per Group   & 333.73  & 65.5    & 0   & 3,917 \\
%     \bottomrule     
%     \end{tabular}
%     \label{tab:group-statistics}
% \end{table}

% The table above summarizes the group-level statistics for the emoticonU dataset, which includes 70 groups. Each group is characterized by its number of emoticons, utterances, and users. On average, each group contains 2,047.86 emoticons, 9,060.84 utterances, and 833.21 users. The median number of emoticons per group is 884.5, while the median number of utterances is 11,966.5. The number of emoticons, utterances, and users ranges from 0 to 144,654, 0 to 966,831, and 3 to 3,917, respectively. Notably, some groups have no emoticons or utterances at all, which suggests that certain groups may focus on emoticon-only conversations, while others may primarily facilitate textual exchanges, which is natural. This distinction could potentially prove valuable for future social and behavioral analysis, as groups with no emoticons might be more conversation-driven, potentially offering insights into the dynamics of user interactions in different chat environments. The variations of communication styles found in the group chats crucial for understanding user behavior and the role of different content types within group chats.

% \subsubsection{emoticons Distribution}
% Here, we analyze the distribution of emoticons and utterances across different groups. We present the summarized findings in Fig \ref{fig:barchart-emoticon-utterances-distribution}.

% \begin{figure}[htbp] 
%     \centering \includegraphics[width=1.0\linewidth]{Images/barchart-emoticon-utterances-distribution.jpg} 
%     \caption{Distribution of emoticon, utterances across different groups and their respective categories.} 
% \label{fig:barchart-emoticon-utterances-distribution} 
% \end{figure}

% Groups within the Anime category show substantial emoticon usage, with one group reaching over 144,000 emoticons, followed by others with smaller quantities like 297 and 213 emoticons. Fan Club groups also exhibit significant emoticon activity, with one group accumulating 33,673 emoticons, while others show modest emoticon counts like 108 and 169. The Finance category displays a wide range of emoticon usage, with one group generating over 9000 emoticons and others, such as one with just 1 emoticon, contributing to the overall distribution. Game groups lead with some of the highest emoticon counts, particularly a group with over 90,000 emoticons. The Language category, although diverse, contains groups with smaller emoticon counts, with the highest reaching 41,733 emoticons. Similarly, groups in the Outdoor category show a mix of low and moderate emoticon use, with some groups accumulating only a few emoticons. Finally, the Social category has a broad range of emoticon usage, from just a few emoticons in some groups to over 9,500 in others. 
% Overall, the data indicates that while some categories, like Finance and Game, exhibit high emoticon usage, others like Technology and Language show much lower levels, reflecting diverse user engagement in different contexts.

% \subsubsection{User Usage Analysis}
% \paragraph{Users' emoticon Usage}
% Then, we analyze the proportion of users using emoticons and does who do not.
% \begin{figure}[htbp] 
%     \centering \includegraphics[width=1.0\linewidth]{Images/barchart-users-usage-distribution.jpg} 
%     \caption{Distribution of users' emoticon usage.} 
% \label{fig:barchart-users-usage-distribution} 
% \end{figure}
% % change to global

% The distribution of users' emoticon usage across different categories highlights varying levels of engagement. In the Anime category, a significant portion of users (1,484 out of 4,874) have used emoticons, though some smaller groups show minimal usage, with only 33 and 10 users using emoticons in other subgroups. Fan Club groups also demonstrate diverse usage, with one group showing only 36 users who have used emoticons, while another group has a more substantial engagement of 62 users. The Finance category has a wide disparity, with over 19,000 users in one subgroup, and only a small fraction (1 or 4) engaging with emoticons in others. In Game, large groups like those with 92,987 and 14,717 users have notable emoticon usage, but smaller groups like those with just 37 or 146 users show much lower engagement. The Language category also varies, with some large subgroups (e.g., 22,190 users) contributing to substantial emoticon usage, while others like 1,559 users show minimal activity. Outdoor groups reveal a generally low level of emoticon engagement, with some subgroups, like one with 75 users, showing no emoticon usage. Social groups generally demonstrate moderate to low engagement, with several groups having over 100 users using emoticons, although some groups, like those with just 8 or 22 users, show minimal engagement. Finally, in the Media Sharing and Technology categories, large groups like those with 3,939 and 1,896 users show considerable engagement, while others with smaller user counts exhibit little to no emoticon usage. 

% Overall, this highlights that while larger user groups in categories like Finance and Game tend to show more emoticon engagement, many smaller categories exhibit limited use of emoticons.

% \paragraph{User emoticon Usage Overlap}


% We analyze the overlap of users in same and different categories by calculating the minimum, median, average, and maximum for both categories. In the "Same Category" group, the minimum value is 0, indicating that some groups do not have any users overlapping in the same category. The median value is 10, while the average overlap is 26.5 users, and the maximum overlap is observed in the Language group with 320 users, the statistics can be seen in Fig \ref{tab:overlap-statistics}. 

% \begin{table}[htbp]
% \centering
% \begin{tabular}{lcccc}
% \toprule
% Field & Average & Median & Min & Max \\ \midrule
% Same Cat Overlap & 26.5 & 10 & 0 & 320 (Language) \\
% Diff. Cat Overlap & 14.5 & 4 & 0 & 129 (Game) \\
% \bottomrule
% \end{tabular}
% \caption{Overlap of Users in Same and Different Categories}
% \label{tab:overlap-statistics}
% \end{table}

% For the "Different Category" group, the minimum value is also 0, signifying some groups have no overlap with users from other categories. The median value for overlap in different categories is 4, and the average number of overlapping users in different categories is 14.5. The maximum value of 129 users occurs in the Game group, showing that some groups have significantly more overlap in different categories.

% The top three groups with the most overlap in the same category are as follows: the Language group leads with 320 users, followed by the Finance group with 83 users, and the Game group with 66 users. When considering the different categories, the Game group has the most overlap, with 129 users found in other groups of different categories. The Finance group follows with 68 users, and the emoticon Sharing group has 62 users.

% The high overlap in the Language group may be attributed to the broader nature of the category, where users may have interests that span across multiple topics and discussions in related groups. For the Finance group, it is likely that the financial topics are of significant interest to a wide audience, leading to participation in several related groups. The Game group, similarly, may attract users with a wide range of gaming interests, leading to a higher likelihood of overlap in both same and different category groups. emoticon Sharing groups likely have overlap due to the nature of sharing common interests across various categories of social groups, leading to users participating in multiple sub-categories.

% The findings on overlap suggest that user behavior across multiple categories can be complex, indicating the possibility of shared interests between seemingly unrelated domains. This has important implications for multidomain systems, which will be explored further in another section. Such overlaps show the necessity of considering users' diverse preferences in recommendation systems, where a userâ€™s interests may span across different categories, and designing systems that take these overlaps into account can improve recommendation accuracy and personalization.


% \subsubsection{emoticon Usage}
% % - max count, min count, median count, average count

% % \subsubsection{Cross Domain Analysis}
% % Interestingly, we notice that users overlap amongst groups. More specifically, we present the portion of users that exists in other groups.

% % - how many percentage of users appear in other groups across all groups?



% % \subsection{Cross-Domain}

% % <table>

% % We analyze the languages, medias, time talking.



% Domain (cross user domain), language, sparsity, conversation, languages. Case studies.
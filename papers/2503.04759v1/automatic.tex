\pdfoutput=1
\documentclass[a4paper,USenglish,cleveref,thm-restate]{lipics-v2021}

\bibliographystyle{plainurl}

\title{Games with \texorpdfstring{$\omega$}{ω}-Automatic Preference Relations}

\author{Véronique Bruyère}{Université de Mons (UMONS), Belgium \and \url{https://informatique-umons.be/bruyere-veronique/}}{veronique.bruyere@umons.ac.be}{https://orcid.org/0000-0002-9680-9140}{}
\author{Christophe Grandmont}{Université de Mons (UMONS), Belgium \and Université libre de Bruxelles (ULB), Belgium \and \url{https://chrisgdt.github.io/}}{christophe.grandmont@umons.ac.be}{https://orcid.org/0009-0009-4573-0123}{}
\author{Jean-François Raskin}{Université libre de Bruxelles (ULB), Belgium \and \url{https://verif.ulb.ac.be/jfr/}}{jean-francois.raskin@ulb.be}{https://orcid.org/0000-0002-3673-1097}{Supported by Fondation ULB (\url{https://www.fondationulb.be/en/})}

\authorrunning{V.\ Bruyère, C.\ Grandmont, and J.-F.\ Raskin}

\ccsdesc[500]{Theory of computation~Automata over infinite objects}
\ccsdesc[300]{Software and its engineering~Formal methods}
\ccsdesc[500]{Theory of computation~Solution concepts in game theory}
\ccsdesc[300]{Theory of computation~Exact and approximate computation of equilibria}

\keywords{Games played on graphs, Nash equilibrium, \texorpdfstring{$\omega$}{ω}-automatic relations, \texorpdfstring{$\omega$}{ω}-recognizable relations, constrained Nash equilibria existence problem}

\funding{This work has been supported by the Fonds de la Recherche Scientifique – FNRS under Grant n° T.0023.22 (PDR Rational)}

\nolinenumbers
\hideLIPIcs

\usepackage{multicol}
\usepackage{tikz}
\usepackage{graphics}

\newtheorem*{problems*}{Problems}

\input{macros}
\input{tikz}

\begin{document}

\maketitle

\begin{abstract}
This paper investigates Nash equilibria (NEs) in multi-player turn-based games on graphs, where player preferences are modeled as $\omega$-automatic relations via deterministic parity automata. Unlike much of the existing literature, which focuses on specific reward functions, our results apply to any preference relation definable by an $\omega$-automatic relation. We analyze the computational complexity of determining the existence of an NE (possibly under some constraints), verifying whether a given strategy profile forms an NE, and checking whether a specific outcome can be realized by an NE. Finally, we explore fundamental properties of $\omega$-automatic relations and their implications in the existence of equilibria and finite-memory strategies.
\end{abstract}

\section{Introduction}
\label{section:intro}

\emph{Non-zero-sum games on graphs} provide a powerful framework for analyzing rational behavior in multi-agent systems, see, e.g.,~\cite{BrenguierCHPRRS16,BriceRB23,Bruyere21,FleschKMSSV10,Gradel-Ummels-08,GutierrezNPW23,KupfermanPV16}. By modeling settings where agents have individual objectives, this approach captures the complexity of real-world scenarios where the interests of agents (modeled by players) are neither fully aligned nor entirely antagonistic. It enables the study of solution concepts such as \emph{Nash} and \emph{subgame-perfect equilibria}~\cite{Nash50,osbornebook}, offering insights into strategic decision-making. This, in turn, can aid in designing systems that anticipate and respond to rational behaviors, enriching reactive synthesis methodologies.

In this context, specifying player \emph{objectives}~\cite{lncs2500} is central to reasoning about strategies and equilibria. In qualitative games, objectives classify executions (which are infinite paths in the graph) as either winning or losing for a given player. In quantitative games, executions are classically assigned numerical values, allowing players to compare and rank them based on accumulated rewards, with higher values being preferred.
In the qualitative case, this value is Boolean, often expressed via the parity acceptance condition, which captures all $\omega$-regular objectives. In the quantitative case, various reward functions have been studied, including total sum, limsup and liminf, discounted-sum, and hybrid models like cost-optimal reachability. For each of these functions, dedicated techniques have been developed to design algorithms to reason about optimal strategies and, more generally, equilibria.

However, these solutions are often tightly coupled to the specific reward function used, which limits their generality. When a new reward function or combination thereof is introduced, significant technical effort is required, as existing techniques rarely transfer across different reward models. This lack of general results—where solutions remain specialized to the underlying evaluation model, preventing knowledge transfer between different classes of objectives—has been noted in related contexts such as quantitative verification (see, e.g.,~\cite{Bansal-Comparator-Automata-2022}).

To address this, we propose a general approach based on \emph{automata-based} preference relations to compare infinite paths in the graph. This framework provides a structured and unified method for reasoning about strategies and equilibria across diverse reward models. A similar use of automata-based preference relations has been explored in~\cite{Bansal-Comparator-Automata-2022,Berwanger-Doyen-2023,Bozzelli-Maubert-Pinchinat-2015}, and we here demonstrate how this idea can be adapted to fit the non-zero-sum game setting.

\subparagraph*{Contributions}
Our contributions center on using \emph{$\omega$-automatic relations} on infinite words~\cite{Thomas-1990-Buchi}, as introduced in~\cite{Frougny-Sakarovitch-1993}, to define a general framework for preference relations over paths in game graphs, thereby establishing a generic method to compare executions for players in non-zero-sum games. These relations are specified by deterministic parity automata that read pairs $(x,y)$ of words synchronously and accept them whenever $y$ is preferred to $x$.

As a first step, we analyze the algorithmic complexity of verifying whether an $\omega$-automatic relation satisfies the axioms of a \emph{preorder} (i.e., reflexivity and transitivity), which are classical requirements for a relation to model preferences. We show that this problem is \nlComplete{} (\cref{prop:PropertiesRelations}). Additionally, we investigate whether the relation contains a \emph{maximal element}, i.e., one that is not strictly less preferred than any other word, which corresponds to the existence of a Nash equilibrium (NE) in a single-player setting (\cref{prop:maximum-dpw-pspace}).

Our main contributions focus on the computational complexity of \emph{four key problems} related to NEs in non-zero-sum games~\cite{Nash50} with $\omega$-automatic preference relations. First, we study the problem of \emph{verifying} whether a given strategy profile, specified by Mealy machines, one per strategy, constitutes an NE in the given game. We prove that this problem is \pspaceComplete{} (\cref{theorem:nash-checking-pspace}). Second, we examine whether a lasso-shaped path (i.e., a regular path) is the \emph{outcome of an NE}, showing that this problem is \npComplete{} (\cref{theorem:OutcomeCheck}). Third, we establish the existence of games without any NE, motivating the fundamental problem of determining whether a given game \emph{admits at least one NE}. This problem turned out to be particularly challenging, and we reduce it to a three-player zero-sum game with imperfect information. We provide an algorithm for solving this problem with exponential complexity in the size of the graph, the parity automata defining the preference relation, and the number of their priorities, and doubly exponential complexity in the number of players. However, since the number of players is a natural parameter that tends to be small in practical scenarios, we refine this result by proving that for a fixed number of players, the problem lies in \exptime{} and is \pspaceHard{} (\cref{theorem:NEexistenceGeneral}). On top of that, our approach has the advantage of being modular, and therefore easily adapts to question the existence of a \emph{constrained NE}.
When we attach one constraint to each player given as lasso-shaped path and ask for an NE whose outcome is preferred to any of those constraints, the adapted algorithm keeps the same complexity except that it becomes doubly exponential in the number of priorities of the parity conditions. Yet the number of priorities is often small, and when we fix it and the number of players, the algorithm remains in \exptime{} and \pspaceHard{} (\cref{theorem:constrainedNEexistenceGeneral}).

Additionally, we show that when the $\omega$-automatic preference relations are all \emph{$\omega$-recognizable} (a strict subclass of $\omega$-automatic relations), the existence of at least one NE is always guaranteed. Furthermore, when the relations are also prefix-independent, there is a guarantee that an NE supported by finite-memory strategies always exists (\cref{theorem:existenceNE}).

\subparagraph*{Related work}

A well-established \emph{hierarchy of rational relations} holds for both finite and infinite words~\cite{Carton2006,BookSakarovitch}. The $\omega$-automatic relations (also called synchronized rational relations) were first studied in~\cite{Frougny-Sakarovitch-1993}. Some decision problems about $\omega$-automatic and $\omega$-recognizable relations were solved in~\cite{rational-relations-automatic-loding}. The study of \emph{automatic structures} has also led to results involving rational
relations, notably within first-order logic (see, e.g., \cite{Automatic-Structures-Gradel2020,hodgson1983decidabilite,Automatic-Structures-handbook-Rubin21}).

The problems we study in this paper were widely investigated in the literature for \emph{specific} reward functions, including functions that mix different objectives, see, e.g.,~\cite{Bouyer-Brenguier-Markey-2010,Gutierrez-MPRSW21,Ummels08,Ummels-Wojtczak-2011}. There are also works that study these problems across \emph{large} classes of reward functions rather than individual ones, or that consider \emph{general} notions of preference relations.
For instance, in~\cite{BrihayePS13}, the authors prove the existence of finite-memory NEs for all cost-semi-linear reward functions.
In~\cite{PatriciaBouyerBMU15}, a complete methodology is developed to solve the (constrained) NE existence problem, thanks to the concept of suspect game, encompassing all reward functions definable by a class of monotone circuits over the set of states
that appear (finitely or infinitely often) along paths in a game graph. The preference relations studied in~\cite{PatriciaBouyerBMU15} are all $\omega$-automatic. In~\cite{Feinstein-Kupferman-Shenwald2025}, the authors study NEs for games with a reward function that, given a finite set $X$ of objectives of the same type, associates an integer with each subset of satisfied objectives of $X$. Again, if the objectives of $X$ are $\omega$-regular, the reward functions of~\cite{Feinstein-Kupferman-Shenwald2025} lead to $\omega$-automatic preference relations. The existence of NEs is guaranteed within a broad setting, both in~\cite{Gradel-Ummels-08} and~\cite{LeRoux-Pauly-Equilibria}, without relying on an automata-based approach, however with no complexity result about the constrained NE existence problem. In case of games with $\omega$-recognizable preference relations, our proof that NEs always exist relies on the technique developed in~\cite{Gradel-Ummels-08}.

The results we obtain with games with $\omega$-recognizable preference relations cover a large part of the games studied classically. In addition, our setting allows any combinations of objectives as soon as they are expressible by automata. However, it does not cover games with mean-payoff or energy objectives. Indeed, in the first case, it is proved in~\cite{Bansal-Comparator-Automata-2022} that the related preference relation is not $\omega$-automatic; and in the second case, the constrained NE existence problem is undecidable~\cite{BriceBR23}. Note that the general concepts of $\omega$-automatic and $\omega$-recognizable relations have also been used to study imperfect information in games in~\cite{Berwanger-Doyen-2023,Bozzelli-Maubert-Pinchinat-2015} and formal verification of quantitative systems in~\cite{Bansal-Comparator-Automata-2022}.

\section{Preliminaries}
\label{section:preliminaries}

In this section, we introduce the useful definitions of games with $\omega$-automatic preference relations and we give several illustrative examples.

\subparagraph*{Automatic Relations}

Let $\Sigma$ be a fixed finite alphabet. We consider \emph{binary relations} $R \subseteq \Sigma^\omega \times \Sigma^\omega$ on infinite words over $\Sigma$. The relation $R$ is \emph{$\omega$-automatic} if it is accepted by a deterministic finite parity automaton over the alphabet $\Sigma \times \Sigma$, that is, $R$ is an $\omega$-regular language over $\Sigma \times \Sigma$. The automaton reads pairs of letters by advancing synchronously on the two words. This behavior will be illustrated in \cref{fig:dpw-for-classical-objectivers} below. A relation $R$ is \emph{$\omega$-recognizable} if $R = \cup_{i=1}^{\ell} X_i \times Y_i$ where $X_i, Y_i \subseteq \Sigma^\omega$ are $\omega$-regular languages over $\Sigma$~\cite{rational-relations-automatic-loding}.

A relation $R \subseteq \Sigma^\omega \times \Sigma^\omega$ is \emph{reflexive} if for all $x \in \Sigma^\omega$, we have $(x,x) \in R$. It is \emph{transitive} if for all $x,y,z \in \Sigma^\omega$, we have $(x,y) \in R \wedge (y,z) \in R \Rightarrow (x,z) \in R$. A reflexive and transitive relation is called \emph{preorder}. A relation $R$ is \emph{total} if for all $x,y \in \Sigma^\omega$, we have $x \neq y \Rightarrow (x,y) \in R \vee (y,x) \in R$. Finally, $R$ is \emph{prefix-independent} if for all $x,y \in \Sigma^\omega$, we have $(x,y) \in R \Leftrightarrow \forall u,v \in \Sigma^*, (ux,vy) \in R$.

When a relation $R$ is a preorder, we often use the notation $x \leqRelation y$ instead of $(x,y) \in R$. We also use the notation $y \geqRelation x$ whenever $x \leqRelation y$. We then define the equivalence relation $\equivRelation$ such that for all $x,y \in \Sigma^\omega$, $x \equivRelation y \Leftrightarrow x \leqRelation y \wedge y \leqRelation x$. The equivalence class of $x$ is denoted $\equivClass{x}{}$. We define the relation $\leqRelationStrict$ such that for all $x,y \in \Sigma^\omega$, $x \leqRelationStrict y \Leftrightarrow x \leqRelation y \wedge y \not\leqRelation x$. With these notations, we say that a word $x \in \Sigma^\omega$ is \emph{maximal} for $\leqRelation$ if for all $y \in \Sigma^\omega$, we have $x \not\leqRelationStrict y$.

We suppose that the reader is familiar with the usual notion of deterministic parity automaton (\DPW{}) used to accept $\omega$-automatic relations~\cite{rational-relations-automatic-loding}. A run is accepting if the maximum priority seen infinitely often is even. In this paper, we also use other classical notions of automata: deterministic B\"uchi automata (\DBW{}), non-deterministic B\"uchi automata (\NBW{}), as well as Rabin and Streett automata. See, e.g.,~\cite{lncs2500} for general definitions, or~\cite{principles-of-model-checking,handbook-of-model-checking-orna-kupferman} for deeper details. We also need the concept of \emph{generalized} B\"uchi (resp.\ parity) automaton which is an automaton with a positive\footnote{The negation is not allowed in the Boolean combination.} Boolean combination of B\"uchi (resp.\ parity) conditions. Given an automaton $\aut{A}$, its \emph{size} $|\aut{A}|$ is its number of states.

\subparagraph*{Games with Preference Relations}

An \emph{arena} is a tuple $\arena = (V,E,\Players,(V_i)_{i\in\Players})$ where $V$ is a finite set of \emph{vertices}, $E \subseteq V \times V$ is a set of \emph{edges}, $\Players$ is a finite set of \emph{players}, and $(V_i)_{i\in\Players}$ is a partition of $V$, where $V_i$ is the set of vertices \emph{owned} by player~$i$. We assume, w.l.o.g., that each $v \in V$ has at least one \emph{successor}, i.e., there exists $v' \in V$ such that $(v,v') \in E$. A \emph{game} $\game = (\arena, (\leqRelation[i])_{i\in\Players})$ is an arena equipped with an $\omega$-automatic preorder over the alphabet $V$, one for each player~$i$, called his \emph{preference relation}.

We define a \emph{play} $\pi\in V^\omega$ (resp.\ a \emph{history} $h\in V^*$) as an infinite (resp.\ finite) sequence of vertices $\pi_0\pi_1\dots$ such that $(\pi_k,\pi_{k+1})\in E$ for any two consecutive vertices $\pi_k, \pi_{k+1}$. The set of all plays of an arena $\arena{}$ is denoted $\Plays_{\arena}\subseteq V^\omega$, and we write $\Plays$ when the context is clear.
The \emph{length} $|h|$ of a history $h$ is the number of its vertices. The empty history is denoted $\varepsilon$. In a game $\game$, for any two plays $\pi, \pi'$, player~$i$ \emph{prefers} $\pi'$ to $\pi$ if $\pi \leqRelation[i] \pi'$. Examples of games with various preference relations are given below.

Given a play $\pi$ and an index $k$, we write $\pi_{\geq k}$ the suffix $\pi_{k} \pi_{k+1} \dots$ of $\pi$. We denote the first vertex of $\pi$ by $\first{\pi}$. These notations are naturally adapted to histories. We also write $\last{h}$ for the last vertex of a history $h \neq \varepsilon$.

We can \emph{concatenate} two non-empty histories $h_1$ and $h_2$ into a single one, denoted $h_1\cdot h_2$ or $h_1h_2$ if $(\last{h_1},\first{h_2})\in E$. When a history can be concatenated to itself, we call it a \emph{cycle}. Furthermore, a play $\pi= \mu\nu\nu \dots = \mu(\nu)^\omega$, where $\mu\nu$ is a history and $\nu$ a cycle, is called a \emph{lasso}. The \emph{length} of $\pi$ is then the length of $\mu\nu$, denoted $|\pi|$.\footnote{To have a well-defined length for a lasso $\pi$, we assume that $\pi = \mu(\nu)^\omega$ with $\mu\nu$ of minimal length.}

Let $\arena$ be an arena. A \emph{strategy} $\strategyfor{i}:V^*V_i\rightarrow V$ for player~$i$ maps any history $h \in V^*V_i$ to a successor $v$ of $\last{h}$, which is the next vertex that player~$i$ chooses to move to after reaching the last vertex in $h$.
A play $\pi = \pi_0\pi_1 \dots$ is \emph{consistent} with $\strategyfor{i}$ if $\pi_{k+1} = \strategyfor{i}(\pi_0 \dots \pi_k)$ for all $k \in \N$ such that $\pi_k \in V_i$.
Consistency is naturally extended to histories.
A tuple of strategies $\sigma = (\strategyfor{i})_{i\in\Players}$ with $\sigma_i$ a strategy for player~$i$, is called a \emph{strategy profile}. The play $\pi$ starting from an initial vertex $v_0$ and consistent with each $\strategyfor{i}$ is denoted by $\outcomefrom{\sigma}{v_0}$ and called \emph{outcome}.

A strategy $\sigma_i$ for player~$i$ is \emph{finite-memory}~\cite{lncs2500} if it can be encoded by a \emph{Mealy machine} $\machine{} = (M, m_0, \alpha_U, \alpha_N)$ where $M$ is the finite set of memory states, $m_0 \in M$ is the initial memory state, $\alpha_U : M \times V \rightarrow M$ is the update function, and $\alpha_N : M \times V_i \rightarrow V$ is the next-move function. Such a machine defines the strategy $\sigma_i$ such that $\sigma_i(hv) = \alpha_N(\widehat{\alpha}_U(m_0,h),v)$ for all histories $hv \in V^*V_i$, where $\widehat{\alpha}_U$ extends $\alpha_U$ to histories as expected. A strategy $\sigma_i$ is \emph{memoryless} if it is encoded by a Mealy machine with only one state.

We suppose that the reader is familiar with the concepts of two-player \emph{zero-sum} games with $\omega$-regular objectives and of winning strategy~\cite{Games-on-Graphs,lncs2500}.

\subparagraph*{Generality of the $\omega$-Automatic Preference Framework}

Let us show that the above notion of game $\game = (\arena, (\leqRelation[i])_{i \in \Players})$ encompasses many cases of classic games and more. We begin with games where each player~$i$ has an $\omega$-regular objective $\Omega_i \subseteq V^\omega$, such as a reachability or a B\"uchi objective~\cite{Games-on-Graphs,lncs2500}. In this case, the preference relation $\leqRelation[i]$ $\subseteq V^\omega \times V^\omega$ is defined by $x \leqRelation[i] y$ if and only if $\Omega_i(x) \leq \Omega_i(y)$, where $\Omega_i$ is seen as a function $\Omega_i : V^\omega \rightarrow \{0,1\}$. As $\Omega_i$ is $\omega$-regular, it follows that $\leqRelation[i]$ is $\omega$-automatic. For instance, given a target set $T \subseteq V$, the first \DPW{} of \cref{fig:dpw-for-classical-objectivers} accepts $\leqRelation[i]$ when $\Omega_i$ is a \emph{reachability} objective $\{x = x_0x_1 \ldots \in V^\omega \mid \exists k, x_k \in T\}$; the second \DPW{} accepts $\leqRelation[i]$ when $\Omega_i$ is a \emph{B\"uchi} objective $\{x \in V^\omega \mid \infOcc{x} \cap T \neq \ \emptyset \}$, where $\infOcc{x}$ is the set of vertices seen infinitely many times in $x$.

More general preference relations can be defined from several $\omega$-regular objectives $(\Omega_i^j)_{1\leq j \leq n}$ for player~$i$. With each $x \in V^\omega$ is associated the payoff vector $\bar \Omega_i(x) = (\Omega_i^1(x), \ldots, \Omega_i^n(x) ) \in \{0,1\}^n$. Given a preorder $\leq$ on these payoff vectors, we define a preference relation $\leqRelation[i]$ such that $x \leqRelation[i] y$ if and only if $\bar\Omega_i(x) \leq \bar\Omega_i(y)$~\cite{PatriciaBouyerBMU15}. There exist several preorders on the payoff vectors, like, for example, the lexicographic preorder or the preorder $\leq$ such that $\bar\Omega_i(x) \leq \bar\Omega_i(y)$ if and only if ($\forall j, ~\Omega_i^j(x) = 1 \Rightarrow \Omega_i^j(y) = 1$). One can check that all preference relations studied in~\cite{PatriciaBouyerBMU15} are $\omega$-automatic.

Let us move on to classical quantitative objectives, like quantitative reachability, limsup or discounted-sum objectives~\cite{Games-on-Graphs,lncs2500}. In this case, an objective for player~$i$ is now a function $\Omega_i: V^\omega \rightarrow \Q \cup \{\pm\infty\}$.\footnote{It can also be a function $\Omega: E^\omega \rightarrow \Q \cup \{\pm\infty\}$.} We then define a preference relation $\leqRelation[i]$ such that $x \leqRelation[i] y$ if and only if $\Omega_i(x) \leq \Omega_i(y)$. Bansal et al.\ showed in~\cite{Bansal-Comparator-Automata-2022} that such a relation is $\omega$-automatic for a limsup objective and for a discounted-sum objective with an integer discount factor. They also proved that $\leqRelation[i]$ is not $\omega$-automatic for a mean-payoff objective. The first \DPW{} of \cref{fig:dpw-for-classical-objectivers} where the vertex with priority 1 is deleted, accepts a preference relation $\leqRelation[i]$ defined from a \emph{min-cost-reachability} objective as follows: $x \leqRelation[i] y$ if and only if, for all $k$, $x_k \in T \Rightarrow \exists \ell \leq k, ~y_\ell \in T$ (player~$i$ prefers plays with fewer steps to reach the target set $T$). The variant where player~$i$ prefers to maximize the number of steps to reach $T$\footnote{as each step corresponds to a reward.}, called \emph{max-reward-reachability}, is accepted by the third \DPW{} in \cref{fig:dpw-for-classical-objectivers}.

Hence, there are many ways to envision $\omega$-automatic relations.
Note that in our framework, the preference relations $\leqRelation[i]$ of a game $\game$ can vary from one player to another, where each relation $\leqRelation[i]$ can be defined from a combination of several objectives (see \cref{ex:example} below).

\begin{figure}
    \begin{subfigure}[t]{0.27\textwidth}
        \centering
        \begin{tikzpicture}[automaton,scale=.7,every node/.style={scale=.7},node distance=1.9]
            \node[initial,system] (q0) {$0$};
            \node[system] (q2) [right=of q0] {$0$};
            \node[system] (q1) at ($(q0)!0.5!(q2) - (0,1.9)$) {$1$};

            \path (q0) edge            node {$*, T$} (q2)
                       edge      node[left] {$T, \neg T$} (q1)
                       edge[loop above]node {$\neg T, \neg T$} (q0)
                  (q1) edge[loop left] node {$*, \neg T$} (q1)
                       edge     node[right] {$*, T$} (q2)
                  (q2) edge[loop above]node {$*, *$} (q2);
        \end{tikzpicture}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.33\textwidth}
        \centering
        \begin{tikzpicture}[automaton,scale=.7,every node/.style={scale=.7},node distance=3]
            \node[initial,system] (q0) {$0$};
            \node[system] (q2) [right=of q0] {$2$};
            \node[system] (q1) at ($(q0)!0.5!(q2) - (0,1.9)$) {$1$};

            \path (q0) edge                node[above] {$*, T$} (q2)
                       edge[bend right=15] node[sloped,below] {$T, \neg T$} (q1)
                       edge[loop above]    node {$\neg T, \neg T$} (q0)
                  (q1) edge[bend right=15] node[sloped] {$\neg T, \neg T$} (q0)
                       edge[bend right=15] node[sloped,below] {$*, T$} (q2)
                       edge[loop right]     node {$T, \neg T$} (q1)
                  (q2) edge[bend right=25] node[above] {$\neg T, \neg T$} (q0)
                       edge[bend right=15] node[sloped] {$T, \neg T$} (q1)
                       edge[loop above]    node {$*, T$} (q2);
        \end{tikzpicture}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.35\textwidth}
        \centering
            \begin{tikzpicture}[automaton,scale=.7,every node/.style={scale=.7},node distance=1.6]
              \node[initial,system] (q0) {$0$};
              \node[system] (q1) [right=of q0] {$0$};
              \node[system] (q2) [right=of q1] {$1$};
              \node[system] (q3) [below=of q0] {$1$};
              \node[system] (q4) [right=of q3] {$0$};

              \path (q0) edge            node {$\neg T, T$} (q1)
                         edge      node[left] {$T, \neg T$} (q3)
                         edge[loop above]node {$\neg T, \neg T$} (q0)
                         edge    node[sloped] {$T, T$} (q4)
                    (q1) edge[loop above]node {$\neg T, *$} (q1)
                         edge            node {$T, *$} (q2)
                    (q2) edge[loop above]node {$*, *$} (q2)
                    (q3) edge[loop left] node {$*, \neg T$} (q3)
                         edge            node {$*, T$} (q4)
                    (q4) edge[loop right]node {$*, *$} (q4);
            \end{tikzpicture}
    \end{subfigure}
    \caption{\DPWs{} accepting preference relations, corresponding respectively to reachability, B\"uchi, and max-reward-reachability objectives. The priorities are indicated inside each state, and an edge label $T$, $\neg T$, or $*$ means that there is an edge for each label $v \in T$, $v \in V \setminus T$, and $v \in V$, respectively.}
    \label{fig:dpw-for-classical-objectivers}
\end{figure}

\section{Decision Problems about Nash Equilibria}
\label{section:nash-decisionProb}

In this section, we state the decision problems studied in this paper and we provide our main results regarding their complexity classes.

\subparagraph*{Studied Problems}

A \emph{Nash Equilibrium} (NE) from an initial vertex $v_0$ is a strategy profile $(\sigma_i)_{i \in \Players}$ such that for all players~$i$ and all strategies $\tau_i$ of player~$i$, we have $\outcomefrom{\sigma}{v_0} \not\leqRelationStrict[i] \outcomefrom{\tau_i,\sigma_{-i}}{v_0}$, where $\sigma_{-i}$ denotes $(\sigma_j)_{j \in \Players \setminus \{i\}}$. So, NEs are strategy profiles where no single player has an incentive to unilaterally deviate from his strategy. When there exists a stategy $\tau_i$ such that $\outcomefrom{\sigma}{v_0} \leqRelationStrict[i] \outcomefrom{\tau_i,\sigma_{-i}}{v_0}$, we say that $\tau_i$ (or, by notation abuse, $\outcomefrom{\tau_i,\sigma_{-i}}{v_0}$) is a \emph{profitable deviation} for player~$i$. The set of players $\Players \ssetminus \{i\}$ is called the \emph{coalition} $-i$, sometimes seen as one player opposed to player~$i$.

\begin{example}
    An alternative definition of NE asks for all players~$i$ and all strategies~$\tau_i$ that $\outcomefrom{\tau_i,\sigma_{-i}}{v_0} \leqRelation[i] \outcomefrom{\sigma}{v_0}$~\cite{PatriciaBouyerBMU15}. The two definitions yield different notions of NE (unless the preference relations $\leqRelation[i]$ are total). In this paper, we will not consider the second definition, due to the nonexistence of NEs in very simple games. Let us consider the one-player game $\game$ depicted in \cref{fig:aut-no-nash-game-multireach}, where, from the initial vertex $v_0$, player~$1$ has the choice between $v_0v_1^\omega$ and $v_0v_2^\omega$. We consider the preference relation $\leqRelation[1]$ equal to $\{(x,x) \mid x \in \{v_0,v_1,v_2\}^\omega\}$. Clearly, $v_0v_1^\omega \not\leqRelation[1] v_0v_2^\omega$ and $v_0v_2^\omega \not\leqRelation[1] v_0v_1^\omega$, showing there is no NE from $v_0$ for this alternative definition (while both plays $v_0v_1^\omega$ and $v_0v_2^\omega$ are NE outcomes with the first definition). This phenomenon appears as soon as there are two incomparable plays.
    \lipicsEnd
\end{example}

\begin{figure}[t]
    \centering
    \begin{minipage}[c]{0.49\textwidth}
        \centering
        \begin{tikzpicture}[automaton,every node/.style={scale=.7},node distance=1.1]
            \node[system] (v0) {$v_0$};
            \node[system] (v1) [left=of v0] {$v_1$};
            \node[system] (v2) [right=of v0] {$v_2$};

            \path (v0) edge            (v1)
                       edge            (v2)
                  (v1) edge[loop left] (v1)
                  (v2) edge[loop right] (v2);
        \end{tikzpicture}
        \caption{An arena with one player.}
        \label{fig:aut-no-nash-game-multireach}
    \end{minipage}
    \hfill
    \begin{minipage}[c]{0.49\textwidth}
      \centering
        \begin{tikzpicture}[automaton,every node/.style={scale=.7}]
            \node[system] (v0) {$v_0$};
            \node[environment] (v3) [right of=v0] {$v_3$};
            \node[system] (v1) [above=2.7em of v0] {$v_1$};
            \node[system] (v2) [left of=v0] {$v_2$};

            \path (v0) edge[bend right=20] (v3)
                       edge[bend right=20] (v2)
                  (v3) edge[bend right=20] (v0)
                       edge (v1)
                  (v1) edge (v0)
                  (v2) edge[bend right=20] (v0);
        \end{tikzpicture}
        \caption{An arena with round (resp.\ square) vertices owned by player~$1$ (resp.\ player~$2$).}
        \label{fig:example-buchi-reach-game}
    \end{minipage}
\end{figure}

\begin{example}\label{ex:example}
    Let us illustrate the NE definition with two examples. We consider the two-player arena depicted in \cref{fig:example-buchi-reach-game} such that player~$2$ owns only $v_3$ and player~$1$ owns all other vertices. The preference relation $\leqRelation[1]$ for player~$1$ is defined from a min-cost-reachability objective with a target set $T_1 = \{v_1\}$. The preference relation $\leqRelation[2]$ for player~$2$ is defined from a B\"uchi objective with a target set $T_2 = \{v_2\}$.
    Let us consider the strategy profile $\sigma = (\sigma_1,\sigma_2)$ defined by two memoryless strategies such that $\sigma_1(v_0) = v_3$ and $\sigma_2(v_3) = v_0$.\footnote{As $v_1$ and $v_2$ have only one successor, the strategy is trivially defined for those vertices.} It is an NE from the initial vertex $v_0$ with outcome $\outcomefrom{\sigma}{v_0} = (v_0v_3)^\omega$. Player~$1$ has no profitable deviation if player~$2$ sticks on his strategy $\sigma_2$: it is not possible to visit vertex $v_1$. Player~$2$ has also no profitable deviation. There exists another NE $\sigma' = (\sigma'_1,\sigma'_2)$ from $v_0$ such that
    \begin{itemize}
        \item $\sigma_1'(hv_0)$ is equal to $v_2$ if the history $h$ visits $v_1$, and to $v_3$ otherwise,
        \item $\sigma'_2$ is the memoryless strategy such that $\sigma_2'(v_3) = v_1$.
    \end{itemize}
    In that case, the NE outcome is $\outcomefrom{\sigma'}{v_0} = v_0v_3v_1(v_0v_2)^\omega$. Note that both players strictly prefer the second NE as $\outcomefrom{\sigma}{v_0} \leqRelationStrict[i] \outcomefrom{\sigma'}{v_0}$ for $i = 1,2$.

    Let us slightly modify the relation of player~$1$ such that $\leqRelation[1]$ is defined from a lexicographic preorder using two objectives: a min-cost-reachability objective $\Omega_1^1$ with $T_1$ and a B\"uchi objective $\Omega_1^2$ with $T_2$.
    We have $x \leqRelation[1] y$ if and only if ($\Omega_1^1(x) < \Omega_1^1(y)$) or ($\Omega_1^1(x) = \Omega_1^1(y)$ and $\Omega_1^2(x) \leq \Omega_1^2(y)$). If we consider the two previous strategy profiles, $\sigma'$ is still an NE, but $\sigma$ is no longer an NE as player~$1$ has a profitable deviation. Indeed, with the memoryless strategy $\tau_1$ such that $\tau_1(v_0) = v_2$, we get $\outcomefrom{\sigma}{v_0} = (v_0v_3)^\omega \leqRelationStrict[1] \outcomefrom{\tau_1,\sigma_2}{v_0} = (v_0v_2)^\omega$.
    \lipicsEnd
\end{example}

\begin{example}\label{ex:no-nash-not-omega-recognizable}
    In this example, we show that there does not always exist an NE in games with $\omega$-automatic preference relations. Consider the simple one-player game $\game$ with two vertices $v_0, v_1$, the edges $(v_0,v_0), (v_0,v_1), (v_1,v_1)$, and whose preference relation $\leqRelation[1]$ is defined from a max-reward-reachability objective with a target set $T = \{v_1\}$. This game has no NE from the initial vertex $v_0$.\footnote{A similar example is given in~\cite{LeRoux-Pauly-Equilibria}.} Indeed, if the strategy of player~$1$ is to loop on $v_0$, then he has a profitable deviation by going to $T$ at some point, and if his strategy is to loop $k$ times in $v_0$ and then go to $T$, then he has a profitable deviation by looping one more time in $v_0$ before going to $T$.
    \lipicsEnd
\end{example}

In this paper, we investigate the following problems.

\begin{problems*} \label{problem}
    \begin{itemize}
        \item The \emph{NE checking problem} is to decide, given a game $\game$, an initial vertex $v_0$, and a strategy profile $\sigma = (\sigma_i)_{i \in \Players}$ where each strategy $\sigma_i$ is defined by a Mealy machine $\machine{i}$, whether $\sigma$ is an NE from $v_0$ in $\game$.
        \item The \emph{NE outcome checking problem} is to decide, given a game $\game$ and a lasso $\pi$, whether $\pi$ is the outcome of an NE in $\game$.
        \item The \emph{NE existence problem} is to decide, given a game $\game$ and an initial vertex $v_0$, whether there exists an NE from $v_0$ in $\game$.
        \item The \emph{constrained NE existence problem} is to decide, given a game $\game$, an initial vertex $v_0$, and a lasso $\pi_i$ for each player~$i$, whether there exists an NE from $v_0$ in $\game$ with an outcome $\rho$ such that $\pi_i \leqRelation[i] \rho$ for all players~$i \in \Players$.
    \end{itemize}
\end{problems*}

\subparagraph{Properties of \texorpdfstring{$\omega$}{ω}-Automatic Relations}
Before stating our main results, as those focus on games with preference relations, we investigate the complexity class for deciding several related properties of $\omega$-automatic relations. Both following results are proved in \cref{app:proof-PropertiesRelations,app:proof-maximum-dpw-pspace}, respectively.

\begin{proposition}[restate=propertiesrelations,name=]
\label{prop:PropertiesRelations}
    The problem of deciding whether an $\omega$-automatic relation $R$ is reflexive (resp.\ transitive, total, prefix-independent) is \nlComplete{}.
\end{proposition}

\begin{proposition}[restate=existencemaximum,name=]
\label{prop:maximum-dpw-pspace}
    The problem of deciding whether an $\omega$-automatic preorder $\leqRelation$ has a maximal (resp.\ minimal) element is \pspaceComplete{}. The hardness result already holds with a \DPW{} with two priorities accepting $\leqRelation$.
\end{proposition}

\subparagraph*{Main Results}
 Let us now state our main results. We consider games $\game = (\arena,(\leqRelation[i])_{i \in \Players})$ on the arena $\arena = (V,E,\Players,(V_i)_{i\in\Players})$, where each preference relation $\leqRelation[i]$ $\subseteq V^\omega \times V^\omega$ is an $\omega$-automatic preorder. We denote by $\aut{A}_i$ the \DPW{} accepting $\leqRelation[i]$ and by $\{0,1,\ldots,d_i\}$ its set of priorities.

\begin{theorem}\label{theorem:nash-checking-pspace}
    The NE checking problem is \pspaceComplete{}.
\end{theorem}

\begin{theorem}\label{theorem:OutcomeCheck}
    The NE outcome checking problem is \npComplete{}.
\end{theorem}

\begin{theorem}[restate=NEexistenceGeneral,name=]
\label{theorem:NEexistenceGeneral}
    The NE existence problem is exponential in $|V|$, $\Pi_{i \in \Players}|\aut{A}_i|$, and $\Sigma_{i\in \Players}d_i$, thus doubly exponential in $|\Players|$. If the number of players is fixed, this problem is in \exptime{} and \pspace{}-hard (already for games $\game$ with only one player and two priorities).
\end{theorem}

\begin{theorem}[restate=constrainedNEexistenceGeneral,name=]
\label{theorem:constrainedNEexistenceGeneral}
    The constrained NE existence problem, with the constraints given by lassoes $(\pi_i)_{i\in \Players}$, is exponential in $|V|$, $\Pi_{i\in \Players}|\aut{A}_i|$, $\Pi_{i\in \Players}|\pi_i|$, and doubly exponential in $\Sigma_{i\in \Players}d_i$, thus also doubly exponential in $|\Players|$.
    If the number of players and each $d_i$ are fixed, this problem is in \exptime{} and \pspace{}-hard (already for games $\game$ with only one player and two priorities).
\end{theorem}

The proofs of these theorems are detailed in the next two sections. In \cref{section:omegaRec}, we reconsider the studied problems in the special case of games with \emph{$\omega$-recognizable} relations.

\section{NE Checking and NE Outcome Checking Problems}
\label{section:nash-checking}

We first prove \cref{theorem:nash-checking-pspace}, stating the \pspace{}-completeness of the NE checking problem.

\begin{proof}[Proof of \cref{theorem:nash-checking-pspace}]
    We begin with the membership result. Given the Mealy machines $\machine{i} = (M_i, m_0^j, \alpha_U^i, \alpha_N^i)$, $i \in \Players$, and the strategies $\sigma_i$ they define, we have to check whether $\sigma = (\sigma_i)_{i \in \Players}$ is an NE from a given initial vertex $v_0$. Equivalently, we have to check whether there exists a strategy $\tau_i$ for some player~$i$ such that $\outcomefrom{\sigma}{v_0} \leqRelationStrict[i] \outcomefrom{\tau_i,\sigma_{-i}}{v_0}$ (in which case $\sigma$ is not an NE). That is, whether there exists $i$ such that the language
    \[
    L_i = \{(x,y) \in V^\omega \times V^\omega \mid x \leqRelationStrict[i] y, ~x = \outcomefrom{\sigma}{v_0}, ~y \text{ consistent with $\sigma_{-i}$ and starting at $v_0$} \}
    \] is non-empty. We are going to describe a generalized \DPW{} $\aut{B}_i$ with a conjunction of four parity conditions, that accepts $L_i$. We proceed as follows.
    \begin{enumerate}
        \item With $\aut{A}_i$ and its complement, we get a generalized \DPW{} with the conjunction of two parity conditions that accepts the set $\{(x,y) \mid x \leqRelationStrict[i] y \}$, i.e., the set $\{(x,y) \mid x \leqRelation[i] y \wedge y \not\leqRelation[i] x\}$.
        \item The outcome $\outcomefrom{\sigma}{v_0}$ is a lasso obtained from the product of the arena $\arena$ and all $\machine{j}$. We can define a \DPW{}, of size exponential in the number of players, that only accepts $\outcomefrom{\sigma}{v_0}$.
        \item Finally, consider the product $\arena'$ of the arena $\arena$ with all $\machine{j}$, with $j \ne i$. We denote by $V'$ the set of vertices of $\arena'$, where each vertex is of the form $(v,(m_j)_{j \neq i})$, with $v \in V$ and $m_j$ a memory state of $\machine{j}$. The set of plays $y$ consistent with $\sigma_{-i}$ and starting at $v_0$ is accepted by a \DPW{} whose set of states is $V' \cup \{s_0\}$ with $s_0$, a new state, its initial state, all those states with priority $0$, and whose transition function $\delta$ is such that $\delta((v,(m_j)_{j\neq i}),v') = (v',(m'_j)_{j\neq i})$ for $\alpha_U^j(m_j,v) = m'_j$, and $\delta(s_0,v_0) = (v_0,(m^j_0)_{j\neq i})$. Note that $\delta$ is a function as each $\machine{j}$ is deterministic and that this \DPW{} is of exponential size in the number of players.
    \end{enumerate}
    The announced automaton $\aut{B}_i$ is the product of the automata defined in the previous steps. It has exponential size and can be constructed on the fly, hence leading to a \pspace{} algorithm. Indeed, to check whether $L_i$ is non-empty, we guess a lasso $\mu(\nu)^\omega$ and its exponential length, and check whether the guessed lasso is accepted by $\aut{B}_i$. This only requires a polynomial space as the lasso is guessed on the fly, state by state, while computing the maximum priority occurring in $\nu$ for each piority function, and the length $|\mu\nu|$ is stored in binary. Finally, we repeat this procedure for each automaton $\aut{B}_i$, $i \in \Players$.

    \medskip

    Let us continue with the hardness result. We use a reduction from the membership problem for linear bounded deterministic Turing machines (LBTMs),
    known to be \pspaceComplete{}~\cite{books-lba-pspace-complete-GareyJ79}, to the complement of the NE checking problem. Recall that an LBTM $T$ has a limited memory such that the tape head must remain in cells containing the input word $w$.

    Suppose that $T$ is defined on a set of states $Q = \{q_1,\dots,q_m\}$ with $q_1$ its initial state and containing $q_{accept}, q_{reject}$, the word $w$ is equal to $w_1w_2\dots w_n$, and the alphabet is $\Sigma = \{a_1,\dots, a_s\}$. We construct a $(n+1)$-player game $\game = (V,E,(V_i)_{1\leq i\leq n+1},(\leqRelation[i])_{1 \leq i\leq n+1})$ as illustrated in \cref{fig:reduction-nash-checking-game}, and $n+1$ Mealy machines $(\machine{i})_{1\leq i\leq n+1}$ in the following way. Intuitively, each input tape cell is associated with a player and will be simulated by a Mealy machine for this player, encoding actions based on the current configuration of the LBTM. We begin with the description of the game:
    \begin{itemize}
        \item $V = (Q \times \{1,\dots,n\}) \cup \{v_{init},\#,v_{end}\}$, with three fresh vertices $v_{init}$, $\#$, and $v_{end}$,
        \item $v_{init}$ is the initial vertex and has two successors: $\#$ and $(q_1,1)$,
        \item $\#$ and $v_{end}$ are sink vertices with a self-loop,
        \item $V_{n+1} = \{v_{init},\#,v_{end}\}$ and for each $i \in \{1,\dots,n\}$, $V_i = Q \times \{i\}$,
        \item $(q,i) \rightarrow (q',j)$ for all $q,i,q',j$ such that $q \not\in \{q_{accept},q_{reject}\}$, otherwise $(q,i) \rightarrow v_{end}$,
        \item for each $i \in \{1,\dots,n\}$, the preference relation $\leqRelation[i]$ is the trivial preorder $V^\omega \times V^\omega$, which is accepted by a one-state \DPW{},
        \item the preference relation $\leqRelation[n+1]$ is defined such that $v_{init} \#^\omega \leqRelationStrict[n+1] v_{init} x$ if and only if $x$ contains $\{q_{accept}\} \times \{1,\dots,n\}$. More precisely, we define $\leqRelation[n+1]$ as $(X_1 \times X_1) \cup (X_2 \times X_2) \cup (X_2 \times X_1)$ where $X_1 = \{v_{init}x \in V^\omega \mid x \text{ contains } \{q_{accept}\} \times \{1,\dots,n\} \}$ and $X_2 = V^\omega \setminus X_1$.
    \end{itemize}
    Note that $\leqRelationStrict[n+1]$ is equal to $X_2 \times X_1$. Moreover, $\leqRelation[n+1]$ is a preorder. Indeed, it is clearly reflexive. Let us show that it is transitive. Let $x \leqRelation[n+1] y$ and $y \leqRelation[n+1] z$. If $x \in X_1$, then both $(x,y), (y,z) \in X_1 \times X_1$, and thus $(x,z) \in X_1 \times X_1$. If $x \in X_2$, as $z \in V^\omega = X_1 \cup X_2$, then $(x,z) \in (X_2 \times X_2) \cup (X_2 \times X_1)$. Finally, let us show that $\leqRelation[n+1]$ is accepted by a \DBW{} of constant size. Both languages $X_1$ and $X_2$ are accepted by a \DBW{} as illustrated in \cref{fig:reduction-nash-checking-pref-n+1}. Each relation $X_1 \times X_1$ (resp.\ $X_2 \times X_2$, $X_2 \times X_1$) is accepted by a generalized \DBWs{} with a conjunction of two B\"uchi conditions of constant size, thus by a \DBW{}. Their union, equal to $\leqRelation[n+1]$, is also accepted by a \DBW{}, thus a \DPW{} of constant size.

    Let us now describe the Mealy machines. The Mealy machine of player~$n+1$ defines the memoryless strategy $\sigma_{n+1}$ such that $\sigma_{n+1}(v_{init}) = \#$. For player~$i \in \{1,\dots,n\}$, the Mealy machine $\machine{i}$ simulates the LBTM $T$ when the tape head scans the $i$-th tape cell:
    \begin{itemize}
        \item the set of memory states is $M = \Sigma \cup \{a_{init},a_{end}\}$, with fresh symbols $a_{init}, a_{end} \not\in \Sigma$, where $a_{init}$ is the initial memory state,
        \item the udpate function $\alpha_U : M \times V \rightarrow M$ indicates which symbol is written by $T$ in the $i$-th cell when the tape head scans this cell; it is defined as follows:
        \begin{itemize}
            \item from the state $a \neq a_{init}, a_{end}$ and the vertex $(q,j) \in V$, stay on state $a$ if $j \neq i$, or go to $a'$ if $j = i$ and $(q,a) \rightarrow (q',a',Move)$ is a transition of $T$, or go to $a_{end}$ if $q \in \{q_{accept},q_{reject}\}$.
            \item from the state $a_{end}$, the only available vertex is $v_{end}$; thus stay on $a_{end}$.
            \item from the state $a_{init}$, the only available vertex is $v_{init}$; thus go to state $a$ such that $w_i = a$.
        \end{itemize}
        \item the next-move function $\alpha_N : M \times V_i \rightarrow V$ (recall that $V_i = Q \times \{i\}$) indicates the move ($R$ or $L$) of $T$ when the tape head scans the $i$-th cell; it is defined as follows. From the state $a \neq a_{init}, a_{end}$ and vertex $(q,i)$, output $(q',j)$ such that $(q,a) \rightarrow (q',a',Move)$ is a transition of $T$ and $j = \min(n,i+1)$ if $Move = R$, $j = \max(0,i-1)$ if $Move = L$.
    \end{itemize}

    \begin{figure}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,scale=.8,every node/.style={scale=.8}]
            \draw (243.76,108.21) .. controls (243.76,108.21) and (243.76,108.21) .. (243.76,108.21) -- (274.91,108.21) .. controls (274.91,108.21) and (274.91,108.21) .. (274.91,108.21) -- (274.91,126) .. controls (274.91,126) and (274.91,126) .. (274.91,126) -- (243.76,126) .. controls (243.76,126) and (243.76,126) .. (243.76,126) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (285.19,114.01) .. controls (285.19,104.47) and (292.93,96.73) .. (302.47,96.73) -- (420.43,96.73) .. controls (429.98,96.73) and (437.71,104.47) .. (437.71,114.01) -- (437.71,174.12) .. controls (437.71,183.66) and (429.98,191.4) .. (420.43,191.4) -- (302.47,191.4) .. controls (292.93,191.4) and (285.19,183.66) .. (285.19,174.12) -- cycle;
            \draw (301.36,110) .. controls (301.36,106.64) and (304.08,103.91) .. (307.44,103.91) -- (345.46,103.91) .. controls (348.82,103.91) and (351.55,106.64) .. (351.55,110) -- (351.55,122.83) .. controls (351.55,126.19) and (348.82,128.91) .. (345.46,128.91) -- (307.44,128.91) .. controls (304.08,128.91) and (301.36,126.19) .. (301.36,122.83) -- cycle;
            \draw (274.91,116.21) -- (297.96,116.02);
            \draw [shift={(300.96,116)}, rotate=179.53,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (250.8,150.46) .. controls (250.8,150.46) and (250.8,150.46) .. (250.8,150.46) -- (269.06,150.46) .. controls (269.06,150.46) and (269.06,150.46) .. (269.06,150.46) -- (269.06,168.07) .. controls (269.06,168.07) and (269.06,168.07) .. (269.06,168.07) -- (250.8,168.07) .. controls (250.8,168.07) and (250.8,168.07) .. (250.8,168.07) -- cycle;
            \draw (259.56,126) -- (259.49,146.38);
            \draw [shift={(259.48,149.38)}, rotate=270.19,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (262.51,168.21) .. controls (270.01,186.6) and (249.69,188.47) .. (254.81,171.19);
            \draw [shift={(255.71,168.61)}, rotate=111.8,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (301.36,160.4) .. controls (301.36,157.04) and (304.08,154.31) .. (307.44,154.31) -- (345.46,154.31) .. controls (348.82,154.31) and (351.55,157.04) .. (351.55,160.4) -- (351.55,173.23) .. controls (351.55,176.59) and (348.82,179.31) .. (345.46,179.31) -- (307.44,179.31) .. controls (304.08,179.31) and (301.36,176.59) .. (301.36,173.23) -- cycle;
            \draw (380.36,110) .. controls (380.36,106.64) and (383.08,103.91) .. (386.44,103.91) -- (424.46,103.91) .. controls (427.82,103.91) and (430.55,106.64) .. (430.55,110) -- (430.55,122.83) .. controls (430.55,126.19) and (427.82,128.91) .. (424.46,128.91) -- (386.44,128.91) .. controls (383.08,128.91) and (380.36,126.19) .. (380.36,122.83) -- cycle;
            \draw (380.56,161.4) .. controls (380.56,158.04) and (383.28,155.31) .. (386.64,155.31) -- (424.66,155.31) .. controls (428.02,155.31) and (430.75,158.04) .. (430.75,161.4) -- (430.75,174.23) .. controls (430.75,177.59) and (428.02,180.31) .. (424.66,180.31) -- (386.64,180.31) .. controls (383.28,180.31) and (380.56,177.59) .. (380.56,174.23) -- cycle;
            \draw (533.23,129.53) .. controls (533.23,129.53) and (533.23,129.53) .. (533.23,129.53) -- (566.27,129.53) .. controls (566.27,129.53) and (566.27,129.53) .. (566.27,129.53) -- (566.27,152.05) .. controls (566.27,152.05) and (566.27,152.05) .. (566.27,152.05) -- (533.23,152.05) .. controls (533.23,152.05) and (533.23,152.05) .. (533.23,152.05) -- cycle;
            \draw (259.89,94.27) -- (259.83,105.65);
            \draw [shift={(259.81,108.65)}, rotate=270.31,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (426.86,143.36) .. controls (453.96,134.07) and (509.9,136.57) .. (530.21,141.69);
            \draw [shift={(532.83,142.43)}, rotate=197.65,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (544.91,129.01) .. controls (537.66,107.62) and (561.04,108.12) .. (555.5,125.97);
            \draw [shift={(554.51,128.61)}, rotate=293.33,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;

            \draw (245.9,113.4) node [anchor=north west,inner sep=0.75pt,align=left] {$v_{init}$};
            \draw (308.1,109) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$(q_{1},1)$};
            \draw (252.6,152) node [anchor=north west,inner sep=0.75pt,align=left] {$\#$};
            \draw (304.1,159.4) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$(q_{m},n)$};
            \draw (387.1,109) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$(q_{1},n)$};
            \draw (383.3,160.4) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$(q_{m},n)$};
            \draw (448.05,155.13) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {if $q_{i} \in \{q_{accept},q_{reject}\}$};
            \draw (536.63,136.8) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$v_{end}$};
            \draw (321.93,135.47) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {Connected part};
        \end{tikzpicture}
        \caption{The game used for \pspace{}-hardness  of \cref{theorem:nash-checking-pspace}.}
        \label{fig:reduction-nash-checking-game}
    \end{figure}

    \begin{figure}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,scale=.85,every node/.style={scale=.85}]
            \draw (143.29,138.11) -- (176.84,138.11);
            \draw [shift={(179.84,138.11)}, rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (127.41,138.11) .. controls (127.41,133.48) and (130.96,129.73) .. (135.35,129.73) .. controls (139.74,129.73) and (143.29,133.48) .. (143.29,138.11) .. controls (143.29,142.73) and (139.74,146.48) .. (135.35,146.48) .. controls (130.96,146.48) and (127.41,142.73) .. (127.41,138.11) -- cycle;
            \draw (179.84,138.11) .. controls (179.84,133.48) and (183.4,129.73) .. (187.79,129.73) .. controls (192.17,129.73) and (195.73,133.48) .. (195.73,138.11) .. controls (195.73,142.73) and (192.17,146.48) .. (187.79,146.48) .. controls (183.4,146.48) and (179.84,142.73) .. (179.84,138.11) -- cycle;
            \draw (269.18,138.52) .. controls (269.18,133.9) and (272.74,130.15) .. (277.13,130.15) .. controls (281.51,130.15) and (285.07,133.9) .. (285.07,138.52) .. controls (285.07,143.15) and (281.51,146.9) .. (277.13,146.9) .. controls (272.74,146.9) and (269.18,143.15) .. (269.18,138.52) -- cycle;
            \draw (271.39,138.52) .. controls (271.39,135.19) and (273.96,132.48) .. (277.13,132.48) .. controls (280.29,132.48) and (282.86,135.19) .. (282.86,138.52) .. controls (282.86,141.86) and (280.29,144.56) .. (277.13,144.56) .. controls (273.96,144.56) and (271.39,141.86) .. (271.39,138.52) -- cycle;
            \draw (195.73,138.11) -- (266.18,138.5);
            \draw [shift={(269.18,138.52)}, rotate=180.33,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (184.39,129.77) .. controls (181.46,108.48) and (195.74,108.28) .. (192.56,127.91);
            \draw [shift={(191.99,130.81)}, rotate=282.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (274.12,130.19) .. controls (271.19,108.89) and (285.48,108.7) .. (282.29,128.32);
            \draw [shift={(281.72,131.23)}, rotate=282.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (109.26,138.48) -- (124.41,138.17);
            \draw [shift={(127.41,138.11)}, rotate=178.81,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (375.29,128.61) -- (426.84,128.61);
            \draw [shift={(429.84,128.61)}, rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (359.41,128.61) .. controls (359.41,123.98) and (362.96,120.23) .. (367.35,120.23) .. controls (371.74,120.23) and (375.29,123.98) .. (375.29,128.61) .. controls (375.29,133.23) and (371.74,136.98) .. (367.35,136.98) .. controls (362.96,136.98) and (359.41,133.23) .. (359.41,128.61) -- cycle;
            \draw (429.84,128.61) .. controls (429.84,123.98) and (433.4,120.23) .. (437.79,120.23) .. controls (442.17,120.23) and (445.73,123.98) .. (445.73,128.61) .. controls (445.73,133.23) and (442.17,136.98) .. (437.79,136.98) .. controls (433.4,136.98) and (429.84,133.23) .. (429.84,128.61) -- cycle;
            \draw (432.06,128.61) .. controls (432.06,125.27) and (434.62,122.56) .. (437.79,122.56) .. controls (440.95,122.56) and (443.52,125.27) .. (443.52,128.61) .. controls (443.52,131.94) and (440.95,134.65) .. (437.79,134.65) .. controls (434.62,134.65) and (432.06,131.94) .. (432.06,128.61) -- cycle;
            \draw (434.39,120.27) .. controls (431.46,98.98) and (445.74,98.78) .. (442.56,118.41);
            \draw [shift={(441.99,121.31)}, rotate=282.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (341.26,128.98) -- (356.41,128.67);
            \draw [shift={(359.41,128.61)}, rotate=178.81,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (442.18,153.52) .. controls (442.18,148.9) and (445.74,145.15) .. (450.13,145.15) .. controls (454.51,145.15) and (458.07,148.9) .. (458.07,153.52) .. controls (458.07,158.15) and (454.51,161.9) .. (450.13,161.9) .. controls (445.74,161.9) and (442.18,158.15) .. (442.18,153.52) -- cycle;
            \draw (444.39,153.52) .. controls (444.39,150.19) and (446.96,147.48) .. (450.13,147.48) .. controls (453.29,147.48) and (455.86,150.19) .. (455.86,153.52) .. controls (455.86,156.86) and (453.29,159.56) .. (450.13,159.56) .. controls (446.96,159.56) and (444.39,156.86) .. (444.39,153.52) -- cycle;
            \draw (457.62,150.19) .. controls (475.79,145.34) and (477.06,162.46) .. (459.28,157.91);
            \draw [shift={(456.64,157.12)}, rotate=18.85,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (373.85,132.98) -- (440.32,147.9);
            \draw [shift={(443.25,148.56)}, rotate=192.65,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;

            \draw (148.2,126.23) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$v_{init}$};
            \draw (209.78,126.4) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$q_{accept},*$};
            \draw (145.16,98.15) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v$, for $v\neq (q_{accept},j)$};
            \draw (388.8,116.73) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$v_{init}$};
            \draw (368.23,132.93) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,rotate=-12.8,align=left] {$v$, for $v\neq v_{init}$};
            \draw (327.39,94) node [anchor=north west,inner sep=0.75pt,align=left] {$X_{2}$};
            \draw (99.89,104.5) node [anchor=north west,inner sep=0.75pt,align=left] {$X_{1}$};
            \draw (274.16,97.28) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$V$};
            \draw (473.66,147.48) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$V$};
            \draw (394.56,90.15) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v$, for $v \neq (q_{accept},j)$};
        \end{tikzpicture}
        \caption{The \DBWs{} accepting the languages $X_1$ and $X_2$ used to define the preference relation $\leqRelation[n+1]$ in the game of \cref{fig:reduction-nash-checking-game}.}
        \label{fig:reduction-nash-checking-pref-n+1}
    \end{figure}

    By the construction given above, we know that $(\machine{i})_i$ produces the outcome $v_{init} \#^\omega$. As player~$n+1$ controls $v_{init}$, no deviation of player~$i \in \{1,\dots,n\}$ modifies this outcome, i.e., these deviations are not profitable. However, player~$n+1$ has exactly one possible deviation, to go from $v_{init}$ to $(q_1,1)$, thus leading to some play $v_{init} \pi$. This deviation is profitable if $v_{init} \#^\omega \leqRelationStrict[n+1] v_{init} \pi$, and we know by construction that $v_{init} \#^\omega \leqRelationStrict[n+1] v_{init} \pi$ if and only if $\pi$ visits the state $q_{accept}$, i.e., $T$ accepts $w$ (as $\pi$ represents an execution of the LBTM $T$ thanks to the definition of $\machine{1},\dots,\machine{n}$). This shows the correctness of the reduction. Moreover, this is a polynomial reduction. Therefore, the NE checking problem is \pspace{}-hard.
\end{proof}


Let us now prove \cref{theorem:OutcomeCheck} stating the complexity of the NE outcome checking problem.

\begin{proof}[Proof of \cref{theorem:OutcomeCheck}]
    Let us begin with the membership result. Given a lasso $\pi$ starting at $v_0$, we provide an algorithm in \np{} to check whether $\pi$ is an NE outcome, i.e., there is a strategy profile $\sigma = (\sigma_i)_{i\in\Players}$ with outcome $\pi$ such that for all $i \in \Players$ and all strategies $\tau_i$, we have $\pi \not\leqRelationStrict[i] \outcomefrom{\tau_i,\sigma_{-i}}{v_0}$. In other words, given $\sigma$ a strategy profile partially defined such that $\pi = \outcomefrom{\sigma}{v_0}$, our goal is to check whether, for all $i$, there exists $\sigma_{-i}$ that extends this partially defined profile such that for all $\tau_i$, $\pi \not\leqRelationStrict[i] \outcomefrom{\tau_i,\sigma_{-i}}{v_0}$.
    For this purpose, given $i \in \Players$, let us consider $L_i = \{x \in V^\omega \mid \pi \not\leqRelationStrict[i] x\}$. This set is accepted by a generalized \DPW{} $\aut{B}_i$, with a disjunction of two parity conditions (obtained from $\aut{A}_i$ and its complement), and with a size polynomial in the size of $\game$ and the length of $\pi$. Suppose that $\aut{B}_i$ has a set $Q$ of states, an initial state $q_0$, and a transition function $\delta_{\aut{B}_i} : Q \times V \rightarrow Q$. We define a zero-sum generalized parity game $\mathcal{H}_i$~\cite{generalized-parity-game} as follows, where the two players are $A$ and $B$, and the objective of player~$B$ corresponds to $L_i$. Its set of vertices is the Cartesian product $V \times Q$, such that player~$A$ (resp.\ player~$B$) controls the vertices $(v,q)$ with $v \in V_{i}$ (resp.\ $v \not\in V_{i}$).
    The edges of $\mathcal{H}_i$ are of the form $((v,q),(v',q'))$ such that $(v,v') \in E$ and $q' = \delta_{\aut{B}_i}(q,v)$. The two priorities of each vertex $(v,q)$ of $\mathcal{H}_i$ are equal to those of $q$, in a way to encode $L_i$ as the objective of player~$B$. For the constructed game $\mathcal{H}_i$, from every vertex $(v,q)$, we decide in \np{} whether player~$B$ can win in $\mathcal{H}_i$ together with a memoryless winning strategy~\cite{generalized-parity-game}. It remains to check whether $\pi$, seen as a lasso in $\mathcal{H}_i$, only crosses vertices $(v,q)$ that are winning for player~$B$ whenever with $v \in V_i$. When this is the case, we can deduce from a winning strategy $\tau_B$ from $(v,q)$ of player~$B$, a strategy $\sigma_{-i}$ for the coalition $-i$ such that for all $\tau_i$, $\pi \not\leqRelationStrict[i] \outcomefrom{\tau_i,\sigma_{-i}}{v_0}$. Finally, repeating this procedure for each player~$i$ gives the required \np{} algorithm.

    \medskip

    We continue with the hardness result, with a reduction from the problem of deciding whether player~$1$ has a winning strategy in a zero-sum generalized parity game with a conjunction of two parity conditions, known to be \conpComplete{}~\cite{generalized-parity-game}. We reduce this problem to the complement of the NE outcome checking problem, to establish its \npHard{}ness. Let $\mathcal{H}$ be a generalized parity game with players~$1$ and $2$, an arena $\arena$ with $V$ as set of vertices, an initial vertex $v_0$, and two priority functions $\alpha_i: V \rightarrow \{0,\ldots,d_i\}$, $i = 1,2$. We construct a new game $\game = (\arena', \leqRelation[1],\leqRelation[2])$ with the same players, whose arena $\arena'$ is a copy of $\arena$ with an additional vertex $v_0'$ owned by player~$1$, with $v_0$ and itself as successors (see \cref{fig:outcome-checking-parity-reduction}). Given $V' = V \cup \{v'_0\}$, the preference relation $\leqRelation[2]$ is the trivial relation $(V')^\omega \times (V')^\omega$ accepted by a one-state \DPW{}. The relation $\leqRelation[1]$ is defined as follows: $x \leqRelation[1] y$ if and only if \emph{(i)} $x = y$, or \emph{(ii)} $x = (v_0')^\omega$ and $y = (v_0')^m v_0y'$, with $m \geq 0$ and $y'$ is a play in $\aut{H}$ satisfying the parity condition $\alpha_1$, or \emph{(iii)} $x = (v_0')^m v_0x'$ and $y = (v_0')^\omega$, with $m \geq 0$ and $x'$ is a play in $\aut{H}$ satisfying the parity condition $\alpha_2+1$, i.e., it does not satisfy the condition $\alpha_2$.

    It is clearly a preorder. Note that when a play $\rho'$ starting at $v_0$ is winning for both parity conditions in $\mathcal{H}$, then $(v_0')^\omega \leqRelationStrict[1] (v_0')^m \rho'$ by the two previous items. A \DPW{} accepting $\leqRelation[1]$ is depicted in \cref{fig:outcome-checking-parity-reduction}. It is constructed with two copies of $\arena$, the right (resp.\ left) copy to handle the case \emph{(ii)} (resp.\ \emph{(iii)}) of $x \leqRelation[1] y$. The proposed reduction is correct. Indeed, suppose that $\pi = (v'_0)^\omega$ is not an NE outcome. As $\leqRelation[2]$ is trivial, there cannot be profitable deviations for player~$2$. This means that for each strategy profile $\sigma = (\sigma_1,\sigma_2)$ with outcome $\pi$, there exists a deviating strategy $\tau_1$ of player~$1$ such that $\pi \leqRelationStrict[1] \rho$ with $\rho = \outcomefrom{\tau_1, \sigma_2}{v'_0}$.
    Thus, by definition of $\leqRelation[1]$, $\rho$ is equal to $(v'_0)^m\rho'$ with $\rho'$ a winning play in $\mathcal{H}$. Hence, transferred to $\aut{H}$, we get that for each strategy $\sigma'_2$ of player 2, there exists a stategy $\tau'_1$ of player 1 such that $\outcomefrom{\tau'_1, \sigma'_2}{v_0}$ is winning. By determinacy, player 1 has thus a winning strategy in $\aut{H}$ from $v_0$.
    The other direction of the reduction is proved similarly.
\end{proof}


\begin{figure}[t]
    \centering
    \begin{minipage}[c]{0.4\textwidth}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,scale=.85,every node/.style={scale=.85}]
            \draw (316.91,133.61) .. controls (316.91,128.98) and (320.46,125.23) .. (324.85,125.23) .. controls (329.24,125.23) and (332.79,128.98) .. (332.79,133.61) .. controls (332.79,138.23) and (329.24,141.98) .. (324.85,141.98) .. controls (320.46,141.98) and (316.91,138.23) .. (316.91,133.61) -- cycle;
            \draw (325.11,112.78) -- (324.91,122.23);
            \draw [shift={(324.85,125.23)}, rotate=271.21,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (320.66,48.95) .. controls (320.66,44.23) and (324.48,40.41) .. (329.19,40.41) -- (363.25,40.41) .. controls (367.97,40.41) and (371.79,44.23) .. (371.79,48.95) -- (371.79,78.63) .. controls (371.79,83.35) and (367.97,87.17) .. (363.25,87.17) -- (329.19,87.17) .. controls (324.48,87.17) and (320.66,83.35) .. (320.66,78.63) -- cycle;
            \draw (290.41,59.61) .. controls (290.41,55.22) and (293.96,51.67) .. (298.34,51.67) .. controls (302.72,51.67) and (306.27,55.22) .. (306.27,59.61) .. controls (306.27,63.99) and (302.72,67.54) .. (298.34,67.54) .. controls (293.96,67.54) and (290.41,63.99) .. (290.41,59.61) -- cycle;
            \draw (306.27,59.61) -- (329.2,59.69);
            \draw [shift={(332.2,59.7)}, rotate=180.21,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (332.41,59.61) .. controls (332.41,55.22) and (335.96,51.67) .. (340.34,51.67) .. controls (344.72,51.67) and (348.27,55.22) .. (348.27,59.61) .. controls (348.27,63.99) and (344.72,67.54) .. (340.34,67.54) .. controls (335.96,67.54) and (332.41,63.99) .. (332.41,59.61) -- cycle;
            \draw (320.67,140.84) .. controls (316.15,159.02) and (331.81,159.57) .. (328.76,143.46);
            \draw [shift={(328.11,140.78)}, rotate=73.97,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (332.79,133.61) -- (371.15,133.53);
            \draw [shift={(374.15,133.53)}, rotate=179.89,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (294.97,51.94) .. controls (292.7,34.93) and (304,33.22) .. (301.88,48.84);
            \draw [shift={(301.37,51.74)}, rotate=282.09,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (321.88,183.52) .. controls (321.88,178.9) and (325.44,175.15) .. (329.83,175.15) .. controls (334.21,175.15) and (337.77,178.9) .. (337.77,183.52) .. controls (337.77,188.15) and (334.21,191.9) .. (329.83,191.9) .. controls (325.44,191.9) and (321.88,188.15) .. (321.88,183.52) -- cycle;
            \draw (323.4,179.07) .. controls (304.3,175.63) and (302.35,190.07) .. (320.76,188.18);
            \draw [shift={(323.5,187.8)}, rotate=170.23,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (316.91,133.61) -- (280.23,133.4);
            \draw [shift={(277.23,133.38)}, rotate=0.33,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (330.67,138.84) .. controls (363.69,149.26) and (367.69,169.14) .. (339.43,179.45);
            \draw [shift={(336.71,180.38)}, rotate=342.23,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (366.36,129.54) .. controls (366.36,124.22) and (370.67,119.91) .. (375.99,119.91) -- (437.83,119.91) .. controls (443.15,119.91) and (447.46,124.22) .. (447.46,129.54) -- (447.46,163.05) .. controls (447.46,168.37) and (443.15,172.68) .. (437.83,172.68) -- (375.99,172.68) .. controls (370.67,172.68) and (366.36,168.37) .. (366.36,163.05) -- cycle;
            \draw (373.57,133.91) .. controls (373.57,129.52) and (377.13,125.97) .. (381.51,125.97) .. controls (385.89,125.97) and (389.44,129.52) .. (389.44,133.91) .. controls (389.44,138.29) and (385.89,141.84) .. (381.51,141.84) .. controls (377.13,141.84) and (373.57,138.29) .. (373.57,133.91) -- cycle;
            \draw (427.91,136.76) .. controls (427.91,132.38) and (431.46,128.83) .. (435.84,128.83) .. controls (440.22,128.83) and (443.77,132.38) .. (443.77,136.76) .. controls (443.77,141.14) and (440.22,144.69) .. (435.84,144.69) .. controls (431.46,144.69) and (427.91,141.14) .. (427.91,136.76) -- cycle;
            \draw (392.15,142.61) .. controls (397.38,136.26) and (411.15,136.67) .. (425.02,136.75);
            \draw [shift={(427.91,136.76)}, rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (208.96,128.97) .. controls (208.96,123.73) and (213.21,119.48) .. (218.45,119.48) -- (276.05,119.48) .. controls (281.3,119.48) and (285.55,123.73) .. (285.55,128.97) -- (285.55,161.99) .. controls (285.55,167.23) and (281.3,171.48) .. (276.05,171.48) -- (218.45,171.48) .. controls (213.21,171.48) and (208.96,167.23) .. (208.96,161.99) -- cycle;
            \draw (261.57,134.31) .. controls (261.57,129.92) and (265.13,126.37) .. (269.51,126.37) .. controls (273.89,126.37) and (277.44,129.92) .. (277.44,134.31) .. controls (277.44,138.69) and (273.89,142.24) .. (269.51,142.24) .. controls (265.13,142.24) and (261.57,138.69) .. (261.57,134.31) -- cycle;
            \draw (212.91,137.56) .. controls (212.91,133.18) and (216.46,129.63) .. (220.84,129.63) .. controls (225.22,129.63) and (228.77,133.18) .. (228.77,137.56) .. controls (228.77,141.94) and (225.22,145.49) .. (220.84,145.49) .. controls (216.46,145.49) and (212.91,141.94) .. (212.91,137.56) -- cycle;
            \draw (260.88,145.48) .. controls (257.53,139.53) and (244.84,137.38) .. (231.74,137.5);
            \draw [shift={(228.77,137.56)}, rotate=358.05,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;

            \draw (290.8,51.33) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v'_{0}$};
            \draw (229.39,92.97) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}$};
            \draw (353.76,68.47) node [anchor=north west,inner sep=0.75pt,align=left] {$\mathcal{H}$};
            \draw (318.1,129.23) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$q_{0}$};
            \draw (333.2,55.93) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v_{0}$};
            \draw (323.7,179.43) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$q_{s}$};
            \draw (347.5,184.73) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$\forall v\in V$};
            \draw (276.3,188.13) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$\forall v\in V'$};
            \draw (259.69,42.07) node [anchor=north west,inner sep=0.75pt,align=left] {$\game$};
            \draw (287.43,118.4) node [anchor=north west,inner sep=0.75pt,font=\small] {$v_{0},v'_{0}$};
            \draw (333.43,118.4) node [anchor=north west,inner sep=0.75pt,font=\small] {$v'_{0},v_{0}$};
            \draw (284.83,178.6) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v,v$};
            \draw (349.03,174.4) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v,v$};
            \draw (307.83,150.6) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v'_{0},v'_{0}$};
            \draw (369.06,156.77) node [anchor=north west,inner sep=0.75pt,align=left] {$\mathcal{H}$ $(\alpha_{1})$};
            \draw (374.36,130.23) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v_{0}$};
            \draw (395.47,137.4) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v'_{0},v$};
            \draw (431.3,133.88) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v$};
            \draw (209.06,155.77) node [anchor=north west,inner sep=0.75pt,align=left] {$\mathcal{H}$ $(\alpha_{2}+1)$};
            \draw (262.36,130.63) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v_{0}$};
            \draw (230.77,139.56) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v,v'_{0}$};
            \draw (216.3,134.68) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v$};
        \end{tikzpicture}
        \caption{The game $\game$ and the \DPW{} $\aut{A}$ accepting $\leqRelation[1]$ for the reduction of \cref{theorem:OutcomeCheck}.
        }
        \label{fig:outcome-checking-parity-reduction}
    \end{minipage}
    \hfill
    \begin{minipage}[c]{0.58\textwidth}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,scale=.85,every node/.style={scale=.85}]
            \draw (255.77,25.02) .. controls (255.77,23.52) and (256.98,22.3) .. (258.49,22.3) -- (266.65,22.3) .. controls (268.15,22.3) and (269.37,23.52) .. (269.37,25.02) -- (269.37,34.38) .. controls (269.37,35.88) and (268.15,37.1) .. (266.65,37.1) -- (258.49,37.1) .. controls (256.98,37.1) and (255.77,35.88) .. (255.77,34.38) -- cycle;
            \draw (262.5,38.3) -- (262.5,50.1);
            \draw [shift={(262.5,53.1)}, rotate=270,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (233.12,57.69) .. controls (233.12,55.74) and (234.7,54.17) .. (236.64,54.17) -- (290.4,54.17) .. controls (292.34,54.17) and (293.92,55.74) .. (293.92,57.69) -- (293.92,68.25) .. controls (293.92,70.19) and (292.34,71.77) .. (290.4,71.77) -- (236.64,71.77) .. controls (234.7,71.77) and (233.12,70.19) .. (233.12,68.25) -- cycle;
            \draw (262.5,71.9) -- (224.16,98.59);
            \draw [shift={(221.7,100.3)}, rotate=325.16,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (262.5,71.9) -- (300.25,98.57);
            \draw [shift={(302.7,100.3)}, rotate=215.24,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (280.27,104.31) .. controls (280.27,102.48) and (281.75,101) .. (283.58,101) -- (321.29,101) .. controls (323.12,101) and (324.6,102.48) .. (324.6,104.31) -- (324.6,114.25) .. controls (324.6,116.08) and (323.12,117.57) .. (321.29,117.57) -- (283.58,117.57) .. controls (281.75,117.57) and (280.27,116.08) .. (280.27,114.25) -- cycle;
            \draw (297.4,100.7) -- (297.4,117.9);
            \draw (220.1,116.3) -- (220.1,138.1);
            \draw [shift={(220.1,141.1)}, rotate=270,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (302.5,117.3) -- (302.5,135.1);
            \draw [shift={(302.5,138.1)}, rotate=270,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (253.43,141.98) .. controls (253.43,140) and (255.04,138.4) .. (257.01,138.4) -- (347.35,138.4) .. controls (349.33,138.4) and (350.93,140) .. (350.93,141.98) -- (350.93,152.72) .. controls (350.93,154.7) and (349.33,156.3) .. (347.35,156.3) -- (257.01,156.3) .. controls (255.04,156.3) and (253.43,154.7) .. (253.43,152.72) -- cycle;
            \draw (321.99,138.3) -- (321.99,156.5);
            \draw (302.5,156.9) -- (302.5,186.7);
            \draw [shift={(302.5,189.7)}, rotate=270,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (302.4,206.5) -- (302.4,215.3);
            \draw [shift={(302.4,218.3)}, rotate=270,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (3.57,-1.72) -- (0,0) -- (3.57,1.72) -- cycle;
            \draw (213.77,103.82) .. controls (213.77,102.32) and (214.98,101.1) .. (216.49,101.1) -- (224.65,101.1) .. controls (226.15,101.1) and (227.37,102.32) .. (227.37,103.82) -- (227.37,113.18) .. controls (227.37,114.68) and (226.15,115.9) .. (224.65,115.9) -- (216.49,115.9) .. controls (214.98,115.9) and (213.77,114.68) .. (213.77,113.18) -- cycle;
            \draw (277.27,193.11) .. controls (277.27,191.28) and (278.75,189.8) .. (280.58,189.8) -- (324.59,189.8) .. controls (326.42,189.8) and (327.9,191.28) .. (327.9,193.11) -- (327.9,203.05) .. controls (327.9,204.88) and (326.42,206.37) .. (324.59,206.37) -- (280.58,206.37) .. controls (278.75,206.37) and (277.27,204.88) .. (277.27,203.05) -- cycle;
            \draw (297.4,189.5) -- (297.4,206.7);

            \draw (257.47,25.2) node [anchor=north west,inner sep=0.75pt,align=left] {$v$};
            \draw (191.67,39) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$\mathbb{P}_{1}$: $v\rightarrow v'$?};
            \draw (177.67,76) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$\mathbb{C}$ accepts};
            \draw (235.67,55.6) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$v,(v,v')$?};
            \draw (301.2,69.1) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {{\small $\mathbb{C}$ deviates with $v\rightarrow u$}\\{\footnotesize (where $v \in V_{j}$)}};
            \draw (282.47,103) node [anchor=north west,inner sep=0.75pt,align=left] {$v'$};
            \draw (299.27,104) node [anchor=north west,inner sep=0.75pt,align=left] {$u,j$};
            \draw (142.27,118) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$\mathbb{P}_{1}$: $v'\rightarrow v''$?};
            \draw (213.53,147.2) node [anchor=north west,inner sep=0.75pt,align=left] {...};
            \draw (311.87,120.6) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$\mathbb{P}_{1}$: $v'\rightarrow v''$?};
            \draw (254.88,139.8) node [anchor=north west,inner sep=0.75pt,font=\normalsize,align=left] {$v',(v',v'')$?};
            \draw (325.23,141.4) node [anchor=north west,inner sep=0.75pt,align=left] {$u,j$};
            \draw (312.2,157.3) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {{\small $\mathbb{C}$: $u\rightarrow u'$}{\footnotesize  (if $u\in V_{j}$)}\\{\small $\mathbb{P}_{2}$: $u\rightarrow u'$}{\footnotesize  (if $u'\notin V_{j}$)}};
            \draw (295.47,221.53) node [anchor=north west,inner sep=0.75pt,align=left] {...};
            \draw (213.47,102) node [anchor=north west,inner sep=0.75pt,align=left] {$v'$};
            \draw (279.47,191.8) node [anchor=north west,inner sep=0.75pt,align=left] {$v''$};
            \draw (299.27,190.8) node [anchor=north west,inner sep=0.75pt,align=left] {$u',j$};
        \end{tikzpicture}
        \caption{An illustration of the \pcp{} game intuition: \proverone{} observes the left part of a vertex (all $v,v',v''$), while \challenger{} and \provertwo{} represent the deviating player~$j$ and the coalition $-j$ in the right part (all $u,u'$). Given $\rho=vv'v''\dots$ and $\rho'=vuu'\dots$, \proverone{} and \provertwo{} aim to ensure $\rho \not\leqRelationStrict[j] \rho'$.}
        \label{fig:intuition-pcp-game}
    \end{minipage}
\end{figure}

\section{NE Existence and Constrained NE Existence Problems}
\label{section:NE-existence}

This section is devoted to the NE existence problem and its constrained variant. We mainly focus on the NE existence problem and explain at the end of the section how to take into account the constraints imposed on the NE outcome.

To solve the NE existence problem, we adapt a recent approach proposed in~\cite{SPE-NCRS-quanti-parity-P1CP2}. The idea is to reduce our problem to solving a \emph{three-player game with imperfect information}. Let us first give some intuition (see also \cref{fig:intuition-pcp-game}) and then the formal definition. We use a reduction to a game with three players: two \emph{Provers} \proverone{} and \provertwo{} and one \emph{Challenger} \challenger. The two Provers aim to build an NE outcome $\rho$ while Challenger contests that it is an NE outcome: \proverone{} has the task to build $\rho$ edge by edge, while \provertwo{} has the task to show that the deviation $\rho'$ of player~$i$ proposed by \challenger{} is not profitable, i.e., $\rho \not\leqRelationStrict[i] \rho'$.
We need two Provers (we cannot use a two-player zero-sum game), as the construction of $\rho$ cannot depend on one specific deviation and must be fixed, i.e., its construction cannot change according to the deviation $\rho'$ to artificially force $\rho \not\leqRelationStrict[i] \rho'$. This also means that $\proverone$ has to build $\rho$ without knowing when \challenger{} deviates: he has \emph{partial observation} of the game, while \challenger{} and \provertwo{} have perfect information.
This game, called \emph{\pcp{} game}, is articulated in two parts. The first part consists of vertices where \challenger{} does not deviate, where an action of \proverone{} is to suggest an edge $(v,v')$ to extend the current construction of $\rho$, and an action of \challenger{} is either to accept it or to deviate from $\rho$ by choosing another edge $(v,u)$ with $u \neq v'$. Such a deviation corresponds to a deviation by the player~$j$ who owns $v$, leading to the second part of the game. In this part, the vertices must retain the construction of the play $\rho$, the construction of the deviation $\rho'$, and the component $j$ to identify the player who deviated: \proverone{} continues to propose an extension $(v,v')$ for $\rho$ with no interaction with \challenger{}, and \challenger{} and \provertwo{}, representing respectively the deviating player~$j$ and the opposed coalition $-j$, interact to construct $\rho'$. When the game stays in the first part, the aim of \proverone{} is to produce an NE outcome $\rho$, and if it goes in the second part, the aim of \provertwo{} is to retaliate on the deviations proposed by $\challenger{}$ to guarantee that that $\rho'$ is not a profitable deviation. Hence the vertices of the \pcp{} game also store the current states of the \DPWs{} accepting the preference relations, in a way to compare the outcome $\rho$ with the deviation $\rho'$.

We now proceed to the formal definition of the \pcp{} game. Suppose that we are given a game $\game = (\arena, (\leqRelation[i])_{i \in \Players})$ with $\arena = (V,E,\Players,(V_i)_{i\in\Players})$ and $v_0 \in V$ as the initial vertex, and each relation $\leqRelation[i]$ accepted by a \DPW{} $\aut{A}_i$. We denote each automaton as $\aut{A}_i = (Q_i,q_i^0,V \times V, \delta_i,\alpha_i)$ with $Q_i$ its set of states, $q_i^0$ its initial state, $V \times V$ its alphabet, $\delta_i : Q_i \times (V \times V) \rightarrow Q_i$ its transition function, and $\alpha_i : Q_i \rightarrow \{0,1,\ldots,d_i\}$ its priority function. The game
\[
\pcp(\game) = (S,(S_{\proveroneTight},S_{\challenger},S_{\provertwoTight}),(A_{\proveroneTight},A_{\challenger},A_{\provertwoTight}),
\Delta, Obs, W_{\proverone\provertwoTight})
\]
is a three-player game with partial observation for \proverone, defined as follows.
\begin{itemize}
    \item The set $S$ of vertices are of the form $(v,j,u,(q_i)_{i \in \Players})$ or $(v,j,u,(q_i)_{i \in \Players},(v,v'))$
    such that $v,u \in V$, $j \in \Players \cup \{\bot\}$, $q_i \in Q_i$, and $(v,v') \in E$. (Coming back to the intuition given above, $v$ is the current vertex of $\rho$, $j$ is the deviating player (or $\bot$ if \challenger{} did not deviate yet), $u$ is the current vertex of $\rho'$ (if it exists, otherwise $u = v$), $q_i$ is the current state of $\aut{A}_i$ while comparing $\rho$ and $\rho'$.)

    Given that we are looking for an NE in $\game$ from some initial vertex $v_0$, we consider the initial vertex $s_0 = (v_0,\bot,v_0,(q_i^0)_i)$ in the \pcp{} game.

    \item The set $S$ is partitioned as $S_{\proveroneTight} \cup S_{\challenger} \cup S_{\provertwoTight}$ such that $S_{\proveroneTight}$ is composed of the vertices $(v,j,u,(q_i)_{i})$, $S_{\challenger}$ is composed of the vertices $(v,j,u,(q_i)_{i},(v,v'))$ such that either $j = \bot$ and $v=u$, or $j \neq \bot$ and $u \in V_j$, and $S_{\provertwoTight}$ is composed of the vertices $(v,j,u,(q_i)_{i},(v,v'))$ such that $j \neq \bot$ and $u \in V \ssetminus V_j$.
    \item The set of actions\footnote{We introduce actions in a way to easily define the transition function $\Delta$.} is, respectively for each player, equal to:
 $A_{\proveroneTight} = \{(v,v') \mid (v,v') \in E\}$ (\proverone{} chooses an edge $(v,v')$ to extend the current construction of $\rho$) and $A_{\challenger} = A_{\provertwoTight} = V$ (\challenger{} and \provertwo{} choose the next vertex $u$ of $\rho'$ is case \challenger{} deviates, otherwise \challenger{} accepts the vertex $v'$ of the edge $(v,v')$ proposed by \proverone{}.)
    \item The transition function is defined as follows:
    \begin{itemize}
        \item for \proverone{}: for each $s = (v,j,u,(q_i)_{i}) \in S_{\proveroneTight}$ and each $(v,v') \in A_{\proveroneTight}$, we have $\Delta(s,(v,v')) = (v,j,u,(q_i)_{i},(v,v'))$,
        \item for \challenger{} who has not yet deviated: for each $s = (v,\bot,v,(q_i)_{i},(v,v')) \in S_{\challenger}$ and each $u \in A_{\challenger}$ with $(v,u) \in E$, we have
        either $u = v'$ and $\Delta(s,u) = (v',\bot,v',(q'_i)_{i})$ (which means that \challenger{} accepts the edge proposed by \proverone{}),
     or $u \neq v'$, $v \in V_j$, and $\Delta(s,u) = (v',j,u,(q'_i)_{i})$ (which means that \challenger{} starts deviating),
        with $q'_i = \delta(q_i,(v,v))$, $\forall i$, in both cases, i.e., the states of the \DPWs{} are updated.
        \item for \challenger{} who has deviated and \provertwo{}: for each $s = (v,j,u,(q_i)_{i},(v,v'))$ and each $u'$ with $(u,u') \in E$, we have either $u \in V_j$ and thus $s \in S_{\challenger}$, or $u \in V \ssetminus V_j$ and thus $s \in S_{\provertwoTight}$,
        and in both cases, $\Delta(s,u') = (v',j,u',(q'_i)_{i})$ with $q'_i = \delta(q_i,(v,u))$, $\forall i \in \Players$.
    \end{itemize}
    \item The observation function\footnote{Recall that \challenger{} and \provertwo{} have total observation of the \pcp{} game.} $Obs$ for \proverone{} is such that $Obs((v,j,u,(q_i)_{i},(v,v'))) = (v,v')$ and
    $Obs((v,j,u,(q_i)_{i})) = v$.
    When $s, s' \in S$ and $Obs(s) = Obs(s')$, we consider that \proverone{} cannot distinguish $s$ and $s'$. Hence, \proverone{} can only observe the vertices $v$ of the initial game $\game$ and the edges $(v,v')$ that he proposes. We naturally extend $Obs$ to histories and plays of the \pcp{} game by applying the observation function on each of their vertices.
    \item To complete the definition of the \pcp{} game, it remains to define the winning condition $W_{\proverone\provertwoTight}$. Let us introduce some notations. Given a vertex $s$, we denote by $\projOne{s}$ (resp.\ $\projDev{s}$, $\projTwo{s}$) the projection on its first (resp.\ second, third) component. For a vertex $s$ containing an edge, we denote by $\projE{s}$ this last component of $s$. Note that if $s \in S_{\proveroneTight}$, then $Obs(s) = \projOne{s}$, and if $s \in S_{\challenger} \cup S_{\provertwoTight}$, then $Obs(s) = \projE{s}$. Given a play $\pi = \pi_0\pi_1\pi_2 \ldots $ of the \pcp{} game starting at the initial vertex $s_0$, $\pi$ is an alternation of vertices of $S_{\proveroneTight}$ and vertices of $S_{\challenger} \cup S_{\provertwoTight}$. Moreover, looking at the first (resp.\ third) components of the vertices of $\pi$, each such component is repeated from one vertex to the next one. We thus denote by $\projOne{\pi}$ the projection on the first component of the vertices of $\pi_0\pi_2 \ldots \pi_{2k} \ldots$. Similarly, we use notation $\projTwo{\pi}$ for the projection on the third component. We also define the notation $\projE{\pi}$ for the projection of $\pi_1\pi_3 \ldots \pi_{2k+1} \ldots$ on the last component of its vertices. Note that $\projOne{\pi} = Obs(\pi_0\pi_2 \ldots \pi_{2k} \ldots)$ and $\projE{\pi} = Obs(\pi_1\pi_3 \ldots \pi_{2k+1} \ldots)$. In the play $\pi$, either the second component remains always equal to $\bot$ or becomes ultimately equal to some $j \in \Players$. We use notation $\projDev{\pi}$ to denote this value $\bot$ or $j$. All these notations are also used for histories.

    The set $W_{\proverone\provertwoTight}$ is defined as $W_{\proverone\provertwoTight} = W_{acc} \cup W_{dev}$ where $W_{acc}$ is the set of plays where \challenger{} always agreed with \proverone{} and $W_{dev}$ is the set of plays where \challenger{} deviated but \provertwo{} was able to show that this deviation is not profitable, i.e.,
    \begin{itemize}
        \item $W_{acc} = \{\pi \in \Plays(\pcp(\game)) \mid \projDev{\pi} = \bot \}$,
        \item $W_{dev} = \{\pi \in \Plays(\pcp(\game)) \mid \exists j \in \Players, \projDev{\pi} = j \text{ and } \projOne{\pi} \not\leqRelationStrict[j] \projTwo{\pi} \}$.
    \end{itemize}
    This set $W_{\proverone\provertwoTight}$ is the winning condition for both \proverone{} and \provertwo{} while \challenger{} has the complementary winning condition $S^\omega \ssetminus W_{\proverone\provertwoTight}$.

\end{itemize}

The next theorem states how the \pcp{} game helps in solving the NE existence problem. A strategy $\tau_{\proveroneTight}$ of \proverone{} is \emph{observation-based} if for all histories $h, h'$ ending in a vertex of \proverone{} such that $Obs(h) = Obs(h')$, we have $\tau_{\proveroneTight}(h) = \tau_{\proveroneTight}(h')$.

\begin{theorem}[restate=correspondence,name=]
\label{theorem:correspondence}
    The following statements are equivalent:
    \begin{itemize}
        \item In $\game$, there exists an NE $\sigma = (\sigma_i)_{i \in \Players}$ from $v_0$,
        \item In $\pcp(\game)$, there exists an observation-based strategy $\tau_{\proveroneTight}$ of \proverone{} such that for all strategies $\tau_{\challenger}$ of \challenger{}, there is a strategy $\tau_{\provertwoTight}$ of \provertwo{} such that $\outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0} \in W_{\proverone\provertwoTight}$.
    \end{itemize}
\end{theorem}

\cref{theorem:correspondence} is the key tool to solve the NE existence problem. It is proved in details in \cref{app:PCPgame}. We give hereafter a sketch of proof for the membership result of \cref{theorem:NEexistenceGeneral}, which follows the approach proposed in~\cite{SPE-NCRS-quanti-parity-P1CP2}. The \pspaceHard{}ness is easily obtained by a reduction from the existence of a maximal element in a one-player game (see \cref{prop:maximum-dpw-pspace}), as every maximal play with respect to the arena of one-player games is an NE outcome. The details are given in \cref{app:nash-existence-tools}.

\begin{proof}[Sketch of proof of \cref{theorem:NEexistenceGeneral}, membership]
    By \cref{theorem:correspondence}, deciding whether there exists an NE from $v_0$ in $\game$ reduces to deciding whether there exists an observation-based strategy $\tau_{\proveroneTight}$ of \proverone{} in $\pcp(\game)$ such that for all strategies $\tau_{\challenger}$ of \challenger{}, there is a strategy $\tau_{\provertwoTight}$ of \provertwo{} such that $\outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0} \in W_{\proverone\provertwoTight}$. In~\cite{SPE-NCRS-quanti-parity-P1CP2}, the authors solve the problem they study by solving a similar three-player game with imperfect information. They proceed at follows: \emph{(i)} the winning condition is translated into a Rabin condition\footnote{Recall that a Rabin condition uses a finite set of pairs $(E_j,F_j)_{j \in J}$ in a way to accept plays $\pi$ such that there exists $j \in J$ with $\infOcc{\pi} \cap E_j = \varnothing$ and $\infOcc{\pi} \cap F_j \neq \varnothing$.} on the arena of the \pcp{} game, \emph{(ii)} the three-player game is transformed into a two-player zero-sum Rabin game with imperfect information, and finally \emph{(iii)} classical techniques to remove imperfect information are used to obtain a two-player zero-sum parity game with perfect information.

    In this sketch of proof, we only explain the first step, i.e., how to translate $W_{\proverone\provertwoTight} = W_{acc} \cup W_{dev}$ into a Rabin condition, as the second and third steps heavily use the arguments of~\cite{SPE-NCRS-quanti-parity-P1CP2}.
    To translate $W_{acc} = \{\pi \in \Plays(\pcp(\game)) \mid \projDev{\pi} = \bot \}$, we use one pair $(E_1,F_1)$ such that $E_1 = \varnothing$ and $F_1 = \{s \in S \mid \projDev{s} = \bot \}$. To translate $W_{dev} = \{\pi \in \Plays(\pcp(\game)) \mid \exists j \in \Players, \projDev{\pi} = j \text{ and } \projOne{\pi} \not\leqRelationStrict[j] \projTwo{\pi} \}$, we use the equivalences:
    \[
    \projDev{\pi} = j \Leftrightarrow \projDev{\pi} \not\in \{\bot\} \cup \Players\ssetminus\{j\},
    \qquad\qquad
    \rho \not\leqRelationStrict[j] \rho' \Leftrightarrow (\rho \not\leqRelation[j] \rho') \vee (\rho' \leqRelation[j] \rho).
    \]
    Hence $W_{dev}$ is the union of the two sets
    \begin{align*}
        \cup_{j \in \Players}&\{\pi \in \Plays(\pcp(\game)) \mid \projDev{\pi} \not\in \{\bot\} \cup \Players\ssetminus\{j\} \text{ and } \projOne{\pi} \not\leqRelation[j] \projTwo{\pi} \} \text{ and} \\
        \cup_{j \in \Players}&\{\pi \in \Plays(\pcp(\game)) \mid \projDev{\pi} \not\in \{\bot\} \cup \Players\ssetminus\{j\} \text{ and } \projTwo{\pi} \leqRelation[j] \projOne{\pi} \}.
    \end{align*}
    Recall that each relation $\leqRelation[j]$ is accepted by the \DPW{} $\aut{A}_j$ with the priority function $\alpha_j : Q_j \rightarrow \{0,1, \ldots d_j\}$, thus also $\not\leqRelation[j]$ with the modified priority function $\alpha_j+1$. Therefore, $W_{dev}$ can be translated into a Rabin condition on the vertices of $S$ with $2 \Sigma_{j \in \Players} d_j$ Rabin pairs~\cite{handbook-of-model-checking-orna-kupferman}. Steps \emph{(ii)} and \emph{(iii)} are detailed in \cref{app:nash-existence-tools}, leading to the announced complexity: the NE existence problem is exponential in $|V|$, $\Pi_{i\in \Players}|\aut{A}_i|$, and $\Sigma_{_{i\in \Players}}d_i$.
\end{proof}

Let us finally comment on \cref{theorem:constrainedNEexistenceGeneral} stating the complexity class of the constrained NE existence problem. The detailed proof is presented in \cref{app:constrained-nash-existence}. The approach to proving membership is very similar to that of the NE existence problem, as we only need to modify $W_{acc}$ in a way to include the constraints imposed on the NE outcome. A constraint imposed by a lasso $\pi_i$ can be represented by a \DPW{} $\aut{A}_i'$ accepting the language $\{\rho \in V^\omega \mid \pi_i \leqRelation[i] \rho\}$, with a polynomial size $|\aut{A}_i|\cdot |\pi_i|$. It then suffices to extend the arena the \pcp{} game with the states of each $\aut{A}_i'$. The hardness result is obtained by a reduction from the NE existence problem. Note that we cannot reproduce the proof provided above for the hardness of the NE existence problem, as the reduction requires a constraint per player~$i$ in the form of a lasso $\pi_i$. Each $\pi_i$ should be a global minimum element of $\leqRelation[i]$, which may not exist.

There is a great interest in using the concept of \pcp{} game, as it provides a unified approach to solve the NE existence problem and its constrained variant. With this approach, we could also decide the existence of an NE whose outcome $\rho$ satisfies various combinations of constraints, such as, e.g., $\pi_i \leqRelation[i] \rho \leqRelation[i] \pi'_i$ for one or several players~$i$. The chosen constraints only impact the winning condition $W_{\proverone\provertwo}$ and thus its translation into a Rabin condition.

\section{\texorpdfstring{$\omega$}{ω}-Recognizable Relations}
\label{section:omegaRec}

In this section, we suppose that we have a game $\game = (\arena,(\leqRelation[i])_{i \in \Players})$ whose preference relations $\leqRelation[i]$ are \emph{$\omega$-recognizable}. We recall that $\leqRelation[i]$ is $\omega$-recognizable if it is of the form $\cup_{i=1}^{\ell} X_i \times Y_i$ where $X_i, Y_i \subseteq \Sigma^\omega$ are $\omega$-regular languages over $\Sigma$. The class of $\omega$-recognizable relations is strictly included in the class of $\omega$-automatic relations (see~\cite{BookSakarovitch}). Deciding whether an $\omega$-automatic relation accepted by a \DPW{} is $\omega$-recognizable is in \twoExptime~\cite{rational-relations-automatic-loding}. In the following example, we motivate the interest of games with $\omega$-recognizable preference relations.

In \cref{ex:no-nash-not-omega-recognizable}, we presented a one-player game with no NE. The reason of the absence of NE is that $\leqRelation[1]$ has an unbounded infinite ascending chain in the relation $\leqRelationStrict[1]$. This situation cannot happen with $\omega$-recognizable preference relations, as highlighted in the next proposition (its proof is given in \cref{app:recognizable-finite-index}).

\begin{proposition}[restate=recognizablefiniteindex,name=]
\label{prop:recognizable-finite-index}
    An $\omega$-automatic preorder $\leqRelation$ $\subseteq \Sigma^\omega \times \Sigma^\omega$ is $\omega$-recognizable if and only if its induced equivalence relation \equivRelation{} has finite index.
\end{proposition}

Thanks to this result, we can partition $\Sigma^\omega$ as a \emph{finite lattice} given by a partial order induced by $\leqRelation$ on the equivalence classes of $\equivRelation$. In particular, there always exists a maximal (resp.\ minimal) element. In view of the previous example, we reconsider the studied problems for games $\game = (\arena,(\leqRelation[i])_{i \in \Players})$ with $\omega$-recognizable preference relations $\leqRelation[i]$. In that setting, the main difference is the \emph{existence of an NE} in any such game. When in addition, the relations $\leqRelation[i]$ are all prefix-independent, there exists an NE composed of finite-memory strategies.

\begin{theorem}[restate=existenceNE,name=]
\label{theorem:existenceNE}
    When the preference relations of a game are all $\omega$-recognizable, then there always exists an NE. Moreover, if these relations are prefix-independent, there is an NE which is composed of finite-memory strategies.
\end{theorem}

Before discussing the proof of this result, let us comment on the results established in \cref{section:nash-decisionProb} in the particular case of $\omega$-recognizable relations.
Concerning the properties of relations, \cref{prop:PropertiesRelations} still holds, since one can carefully check that the proofs given for the hardness results all use $\omega$-recognizable relations in their reduction. \cref{prop:maximum-dpw-pspace} no longer makes sense given that there always exists a maximal (resp.\ minimal) element. Concerning the decision problems (the NE existence problem excluded, in view of \cref{theorem:existenceNE}), all membership results clearly remain valid. One can check in the given proof that the hardness result of \cref{theorem:nash-checking-pspace} also holds. For the hardness result of \cref{theorem:constrainedNEexistenceGeneral}, we need another proof, given in \cref{app:hardness-recognizable-pspace}, where the reduction does not hold for a constant number of players.

The proof of \cref{theorem:existenceNE} requires two steps. We first prove it under the assumption that each preference relation $\leqRelation[i]$ is a \emph{total} preorder, and then without this assumption. The first step can be obtained as a corollary of~\cite[Theorem 15]{LeRoux-Pauly-Equilibria}, as our framework restricted to total preorders $\leqRelation[i]$ is a special case of strict weak orders $\leqRelationStrict[i]$, an assumption that guarantees the existence of an NE. Nevertheless, we provide a proof of this first step in \cref{app:NEtotal}, inspired by the work of~\cite{Gradel-Ummels-08} and~\cite{BrihayePS13}, where the existence of NEs is studied through the concept of value and optimal strategy (see below and in \cref{app:NEtotal}). From the latter proof, we easily derive the existence of an NE composed of finite-memory strategies when the relations $\leqRelation[i]$ are prefix-independent, a situation not covered by~\cite{LeRoux-Pauly-Equilibria}.

The second step is obtained thanks to an embedding of partial preorders into total preorders, as described in the next proposition. \cref{theorem:existenceNE} easily follows (see \cref{app:generalNE}).

\begin{proposition}[restate=embeddingpartialtotal,name=]
\label{prop:partial-preorder-to-total-preorder}
    Any $\omega$-recognizable preorder \leqRelation{} can be embedded into an $\omega$-recognizable total preorder $\leqRelation'$. Moreover, for all $x,y$, if $x \Join y$, then $x \Join' y$, for $\Join$ $\in \{\leqRelation,\leqRelationStrict,\geqRelation,\geqRelationStrict,\equivRelation\}$.
\end{proposition}

Note that from our proof of \cref{theorem:existenceNE} when the preference relations $\leqRelation[i]$ are total and prefix-independent, we derive the following \emph{characterization} of NE outcomes in terms of values (the proof is given in \cref{app:carac}). In this context, for each player~$i$ and vertex $v$ of $\game$, there always exists a \emph{value} $val_i(v)$ (which is an equivalence class of $\equivRelation[i]$) and \emph{optimal strategies} $\sigma_i^v$ for player~$i$ and $\sigma_{-i}^v$ for the coalition $-i$ such that $\sigma_i^v$ (resp.\ $\sigma_{-i}^v$) ensures consistent plays $\pi$ starting at $v$ such that $val_i(v) \leqRelation[i] [\pi]_{i}$ (resp.\ $[\pi]_{i} \leqRelation[i] val_i(v)$) (see \cref{app:NEtotal}). Such an NE characterization is well-known for games with classical objectives (see, e.g., the survey~\cite{Bruyere17}).

\begin{theorem}[restate=characterization,name=]
\label{theorem:characterization}
    Let $\game$ be a game such that each preference relation $\leqRelation[i]$ is $\omega$-recognizable, total, and prefix-independent. Then a play $\rho = \rho_0\rho_1\ldots$ is an NE outcome if and only if for all vertices $\rho_n$ of $\rho$, if $\rho_n \in V_i$, then $val_i(\rho_n) \leqRelation[i] [\rho]_{i}$.
\end{theorem}

\bibliography{bibliography}

\appendix

\section{Proof of \texorpdfstring{\cref{prop:PropertiesRelations}}
{Proposition~\ref{prop:PropertiesRelations}}}
\label{app:proof-PropertiesRelations}


Let us first make general comments on the proofs. For the proof of \cref{prop:PropertiesRelations}, we use logspace reductions to show the \nlHard{}ness results. Such a reduction consists in computing a polynomially bounded function $f$ with a deterministic Turing Machine using three tapes: a read-only input tape containing the input $x$ of length $n$, a write-only output tape that will contain $f(x)$ at the end of the execution, and a read-write work tape with $\log(n)$ cells. The reader can consult~\cite{Computational-Complexity-2009,sipser13} for more details about logspace reductions.
Recall that the complexity classes \pspace{} and \nl{} are both closed under complementation~\cite{sipser13}. In the proofs of the Appendix, we therefore sometimes switch between a problem to its complement without mentioning it. Also recall that \pspace{} $=$ \npspace{}~\cite{sipser13}. In those proofs, we will also make great use of well-known properties of automata, for which we will cite the corresponding references. We will also need the following result.

\begin{proposition}
\label{prop:emptiness-universality-dpw-generalized-nl-complete}
    The problem of deciding whether an $\omega$-language $L \subseteq \Sigma^\omega$ is not empty (resp.\ universal) is \nl{}-complete if $L$ is accepted by a generalized \DPW{} with a constant number of parity conditions.
\end{proposition}

\begin{proof}
    Let us show the \nl{}-membership for the non-emptiness problem for both statements. Consider a generalized \DPW{} $\aut{A}$ with a Boolean combination of $d$ parity conditions, with $d$ constant. Since parity conditions only handle infinite occurrences of states of a run, by~\cite[Proposition 3.1]{PatriciaBouyerBMU15}, we know that if there is a word $w$ accepted by $\aut{A}$, then there exists a lasso $\mu(\nu)^\omega$ accepted by $\aut{A}$ such that $|\mu|,|\nu| \leq |Q|^2$, where $|Q|$ is the number of states of $\aut{A}$. Hence, we can guess the length $n \leq 2|Q|^2$ of such a lasso, and the lasso itself on the fly, state by state. To check whether the guessed lasso is accepted by $\aut{A}$, we retain the maximum priority occurring in $\nu$ for each of the $d$ parity conditions, in a way to verify whether the Boolean combination of those conditions is true or not. At any time, the amount of information to be stored is logarithmic since a state and
    $d$ priorities take logarithmic space when written in binary (recall that $d$ is constant).

    For the universality problem in case $\aut{A}$ is deterministic, it amounts to solve the non-emptiness problem for the complement automaton $\aut{A}'$. The latter automaton is constructed from $\aut{A}$ where in its Boolean combination, each $\vee$ (resp.\ $\wedge$) is replaced by $\wedge$ (resp.\ $\vee$), and the priorities are all incremented by one in each of its parity conditions. So, the size of $\aut{A}'$ is the same and the determinism is preserved. Hence, we can perform the same algorithm as above.

    Since the non-emptiness and universality problems for \DBWs{} are both \nlComplete{}~\cite{handbook-of-model-checking-orna-kupferman}, and \DBWs{} are a special case of \DPWs{}, which are also a special case of generalized \DPWs{} with one parity condition, we get the \nlHard{}ness of every statement.
\end{proof}

We now proceed to the proof of \cref{prop:PropertiesRelations}. We denote by $\aut{A}$ a \DPW{} accepting an $\omega$-automatic relation $R \subseteq \Sigma^\omega \times \Sigma^\omega$.

\propertiesrelations*

\begin{proof}[Proof of \cref{prop:PropertiesRelations} - reflexivity]
    Let us start with the \nl{}-membership. From $\aut{A}$, we construct a new automaton $\aut{A}'$ over $\Sigma$ by first erasing all transitions labeled by $(a,b)$ with $a \neq b$, and then replacing each label $(a,a)$ of the remaining transitions by $a$. Clearly, $\aut{A}'$ is a \DPW{} and we get that $\{(x,x) \mid x \in \Sigma^\omega\} \subseteq \lang{\aut{A}}$ if and only if $\lang{\aut{A}'} = \Sigma^\omega$. Therefore, testing whether $R$ is reflexive reduces to checking the universality of $\aut{A}'$. The latter problem is \nl{} for \DPWs{} by \cref{prop:emptiness-universality-dpw-generalized-nl-complete}.
    Note that $\aut{A}'$ is constructed on the fly from $\aut{A}$ while guessing a lasso not accepted by $\aut{A}'$ (This requires to use pointers on states and transitions of $\aut{A}$, those pointers being stored in a logarithmic space of the work tape.

    \medskip

    Let us continue with the \nl{}-hardness. We proceed by reduction from the universality problem for \DBWs{} which is \nlComplete{}~\cite{handbook-of-model-checking-orna-kupferman}. Given such an automaton $\aut{A}$ over $\Sigma$, we construct a new automaton $\aut{A}' = \aut{A} \times \aut{A}$ that accepts the relation $R = \lang{A} \times \lang{A}$ over $\Sigma \times \Sigma$. The automaton $\aut{A}'$ has a size $|\aut{A}|^2$ and is a generalized \DBW{} with a conjunction of two B\"uchi conditions, and can thus be transformed into a \DBW{} $\aut{B}$ of size $2|\aut{A}'|^2$~\cite{handbook-of-model-checking-orna-kupferman}. Moreover, we have that for all $x \in \Sigma^\omega$, $x \in \lang{\aut{A}}$ if and only if $(x,x) \in \lang{\aut{B}}$. That is, $\lang{\aut{A}} = \Sigma^\omega$ if and only if $R$ is reflexive. This establishes the correctness of the reduction. Finally, it is a logspace reduction. Indeed, we need to use pointers on the input tape, stored in the work tape, in a way to iterate on the states and transitions of $\aut{A}$, and construct step by step the states and transitions of $\aut{B}$ on the output tape; we also need to store an extra bit to remember the copy of $\aut{A}'$ (to get the \DBW{}~$\aut{B}$).
\end{proof}

\begin{proof}[Proof of \cref{prop:PropertiesRelations} - transitivity]
    We begin with the \nl{}-membership. The relation $R$ is not transitive if there exist $x,y,z \in \Sigma^\omega$ such that $(x,y),(y,z) \in R$ but $(x,z) \not\in R$. Testing whether $R$ is not transitive thus reduces to testing whether the language
    \[
    L = \{(x,y,z) \in (\Sigma^\omega)^3 \mid (x,y) \in R \wedge (y,z) \in R \wedge (x,z) \not\in R \}
    \]
    is not empty. We can construct an automaton $\aut{A}'$ accepting $L$ which is a generalized \DPW{} with a conjunction of three parity conditions. This automaton has a polynomial size (the complementation of $\aut{A}$ leads to an automaton with the same size as it suffices to increment each priority by $1$). Hence, we can check whether $L$ is not empty with the \nl{} algorithm of \cref{prop:emptiness-universality-dpw-generalized-nl-complete}. Note that $\aut{A}'$ is constructed on the fly while guessing a lasso accepted by $\aut{A}'$.

    \medskip

    We now prove the \nlHard{}ness. We use a reduction from the universality problem of \DBWs{} which is \nlComplete{}~\cite{handbook-of-model-checking-orna-kupferman}. Given a \DBW{} $\aut{A}$ over the alphabet $\Sigma$, we construct the relation $R = R_1 \cup R_2 \cup R_3 \cup R_4$ on $(\Sigma')^\omega \times (\Sigma')^\omega$ with $\Sigma' = \Sigma \cup \{\#\}$ such that:
    \begin{multicols}{2}
    \begin{itemize}
        \item $R_1 = \Sigma^\omega \times \{\#^\omega\}$,
        \item $R_2 = \{\#^\omega\} \times \Sigma^\omega$,
        \item $R_3 = \lang{\aut{A}} \times \lang{\aut{A}}$,
        \item $R_4 = \{(\#^\omega,\#^\omega)\}$.
    \end{itemize}
    \end{multicols}
    Let us show the correctness of the reduction. Suppose that $\lang{\aut{A}} = \Sigma^\omega$, it means that $R_3 = \Sigma^\omega \times \Sigma^\omega$. Let $x,y,z \in (\Sigma')^\omega$ such that $(x,y) \in R$ and $(y,z) \in R$, and let us show that $(x,z) \in R$. If $x = \#^\omega$, then $y \in \Sigma^\omega$ or $y = \# ^\omega$, so $(x,z) \in R_2 \cup R_4$. Otherwise $x \neq \#^\omega$, thus by $R_3 = \Sigma^\omega \times \Sigma^\omega$ and $R_1$, we have $(x,z) \in R_1 \cup R_3$.
    Conversely, if $\lang{\aut{A}} \neq \Sigma^\omega$, then there exists $x \in \Sigma^\omega \ssetminus \lang{\aut{A}}$. So, we have $(x,\#^\omega) \in R_1$, $(\#^\omega,x) \in R_2$ but $(x,x) \not\in R$. Hence, $\lang{\aut{A}} = \Sigma^\omega$ if and only if $R$ is transitive. Furthermore, $R$ is accepted by a \DBW{} $\aut{A}'$ that we construct as follows. Each $R_i$, $i\neq 3$, is trivially accepted by a \DBW{} of constant size. For $R_3$, we construct the automaton $\aut{A} \times \aut{A}$ which is a generalized \DBW{} with a conjunction of two B\"uchi conditions, that can be transformed into a \DBW{}. We then create a new initial state $q_0$ (replacing the initial state $q_0^i$ for each $R_i$) and duplicate the transitions outgoing\footnote{of the form $(a,\#)$ (resp.\ $(\#,a), (a,b), (\#,\#))$ for $R_1$ (resp.\ $R_2, R_3, R_4$), with $a,b \in \Sigma$.} each $q_0^i$ as a transition outgoing $q_0$. In this way we get a \DBW{} $\aut{A}'$ accepting $R$ of polynomial size. One can check that this reduction is a logspace reduction.
\end{proof}

\begin{proof}[Proof of \cref{prop:PropertiesRelations} - totality]
    We begin with the \nl{}-membership. Recall that $R$ is total if for all $x,y \in \Sigma^\omega$, we have $(x=y) \vee ((x,y) \in R) \vee ((y,x) \in R)$. Equivalently, $R$ is total if $R' = R_{=} \cup R \cup \tilde{R}$ is equal to $ \Sigma^\omega \times \Sigma^\omega$ such that $R_{=} = \{(x,x) \mid x \in \Sigma^\omega\}$ and $\tilde{R} = \{(y,x) \mid (x,y) \in R \}$. From $\aut{A}$, it is easy to construct a generalized \DPW{} $\aut{A}'$ of polynomial size with a disjunction of three parity conditions which accepts $R'$. We then run the \nl{} algorithm of \cref{prop:emptiness-universality-dpw-generalized-nl-complete} to check whether $\aut{A}'$ is universal while constructing $\aut{A}'$ on the fly.

    \medskip

    Let us turn to the \nl{}-hardness. We use a reduction from the universality problem of \DBWs{} which is \nlComplete{}~\cite{handbook-of-model-checking-orna-kupferman}. From a \DBW{} $\aut{A}$ over the alphabet $\Sigma$, we define the alphabet $\Sigma' = \Sigma \cup \{\#\}$ and the relation $R = R_1 \cup R_2$ where:
    \begin{itemize}
        \item $R_1 = (\Sigma^\omega \cup \{\#^\omega\}) \times \lang{\aut{A}}$ and
        \item $R_2 = L \times (\Sigma')^\omega$, with $L = (\Sigma')^\omega \ssetminus (\Sigma^\omega \cup \{\#^\omega\})$.
    \end{itemize}
    Let us prove the correctness of the reduction.
    Suppose that $\lang{\aut{A}} \neq \Sigma^\omega$. Given $x \in \Sigma^\omega \ssetminus \lang{\aut{A}}$, we have $x \neq \#^\omega$, $(\#^\omega,x) \not\in R$, and $(x,\#^\omega) \not\in R$. Hence, $R$ is not total.
    Suppose now that $R$ is not total, i.e., there exists $x \neq y$ such that $(x,y), (y,x) \not\in R$. By definition of $R_2$, we must have $x, y \in \Sigma^\omega \cup \{\#^\omega\}$. Since $x \neq y$, we know that $x$ or $y$ is in $\Sigma^\omega$, w.l.o.g., let us say $y \in \Sigma^\omega$. As $(x,y) \not\in R_1$, we get $y \not\in \lang{\aut{A}}$. Therefore $\lang{\aut{A}} = \Sigma^\omega$ if and only if $R$ is total.

    Moreover, $R$ is accepted by the \DBW{} $\aut{A}'$ depicted in \cref{fig:reduction-totality}. Let us give some explanations. W.l.o.g., we suppose that the automaton $\aut{A}$ is complete. The part of $\aut{A}'$ composed of the initial state $q_0$ and the two copies of $\aut{A}$ accepts the relation $R_1 = (\Sigma^\omega \times \lang{\aut{A}}) \cup (\{\#^\omega\} \times \lang{\aut{A}})$. The relation $R_2$ is accepted thanks to the accepting sink state $q_s$. Note that $L$ is composed of all words containing at least one symbol of $\Sigma$ and one symbol $\#$, a condition that has to be satisfied to reach $q_s$. The states $q_{\Sigma}$ and $q_{\#}$ retain the information that it is impossible to have $(x,y) \in R_1$ due to the symbol $\#$ seen inside $y$, implying $y \not\in \lang{\aut{A}}$. Finally, note that $\aut{A}'$ is deterministic, thus a \DBW{} and in particular a \DPW{}. This completes the proof as the proposed reduction is a logspace reduction.
\end{proof}

\begin{figure}
    \begin{subfigure}[t]{0.48\textwidth}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,]
            \draw (370.97,117.93) .. controls (391.4,108.78) and (391.22,133.91) .. (373.88,126.87);
            \draw [shift={(371.32,125.65)},rotate=28.34,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (175.67,124.09) .. controls (175.67,118.56) and (180.15,114.09) .. (185.67,114.09) .. controls (191.19,114.09) and (195.67,118.56) .. (195.67,124.09) .. controls (195.67,129.61) and (191.19,134.09) .. (185.67,134.09) .. controls (180.15,134.09) and (175.67,129.61) .. (175.67,124.09) -- cycle;
            \draw (162.37,124.39) -- (172.67,124.15);
            \draw [shift={(175.67,124.09)},rotate=178.7,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (185.67,114.09) .. controls (191,96.11) and (221.27,97.32) .. (253.02,98.8);
            \draw [shift={(255.97,98.93)},rotate=182.65,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (185.67,134.09) .. controls (188.68,153.07) and (219.94,154.76) .. (252.64,154.76);
            \draw [shift={(255.16,154.75)},rotate=179.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (185.67,134.09) .. controls (197.1,180.12) and (224.48,182.06) .. (327.99,185.5);
            \draw [shift={(329.56,185.55)},rotate=181.9,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (185.67,114.09) .. controls (193.52,78.13) and (223.26,62.91) .. (329.66,61.8);
            \draw [shift={(331.27,61.79)},rotate=179.49,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (330.17,184.01) .. controls (330.17,178.49) and (334.64,174.01) .. (340.17,174.01) .. controls (345.69,174.01) and (350.17,178.49) .. (350.17,184.01) .. controls (350.17,189.54) and (345.69,194.01) .. (340.17,194.01) .. controls (334.64,194.01) and (330.17,189.54) .. (330.17,184.01) -- cycle;
            \draw (331.27,61.79) .. controls (331.27,56.26) and (335.75,51.79) .. (341.27,51.79) .. controls (346.79,51.79) and (351.27,56.26) .. (351.27,61.79) .. controls (351.27,67.31) and (346.79,71.79) .. (341.27,71.79) .. controls (335.75,71.79) and (331.27,67.31) .. (331.27,61.79) -- cycle;
            \draw (297.96,165.55) -- (327.97,177.06);
            \draw [shift={(330.77,178.13)},rotate=200.98,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (296.77,86.93) -- (330.09,69.73);
            \draw [shift={(332.76,68.35)},rotate=152.7,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (350.17,58.33) .. controls (376.46,51.82) and (374.94,69.63) .. (353.18,67.52);
            \draw [shift={(350.36,67.15)},rotate=9.31,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (349.16,189.15) .. controls (375.79,192.24) and (376.73,175.21) .. (351.6,179.41);
            \draw [shift={(348.76,179.95)},rotate=347.91,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (255.96,83.18) .. controls (255.96,78.69) and (259.6,75.05) .. (264.08,75.05) -- (294.24,75.05) .. controls (298.72,75.05) and (302.36,78.69) .. (302.36,83.18) -- (302.36,111.43) .. controls (302.36,115.92) and (298.72,119.55) .. (294.24,119.55) -- (264.08,119.55) .. controls (259.6,119.55) and (255.96,115.92) .. (255.96,111.43) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (255.96,138.18) .. controls (255.96,133.69) and (259.6,130.05) .. (264.08,130.05) -- (294.24,130.05) .. controls (298.72,130.05) and (302.36,133.69) .. (302.36,138.18) -- (302.36,166.43) .. controls (302.36,170.92) and (298.72,174.55) .. (294.24,174.55) -- (264.08,174.55) .. controls (259.6,174.55) and (255.96,170.92) .. (255.96,166.43) -- cycle;
            \draw (299.17,102.13) -- (343.7,116.19);
            \draw [shift={(346.56,117.09)},rotate=197.52,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (298.37,142.53) -- (345.28,129.12);
            \draw [shift={(348.16,128.29)},rotate=164.04,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (340.17,174.01) -- (353.9,137.5);
            \draw [shift={(354.96,134.69)},rotate=110.62,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (341.27,71.79) -- (354.31,106.68);
            \draw [shift={(355.36,109.49)},rotate=249.51,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (349.47,122.09) .. controls (349.47,116.9) and (353.68,112.69) .. (358.87,112.69) .. controls (364.06,112.69) and (368.26,116.9) .. (368.26,122.09) .. controls (368.26,127.28) and (364.06,131.49) .. (358.87,131.49) .. controls (353.68,131.49) and (349.47,127.28) .. (349.47,122.09) -- cycle;
            \draw (346.5,122.09) .. controls (346.5,115.26) and (352.04,109.72) .. (358.87,109.72) .. controls (365.7,109.72) and (371.23,115.26) .. (371.23,122.09) .. controls (371.23,128.92) and (365.7,134.46) .. (358.87,134.46) .. controls (352.04,134.46) and (346.5,128.92) .. (346.5,122.09) -- cycle;

            \draw (283.14,157.7) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\aut{A}$};
            \draw (264.77,137.3) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\#,\Sigma $};
            \draw (283.3,102.5) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\aut{A}$};
            \draw (318.84,95.45) node [anchor=north west,inner sep=0.75pt, font=\scriptsize,rotate=-17.52,align=left] {$\#,*$};
            \draw (308.58,126.32) node [anchor=north west,inner sep=0.75pt, font=\scriptsize,rotate=-342.72,align=left] {$\Sigma,*$};
            \draw (212.17,102.7) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\Sigma,\Sigma $};
            \draw (211.37,138.7) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\#,\Sigma $};
            \draw (248.58,184.05) node [anchor=north west,inner sep=0.75pt, font=\small,rotate=-4.16,align=left] {$\#,\#$};
            \draw (254.36,50.43) node [anchor=north west,inner sep=0.75pt, font=\small,rotate=-355.33,align=left] {$\Sigma,\#$};
            \draw (351.97,82.9) node [anchor=north west,inner sep=0.75pt, font=\scriptsize,align=left] {$\#,*$};
            \draw (350.37,149.9) node [anchor=north west,inner sep=0.75pt, font=\scriptsize,align=left] {$\Sigma,*$};
            \draw (370.77,55.5) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$\Sigma,*$};
            \draw (374.37,176.3) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$\#,*$};
            \draw (307.45,155.28) node [anchor=north west,inner sep=0.75pt, font=\scriptsize,rotate=-20.36,align=left] {$\#,\#$};
            \draw (306.77,83.68) node [anchor=north west,inner sep=0.75pt, font=\scriptsize,rotate=-331.55,align=left] {$\Sigma,\#$};
            \draw (333.57,58.5) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$q_{\Sigma }$};
            \draw (178.77,119.9) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$q_{0}$};
            \draw (331.77,179.1) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$q_{\#}$};
            \draw (351.37,118.1) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$q_{s}$};
            \draw (387.77,118.1) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$*,*$};
            \draw (265.77,84.3) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\Sigma,\Sigma $};
        \end{tikzpicture}
        \subcaption{The \DBW{} $\aut{A}'$ used in the reduction for the totality property.}
        \label{fig:reduction-totality}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.45\textwidth}
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,]
            \draw (220.07,134.29) .. controls (220.07,128.76) and (224.55,124.29) .. (230.07,124.29) .. controls (235.59,124.29) and (240.07,128.76) .. (240.07,134.29) .. controls (240.07,139.81) and (235.59,144.29) .. (230.07,144.29) .. controls (224.55,144.29) and (220.07,139.81) .. (220.07,134.29) -- cycle;
            \draw (264.27,114.09) -- (298.67,114.09);
            \draw [shift={(301.67,114.09)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (204.77,134.59) -- (217.07,134.35);
            \draw [shift={(220.07,134.29)},rotate=178.87,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (212.99,107.58) .. controls (212.99,99.09) and (219.88,92.21) .. (228.37,92.21) -- (316.78,92.21) .. controls (325.28,92.21) and (332.16,99.09) .. (332.16,107.58) -- (332.16,161.08) .. controls (332.16,169.57) and (325.28,176.45) .. (316.78,176.45) -- (228.37,176.45) .. controls (219.88,176.45) and (212.99,169.57) .. (212.99,161.08) -- cycle;
            \draw (244.27,114.09) .. controls (244.27,108.56) and (248.75,104.09) .. (254.27,104.09) .. controls (259.79,104.09) and (264.27,108.56) .. (264.27,114.09) .. controls (264.27,119.61) and (259.79,124.09) .. (254.27,124.09) .. controls (248.75,124.09) and (244.27,119.61) .. (244.27,114.09) -- cycle;
            \draw (301.67,114.09) .. controls (301.67,108.56) and (306.15,104.09) .. (311.67,104.09) .. controls (317.19,104.09) and (321.67,108.56) .. (321.67,114.09) .. controls (321.67,119.61) and (317.19,124.09) .. (311.67,124.09) .. controls (306.15,124.09) and (301.67,119.61) .. (301.67,114.09) -- cycle;
            \draw (306.74,160.26) .. controls (326.14,180.63) and (373.14,175.75) .. (387.62,149.52);
            \draw [shift={(388.87,147.03)},rotate=114.26,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (402.2,130.71) .. controls (421.05,123.86) and (423.12,139.97) .. (404.91,136.79);
            \draw [shift={(402.2,136.21)},rotate=14.2,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (379.47,133.49) .. controls (379.47,127.96) and (383.95,123.49) .. (389.47,123.49) .. controls (394.99,123.49) and (399.47,127.96) .. (399.47,133.49) .. controls (399.47,139.01) and (394.99,143.49) .. (389.47,143.49) .. controls (383.95,143.49) and (379.47,139.01) .. (379.47,133.49) -- cycle;
            \draw (376.73,133.49) .. controls (376.73,126.45) and (382.43,120.75) .. (389.47,120.75) .. controls (396.51,120.75) and (402.21,126.45) .. (402.21,133.49) .. controls (402.21,140.52) and (396.51,146.23) .. (389.47,146.23) .. controls (382.43,146.23) and (376.73,140.52) .. (376.73,133.49) -- cycle;

            \draw (270.64,98) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$a,\#$};
            \draw (223.07,129.9) node [anchor=north west,inner sep=0.75pt,align=left] {$q_{0}$};
            \draw (248.67,110.5) node [anchor=north west,inner sep=0.75pt,align=left] {$q$};
            \draw (306.47,105.3) node [anchor=north west,inner sep=0.75pt,align=left] {$q'$};
            \draw (218.1,156.1) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\aut{A}$};
            \draw (341.74,138.4) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$\#,*$\\$*,b$};
            \draw (419.94,128.6) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$*,*$};
            \draw (381.67,129.1) node [anchor=north west,inner sep=0.75pt,align=left] {$q_{s}$};
        \end{tikzpicture}
        \subcaption{The \DBW{} $\aut{A}'$ used in the reduction for the prefix-independency property.}
        \label{fig:nl-hardness-prefix-independent}
    \end{subfigure}
    \caption{Automata constructed for two hardness results of \cref{prop:PropertiesRelations}.}
    \label{fig:PropertiesRelationsHardnesses}
\end{figure}

\begin{proof}[Proof of \cref{prop:PropertiesRelations} - prefix-independency]
    We begin with the \nl{}-membership. Let $\aut{A}$ be a \DPW{} accepting $R$. Note that $R$ is prefix-independent if and only if we have the following equivalence for all $x, y \in \Sigma^\omega$:
    \[
    (x,y) \in R ~ \Leftrightarrow ~ (x_{\geq 1},y) \in R \land (x,y_{\geq 1}) \in R.
    \]
    We are going to show that it is decidable whether $R$ is not prefix-independent, i.e., the following language $L$ is not empty:
    \begin{align}
        L = \{ (x,y,x_{\geq 1},y_{\geq 1}) \in (\Sigma^\omega)^4 \mid \quad & \Bigl( (x,y) \in R \land \left( (x_{\geq 1},y) \not\in R \lor (x,y_{\geq 1}) \not\in R \right) \Bigr) \nonumber \\
        \vee &\Bigl( (x_{\geq 1},y) \in R \land (x,y_{\geq 1}) \in R \land (x,y) \not\in R \Bigr) \quad \}.
    \label{eq:nbw-not-prefix-independent}
    \end{align}
    As $R$ is accepted by a \DPW{}, the set $\{(x,y) \mid (x,y) \not\in R \}$ is accepted by a \DPW{} of the same size as $\aut{A}$. Therefore, one can construct a generalized \DPW{} $\aut{A}'$ accepting $L$ with a Boolean combination of six parity conditions (by carefully constructing the transitions to deal with tuples $(x,y,x_{\geq 1},y_{\geq 1})$). Hence, testing whether $L$ is not empty can be done in \nl{} by \cref{prop:emptiness-universality-dpw-generalized-nl-complete} while constructing $\aut{A}'$ on the fly.

    \medskip

    Let us now show the \nl{}-hardness, by reduction from the universality problem of \DBWs{}~\cite{handbook-of-model-checking-orna-kupferman}. Let $\aut{A}$ be a \DBW{} over the alphabet $\Sigma$. Let $\Sigma' = \Sigma \cup \{\#\}$ with a new symbol $\#$. From $R' = (\Sigma^\omega \ssetminus \lang{\aut{A}}) \times \{\#^\omega\}$, we define the complementary relation
    \[
    R = ((\Sigma')^\omega \times (\Sigma')^\omega) \setminus R'.
    \]
    Let us show that the reduction is correct. If $\lang{\aut{A}} = \Sigma^\omega$, then $R = (\Sigma')^\omega \times (\Sigma')^\omega$, which is prefix-independent. Conversely, if there exists $x \in \Sigma^\omega \ssetminus \lang{\aut{A}}$, then $(x,\#^\omega) \not\in R$ but $(x,a\#^\omega) \in R$ with $a \in \Sigma$, so $R$ is not prefix-independent.
    Let us now describe a \DBW{} $\aut{A}'$ accepting $R$, as depicted in \cref{fig:nl-hardness-prefix-independent}. W.l.o.g., we suppose that $\aut{A}$ is complete. The automaton $\aut{A'}$ is composed of a copy of $\aut{\aut{A}}$ extended with a second component $\#$ in a way to accept $\lang{\aut{A}} \times \{\#^\omega\}$. As soon as a pair $(\#,*)$ or $(*,b)$ (with $b \in \Sigma$) is read from this copy, we go in an accepting sink state $q_{s}$. Therefore, the only rejected words are those in $R'$. Note that this is a logspace reduction as we need a logarithmic space on the work tape to construct $\aut{A}'$.
\end{proof}

\section{Proof of \texorpdfstring{\cref{prop:maximum-dpw-pspace}}{Proposition~\ref{prop:maximum-dpw-pspace}}}
\label{app:proof-maximum-dpw-pspace}

\existencemaximum*

\begin{proof}
    We mainly focus on the existence of a maximal element. We briefly discuss the existence of a minimal element at the end of the proof, as the arguments are similar. We begin with the \pspace{}-membership, by studying the non-existence of a maximal element, i.e., $\forall x ~ \exists y, ~ x \leqRelationStrict y$. Let $\aut{A}$ be a \DPW{} accepting the preorder $\leqRelation$. We use the following steps for the required algorithm:
    \begin{enumerate}
        \item We construct a generalized \DPW{} with the conjunction of two parity conditions accepting the relation $\{(x,y) \in \Sigma^\omega \times \Sigma^\omega \mid x \leqRelation y \wedge y \not\leqRelation x\}$.
        \item As a parity condition is a special case of a Streett condition, we transform this automaton into an equivalent deterministic Streett automaton $\aut{A}'$ of polynomial size~\cite{handbook-of-model-checking-orna-kupferman}.
        \item We construct a non-deterministic Streett automaton $\aut{B}$ by taking the projection of $\aut{A}'$ to the first component of its labels. This automaton is again of polynomial size and accepts the set $\{x \in \Sigma^\omega \mid \exists y \in \Sigma^\omega, x \leqRelation y \wedge y \not\leqRelation x\}$.
        \item We finally check whether $\aut{B}$ is universal, with an algorithm in \pspace{}~\cite{Parityizing-Rabin-Streett-BokerKS10}.
    \end{enumerate}

    Let us shift to the \pspace{}-hardness. We use a reduction from the non-universality problem of \NBWs{} which is \pspaceComplete{}~\cite{handbook-of-model-checking-orna-kupferman}. Given an \NBW{} $\aut{A} = (Q,\Sigma,q_0,\delta,F)$, we construct a \DPW{} $\aut{A}'$, depicted in \cref{fig:reduction-pspace-maximum-dpw}, as follows:
    \begin{itemize}
        \item $\aut{A}'$ has the same states and initial state as $\aut{A}$,
        \item its alphabet $\Sigma'$ is equal to $Q \cup \Sigma$, where $Q$ and $\Sigma$ are supposed disjoint,
        \item its transition function $\delta'$ is defined as $q' = \delta'(q,(a,q'))$ whenever $q' \in \delta(q,a)$,
        \item its priority function $\alpha$ uses two priorities as follows: $\alpha(q) = 2$ if $q \in F$, otherwise $\alpha(q) = 1$.
    \end{itemize}
    As $\delta'$ is a function by construction, $\aut{A}'$ is deterministic. We denote by $R'$ the relation accepted by $\aut{A}'$. We will show later that $R' ~\mathbin{=} \leqRelationStrict$ for some $\omega$-automatic preorder $\leqRelation$. By construction, we have $(x,y) \in R'$ if and only if $x \in \Sigma^\omega$, $y \in Q^\omega$, and $y$ is an accepting run of $\aut{A}$ labeled by $x$. Therefore, $x \in \Sigma^\omega$ is a maximal element if and only if $x \not\in \lang{\aut{A}}$. We thus get the correctness of the polynomial reduction.
    \begin{figure}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,]
            \draw (247.07,114.79) .. controls (247.07,109.26) and (251.55,104.79) .. (257.07,104.79) .. controls (262.59,104.79) and (267.07,109.26) .. (267.07,114.79) .. controls (267.07,120.31) and (262.59,124.79) .. (257.07,124.79) .. controls (251.55,124.79) and (247.07,120.31) .. (247.07,114.79) -- cycle;
            \draw (311.27,107.59) -- (344.67,107.59);
            \draw [shift={(347.67,107.59)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (231.77,115.09) -- (244.07,114.85);
            \draw [shift={(247.07,114.79)},rotate=178.87,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (238.79,99.99) .. controls (238.79,91.78) and (245.45,85.12) .. (253.66,85.12) -- (360.09,85.12) .. controls (368.3,85.12) and (374.96,91.78) .. (374.96,99.99) -- (374.96,151.73) .. controls (374.96,159.94) and (368.3,166.6) .. (360.09,166.6) -- (253.66,166.6) .. controls (245.45,166.6) and (238.79,159.94) .. (238.79,151.73) -- cycle;
            \draw (291.27,107.59) .. controls (291.27,102.06) and (295.75,97.59) .. (301.27,97.59) .. controls (306.79,97.59) and (311.27,102.06) .. (311.27,107.59) .. controls (311.27,113.11) and (306.79,117.59) .. (301.27,117.59) .. controls (295.75,117.59) and (291.27,113.11) .. (291.27,107.59) -- cycle;
            \draw (347.67,107.59) .. controls (347.67,102.06) and (352.15,97.59) .. (357.67,97.59) .. controls (363.19,97.59) and (367.67,102.06) .. (367.67,107.59) .. controls (367.67,113.11) and (363.19,117.59) .. (357.67,117.59) .. controls (352.15,117.59) and (347.67,113.11) .. (347.67,107.59) -- cycle;
            \draw (306.87,115.71) -- (339.28,133.56);
            \draw [shift={(341.91,135)},rotate=208.84,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (342.91,135) .. controls (345.52,130.14) and (351.58,128.32) .. (356.45,130.93) .. controls (361.31,133.55) and (363.14,139.61) .. (360.52,144.47) .. controls (357.9,149.34) and (351.84,151.16) .. (346.98,148.55) .. controls (342.11,145.93) and (340.29,139.87) .. (342.91,135) -- cycle;

            \draw (320.34,90.3) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$a,q'$};
            \draw (250.07,109.4) node [anchor=north west,inner sep=0.75pt,align=left] {$q_{0}$};
            \draw (296.67,103) node [anchor=north west,inner sep=0.75pt,align=left] {$q$};
            \draw (351.47,99.8) node [anchor=north west,inner sep=0.75pt,align=left] {$q'$};
            \draw (343.87,131.2) node [anchor=north west,inner sep=0.75pt,align=left] {$q''$};
            \draw (312.89,122.96) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,rotate=-28.85,align=left] {$a,q''$};
            \draw (245.1,144) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}'$};
        \end{tikzpicture}
        \caption{The \DPW{} $\aut{A}'$ used for the \pspaceHard{}ness of \cref{prop:maximum-dpw-pspace}.}
        \label{fig:reduction-pspace-maximum-dpw}
    \end{figure}
    Let us show that $R' ~\mathbin{=} \leqRelationStrict$ from some $\omega$-automatic preorder $ \leqRelation$, by modifying $\aut{A}'$ into a \DPW{} $\aut{B}$ accepting $\leqRelation$. We add to $\aut{A}'$ two extra states:
    \begin{itemize}
        \item a sink state $q_{s}$ with a loop labeled $(b,b)$ for each $b \in Q \cup \Sigma$,
        \item a state $q'_0$ that becomes the new initial state, with the transitions $\delta'(q'_0, (a,q)) = \delta'(q_0, (a,q))$ whenever the transition exists from $q_0$, and $\delta'(q'_0, (b,b)) = q_{s}$ for all $b \in Q \cup \Sigma$.
    \end{itemize}
    The modified automaton is still deterministic.
    The priority function $\alpha$ is extended such that $\alpha(q'_0) = 1$ and $\alpha(q_{s}) = 2$. The relation $R$ accepted by $\aut{B}$ is clearly reflexive (thanks to the sink state). Let us show that it is also transitive: let $x,y,z \in (\Sigma')^\omega$ be such that $(x,y)$ and $(y,z) \in R$. As $(t,t') \in R$ with $t \neq t'$ implies that $t \in \Sigma^\omega$ and $t' \in Q^\omega$, we must have $x = y$ or $y = z$. It follows that $R$ is transitive, and thus it is an $\omega$-automatic preorder $\leqRelation$. It is easy to verify that the relation $\leqRelationStrict$ derived from $\leqRelation$ is equal to $R'$.

    This completes the proof of \cref{prop:maximum-dpw-pspace} for the existence of a maximal element. Let us finally comment on the modifications needed to decide the existence of a minimal element. For the membership result, as the non-existence of a minimal element means $\forall x \exists y, y \leqRelationStrict x$, we have to consider the projection of $\aut{A}'$ on the second component of the labels in step 3. For the hardness result, we have to swap the components of the labels $(a,q)$ of the transitions of the automaton $\aut{A}'$.
\end{proof}


\section{Correctness of the \texorpdfstring{\pcp{}}{P1CP2} Game}
\label{app:PCPgame}

\correspondence*
\addvspace{\topsep}% Bug when a restatable starts or ends with an item using thm-restate, see https://github.com/dagstuhl-publishing/styles/issues/36

Before proving this result, we study in more details the correspondence between strategies in $\game$ and strategies in $\pcp(\game)$. We first note that if a strategy $\tau_{\proveroneTight}$ of \proverone{} is observation-based, we get that for all plays $\pi, \pi'$ starting at $s_0$ and consistent with $\tau_{\proveroneTight}$,
\begin{align}
\label{eq:obsBased}
\projOne{\pi} = \projOne{\pi'} \text{ and } \projE{\pi} = \projE{\pi'}.
\end{align}
Given a play $\rho$ of $\game$ starting at $v_0$, we call \emph{simulation of $\rho$} any strategy $\tau_{\proveroneTight}$ of \proverone{} such that $\rho = \projOne{\pi}$ for all plays $\pi$ starting at $s_0$ and consistent with $\tau_{\proveroneTight}$.


\begin{lemma}\label{lem:existence-simulation-prover-one}
  Let $\rho$ be a play of $\game$ starting at $v_0$. There always exists a simulation $\tau_{\proveroneTight}$ of $\rho$ that is observation-based.
\end{lemma}

\begin{proof}
    Consider a play $\rho = \rho_0\rho_1 \ldots$ of $\game$ starting at $v_0$. The required strategy $\tau_{\proveroneTight}$ is constructed as follows. For all histories $hs$ such that $s \in S_{\proveroneTight}$, we define $\tau_{\proveroneTight}(hs) = (\rho_{k},\rho_{k+1})$ if $\projOne{hs} = \rho_0\dots\rho_{k}$ is a prefix of $\rho$. Otherwise, we define $\tau_{\proveroneTight}(hs)$ as an arbitrary action $e \in E$ such that $\tau_{\proveroneTight}(h's') = e$ for all $h's'$ with $Obs(h's') = Obs(hs)$. By construction, $\tau_{\proveroneTight}$ is observation-based because whenever $Obs(h's') = Obs(hs)$, then $\projOne{h's'} = \projOne{hs}$.
    Moreover, for any play $\pi$ starting at $s_0$ and consistent with $\tau_{\proveroneTight}$, we have $\rho = \projOne{\pi}$.
\end{proof}

Let $\tau_{\proveroneTight}$ be an observation-based strategy of \proverone{} and $\rho$ be the play of $\game$ of which it is the simulation.
\begin{itemize}
    \item We say that a strategy $\tau_{\challenger}$ of \challenger{} is \emph{$\tau_{\proveroneTight}$-accepting} if for all histories $hs$ starting at $s_0$ and consistent with $\tau_{\proveroneTight}$, if $\projE{s} = (v,v')$, then $\tau_{\challenger}(hs) = v'$. In this case, the plays $\pi$ consistent with $\tau_{\proveroneTight}$ and $\tau_{\challenger}$ all satisfy $\projDev{\pi} = \bot$.

    \item Let $hs$ be a history starting at $s_0$ and consistent with $\tau_{\proveroneTight}$ such that $\projDev{h} = \bot$ and $\projDev{hs} = j$. Then, all plays $\pi$ consistent with $\tau_{\proveroneTight}$ having $hs$ as prefix, satisfy $\projDev{\pi} = j$ in addition to \eqref{eq:obsBased}. Thus, only the third component of the vertices of those $\pi$ can vary.\footnote{The fourth component equal to $(q_i)_i$ derive from the first and third components.} Therefore, when $\tau_{\proveroneTight}$ is fixed:
    \begin{itemize}
        \item Any strategy $\tau_{\challenger}$ is equivalent to a strategy $\sigma_j$ of player~$j$ such that $\tau_{\challenger}(h's') = \sigma_{j}(\projTwo{h's'})$ for all histories $h's'$ ending in $s' \in S_{\challenger}$ and having $hs$ as prefix. It is called a \emph{$\sigma_j$-deviation from $\tau_{\proveroneTight}$}.
        \item Any strategy $\tau_{\provertwoTight}$ is equivalent to a strategy profile $\sigma_{-j} = (\sigma_i)_{i \neq j}$ such that $\tau_{\provertwoTight}(h's') = \sigma_{i}(\projTwo{h's'})$ for all histories $h's'$ ending in $s' \in S_{\provertwoTight}$ with $\projOne{s} \in V_i$ and having $hs$ as prefix. It is called a \emph{$\sigma_{-j}$-punishment} strategy.
    \end{itemize}
\end{itemize}


\begin{proof}[Proof of \cref{theorem:correspondence}]
    Let us suppose that there exists an NE $\sigma = (\sigma_i)_{i\in\Players}$ from $v_0$ in $\game$ and let $\rho = \outcomefrom{\sigma}{v_0}$ be its outcome. By \cref{lem:existence-simulation-prover-one}, there exists an observation-based strategy $\tau_{\proveroneTight}$ of \proverone{} such that for any play $\pi$ starting at $s_0$ and consistent with $\tau_{\proveroneTight}$, we have $\projOne{\pi} = \rho$. Let $\tau_{\challenger}$ be a strategy of \challenger{}.
    \begin{itemize}
        \item If $\tau_{\challenger}$ is $\tau_{\proveroneTight}$-accepting, then we get $\projDev{\pi} = \bot$ for all plays $\pi$ starting at $s_0$ and consistent with both $\tau_{\proveroneTight}$ and $\tau_{\challenger}$, and
        any strategy $\tau_{\provertwoTight}$, i.e., $\outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0} \in W_{acc}$.
        \item Otherwise, $\tau_{\challenger}$ is a $\sigma'_j$-deviation from $\tau_{\proveroneTight}$, for a strategy $\sigma'_j$ of some player~$j$. Consequently, we define $\tau_{\provertwoTight}$ from the strategy profile $\sigma_{-j} = (\sigma_i)_{i \neq j}$ such that $\tau_{\provertwoTight}$ is a $\sigma_{-j}$-punishment strategy. Therefore, for $\pi' = \outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0}$, we get $\projTwo{\pi'} = \outcomefrom{\sigma'_j,\sigma_{-j}}{v_0}$. As $\sigma$ is an NE by hypothesis, we have $\projOne{\pi'} = \rho \not\leqRelationStrict[j] \projTwo{\pi'}$, meaning that $\pi' \in W_{dev}$.
    \end{itemize}

    We now suppose that in $\pcp(\game)$, there exists an observation-based strategy $\tau_{\proveroneTight}$ of \proverone{} such that for all strategies $\tau_{\challenger}$ of \challenger{}, there is a strategy $\tau_{\provertwoTight}$ of \provertwo{} such that $ \outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0} \in W_{\proverone\provertwoTight}$. Let us explain how to deduce an NE $\sigma = (\sigma_i)_{i}$ from $v_0$ in $\game$. We choose a strategy $\tau_{\challenger}$ that is $\tau_{\proveroneTight}$-accepting, which gives by hypothesis a strategy $\tau_{\provertwoTight}$ of \provertwo. Observe that the resulting outcome $\pi = \outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0}$ is such that $\projDev{\pi} = \bot$, so $\pi \in W_{acc}$. Let us define $\rho = \projOne{\pi}$, it will be the outcome of the NE $\sigma$ we want to construct.

    We now partially define the strategy profile $\sigma$ in a way to produce the outcome $\rho$. It remains to define $\sigma_{i}(hv)$ for all $i \in \Players$ and all histories $hv$ which are not prefix of $\rho$.

    Consider a strategy $\sigma'_j$ for player~$j$ such that there exists a history $hv$, with $v \in V_j$, prefix of $\rho$, but where $hv \cdot \sigma'_j(hv)$ is not. Then, we can consider $\tau_{\challenger}$ that is a $\sigma'_j$-deviation from $\tau_{\proveroneTight}$. By hypothesis, there exists a strategy $\tau_{\provertwoTight}$ such that $\pi' = \outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0} \in W_{\proverone,\provertwoTight}$. Since $\projDev{\pi'} = j$, it must be the case that $\pi' \in W_{dev}$, i.e., $\projOne{\pi'} \not\leqRelationStrict[j] \projTwo{\pi'}$. Hence, we can complete the definition of $\sigma$ outside $\rho$ by $\sigma_{-j}$ thanks to the strategy $\tau_{\provertwoTight}$ seen as a $\sigma_{-j}$-punishment strategy. It follows that $\projTwo{\pi'} = \outcomefrom{\sigma'_j,\sigma_{-j}}{v_0}$. Therefore, by \eqref{eq:obsBased}, $\rho = \projOne{\pi} = \projOne{\pi'} \not\leqRelationStrict[j] \projTwo{\pi'} = \outcomefrom{\sigma'_j,\sigma_{-j}}{v_0}$, showing that $\outcomefrom{\sigma'_j,\sigma_{-j}}{v_0}$ is not a profitable deviation. We conclude that the constructed $\sigma$ is an NE.
\end{proof}


\section{NE Existence Problem}
\label{app:nash-existence-tools}

\NEexistenceGeneral*

\begin{proof}[Proof of \cref{theorem:NEexistenceGeneral}, membership]
    By \cref{theorem:correspondence}, deciding whether in $\game$, there exists an NE from $v_0$ reduces to deciding whether in $\pcp(\game)$, there exists an observation-based strategy $\tau_{\proveroneTight}$ of \proverone{} such that for all strategies $\tau_{\challenger}$ of \challenger{}, there is a strategy $\tau_{\provertwoTight}$ of \provertwo{} such that $\outcomefrom{\tau_{\proveroneTight},\tau_{\challenger},\tau_{\provertwoTight}}{s_0} \in W_{\proverone\provertwoTight}$. In~\cite{SPE-NCRS-quanti-parity-P1CP2}, the authors solve the problem they study by solving a similar three-player game with imperfect information. They proceed with the following three steps.
    \begin{enumerate}
        \item The winning condition is translated into a Rabin condition on the arena of the \pcp{} game.
        \item Then, the three-player game is transformed into a two-player zero-sum Rabin game with imperfect information.
        \item Finally, classical techniques to remove imperfect information are used to obtain a two-player zero-sum parity game with perfect information.
    \end{enumerate}

For our \pcp{} game, we already explain how to translate the winning condition $W_{\proverone\provertwo}$ into a Rabin condition (first step). With the notations of \cref{section:NE-existence}, this game has
\begin{itemize}
    \item a number of states in $\bigO{|V|^4 \cdot |\Players| \cdot \Pi_{i\in \Players}|\aut{A}_i|}$,
    \item a number of actions in $\bigO{|V|^2}$
    \item a number of Rabin pairs in $\bigO{\Sigma_{i\in \Players}d_i}$
\end{itemize}

Let us explain the second step. To fit the context of~\cite{SPE-NCRS-quanti-parity-P1CP2}, we need to slightly modify our \pcp{} game in three ways:
\begin{itemize}
\item We add dummy vertices such that the three players play in a turn-based way, i.e., according to the turn sequence $(\proverone \challenger \provertwo)^\omega$.
\item Plays and histories include actions, i.e., they are sequences alternating vertices and actions, such that the histories always end with a vertex.
\item Due to the modification of plays and histories, the observation function $Obs$ is extended to actions, i.e., $Obs(a) = a$ is $a \in A_{\proverone}$ and $Obs(a) = \#$ is $a \in A_{\challenger} \cup A_{\provertwo}$ (\proverone{} only observes his own actions, the other actions are not visible\footnote{The situation is a little different in~\cite{SPE-NCRS-quanti-parity-P1CP2} as \proverone{} can also observe the actions of \provertwo{}.}).
\end{itemize}
With these modifications, we can translate our \pcp{} game into a two-player zero-sum Rabin game with imperfect information exactly as in~\cite{SPE-NCRS-quanti-parity-P1CP2} (this is derived from a
transformation introduced in~\cite{Chatterjee014}, specifically adapted to the \pcp{} game context). The main idea is to merge the two Provers into a new single Prover \prover. Imperfect information is used to ensure that this merging does not grant too much knowledge to \prover. In order to let the new Prover have as much actions available as \provertwo{} and stay observation-based, his action set includes, in addition to the actions of $A_{\proverone}$, all functions from $S_{\provertwo}$ to $A_{\provertwo}$. The set of vertices and the Rabin objective remain the same as in the \pcp{} game. This yields a new game, called \pc{} game,
\begin{itemize}
    \item with the same number of vertices and Rabin pairs,
    \item but with an exponential blowup in the number of actions.
\end{itemize}
Details about the new game can be found in~\cite{SPE-NCRS-quanti-parity-P1CP2}. In a way to guarantee the equivalence between both \pcp{} and \pc{} games, some technical properties must be satisfied by the observation function $Obs$ of the \pcp{} game:
\begin{itemize}
    \item The function $Obs$ must be strongly player-stable and thus player-stable (see Corollary 4.1.4 and Lemma 4.1.5 of~\cite{SPE-NCRS-quanti-parity-P1CP2}). This means that for any two histories $h = s_0a_0s_1a_1 \ldots a_{k-1}s_k = h_1s_k$ and $h'= s'_0a'_0s'_1a'_1 \ldots a'_{k-1}s'_k = h'_1s'_k$ such that $s_0 = s'_0$ is the initial vertex of the \pcp{} game and $Obs(h_1) = Obs(h'_1)$, it must follow that each pair of vertices $s_\ell, s'_\ell$, $1 \leq \ell \leq k$, are owned by the same player and $Obs(s_k) = Obs(s'_k)$. It is easy to verify that $s_\ell, s'_\ell$ are owned by the same player as the players play in a turn-based way. Let us explain why $Obs(s_k) = Obs(s_k)$. If $s_{k-1}$ is owned by \proverone{}, then $Obs(s_{k-1}) = Obs(s'_{k-1}) = v$ for some $v$ and $a_{k-1} = Obs(a_{k-1}) = Obs(a'_{k-1}) =a'_{k-1} = (v,v')$ for some $(v,v')$. Hence, $Obs(s_k) = Obs(s'_k) = (v,v')$. If $s_{k-1}$ is owned by \challenger{} or \provertwo{}, then $Obs(s_{k-1}) = Obs(s'_{k-1}) = (v,v')$ for some $(v,v')$ and thus $Obs(s_{k}) = Obs(s'_{k}) = v'$.
    \item The function $Obs$ must be action-stable (see Lemma 3.4.3 of~\cite{SPE-NCRS-quanti-parity-P1CP2}). This means that given $\Delta(s_1,a) = s_2$ and $\Delta(s'_1,a') = s'_2$ such that $Obs(s_1) = Obs(s'_1)$, then
    \begin{itemize}
        \item if $a = a'$, then $Obs(s_2) = Obs(s'_2)$;
        \item if $a,a'$ are visible (i.e., are actions of \proverone) and $Obs(s_2) = Obs(s'_2)$, then $a = a'$.
    \end{itemize}
It is easy to verify this property when $Obs(s_1) = Obs(s'_1) = v$ for some $v$, as $s_1, s'_1$ are then owned by \proverone{} and his actions $a,a'$ are of the form $(v,v')$ for some $v'$. This is also easy to verify when $Obs(s_1) = Obs(s'_1) = (v,v')$ for some $(v,v')$ as $s_1, s'_1$ are then owned by \challenger{} or \provertwo{} whose actions $a,a'$ are not visible.
\end{itemize}
With these technical properties and arguments similar to those of~\cite{SPE-NCRS-quanti-parity-P1CP2}, one can carefully verify that our \pcp{} game can be transformed into an equivalent two-player zero-sum Rabin game with imperfect information exactly as in~\cite{SPE-NCRS-quanti-parity-P1CP2}.

In the third step, the latter \pc{} game is transformed into an equivalent two-player zero-sum parity game with perfect information. The translation is exactly the same as in~\cite{SPE-NCRS-quanti-parity-P1CP2}. The idea to get rid of the imperfect information is to apply standard game-theoretic techniques~\cite{lpar/ChatterjeeD10,RaskinCDH07,Reif84}, by (1) making the Rabin condition visible, that is, such that any two similarly observed plays agree on the winning condition, and by (2) applying the subset construction to recall the set of possible visited vertices, and letting them be observed. Done carefully, this leads to a parity game with
\begin{itemize}
    \item a number of vertices exponential in the number of vertices and in the number of pairs of the \pc{} game (thus of the \pcp{} game),
    \item a parity condition with a number of priorities linear in the number of vertices and the number of pairs of the \pc{} game.
\end{itemize}

Finally, the constructed parity game can be solved in time $n^{\bigO{log(d)}}$ where $n$ is its number of vertices and $d$ its number of priorities~\cite{calude-quasi-poly-parity-game}. It follows that the initial NE existence problem can be decided in time exponential in $|V|$, $\Pi_{_{i\in \Players}}|\aut{A}_i|$, and $\Sigma_{_{i\in \Players}}d_i$.
\end{proof}

\begin{proof}[Proof of \cref{theorem:NEexistenceGeneral}, hardness]
    We prove that the NE existence problem is \pspaceHard{}, with a reduction from the existence of a maximal element in an $\omega$-automatic preorder, a \pspaceComplete{} problem by \cref{prop:maximum-dpw-pspace}. The reduction works as follows. Let $\leqRelation$ be a preorder on $\Sigma$ defined by a \DPW{} $\aut{A}$. W.l.o.g., we can assume that $\aut{A}$ is complete. We construct a one-player game $\game = (\arena,\leqRelation')$ depicted in \cref{fig:reduction-nash-existence-pspace} as follows. The set of vertices of $A$ is $\Sigma' = \Sigma \cup \{v_0\}$ with a new initial vertex $v_0$; there is an edge between every pair of letters $a,b \in \Sigma$ and an edge between $v_0$ and each letter $a \in \Sigma$. The preference relation $\leqRelation'$ is the one accepted by the \DPW{} $\aut{A}'$ of \cref{fig:reduction-nash-existence-pspace} where the initial state $q'_0$ replaces the initial state $q_0$ of $\aut{A}$ and its priority function is the one of $\aut{A}$ extended to $q_0$ and $q_s$ both with priority~$0$.

    One can easily verify that $\leqRelation'$ is reflexive. Let us prove that it is transitive. Let $x \leqRelation' y$ and $y \leqRelation' z$, and let us discuss the following three cases:
    \begin{itemize}
        \item If $y$ starts with some symbol $a \in \Sigma$, then $x=y=z$ and $x \leqRelation' z$.
        \item If $y$ is of the form $v_0y'$ with $y' \in \Sigma^\omega$, then it is also the case for $x$ and $z$. As $\leqRelation$ is transitive, we get that $x \leqRelation' z$.
        \item If $y$ is of the form $v_0w_yv_0y'$ with $w_y \in \Sigma^*$, then $x = v_0w_xv_0x'$ and $z = v_0w_zv_0z'$ with $w_x,w_z \in \Sigma^*$ and $|w_x| = |w_y| = |w_z|$. Therefore, as $\aut{A}$ is complete, we get $x \leqRelation' z$.
    \end{itemize}

    It remains to show that the reduction is correct. Suppose that $\pi = v_0 x$ is an NE outcome starting in $v_0$ in $\game$. As it is a one-player game, $\pi$ is a maximal play with respect to $\leqRelation'$ among all plays starting in $v_0$. As those plays all belong to $v_0\Sigma^\omega$, it follows that $x$ is a maximal element in $\leqRelation$, by definition of $\leqRelation'$. The other implication is proved similarly.

    This shows that the NE existence problem is \pspace{}-hard. As the existence of a maximal element is \pspace{}-hard already with a \DPW{} $\aut{A}$ with two priorities and as our game $\game$ is a one-player game, it follows that the NE existence problem is \pspace{}-hard, already for games with one player and two priorities for the \DPW{} accepting his preference relation.
    \begin{figure}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,]
            \draw (372.29,125.61) -- (416.84,125.61);
            \draw [shift={(419.84,125.61)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (356.41,125.61) .. controls (356.41,120.98) and (359.96,117.23) .. (364.35,117.23) .. controls (368.74,117.23) and (372.29,120.98) .. (372.29,125.61) .. controls (372.29,130.23) and (368.74,133.98) .. (364.35,133.98) .. controls (359.96,133.98) and (356.41,130.23) .. (356.41,125.61) -- cycle;
            \draw (338.26,125.98) -- (353.41,125.67);
            \draw [shift={(356.41,125.61)},rotate=178.81,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (406.18,173.52) .. controls (406.18,168.9) and (409.74,165.15) .. (414.13,165.15) .. controls (418.51,165.15) and (422.07,168.9) .. (422.07,173.52) .. controls (422.07,178.15) and (418.51,181.9) .. (414.13,181.9) .. controls (409.74,181.9) and (406.18,178.15) .. (406.18,173.52) -- cycle;
            \draw (408.42,179.79) .. controls (403.3,196.81) and (417.32,198.19) .. (418.19,183.02);
            \draw [shift={(418.2,180.2)},rotate=87.41,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (194.99,117.22) .. controls (194.99,111.58) and (199.57,107) .. (205.21,107) -- (269.78,107) .. controls (275.42,107) and (280,111.58) .. (280,117.22) -- (280,152.78) .. controls (280,158.42) and (275.42,163) .. (269.78,163) -- (205.21,163) .. controls (199.57,163) and (194.99,158.42) .. (194.99,152.78) -- cycle;
            \draw (161.41,134.11) .. controls (161.41,129.72) and (164.96,126.17) .. (169.34,126.17) .. controls (173.72,126.17) and (177.27,129.72) .. (177.27,134.11) .. controls (177.27,138.49) and (173.72,142.04) .. (169.34,142.04) .. controls (164.96,142.04) and (161.41,138.49) .. (161.41,134.11) -- cycle;
            \draw (208.01,122.11) .. controls (208.01,117.72) and (211.56,114.17) .. (215.94,114.17) .. controls (220.32,114.17) and (223.87,117.72) .. (223.87,122.11) .. controls (223.87,126.49) and (220.32,130.04) .. (215.94,130.04) .. controls (211.56,130.04) and (208.01,126.49) .. (208.01,122.11) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (411.19,110.65) .. controls (411.19,105.08) and (415.71,100.56) .. (421.28,100.56) -- (456.39,100.56) .. controls (461.97,100.56) and (466.49,105.08) .. (466.49,110.65) -- (466.49,146.87) .. controls (466.49,152.44) and (461.97,156.96) .. (456.39,156.96) -- (421.28,156.96) .. controls (415.71,156.96) and (411.19,152.44) .. (411.19,146.87) -- cycle;
            \draw (419.01,125.31) .. controls (419.01,120.92) and (422.56,117.37) .. (426.94,117.37) .. controls (431.32,117.37) and (434.87,120.92) .. (434.87,125.31) .. controls (434.87,129.69) and (431.32,133.24) .. (426.94,133.24) .. controls (422.56,133.24) and (419.01,129.69) .. (419.01,125.31) -- cycle;
            \draw (452.49,147.9) .. controls (453,164.71) and (445.42,171.3) .. (425.04,173.27);
            \draw [shift={(422.07,173.52)},rotate=355.9,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (364.35,133.98) .. controls (365.38,159.38) and (379.57,170.32) .. (403.54,173.24);
            \draw [shift={(406.18,173.52)},rotate=185.41,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (172.94,126.97) .. controls (179.17,117.27) and (187.27,117.69) .. (200.39,117.79);
            \draw [shift={(203.2,117.8)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (172.14,141.77) .. controls (178.02,149.32) and (184.74,152.25) .. (198.81,152.57);
            \draw [shift={(201.6,152.6)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (177.27,134.11) -- (200.2,134.19);
            \draw [shift={(203.2,134.2)},rotate=180.21,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;

            \draw (162.2,129.83) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$v_{0}$};
            \draw (376.4,109.93) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$v_{0},v_{0}$};
            \draw (323.19,97.4) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}'$};
            \draw (134.29,97.7) node [anchor=north west,inner sep=0.75pt,align=left] {$\game$};
            \draw (230.76,115.95) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$\forall a\in \Sigma $};
            \draw (207.76,140.15) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {connected};
            \draw (211.2,119.23) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$a$};
            \draw (416.99,139.8) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}$};
            \draw (348,158.73) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$a,a$\\$\forall a\in \Sigma $};
            \draw (420.6,120.63) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$q_{0}$};
            \draw (452.4,160.33) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$v_{0},v_{0}$};
            \draw (420.6,183.6) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$a,a$, $\forall a \in \Sigma'$};
            \draw (357.6,117.63) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$q'_{0}$};
            \draw (408,169.43) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$q_{s}$};
        \end{tikzpicture}
        \caption{The reduction used for the \pspace{}-hardness of \cref{theorem:NEexistenceGeneral}.}
        \label{fig:reduction-nash-existence-pspace}
    \end{figure}
\end{proof}


\section{Constrained NE Existence Problem}
\label{app:constrained-nash-existence}

\constrainedNEexistenceGeneral*

\begin{proof}[Sketch of proof of \cref{theorem:constrainedNEexistenceGeneral}, membership]
    From the given game $\game$ and constraints $\pi_i = \mu_i(\nu_i)^\omega$ for each player~$i$, we construct the same \pcp{} game as for the NE existence problem. The only difference is on the winning condition $W_{\proverone\provertwo} = W_{acc} \cup W_{dev}$ where $W_{acc}$ is modified in a way to take into account the constraints:
    \[
    W_{acc} = \{\pi \in \Plays(\pcp(\game)) \mid \projDev{\pi} = \bot \text{ and } \pi_i \leqRelation[i] \projDev{\pi}, ~\forall i \}
    \]
    This modification has an impact on the Rabin condition encoding $W_{\proverone\provertwo}$. To translate $W_{acc}$ into a Rabin condition, we proceed as follows. For each $i$, we construct a \DPW{} $\aut{A}'_i$ accepting the set $\{x \in V^\omega \mid \mu_i(\nu_i)^\omega \leqRelation[i] x \}$. It has $|\aut{A}_i|\cdot |\pi_i|$ states and $d_i$ priorities. We then construct the product $\aut{A}'$ of all those automata $\aut{A}'_i$ that accepts the set $\{x \in V^\omega \mid \mu_i(\nu_i)^\omega \leqRelation[i] x, ~\forall i \}$. This a generalized \DPW{} whose condition can be translated into a Streett condition with $d = \Sigma_{i \in \Players} d_i$ pairs~\cite{handbook-of-model-checking-orna-kupferman}. The latter automaton is equivalent to a deterministic automaton $\aut{B}$ with $\bigO{|\aut{A}'| \cdot 2^{d \log(d)}}$ states and $d$ Rabin pairs~\cite{phd-safra}. Finally, we replace the arena of the \pcp{} game by its product with the automaton $\aut{B}$. Thanks to the previous argument, $W_{acc}$ is encoded as a Rabin condition on the modified arena with $d$ pairs (without forgetting the condition $\projDev{\pi} = \bot$). As in the proof of the membership result of \cref{theorem:NEexistenceGeneral}, $W_{dev}$ is translated into a Rabin condition with $2d$ pairs (step 1), and the rest of the proof (steps 2 and 3) is then the same. Nevertheless, the complexity of the constrained existence problem is different as the number of vertices of the \pcp{} game now also depends on $|\aut{B}|$. It follows that the constrained NE existence problem is exponential in $|V|$, $\Pi_{i\in \Players}|\aut{A}_i|$, $\Pi_{i\in \Players}|\pi_i|$, and doubly exponential in $\Sigma_{i\in \Players}d_i$.
\end{proof}


\begin{proof}[Proof of \cref{theorem:constrainedNEexistenceGeneral}, hardness]
    We use a reduction from the NE existence problem. Given a game $\game = (\arena,(\leqRelation[i])_i)$ and $v_0$ an initial vertex, we construct a new game $\game' = (\arena',(\leqRelation[i]')_i)$ as depicted in \cref{fig:reduction-pspace-hardness-nash-constrained}. Its arena $\arena'$ has $V' = V \cup \{v'_0,v'_1\}$ as set of vertices, with $v'_0$ and $v'_1$, two new vertices owned by player~$1$. It is a copy of $\arena$ with $v_0'$, the new initial vertex, having $v_0$ and $v'_1$ as successors, and $v'_1$ having itself as successor.
    Each preference relation $\leqRelation[i]'$ $\subseteq (V')^\omega \times (V')^\omega$ is the one accepted by the \DPW{} $\aut{A}_i'$ of \cref{fig:reduction-pspace-hardness-nash-constrained} where the initial state $q'_0$ replaces the initial state $q_0$ of $\aut{A}_i$ and its priority function is the one of $\aut{A}_i$ extended to $q'_0$, $q_s$, and $q'_s$ all with priority $0$.
    Note that, thanks to the sink state $q'_s$,
    \begin{align}\label{eq:lasso}
        v'_0(v'_1)^\omega \leqRelationStrict[i]' v'_0x \text{ for all } x \in V^\omega.
    \end{align}
    For each player~$i$, we impose a constraint given by the lasso $v'_0(v_1')^\omega$.

    One can easily verify that $\leqRelation[i]'$ is reflexive (see the sink state $q_s$). Let us prove that it is transitive (w.l.o.g., we suppose that $\aut{A}_i$ is complete). Let $x \leqRelation[i]' y$ and $y \leqRelation[i]' z$. Notice that $x \in v'_0V^\omega \Rightarrow y \in v'_0V^\omega$ and $y \in v'_0V^\omega \Rightarrow z \in v'_0V^\omega$ (due to the copy of $\aut{A}_i$ inside $\aut{A}'_i$). Let us discuss the following cases:
    \begin{itemize}
        \item If $y$ does not start with $v'_0$, then $x=y=z$ and $x \leqRelation[i]' z$.
        Otherwise, $y$ starts with $v'_0$, thus also $x$ and $z$.
        \item If $x \in v'_0V^\omega$, then $y, z \in v'_0V^\omega$ and the runs with label $(x,y)$ and $(y,z)$ both stay in $\aut{A}_i$. As $\leqRelation[i]$ is transitive, we get that $x \leqRelation[i]' z$.
        \item If $x \not\in v'_0V^\omega$ and $y \in v'_0V^\omega$ (and thus $z \in v'_0V^\omega$), then $x = v'_0(v'_1)^\omega$ and then the run labeled by $(x,z)$ ultimately loops in $q'_s$, showing that $x \leqRelation[i]' z$.
        \item If $x,y \not\in v'_0V^\omega$ and $z \in v'_0V^\omega$, then necessarily $x = y = v'_0(v'_1)^\omega$, and we get $x \leqRelation[i]' z$.
        \item If $x,y,z \not\in v'_0V^\omega$, then $x$ (resp.\ $y$, $z$) is the form $v'_0w_xv'_ix'$ (resp.\ $v'_0w_yv'_iy'$, $v'_0w_zv'_iz'$) with $w_x, w_y, w_z \in V^*$ such that $|w_x| = |w_y|= |w_z|$, and $i \in \{0,1\}$.
      Therefore, as $\aut{A}$ is complete, we get $x \leqRelation' z$.
    \end{itemize}

    Let us show that there is an NE in $\game$ from $v_0$ if and only if there is one in $\game'$ from $v'_0$ whose outcome $\pi$ satisfies $v'_0(v_1')^\omega \leqRelation[i]' \pi$ for all $i$.
    Let us first suppose that there exists an NE $\sigma = (\sigma_i)_i$ in $\game$. Let $\sigma' = (\sigma'_i)_i$ be a strategy profile in $\game'$ defined as $\sigma_1'(v_0') = v_0$ and $\sigma_i'(v_0'h) = \sigma_i(h)$ for any history $h$ ending with a vertex of $V_i$, $i \in \Players$. Clearly, by construction of $\leqRelation[i]'$, see \eqref{eq:lasso}, we have $v'_0(v_1')^\omega \leqRelation[i]' \outcomefrom{\sigma'}{v'_0}$ for all $i$. Let us explain why the profile $\sigma'$ is an NE. The deviation $v'_0(v'_1)^\omega$ is not profitable for player~$1$, by \eqref{eq:lasso}. Any other deviation, for any player~$i$, is necessarily of the form $v'_0\pi$ with $\pi$ a deviation in $\game$ with respect to $\sigma$. Hence, it cannot be profitable as $\sigma$ is an NE and by definition of $\leqRelation[i]'$. Conversely, suppose that there exists an NE $\sigma' = (\sigma'_i)_i$ in $\game'$ such that $v'_0(v_1')^\omega \leqRelation[i]' \pi' = \outcomefrom{\sigma'}{v'_0}$ for all $i$. Note that $\pi' \neq v'_0(v_1')^\omega$ by \eqref{eq:lasso} and as $\sigma'$ is an NE. Therefore, we can define a strategy profile $\sigma = (\sigma_i)_i$ in $\game$ such that $\sigma_i(h) = \sigma_i'(v_0'h)$ for any history $h$ ending with a vertex in $V_i$, $i \in \Players$. This is an NE in $\game$ since $\sigma'$ is an NE in~$\game'$.

    This shows that the constrained NE existence problem is \pspace{}-hard. As the NE existence problem is \pspace{}-hard already for games with one player and two priorities for the \DPW{} accepting his preference relation, this is also the case for the constrained NE existence problem in view of the previous reduction.
    \begin{figure}
        \centering
        \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,]
            \draw (324.41,114.61) .. controls (324.41,109.98) and (327.96,106.23) .. (332.35,106.23) .. controls (336.74,106.23) and (340.29,109.98) .. (340.29,114.61) .. controls (340.29,119.23) and (336.74,122.98) .. (332.35,122.98) .. controls (327.96,122.98) and (324.41,119.23) .. (324.41,114.61) -- cycle;
            \draw (306.26,114.98) -- (321.41,114.67);
            \draw [shift={(324.41,114.61)},rotate=178.81,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (190.66,111.12) .. controls (190.66,106.59) and (194.33,102.91) .. (198.87,102.91) -- (227.43,102.91) .. controls (231.97,102.91) and (235.65,106.59) .. (235.65,111.12) -- (235.65,140.41) .. controls (235.65,144.95) and (231.97,148.63) .. (227.43,148.63) -- (198.87,148.63) .. controls (194.33,148.63) and (190.66,144.95) .. (190.66,140.41) -- cycle;
            \draw (160.41,116.11) .. controls (160.41,111.72) and (163.96,108.17) .. (168.34,108.17) .. controls (172.72,108.17) and (176.27,111.72) .. (176.27,116.11) .. controls (176.27,120.49) and (172.72,124.04) .. (168.34,124.04) .. controls (163.96,124.04) and (160.41,120.49) .. (160.41,116.11) -- cycle;
            \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (377.26,109.79) .. controls (377.26,106.05) and (380.29,103.03) .. (384.02,103.03) -- (434.14,103.03) .. controls (437.87,103.03) and (440.9,106.05) .. (440.9,109.79) -- (440.9,133.31) .. controls (440.9,137.04) and (437.87,140.07) .. (434.14,140.07) -- (384.02,140.07) .. controls (380.29,140.07) and (377.26,137.04) .. (377.26,133.31) -- cycle;
            \draw (176.27,116.11) -- (199.2,116.19);
            \draw [shift={(202.2,116.2)},rotate=180.21,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (340.29,114.61) -- (380.78,115);
            \draw [shift={(383.78,115.03)},rotate=180.56,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (384.01,114.31) .. controls (384.01,109.92) and (387.56,106.37) .. (391.94,106.37) .. controls (396.32,106.37) and (399.87,109.92) .. (399.87,114.31) .. controls (399.87,118.69) and (396.32,122.24) .. (391.94,122.24) .. controls (387.56,122.24) and (384.01,118.69) .. (384.01,114.31) -- cycle;
            \draw (324.78,154.52) .. controls (324.78,149.9) and (328.34,146.15) .. (332.73,146.15) .. controls (337.11,146.15) and (340.67,149.9) .. (340.67,154.52) .. controls (340.67,159.15) and (337.11,162.9) .. (332.73,162.9) .. controls (328.34,162.9) and (324.78,159.15) .. (324.78,154.52) -- cycle;
            \draw (325.3,150.07) .. controls (306.2,146.63) and (304.25,161.07) .. (322.66,159.18);
            \draw [shift={(325.4,158.8)},rotate=170.23,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (332.35,122.98) -- (332.48,143.27);
            \draw [shift={(332.5,146.27)},rotate=269.63,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (160.41,147.11) .. controls (160.41,142.72) and (163.96,139.17) .. (168.34,139.17) .. controls (172.72,139.17) and (176.27,142.72) .. (176.27,147.11) .. controls (176.27,151.49) and (172.72,155.04) .. (168.34,155.04) .. controls (163.96,155.04) and (160.41,151.49) .. (160.41,147.11) -- cycle;
            \draw (168.34,124.04) -- (168.34,136.17);
            \draw [shift={(168.34,139.17)},rotate=270,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (161.7,142.47) .. controls (142.6,139.03) and (140.65,153.47) .. (159.06,151.58);
            \draw [shift={(161.8,151.2)},rotate=170.23,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (405.18,130.23) .. controls (404,153.33) and (380.02,154.96) .. (343.5,154.56);
            \draw [shift={(340.67,154.52)},rotate=0.76,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (462.03,119.65) .. controls (462.03,115.02) and (465.58,111.27) .. (469.97,111.27) .. controls (474.36,111.27) and (477.91,115.02) .. (477.91,119.65) .. controls (477.91,124.27) and (474.36,128.02) .. (469.97,128.02) .. controls (465.58,128.02) and (462.03,124.27) .. (462.03,119.65) -- cycle;
            \draw (476.9,115.47) .. controls (497.53,112.6) and (499.55,125.61) .. (479.92,124.46);
            \draw [shift={(477,124.2)},rotate=6.7,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (391.94,106.37) .. controls (413.05,89.39) and (451.69,87.75) .. (470.42,108.84);
            \draw [shift={(472.1,110.87)},rotate=232.19,fill={rgb,255:red,0;green,0;blue,0},line width=0.08,draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
            \draw (202.07,116.77) .. controls (202.07,112.39) and (205.63,108.84) .. (210.01,108.84) .. controls (214.39,108.84) and (217.94,112.39) .. (217.94,116.77) .. controls (217.94,121.15) and (214.39,124.7) .. (210.01,124.7) .. controls (205.63,124.7) and (202.07,121.15) .. (202.07,116.77) -- cycle;

            \draw (160.8,108.83) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v'_{0}$};
            \draw (342.8,100.13) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$v'_{0},v'_{0}$};
            \draw (293.59,83.07) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}'_{i}$};
            \draw (217.95,128.37) node [anchor=north west,inner sep=0.75pt,align=left] {$\game$};
            \draw (325.2,107.23) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$q'_{0}$};
            \draw (286.2,149.53) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$v,v$};
            \draw (326.6,149.43) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$q_{s}$};
            \draw (332.35,127.98) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$v,v$};
            \draw (160.8,139.83) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v'_{1}$};
            \draw (160.82,79.69) node [anchor=north west,inner sep=0.75pt,align=left] {$\game'$};
            \draw (384.8,109.43) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$q_{0}$};
            \draw (339.2,135.13) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$(v\neq v'_{0})$};
            \draw (347.2,154.53) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$v'_{0},v'_{0}$; $v'_{1},v'_{1}$};
            \draw (462.4,111.83) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$q'_{s}$};
            \draw (501.8,112.33) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$v'_{1},v$};
            \draw (450.2,81.93) node [anchor=north west,inner sep=0.75pt,font=\footnotesize,align=left] {$v'_{1},v$};
            \draw (414.79,118.07) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}_{i}$};
            \draw (271.2,159.33) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$(\forall v \in V')$};
            \draw (478.4,96.13) node [anchor=north west,inner sep=0.75pt,font=\scriptsize,align=left] {$(\forall v \in V)$};
            \draw (203.46,113.49) node [anchor=north west,inner sep=0.75pt,font=\small,align=left] {$v_{0}$};
        \end{tikzpicture}
        \caption{The reduction used for the \pspaceHard{}ness of \cref{theorem:constrainedNEexistenceGeneral}.}
        \label{fig:reduction-pspace-hardness-nash-constrained}
    \end{figure}
\end{proof}


\section{Proof of \texorpdfstring{\cref{prop:recognizable-finite-index}}{Proposition~\ref{prop:recognizable-finite-index}}}
\label{app:recognizable-finite-index}

\recognizablefiniteindex*

\begin{proof}
    We use~\cite[Lemma~$3$]{rational-relations-automatic-loding} to prove this proposition.
    Let $E_1 = \{(x,y) \mid \forall z,\, x \leqRelation z \text{ iff } y \leqRelation z\}$ and $E_2 = \{((x_1,x_2),(y_1,y_2)) \mid x_1 \leqRelation x_2 \mbox{ iff } y_1 \leqRelation y_2\}$ be two equivalence relations. From~\cite[Lemma~$3$]{rational-relations-automatic-loding}, we know that $\leqRelation$ is $\omega$-recognizable if and only if both $E_1$ and $E_2$ have finite index. Note that by definition, $E_2$ has at most two equivalence classes. Hence, to establish \cref{prop:recognizable-finite-index}, we will show that $E_1 = ~ \equivRelation$.
    Let $x,y \in \Sigma^\omega$. If $(x,y) \in E_1$, we can particularize $z$ to $x$ and then $y$, to get that $x \equivRelation y$ by reflexivity of $\leqRelation$.
    If $x \equivRelation y$, for all $z \in \Sigma^\omega$, we get by transitivity of $\leqRelation$ that $x \leqRelation z$ if and only if $y \leqRelation z$, thus $(x,y) \in E_1$.
\end{proof}


\section{Proof of Hardness of \texorpdfstring{\cref{theorem:constrainedNEexistenceGeneral}}{Theorem \ref{theorem:constrainedNEexistenceGeneral}} with \texorpdfstring{$\omega$}{ω}-Recognizable Relations}
\label{app:hardness-recognizable-pspace}

The \pspaceHard{}ness result of \cref{theorem:constrainedNEexistenceGeneral} still holds when all preference relations are $\omega$-recognizable. We can state this particular case as follows, whose proof is inspired by a proof in Section 5.7.4 of~\cite{PatriciaBouyerBMU15}.

\begin{theorem}
    The constrained NE existence problem, with $\omega$-recognizable preference relations $\leqRelation[i]$, is \pspaceHard{} (already for games $\game$ with two priorities).
\end{theorem}

\begin{figure}
    \centering
    \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,]
        \draw (122.29,127.11) -- (155.84,127.11);
        \draw [shift={(158.84,127.11)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (106.41,127.11) .. controls (106.41,122.48) and (109.96,118.73) .. (114.35,118.73) .. controls (118.74,118.73) and (122.29,122.48) .. (122.29,127.11) .. controls (122.29,131.73) and (118.74,135.48) .. (114.35,135.48) .. controls (109.96,135.48) and (106.41,131.73) .. (106.41,127.11) -- cycle;
        \draw (158.84,127.11) .. controls (158.84,122.48) and (162.4,118.73) .. (166.79,118.73) .. controls (171.17,118.73) and (174.73,122.48) .. (174.73,127.11) .. controls (174.73,131.73) and (171.17,135.48) .. (166.79,135.48) .. controls (162.4,135.48) and (158.84,131.73) .. (158.84,127.11) -- cycle;
        \draw (294.18,127.52) .. controls (294.18,122.9) and (297.74,119.15) .. (302.13,119.15) .. controls (306.51,119.15) and (310.07,122.9) .. (310.07,127.52) .. controls (310.07,132.15) and (306.51,135.9) .. (302.13,135.9) .. controls (297.74,135.9) and (294.18,132.15) .. (294.18,127.52) -- cycle;
        \draw (296.39,127.52) .. controls (296.39,124.19) and (298.96,121.48) .. (302.13,121.48) .. controls (305.29,121.48) and (307.86,124.19) .. (307.86,127.52) .. controls (307.86,130.86) and (305.29,133.56) .. (302.13,133.56) .. controls (298.96,133.56) and (296.39,130.86) .. (296.39,127.52) -- cycle;
        \draw (239.07,116.02) -- (291.78,123.34);
        \draw [shift={(294.75,123.75)},rotate=187.9,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (299.12,119.19) .. controls (296.19,97.89) and (310.48,97.7) .. (307.29,117.32);
        \draw [shift={(306.72,120.23)},rotate=282.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (93.26,127.48) -- (103.41,127.19);
        \draw [shift={(106.41,127.11)},rotate=178.35,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (151.07,103.3) .. controls (151.07,96.09) and (156.91,90.25) .. (164.12,90.25) -- (234.2,90.25) .. controls (241.41,90.25) and (247.25,96.09) .. (247.25,103.3) -- (247.25,148.7) .. controls (247.25,155.91) and (241.41,161.75) .. (234.2,161.75) -- (164.12,161.75) .. controls (156.91,161.75) and (151.07,155.91) .. (151.07,148.7) -- cycle;
        \draw (187.84,108.61) .. controls (187.84,103.98) and (191.4,100.23) .. (195.79,100.23) .. controls (200.17,100.23) and (203.73,103.98) .. (203.73,108.61) .. controls (203.73,113.23) and (200.17,116.98) .. (195.79,116.98) .. controls (191.4,116.98) and (187.84,113.23) .. (187.84,108.61) -- cycle;
        \draw (188.84,143.61) .. controls (188.84,138.98) and (192.4,135.23) .. (196.79,135.23) .. controls (201.17,135.23) and (204.73,138.98) .. (204.73,143.61) .. controls (204.73,148.23) and (201.17,151.98) .. (196.79,151.98) .. controls (192.4,151.98) and (188.84,148.23) .. (188.84,143.61) -- cycle;
        \draw [fill={rgb, 255:red, 194; green, 194; blue, 194},fill opacity=1 ] (224.18,111.52) .. controls (224.18,106.9) and (227.74,103.15) .. (232.13,103.15) .. controls (236.51,103.15) and (240.07,106.9) .. (240.07,111.52) .. controls (240.07,116.15) and (236.51,119.9) .. (232.13,119.9) .. controls (227.74,119.9) and (224.18,116.15) .. (224.18,111.52) -- cycle;
        \draw [fill={rgb, 255:red, 194; green, 194; blue, 194},fill opacity=1 ] (217.68,145.52) .. controls (217.68,140.9) and (221.24,137.15) .. (225.63,137.15) .. controls (230.01,137.15) and (233.57,140.9) .. (233.57,145.52) .. controls (233.57,150.15) and (230.01,153.9) .. (225.63,153.9) .. controls (221.24,153.9) and (217.68,150.15) .. (217.68,145.52) -- cycle;
        \draw (233.75,142.75) -- (291.31,131.33);
        \draw [shift={(294.25,130.75)},rotate=168.78,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (374.29,127.11) -- (407.84,127.11);
        \draw [shift={(410.84,127.11)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (358.41,127.11) .. controls (358.41,122.48) and (361.96,118.73) .. (366.35,118.73) .. controls (370.74,118.73) and (374.29,122.48) .. (374.29,127.11) .. controls (374.29,131.73) and (370.74,135.48) .. (366.35,135.48) .. controls (361.96,135.48) and (358.41,131.73) .. (358.41,127.11) -- cycle;
        \draw (410.84,127.11) .. controls (410.84,122.48) and (414.4,118.73) .. (418.79,118.73) .. controls (423.17,118.73) and (426.73,122.48) .. (426.73,127.11) .. controls (426.73,131.73) and (423.17,135.48) .. (418.79,135.48) .. controls (414.4,135.48) and (410.84,131.73) .. (410.84,127.11) -- cycle;
        \draw (546.18,127.52) .. controls (546.18,122.9) and (549.74,119.15) .. (554.13,119.15) .. controls (558.51,119.15) and (562.07,122.9) .. (562.07,127.52) .. controls (562.07,132.15) and (558.51,135.9) .. (554.13,135.9) .. controls (549.74,135.9) and (546.18,132.15) .. (546.18,127.52) -- cycle;
        \draw (491.07,116.02) -- (543.78,123.34);
        \draw [shift={(546.75,123.75)},rotate=187.9,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (551.12,119.19) .. controls (548.19,97.89) and (562.48,97.7) .. (559.29,117.32);
        \draw [shift={(558.72,120.23)},rotate=282.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (345.26,127.48) -- (355.41,127.19);
        \draw [shift={(358.41,127.11)},rotate=178.35,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw [fill={rgb,255:red,0;green,0;blue,0},fill opacity=0.03,dash pattern={on 4.5pt off 4.5pt}] (403.07,103.3) .. controls (403.07,96.09) and (408.91,90.25) .. (416.12,90.25) -- (486.2,90.25) .. controls (493.41,90.25) and (499.25,96.09) .. (499.25,103.3) -- (499.25,148.7) .. controls (499.25,155.91) and (493.41,161.75) .. (486.2,161.75) -- (416.12,161.75) .. controls (408.91,161.75) and (403.07,155.91) .. (403.07,148.7) -- cycle;
        \draw (439.84,108.61) .. controls (439.84,103.98) and (443.4,100.23) .. (447.79,100.23) .. controls (452.17,100.23) and (455.73,103.98) .. (455.73,108.61) .. controls (455.73,113.23) and (452.17,116.98) .. (447.79,116.98) .. controls (443.4,116.98) and (439.84,113.23) .. (439.84,108.61) -- cycle;
        \draw (440.84,143.61) .. controls (440.84,138.98) and (444.4,135.23) .. (448.79,135.23) .. controls (453.17,135.23) and (456.73,138.98) .. (456.73,143.61) .. controls (456.73,148.23) and (453.17,151.98) .. (448.79,151.98) .. controls (444.4,151.98) and (440.84,148.23) .. (440.84,143.61) -- cycle;
        \draw (485.75,142.75) -- (543.31,131.33);
        \draw [shift={(546.25,130.75)},rotate=168.78,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (366.35,135.48) -- (366.26,157.25);
        \draw [shift={(366.25,160.25)},rotate=270.23,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (357.41,169.11) .. controls (357.41,164.48) and (360.96,160.73) .. (365.35,160.73) .. controls (369.74,160.73) and (373.29,164.48) .. (373.29,169.11) .. controls (373.29,173.73) and (369.74,177.48) .. (365.35,177.48) .. controls (360.96,177.48) and (357.41,173.73) .. (357.41,169.11) -- cycle;
        \draw (371.75,173.75) .. controls (391.81,178.05) and (393.62,165.47) .. (375.02,165.2);
        \draw [shift={(372.25,165.25)},rotate=357.34,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw [fill={rgb, 255:red, 194; green, 194; blue, 194},fill opacity=1 ] (476.68,112.02) .. controls (476.68,107.4) and (480.24,103.65) .. (484.63,103.65) .. controls (489.01,103.65) and (492.57,107.4) .. (492.57,112.02) .. controls (492.57,116.65) and (489.01,120.4) .. (484.63,120.4) .. controls (480.24,120.4) and (476.68,116.65) .. (476.68,112.02) -- cycle;
        \draw (478.89,112.02) .. controls (478.89,108.69) and (481.46,105.98) .. (484.63,105.98) .. controls (487.79,105.98) and (490.36,108.69) .. (490.36,112.02) .. controls (490.36,115.36) and (487.79,118.06) .. (484.63,118.06) .. controls (481.46,118.06) and (478.89,115.36) .. (478.89,112.02) -- cycle;
        \draw [fill={rgb, 255:red, 194; green, 194; blue, 194},fill opacity=1 ] (470.68,145.52) .. controls (470.68,140.9) and (474.24,137.15) .. (478.63,137.15) .. controls (483.01,137.15) and (486.57,140.9) .. (486.57,145.52) .. controls (486.57,150.15) and (483.01,153.9) .. (478.63,153.9) .. controls (474.24,153.9) and (470.68,150.15) .. (470.68,145.52) -- cycle;
        \draw (472.89,145.52) .. controls (472.89,142.19) and (475.46,139.48) .. (478.63,139.48) .. controls (481.79,139.48) and (484.36,142.19) .. (484.36,145.52) .. controls (484.36,148.86) and (481.79,151.56) .. (478.63,151.56) .. controls (475.46,151.56) and (472.89,148.86) .. (472.89,145.52) -- cycle;
        \draw (606.18,127.52) .. controls (606.18,122.9) and (609.74,119.15) .. (614.13,119.15) .. controls (618.51,119.15) and (622.07,122.9) .. (622.07,127.52) .. controls (622.07,132.15) and (618.51,135.9) .. (614.13,135.9) .. controls (609.74,135.9) and (606.18,132.15) .. (606.18,127.52) -- cycle;
        \draw (608.39,127.52) .. controls (608.39,124.19) and (610.96,121.48) .. (614.13,121.48) .. controls (617.29,121.48) and (619.86,124.19) .. (619.86,127.52) .. controls (619.86,130.86) and (617.29,133.56) .. (614.13,133.56) .. controls (610.96,133.56) and (608.39,130.86) .. (608.39,127.52) -- cycle;
        \draw (562.07,127.52) -- (603.18,127.52);
        \draw [shift={(606.18,127.52)},rotate=180,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (452.85,136.83) .. controls (465.82,122.34) and (473.27,105.91) .. (476.9,75.74);
        \draw [shift={(477.22,72.9)},rotate=96.24,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (418.79,118.73) .. controls (418.67,95.63) and (440.4,69.64) .. (466.43,64.95);
        \draw [shift={(469.28,64.52)},rotate=173.25,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (447.79,100.23) .. controls (451.2,85.99) and (459.52,78.92) .. (467.83,71.66);
        \draw [shift={(470,69.75)},rotate=138.37,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (469.28,64.52) .. controls (469.28,59.9) and (472.84,56.15) .. (477.22,56.15) .. controls (481.61,56.15) and (485.17,59.9) .. (485.17,64.52) .. controls (485.17,69.15) and (481.61,72.9) .. (477.22,72.9) .. controls (472.84,72.9) and (469.28,69.15) .. (469.28,64.52) -- cycle;
        \draw (471.49,64.52) .. controls (471.49,61.19) and (474.06,58.48) .. (477.22,58.48) .. controls (480.39,58.48) and (482.95,61.19) .. (482.95,64.52) .. controls (482.95,67.86) and (480.39,70.56) .. (477.22,70.56) .. controls (474.06,70.56) and (471.49,67.86) .. (471.49,64.52) -- cycle;
        \draw (442.06,108.61) .. controls (442.06,105.27) and (444.62,102.56) .. (447.79,102.56) .. controls (450.95,102.56) and (453.52,105.27) .. (453.52,108.61) .. controls (453.52,111.94) and (450.95,114.65) .. (447.79,114.65) .. controls (444.62,114.65) and (442.06,111.94) .. (442.06,108.61) -- cycle;
        \draw (443.06,143.61) .. controls (443.06,140.27) and (445.62,137.56) .. (448.79,137.56) .. controls (451.95,137.56) and (454.52,140.27) .. (454.52,143.61) .. controls (454.52,146.94) and (451.95,149.65) .. (448.79,149.65) .. controls (445.62,149.65) and (443.06,146.94) .. (443.06,143.61) -- cycle;
        \draw (413.06,127.11) .. controls (413.06,123.77) and (415.62,121.06) .. (418.79,121.06) .. controls (421.95,121.06) and (424.52,123.77) .. (424.52,127.11) .. controls (424.52,130.44) and (421.95,133.15) .. (418.79,133.15) .. controls (415.62,133.15) and (413.06,130.44) .. (413.06,127.11) -- cycle;
        \draw (484.75,68.75) .. controls (504.81,73.05) and (506.62,60.47) .. (488.02,60.2);
        \draw [shift={(485.25,60.25)},rotate=357.34,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (423,134.75) .. controls (426.78,151.76) and (440.83,171.9) .. (454.6,180.81);
        \draw [shift={(457,182.25)},rotate=208.89,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (441.5,113.75) .. controls (430.35,132.67) and (432.83,159.11) .. (456.72,175.74);
        \draw [shift={(459,177.25)},rotate=212.4,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (448.79,151.98) .. controls (451.26,161.78) and (453.36,165.23) .. (459.54,172.48);
        \draw [shift={(461.5,174.75)},rotate=229.04,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (457.28,182.52) .. controls (457.28,177.9) and (460.84,174.15) .. (465.22,174.15) .. controls (469.61,174.15) and (473.17,177.9) .. (473.17,182.52) .. controls (473.17,187.15) and (469.61,190.9) .. (465.22,190.9) .. controls (460.84,190.9) and (457.28,187.15) .. (457.28,182.52) -- cycle;
        \draw (459.49,182.52) .. controls (459.49,179.19) and (462.06,176.48) .. (465.22,176.48) .. controls (468.39,176.48) and (470.95,179.19) .. (470.95,182.52) .. controls (470.95,185.86) and (468.39,188.56) .. (465.22,188.56) .. controls (462.06,188.56) and (459.49,185.86) .. (459.49,182.52) -- cycle;
        \draw (471.75,186.25) .. controls (491.81,190.55) and (493.62,177.97) .. (475.02,177.7);
        \draw [shift={(472.25,177.75)},rotate=357.34,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (610.62,120.69) .. controls (607.69,99.39) and (621.98,99.2) .. (618.79,118.82);
        \draw [shift={(618.22,121.73)},rotate=282.86,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (359.62,169.11) .. controls (359.62,165.77) and (362.18,163.06) .. (365.35,163.06) .. controls (368.51,163.06) and (371.08,165.77) .. (371.08,169.11) .. controls (371.08,172.44) and (368.51,175.15) .. (365.35,175.15) .. controls (362.18,175.15) and (359.62,172.44) .. (359.62,169.11) -- cycle;
        \draw (478,116.75) .. controls (464.15,132.03) and (459.43,152.33) .. (464.45,171.45);
        \draw [shift={(465.22,174.15)},rotate=252.63,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;
        \draw (478.63,153.9) .. controls (477.18,162.22) and (475.44,167.1) .. (470.84,173);
        \draw [shift={(469,175.25)},rotate=310.6,fill={rgb,255:red,0;green,0;blue,0},line width=0.08, draw opacity=0] (5.36,-2.57) -- (0,0) -- (5.36,2.57) -- (3.56,0) -- cycle;

        \draw (125.7,113.23) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$init$};
        \draw (289.46,87.35) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$final$};
        \draw (94.89,82.5) node [anchor=north west,inner sep=0.75pt,align=left] {$L_{i}$};
        \draw (108.18,122.4) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$q_{i}$};
        \draw (157.89,142) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}_{i}$};
        \draw (254.67,103.58) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,rotate=-9.27,align=left] {$final$};
        \draw (252.47,139.87) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,rotate=-349.11,align=left] {$final$};
        \draw (377.7,113.23) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$init$};
        \draw (540.46,88.35) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$final$};
        \draw (348.39,77) node [anchor=north west,inner sep=0.75pt,align=left] {$L_{i}^{c}$};
        \draw (360.18,122.4) node [anchor=north west,inner sep=0.75pt, font=\small,align=left] {$q_{i}$};
        \draw (404.89,142.5) node [anchor=north west,inner sep=0.75pt,align=left] {$\aut{A}_{i}$};
        \draw (506.5,103.86) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,rotate=-8.14,align=left] {$final$};
        \draw (504.47,139.87) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,rotate=-349.11,align=left] {$final$};
        \draw (326.7,141.23) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$\neq init$};
        \draw (563.2,110.23) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$\neq final$};
        \draw (409.96,63.35) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$final$};
        \draw (502.96,61.35) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$*$};
        \draw (389.96,167.35) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$*$};
        \draw (418.2,168.73) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$init$};
        \draw (489.96,179.85) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$*$};
        \draw (610.46,92.85) node [anchor=north west,inner sep=0.75pt, font=\footnotesize,align=left] {$*$};
    \end{tikzpicture}
    \caption{\DBWs{} for $L_i$ and $L_i^c$}
    \label{fig:reduction-constrained-nash-existence-pspace}
\end{figure}

\begin{proof}
    We use a reduction from the non-emptiness problem of the intersection of $n$ \DFAs{}\footnote{Deterministic finite automata, accepting a set of finite words.}, which is \pspaceComplete{}~\cite{Kozen77}, to the constrained NE existence problem. Consider $n$ \DFAs{} $\aut{A}_i$ over the alphabet $\Sigma$ (that are complete). We can suppose that for each $i$, there exists some finite word $w_i \in \Sigma^*$ of polynomial length such that $w_i \in \lang{\aut{A}_i}$ as otherwise, the intersection of the $n$ \DFAs{} is nonempty. This can be checked in polynomial time.

    We are going to construct a game $\game = (\arena,(\leqRelation[i])_{1\leq i \leq n+1})$ with $n+1$ players, with one constraint by player~$i$ given as a lasso  $\pi_i$, in the following way. Let $\Sigma' = \Sigma \cup \{init,final\}$. For each $i \in \{1,\ldots,n\} $, we define the language $L_i = \{init \cdot w \cdot final^\omega \mid w \in \lang{\aut{A}_i}\}$ and denote by $L_i^c$ its complement $(\Sigma')^\omega \ssetminus L_i$. We then define the preorder $\leqRelation[i]$ equal to $(L_i^c \times L_i) \cup (L_i \times L_i) \cup (L_i^c \times L_i^c)$ (intuitively, player~$i$ strictly prefers words of $L_i$ to those of $L_i^c$). This is clearly an $\omega$-recognizable preorder (composed of the two equivalence classes $L_i$ and $L_i^c$). For player~$n+1$, we define the $\omega$-recognizable preorder $\leqRelation[n+1]$ equal to  $(\Sigma')^\omega \times (\Sigma')^\omega$. The set of vertices of the arena $\arena$ is equal to $\Sigma'$ such that all vertices belong to player~$n+1$. Its set of edges is $\Sigma' \times \Sigma'$ and the initial vertex is $init$. Hence, all plays from $init$ are NE outcomes due to the preference relation $\leqRelation[n+1]$ of player~$n+1$. We finally define for each $i$, $1 \leq i \leq n$, the lasso $\pi_i = init\cdot w_i \cdot final^\omega$,  and the lasso $\pi_{n+1} = init \cdot final^\omega$. Notice that each lasso $\pi_i$ belongs to $L_i$, $1\leq i \leq n$. 

    Let us show that the intersection of the $n$ \DFAs{} is non-empty if, and only if, there exists an NE from $init$ whose outcome $\rho$ is such that $\pi_i \leqRelation[i] \rho$ for all $i$, $1 \leq i \leq n+1$. Suppose that  $w \in \Sigma^*$ belongs to the intersection $\bigcap_{1\leq i \leq n} \lang{\aut{A}_i}$. Then for all $i, 1 \leq i \leq n$, $\rho = init \cdot w \cdot final^\omega$ belongs to $L_i$ and satisfies $\pi_i \equivRelation[i] \rho$ by definition of $\leqRelation[i]$. We also have that $\rho$ is an NE outcome such that $\pi_{n+1} \equivRelation[n+1] \rho$. Conversely, suppose that there exists an NE outcome $\rho$ from $init$ such that $\pi_i \leqRelation[i] \rho$ for each player~$i$. It follows that $\rho \in L_i$ for all $i$, $1 \leq i \leq n$, by definition of $\leqRelation[i]$ and $\pi_i$. That is, $\rho = init \cdot w \cdot final^\omega$ for some finite word $w$ belonging to each $\lang{\aut{A}_i}$, thus to the intersection $\bigcap_{1\leq i \leq n} \lang{\aut{A}_i}$.

    It remains to show that each preorder $\leqRelation[i]$, $1\leq i \leq n$, is accepted by a \DPW{} (it is trivial for $\leqRelation[n+1]$). For this purpose, we are going to show that $L_i$ and $L_i^c$ are both accepted by a \DBW{}. Therefore, $L_i^c \times L_i$, $L_i \times L_i$, and $L_i^c \times L_i^c$ will all be accepted by a generalized \DBW{} with the conjunction of B\"uchi conditions, thus by a \DBW{}~\cite{handbook-of-model-checking-orna-kupferman}. Their union will thus also be accepted by a \DBW{}, in particular by a \DPW. A \DBW{} is given for $L_i$ (resp.\ $L_i^c$) on the left (resp.\ right) part of \cref{fig:reduction-constrained-nash-existence-pspace}. A gray state represents an accepting state of the \DFA{} $\aut{A}_i$ while double circled states are accepting states of the \DBW{}. Notice that a word $x$ belongs to $L_i^c$ if, and only if,
    \begin{itemize}
        \item $x$ begins with a symbol $a$ different from $init$,
        \item $x = init \cdot x'$ with $x' \in \Sigma^\omega$ ($x$ does not leave $\aut{A}_i$),
        \item $x = init \cdot w \cdot init \cdot x'$ with $w \in \Sigma^*$ and $x' \in \Sigma'^\omega$ ($x$ leaves $\aut{A}_i$ with symbol $init$),
        \item $x = init \cdot w \cdot final \cdot x'$ with $w \not\in \lang{\aut{A}_i}$ and $x' \in \Sigma'^\omega$ ($x$ leaves $\aut{A}_i$ from one of its non-final states with symbol $final$),
        \item $x = init \cdot w \cdot final^+ \cdot a \cdot x'$ with $w \in \lang{\aut{A}_i}$, $a \ne final$, and $x' \in \Sigma'^\omega$, ($x$ leaves $\aut{A}_i$ from one of its final states with symbol $final$ and not with suffix $final^\omega$).
    \end{itemize}

    This concludes the proof.
\end{proof}


\section{Proof of the Existence of NE with Total \texorpdfstring{$\omega$}{ω}-Recognizable Relations}
\label{app:NEtotal}

In this section, we assume that each game $\game$ has an $\omega$-recognizable preference relation $\leqRelation[i]$ for each $i \in \Players$. We aim at proving \cref{theorem:existenceNE} when every relation is total.

By \cref{prop:recognizable-finite-index}, we denote by $\lattice[i]$ the finite lattice formed by the equivalence classes of $\equivRelation[i]$. We also denote by $[x]_i$ the equivalence class of the word $x$ with respect to $\equivRelation[i]$. By abusive notation, we write $[x]_i \leqRelation[i] [y]_i$ whenever $x \leqRelation[i] y$.

\paragraph*{Useful Lemmas}

In addition to \cref{prop:recognizable-finite-index}, we first mention some useful properties about preorders.

\begin{lemma} \label{lem:lasso}
Let $\leqRelation$ be an $\omega$-recognizable preorder over $\Sigma$ and $\equivRelation$ the related equivalence relation. Then, in each equivalence class of $\equivRelation$, there exists a lasso. Moreover, given a word $x \in \Sigma^\omega$, there exists a prefix $\mu\nu$ of $x$ such that $x \equivRelation \mu (\nu)^\omega$.
\end{lemma}

\begin{proof}
Let $x \in \Sigma^\omega$. As $\leqRelation$ is a preorder, we have $x \leqRelation x$. As $\leqRelation$ is $\omega$-recognizable, i.e., $\leqRelation$ is equal to $\cup_{i=1}^\ell X_i \times Y_i$ where $X_i, Y_i$ are $\omega$-regular languages, there exists $i$ such that $(x,x) \in X_i \times Y_i$. Therefore, $x$ belongs to $X_i \cap Y_i$ which is still $\omega$-regular and thus contains a lasso $\mu (\nu)^\omega$ such that $\mu\nu$ is a prefix of $x$. It follows that $(x,\mu(\nu)^\omega) \in X_i \times Y_i$ and $(\mu(\nu)^\omega,x) \in X_i \times Y_i$, thus $x \leqRelation \mu(\nu)^\omega$ and $\mu(\nu)^\omega \leqRelation x$, that is, $x \equivRelation \mu(\nu)^\omega$.
\end{proof}

Note that \cref{lem:lasso} does not hold in the general case of $\omega$-automatic preorders. Let us take \leqRelation{} defined as $x \leqRelation y$ if and only if $x = y$. This is an $\omega$-automatic preorder where for each word $x$, its equivalence class is the singleton $\{x\}$. There is an infinite number of such classes, showing that $\leqRelation$ is not $\omega$-recognizable (by \cref{prop:recognizable-finite-index}), and \cref{lem:lasso} does not hold.

\begin{lemma} \label{lem:prefixInd}
Let $\leqRelation$ be a preorder over $\Sigma$. Then $\leqRelation$ is prefix-independent if and only if for all $x \in \Sigma^\omega$ and $k \geq 0$, we have $x \equivRelation x_{\geq k}$.
\end{lemma}

\begin{proof}
Suppose first that $\leqRelation$ is prefix-independent. As $\leqRelation$ is reflexive, then $x \leqRelation x$. As $\leqRelation$ is prefix-independent, then $x \leqRelation x_{\geq k}$ and $x_{\geq k} \leqRelation x$. It follows that $x \equivRelation x_{\geq k}$.

Suppose now that for all $x \in \Sigma^\omega$ and $k \geq 0$, we have $x \equivRelation x_{\geq k}$. If $x \leqRelation y$, then $x_{\geq i} \equivRelation x \leqRelation y \equivRelation y_{\geq j}$. Therefore, by transitivity, $x_{\geq i} \leqRelation y_{\geq j}$ and $\leqRelation$ is prefix-independent.
\end{proof}

\paragraph*{Total Preference Relations}

We now suppose that each preference relation $\leqRelation[i]$ is total, that is, the lattice $\lattice[i]$ is a finite \emph{total} order. This means that the finite number of equivalence classes of $\equivRelation[i]$ are totally ordered from the lowest one to the highest one. Consequently, we have the next important property: for all $x,y \in \Sigma^\omega$,
\[
x \not\leqRelationStrict[i] y ~~\Leftrightarrow~~ y \leqRelation[i] x.
\]

Let us state \cref{theorem:existenceNE} in the particular setting of total preference relations.

\begin{theorem}
\label{theorem:existenceNETotal}
    When the preference relations of a game are all $\omega$-recognizable and total, then there always exists an NE. Moreover, if these relations are prefix-independent, there is an NE which is composed of finite-memory strategies.
\end{theorem}

To prove \cref{theorem:existenceNETotal}, we take inspiration from the work of~\cite{Gradel-Ummels-08} and~\cite{BrihayePS13}, where the existence of NEs is studied through the concept of value and optimal strategy. In the next definitions, for a fixed $i \in \Players$, the notation $\Sigma_{i}$ (resp.\ $\Sigma_{-i}$) is used for the set of all strategies of player~$i$ (resp.\ player~$-i$).

\begin{definition} \label{def:values}
    Let $\leqRelation[i]$ be the preference relation of player~$i$ and $-i$ be the coalition of the other players. Let $v$ be a vertex. We define the following \emph{lower} and \emph{upper values}:

    \begin{itemize}
    \item $\underline{val}_i(v) = \max_{\sigma_i \in \Sigma_i} \min \{[\pi]_{i} \mid \pi$ consistent with $\sigma_i \text{ and } \first{\pi} = v\}$,
    \item $\overline{val}_i(v) = \min_{\sigma_{-i} \in \Sigma_{-i}} \max \{[\pi]_{i} \mid \pi$ consistent with $\sigma_{-i} \text{ and } \first{\pi} = v\}$.
    \end{itemize}
\end{definition}

Note that the lower and upper values are well defined as the lattice $\lattice[i]$ is finite.

\begin{lemma}
    We have $\underline{val}_i(v) \leqRelation[i] \overline{val}_i(v)$ for each $v \in V$.
\end{lemma}

\begin{proof}
    Let $\sigma_i^v$ that realizes $\underline{val}_i(v)$ and $\sigma_{-i}^v$ that realizes $\overline{val}_i(v)$. Then, we have $\underline{val}_i(v) \leqRelation[i] [\outcomefrom{\sigma_i^v,\sigma_{-i}^v}{v}]_{i} \leqRelation[i] \overline{val}_i(v)$.
\end{proof}

\begin{definition}
    If $\underline{val}_i(v) = \overline{val}_i(v)$, then we speak about the \emph{value of $v$} denoted by $val_i(v)$ and two strategies $\sigma_i^v \in \Sigma_i$, $\sigma_{-i}^v \in \Sigma_{-i}$ that realize the value are called \emph{optimal}.
\end{definition}

Note that an optimal strategy $\sigma_i^v$ ensures consistent plays $\pi$ starting at $v$ such that $val_i(v) \leqRelation[i] [\pi]_{i}$. This leads us to introduce the concept of \emph{threshold game} $(\arena,\leqRelation[i],\Omega_i)$ defined from $\game$ and a lasso $\rho$, and with $\Omega_i = \{x \in V^\omega \mid \rho \leqRelation[i] x\}$. It is a zero-sum player game between the players~$i$ and $-i$, whose objective of player~$i$ is the set $\Omega_i$ (while the objective of player~$-i$ is $V^\omega \ssetminus \Omega_i$). Hence, if $\rho$ is a lasso in the equivalence class $val_i(v)$ such that $\first{\pi} = v$ (it exists by \cref{lem:lasso}), $\sigma_i^v$ is nothing more than a winning strategy in this threshold game. Similarly, an optimal strategy $\sigma_{-i}^v$ ensures consistent plays $\pi$ starting at $v$ such that $[\pi]_{i} \leqRelation[i] val_i(v)$. It is thus a winning strategy in the variant of threshold game $(\arena,\leqRelation[i],\Omega_{-i})$ where $\Omega_{-i} = \{x \in V^\omega \mid x \leqRelation[i] \rho\}$ is the objective of player~$-i$.

\begin{proposition}\label{theorem:zero-sum-automatic-relation-determinacy}
    Every threshold game (and its variant) is determined, with finite-memory winning strategies for both players.
\end{proposition}

\begin{proof}
    Let $(\arena,\leqRelation[i],\Omega_i)$ be a threshold game defined from $\game$ and a lasso $\rho$.
    From the \DPW{} $\aut{A}_i$ accepting $\leqRelation[i]$, we construct a \DPW{} $\aut{A}'_i$ accepting $\Omega_i$, which is the product between the lasso $\rho$ and $\aut{A}_i$. Then, we construct a zero-sum parity game $\mathcal{H}$ from the product between the arena $\arena$ of $\game$ and $\aut{A}'_i$, such that its parity condition encodes the objective $\Omega_i$.\footnote{Note that in the proof of the membership result of \cref{theorem:OutcomeCheck}, such a zero-sum generalized parity game was already constructed for the objective $\{x \in V^\omega \mid \rho \leqRelationStrict[i] x\}$.} Clearly, the existence of a winning strategy in the threshold game is equivalent to the existence of a winning strategy in $\mathcal{H}$. As parity games are determined and have memoryless winning strategies for both players~\cite{lncs2500}, this completes the proof. Note that the argument is similar for the variant with the objective $\Omega_{-i}$ for player~$-i$.
\end{proof}

\begin{proposition}
    There always exists a value $val_i(v)$ for each $v \in V$. Moreover, there exist finite-memory optimal strategies $\sigma_i^v$ and $\sigma_{-i}^v$ whose outcome $\outcomefrom{\sigma_i^v,\sigma_{-i}^v}{v}$ is a lasso in the equivalence class $val_i(v)$.
\end{proposition}

\begin{proof}
    Let us suppose for a contradiction that $\underline{val}_i(v) \leqRelationStrict[i] \overline{val}_i(v)$ for some $v$. It implies the existence of a play $\rho \in \overline{val}_i(v)$ with $\first{\rho}=v$ such that $\underline{val}_i(v) \leqRelationStrict[i] [\rho]_{i}$. By \cref{lem:lasso}, we can assume that $\rho$ is a lasso. In other words, we have
    \begin{align}
    \label{eq:value}
        \neg (\exists \sigma_i \in \Sigma_i, \forall \sigma_{-i} \in \Sigma_{-i}, ~ \rho \leqRelation[i] \outcomefrom{\sigma_i,\sigma_{-i}}{v}).
    \end{align}
    We consider the threshold game $(\arena,\leqRelation[i],\Omega_i)$ with the objective $\Omega_i = \{x \in V^\omega \mid \rho \leqRelation[i] x\}$
    for player~$i$.
    By determinacy, given by \cref{theorem:zero-sum-automatic-relation-determinacy}, and totality of $\leqRelation[i]$, \eqref{eq:value} is equivalent to
    \[
    \exists \sigma_{-i} \in \Sigma_{-i}, \forall \sigma_{i} \in \Sigma_{i}, ~ \outcomefrom{\sigma_i,\sigma_{-i}}{v} \leqRelationStrict[i] \rho.
    \]
    The existence of such a strategy $\sigma_{-i}$ is in contradiction with the definition of $\overline{val}_i(v)$, since $\rho \in \overline{val}_i(v)$. Hence, for all $v$, we have $\underline{val}_i(v) = \overline{val}_i(v)$ and $val_i(v)$ exists.

    Let us now prove the existence of finite-memory optimal strategies. Let $\rho$ be a lasso in the equivalence class $val_i(v)$ such that $\first{\rho} = v$.
    By \cref{theorem:zero-sum-automatic-relation-determinacy} (where $\Omega_i$ is defined with this lasso $\rho$), there exists a (winning) optimal strategy $\sigma_i$ that is finite-memory. Similarly, there exists a finite-memory optimal strategy $\sigma_{-i}$ for player~$-i$ and his objective $\Omega_{-i} = \{x \in V^\omega \mid x \leqRelation[i] \rho\}$.
\end{proof}

Now that the values and optimal strategies are defined, we still need to introduce the concept of subgame before proceeding to the proof of \cref{theorem:existenceNETotal}. Given a game $\game = (\arena,(\leqRelation[i])_{i \in \Players})$ and a history $h \in V^*$, we denote by $\rest{\game}{h} = (\arena,(\leqRelation[i]^h)_{i \in \Players})$ the \emph{subgame from $h$}, where for each player~$i$, we define the relation $\leqRelation[i]^h$ by:
\[
\forall x,y \in V^\omega,~ x \leqRelation[i]^h y ~\Leftrightarrow~ hx \leqRelation[i] hy.
\]
Hence, this relation only refers to the preference relation $\leqRelation[i]$ restricted to words having $h$ as a prefix. We also define the relations $\leqRelationStrict[i]^h$ and $\equivRelation[i]^h$ as expected.
By definition, we have $x \equivRelation[i]^h y$ if and only if $hx \equivRelation[i] hy$. Hence, the equivalence class $[x]_i^h$ of $x$ for $\equivRelation[i]^h$ is mapped to the equivalence class $[hx]_{i}$ of $hx$ for $\equivRelation[i]$, called the \emph{projection} of $[x]_i^h$.

\begin{lemma}\label{lem:properties-subgame-relations}
    Given the $\omega$-recognizable total preorder $\leqRelation[i]$ and any history $h \in V^*$, the relation $\leqRelation[i]^{h}$ is also an $\omega$-recognizable total preorder.
\end{lemma}

\begin{proof}
    By definition, $\leqRelation[i]^{h}$ is clearly a total preorder. Furthermore, we can easily define a \DPW{} accepting $\leqRelation[i]^{h}$ from the \DPW{} $\aut{A}_i$ accepting $\leqRelation[i]$. Indeed, we simply take a copy of $\aut{A}_i$ and replace its initial state with the unique state reached by reading the pair $(h,h)$.
    Finally, to show that $\leqRelation[i]^h$ is $\omega$-recognizable, let us prove that $\equivRelation[i]^h$ has finite index (by \cref{prop:recognizable-finite-index}). As the equivalence class of any $x$ for $\equivRelation[i]^h$ is mapped to its projection $[hx]_i$ and $\equivRelation[i]$ has a finite index, it is also the case for $\equivRelation[i]^h$.
\end{proof}

We are now ready to prove \cref{theorem:existenceNETotal}.

\begin{proof}[Proof of \cref{theorem:existenceNETotal}]
We first prove the existence of an NE. At the end of the proof, we treat the particular case of games with prefix-independent preference relations.

As done for $\game$, thanks to \cref{lem:properties-subgame-relations}, for each player~$i$ and each history $hv$, we can define for the subgame $\rest{\game}{h}$ the notion of value denoted $val_i^h(v)$ and of optimal strategies denoted $\sigma_i^{hv}$, $\sigma_{-i}^{hv}$ for player~$i$ and $-i$ respectively. We also denote by $\nu_i^{hv}$ the equivalence class for $\equivRelation[i]$, equal to the projection of $val_i^h(v)$.
This means that $\sigma_i^{hv}$, (resp.\ $\sigma_{-i}^{hv}$) guarantees consistent plays $\pi$ starting at $v$ such that
\[
val_i^h(v) \leqRelation[i]^h [\pi]_i^h \quad(\text{resp.\ } [\pi]_i^h \leqRelation[i]^h val_i^h(v)),
\]
or equivalently
\begin{align}\label{eq:optimal}
\nu_i^{hv} \leqRelation[i] [h\pi]_i \quad(\text{resp.\ } [h\pi]_i \leqRelation[i] \nu_i^{hv}).
\end{align}
For each $i$, let us define the following strategy $\tau_i$\footnote{Note that the strategy profile composed of the $\tau_i$'s is not yet the required NE.} in $\game$: for all histories $hv$ with $v \in V_i$,
\[ \tau_i(hv) = \sigma^{h_1u}_i(h_2v) \]
such that
\begin{itemize}
    \item $h = h_1h_2$,
    \item $\nu_i^{h_1u} = \nu_i^{hv}$ with $u$ the first vertex of $h_2v$,
    \item $|h_1|$ is minimal with respect to the two previous items.
\end{itemize}
(We use the optimal strategy corresponding to the smallest prefix $h_1$ of $h$ such that the projections of both values $val_i^h(v)$ and $val_i^{h_1}(u)$ are the same.)

Consider the outcome $\rho = \outcomefrom{\tau}{v_0}$ of the strategy profile $\tau = (\tau_i)_{i \in \Players}$ from a given initial vertex $v_0$. For each $i$, we define $\nu^*_i = \max\{\nu_i^{hv} \mid hv \text{ prefix of } \rho\}$. Notice that $\nu_i^*$ is well defined as any $\nu_i^{hv}$ is an equivalence class of $\equivRelation[i]$ and $\lattice[i]$ is a finite total order. Let us prove that
\begin{align}\label{eq:LowerBound}
\nu_i^* \leqRelation[i] [\rho]_i \text{ for all } i \in \Players.
\end{align}
For this purpose, let us consider the smallest prefix $hv$ of $\rho$ such that $\nu_i^{hv} = \nu_i^*$, and let us prove that for any $hgu$ prefix of $\rho$,
\begin{itemize}
    \item $\tau_i(hgu) = \sigma_i^{hv}(gu)$ if $u \in V_i$,
    \item $\nu_i^{hgu} = \nu_i^*$.
\end{itemize}
(From $h$, $\tau_i$ plays as dictated by $\sigma_i^{hv}$ and the projection of the value $val_i^{hg}(u)$ remains equal to $\nu_i^*$.) The proof is by induction on $|g|$. By definition of $\tau_i$ and $hv$, this property trivially holds when $g = \varepsilon$ (in which case $u=v$). Let us assume that the property is true for $gu$ and let us prove that it remains true for $guu'$, with $u' \in V$ such that $hguu'$ is a prefix of $\rho$.
\begin{itemize}
    \item Let us first observe that $guu'$ is consistent with $\sigma_i^{hv}$. This is verified for $gu$ by induction hypothesis. Moreover, again by induction hypothesis, if $u \in V_i$, then $\tau_i(hgu) = \sigma_i^{hv}(gu) = u'$.
    \item Let us then prove that $\nu_i^{hguu'} = \nu_i^*$. By definition of $\nu_i^*$, we have $\nu_i^{hguu'} \leqRelation[i] \nu_i^*$. Assume by contradiction that $\nu_i^{hguu'} \leqRelationStrict[i] \nu_i^*$. By \eqref{eq:optimal}, it follows that the optimal strategy $\sigma_{-i}^{hguu'}$ can impose $[\pi]_i \leqRelation[i]\nu_i^{hguu'} \leqRelationStrict[i] v_i^*$ on plays $\pi$ having $hguu'$ as prefix. This is in contradiction with the optimal strategy $\sigma_i^{hv}$, the consistency of $guu'$ with this strategy, and thus by \eqref{eq:optimal} $\nu_i^* = \nu_i^{hv} \leqRelation[i] [\pi]_i$.
    \item Suppose that $u' \in V_i$, as $\nu_i^{hguu'} = \nu_i^*$, it follows by definition of $\tau_i$ that $\tau_i(hguu') = \sigma_i^{hv}(guu')$.
\end{itemize}
As a consequence, the property is proved and we get that $\rho = h\rho'$ with a play $\rho'$ consistent with $\sigma_i^{hv}$. By \eqref{eq:optimal} again, it follows that $\nu_i^* \leqRelation[i] [\rho]_i$, and \eqref{eq:LowerBound} is thus established.

We are now ready to define the required NE $\tau' = (\tau'_i)_{i \in \Players}$. It is partially defined in such a way as to generate $\rho = \outcomefrom{\tau'}{v_0}$. Moreover, as soon as some player~$i$ deviates from $\rho$ at any prefix $hv$ of $\rho$, then the other players form the coalition $-i$ and play the optimal strategy $\sigma_{-i}^{hv}$. In this way, by \eqref{eq:optimal}, the coalition imposes $[\rho']_i \leqRelation[i] \nu_i^{hv}$ on the deviating play $\rho'$. As $\nu_i^{hv} \leqRelation[i] \nu_i^*$ by definition of $\nu_i^*$ and by \eqref{eq:LowerBound}, we get $[\rho']_i \leqRelation[i] \nu_i^{hv} \leqRelation[i] \nu_i^* \leqRelation[i] [\rho]_i$. The deviating play is therefore not profitable for player~$i$, showing that $\tau'$ is an NE from $v_0$.

\medskip

To complete the proof, we show how to adapt the previous arguments to get an NE with finite-memory strategies, when the preference relations $\leqRelation[i]$ of the game are all prefix-independent. In this case, by \cref{lem:prefixInd}, we have $x \equivRelation[i] x_{\geq k}$ for all $x \in V^\omega$ and $k \geq 0$. Therefore, considering \eqref{eq:optimal} for both projections $\nu_i^{hv}$ and $\nu_i^v$, as $[h\pi]_i = [\pi]_i$ for the plays $h\pi, \pi$ used in \eqref{eq:optimal}, we have that $\nu_i^{hv} = \nu_i^v$. Since $\nu_i^v = val_i(v)$, a value in the initial game $\game$, the optimal strategies used in the construction of the NE $\tau'$, are taken among the optimal strategies $\sigma_{i}^v$, $\sigma_{-i}^v$ in $\game$, with $i \in \Players$ and $v \in V$ (which no longer depend on the histories $h$). Moreover, they are finite-memory by \cref{theorem:zero-sum-automatic-relation-determinacy}. Consequently, it is easy to see that the NE $\tau'$ is composed of finite-memory strategies.
\end{proof}


\section{Proofs of \texorpdfstring{\cref{prop:partial-preorder-to-total-preorder,theorem:existenceNE}}{Proposition~\ref{prop:partial-preorder-to-total-preorder} and Theorem~\ref{theorem:existenceNE}}}
\label{app:generalNE}

\embeddingpartialtotal*

\begin{proof}
    The equivalence classes of \equivRelation{} form a finite lattice that we can see as an acyclic graph (whose vertices are the equivalence classes and $(C,C')$ is an edge if and only if $C \leqRelationStrict C'$). Thus, by performing a topological sort of this graph, we can totally order the equivalence classes as the sequence $C_1,\dots,C_n$, such that $C_i \leqRelation C_j$ implies $i \leq j$ (the topological sort respects $\leqRelation$). Let $i \leq n$, and $\pi \in C_i$ be a lasso (by \cref{lem:lasso}). Therefore, we construct $\leqRelation'$ as follows:
    \[
    \leqRelation' ~ = ~ \leqRelation \cup \left( \bigcup_{1\leq i < j \leq n} C_i \times C_j \right).
    \]
    We clearly get an embedding of $\leqRelation$ into $\leqRelation'$ such that $\leqRelation'$ is $\omega$-recognizable (as each equivalence class $C_i$ is $\omega$-regular by $\omega$-recognizably of $\leqRelation$). The relation $\leqRelation'$ is also clearly a preorder as $\leqRelation$ is a preorder and by the topological sort. Let us note that $\leqRelation'$ is total by construction.
    Indeed, for any $x, y$, there exist $C_i$ and $C_j$ such that $x \in C_i$ and $y \in C_j$. Therefore, w.l.o.g., assuming $i \leq j$, we have $x \leqRelation' y$ because either $(x,y) \in C_i \times C_j$ if $i \neq j$, or $x \equivRelation y$ thus $x \leqRelation' y$ if $i=j$.

    The second claim is clearly verified by construction for $\Join$ in $\{\leqRelation,\geqRelation,\equivRelation\}$, as $\leqRelation'$ preserves $\leqRelation$. For $\leqRelationStrict$ and $\geqRelationStrict$, it is true by the same argument and the topological sort preserving the partial order of the equivalence classes.
\end{proof}


\existenceNE*

For the proof, we suppose that the preference relations $\leqRelation[i]$, $i \in \Players$, are not necessarily total. This means that when $x \not\leqRelationStrict[i] y$, then either $x \not\leqRelation[i] y$ or $y \leqRelation[i] x$.

\begin{proof}
    Given a game $\game = (\arena, (\leqRelation[i])_{i \in \Players})$, we construct $\game' = (\arena, (\leqRelation[i]')_{i \in \Players})$ with the same arena $\arena$ and, for each $i \in \Players$, the $\omega$-recognizable total preference relations $\leqRelation[i]'$ as defined in \cref{prop:partial-preorder-to-total-preorder}.
    By \cref{theorem:existenceNETotal}, as $\leqRelation[i]'$ are total, there exists an NE $\sigma = (\sigma_i)_{i \in \Players}$ in $\game'$ (that is composed of finite-memory strategies if each $\leqRelation[i]'$ is prefix-independent). This strategy profile $\sigma$ is also an NE in $\game$. Otherwise, we would get a profitable deviation $\outcomefrom{\sigma}{v_0} \leqRelationStrict[i] \pi$ for some player~$i$ in $\game$, thus the same profitable deviation $\outcomefrom{\sigma}{v_0} \leqRelationStrict[i]' \pi$ in $\game'$ by \cref{prop:partial-preorder-to-total-preorder}. This is a contradiction with $\sigma$ being an NE in $\game'$. Note that if each $\leqRelation[i]$ is prefix-independent, then $\leqRelation[i]'$ is also prefix-independent (by \cref{lem:prefixInd}). Therefore, in this case, $\sigma$ is an NE in $\game$ with finite-memory strategies $\sigma_i$.
\end{proof}


\section{Proof of \texorpdfstring{\cref{theorem:characterization}}{Theorem~\ref{theorem:characterization}}}
\label{app:carac}

\characterization*

\begin{proof}
Suppose first that $\rho$ is the outcome of an NE $(\tau_{i})_{i \in \Players}$. Assume by contradiction that for some vertex $v = \rho_n \in V_i$ belonging to $\rho$, we have $val_i(v) \not\leqRelation[i] [\rho]_{i}$, i.e., $[\rho]_{i} \leqRelationStrict[i] val_i(v)$ as $\leqRelation[i]$ is total. Let $\rho = h\rho_{\geq n}$, and let us consider an optimal strategy $\sigma_{i}^v$ for player~$i$. Player~$i$ can use this strategy to deviate at $v$ and thus produce a play $\pi$ starting at $v$ such that $val_i(v) \leqRelation[i] [\pi]_{i}$. As $\leqRelation[i]$ is prefix-independent, we have $\pi \equivRelation[i] h\pi$, and thus $[\rho]_i \leqRelationStrict[i] val_i(v) \leqRelation[i] [h\pi]_{i}$. Hence $h\pi$ is a deviation profitable for $i$, which is impossible since $\rho$ is an NE outcome.

Suppose now that $\rho$ is a play such that for all vertices $\rho_n$ of $\rho$, if $\rho_n \in V_i$, then $val_i(\rho_n) \leqRelation[i] [\rho]_{i}$. We define a strategy profile $\tau = (\tau_i)_{i \in \Players}$ such that it produces $\rho$, and if player~$i$ deviates at some vertex $v$ from $\rho$, then the coalition $-i$ plays an optimal strategy $\sigma_{-i}^v$ from $v$. Let us prove that $\tau$ is an NE. Suppose that player~$i$ deviates at $v = \rho_n$ from $\rho$ and consider the deviating play $\rho' = h\pi'$. By definition of $\tau$, we have $[\pi']_{i} \leqRelation[i] val_i(\rho_n)$. As $\leqRelation[i]$ is prefix-independent, $[\rho']_i = [h\pi']_i \leqRelation[i] val_i(\rho_n)$. By hypothesis, $val_i(\rho_n) \leqRelation[i] \rho$. Therefore, $[\rho']_i \leqRelation[i] [\rho]_i$, showing that $\rho'$ is not a profitable deviation. Hence, $\rho$ is an NE outcome.
\end{proof}

\end{document}
% This must be in the first 5 lines to tell arXiv to use pdfLaTeX, which is strongly recommended.
\pdfoutput=1
% In particular, the hyperref package requires pdfLaTeX in order to break URLs across lines.

\documentclass[11pt]{article}

% Change "review" to "final" to generate the final (sometimes called camera-ready) version.
% Change to "preprint" to generate a non-anonymous version with page numbers.
\usepackage[preprint]{acl}

% Standard package includes
\usepackage{times}
\usepackage{latexsym}

% For proper rendering and hyphenation of words containing Latin characters (including in bib files)
\usepackage[T1]{fontenc}
% For Vietnamese characters
% \usepackage[T5]{fontenc}
% See https://www.latex-project.org/help/documentation/encguide.pdf for other character sets

% This assumes your files are encoded as UTF8
\usepackage[utf8]{inputenc}

% This is not strictly necessary, and may be commented out,
% but it will improve the layout of the manuscript,
% and will typically save some space.
\usepackage{microtype}

% This is also not strictly necessary, and may be commented out.
% However, it will improve the aesthetics of text in
% the typewriter font.
\usepackage{inconsolata}

%Including images in your LaTeX document requires adding
%additional package(s)
\usepackage{graphicx}

% If the title and author information does not fit in the area allocated, uncomment the following
%
%\setlength\titlebox{<dim>}
%
% and set <dim> to something 5cm or larger.

\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{graphicx}
\usepackage{lipsum}
% \usepackage[caption=false]{subfig}
\usepackage{amsmath}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{listings}
\usepackage{multirow}
\usepackage{array}
\usepackage{subcaption}
\usepackage{xcolor}
\usepackage{soul}
\usepackage{colortbl}
\usepackage{tcolorbox}
\usepackage{placeins}
\usepackage{xspace}
\tcbuselibrary{breakable}
\input{utils/std_macros}

\renewcommand{\lstlistingname}{} % Removes the "Listing" label
\captionsetup[lstlisting]{labelformat=empty} % Removes the numbering
\lstset{
    basicstyle=\ttfamily\small,    % Use monospaced font and small size
    backgroundcolor=\color{gray!10}, % Light gray background
    frame=single,                  % Add a box around the code
    framerule=1pt,                 % Thickness of the box frame
    rulecolor=\color{black},       % Color of the box frame
    keywordstyle=\bfseries\color{blue}, % Style for keywords (optional)
    captionpos=b,                  % Caption position (b for bottom, t for top)
    breaklines=true,               % Automatically break long lines
    breakindent=0pt,
    numbers=none,                  % Line numbers on the left
    xleftmargin=1em,               % Left margin for the box
    xrightmargin=1em,              % Right margin for the box
}


\title{Mitigating Bias in RAG: Controlling the Embedder}


% \usepackage{draftwatermark}
% \SetWatermarkText{Under Submission at ARR}
% \SetWatermarkScale{.25} % scale of the watermark
% \SetWatermarkAngle{45} % angle of the watermark

\newcommand{\aspace}{\hspace{2em}}
\newcommand{\cmuMLD}{$^\heartsuit$}
\newcommand{\cmuLTI}{$^\clubsuit$}

\author{
Taeyoun Kim\cmuMLD \aspace
Jacob Mitchell Springer\cmuMLD \\ \textbf{Aditi Raghunathan}\cmuMLD \aspace \textbf{Maarten Sap}\cmuLTI\\
% \vspace{4pt}
\small{\cmuMLD Machine Learning Department, Carnegie Mellon University \; \cmuLTI Language Technologies Institute, Carnegie Mellon University}\\
\small{\texttt{\{taeyoun3, jspringe, raditi, msap2\}@cs.cmu.edu}}
}


\begin{document}
\maketitle
\begin{abstract}
In retrieval augmented generation (RAG) systems, each individual component---the LLM, embedder, and corpus---could introduce biases in the form of skews towards outputting certain perspectives or identities. In this work, we study the conflict between biases of each component and their relationship to the overall bias of the RAG system, which we call \emph{bias conflict}. Examining both gender and political biases as case studies, we show that bias conflict can be characterized through a linear relationship among components despite its complexity in 6 different LLMs. Through comprehensive fine-tuning experiments creating 120 differently biased embedders, we demonstrate how to control bias while maintaining utility and reveal the importance of \emph{reverse-biasing} the embedder to mitigate bias in the overall system. Additionally, we find that LLMs and tasks exhibit varying \emph{sensitivities} to the embedder bias, a crucial factor to consider for debiasing. Our results underscore that a fair RAG system can be better achieved by carefully controlling the bias of the embedder rather than increasing its fairness.
\end{abstract}

\input{sections/introduction}
\input{sections/settings}
\input{sections/bias}
\input{sections/debiasing}
\input{sections/corpus}
\input{sections/discussion}
\input{sections/limitations}
\input{sections/acknowledgements}

\bibliography{ref}

\clearpage
\appendix
\input{sections/appendix}


\end{document}

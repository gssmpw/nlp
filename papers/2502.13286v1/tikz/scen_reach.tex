\begin{tikzpicture}
	\definecolor{darkgray176}{RGB}{176,176,176}
	\definecolor{acinblue}{RGB}{0,102,153}
	\definecolor{acinyellow}{RGB}{252, 204, 71}
	\definecolor{acingreen}{RGB}{0,190,65}
	\definecolor{acinred}{RGB}{186,18,43}
	\definecolor{lightgray204}{RGB}{204,204,204}

	\node[inner sep=0pt, opacity=0.5] (qf) at (2.70,2.20)
	{\includegraphics[width=.189\textwidth]{data/scen1_qf_t.png}};
	\node[inner sep=0pt, opacity=0.5] (q0) at (2.70,2.20)
	{\includegraphics[width=.189\textwidth]{data/scen1_q0_t.png}};
	% \node[inner sep=0pt, opacity=0.5] (q0) at (3.75,1.90)
	% {\includegraphics[width=.13\textwidth]{inkscape/robots_scen0.eps}};
	%
	\begin{axis}[
			view={-160}{11},
			xlabel={$x$ / \si{\meter}},
			ylabel={$y$ / \si{\meter}},
			zlabel={$z$ / \si{\meter}},
			zmin=0,
			xmax=0.5,
			ymin=-0.5,
			axis equal,
			tick align=outside,
			tick pos=left,
			x grid style={darkgray176},
			y grid style={darkgray176},
			xtick style={color=black},
			ytick style={color=black},
			legend cell align={left},
			legend style={
					fill opacity=0.8,
					draw opacity=1,
					text opacity=1,
					draw=lightgray204,
				},
			legend entries ={$\vec{p}(t)$, $\pi_{\mathrm{p}}$}
		]
		\pgfplotstableread{data/p_traj_reach.txt}\ptraj;
		\pgfplotstableread{data/p_ref_reach.txt}\pref;
		\pgfplotstableread{data/p_via_reach.txt}\pvia;
		\pgfplotstableread{data/r_traj_reach.txt}\rtraj;
		\addplot3 [black, thick]
		table [
				x expr=\thisrowno{0},
				y expr=\thisrowno{1},
				z expr=\thisrowno{2}
			] {\ptraj};
		\addplot3 [black, thick, dashed]
		table [
				x expr=\thisrowno{0},
				y expr=\thisrowno{1},
				z expr=\thisrowno{2}
			] {\pref};
		\addplot3[
			only marks,
			mark=*,
			mark size=1pt, ]
		table [
				x expr=\thisrowno{0},
				y expr=\thisrowno{1},
				z expr=\thisrowno{2}
			] {\pvia};


		% Draw RGB-colored coordinate axes at every 10th point along the curve
		\pgfplotstablegetrowsof{\ptraj} % Get total number of points

		\pgfmathsetmacro{\totalrows}{\pgfplotsretval-1}

		% \foreach \i in {0, 10, 20, ..., \totalrows} {
		\foreach \i in {0, 10, 20, ..., \totalrows} {
				% Get the x, y, z coordinates at the i-th row
				\pgfplotstablegetelem{\i}{[index]0}\of\ptraj
				\let\xpos\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]1}\of\ptraj
				\let\ypos\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]2}\of\ptraj
				\let\zpos\pgfplotsretval

				% Get the orientation (local x, y, z axes) from curve_orientation.dat at row i
				% Local x-axis orientation
				\pgfplotstablegetelem{\i}{[index]0}\of\rtraj
				\let\xx\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]1}\of\rtraj
				\let\xy\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]2}\of\rtraj
				\let\xz\pgfplotsretval

				% Local y-axis orientation
				\pgfplotstablegetelem{\i}{[index]3}\of\rtraj
				\let\yx\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]4}\of\rtraj
				\let\yy\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]5}\of\rtraj
				\let\yz\pgfplotsretval

				% Local z-axis orientation
				\pgfplotstablegetelem{\i}{[index]6}\of\rtraj
				\let\zx\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]7}\of\rtraj
				\let\zy\pgfplotsretval
				\pgfplotstablegetelem{\i}{[index]8}\of\rtraj
				\let\zz\pgfplotsretval

				% Draw local x-axis (red) using the orientation data
				\addplot3[red, thick] coordinates {
						({\xpos}, {\ypos}, {\zpos})
						({\xpos + \xx * 0.15}, {\ypos + \xy * 0.15}, {\zpos + \xz * 0.15})
					};

				% Draw local y-axis (green) using the orientation data
				\addplot3[green, thick] coordinates {
						({\xpos}, {\ypos}, {\zpos})
						({\xpos + \yx * 0.15}, {\ypos + \yy * 0.15}, {\zpos + \yz * 0.15})
					};

				% Draw local z-axis (blue) using the orientation data
				\addplot3[blue, thick] coordinates {
						({\xpos}, {\ypos}, {\zpos})
						({\xpos + \zx * 0.15}, {\ypos + \zy * 0.15}, {\zpos + \zz * 0.15})
					};
			}
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(-0.7,-0.20000000000000004,0.3) (-0.7,-1.5,0.5) (-0.7,-1.4999999999999998,0.29999999999999993)
				(-0.7,-0.20000000000000004,0.3) (-0.7,-1.5,0.5) (-0.7,-0.20000000000000007,0.5)
				(-0.10000000000000003,-0.20000000000000007,0.5) (-0.7,-0.20000000000000004,0.3) (-0.7,-0.20000000000000007,0.5)
				(-0.10000000000000003,-0.20000000000000007,0.5) (-0.7,-0.20000000000000004,0.3) (-0.10000000000000002,-0.20000000000000004,0.3)
				(-0.10000000000000003,-0.20000000000000007,0.5) (-0.7,-1.5,0.5) (-0.7,-0.20000000000000007,0.5)
				(-0.10000000000000003,-0.20000000000000007,0.5) (-0.7,-1.5,0.5) (-0.10000000000000003,-1.5,0.5)
				(-0.10000000000000002,-1.5,0.3) (-0.7,-0.20000000000000004,0.3) (-0.7,-1.4999999999999998,0.29999999999999993)
				(-0.10000000000000002,-1.5,0.3) (-0.7,-0.20000000000000004,0.3) (-0.10000000000000002,-0.20000000000000004,0.3)
				(-0.10000000000000002,-1.5,0.3) (-0.10000000000000003,-0.20000000000000007,0.5) (-0.10000000000000002,-0.20000000000000004,0.3)
				(-0.10000000000000002,-1.5,0.3) (-0.10000000000000003,-0.20000000000000007,0.5) (-0.10000000000000003,-1.5,0.5)
				(-0.10000000000000002,-1.5,0.3) (-0.7,-1.5,0.5) (-0.7,-1.4999999999999998,0.29999999999999993)
				(-0.10000000000000002,-1.5,0.3) (-0.7,-1.5,0.5) (-0.10000000000000003,-1.5,0.5)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(-0.10000000000000003,-1.5,0.7) (-0.7,-1.5,0.7) (-0.7,-0.20000000000000007,0.7)
				(-0.10000000000000003,-1.5,0.7) (-0.10000000000000003,-0.20000000000000007,0.7) (-0.7,-0.20000000000000007,0.7)
				(-0.10000000000000003,-0.20000000000000007,0.8999999999999999) (-0.10000000000000003,-0.20000000000000007,0.7) (-0.7,-0.20000000000000007,0.7)
				(-0.10000000000000003,-0.20000000000000007,0.8999999999999999) (-0.7,-0.20000000000000007,0.8999999999999999) (-0.7,-0.20000000000000007,0.7)
				(-0.10000000000000003,-0.20000000000000007,0.8999999999999999) (-0.10000000000000003,-1.5,0.7) (-0.10000000000000003,-0.20000000000000007,0.7)
				(-0.10000000000000003,-0.20000000000000007,0.8999999999999999) (-0.10000000000000003,-1.5,0.7) (-0.10000000000000003,-1.5,0.8999999999999999)
				(-0.7,-1.5,0.8999999999999999) (-0.7,-1.5,0.7) (-0.7,-0.20000000000000007,0.7)
				(-0.7,-1.5,0.8999999999999999) (-0.7,-0.20000000000000007,0.8999999999999999) (-0.7,-0.20000000000000007,0.7)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-1.5,0.7) (-0.7,-1.5,0.7)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-1.5,0.7) (-0.10000000000000003,-1.5,0.8999999999999999)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-0.20000000000000007,0.8999999999999999) (-0.7,-0.20000000000000007,0.8999999999999999)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-0.20000000000000007,0.8999999999999999) (-0.10000000000000003,-1.5,0.8999999999999999)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(-0.5,-1.4999999999999998,0.29999999999999993) (-0.7,-1.5000000000000002,0.30000000000000004) (-0.7,-0.20000000000000007,0.30000000000000004)
				(-0.5,-1.4999999999999998,0.29999999999999993) (-0.5,-0.20000000000000004,0.3) (-0.7,-0.20000000000000007,0.30000000000000004)
				(-0.5,-1.4999999999999998,0.29999999999999993) (-0.5,-1.5,0.9) (-0.5,-0.20000000000000004,0.9)
				(-0.5,-1.4999999999999998,0.29999999999999993) (-0.5,-0.20000000000000004,0.9) (-0.5,-0.20000000000000004,0.3)
				(-0.7,-0.20000000000000007,0.8999999999999999) (-0.5,-0.20000000000000004,0.9) (-0.5,-0.20000000000000004,0.3)
				(-0.7,-0.20000000000000007,0.8999999999999999) (-0.5,-0.20000000000000004,0.3) (-0.7,-0.20000000000000007,0.30000000000000004)
				(-0.7,-1.5,0.8999999999999999) (-0.5,-1.4999999999999998,0.29999999999999993) (-0.5,-1.5,0.9)
				(-0.7,-1.5,0.8999999999999999) (-0.5,-1.4999999999999998,0.29999999999999993) (-0.7,-1.5000000000000002,0.30000000000000004)
				(-0.7,-1.5,0.8999999999999999) (-0.7,-1.5000000000000002,0.30000000000000004) (-0.7,-0.20000000000000007,0.30000000000000004)
				(-0.7,-1.5,0.8999999999999999) (-0.7,-0.20000000000000007,0.8999999999999999) (-0.7,-0.20000000000000007,0.30000000000000004)
				(-0.7,-1.5,0.8999999999999999) (-0.5,-1.5,0.9) (-0.5,-0.20000000000000004,0.9)
				(-0.7,-1.5,0.8999999999999999) (-0.7,-0.20000000000000007,0.8999999999999999) (-0.5,-0.20000000000000004,0.9)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(-0.10000000000000002,-1.5,0.3) (-0.30000000000000004,-1.5,0.30000000000000004) (-0.30000000000000004,-0.20000000000000007,0.30000000000000004)
				(-0.10000000000000002,-1.5,0.3) (-0.10000000000000002,-0.20000000000000004,0.3) (-0.30000000000000004,-0.20000000000000007,0.30000000000000004)
				(-0.30000000000000004,-0.20000000000000007,0.8999999999999999) (-0.10000000000000002,-0.20000000000000004,0.3) (-0.30000000000000004,-0.20000000000000007,0.300000000000000
				04)
				(-0.30000000000000004,-0.20000000000000007,0.8999999999999999) (-0.10000000000000002,-0.20000000000000004,0.9) (-0.10000000000000002,-0.20000000000000004,0.3)
				(-0.10000000000000002,-1.5,0.9) (-0.10000000000000002,-1.5,0.3) (-0.10000000000000002,-0.20000000000000004,0.3)
				(-0.10000000000000002,-1.5,0.9) (-0.10000000000000002,-0.20000000000000004,0.9) (-0.10000000000000002,-0.20000000000000004,0.3)
				(-0.30000000000000004,-1.5,0.8999999999999999) (-0.30000000000000004,-1.5,0.30000000000000004) (-0.30000000000000004,-0.20000000000000007,0.30000000000000004)
				(-0.30000000000000004,-1.5,0.8999999999999999) (-0.30000000000000004,-0.20000000000000007,0.8999999999999999) (-0.30000000000000004,-0.20000000000000007,0.3000000000000000
				4)
				(-0.30000000000000004,-1.5,0.8999999999999999) (-0.10000000000000002,-1.5,0.3) (-0.30000000000000004,-1.5,0.30000000000000004)
				(-0.30000000000000004,-1.5,0.8999999999999999) (-0.10000000000000002,-1.5,0.9) (-0.10000000000000002,-1.5,0.3)
				(-0.30000000000000004,-1.5,0.8999999999999999) (-0.30000000000000004,-0.20000000000000007,0.8999999999999999) (-0.10000000000000002,-0.20000000000000004,0.9)
				(-0.30000000000000004,-1.5,0.8999999999999999) (-0.10000000000000002,-1.5,0.9) (-0.10000000000000002,-0.20000000000000004,0.9)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(-0.10000000000000003,-1.5,0.3) (-0.7000000000000001,-1.5,0.3) (-0.7000000000000001,-1.3,0.3)
				(-0.10000000000000003,-1.5,0.3) (-0.10000000000000003,-1.3,0.3) (-0.7000000000000001,-1.3,0.3)
				(-0.10000000000000003,-1.3,0.8999999999999999) (-0.10000000000000003,-1.3,0.3) (-0.7000000000000001,-1.3,0.3)
				(-0.10000000000000003,-1.3,0.8999999999999999) (-0.7,-1.3,0.8999999999999999) (-0.7000000000000001,-1.3,0.3)
				(-0.10000000000000003,-1.3,0.8999999999999999) (-0.10000000000000003,-1.5,0.3) (-0.10000000000000003,-1.3,0.3)
				(-0.10000000000000003,-1.3,0.8999999999999999) (-0.10000000000000003,-1.5,0.3) (-0.10000000000000003,-1.5,0.8999999999999999)
				(-0.7,-1.5,0.8999999999999999) (-0.7000000000000001,-1.5,0.3) (-0.7000000000000001,-1.3,0.3)
				(-0.7,-1.5,0.8999999999999999) (-0.7,-1.3,0.8999999999999999) (-0.7000000000000001,-1.3,0.3)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-1.5,0.3) (-0.7000000000000001,-1.5,0.3)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-1.5,0.3) (-0.10000000000000003,-1.5,0.8999999999999999)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-1.3,0.8999999999999999) (-0.7,-1.3,0.8999999999999999)
				(-0.7,-1.5,0.8999999999999999) (-0.10000000000000003,-1.3,0.8999999999999999) (-0.10000000000000003,-1.5,0.8999999999999999)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinblue] coordinates
			{
				(1.0000000000000002,1.0,0.0) (-0.04999958136601555,1.0,0.0) (-0.04999958136601555,-1.0,0.0)
				(1.0000000000000002,1.0,0.0) (1.0000000000000002,-1.0,0.0) (-0.04999958136601555,-1.0,0.0)
				(1.0000000000000002,1.0,0.0) (1.0000000000000002,-1.0,1.2) (1.0000000000000002,1.0,1.2)
				(1.0000000000000002,1.0,0.0) (1.0000000000000002,-1.0,1.2) (1.0000000000000002,-1.0,0.0)
				(-0.04999958136601555,1.0,1.2) (1.0000000000000002,1.0,0.0) (1.0000000000000002,1.0,1.2)
				(-0.04999958136601555,1.0,1.2) (1.0000000000000002,1.0,0.0) (-0.04999958136601555,1.0,0.0)
				(-0.04999958136601555,-1.0,1.2) (1.0000000000000002,-1.0,1.2) (1.0000000000000002,-1.0,0.0)
				(-0.04999958136601555,-1.0,1.2) (1.0000000000000002,-1.0,0.0) (-0.04999958136601555,-1.0,0.0)
				(-0.04999958136601555,-1.0,1.2) (-0.04999958136601555,1.0,0.0) (-0.04999958136601555,-1.0,0.0)
				(-0.04999958136601555,-1.0,1.2) (-0.04999958136601555,1.0,1.2) (-0.04999958136601555,1.0,0.0)
				(-0.04999958136601555,-1.0,1.2) (1.0000000000000002,-1.0,1.2) (1.0000000000000002,1.0,1.2)
				(-0.04999958136601555,-1.0,1.2) (-0.04999958136601555,1.0,1.2) (1.0000000000000002,1.0,1.2)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinblue] coordinates
			{
				(1.0,1.0000000000000002,0.0) (1.0,-0.14998972009381495,-0.0) (-1.0,-0.14998972009381495,0.0)
				(1.0,1.0000000000000002,0.0) (-1.0,1.0000000000000002,0.0) (-1.0,-0.14998972009381495,0.0)
				(1.0,1.0000000000000002,0.0) (-1.0,1.0000000000000002,1.2) (1.0,1.0000000000000002,1.2)
				(1.0,1.0000000000000002,0.0) (-1.0,1.0000000000000002,1.2) (-1.0,1.0000000000000002,0.0)
				(1.0,-0.14998972009381495,1.2) (1.0,1.0000000000000002,0.0) (1.0,1.0000000000000002,1.2)
				(1.0,-0.14998972009381495,1.2) (1.0,1.0000000000000002,0.0) (1.0,-0.14998972009381495,-0.0)
				(-1.0,-0.14998972009381495,1.2) (-1.0,1.0000000000000002,1.2) (-1.0,1.0000000000000002,0.0)
				(-1.0,-0.14998972009381495,1.2) (-1.0,1.0000000000000002,0.0) (-1.0,-0.14998972009381495,0.0)
				(-1.0,-0.14998972009381495,1.2) (1.0,-0.14998972009381495,-0.0) (-1.0,-0.14998972009381495,0.0)
				(-1.0,-0.14998972009381495,1.2) (1.0,-0.14998972009381495,1.2) (1.0,-0.14998972009381495,-0.0)
				(-1.0,-0.14998972009381495,1.2) (-1.0,1.0000000000000002,1.2) (1.0,1.0000000000000002,1.2)
				(-1.0,-0.14998972009381495,1.2) (1.0,-0.14998972009381495,1.2) (1.0,1.0000000000000002,1.2)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinblue] coordinates
			{
				(-0.3500004505850865,-1.0,0.5500004505850865) (-0.44999954941491344,-1.0,0.5500004505850865) (-0.44999954941491344,1.0,0.5500004505850865)
				(-0.3500004505850865,-1.0,0.5500004505850865) (-0.3500004505850865,1.0,0.5500004505850865) (-0.44999954941491344,1.0,0.5500004505850865)
				(-0.3500004505850865,1.0,0.6499995494149134) (-0.3500004505850865,1.0,0.5500004505850865) (-0.44999954941491344,1.0,0.5500004505850865)
				(-0.3500004505850865,1.0,0.6499995494149134) (-0.44999954941491344,1.0,0.6499995494149134) (-0.44999954941491344,1.0,0.5500004505850865)
				(-0.3500004505850865,1.0,0.6499995494149134) (-0.3500004505850865,-1.0,0.5500004505850865) (-0.3500004505850865,1.0,0.5500004505850865)
				(-0.3500004505850865,1.0,0.6499995494149134) (-0.3500004505850865,-1.0,0.5500004505850865) (-0.3500004505850865,-1.0,0.6499995494149134)
				(-0.44999954941491344,-1.0,0.6499995494149134) (-0.44999954941491344,-1.0,0.5500004505850865) (-0.44999954941491344,1.0,0.5500004505850865)
				(-0.44999954941491344,-1.0,0.6499995494149134) (-0.44999954941491344,1.0,0.6499995494149134) (-0.44999954941491344,1.0,0.5500004505850865)
				(-0.44999954941491344,-1.0,0.6499995494149134) (-0.3500004505850865,-1.0,0.5500004505850865) (-0.44999954941491344,-1.0,0.5500004505850865)
				(-0.44999954941491344,-1.0,0.6499995494149134) (-0.3500004505850865,-1.0,0.5500004505850865) (-0.3500004505850865,-1.0,0.6499995494149134)
				(-0.44999954941491344,-1.0,0.6499995494149134) (-0.3500004505850865,1.0,0.6499995494149134) (-0.44999954941491344,1.0,0.6499995494149134)
				(-0.44999954941491344,-1.0,0.6499995494149134) (-0.3500004505850865,1.0,0.6499995494149134) (-0.3500004505850865,-1.0,0.6499995494149134)
			};

		\addplot3[
			only marks,
			mark=*,
			mark size=1pt,
		] coordinates {(0, 0, 0)};
	\end{axis}
\end{tikzpicture}

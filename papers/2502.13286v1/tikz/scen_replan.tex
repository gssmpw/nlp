\begin{tikzpicture}
	\definecolor{darkgray176}{RGB}{176,176,176}
	\definecolor{acinblue}{RGB}{0,102,153}
	\definecolor{acinyellow}{RGB}{252, 204, 71}
	\definecolor{acingreen}{RGB}{0,190,65}
	\definecolor{acinred}{RGB}{186,18,43}
	\definecolor{lightgray204}{RGB}{204,204,204}

	\node[inner sep=0pt, opacity=0.5] (qf) at (3.7,2.5)
	{\includegraphics[width=.325\textwidth]{data/replan_qf_t.png}};
	\node[inner sep=0pt, opacity=0.5] (q1) at (3.7,2.5)
	{\includegraphics[width=.325\textwidth]{data/replan_q1_t.png}};
	\node[inner sep=0pt, opacity=0.5] (q2) at (3.7,2.5)
	{\includegraphics[width=.325\textwidth]{data/replan_q2_t.png}};
	\node[inner sep=0pt, opacity=0.5] (q0) at (3.7,2.5)
	{\includegraphics[width=.325\textwidth]{data/replan_q0_t.png}};

	\begin{axis}[
			view={-30}{11},
			xlabel={$x$ / \si{\meter}},
			ylabel={$y$ / \si{\meter}},
			zlabel={$z$ / \si{\meter}},
			zmin=0,
			zmax=0.8,
			xmax=1.0,
			ymin=-0.5,
			ymax=0.5,
			axis equal,
			tick align=outside,
			tick pos=left,
			x grid style={darkgray176},
			y grid style={darkgray176},
			xtick style={color=black},
			ytick style={color=black},
			legend cell align={left},
			legend style={
					fill opacity=0.8,
					draw opacity=1,
					text opacity=1,
					draw=lightgray204,
					at={(0.03,1.0)},
					anchor=west,
				},
			legend entries ={BoundPlanner, MPC+RRT},
		]
		\pgfplotstableread{data/p_traj_replan.txt}\ptraj;
		\pgfplotstableread{data/p_ref_replan.txt}\pref;
		\pgfplotstableread{data/p_via_replan.txt}\pvia;
		\pgfplotstableread{data/r_traj_replan.txt}\rtraj;
		\pgfplotstableread{data/p_tracking_scen2_0.txt}\ptrack;
		\addplot3 [black, thick]
		table [
				x expr=\thisrowno{0},
				y expr=\thisrowno{1},
				z expr=\thisrowno{2}
			] {\ptraj};
		% \addplot3 [black, thick, dashed]
		% table [
		% 		x expr=\thisrowno{0},
		% 		y expr=\thisrowno{1},
		% 		z expr=\thisrowno{2}
		% 	] {\pref};
		% \addplot3[
		% 	only marks,
		% 	mark=*,
		% 	mark size=1pt, ]
		% table [
		% 		x expr=\thisrowno{0},
		% 		y expr=\thisrowno{1},
		% 		z expr=\thisrowno{2}
		% 	] {\pvia};
		\addplot3 [acinblue, thick]
		table [
				x expr=\thisrowno{0},
				y expr=\thisrowno{1},
				z expr=\thisrowno{2}
			] {\ptrack};


		% Draw RGB-colored coordinate axes at every 10th point along the curve
		\pgfplotstablegetrowsof{\ptraj} % Get total number of points

		\pgfmathsetmacro{\totalrows}{\pgfplotsretval-1}

		% \foreach \i in {0, 15, 30, ..., \totalrows} {
		% 		% Get the x, y, z coordinates at the i-th row
		% 		\pgfplotstablegetelem{\i}{[index]0}\of\ptraj
		% 		\let\xpos\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]1}\of\ptraj
		% 		\let\ypos\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]2}\of\ptraj
		% 		\let\zpos\pgfplotsretval
		%
		% 		% Get the orientation (local x, y, z axes) from curve_orientation.dat at row i
		% 		% Local x-axis orientation
		% 		\pgfplotstablegetelem{\i}{[index]0}\of\rtraj
		% 		\let\xx\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]1}\of\rtraj
		% 		\let\xy\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]2}\of\rtraj
		% 		\let\xz\pgfplotsretval
		%
		% 		% Local y-axis orientation
		% 		\pgfplotstablegetelem{\i}{[index]3}\of\rtraj
		% 		\let\yx\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]4}\of\rtraj
		% 		\let\yy\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]5}\of\rtraj
		% 		\let\yz\pgfplotsretval
		%
		% 		% Local z-axis orientation
		% 		\pgfplotstablegetelem{\i}{[index]6}\of\rtraj
		% 		\let\zx\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]7}\of\rtraj
		% 		\let\zy\pgfplotsretval
		% 		\pgfplotstablegetelem{\i}{[index]8}\of\rtraj
		% 		\let\zz\pgfplotsretval
		%
		% 		% Draw local x-axis (red) using the orientation data
		% 		\addplot3[red, thick] coordinates {
		% 				({\xpos}, {\ypos}, {\zpos})
		% 				({\xpos + \xx * 0.1}, {\ypos + \xy * 0.1}, {\zpos + \xz * 0.1})
		% 			};
		%
		% 		% Draw local y-axis (green) using the orientation data
		% 		\addplot3[green, thick] coordinates {
		% 				({\xpos}, {\ypos}, {\zpos})
		% 				({\xpos + \yx * 0.1}, {\ypos + \yy * 0.1}, {\zpos + \yz * 0.1})
		% 			};
		%
		% 		% Draw local z-axis (blue) using the orientation data
		% 		\addplot3[blue, thick] coordinates {
		% 				({\xpos}, {\ypos}, {\zpos})
		% 				({\xpos + \zx * 0.1}, {\ypos + \zy * 0.1}, {\zpos + \zz * 0.1})
		% 			};
		% 	}
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(1.0,-0.4,0.0) (0.6,-0.4,0.0) (0.6,0.4,0.0)
				(1.0,-0.4,0.0) (0.6,0.4,0.0) (1.0,0.4,0.0)
				(0.6,0.4,0.22000000000000003) (0.6,-0.4,0.0) (0.6,0.4,0.0)
				(0.6,0.4,0.22000000000000003) (0.6,-0.4,0.0) (0.6,-0.4,0.22000000000000003)
				(1.0,-0.4,0.22000000000000003) (1.0,-0.4,0.0) (0.6,-0.4,0.0)
				(1.0,-0.4,0.22000000000000003) (0.6,-0.4,0.0) (0.6,-0.4,0.22000000000000003)
				(1.0,0.4,0.22000000000000003) (0.6,0.4,0.0) (1.0,0.4,0.0)
				(1.0,0.4,0.22000000000000003) (0.6,0.4,0.22000000000000003) (0.6,0.4,0.0)
				(1.0,0.4,0.22000000000000003) (1.0,-0.4,0.0) (1.0,0.4,0.0)
				(1.0,0.4,0.22000000000000003) (1.0,-0.4,0.22000000000000003) (1.0,-0.4,0.0)
				(1.0,0.4,0.22000000000000003) (0.6,0.4,0.22000000000000003) (0.6,-0.4,0.22000000000000003)
				(1.0,0.4,0.22000000000000003) (1.0,-0.4,0.22000000000000003) (0.6,-0.4,0.22000000000000003)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(0.5999999999999999,0.4,0.45) (0.6,-0.4,0.45) (0.6,-0.4,0.4699999999999999)
				(0.5999999999999999,0.4,0.45) (0.6,-0.4,0.4699999999999999) (0.5999999999999999,0.4,0.4699999999999999)
				(1.0,-0.4,0.4699999999999999) (0.6,-0.4,0.45) (0.6,-0.4,0.4699999999999999)
				(1.0,-0.4,0.4699999999999999) (0.6,-0.4,0.45) (1.0,-0.4,0.45)
				(1.0,0.4,0.45) (0.5999999999999999,0.4,0.45) (0.6,-0.4,0.45)
				(1.0,0.4,0.45) (0.6,-0.4,0.45) (1.0,-0.4,0.45)
				(1.0,0.4,0.4699999999999999) (0.6,-0.4,0.4699999999999999) (0.5999999999999999,0.4,0.4699999999999999)
				(1.0,0.4,0.4699999999999999) (1.0,-0.4,0.4699999999999999) (0.6,-0.4,0.4699999999999999)
				(1.0,0.4,0.4699999999999999) (0.5999999999999999,0.4,0.45) (0.5999999999999999,0.4,0.4699999999999999)
				(1.0,0.4,0.4699999999999999) (1.0,0.4,0.45) (0.5999999999999999,0.4,0.45)
				(1.0,0.4,0.4699999999999999) (1.0,-0.4,0.4699999999999999) (1.0,-0.4,0.45)
				(1.0,0.4,0.4699999999999999) (1.0,0.4,0.45) (1.0,-0.4,0.45)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(0.6,0.4000000000000001,0.7000000000000001) (0.6,-0.4000000000000001,0.7000000000000001) (0.6,-0.4000000000000001,0.72)
				(0.6,0.4000000000000001,0.7000000000000001) (0.6,-0.4000000000000001,0.72) (0.6,0.4000000000000001,0.72)
				(1.0,-0.4000000000000001,0.72) (0.6,-0.4000000000000001,0.7000000000000001) (0.6,-0.4000000000000001,0.72)
				(1.0,-0.4000000000000001,0.72) (0.6,-0.4000000000000001,0.7000000000000001) (1.0,-0.4000000000000001,0.7000000000000001)
				(1.0,0.4000000000000001,0.7000000000000001) (0.6,0.4000000000000001,0.7000000000000001) (0.6,-0.4000000000000001,0.7000000000000001)
				(1.0,0.4000000000000001,0.7000000000000001) (0.6,-0.4000000000000001,0.7000000000000001) (1.0,-0.4000000000000001,0.7000000000000001)
				(1.0,0.4000000000000001,0.72) (0.6,-0.4000000000000001,0.72) (0.6,0.4000000000000001,0.72)
				(1.0,0.4000000000000001,0.72) (1.0,-0.4000000000000001,0.72) (0.6,-0.4000000000000001,0.72)
				(1.0,0.4000000000000001,0.72) (0.6,0.4000000000000001,0.7000000000000001) (0.6,0.4000000000000001,0.72)
				(1.0,0.4000000000000001,0.72) (1.0,0.4000000000000001,0.7000000000000001) (0.6,0.4000000000000001,0.7000000000000001)
				(1.0,0.4000000000000001,0.72) (1.0,-0.4000000000000001,0.72) (1.0,-0.4000000000000001,0.7000000000000001)
				(1.0,0.4000000000000001,0.72) (1.0,0.4000000000000001,0.7000000000000001) (1.0,-0.4000000000000001,0.7000000000000001)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(1.0,-0.42,0.72) (0.6,-0.42,-0.0) (0.6,-0.42,0.72)
				(1.0,-0.42,0.72) (0.6,-0.42,-0.0) (1.0,-0.42,0.0)
				(0.6,-0.4000000000000001,-0.0) (0.6,-0.42,-0.0) (0.6,-0.42,0.72)
				(0.6,-0.4000000000000001,-0.0) (0.6,-0.42,0.72) (0.6,-0.4000000000000001,0.72)
				(1.0,-0.4000000000000001,0.72) (1.0,-0.42,0.72) (0.6,-0.42,0.72)
				(1.0,-0.4000000000000001,0.72) (0.6,-0.42,0.72) (0.6,-0.4000000000000001,0.72)
				(1.0,-0.4000000000000001,0.0) (0.6,-0.42,-0.0) (1.0,-0.42,0.0)
				(1.0,-0.4000000000000001,0.0) (0.6,-0.4000000000000001,-0.0) (0.6,-0.42,-0.0)
				(1.0,-0.4000000000000001,0.0) (1.0,-0.42,0.72) (1.0,-0.42,0.0)
				(1.0,-0.4000000000000001,0.0) (1.0,-0.4000000000000001,0.72) (1.0,-0.42,0.72)
				(1.0,-0.4000000000000001,0.0) (0.6,-0.4000000000000001,-0.0) (0.6,-0.4000000000000001,0.72)
				(1.0,-0.4000000000000001,0.0) (1.0,-0.4000000000000001,0.72) (0.6,-0.4000000000000001,0.72)
			};
		\addplot3 [patch,patch type=triangle, patch refines=0, shader=flat, opacity=0.15, color=acinred] coordinates
			{
				(1.0,0.42,0.72) (0.6,0.42,0.0) (0.6,0.42,0.72)
				(1.0,0.42,0.72) (0.6,0.42,0.0) (1.0,0.42,0.0)
				(0.6,0.4000000000000001,0.0) (0.6,0.42,0.0) (0.6,0.42,0.72)
				(0.6,0.4000000000000001,0.0) (0.6,0.42,0.72) (0.6,0.4000000000000001,0.72)
				(1.0,0.4000000000000001,0.72) (1.0,0.42,0.72) (0.6,0.42,0.72)
				(1.0,0.4000000000000001,0.72) (0.6,0.42,0.72) (0.6,0.4000000000000001,0.72)
				(1.0,0.4000000000000001,0.0) (0.6,0.42,0.0) (1.0,0.42,0.0)
				(1.0,0.4000000000000001,0.0) (0.6,0.4000000000000001,0.0) (0.6,0.42,0.0)
				(1.0,0.4000000000000001,0.0) (1.0,0.42,0.72) (1.0,0.42,0.0)
				(1.0,0.4000000000000001,0.0) (1.0,0.4000000000000001,0.72) (1.0,0.42,0.72)
				(1.0,0.4000000000000001,0.0) (0.6,0.4000000000000001,0.0) (0.6,0.4000000000000001,0.72)
				(1.0,0.4000000000000001,0.0) (1.0,0.4000000000000001,0.72) (0.6,0.4000000000000001,0.72)
			};


		% \addplot3[
		% 	only marks,
		% 	mark=*,
		% 	mark size=1pt,
		% ] coordinates {(0, 0, 0)};
		\addplot3[
			only marks,
			mark=*,
			mark size=1pt,
		] coordinates {
				(0.39361971, 0.0, 0.77523067)
				(0.85, -0.1, 0.3)
				(0.8, 0.25, 0.55)
				(0.8, -0.25, 0.8)
			};
		\draw (axis cs:0.29,0.1,0.74) node[
			scale=1.0,
			anchor=base west,
			text=black,
			rotate=0.0
		]{\bfseries $\vec{p}_\mathrm{0}$};
		\draw (axis cs:0.85,-0.1,0.3) node[
			scale=1.0,
			anchor=base west,
			text=black,
			rotate=0.0
		]{\bfseries $\vec{p}_\mathrm{f, 3}$};
		\draw (axis cs:0.85,-0.15,0.75) node[
			scale=1.0,
			anchor=base west,
			text=black,
			rotate=0.0
		]{\bfseries $\vec{p}_\mathrm{f, 2}$};
		\draw (axis cs:0.85,0.35,0.55) node[
			scale=1.0,
			anchor=base west,
			text=black,
			rotate=0.0
		]{\bfseries $\vec{p}_\mathrm{f, 1}$};
	\end{axis}
	% \node[inner sep=0pt, opacity=0.5] (qf) at (2.70,2.20)
	% {\includegraphics[width=.189\textwidth]{data/scen1_qf_t.png}};
	% \node[inner sep=0pt, opacity=0.5] (q0) at (2.70,2.20)
	% {\includegraphics[width=.189\textwidth]{data/scen1_q0_t.png}};
	% \node[inner sep=0pt, opacity=0.5] (q0) at (3.75,1.90)
	% {\includegraphics[width=.13\textwidth]{inkscape/robots_scen0.eps}};
\end{tikzpicture}

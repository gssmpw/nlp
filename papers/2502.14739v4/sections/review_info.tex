\newtcolorbox[auto counter, number within=section]{purposebox}[2][]{%
  colback=white, 
  colframe=blue!50!black, 
  width=\textwidth,
  arc=2mm, 
  boxrule=0.5mm, 
  title={\normalsize\faCompass\hspace{0.5em}#2},
  breakable, 
  fonttitle=\bfseries\Large, 
  fontupper=\small
  #1
}

\newtcolorbox[auto counter, number within=section]{promptbox}[2][]{%
  colback=white, 
  colframe=purple!70!blue!80!black,  
  width=\textwidth,
  arc=2mm, 
  boxrule=0.5mm, 
  title={\normalsize\faInfoCircle\hspace{0.5em}#2},
  breakable,
  fonttitle=\bfseries\Large, 
  fontupper=\small
  #1
}
\section{Data Filtering and Manual Review Process Details}

In the data processing workflow, we employ a three-stage filtering and review mechanism to ensure data quality:

\begin{enumerate}
    \item \textbf{Rule-Based Pre-Check~\autoref{Appendix: Rule-Based Check}}: Data undergoes initial screening based on predefined code rules, quickly identifying and eliminating clearly invalid data points, thereby enhancing efficiency and reducing subsequent workload.
    
    \item \textbf{LLM-Based Quality Inspection~\autoref{Appendix: LLM-Based Screening}}: Large language models are utilized to perform in-depth quality assessments of the data, identifying potential errors and inconsistencies, thereby improving the accuracy and completeness of the data.
    
    \item \textbf{Manual Quality Review~\autoref{Appendix: Manual Quality Review}}: Experienced data analysts conduct a final review to ensure the high quality and usability of the data, correcting potential misjudgments and incorporating domain knowledge for a comprehensive evaluation.
\end{enumerate}

\subsection{Rule-Based Pre-Check}\label{Appendix: Rule-Based Check}

\input{table/review_info/rule_check}

\autoref{tab: rule} presents the rules for data filtering and pre-checking, including text normalization, validation of the consistency of questions and options, integrity checks of answers, and requirements for the completeness of metadata such as difficulty, discipline, and others.

\newpage
\subsection{LLM-Based Quality Inspection}

This section outlines the quality inspection process of LLMs in data processing, including:
\textbf{1) Validity Check},
\textbf{2) Negative and Extreme Inquiry Detection}, 
\textbf{3) Multimodal Exclusion},  
\textbf{4) Field Relevance Evaluation},  
\textbf{5) Solvability Assessment}.


\label{Appendix: LLM-Based Screening}
\subsubsection{Validity Check}

\begin{purposebox}{Purpose}
\begin{itemize}
    \item Validate the question's correctness, ensuring it follows the standards, can be answered with the given text, and the options are complete and reasonable.
\end{itemize}
\end{purposebox}

\begin{promptbox}{Prompt}
You are a master of format checking, skilled at verifying whether multiple-choice questions in JSON format conform to the specifications.

\vspace{0.5em}  
You will receive an input in JSON format containing a question, options, and the answer, for example:

\begin{verbatim}
    {
    question: "Question content",
    options: ['Option content', 'Option content', 
              'Option content', 'Option content'],
    answer: "Answer content"
    }
\end{verbatim}

\vspace{0.5em}  
Please determine whether the text in the JSON represents a complete and solvable multiple-choice question. It must meet the following requirements:
\begin{enumerate}
\item The question must explicitly pose a \textbf{specific problem} or \textbf{ask a clear question} that can be answered or calculated. If the question does not clearly ask something (e.g., if it is vague, incomplete, or does not directly ask for a specific answer), it should be considered \textbf{invalid}. \\A valid question should directly require an answer, such as asking for a numerical value or selection (e.g., "What is the value of X?", "Which of the following is correct?", etc.). Questions that lack a clear problem or don't ask for a specific answer must be marked invalid.
\item The question, options, and answer must be fully defined. If any part is missing or unclear (e.g., if the answer does not match any of the listed options), the question should be deemed invalid. Note that the number of options is not a factor in determining completeness—having only one option is acceptable as long as the content is complete and coherent.
\item The question, options, and answer must be directly relevant to each other. The options should not reference each other, and there should be no circular dependencies or inter-referencing between options (e.g., “Option A is true because Option B is false”). Each option must stand independently, with no cross-references to other options.
\item Negative phrasing such as “The following options are incorrect” or “None of the above” is not allowed in the question. The question should use positive phrasing (e.g., “Which of the following is correct?”) to avoid confusion. If negative phrasing is detected in the question, it should be deemed invalid.
\item The question must be in a valid multiple-choice format. If the question is not suitable for a multiple-choice format (e.g., it is a free-form answer question like a problem or essay), it should be deemed invalid. Ensure that the question is designed specifically for multiple-choice answering, rather than being a question that requires an open-ended response.
\end{enumerate}

\vspace{0.5em}  
Please return the result in the following JSON format:

\begin{verbatim}
    {
    "is_valid": true/false
    }
\end{verbatim}
\vspace{-0.5em}  
Ensure that the output is valid JSON format and do not return any unrelated information.

Input:
\begin{verbatim}
    {
    question: "{}",
    options: {},
    answer: "{}"
    }
\end{verbatim}
Output: 
\end{promptbox}


\subsubsection{Negative and Extreme Inquiry Detection}
\begin{purposebox}{Purpose}
\begin{itemize}
    \item Identify negative questions that may appear in the options, such as 'Which of the following options is incorrect?' or 'Which of the following is not correct?'.
    \item Also, identify questions that use "most" to indicate a higher degree of likelihood or preference, such as 'Which of the following is most likely to occur?' or 'Which option is most appropriate?'.
    \item These types of questions are prone to having distractors that meet the conditions.
\end{itemize}
\end{purposebox}

\begin{promptbox}{Prompt 1}
Please evaluate whether the following text is a valid and well-formed multiple-choice question, adhering to the following criteria:
\begin{enumerate}
\item The question must not be a negation (e.g., "Which of the following is NOT...?" or "What is not...?").
\item The question should avoid vague or ambiguous phrasing, such as "Which of the following is the best/worst...?" or other uncertain expressions.
\item The answer choices should not be all affirmations or all negations, such as "All of the above" or "None of the above," as these are considered inappropriate.
\end{enumerate}

Please return the result in the following JSON format:

\begin{verbatim}
    {
    "is_valid": true/false
    }
\end{verbatim}

Ensure that the output is valid JSON and do not return any unrelated information.

Example input 1:

\begin{verbatim}
    {
    question: Which of the following procedure is not done in CHC?,
    options: ["Aboion", "Blood transfusion", "Caesaran section", 
            "Urine microscopy and culture sensitivity"],
    answer: Urine microscopy and culture sensitivity
    }
\end{verbatim}

Example output 1:

\begin{verbatim}
    {
    "is_valid": false
    }
\end{verbatim}
Example input 2:

\begin{verbatim}
    {
    question: Most common viral cause of acquired aqueductal stenosis 
    is?,
    options: ["Rubella", "Mumps", "Toxoplasma", "Enterovirus"],
    answer: Mumps
    }
\end{verbatim}
Example output 2:

\begin{verbatim}
    {
    "is_valid": false
    }
\end{verbatim}
Example input 3:

\begin{verbatim}
    {
    question: Acute cerebral edema occurs at high altitude due to,
    options: ["apillary blood pressure",     
              "Cerebral arteriolar dilation", 
              "Hypoxic damage to capillary 
               walls leading to capillary 
               leak",
              "All of the above"],
    answer: All of the above
    }
\end{verbatim}
Example output 3:

\begin{verbatim}
    {
    "is_valid": false
    }
\end{verbatim}
Example input 4:

\begin{verbatim}
    {
    question: Rideal Walker test is used to determine the efficiency 
    of the,
    options: ["Disinfectant", 
              "Moist heat sterilisation",       
              "Antibiotics", 
              "Dry heat sterilization"],
    answer: Disinfectant
    }
\end{verbatim}
Example output 4:

\begin{verbatim}
    {
    "is_valid": true
    }
\end{verbatim}

Input:
\begin{verbatim}
    {
    "question": {},
    "options": {},
    "answer": {}
    }
\end{verbatim}

Output:

\end{promptbox}

\begin{promptbox}{Prompt 2}
\subsection*{Input Description:}
You will be given:
\begin{itemize}
    \item A question statement (Question).
\end{itemize}

\subsection*{Guidelines:}
\begin{enumerate}
    \item Analyze the final part of the question (the actual question being asked) to check for specific phrases:
    \begin{itemize}
        \item \texttt{"incorrect"} in a context like \texttt{"which of the following is incorrect"}
        \item \texttt{"most"} in a context like \texttt{"which is most likely"}
    \end{itemize}
    
    \item If either of these phrases appears in the question's final asking part, output \texttt{true}, followed by a brief explanation of why the phrase is present.
    
    \item If neither phrase is found in the question's final part, output \texttt{false}, followed by a brief explanation.
\end{enumerate}

\subsection*{Output Format:}
Provide a response with:
\begin{itemize}
    \item \texttt{true} or \texttt{false} as the first part of the output
    \item A brief explanation that justifies your answer
\end{itemize}

\subsection*{Example Input:}
\textbf{Question:} \\
"A new technology is introduced in a manufacturing plant. Which of the following is most likely to occur?"

\subsection*{Example Output:}
\begin{verbatim}
{
    "is_valid": true/false,
}
\end{verbatim}
\textbf{Explanation:} Brief explanation of why the phrase is present.

\subsection*{Question:}
\begin{verbatim}
{}
\end{verbatim}

\subsection*{Output:}
\begin{verbatim}
{
    "is_valid": true/false,
}
\end{verbatim}

\end{promptbox}

\subsubsection{Multimodal Exclusion}
\begin{purposebox}{Purpose}
\begin{itemize}
    \item Check if the question relies on multimodal image information, and remove questions involving image information.
\end{itemize}
\end{purposebox}

\begin{promptbox}{Prompt}
You will be given a question or problem statement. Please determine if it strictly requires visual/image input to be solved.

\vspace{0.5em}  
Only output `true` if the question absolutely cannot be solved without an image (e.g. "What color is the car in this image?", "Describe the graph shown").

\vspace{0.5em}  
For all other cases where the question could potentially be answered with just text, output `false` (e.g. math problems, logic puzzles, verbal descriptions).

\vspace{0.5em}  
Output format:
\begin{itemize}
\item If visual input is strictly required: `true` + brief reason
\item Otherwise: `false` + brief reason
\end{itemize}

Question:
\begin{verbatim}
{}
\end{verbatim}
\end{promptbox}

\subsubsection{Field Relevance Evaluation}
\begin{purposebox}{Purpose}
\begin{itemize}
\item Assess whether the classification labels are appropriate.
\item Evaluate the classification level by level:
\begin{itemize}[label=\textbullet]
\item First, check if the "discipline" is relevant to the question.
\item If the "discipline" is appropriate, assess whether the "field" is relevant.
\item If the "field" is suitable, evaluate whether the "subfield" is relevant.
\item If the "subfield" is highly relevant to the question, the entire classification ("discipline," "field," and "subfield") is considered appropriate, even if there are minor mismatches in the "discipline" or "field."
\item If no levels meet the above criteria, or if any level other than "subfield" is deemed inappropriate and the "subfield" is not highly relevant, the classification is considered not relevant.
\end{itemize}
\end{itemize}
\end{purposebox}

\begin{promptbox}{Prompt}
You are an expert in hierarchical classification. Based on the given question and the provided three-level classification structure (\texttt{discipline}, \texttt{field}, \texttt{subfield}), evaluate whether the classification assigned to the question is appropriate.

\subsection*{Classification Structure:}
\begin{verbatim}
{
    "discipline": "{}",
    "field": "{}",
    "subfield": "{}"
}
\end{verbatim}

\subsection*{Question:}
\begin{verbatim}
{}
\end{verbatim}


\subsection*{Instructions:}
\begin{enumerate}
    \item Evaluate the classification level by level:
    \begin{itemize}
        \item First, check if the \texttt{discipline} is relevant to the question.
        \item If \texttt{discipline} is appropriate, evaluate if the \texttt{field} is relevant.
        \item If \texttt{field} is appropriate, evaluate if the \texttt{subfield} is relevant.
    \end{itemize}
    
    \item Special rule:
    \begin{itemize}
        \item If the \texttt{subfield} is found to be \textbf{highly relevant} to the question, the entire classification (\texttt{discipline}, \texttt{field}, and \texttt{subfield}) is considered appropriate, regardless of minor mismatches in \texttt{discipline} or \texttt{field}.
    \end{itemize}
    
    \item If no levels meet the above criteria, or if any level other than \texttt{subfield} is deemed inappropriate without \texttt{subfield} being highly relevant, the classification is considered not relevant.
    
    \item Output \textbf{strictly and exclusively} in the following JSON format and don't output any explanation, just output JSON:
    \begin{verbatim}
    {
        "is_relevant": true/false
    }
    \end{verbatim}
\end{enumerate}
\end{promptbox}


\subsubsection{Completeness Assessment}



\begin{purposebox}{Purpose}
\begin{itemize}
    \item Determine if the question is solvable, considering the following two dimensions:
    \begin{itemize}[label=\textbullet]
        \item Confidence: The level of confidence in the answer, categorized as "High," "Medium," or "Low."
        \item Missing Information: If an accurate answer cannot be provided, assess whether it is due to missing information (e.g., diagrams, formulas, known conditions) that makes the problem unsolvable, or if it is due to other reasons (e.g., high difficulty or uncertainty).
    \end{itemize}
\end{itemize}
\end{purposebox}

\begin{promptbox}{Prompt}
Please review and solve the following problems:

\begin{enumerate}
    \item Attempt to solve the problem and assess your confidence level in the answer.
    
    \item If you cannot provide an accurate answer, evaluate whether it is due to missing information (e.g., diagrams, formulas, known conditions) that makes the problem unsolvable, or if it's due to other reasons (e.g., high difficulty or uncertainty in solving).
    
    \item Output format:
    
    \begin{verbatim}
{
    "final_answer_letter": "A",
    "confidence": "High",
    "missing_info": false
}
    \end{verbatim}
\end{enumerate}

\subsection*{Rules:}
\begin{itemize}
    \item If the problem is missing a "diagram" (such as a geometry question requiring visual input), mark it as \texttt{missing\_info: true} and explain that the absence of the diagram or visual representation makes the question unsolvable.
    
    \item If the problem contains sufficient information but is difficult (e.g., requiring complex reasoning or having multiple possible solutions), mark \texttt{missing\_info: false} and assign a confidence level based on the model's reasoning process:
    \begin{itemize}
        \item \texttt{"High"}: If the problem is simple and straightforward, with a clear solution.
        \item \texttt{"Medium"}: If the problem involves multiple steps or requires further reasoning.
        \item \texttt{"Low"}: If the problem is complex, involves extensive information, or the model is uncertain about the solution.
    \end{itemize}
    
    \item If the problem is missing key necessary information (such as numbers, formulas, or critical conditions), mark it as \texttt{missing\_info: true}.
\end{itemize}

\subsection*{Output Format:}
\begin{verbatim}
    # The final answer option letter (e.g., A, B, C...)
    final_answer_letter: "A" 
    # Confidence level (High, Medium, Low)
    confidence: "High" 
    # Whether key information is missing, boolean (true or false)
    missing_info: false 
\end{verbatim}

\subsection*{Examples:}
\begin{itemize}
    \item \textbf{Question:} "Calculate the difference between A and B."
    \begin{itemize}
        \item \texttt{missing\_info: true}
        \item \texttt{explanation:} "Missing the values of A and B, so it cannot be calculated."
        \item \texttt{answer:} "A"
        \item \texttt{confidence:} "Low"
    \end{itemize}
    
    \item \textbf{Question:} "Given a geometric shape, calculate its area."
    \begin{itemize}
        \item \texttt{missing\_info: true}
        \item \texttt{explanation:} "The diagram is missing, so it cannot be solved."
        \item \texttt{answer:} "B"
        \item \texttt{confidence:} "Low"
    \end{itemize}
    
    \item \textbf{Question:} "Given the radius of a circle as 5, calculate the area of the circle."
    \begin{itemize}
        \item \texttt{missing\_info: false}
        \item \texttt{explanation:} "The problem is complete and solvable, high confidence."
        \item \texttt{answer:} "A"
        \item \texttt{confidence:} "High"
    \end{itemize}
\end{itemize}

\subsection*{Question:}
\begin{verbatim}
{}
\end{verbatim}

\subsection*{Output:}
\begin{verbatim}
    final_answer_letter: "A"
    confidence: "High"
    missing_info: false
\end{verbatim}

\end{promptbox}

\subsection{Manual Quality Review}
\label{Appendix: Manual Quality Review}

\autoref{tab: human} outlines the manual review process, focusing on ensuring consistency, clarity, accuracy, global perspective, and appropriate difficulty, while validating the correctness and uniqueness of answers and proper categorization.

\input{table/review_info/human_check}

\vspace{-5mm}
\input{sections/Reasons_for_failing_quality_inspection}
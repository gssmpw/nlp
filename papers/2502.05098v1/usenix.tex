% TEMPLATE for Usenix papers, specifically to meet requirements of
%  USENIX '05
% originally a template for producing IEEE-format articles using LaTeX.
%   written by Matthew Ward, CS Department, Worcester Polytechnic Institute.
% adapted by David Beazley for his excellent SWIG paper in Proceedings,
%   Tcl 96
% turned into a smartass generic template by De Clarke, with thanks to
%   both the above pioneers
% use at your own risk.  Complaints to /dev/null.
% make it two column with no page numbering, default is 10 point

% Munged by Fred Douglis <douglis@research.att.com> 10/97 to separate
% the .sty file from the LaTeX source template, so that people can
% more easily include the .sty file into an existing document.  Also
% changed to more closely follow the style guidelines as represented
% by the Word sample file. 

% Note that since 2010, USENIX does not require endnotes. If you want
% foot of page notes, don't include the endnotes package in the 
% usepackage command, below.

% This version uses the latex2e styles, not the very ancient 2.09 stuff.
\documentclass[letterpaper,twocolumn,10pt]{article}
\raggedbottom
\usepackage{usenix}

% \usepackage{usenix,epsfig,endnotes}
\usepackage{booktabs}
\usepackage{multirow} 
\usepackage{xcolor}
\usepackage{diagbox}
\let\Bbbk\relax 
\usepackage{amsmath,amsthm,amssymb,amsfonts}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{tabularray}
\usepackage{appendix}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float} 
\usepackage{subcaption}
\usepackage{graphicx}
\usepackage{hyperref}
\hypersetup{breaklinks=true}
\usepackage{authblk}

\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{arrows.meta}
\newtheorem{myDef}{Definition}
\newcommand{\xrdasharrow}[2][->]{
% correct vertical setting by egreg:
% http://tex.stackexchange.com/a/59660/13304
\tikz[baseline=-\the\dimexpr\fontdimen22\textfont2\relax]{
\node[anchor=south,font=\scriptsize, inner ysep=1.5pt,outer xsep=2.2pt](x){#2};
\draw[shorten <=1.4pt,shorten >=1.4pt,dashed,#1](x.south west)--(x.south east);
}
}
% \newcommand{\setParDis}{\setlength {\parskip} {0.3cm} }
\newcommand{\zxr}[1]{\textcolor{blue}{#1}}
% \def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
%     T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\author[1]{Xinran Zheng}
\author[2]{Shuo Yang}
\author[2]{Edith C.H. Ngai}
\author[3]{Suman Jana}
\author[1]{Lorenzo Cavallaro}


\affil[1]{\textit{University College London}}
\affil[2]{\textit{University of Hong Kong}}
\affil[3]{\textit{Columbia University}}

\date{}
    
\begin{document}


%don't want date printed
\date{}

%make title bold and 14 pt font (Latex default is non-bold, 16 pt)
\title{\Large \bf Learning Temporal Invariance in Android Malware Detectors}

% for single author (just remove % characters)
% \author{
% {\rm Xinran Zheng}\\
% University College London
% \and
% {\rm Shou Yang}\\
% University of Hong Kong
% \and
% {\rm Edith Ngai}\\
% University of Hong Kong
% \and
% {\rm Edith Ngai}\\
% University of Hong Kong
% \and
% {\rm Edith Ngai}\\
% University of Hong Kong
% }% end author

\maketitle



% Use the following at camera-ready time to suppress page numbers.
% Comment it out when you first submit the paper for review.
% \thispagestyle{empty}


% \begin{abstract}
% Learning-based Android malware detectors degrade over time due to distribution drift caused by malware variants and new families. The ability to learn stable and discriminative features is essential for maintaining high performance in drift scenarios. This paper investigates the vulnerabilities of detectors trained with empirical risk minimization (ERM) to distribution shifts, attributing their shortcomings to insufficient learning of stable features already present in the training data. Invariant learning theory offers a promising solution by encouraging models to generate stable representations across environments that expose instability in the training set. However, the diversity of drift factors, lack of prior environment labels, and low-quality representations make this task challenging. To address these issues, we propose TIF, the first temporal invariant training framework for malware detection, designed to enable detectors to learn stable, high-quality representations over time. TIF organizes data by app release date to reveal temporal drifts, combining multi-proxy contrastive learning and invariant gradient alignment to capture complex relationships in multi-family malware and encourage temporal stable representations. TIF integrates seamlessly into any learning-based detector. Experiments on a decade-long dataset demonstrate that TIF significantly improves robustness under drift scenarios, achieving superior performance especially early in deployment compared to state-of-the-art methods.
% \end{abstract}

\begin{abstract}
Learning-based Android malware detectors degrade over time due to natural distribution drift caused by malware variants and new families. This paper systematically investigates the challenges classifiers trained with empirical risk minimization (ERM) face against such distribution shifts and attributes their shortcomings to their inability to learn \emph{stable} discriminative features. Invariant learning theory offers a promising solution by encouraging models to generate stable representations crossing environments that expose the instability of the training set. However, the lack of prior environment labels, the diversity of drift factors, low-quality representations caused by diverse families make this task challenging. To address these issues, we propose TIF, the first temporal invariant training framework for malware detection, which aims to enhance the ability of detectors to learn stable representations across time. TIF organizes environments based on application observation dates to reveal temporal drift, integrating specialized multi-proxy contrastive learning and invariant gradient alignment to generate and align environments with high-quality, stable representations. TIF can be seamlessly integrated into any learning-based detector. Experiments on a decade-long dataset show that TIF excels, particularly in early deployment stages, addressing real-world needs and outperforming state-of-the-art methods.
%Maintaining high performance under drift requires enhancing the detector's ability to learn discriminative %as well as \emph{stable} features.
\end{abstract}

% \def\thefootnote{*}\footnotetext{These authors contributed equally to this work}\def\thefootnote{\arabic{footnote}}
\input{Tex/Introduction}
\input{Tex/Review}
\input{Tex/Motivation}
\input{Tex/Methodology}
\input{Tex/Experiment}
\input{Tex/Discussion}
\input{Tex/Conclusion}
% \input{Tex/EthicsConsiderations}
% \input{Tex/OpenScience}


% \section{Introduction}

% A paragraph of text goes here.  Lots of text.  Plenty of interesting
% text. \\

% More fascinating text. Features\endnote{Remember to use endnotes, not footnotes!} galore, plethora of promises.\\

% \section{This is Another Section}

% Some embedded literal typset code might 
% look like the following :

% {\tt \small
% \begin{verbatim}
% int wrap_fact(ClientData clientData,
%               Tcl_Interp *interp,
%               int argc, char *argv[]) {
%     int result;
%     int arg0;
%     if (argc != 2) {
%         interp->result = "wrong # args";
%         return TCL_ERROR;
%     }
%     arg0 = atoi(argv[1]);
%     result = fact(arg0);
%     sprintf(interp->result,"%d",result);
%     return TCL_OK;
% }
% \end{verbatim}
% }

% Now we're going to cite somebody.  Watch for the cite tag.
% Here it comes~\cite{Chaum1981,Diffie1976}.  The tilde character (\~{})
% in the source means a non-breaking space.  This way, your reference will
% always be attached to the word that preceded it, instead of going to the
% next line.

% \section{This Section has SubSections}
% \subsection{First SubSection}

% Here's a typical figure reference.  The figure is centered at the
% top of the column.  It's scaled.  It's explicitly placed.  You'll
% have to tweak the numbers to get what you want.\\

% % you can also use the wonderful epsfig package...
% \begin{figure}[t]
% \begin{center}
% \begin{picture}(300,150)(0,200)
% \put(-15,-30){\special{psfile = fig1.ps hscale = 50 vscale = 50}}
% \end{picture}\\
% \end{center}
% \caption{Wonderful Flowchart}
% \end{figure}

% This text came after the figure, so we'll casually refer to Figure 1
% as we go on our merry way.

% \subsection{New Subsection}

% It can get tricky typesetting Tcl and C code in LaTeX because they share
% a lot of mystical feelings about certain magic characters.  You
% will have to do a lot of escaping to typeset curly braces and percent
% signs, for example, like this:
% ``The {\tt \%module} directive
% sets the name of the initialization function.  This is optional, but is
% recommended if building a Tcl 7.5 module.
% Everything inside the {\tt \%\{, \%\}}
% block is copied directly into the output. allowing the inclusion of
% header files and additional C code." \\

% Sometimes you want to really call attention to a piece of text.  You
% can center it in the column like this:
% \begin{center}
% {\tt \_1008e614\_Vector\_p}
% \end{center}
% and people will really notice it.\\

% \noindent
% The noindent at the start of this paragraph makes it clear that it's
% a continuation of the preceding text, not a new para in its own right.


% Now this is an ingenious way to get a forced space.
% {\tt Real~$*$} and {\tt double~$*$} are equivalent. 

% Now here is another way to call attention to a line of code, but instead
% of centering it, we noindent and bold it.\\

% \noindent
% {\bf \tt size\_t : fread ptr size nobj stream } \\

% And here we have made an indented para like a definition tag (dt)
% in HTML.  You don't need a surrounding list macro pair.
% \begin{itemize}
% \item[]  {\tt fread} reads from {\tt stream} into the array {\tt ptr} at
% most {\tt nobj} objects of size {\tt size}.   {\tt fread} returns
% the number of objects read. 
% \end{itemize}
% This concludes the definitions tag.

% \subsection{How to Build Your Paper}

% You have to run {\tt latex} once to prepare your references for
% munging.  Then run {\tt bibtex} to build your bibliography metadata.
% Then run {\tt latex} twice to ensure all references have been resolved.
% If your source file is called {\tt usenixTemplate.tex} and your {\tt
%   bibtex} file is called {\tt usenixTemplate.bib}, here's what you do:
% {\tt \small
% \begin{verbatim}
% latex usenixTemplate
% bibtex usenixTemplate
% latex usenixTemplate
% latex usenixTemplate
% \end{verbatim}
% }


% \subsection{Last SubSection}

% Well, it's getting boring isn't it.  This is the last subsection
% before we wrap it up.

% \section{Acknowledgments}

% A polite author always includes acknowledgments.  Thank everyone,
% especially those who funded the work. 

% \section{Availability}

% It's great when this section says that MyWonderfulApp is free software, 
% available via anonymous FTP from

% \begin{center}
% {\tt ftp.site.dom/pub/myname/Wonderful}\\
% \end{center}

% Also, it's even greater when you can write that information is also 
% available on the Wonderful homepage at 

% \begin{center}
% {\tt http://www.site.dom/\~{}myname/SWIG}
% \end{center}

% Now we get serious and fill in those references.  Remember you will
% have to run latex twice on the document in order to resolve those
% cite tags you met earlier.  This is where they get resolved.
% We've preserved some real ones in addition to the template-speak.
% After the bibliography you are DONE.

\bibliographystyle{plain}
\bibliography{reference.bib}


\appendix
\input{Tex/Appendix}


% \theendnotes

\end{document}







\begin{algorithm}[thpb]
    \DontPrintSemicolon
    \LinesNumbered
	\BlankLine
	\SetKwInOut{Input}{Input}
	\caption{\privateevolution{} (\pe{})}
    \label{alg:main_full}
	\Input{The set of private classes: $\privatesampleclassset$ ~~~ 
 ($\privatesampleclassset=\brc{0}$ if for unconditional generation)\\
 Private samples: $\privatesampleset=\brc{(x_i, y_i)}_{i=1}^{\numprisamples}$, where $x_i$ is a sample and $y_i\in \privatesampleclassset$ is its label\\
 Number of iterations: $\numiterations$\\
 Number of generated samples: $\numgensamples$~~~(assuming $\numgensamples~\textrm{mod}~\brd{\privatesampleclassset}=0$)\\
 Noise multiplier for \dpvotingname{}: $\noisemultiplier$\\
 Threshold for \dpvotingname{}: $\threshold$
	}
	\BlankLine
        $\generatedsampleset \leftarrow \emptyset$\;
        \For{$c \in \privatesampleclassset$}{
            $private\_samples \leftarrow \brc{x_i| (x_i, y_i)\in \privatesampleset \text{  and  } y_i=c}$ \;
            $S_1 \leftarrow \randomsampleapi{\numgensamples / \brd{\privatesampleclassset}}$ \; 
    	\For{$t \leftarrow 1, \ldots, \numiterations$}
    	{
                $histogram_t \leftarrow \dpvotingfunction{private\_samples,S_t, \noisemultiplier,\threshold}$ \label{line:voting} \tcp*{See \cref{alg:voting}} 
                $\calP_t \leftarrow histogram_t/\mathrm{sum}(histogram_t)$ \label{line:normalization} \tcp*{$\calP_t$ is a distribution on $S_t$}
                $S_{t}'\leftarrow $ draw $N_\syn/|C|$ samples with replacement from $\calP_t$ \label{line:draw} \tcp*{$S_t'$ is a multiset}
                $S_{t+1}\leftarrow\samplevariationapi{S_t'}$ 
            }
            $\generatedsampleset\leftarrow \generatedsampleset \cup \brc{(x,c)|x\in S_T}$
        }
	\Return{ $\generatedsampleset$}
\end{algorithm}
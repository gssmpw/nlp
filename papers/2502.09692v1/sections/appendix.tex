\input{sections/appendix/experimental_setup}

\section{Supplementary material for 3D predictions}
In Figure~\ref{fig:ahmedml_visualizations}, we visually compare the 3D GP-UPT predictions
of the experiments in Section~\ref{sec:experiments-volume}
with the corresponding ground truth \ac{CFD} simulation results on a test set sample.

Table~\ref{table:gino_3d_hyper_parameters} and \ref{table:gpupt_3d_hyper_parameters} we report the hyper-parameters for GINO and GP-UPT for the 3D volume prediction task (Section~\ref{sec:experiments-volume}).

\begin{figure*}[h!]
     \centering
     \begin{subfigure}[b]{0.43\textwidth}
         \centering
         \includegraphics[width=\textwidth,trim={0 1.2cm 1.4cm 1.7cm},clip]{figures/ahmed_3d/pred_cut.png}
         \caption{GP-UPT horizontal and vertical cut plane}
         \label{fig:ahmedml_visualizations_cut_plane_upt}
     \end{subfigure}
     \hfill
     \begin{subfigure}[b]{0.43\textwidth}
         \centering
         \includegraphics[width=\textwidth,trim={0 1.2cm 1.4cm 1.7cm},clip]{figures/ahmed_3d/gt_cut.png}
         \caption{CFD horizontal and vertical cut plane}
         \label{fig:ahmedml_visualizations_cut_plane_cfd}
     \end{subfigure}
     \hfill
     \begin{subfigure}[b]{0.43\textwidth}
         \centering
         \includegraphics[width=\textwidth,trim={0 2.5cm 0 1.0cm},clip]{figures/ahmed_3d/pred_iso.png}
         \caption{GP-UPT $C_{pt}=0.9$ iso-surface}
         \label{fig:ahmedml_iso_surface_upt}
     \end{subfigure}
        \hfill
     \begin{subfigure}[b]{0.43\textwidth}
         \centering
         \includegraphics[width=\textwidth,trim={0 2.5cm 0 1.0cm},clip]{figures/ahmed_3d/gt_iso.png}
         \caption{CFD $C_{tb}=0.9$ iso-surface}
         \label{fig:ahmedml_iso_surface_cfd}
     \end{subfigure}
        \caption{Visualization of GP-UPT total pressure coefficient $C_{pt}$ predictions (left) and ground truth HRLES CFD simulations (right).}
        \label{fig:ahmedml_visualizations}
\end{figure*}

\begin{table*}[h!]
\centering
\caption{Hyper-parameter configuration for \ac{GP-UPT} for 3D prediction.}
\begin{tabular}{cc}
\hline
Hyper-parameter           & AhmedML                    \\ \hline
Input normalization       & rescaling \\
Number of supernodes $S$     & 8000                             \\
Radius $r_{sn}$                        & 2                                     \\
Max degree supernode & 32                                    \\
Hidden dimensionality     & 768                               \\
Encoder blocks $K$          & 3                                   \\
Decoder blocks $C$           & 2                                   \\
Number of attention heads $h$ & 8                                   \\
Number of epochs & 4000                                   \\
Optimizer & LION \\
Learning rate & \num{5e-5}                                   \\
\hline
\end{tabular}
\label{table:gpupt_3d_hyper_parameters}
\end{table*}

\begin{table*}[h!]
\centering
\caption{Hyper-parameter configuration fo GINO for 3D prediction.}
\begin{tabular}{cc}
\hline
Hyper-parameter           & AhmedML                    \\ \hline
Input normalization       & rescaling \\
Grid resolution& 64x64x64\\
Hidden dimension & 384\\
Latent dimension & $64^3$ \\
Number of blocks & 2\\
Fourier modes & 24\\
Number of epochs & 4000                                   \\
Optimizer & LION \\
Learning rate & \num{5e-5}                                   \\
\hline
\end{tabular}
\label{table:gino_3d_hyper_parameters}
\end{table*}

\newpage
\section{Model inference characteristics}
\label{appendix:model_inference_characteristics}
To complement the quantitative model benchmark in terms of surface quantity prediction accuracy of Section~\ref{sec:experiments-benchmark}, we additionally provide profiling results, analyzing inference characteristics of the respective models.
Table \ref{table:inference-characteristics-drivaerml} summarizes model latency as well as peak memory consumption for inference forward passes of the DrivAerML experiments of Table~\ref{table:baseline-models}. 
Point-based models have the same number of input and output points, while for field-based methods we vary the number of output points only. 

\begin{table}[H]
\centering
\setlength{\tabcolsep}{1.5pt}
\caption{GPU peak memory usage and inference times measured on 40k points.}
\begin{tabular}{lcccc}
\toprule
 & & & \multicolumn{2}{c}{DrivAerML} \\ 
                       \cmidrule(lr){4-5}
Model - (\#params) & Field & Point & \multicolumn{1}{c}{Peak Memory [\si{\giga\byte}]} & \multicolumn{1}{c}{Model Latency [\si{\milli\second}]} \\ \hline
PointNet - (\num{3.5}M)      &  \xmark & \cmark    & 0.41 &2.47  \\   %
RegDGCNN %
- (\num{1.4}M) & \xmark & \cmark & 19.30 &171.90 \\ %
GINO - (15.7M) %
& \cmark & \xmark & 6.04 & 72.68 \\%& 2427.63  &  0.1378  & 24.05  \\                       
Transolver - (\num{3.9}M)    & \xmark & \cmark & 0.44& 24.26 \\ %
UPT - (\num{4.0}M)    & \xmark & \cmark & 0.86& 52.30 \\
\hline
\begin{tabular}[c]{@{}l@{}}GP-UPT  (\num{3.6}M) \end{tabular}& \xmark & \cmark & 0.86 & 34.04 \\ %
GP-UPT (\num{4.7}M) & \cmark  & \xmark & 0.86  & 69.00 \\% & 617.99 & 0.0694  & 12.38 \\
\bottomrule
\end{tabular}
\label{table:inference-characteristics-drivaerml}
\end{table}


\section{CAD mesh model fine tuning}
\begin{figure}[h!]
     \centering
     \begin{subfigure}[b]{0.85\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/stl_fine_tuning_part1_page_1.pdf}
         \caption{Stage 1: Pre-trained GP-UPT model on CFD simulation mesh cells optimized with field- and supernode level multi-task learning.}
         \label{fig:cad_mesh_fine_tuning_stage1}
     \end{subfigure}
     \begin{subfigure}[b]{0.63\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/stl_fine_tuning_part2_page_1.pdf}
         \caption{Stage 2: Fine-tuned model working with point clouds sampled directly for the CAD surface mesh.}
         \label{fig:cad_mesh_fine_tuning_stage2}
     \end{subfigure}
        \caption{Overview of the two-stage process for CAD mesh fine tuning.}
        \label{fig:cad_mesh_fine_tuning}
\end{figure}
\label{appendix:cad_mesh_fine_tuning}
We emphasize the practical implication (benefits) of models with a decoupled geometry encoder and field decoder in Section~\ref{sec:methodology}, as well as experiments (Section~\ref{sec:experiments}) of the main paper.
In this additional experiment, we demonstrate how to utilize this property to produce a model that is capable of directly inferring aerodynamic properties from a provided \acf{CAD} geometry (e.g., an STL file).
Note that this setup produces a model that does not depend on expensive \ac{CFD} simulation meshing when deployed in down-stream applications such as drag coefficient estimation for design verification and optimization. 

\textbf{Motivation}: When estimating the latency of a \ac{CFD} surrogate model for a new design,
we need to take two main computations into account:
\begin{enumerate*}[label=(\arabic*)]
    \item  input pre-processing including surface meshing, and
    \item the model inference forward pass:~$t_{CFD\,surrogate} = t_{meshing} + t_{inference}$.
\end{enumerate*}
Hence, circumventing the expensive \ac{CFD} meshing stage drastically reduces the time for initial feedback on the aerodynamics of a design (e.g., a few seconds vs. up to 1 hour~\cite{ashton2024drivaerml}).
Next, we explain the two-stage training procedure yielding such a model.
Figure \ref{fig:cad_mesh_fine_tuning} provides a visual summary of both stages.

\paragraph{Stage 1:} In this stage, we train a model as described in the methods section (Section~\ref{sec:methodology}) and as outlined in Figure~\ref{fig:gp-upt-architecture}.
For a direct comparison with Stage 2, we show a simplified version of this model in Figure~\ref{fig:cad_mesh_fine_tuning_stage1}.
Recall, that for utilizing field- and supernode-level multi-task learning, we need to feed the CFD simulation cell centers as an input to both
the geometry encoder and the field decoder for computing losses and optimization gradients.
Once trained, the query points for the field decoder can be arbitrary points
sampled from the surface of the geometry.
However, the geometry encoder was trained on, and hence still expects,
the point cloud distributions originating from the CFD simulation cell centers
(i.e., denser sampling of regions around mirrors or wheels).
In the next stage, we describe how to overcome this practical limitation of the model.

\paragraph{Stage 2:} Given the trained model of the previous stage, we now fine-tune it to accept, instead of the \ac{CFD} simulation cell centers, uniformly sampled points from the CAD surface as an input.
For training and evaluation purposes we still keep the simulation cell centers as query locations although this is not required when deploying the model in practice.
Note that in this fine-tuning stage, we need to drop the supernode-level component loss ($\cL_{point}$) of the multi-task objective ($\cL_{multi}$) as there is no relation between geometry input points and simulated surface quantities.
Figure~\ref{fig:cad_mesh_fine_tuning_stage2} provides an overview of the inference process of such a model.
In Table~\ref{tab:cad_mesh_fine_tuning} we compare the performance of the original model with a fine-tuned Stage 2 \ac{CAD} inference model.
We observe that, in addition to the beneficial properties with respect to practical applicability,
the \ac{CAD} inference model also maintains the same prediction accuracy on the respective surface quantities.
\begin{table}[h!]
\centering
\caption{Field decoder results for GP-UPT base model and CAD mesh fine-tuning on DrivAerML.}
\begin{tabular}{lccc}
\toprule
Model (\#params)& MSE & L2 &MAE \\
\hline
GP-UPT (4.7M) & 314.25 & 0.0497 &10.38 \\
GP-UPT-CAD (4.7M) & 302.39 & 0.0486 & 10.16 \\
\bottomrule
\end{tabular}
\label{tab:cad_mesh_fine_tuning}
\end{table}

\clearpage

\section{Surface mesh resolutions for drag and lift estimation}
\label{appendix:mesh_resolutions}
In Section~\ref{sec:experiments-surface}, we evaluate the impact of different surface mesh resolutions on drag coefficient estimation.
For a better intuition on the granularity of the respective surface meshes we show the first four re-meshing stages in Figure~\ref{fig:surface_remeshing}.
\begin{figure}[h!]
     \centering
     \begin{subfigure}[b]{0.47\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/meshes/N3k.png}
         \caption{$3\cdot10^3$ mesh cells}
         \label{fig:surface_remeshing_1}
     \end{subfigure}
     \hfill
     \begin{subfigure}[b]{0.47\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/meshes/N10k.png}
         \caption{$10^4$ mesh cells}
         \label{fig:surface_remeshing_1}
     \end{subfigure}
     \hfill
     \begin{subfigure}[b]{0.47\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/meshes/N30k.png}
         \caption{$3\cdot10^4$ mesh cells}
         \label{fig:surface_remeshing_2}
     \end{subfigure}
     \begin{subfigure}[b]{0.47\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/meshes/N100k.png}
         \caption{$10^5$ mesh cells}
         \label{fig:surface_remeshing_3}
     \end{subfigure}
     \hfill
     \begin{subfigure}[b]{0.47\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/meshes/N300k.png}
         \caption{$3 \cdot 10^5$ mesh cells}
         \label{fig:surface_remeshing_4}
     \end{subfigure}
     \hfill
     \begin{subfigure}[b]{0.47\textwidth}
         \centering
         \includegraphics[width=\textwidth]{figures/meshes/N1000k.png}
         \caption{$10^6$ mesh cells}
         \label{fig:surface_remeshing_4}
     \end{subfigure}
    \caption{Visualization of different surface mesh resolutions for the drag coefficient experiments in Section~\ref{sec:experiments-surface}.}
    \label{fig:surface_remeshing}
\end{figure}

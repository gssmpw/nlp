\begin{figure}[htbp]
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm]
  \tikzstyle{every state}=[inner sep=3pt,minimum size=20pt]

  \node(Q)[petri-p,draw=black,label=180:{$\ell$}]{};
  \node(ReqI1)[petri-t2,draw=black,fill=black,right of=Q,label=90:{$\ell\_\mathit{reqi1}$},xshift=-2em]{};
  \node(aux1)[petri-p,draw=black,right of=ReqI1,xshift=-2em]{};
  \node(AckI1)[petri-t2,draw=black,fill=black,right of=aux1,label=90:{$\ell\_\mathit{acki1}$},xshift=-2em]{};
  \node(R)[petri-p,draw=black,right of=AckI1,xshift=-2em,label=00:{$\ell'$}]{};

  \path (Q) edge [->,thick,line width=1pt](ReqI1);
  \path (ReqI1) edge [->,thick,line width=1pt](aux1);
  \path (aux1) edge [->,thick,line width=1pt](AckI1);
  \path (AckI1) edge [->,thick,line width=1pt](R);

 \node(Q2)[petri-p,draw=black,label=180:{$\ell$},right of=R,xshift=2em]{};
  \node(ReqD1)[petri-t2,draw=black,fill=black,above right of=Q2,label=90:{$\ell\_\mathit{reqd1}$},xshift=-2em]{};
  \node(aux2)[petri-p,draw=black,right of=ReqD1,xshift=-2em]{};
  \node(AckD1)[petri-t2,draw=black,fill=black,right of=aux2,label=90:{$\ell\_\mathit{ackd1}$},xshift=-2em]{};
  \node(R2)[petri-p,draw=black,right of=AckD1,xshift=-2em,label=00:{$\ell''$}]{};
  \node(Zero1)[petri-t2,draw=black,fill=black,below right of=Q2,label=-90:{$\ell\_\mathit{zero1}$},xshift=-2em]{};
   \node(S)[petri-p,draw=black,right of=Zero1,xshift=-2em,label=00:{$\ell'$}]{};
  

  \path (Q2) edge [->,thick,line width=1pt,out=90,in=180](ReqD1);
  \path (ReqD1) edge [->,thick,line width=1pt](aux2);
  \path (aux2) edge [->,thick,line width=1pt](AckD1);
  \path (AckD1) edge [->,thick,line width=1pt](R2);
  \path (Q2) edge [->,thick,line width=1pt,out=-90,in=180](Zero1);
  \path (Zero1) edge [->,thick,line width=1pt](S);

  \node(lab1)[below of=ReqI1,xshift=1em]{(a) Encoding $\ell:c1=c1+1;\mathtt{goto}~\ell';$};
   \node(lab1)[below of=Zero1,xshift=2em]{(b) Encoding $\ell: \begin{array}{l}\mathtt{if}~c1==0?~\mathtt{goto}~ \ell';\\ \mathtt{else}~c1=c1-1;\mathtt{goto}~\ell'';\end{array}$};

\end{tikzpicture}
}
\end{center}
\vspace*{-\baselineskip}
\caption{Simulating a Minsky machine with process type $\Minsk$}
\label{fig:proc-minsk}
\end{figure}

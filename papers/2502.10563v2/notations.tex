\makeatletter
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother


\def\dist{\ensuremath{\mu}}
\def\x{\ensuremath{X}}
\def\xtilde{\ensuremath{\widetilde \x}}
\def\xprime{\ensuremath{\x'}}
\def\xp{\ensuremath{\x_p}}
\def\xone{\ensuremath{\x_1}}
\def\xtwo{\ensuremath{\x_2}}
\def\pstar{\ensuremath {p^\star}}
\def\pstarx{\ensuremath {p^\star}(\x)}
\def\phat{\ensuremath{\widehat \p}}
\def\ptilde{\ensuremath{\widetilde \p}}
\def\y{\ensuremath{Y}}
\def\yprime{\ensuremath{\y'}}
\def\ytilde{\ensuremath{\widetilde \y}}
\def\p{\ensuremath{p}}
\def\px{\ensuremath{p(\x)}}
\def\pclass{\ensuremath{\mathcal P}}
\def\l{\ensuremath{L}}
\def\lhat{\ensuremath{\widehat L}}
\def\L{\ensuremath{\mathcal L}}
\def\E{\mathbb E}
\def\Ex{\mathbb E_{\x \sim \dist}}
\def\Ey{\mathbb E_{\y \sim \pstarx}}
\def\Eyprime{\mathbb E_{\yprime \sim \pstarx}}
\def\Exprime{\mathbb E_{\xprime \sim \dist}}
\def\Eyai{\mathbb E_{\ytilde \sim \ptilde(\x)}}
\def\Eyaiprime{\mathbb E_{\ytilde \sim \ptilde(\x')}}
\newcommand{\KL}[2]{KL(#1 \| #2)}
\def\hdata{\mathcal D_H}
\def\aidata{\mathcal D_{AI}}
\def\sumi{\frac{1}{\abs{\hdata}}  \sum_{(\x,\y) \in \hdata} }
\def\lai{\ensuremath {\widetilde L}}
\def\correction{C}
\def\c{\alpha}
\def\s{S}
\def\noise{\eta}
\def\z{z}
\def\entropy{H}
\def\param{\theta}
\def\const{\ensuremath{\alpha}} 
\def\normal{\mathcal N}
\def\Func{\mathcal F}

\newcommand{\Sp}[1]{\left(#1\right)}
\newcommand{\Mp}[1]{\left[#1\right]}
\newcommand{\Bp}[1]{\left\{#1\right\}}
\renewcommand{\vec}[1]{\mathbf{#1}}

\newcommand{\R}{\mathbb{R}}

\newcommand{\cD}{\mathcal{D}}
\newcommand{\cM}{\mathcal{M}}

\newcommand{\llm}{\cM}
\newcommand{\eval}{f}
\newcommand{\evaltilde}{\tilde{\eval}}
\newcommand{\score}{S}

\DeclareMathOperator{\corr}{\mathrm{Corr}}
\newcommand{\var}{\mathrm{Var}}
\newcommand{\cov}{\mathrm{Cov}}


% Math delimiters
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert} %
\DeclarePairedDelimiter{\brk}{[}{]}
\DeclarePairedDelimiter{\crl}{\{}{\}}
\DeclarePairedDelimiter{\prn}{(}{)}
\DeclarePairedDelimiter{\nrm}{\|}{\|}
\DeclarePairedDelimiter{\tri}{\langle}{\rangle}
\DeclarePairedDelimiter{\dtri}{\llangle}{\rrangle}

\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}

\DeclarePairedDelimiter{\nrmlip}{\|}{\|_{\mathrm{Lip}}}

\let\Pr\undefined
\let\P\undefined
\DeclareMathOperator{\En}{\mathbb{E}}
\DeclareMathOperator{\Enbar}{\widebar{\mathbb{E}}}
\newcommand{\Ep}{\wt{\bbE}}
\newcommand{\Eh}{\wh{\bbE}}
\newcommand{\Ehat}{\wh{\bbE}}
\DeclareMathOperator{\P}{P}
\DeclareMathOperator{\Pr}{Pr}

\DeclareMathOperator*{\maximize}{maximize} % * Places subscript
% directly under operator
\DeclareMathOperator*{\minimize}{minimize} % * Places subscript directly under operator

% Arg<x>          

\DeclareMathOperator*{\argmin}{arg\,min} % * Places subscript directly under operator
\DeclareMathOperator*{\argmax}{arg\,max}             

% styles
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\mb}[1]{\boldsymbol{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}
\newcommand{\wb}[1]{\widebar{#1}}


% Special letters: blackboard, mathcal, widehat % djhsu magic
\def\ddefloop#1{\ifx\ddefloop#1\else\ddef{#1}\expandafter\ddefloop\fi}
\def\ddef#1{\expandafter\def\csname bb#1\endcsname{\ensuremath{\mathbb{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddefloop#1{\ifx\ddefloop#1\else\ddef{#1}\expandafter\ddefloop\fi}
\def\ddef#1{\expandafter\def\csname b#1\endcsname{\ensuremath{\mathbf{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddef#1{\expandafter\def\csname sf#1\endcsname{\ensuremath{\mathsf{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddef#1{\expandafter\def\csname c#1\endcsname{\ensuremath{\mathcal{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddef#1{\expandafter\def\csname h#1\endcsname{\ensuremath{\widehat{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddef#1{\expandafter\def\csname hc#1\endcsname{\ensuremath{\widehat{\mathcal{#1}}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddef#1{\expandafter\def\csname t#1\endcsname{\ensuremath{\widetilde{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
\def\ddef#1{\expandafter\def\csname tc#1\endcsname{\ensuremath{\widetilde{\mathcal{#1}}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop
% scr
\def\ddefloop#1{\ifx\ddefloop#1\else\ddef{#1}\expandafter\ddefloop\fi}
\def\ddef#1{\expandafter\def\csname scr#1\endcsname{\ensuremath{\mathscr{#1}}}}
\ddefloop ABCDEFGHIJKLMNOPQRSTUVWXYZ\ddefloop


% one-off macros
\newcommand{\ls}{\ell}
\newcommand{\indic}{\mathbbm{1}}    %Indicator
\newcommand{\pmo}{\crl*{\pm{}1}}
\newcommand{\eps}{\epsilon}
\newcommand{\veps}{\varepsilon}
\newcommand{\vphi}{\varphi}

\newcommand{\ldef}{\vcentcolon=}
\newcommand{\rdef}{=\vcentcolon}


\newcommand{\textb}[1]{\textcolor{blue}{#1}}

\newcommand{\loose}{\looseness=-1}

\newcommand{\convar}{f^{\mathsf{cv}}_{\alpha;g}}
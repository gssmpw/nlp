\section{Proofs for random feature ridge regression}\label{app:proof_rf}

In this section, we provide the proof of deterministic equivalence for random feature ridge regression in both the asymptotic (\cref{app:asy_deter_equiv_rf}) and non-asymptotic (\cref{app:nonasy_deter_equiv_rf}) settings. Additionally, we provide the proof of the relationship between test risk and the $\ell_2$ norm given in the main text, as detailed in \cref{app:relationship_rf}.

Though \citet{bach2024high}'s results are for linear regression, we can still deliver the asymptotic results for RFMs, which requires some knowledge from \cref{eq:det_equiv_phi2_main,eq:det_equiv_phi1_main}.

We firstly confirm that \cref{ass:asym} in \cref{app:pre_asy_deter_equiv}, used to derive all asymptotic results, can be replaced by the Hanson-Wright assumption employed in the non-asymptotic analysis.
It is evident that \cref{eq:trA1,eq:trA2} are obtained directly by taking the limits of \cref{eq:det_equiv_phi2_main,eq:det_equiv_phi1_main} as \(n \to \infty\).

Additionally, a key step in the proof of \cref{eq:trAB1,eq:trAB2} in \citet{bach2024high} involves showing that \(\Delta\) is almost surely negligible, where \(\Delta\) is defined as
\[
\Delta = \frac{1}{n} \sum_{i=1}^{n} \frac{\bx_i\bx_i^\sT(\hbSigma_{-i}-z\id)^{-1}-\bSigma(\hbSigma-z\id)^{-1}}{1 + \bx_i^\sT(n\widehat\bSigma_{-i}-nz\id)^{-1}\bx_i}\,,
\]
with \(\hbSigma = \frac{1}{n}\sum_{i=1}^{n}\bx_i\bx_i^\sT\), \(\hbSigma_{-i} = \frac{1}{n}\sum_{j\neq i}\bx_j\bx_j^\sT\), and \(z \in \R\).

In \citet{bach2024high}'s analysis, the negligibility of \(\Delta\) arises from the assumption that the components of \(\bx_i\) follow a sub-Gaussian distribution, which leads to the Hanson-Wright inequality
\[
\mathbb{P} \left[ \left| \bx_i^\sT \bx_i - \mathrm{tr}(\bSigma) \right| \leq c \left( t \|\bSigma\|_{\mathrm{op}} + \sqrt{t} \|\bSigma\|_F \right) \right] \geq 1 - 2e^{-t}.
\]

In this way, \cref{ass:concentrated_LR} is also sufficient to establish the negligibility of \(\Delta\).

After obtain \cref{eq:trA1,eq:trA2} and the negligibility of \(\Delta\), we can follow \citet{bach2024high}'s argument and derive the rest asymptotic deterministic equivalence.

Finally, with these observations, we can eliminate the reliance on \cref{ass:asym} and instead rely solely on \cref{ass:concentrated_LR} to derive all the asymptotic results.


\input{arxiv_version/files/Appendix/Asymptotic_deterministic_equivalents_for_random_feature_regression}


\input{arxiv_version/files/Appendix/Non-asymptotic_deterministic_equivalents_for_random_feature_regression}


\input{arxiv_version/files/Appendix/Relationship_between_test_error_and_norm_for_random_feature_regression}
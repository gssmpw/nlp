\section{Experiments}
\subsection{Experiment Settings}

\noindent\textbf{Tasks.}
We evaluate two tasks in the airfoil inverse design problem: \textit{conditional airfoil generation} and \textit{freestyle airfoil editing}.
In the conditional generation task, the model is given a set of 11 geometric parameters that describe the airfoil geometry. Detailed parameter definitions are provided in the Supplementary Materials. The model must generate airfoils that satisfy these geometric constraints.
In the freestyle editing task, the model takes an original airfoil and a target modification, such as adjusting the position of a specific point on the airfoil. \emph{The selected point can be any location on the airfoil surface.} The model must generate an airfoil that reflects the specified modification.

% \vspace{1.5mm}
\noindent\textbf{Metrics.} We adopt the metrics introduced in AFBench~\cite{liu2024afbench} to evaluate the generated airfoils:

\underline{\textit{Label Error}} measures the difference between the physical parameters of the generated or edited airfoil and the intended target parameters, calculated as $\sigma_i = \left| \hat{p}_i - p_i \right|$,
where $\sigma_i$ is the label error for the $i$-th parameter, $\hat{p}_i$ is the $i$-th geometric parameter from the generated airfoil, and $p_i$ is the corresponding target parameter. Smaller values indicate better alignment with the target parameters.

\underline{\textit{Diversity}} quantifies the variety of generated airfoils, calculated as $D = \frac{1}{n} \sum_{i=1}^{n} \log \det(L_{S_i})$,
where $n$ is the number of samples, and $L_{S_i}$ is the similarity matrix of the $i$-th subset, computed based on Euclidean distances between airfoils in the subset. Higher values indicate greater diversity among generated airfoils.

\underline{\textit{Smoothness}} measures the geometric smoothness of the generated airfoils, calculated as:
\begin{equation} \small
    M = \sum_{i=1}^{N} \text{Distance}(P_n, P_{n-1} P_{n+1}),
\end{equation}
where $P_n$ is the $n$-th point, and $P_{n-1} P_{n+1}$ is the line segment between adjacent points. The function $\text{Distance}(P_n, P_{n-1} P_{n+1})$ computes the perpendicular distance from $P_n$ to this line segment. Smaller values indicate better geometric quality.

% \vspace{1.5mm}
\noindent\textbf{Datasets.} To benchmark our method, we conduct experiments on three datasets: UIUC~\cite{selig1996uiuc}, Supercritical Airfoil (Super), and AF-200K.
UIUC contains 1,600 designed airfoil geometries.
Super focuses on supercritical airfoils and includes approximately 20,000 airfoil samples.
AF-200K consists of 200,000 highly diversified airfoil samples.

% \vspace{1.5mm}
\noindent\textbf{Baselines.} We include the baseline models proposed in AFBench~\cite{liu2024afbench}, specifically the conditional VAE (CVAE), conditional GAN (CGAN), the modified VAE with PARSEC parameters and control keypoints (PK-VAE), along with PK-GAN, PKVAE-GAN, the U-Net-based PK-DIFF, and the transformer-based PK-DIT.

\input{tables/conditional_generation}
\input{tables/edit}
\input{tables/super_res}

% \vspace{1.5mm}
\noindent\textbf{Implementation Details.} On the AF-200K dataset, we trained for 2 million iterations with a batch size of 2,048 using 8 NVIDIA 4090 GPUs. On the Supercritical Airfoil dataset, we trained for 1 million iterations with a batch size of 256 on a single NVIDIA 4090 GPU. We use the Matérn kernel function as the kernel for the Gaussian process at time $t=0$. Other training hyperparameters are detailed in the Supplementary Materials.

\subsection{Main Results}
% \vspace{1.5mm}
\noindent\textbf{Conditional Airfoil Generation.}

As shown in Table~\ref{tab:cond_gen}, FuncGenFoil significantly outperforms the strongest baseline method (PK-DIT) across all metrics.
For \textit{label error}, FuncGenFoil achieves a reduction in average error by \textbf{88.5\%} on UIUC, \textbf{99\%} on Super, and \textbf{74.4\%} on AF-200K.
This substantial decrease in label error underscores the effectiveness of our approach in generating airfoils that more precisely adhere to target geometric  parameters.
In terms of \textit{diversity}, FuncGenFoil demonstrates notable improvements, surpassing the best baseline methods by \textbf{75.4}, \textbf{14.6}, and \textbf{21.6} on UIUC, Super, and AF-200K, respectively.
This highlights the model's superior capability in capturing and generating a broader spectrum of valid airfoil designs.
Additionally, our generated airfoils exhibit enhanced surface \textit{smoothness}, as evidenced by reductions of \textbf{0.99} and \textbf{4.86} in smoothness values ($10^{-2}$) on the UIUC and Super datasets, respectively.
This improvement is particularly crucial for aerodynamic performance, as smoother airfoil surfaces contribute to reduced drag and improved flow characteristics.

% \vspace{1.5mm}
\noindent\textbf{Freestyle Airfoil Editing.}
Table~\ref{tab:edit} shows the average performance across 300 editing cases using FuncGenFoil. In each case, the model adjusts 2 to 4 randomly selected positions on the wing surface to target locations over 10 fine-tuning steps, with edit scales ranging from $1 \times 10^{-4}$ to $4 \times 10^{-4}$. The results demonstrate that FuncGenFoil can perform accurate airfoil editing with minimal errors (less than \boldmath$2.75 \times 10^{-7}$ MSE) and high surface smoothness (less than \textbf{1.16} $\times 10^{-2}$ smoothness value) with just a few fine-tuning steps.
Fig.~\ref{fig:airfoil_edit_finetuning} illustrates the editing requirements and generated airfoils during the fine-tuning stage. It shows that our model faithfully completes the freestyle editing task by generating reasonable airfoils according to user-specified editing requirements.

\input{figures/figure_for_editing}

% \vspace{1.5mm}
\noindent\textbf{Any-Resolution Airfoil Generation.}
One of the key advantages of FuncGenFoil is its ability to generate airfoils at any resolution while maintaining high generation quality. This is achieved by representing airfoils as functions and learning resolution-independent function transformations, enabling flexible and consistent airfoil generation across different scales.
To evaluate high-resolution generation, we use the model trained on the Supercritical Airfoil dataset at a resolution of 257 and sample new airfoils at resolutions of 513 and 1025. We then assess these higher-resolution airfoils using the same metrics as in the conditional generation task. The results are presented in Table~\ref{tab:super_res}.
We observe consistent generation quality at 2$\times$ and even 4$\times$ the training resolution, with a maximum increase of \textbf{9.1$\times10^{-3}$} in average label error, a decrease of \textbf{16.1} in diversity, and an increase of \textbf{0.67$\times10^{-2}$} in smoothness value.

\noindent\textbf{Aerodynamic Simulation.}
To further assess the physical properties of the generated airfoils and validate the effectiveness of our method, we analyze their aerodynamic performance using the NASA Common Research Model (CRM)~\footnote{\url{https://commonresearchmodel.larc.nasa.gov/}} and perform Reynolds-Averaged Navier-Stokes (RANS) computational fluid dynamics (CFD) simulations on the generated samples.
The CRM dataset contains 135,000 CRM wing geometries along with their corresponding aerodynamic performance, computed using the RANS CFD solver ADflow~\cite{Mader2020a}.
We pretrain the FuncGenFoil model on all 135,000 CRM wing geometries and generate 500 new CRM wing geometries for RANS CFD evaluation. We analyze the lift-to-drag ratio ($L/D$) of these newly generated geometries and compare them with the original dataset, as shown in Fig.~\ref{fig:crm_lift_drag}. 
Our results indicate that the $L/D$ distribution of the generated samples closely aligns with that of the original dataset, with the highest density occurring around $L/D = 19$, demonstrating the model's ability to learn and generate physically plausible wing geometries. Additionally, we visualize the coefficient of pressure contours for selected CFD cases in Fig.~\ref{fig:crm_cp}. These visualizations confirm that FuncGenFoil can generate airfoils with diverse aerodynamic performance characteristics.

\begin{figure}[t]
    \small
    \centering
      \includegraphics[width=\linewidth]{assets/cl_cd.pdf}
      \caption{Comparison of the lift-to-drag ratio histograms for CRM wings in the original dataset and the samples generated by our FuncGenFoil model.}
      \label{fig:crm_lift_drag}
      \vspace{-10pt}
\end{figure}

\begin{figure}[t]
    \small
    \centering

    \begin{subfigure}{0.23\textwidth}
        \centering
        \includegraphics[width=\linewidth]{assets/crm_cp1.jpg}
        %\caption{Image 1}
    \end{subfigure}
    \begin{subfigure}{0.23\textwidth}
        \centering
        \includegraphics[width=\linewidth]{assets/crm_cp2.jpg}
        %\caption{Image 2}
    \end{subfigure}
    
    \vspace{0.5cm} % Adds vertical space between rows
    
    \begin{subfigure}{0.23\textwidth}
        \centering
        \includegraphics[width=\linewidth]{assets/crm_cp3.jpg}
        %\caption{Image 3}
    \end{subfigure}
    \begin{subfigure}{0.23\textwidth}
        \centering
        \includegraphics[width=\linewidth]{assets/crm_cp4.jpg}
        %\caption{Image 4}
    \end{subfigure}

    \caption{Visualization of the pressure coefficient for the generated CRM wings, obtained through aerodynamic simulation.}
    \label{fig:crm_cp}
    % \vspace{-15pt}
\end{figure}


\subsection{Ablation Study}

We first ablate the use of the Matérn kernel $K$ with different parameters as the kernel function for the sampled Gaussian process. 
As shown in Table~\ref{tab:ablate_params}, we compare the cases of Matérn kernel $\nu = 1.5$, $l = 0.01$, and Matérn kernel $\nu = 2.5$, $l = 0.03$, where the latter is smoother due to the combined effect of both parameters. 
Notably, the limits of $l = 0$ and $\nu \to \infty$ correspond to pure white noise and the RBF kernel, respectively.
To further highlight the importance of kernel function selection, we also test two models of different sizes (by setting different FNO modes).
From Table~\ref{tab:ablate_params}, we observe that a smoother kernel improves both the smoothness and accuracy of the generated airfoils. 
Additionally, the comparison highlights that, under our setup, selecting a smoother kernel leads to a more substantial performance improvement than increasing the model size. This underscores the benefit of modeling the function object in the airfoil generation task rather than modeling discrete points.

In Table~\ref{tab:ablate_initialize}, we compare the MSE of constraint condition calculations in the airfoil editing task using two initialization schemes: (1) using the latent variables obtained through ODE inversion of the original airfoil as the prior, and (2) using a zero prior $u_0=0$ without ODE inversion. Both schemes are fine-tuned with the same number of iterations.
As shown, the ODE inversion-based prior significantly reduces the MSE compared to the zero prior, with a maximum reduction of \textbf{84.85}.
This underscores the importance of incorporating original airfoil information during the initialization process.

\begin{table}[t]
    \centering
    \renewcommand{\arraystretch}{1.2} % 调整行间距，避免压缩
    \caption{Ablation study on the impact of different kernels and model sizes for the conditional airfoil generation task.}
    \begin{tabular}{ccccc}
        \toprule
        Matérn $\nu$ & Matérn $l$ & FNO modes & $\bar{\sigma}\downarrow$ & $\mathcal{M} \downarrow$\\
        \hline
        1.5 & 0.01 & 32 & 0.108 & 0.0119 \\
        2.5 & 0.03 & 32 & 0.013 & 0.0098 \\
        1.5 & 0.01 & 48 & 0.039 & 0.0101 \\
        2.5 & 0.03 & 48 & 0.013 & 0.0098 \\
        \bottomrule
    \end{tabular}
    \vspace{-15pt}
    \label{tab:ablate_params}
\end{table}

\begin{table}[ht]
\centering
\caption{Ablation study on the effect of different latent variable initialization methods for the airfoil editing task.}
\begin{tabular}{ccc}
\toprule
\multirow{2}{*}{\textbf{Edit scale}} & \multicolumn{2}{c}{\textbf{MSE}$\mathcal\downarrow (10^{-7})$}            \\ \cline{2-3} 
                            & \textbf{w/} ODE inversion & \textbf{w/o} ODE inversion \\ \midrule
0.0001                      & 2.42 \tiny($\downarrow$83.88)           & 86.3             \\
0.0002                      & 2.46 \tiny($\downarrow$84.14)           & 86.6             \\
0.0004                      & 2.75 \tiny($\downarrow$84.85)           & 87.6             \\
\bottomrule
\end{tabular}
\label{tab:ablate_initialize}
\end{table}
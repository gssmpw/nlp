% Add to preamble:
\newgeometry{left=1cm,right=1cm,top=2cm,bottom=2cm} % Reduce margins for this section

\begin{samepage}
    \subsection{Execution Curves Graphs}
    \label{sec:execution_curves} 
    \vspace{0.5cm}
\end{samepage}

\newcommand{\formatLoss}[1]{%
    \ifnum\pdfstrcmp{#1}{absolute_vwap_loss}=0
        Absolute VWAP Loss%
    \else\ifnum\pdfstrcmp{#1}{quadratic_vwap_loss}=0
        Quadratic VWAP Loss%
    \else\ifnum\pdfstrcmp{#1}{volume_curve_loss}=0
        Volume Curve Loss%
    \fi\fi\fi
}
\captionsetup{font=small}
% Define the assets, steps, and models we want to display
\newcommand{\assetlist}{BTC,ETH,BNB,ADA,XRP}
\newcommand{\stepslist}{6,12,48}
\newcommand{\losslist}{absolute_vwap_loss, quadratic_vwap_loss, volume_curve_loss}

\foreach \steps in \stepslist {
    \foreach \asset in \assetlist {
        \FloatBarrier
        \ifnum\pdfstrcmp{\steps}{6}=0\relax%
        \ifnum\pdfstrcmp{\asset}{BTC}=0\relax%
        \else
            \clearpage
        \fi
        \else
            \clearpage
        \fi
        
        \begin{samepage}
            \subsubsection{\asset{} Execution Curves with \steps{} Steps Ahead}
            \vspace{0.3cm}
        \end{samepage}
        
        \begin{multicols}{3}
            \foreach \loss in \losslist {
                \begin{figure}[H]
                    \centering
                    \includegraphics[width=0.8\linewidth]
                    {appendix/figures/vwap_execution_allocation_StaticVWAP_with_TLN_using_\loss_\asset_\steps_steps.jpg}
                    \caption{Static w. TLN (\formatLoss{\loss})}
                    \label{fig:dynamic_vwap_static_tln_volume_curve_graph_\asset_\steps_\loss}
                \end{figure}
    
                \begin{figure}[H]
                    \centering
                    \includegraphics[width=0.8\linewidth]
                    {appendix/figures/vwap_execution_allocation_StaticVWAP_with_TKAN_using_\loss_\asset_\steps_steps.jpg}
                    \caption{Static w. TKAN (\formatLoss{\loss})}
                    \label{fig:dynamic_vwap_static_tkan_volume_curve_graph_\asset_\steps_\loss}
                \end{figure}
    
                \begin{figure}[H]
                    \centering
                    \includegraphics[width=0.8\linewidth]
                    {appendix/figures/vwap_execution_allocation_StaticVWAP_with_LSTM_using_\loss_\asset_\steps_steps.jpg}
                    \caption{Static w. LSTM (\formatLoss{\loss})}
                    \label{fig:dynamic_vwap_static_lstm_volume_curve_graph_\asset_\steps_\loss}
                \end{figure}
    
                \begin{figure}[H]
                    \centering
                    \includegraphics[width=0.8\linewidth]
                    {appendix/figures/vwap_execution_allocation_DynamicVWAP_with_TKAN_using_\loss_\asset_\steps_steps.jpg}
                    \caption{Dynamic w. TKAN (\formatLoss{\loss})}
                    \label{fig:dynamic_vwap_dynamic_tkan_volume_curve_graph_\asset_\steps_\loss}
                \end{figure}
    
                \begin{figure}[H]
                    \centering
                    \includegraphics[width=0.8\linewidth]
                    {appendix/figures/vwap_execution_allocation_DynamicVWAP_with_LSTM_using_\loss_\asset_\steps_steps.jpg}
                    \caption{Dynamic w. LSTM (\formatLoss{\loss})}
                    \label{fig:dynamic_vwap_dynamic_lstm_volume_curve_graph_\asset_\steps_\loss}
                \end{figure}
            }

        \end{multicols}
        
        \FloatBarrier
        \clearpage
    }
}
\restoregeometry
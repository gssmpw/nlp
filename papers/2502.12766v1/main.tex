\documentclass[11pt,final]{article}

%Added after EC
\usepackage{xcolor}


%Make sure the order of begin document, title, author, abstract, make title is correct
%%%%%%%%%%%%%%%%


\usepackage{fullpage}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{lmodern}



\usepackage[numbers,sort&compress]{natbib} 
\setcitestyle{numbers}

\usepackage[colorlinks=true]{hyperref}
\hypersetup{
     colorlinks  = true,
     urlcolor    = teal,
	 citecolor   = teal,
	 linkcolor   = red
}




\usepackage[ruled,noend,linesnumbered]{algorithm2e} % For algorithms
\renewcommand{\algorithmcfname}{ALGORITHM}
\SetAlFnt{\small}
\SetAlCapFnt{\small}
\SetAlCapNameFnt{\small}
\SetAlCapHSkip{0pt}
\IncMargin{-\parindent}



\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{lmodern}
\usepackage{url}            % simple URL typesetting
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{booktabs}       % professional-quality tables
%\usepackage[linesnumbered,ruled,noend]{algorithm2e}

%Make sure this appears AFTER ams packages, etc.
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{conjecture}{Conjecture}[section]
\newtheorem{definition}{Definition}[section]
\newtheorem{example}{Example}[section]
\newtheorem{remark}{Remark}[section]


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%Mine%%%%%%%%%%%%%%%%


\input{defs}
\Comments=1
\Includeappendix=1
\Putacknowledgement=0

\newcommand{\nonl}{\renewcommand{\nl}{\let\nl\oldnl}}% Remove line number for one line in algorithm2e
\newcommand{\ise}{\textsc{IRSR}}
\newcommand{\ALG}{{\small\textnormal{\textsf{ALG}}}}
\newcommand{\OPT}{{\small\textnormal{\textsf{OPT}}}}
\newcommand{\OGP}{{\small\textnormal{\textsf{OGP}}}}
\newcommand{\SEGB}{{\small\textnormal{\textsf{IREGB}}}}
\newcommand{\ICSEGB}{{\small\textnormal{\textsf{IC-IREGB}}}}
\usepackage{nicefrac}
\usepackage{forest}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{enumitem}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% Choose a citation style by commenting/uncommenting the appropriate line:
%\setcitestyle{acmnumeric}


% Title. Note the optional short title for running heads. In the interest of anonymization, please do not include any acknowledgements.
\begin{document}
\title{Efficient Individually Rational Recommender System under Stochastic Order}

% Anonymized submission.


\author{
Gal Bahar%
\thanks{%
    {Technion---Israel Institute of Technology (\url{bahar@campus.technion.ac.il})}}
\and Omer Ben{-}Porat%
\thanks{%
    {Technion---Israel Institute of Technology (\url{omerbp@technion.ac.il})}, corresponding author}
\and Kevin Leyton{-}Brown%
\thanks{%
    {University of British Columbia, Canada (\url{kevinlb@cs.ubc.ca})}}
\and Moshe Tennenholtz%
\thanks{%
    {Technion---Israel Institute of Technology (\url{moshet@ie.technion.ac.il})}}
}

\maketitle
% Abstract. Note that this must come before \maketitle.
\begin{abstract}
With the rise of online applications, recommender systems (RSs) often encounter constraints in balancing exploration and exploitation. Such constraints arise when exploration is carried out by agents whose individual utility should be balanced with overall welfare. Recent work~\cite{Fiduciary} suggests that recommendations should be \emph{individually rational}. Specifically, if agents have a default arm they would use, relying on the RS should yield each agent at least the reward of the default arm, conditioned on the knowledge available to the RS. Under this individual rationality constraint, striking a balance between exploration and exploitation becomes a complex planning problem. We assume a stochastic order of the rewards (e.g., Bernoulli, unit-variance Gaussian, etc.), and derive an approximately optimal algorithm. Our technique is based on an auxiliary Goal Markov Decision Process problem that is of independent interest. Additionally, we present an incentive-compatible version of our algorithm.
\end{abstract}



% Title page for title and abstract only.
%\begin{titlepage}




\input{body}
\section*{Acknowledgments}\label{sec:Acknowledgments}
The work of O. Ben-Porat was supported by the Israel Science Foundation (ISF; Grant No. 3079/24). 

\bibliographystyle{plainnat}
\input{main.bbl}







% Acknowledgments---Will not appear in anonymized version
% \begin{credits}
% \subsubsection{\ackname}
% The work of G. Bahar, O. Ben-Porat and M. Tennenholtz is funded by the European Research Council (ERC) under the European Union's Horizon 2020 research and innovation programme (grant agreement n$\degree$  740435). The work of K. Leyton-Brown is funded by the NSERC Discovery Grants program, DND/NSERC Discovery Grant Supplement, Facebook Research and Canada CIFAR AI Chair Amii. Part of this work was done while K. Leyton-Brown was a visiting researcher at Technion - Israeli Institute of Science and was partially funded by the European Union's Horizon 2020 research and innovation programme (grant agreement n$\degree$  740435).
% \end{credits}

{\ifnum\Includeappendix=1{ %statrting appendices
\appendix

\section{Proof Outline for Theorem \ref{thm:optimal policy}}\label{sec:thm1 outline}
\input{input/preliminaries_for_Theorem}

\section{Proof of Lemma \ref{lemma:equivalence}}\label{sec:proof of lemma}
\input{input/safe_exploration_lemma_proof}


\section{Additional Statements for Lemma \ref{lemma:equivalence}}
\input{input/safe_exploration_lemma_additions}


\section{Base Cases for Lemma \ref{lemma:equivalence}}\label{sec:base for lemma}
\input{input/safe_exploration_lemma_base}

\section{Proof of Theorem \ref{thm:holy grail}}\label{sec:proof of thm}
\input{input/safe_exploration_theorem}

\section{Statements for Theorem \ref{thm:holy grail}}\label{sec:for theorem}
%\omer{the next files is commented out}
\input{input/safe_exploration_thm_additions}


\section{Proofs of Observations and Propositions from Sections \ref{sec:infinite} and \ref{sec:policy to algorithm}}\label{sec:appendix main body}
\input{input/body-proofs}

\section{Proof of Statements from Section \ref{sec:thm1 outline}}\label{sec:aux}
%\subsection{Proof of {Proposition \ref{prop:optimal p valid}}}\label{subsec:proof of propo p valid}
\input{input/proposition_p_valid}
%\subsection{{\red is it needed?}Statements for Subsection \ref{subsec:stopchastic} \omer{put it in a new section about the conjecture}}\label{subsec: statments}
\input{input/auxiliary_statements}
%I have commented it out for the EC version
%\input{input/BIC-appendix}
\input{input/BIC-onlyproof}
}


\fi}
\end{document}

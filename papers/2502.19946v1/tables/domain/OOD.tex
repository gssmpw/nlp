\renewcommand\arraystretch{0.9}
\begin{table*}[!t]
  \centering
  \small
  \scalebox{0.9}[0.9]{
  \begin{tabular}{l*{7}c}
    \toprule
    {Method}      & ImageNet   &  ImageNet-A  &  ImageNet-V2  & ImageNet-R 
    & ImageNet-S   
    &\textit{{Average}}  & \textit{{OOD Average}}     \\
  \midrule
  CLIP-ResNet-50 &59.81&	23.24&	52.91	& {60.72}	& 35.48 &	46.43&	43.09           \\ 
  \midrule
  CoOp  &  \textbf{63.33} &  23.06  &   55.40     &  56.60   &  34.67   &     46.61   &     42.43       \\
  
  CoCoOp &  \underline{62.81} &  23.32  &   55.72     &  57.74  &  34.48   &     46.81   &    42.82   \\
Tip-Adapter & 62.03 & 23.13 & 53.97 & 60.35  & 35.74 & 47.04 & 43.30 \\
  \midrule
  TPT  &  60.74 & 26.67  &    54.70   &  59.11   &  35.09   &    47.26    &     43.89    \\
  DiffTPT & 60.80 & \underline{31.06} & \underline{55.80} & 58.80 & 37.10 & 48.71 & 45.69 \\
    \midrule
     $\rm{TDA}^{*}$  & 61.35 & 30.29 & 55.54 & \underline{62.58} & \underline{38.12} & \underline{49.58} & \underline{46.63} \\
    
    \rowcolor{gray!30} ${\mathbf{SOBA~(Ours)}}^{*}$  & 61.85 & \textbf{31.54} & \textbf{55.92} & \textbf{62.91} & \textbf{38.85} & \textbf{50.21} & \textbf{47.31} \\
  \midrule
  \midrule
  CLIP-ViT-B/16 & 68.34&	49.89&	61.88&	{77.65}&	48.24&	61.20&	59.42             \\
  \midrule
  CoOp  &  \textbf{71.51} &  49.71  &   64.20     &  75.21   &  47.99   &   61.72     &   59.28  \\
  
  CoCoOp &  \underline{71.02}  & 50.63  & 64.07       &  76.18   &  48.75   &   62.13     &   59.91  \\
 Tip-Adapter& 70.75 & 51.04 & 63.41 & 77.76 & 48.88 & 62.37 & 60.27 \\
  \midrule
  TPT &  68.98  & 54.77  & 63.45       &  77.06   &  47.94   &   62.44     &   60.81 \\
  DiffTPT  &  70.30  & 55.68  & 65.10       &  75.00   &  46.80   &   62.28     &   60.52 \\					 	 	 	 
    MTA & 69.29 & 57.41 & 63.61 & 76.92 & 48.58 & 63.16 & 61.63 \\
   MTA+Ensemble  & 70.08 & 58.06 & 64.24 & 78.33 & 49.61 & 64.06 & 62.56 \\
   
   \midrule
   $\rm{TDA}^{*}$  & 69.51 & \underline{60.11} & \underline{64.67} & \underline{80.24} & \underline{50.54} & \underline{65.01} & \underline{63.89} \\
 \rowcolor{gray!30} ${\mathbf{SOBA~(Ours)}}^{*}$  & 70.90 & \textbf{61.06} & \textbf{65.83} & \textbf{80.79} & \textbf{52.57} & \textbf{66.23} & \textbf{65.06} \\ 					 	 
    \bottomrule
  \end{tabular}
}
\caption{\textbf{Results on the OOD Benchmark}. Compare the performance of our method with existing methods on OOD benchmark. Our method performs best on both backbones. The best results are in \textbf{bold} and the second-best results are \underline{underlined}. Among the methods we compared, CoOp~\cite{coop} and CoCoOp~\cite{cocoop} are fine-tuned on the training set; TPT~\cite{tpt} and DiffTPT~\cite{difftpt} require backpropagation to update the prompts; TDA~\cite{tda}, and our method do not require any backpropagation to update parameters. \textit{OOD average} refers to the average accuracy on the four OOD datasets from ImageNet, while \textit{average} refers to the average accuracy across all datasets. ``*'' indicates that this method is a training-free approach in test-time adaptation task.
}
\label{tab:ood-main}
% \vspace{-1mm}
\end{table*}
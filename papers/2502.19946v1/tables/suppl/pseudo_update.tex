\begin{algorithm*}
\setstretch{1.2}
  \caption{Queue update process
    \label{alg:update}}
  \begin{algorithmic}[1]
   \State \textbf{Input: }{CLIP logits of $f_{test}$: $logits_{ori}$, image embedding: $f_{test}$, pseudo-label of $f_{test}$: $\hat{l}$, old queue: $L^{t-1}$, queue capacity: $\rm{K}$.}
    \If{$|L^{t-1}_{\hat{l}}| < K$}
    \State $L^{t}_{\hat{l}}$ $\gets$ \texttt{EnQueue}($f_{test}$, $L^{t-1}_{\hat{l}}$)
    \Else
        \State ${\rm{H}}_{max}$ $\gets$ \texttt{max}(H($L^{t-1}_{\hat{l}}$)) \Comment{Get the maximum entropy in $L^{t-1}_{\hat{l}}$.}
        \If{${\rm{H}}(logits_{ori})<{\rm{H}}_{max}$}
          \State {Dequeue feature with ${\rm{H}}_{max}$: } 
          $L^{t-1}_{\hat{l}}$ $\gets$ \texttt{DeQueue}($f_{test}^{ent}$, $L^{t-1}_{\hat{l}}$)
          \State {Enqueue feature $f_{test}$: }$L^{t}_{\hat{l}}$ $\gets$ \texttt{EnQueue}($f_{test}$, $L^{t-1}_{\hat{l}}$)
        \Else
            \State $L^{t}_{\hat{l}}$ $\gets$ $L^{t-1}_{\hat{l}}$
        \EndIf
    \EndIf
    \State \Return{$L^{t}$} \Comment{update the queue}
  \end{algorithmic}
\end{algorithm*}
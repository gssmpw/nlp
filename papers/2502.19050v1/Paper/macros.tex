
\usepackage{amsfonts,amsmath,amssymb,amsthm,graphicx}
\usepackage{fullpage}
\usepackage{changepage}
\usepackage{enumerate}
\usepackage{scalerel}
\usepackage{accents}
\usepackage[margin=1in]{geometry}
\usepackage{float}
\usepackage[caption = false]{subfig}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage[normalem]{ulem}
\usepackage{array}



\usepackage{natbib}
\usepackage{csquotes}
\usepackage{comment}

\usepackage{bbm}



\usepackage{cleveref}
\crefname{claim}{claim}{claims}

\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.17} 
\usetikzlibrary{patterns}
\usepgfplotslibrary{fillbetween}
\usetikzlibrary{intersections}

\usepackage[ruled,vlined,linesnumbered]{algorithm2e}
\Crefname{algocf}{Algorithm}{Algorithms}
\allowdisplaybreaks


\usetikzlibrary{arrows, decorations.markings}

% for double arrows a la chef
% adapt line thickness and line width, if needed
\tikzstyle{vecArrow} = [thick, decoration={markings,mark=at position
   1 with {\arrow[semithick]{open triangle 60}}},
   double distance=1.4pt, shorten >= 5.5pt,
   preaction = {decorate},
   postaction = {draw,line width=1.4pt, white,shorten >= 4.5pt}]
\tikzstyle{innerWhite} = [semithick, white,line width=1.4pt, shorten >= 4.5pt]



\allowdisplaybreaks
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}% reset theorem numbering for each chapter





\newtheorem{informal}{Informal Theorem}


\theoremstyle{plain}
\newtheorem{definition}{Definition}[section] % definition numbers are dependent on theorem numbers
\newtheorem{example}[definition]{Example}
% \newtheorem{assumption}[definition]{Assumption}
\newtheorem{remark}[definition]{Remark}
\newtheorem{conjecture}[definition]{Conjecture}
\newtheorem{task}[definition]{Task}

\theoremstyle{plain}
\newtheorem{assumption}{Assumption}
% \newenvironment{numberedassumption}[1]{%
% \renewcommand{\thedefinition}{#1}%
% \begin{assumption}}{\end{assumption}\addtocounter{definition}{-1}}

\newenvironment{numbereddefinition}[1]{%
\renewcommand{\thedefinition}{#1}%
\begin{definition}}{\end{definition}\addtocounter{definition}{-1}}
\usepackage{xfrac}
\usepackage{thm-restate}


\newcommand{\xhdr}[1]{\vspace{2mm} \noindent{\bf #1}}

\newcommand{\Cost}[2][]{\text{\bf COST}\ifthenelse{\not\equal{}{#1}}{_{#1}}{}\!\left[{\def\givenn{\middle|}#2}\right]}
\renewcommand{\d}{\mathrm{d}}   % for integrals
\newcommand{\LHS}{{\rm{LHS}}} % for inequalities
\newcommand{\RHS}{{\rm{RHS}}} % for inequalities


	\newcommand{\seller}{s}
\newcommand{\sellers}{\mathbf{\seller}}
\newcommand{\buyer}{b}
\newcommand{\buyers}{\mathbf{\buyer}}
\newcommand{\OPT}{\texttt{OPT}}
\newcommand{\BCGZ}{\texttt{BCGZ}}
\newcommand{\event}{\mathcal{E}}
\newcommand{\HM}{\texttt{HM}}
\newcommand{\eventHat}{\hat{\event}}
\newcommand{\BI}{\mathcal{I}_{bt}}
\newcommand{\BRO}{\texttt{RO}_{bt(i,j,l,h)}}
\newcommand{\BOPT}{\OPT_{bt(i,j,l,h)}}
\newcommand{\BSO}{\texttt{BSO}}
\newcommand{\BBO}{\texttt{BBO}}
\newcommand{\TR}{\texttt{TR}}
\newcommand{\starred}{^*}
\newcommand{\mech}{\mathcal{M}}
\newcommand{\alloc}{x}
\newcommand{\price}{p}
\newcommand{\cost}{c}
\newcommand{\hcost}{\bar\cost}
\newcommand{\val}{v}
\newcommand{\buyerdist}{F}
\newcommand{\buyerdistp}{\tilde{F}}
\newcommand{\sellerdist}{G}
\newcommand{\sellerdistp}{\tilde{G}}
\newcommand{\lval}{\underline{\val}}
\newcommand{\distribution}{D}
\newcommand{\topbuyer}{\buyer_{(1)}}
\newcommand{\topseller}{\seller_{(1)}}
\newcommand{\firstbuyer}{\topbuyer}
\newcommand{\firstseller}{\topseller}
\newcommand{\secondbuyer}{\buyer_{(2)}}
\newcommand{\secondseller}{\seller_{(2)}}
\newcommand{\eventindex}{i,j,l,h}
\newcommand{\condistributions}{\left(
\distribution_{\firstbuyer}|_{\geq \secondbuyer},
\distribution_{\firstseller}|_{\leq \secondseller}
\right)}
% \newcommand{\indicator}[1]{{\mathbbm{1}\left\{ #1 \right\}}}

\newcommand{\OPTBT}{\OPT^{(\seller_1, \buyer_1)}}
\newcommand{\OPTTT}{\OPT^{(\seller_1,\seller_2,\buyer_1,\buyer_2)}}
\newcommand{\OPTTTPrimed}{\OPT^{(\seller_1\primed,\seller_2,\buyer_1\primed,\buyer_2)}}
\newcommand{\OPTBTPrimed}{\OPT^{(\seller_1\primed,\buyer_1\primed)}}
\newcommand{\OPTBTDoublePrimed}{\OPT^{(\seller_1\doubleprimed,\buyer_1\doubleprimed)}}
\newcommand{\primed}{^\dagger}
\newcommand{\doubleprimed}{^\ddagger}
\newcommand{\lcost}{\underline{\cost}}
\newcommand{\hval}{\bar{\val}}
\newcommand{\util}{u}

	\newcommand{\YF}[1]{\textcolor{blue}{ (\em Yiding: \bf#1)}}

 \newcommand{\reals}{\mathbb{R}}

 
\newcommand{\buyerutil}{u}
\newcommand{\sellerutil}{\pi}
\newcommand{\buyertransfer}{\price_b}
\newcommand{\sellertransfer}{\price_s}
\newcommand{\buyeralloc}{\alloc_b}
\newcommand{\selleralloc}{\tilde{\alloc}}

\newcommand{\bid}{b}
\newcommand{\valTilde}{\tilde{\val}}
\newcommand{\costTilde}{\tilde{\cost}}
\newcommand{\buyerbid}{\valTilde}
\newcommand{\sellerbid}{\costTilde}

\newcommand{\buyerdistpdf}{f}
\newcommand{\sellerdistpdf}{g}

\newcommand{\GFT}[2][]{\texttt{GFT}\ifthenelse{\not\equal{}{#1}}{_{#1}}{}\!\left[{\def\givenn{\middle|}#2}\right]}

\newcommand{\buyerexanteutil}{U}
\newcommand{\sellerexanteutil}{\Pi}
\newcommand{\buyerexantetransfer}{P_b}
\newcommand{\sellerexantetransfer}{P_s}

\newcommand{\fairratio}{\gamma}

\newcommand{\RO}{\texttt{RO}}
\newcommand{\quant}{q}

\newcommand{\PoF}{\Gamma}

\newcommand{\virtualval}{\psi}
% \newcommand{\ironvirtualval}{\bar\virtualval}
\newcommand{\inforentval}{\tilde\psi}
\newcommand{\virtualcost}{\phi}
\newcommand{\inforentcost}{\tilde\phi}

\newcommand{\OPTPlus}{\OPT^+}
\newcommand{\FBest}{\OPTPlus}
\newcommand{\SBest}{\OPT}


\newcommand{\calC}{\mathcal{C}}
\newcommand{\optquant}{\quant_m}
\newcommand{\reserve}{r}
\newcommand{\optreserve}{\reserve_m}

\usepackage{bm}         % <----- for '\bm' command (optional)
\usepackage{mathtools}  % <----- for '\mathrlap' command (necessary)

\newcommand{\mybar}[3]{%
    \mathrlap{\hspace{#2}\overline{\scalebox{#1}[1]{\phantom{\ensuremath{#3}}}}}\ensuremath{#3}
}

\newcommand{\myunderbar}[3]{%
    \mathrlap{\hspace{#2}\underline{\scalebox{#1}[1]{\phantom{\ensuremath{#3}}}}}\ensuremath{#3}
}

\newcommand{\HUnderBar}{\myunderbar{0.8}{0pt}{H}}
\newcommand{\HOverBar}{\mybar{0.68}{2.5pt}{H}}
\newcommand{\MUnderBar}{\myunderbar{0.8}{0pt}{M}}
\newcommand{\MOverBar}{\mybar{0.68}{3pt}{M}}
\newcommand{\LUnderBar}{\myunderbar{0.8}{0pt}{L}}
\newcommand{\LOverBar}{\mybar{0.68}{1.2pt}{L}}

\newcommand{\NoTrade}{\sf No Trade Mechanism}
\newcommand{\FirstBestwithMiddlePrice}{\sf First Best with Middle Price}
\newcommand{\TradeAtHalf}{\sf Split-the-difference Mechanism}
%\newcommand{\TradeAtHalf}{\sf Trade at Half Mechanism}
\newcommand{\SecondPriceAuction}{{\sf Second-Price Auction}}
\newcommand{\FixPrice}{{\sf Fixed Price Mechanism}}
\newcommand{\FixPrices}{{\sf Fixed Price Mechanisms}}
\newcommand{\FPM}{{\sf FPM}}
\newcommand{\RandomOffer}{{\sf Random Offer Mechanism}}
\newcommand{\ROM}{{\sf ROM}}
\newcommand{\BuyerOffer}{{\sf Buyer Offer Mechanism}}
\newcommand{\BOM}{{\sf BOM}}
\newcommand{\SellerOffer}{{\sf Seller Offer Mechanism}}
\newcommand{\SOM}{{\sf SOM}}
\newcommand{\BiasedRandomOffer}{{\sf $\mixprob$-Biased Random Offer Mechanism}}
\newcommand{\NashSocialWelfareMaximizers}{{\sf NSW-Maximizing Mechanisms}}
\newcommand{\BROM}{{\sf $\mixprob$-ROM}}

\newcommand{\SecondBest}{{\sf Second-Best Benchmark}}
\newcommand{\FirstBest}{{\sf First-Best Benchmark}}


\newcommand{\NashSocialWelfareMaximizer}{{\sf NSW-Maximizing Mechanism}}
\newcommand{\NSWM}{{\sf NSWM}}

\newcommand{\exanteutil}{U}
\newcommand{\sellerbenchmark}{\sellerexanteutil^*}
\newcommand{\buyerbenchmark}{\buyerexanteutil^*}
\newcommand{\supp}{{\sf supp}}
\newcommand{\allocs}{\boldsymbol{\alloc}}
\newcommand{\revcurve}{R}
\newcommand{\ironrevcurve}{\bar{\revcurve}}
\newcommand{\buyercdf}{\buyerdist}
\newcommand{\buyerpdf}{\buyerdist'}
\newcommand{\sellercdf}{\sellerdist}
\newcommand{\sellerpdf}{\sellerdist'}
\newcommand{\buyerhazardrate}{\phi}
\newcommand{\sellerhazardrate}{h_s}

\newcommand{\prices}{\boldsymbol{\price}}

\newcommand{\vals}{\boldsymbol{\val}}
\newcommand{\costs}{\boldsymbol{\cost}}

\newcommand{\type}{t}
\newcommand{\types}{\boldsymbol{\type}}

\newcommand{\buyerdists}{\boldsymbol{\buyerdist}}

\newcommand{\LambertFunc}{W}

\newcommand{\fixedPriceGFTPercentageRegular}{{85.1\%}}
\newcommand{\fixedPriceGFTPercentageMHR}{{91.3\%}}
\newcommand{\fixedPriceGFTPercentageUBRegular}{{87.7\%}}
\newcommand{\fixedPriceGFTPercentageUBMHR}{{94.4\%}}


\newcommand{\GFTratio}{\calC}
\newcommand{\mixprob}{\lambda}
\newcommand{\BiasedRandomSide}{{\sf Biased Random Side Optimal Mechanism}}
\newcommand{\RandomSide}{{\sf Random Side Optimal Mechanism}}
\newcommand{\FairBiasedRandomSide}{{\sf Fair Random Side Optimal Mechanism}}
\newcommand{\BuyerSide}{{\sf Buyer Side Optimal Mechanism}}
\newcommand{\SellerSide}{{\sf Seller Side Optimal Mechanism}}
\newcommand{\eps}{\varepsilon}
\newcommand{\SB}{{\sf OPT}}
\newcommand{\FRS}{{\sf FRSO}}
\newcommand{\constantH}{K}

\newcommand{\cumhazard}{\Phi}

\newcommand{\sellerprice}{\tilde{\price}}
\newcommand{\buyerprice}{\price}



\newcommand{\sellerdists}{\boldsymbol{\sellerdist}}

\newcommand{\OPTSB}{\OPT_{\textsc{SB}}}
\newcommand{\OPTFB}{\OPT_{\textsc{FB}}}

\newcommand{\GFTapprox}{\calC}

\newcommand{\ksfairness}{{KS-fairness}}
\newcommand{\ksfair}{{KS-fair}}
\newcommand{\equitable}{{equitable}}
\newcommand{\equitability}{{equitability}}

\newcommand{\ksline}{{KS-line}}

\newcommand{\fprice}{\price_f}
\newcommand{\fquant}{\quant_f}

\newcommand{\exanteutilratio}{\Gamma}
\newcommand{\revratio}{\alpha}
\newcommand{\residuesurplusratio}{\beta}

\newcommand{\mechfamily}{\mathfrak{M}_{\buyerdist,\sellerdist}}
\newcommand{\mechfam}{\mathfrak{M}}

% Noam Macros for Non-overlapping bilateral trade
\newcommand{\pprice}{\price\primed}
\newcommand{\constcost}{c_0}
\newcommand{\constval}{v_0}
\newcommand{\buyerexanteutilp}{\tilde{\buyerexanteutil}}
\newcommand{\sellerexanteutilp}{\tilde{\sellerexanteutil}}
\newcommand{\buyerbenchmarkp}{\buyerexanteutilp^*}
\newcommand{\sellerbenchmarkp}{\sellerexanteutilp^*}
\newcommand{\GFTp}[2][]{\tilde{\texttt{GFT}}\ifthenelse{\not\equal{}{#1}}{_{#1}}{}\!\left[{\def\givenn{\middle|}#2}\right]}
\newcommand{\OPTp}{\tilde{\OPT}}

% Noam macros for bargaining
\newcommand{\btinstance}{(\buyerdist,\sellerdist)}

\newcommand{\convexhull}{\text{ch}}
\newcommand{\bargainprob}{S}
\newcommand{\bargainprobBT}{\bargainprob_{\buyerdist,\sellerdist}}
\newcommand{\dispnt}{d}
\newcommand{\bargainsolution}{f}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\mathcal{N}}

\newcommand{\paretofront}{PO}
\newcommand{\paretoweakfront}{WPO}
\newcommand{\solnash}{N}
\newcommand{\solks}{K}
\newcommand{\soleg}{E}
\newcommand{\solut}{U}
\newcommand{\soldic}[1]{D^{#1}}
\newcommand{\buyerdictator}[1]{\soldic{\buyerutil}(#1)}
\newcommand{\sellerdictator}[1]{\soldic{\sellerutil}(#1)}

\newcommand{\buyercoord}[1]{\buyerutil(#1)}
\newcommand{\sellercoord}[1]{\sellerutil(#1)}

\newcommand{\idealpnt}{a}
\newcommand{\idealp}[1]{\idealpnt^*(#1)}
\newcommand{\idealbuyer}[1]{\buyercoord{\idealp{#1}}}
\newcommand{\idealseller}[1]{\sellercoord{\idealp{#1}}}

\newcommand{\idealutility}[1]{A^*(#1)}

\newcommand{\buyerbenchmarkpoint}{o^\buyerutil}
\newcommand{\sellerbenchmarkpoint}{o^\sellerutil}


\newcommand{\pnta}{x}
\newcommand{\pntb}{y}
\newcommand{\pntc}{z}
\newcommand{\naturals}{\mathbb{N}}

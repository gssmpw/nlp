
\label{sec:improved GFT}

In this section, we focus on the special case where the seller's valuation distribution is a single point mass (known to all). This is equivalent to assuming that the seller has zero value, which is publicly known by all parties. This special case has been studied extensively in the mechanism design literature \citep[e.g.,][]{mye-81,BR-89,HR-09}, mainly from the perspective of a monopolist seller aiming to maximize her revenue. In this special case of a zero-value seller, as trading at price of $0$ is always efficient, the {\FirstBest} and {\SecondBest} become identical, and are equal to the expected value of the buyer, i.e., $\OPTFB=\OPTSB = \expect[\val\sim\buyerdist]{\val}$. 

In \Cref{subsec:optimal GFT upper bound:general instance}, we first present a negative result that matches the GFT approximation of $\frac{1}{2}$ established in \Cref{thm:optimal GFT:general instance}, and thus prove the tightness of the result. Notably, this negative result is derived from a zero-value seller instance  where the buyer's valuation distribution is not regular (\Cref{example:all fair mech:irregular}). Motivated by this, we then study the settings where the buyer's valuation distribution is regular (\Cref{subsec:improved GFT:regular buyer}), and then consider settings that the distribution is MHR (\Cref{subsec:improved GFT:mhr buyer}). As we will show, (significantly) improved GFT-approximations are achievable for such instances. 


\subsection{Matching Negative Result for Zero-Value Seller Instances}
\label{subsec:optimal GFT upper bound:general instance}
In this section we show that even for the simple setting where the seller has zero value, there exists an instance (\Cref{example:all fair mech:irregular}) for which every BIC, IIR, ex ante WBB mechanism that is {\ksfair}, cannot obtain more than half of the {\SecondBest} $\OPTSB$. We note that the buyer's valuation distribution in this instance is not regular. 

\begin{example}
\label{example:all fair mech:irregular}
Fix any $\constantH \geq 1$. Let $\val\primed \triangleq \frac{\constantH}{\sqrt{\ln\constantH} + 1}$. The buyer has a valuation distribution $\buyerdist$ (that is not regular) defined as follows: % Specifically, 
distribution~$\buyerdist$ 
has support $\supp(\buyerdist)=[1, \constantH]$ and cumulative density function $\buyercdf(\val) = \frac{\val - 1}{\val}$ for $\val \in[1,\val\primed]$, $\buyercdf(\val) = 1- \frac{{\ln\constantH}}{(\val/\constantH+\sqrt{\ln\constantH}-1)\cdot \constantH}$ for $\val\in[\val\primed, \constantH]$, and $\buyercdf(\val) = 1$ for $\val \in(\constantH, \infty)$.  
(Namely, there is an atom at $\constantH$ with probability mass of ${\sqrt{\ln\constantH}}/{\constantH}$.)
The seller has a deterministic value of 0. See \Cref{fig:all fair mech:irregular} for an illustration of the revenue curve and the bargaining set. 
\end{example}


\begin{figure}
    \centering
    \subfloat[]{
\input{Figures/fig-fair-mech-SB-example}
\label{fig:all fair mech:irregular:revenue curve}
}~~~~
    \subfloat[]{
\input{Figures/fig-fair-mech-SB-example-util-pair}
\label{fig:all fair mech:irregular:ex ante utility pair}
}
    \caption{Graphical illustration of \Cref{example:all fair mech:irregular}. In \Cref{fig:all fair mech:irregular:revenue curve}, the black curve is the revenue curve of the buyer. In \Cref{fig:all fair mech:irregular:ex ante utility pair}, the shaded region corresponds to all pairs of buyer and seller's ex ante utilities $(\buyerexanteutil,\sellerexanteutil)$ that are achievable by some BIC, IIR, ex ante WBB mechanism. The two black points represent the traders' ex ante utility pairs $(\buyerbenchmark,0)$ and $(0,\sellerbenchmark)$, induced by the {\BuyerOffer} and {\SellerOffer}, respectively. The red dashed line represents utility pairs that are {\ksfair} (i.e., ones with $\buyerexanteutil/\buyerbenchmark = \sellerexanteutil/\sellerbenchmark$). The red square corresponds to a truthful {\ksfair} mechanism whose GFT is at least $\frac{1}{2}$ fraction of the {\SecondBest} $\OPTSB$.}
    \label{fig:all fair mech:irregular}
\end{figure}


\begin{restatable}{proposition}{lemoptimalGFTUB}
\label{lem:optimal GFT upper bound:irregular}
    Fix any $\eps > 0$.
    For any instance in \Cref{example:all fair mech:irregular} with sufficiently large $\constantH$ (as a function of $\eps$), every BIC, IIR, ex ante WBB mechanism $\mech$ that is {\ksfair} obtains at most $(\frac{1}{2} + \eps)$ fraction of the {\SecondBest} $\OPTSB$, i.e., $\GFT{\mech} \leq (\frac{1}{2} + \eps) \cdot \OPTSB$. Moreover, if mechanism $\mech$ further has a deterministic integral allocation rule (i.e., mechanism $\mech$ is a {\FixPrice}), its GFT is at most $\eps$ fraction of the {\SecondBest} $\OPTSB$, i.e., $\GFT{\mech}\leq \eps\cdot \OPTSB$. 
\end{restatable}
Recall that the {\ksfair} {\BiasedRandomOffer} (from \Cref{thm:optimal GFT:general instance}) is a randomized mechanism.\footnote{Namely, if the item is indivisible, the allocation should be randomized. Otherwise (if the item is divisible), the allocation should be fractional.} \Cref{lem:optimal GFT upper bound:irregular} also shows the necessity of the randomization to achieve constant GFT approximation under {\ksfairness}. 

\begin{proof}[Proof of \Cref{lem:optimal GFT upper bound:irregular}]
    In \Cref{example:all fair mech:irregular}, the seller has zero-value, so the {\SecondBest} $\OPTSB$ is equal to the {\FirstBest} $\OPTFB$, and it  satisfies
    \begin{align*}
        \OPTSB = \expect[\val]{\val} =
        \displaystyle\int_1^{\constantH} \val\cdot \d \buyercdf(\val)
        + \constantH\cdot (1 - \buyercdf(\constantH))
        =
        (1 - o_{}(1))\cdot \ln \constantH
    \end{align*}
    Moreover, two traders' benchmark can be computed as
    \begin{align*}
        \sellerbenchmark = \sqrt{\ln \constantH}
        \;\;
        \mbox{and}
        \;\;
        \buyerbenchmark = \OPTSB = (1 - o_{}(1))\cdot \ln \constantH
    \end{align*}
    We now prove the first claim in the lemma statement by contradiction. Suppose there exists BIC, IIR, ex ante WBB, and {\ksfair} mechanism $\mech = (\alloc,\price,\sellerprice)$ whose GFT is a $(\frac{1}{2} + \Omega_{}(1))$-approximation to the {\SecondBest} $\OPTSB$.
    Note that the GFT of mechanism $\mech$ can be upper bounded as
    \begin{align*}
        \GFT{\mech} & = \expect[\val]{\val\cdot \alloc(\val)} 
        \leq
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val)
        +
        \displaystyle\int_{\val\primed}^{\constantH} \val\cdot \d \buyercdf(\val)
        + \constantH\cdot (1 - \buyercdf(\constantH))
        \\
        &{}=
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val)
        +
        o_{}(\ln\constantH)
    \end{align*}
    Invoking the assumption that $\GFT{\mech} \geq (\frac{1}{2} + \Omega_{}(1))\cdot \OPTSB$, we have 
    \begin{align*}
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val) 
        \geq
        \left(\frac{1}{2} + \Omega_{}(1)\right)
        \cdot \ln\constantH
    \end{align*}
    Moreover, since mechanism $\mech$ is BIC, the buyer's interim allocation $\alloc$ is weakly increasing and thus
    \begin{align*}
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val)
        \leq 
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val\primed)\cdot \d \buyercdf(\val)
        =
        (\alloc(\val\primed) - o_{}(1))\cdot \ln\constantH
    \end{align*}
    which further implies 
    \begin{align*}
        \alloc(\val\primed) \geq  \frac{1}{2} + \Omega_{}(1)
    \end{align*}
    We next upper bound the seller's ex ante utility $\sellerexanteutil(\mech)$ as follows
    \begin{align*}
        \sellerexanteutil(\mech) &{} = 
        \sellerprice(0) \overset{(a)}{\leq} 
        \expect[\val]{\price(\val)}
        \overset{(b)}{=}
        \expect[\val]{\virtualval(\val)\cdot \alloc(\val)}
        \overset{(c)}{\leq} 
        \virtualval(\constantH)\cdot (1 - \buyercdf(\constantH))
        +
        \virtualval(\val\primed)\cdot (\buyercdf(\constantH) - \buyercdf(\val\primed)) \cdot \alloc(\val\primed)
        \\
        &{}
        =
        \left(1 - \alloc(\val\primed) + o_{}(1)\right)\cdot \sqrt{\ln\constantH}
        \overset{(d)}{\leq}
        \left(\frac{1}{2} - \Omega_{}(1)\right) \cdot \sqrt{\ln\constantH}
    \end{align*}
    where inequality~(a) holds since mechanism $\mech$ is ex ante WBB, 
    equality~(b) holds due to \Cref{prop:revenue equivalence},
    inequality~(c) holds since the virtual value function $\virtualval$ satisfies $\virtualval(\constantH) = \constantH \geq 0$, $\virtualval(\val) = \virtualval(\val\primed) < 0$ for $\val\in[\val\primed,\constantH)$, $\virtualval(\val) = 0$ for $\val\in[1, \val\primed)$, and the buyer's interim allocation $\alloc$ is weakly increasing due to BIC, and inequality~(d) holds since $\alloc(\val\primed) \geq \frac{1}{2} + \Omega_{}(1)$ argued above.
    
    Meanwhile, the buyer's ex ante utility $\buyerexanteutil(\mech)$ can be lower bounded as 
    \begin{align*}
        \buyerexanteutil(\mech) &{}= \expect[\val]{\val\cdot \alloc(\val) - \price(\val)}
        \overset{(a)}{\geq} \expect[\val]{\val\cdot \alloc(\val)} - \sqrt{\ln\constantH}
        \overset{(b)}{\geq}
        \left(\frac{1}{2} + \Omega_{}(1)\right)
        \cdot \ln\constantH
    \end{align*}
    where the inequality~(a) holds since the expected payment of the buyer is upper bounded by the monopoly revenue $\sqrt{\ln\constantH}$, and inequality~(b) holds since $\int_1^{\val\primed} \val\alloc(\val)\cdot \d \buyercdf(\val) \geq (\frac{1}{2} + \Omega_{}(1)) \cdot \ln\constantH$ argued above.

    Putting all the pieces together, both traders' ex ante utilities satisfy
    \begin{align*}
        \frac{\sellerexanteutil(\mech)}{\sellerbenchmark} &\leq 
        \frac{\left(\frac{1}{2} - \Omega_{}(1)\right) \cdot \sqrt{\ln\constantH}}{\ln\constantH}
        =
        \frac{1}{2} - \Omega_{}(1)
        \;\;
        \mbox{and}
        \;\;-
        \frac{\buyerexanteutil(\mech)}{\buyerbenchmark} &\geq 
        \frac{\left(\frac{1}{2} + \Omega_{}(1)\right)
        \cdot \ln\constantH}{(1 - o_{}(1))\cdot \ln \constantH}
        =
        \frac{1}{2} + \Omega_{}(1)
    \end{align*}
    which implies mechanism $\mech$ is not {\ksfair}. This is a contradiction.
    
    We now prove the second claim in the lemma statement. Fix any BIC, IIR, ex ante WBB, {\ksfair} mechanism $\mech= (\alloc,\price,\sellerprice)$ that has a deterministic integral allocation rule $\alloc$. We consider two cases depending on allocation $\alloc(\val\primed)$ at value $\val\primed$. 
    
    \xhdr{Case (a) $\alloc(\val\primed) = 1$:} In this case, we can upper bound the seller's ex ante utility as 
    \begin{align*}
        \sellerexanteutil(\mech) = \sellerprice(0) \overset{(a)}{\leq} \expect[\val]{\price(\val)} \overset{(b)}{=} \expect[\val]{\virtualval(\val) \cdot \alloc(\val)}
        \overset{(c)}{\leq} \expect[\val]{\virtualval(\val)\cdot \indicator{\val \geq \val\primed}} = 1
    \end{align*}
    where inequality~(a) holds due to ex ante WBB, equality~(b) holds due to \Cref{prop:revenue equivalence}, and inequality~(c) holds since $\virtualval(\val) = 0 $ for every value $\val<\val\primed$ and $\alloc(\val) = \alloc(\val\primed) = 1$ for every value $\val \geq \val\primed$ (implied by BIC). Therefore, the GFT of mechanism can be upper bounded by
    \begin{align*}
        \GFT{\mech} &= \sellerexanteutil(\mech) + \buyerexanteutil(\mech) + \expect[\val,\cost]{\price(\val) - \sellerprice(\cost)}
        \overset{}{\leq } \frac{\sellerexanteutil(\mech)}{\sellerbenchmark}\cdot \left(\sellerbenchmark + \buyerbenchmark\right) + \expect[\val]{\price(\val)}
        \\
        &\leq 
        (1 - o_{}(1))\cdot \sqrt{\ln \constantH}
        = \bigO_{}\left(\frac{1}{\sqrt{\ln\constantH}}\right)\cdot \OPTSB
    \end{align*}
    where the first inequality holds due to the {\ksfairness} and the second inequality holds due to $\sellerexanteutil(\mech)\leq 1$ and $\expect[\val]{\price(\val)} \leq 1$ argued above.

    \xhdr{Case (b) $\alloc(\val\primed) = 0$:} In this case, we can upper bound the buyer's ex ante utility as 
    \begin{align*}
        \buyerexanteutil(\mech) \leq \expect[\val]{\val\cdot \indicator{\val\geq \val\primed}} = (1 + o_{}(1))\cdot \sqrt{\ln \constantH}
    \end{align*}
    and thus the GFT can be upper bounded as
    \begin{align*}
        \GFT{\mech} &= \sellerexanteutil(\mech) + \buyerexanteutil(\mech) + \expect[\val,\cost]{\price(\val) - \sellerprice(\cost)}
        \leq 2 \sellerbenchmark + \buyerexanteutil(\mech) 
        \\
        &\leq (3 +o_{}(1))\cdot \sqrt{\ln \constantH}
        = \bigO_{}\left(\frac{1}{\sqrt{\ln\constantH}}\right)\cdot \OPTSB
    \end{align*}
    where the first inequality holds since $\sellerexanteutil(\mech) \leq \sellerbenchmark$ and $\expect[\val,\cost]{\price(\val) - \sellerprice(\cost)}\leq\sellerbenchmark$.
    We now finish the proof of \Cref{lem:optimal GFT upper bound:irregular}.
\end{proof}



\subsection{Zero-Value Seller and Buyer with a Regular Distribution}
\label{subsec:improved GFT:regular buyer}
\input{Paper/zero-seller-regular-buyer}

\subsection{Zero-Value Seller and Buyer with an MHR Distribution}
\label{subsec:improved GFT:mhr buyer}
\input{Paper/zero-seller-mhr-buyer}

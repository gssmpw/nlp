\label{subsec:contribution}
In this work, we study the efficiency of fair and truthful trade mechanisms. Below, we present
an overview of our contributions.

We focus on direct-revelation mechanisms, which specify an allocation (possibly randomized) and payments for each trader, for every valuation profile of the traders.\footnote{This is without loss of generality, by the revelation principle \citep{mye-81}.}
We restrict our attention to mechanisms that are interim individually rational (IIR), Bayesian incentive compatible (BIC) and ex-ante weak budget balance (ex-ante WBB),
\footnote{\label{footnote:reference to prelim}See \Cref{sec:prelim} for formal definitions.} and refer to such mechanisms as \emph{truthful mechanisms}.   
For general bilateral trade instances where both traders have private values sampled from overlapping distributions, the optimal expected GFT (also known as the {\FirstBest}) may not be achievable \citep{MS-83}. Thus, to understand the impact of fairness on truthful mechanisms, we analyze the GFT approximation of our proposed mechanism with respect to the {\SecondBest}, defined as the maximum GFT achievable by any truthful mechanism.\footnote{For zero-value seller instance, the {\FirstBest} and the {\SecondBest} are clearly equal. For general bilateral trade instance, it is known that the {\SecondBest} is at least ${1}/{3.15}$ fraction of the {\FirstBest} \citep{DMSW-22,Fei-22}.}
Truthful mechanisms that maximize the GFT might be complicated, even for simple distributions \citep{MS-83}. 
In contrast, all truthful mechanisms proposed in this work not only satisfy {\ksfairness} and achieve good GFT approximation to the {\SecondBest}, but they are also simple and easily implementable.


\xhdr{Optimal GFT approximation under {\ksfairness}.} 
As the first result of this work, we establish that the optimal GFT approximation of truthful mechanisms under {\ksfairness} is 50\%.

\begin{informal}[\Cref{thm:optimal GFT:general instance} and \Cref{lem:optimal GFT upper bound:irregular}]
\label{infmthm:general}
For every bilateral trade instance (i.e., any pair of seller and buyer distributions), there exists a truthful mechanism that is {\ksfair} and guarantees a GFT of at least 50\% of the {\SecondBest}.

Moreover, for any $\calC > 50\%$, there exists a zero-value seller instance in which no {\ksfair} truthful mechanism can achieve a 
$\calC$-fraction of the {\SecondBest}. 
\end{informal}
To obtain the positive approximation result, we develop a black-box reduction (\Cref{thm:blackbox reduction}) that converts any mechanism (possibly not {\ksfair}) into a {\ksfair} mechanism whose GFT is at least $\calC$-fraction of the sum of the tradersâ€™ ideal utilities, where $\calC$ is the smaller ratio between each trader's ex ante utility in the original mechanism, and her own ideal utility.
Our black-box reduction framework is both simple, general, and thus might be of independent interest.\footnote{In \Cref{appendix:bargaining-and-trade}, we generalize this framework to the cooperative bargaining problem.}
 
We apply our black-box reduction to analyze the {\BiasedRandomOffer}. 
This mechanism, for a given parameter $\mixprob\in[0,1]$, runs 
the {\SellerOffer} with probability $\mixprob$, and the {\BuyerOffer}\textsuperscript{\ref{footnote:reference to prelim}} with probability $1 - \mixprob$.
We show that, with an appropriately chosen 
$\mixprob$, this mechanism guarantees at least 50\% of the {\SecondBest} and is {\ksfair}. Notably, the proposed {\BiasedRandomOffer} is both simple and easy to implement. 
In particular, this mechanism is ex post IR and ex post strong budget balance (SBB), ensuring that all gains of the trade are split between the buyer and seller, leaving nothing to the mechanism. The (unbiased) {\RandomOffer}, which sets $\mixprob = 0.5$, already achieves a $\frac{1}{2}$-approximation to the {\SecondBest} \citep{BCWZ-17}. However, the {\RandomOffer} is generally not {\ksfair}. Our result shows that by carefully selecting $\mixprob$, we can preserve the same GFT approximation ratio while ensuring {\ksfairness}. 

To complete the picture, we also show that this GFT approximation ratio of $\frac{1}{2}$ is optimal among all {\ksfair} truthful mechanisms. To {prove} 
this, we present an explicit construction of an example
(\Cref{example:all fair mech:irregular}) with
zero-value seller and a buyer with value sampled from a distribution that we have carefully constructed to obtain
this tight bound.
Notably, this buyer distribution does not satisfy the regularity condition.
Regularity is a common assumption in the mechanism design literature \citep{mye-81,BR-89}, which holds for many classic distributions (e.g., Gaussian, exponential, uniform). In contrast to this bound of 50\%, as we have illustrated above, when the seller has {no value for the item} 
and the buyer's distribution is uniform between $[0, 1]$, posting a fixed trading price of $0.2$ is {\ksfair} and achieves 96\% of the {\SecondBest}. Motivated by this, we next consider settings where additional assumptions are imposed on the traders' distributions, and show that there are simple truthful mechanisms which are {\ksfair} and obtain much better GFT approximations. 

As a starting point, we study the bilateral trade instances where both traders' distributions satisfy the monotone hazard rate (MHR) condition.\footnote{The MHR condition, which is a {strengthening} of regularity, is also widely adopted in the mechanism design literature and satisfied by classic distributions such as exponential or uniform. See \Cref{sec:prelim} for the formal definition.} In this setting, we prove a stronger guarantee of $\frac{1}{e - 1} \geq 58.1\%$ for the {\ksfair} {\BiasedRandomOffer}, based on the results of \citep{Fei-22}. We next move to focus on the case of $0$-value seller, and prove stronger GFT approximation results.

\xhdr{Zero-value seller instances with regular or MHR distributions.}
In the second part of this work, we focus on the special case of the bilateral trade model where the seller has zero value for the item. This case is of particular interest as, while all gains can be realized by the simple and truthful mechanism which always trades at price $0$, such a mechanism is very unfair to the seller. On the other hand, letting the seller set the mechanism may result in arbitrarily small GFT (i.e., in the case of an equal-revenue distribution) or very unfair allocation (in the case of constant-value buyer).

In \Cref{infmthm:general} (\Cref{lem:optimal GFT upper bound:irregular}) we have shown that, even when the seller has no value for the item, the GFT approximation of $\frac{1}{2}$ cannot be improved when the buyer distribution is not regular. We next study the zero-value seller settings where the buyer's valuation distributions are regular or MHR.


We first consider the case that the buyer's valuation distribution is regular, and significantly improve the approximation of $50\%$ to more than $85\%$: 
\begin{informal}[\Cref{thm:improved GFT:regular buyer}]
\label{infmthm:regular buyer}
    For every zero-value seller instance where the buyer has a regular distribution, there exists a {\FixPrice} (which is truthful) that is {\ksfair}, and whose GFT is at least $\fixedPriceGFTPercentageRegular$ of the {\SecondBest}.

    Moreover, there exists a zero-value seller instance in which the buyer has a regular distribution and no {\ksfair} truthful mechanism obtains more than $\fixedPriceGFTPercentageUBRegular$ of the {\SecondBest}. 
\end{informal}



We remark that while the positive result is established by a {\FixPrice} (i.e., posting a trading price to two traders ex-ante),\footnote{{Interestingly, such a result cannot be obtained with a {\BiasedRandomOffer}. We show that} there exists a zero-value seller instance where the buyer has a regular distribution and yet, the {\ksfair} {\BiasedRandomOffer} only obtains 50\% of the {\SecondBest}, and not more.} the negative result holds for all {\ksfair} truthful mechanisms. Note that {\FixPrices} are the most simple mechanisms, and enjoy some excellent properties: not only they deterministic, they are also dominant strategy incentive compatible (DSIC), ex post IR and ex post SBB (so all GFT is split between the two traders, leaving nothing to the mechanism).

The almost-tight negative result of at most $\fixedPriceGFTPercentageUBRegular$ approximation is proven by presenting an explicit construction of an example (\Cref{example:BROM:regular}) with a zero-value seller and a buyer with value sampled from a regular distribution, and analyzing it (\Cref{lem:GFT UB:regular buyer}). For the positive result, we develop a novel argument based on a \emph{revenue curve reduction} analysis (\Cref{lem:GFT program:regular buyer}). As this analysis is our most significant technical contribution we discuss it in more details after presenting the rest of our results.

We next study the zero-value seller instance where the buyer's valuation distribution is MHR.  
\begin{informal}[\Cref{thm:improved GFT:mhr buyer}]
\label{infmthm:mhr buyer}
    For every zero-value seller instance where the buyer has an MHR distribution, there exists a {\FixPrice} (which is  truthful) that is {\ksfair}, and whose GFT is at least $\fixedPriceGFTPercentageMHR$ of the {\SecondBest}.

    Moreover, there exists a zero-value seller instance in which the buyer has an MHR distribution and no {\ksfair} truthful mechanism obtains more than $\fixedPriceGFTPercentageUBMHR$ of the {\SecondBest}. 
\end{informal}
The almost-tight negative result of at most $\fixedPriceGFTPercentageUBMHR$ approximation is proven by presenting an explicit construction of an example (\Cref{example:all fair:mhr buyer}) with a zero-value seller and a buyer with value sampled from an MHR distribution, and analyzing it (\Cref{lem:GFT UB:mhr buyer}). For the positive result, we conduct a similar argument (\Cref{lem:GFT program:mhr buyer}) as the one used for regular distributions, but now the argument centers on the cumulative hazard rate function instead of the revenue curve. 



\xhdr{Implication for the KS-solution.}
While all of our results above (Informal Theorems~\labelcref{infmthm:general,infmthm:regular buyer,infmthm:mhr buyer}) are stated for {\ksfair} truthful mechanisms, the negative results trivially apply to the KS-solution as well, since it satisfies {\ksfairness}. Importantly, it is worth noting that all the positive results also hold for the KS-solution. This follows from the fact that the simple {\ksfair} mechanisms we proposed ({\BiasedRandomOffer} and {\FixPrice}) are ex post SBB, and therefore their GFT is at most the GFT of the KS-solution. See \Cref{lem:SBB implication} for the formal statement.\footnote{Though the KS-solution maximizes the sum of the two traders' utilities among all {\ksfair} mechanisms, it does not directly imply that the KS-solution also maximizes the GFT among all {\ksfair} mechanisms, since the GFT {not only includes the utilities of the two  traders, but also includes} the gains left to the mechanism (which could be positive under WBB).}


\xhdr{Implication for market regulation.} 
Our results also shed light on the following connection between efficiency and fairness regulation. Suppose the seller (resp.\ buyer) is a monopolist and can freely decide on the truthful mechanism to maximize her own utility. In this case, the GFT from the mechanism picked by the monopolist can be arbitrarily smaller than the {\SecondBest}. In contrast, consider an alternative scenario where a regulator imposes a regulation so that the monopolist may only choose a truthful mechanism that is {\ksfair}. In \Cref{lem:SBB implication}, we show that the seller-optimal (resp.\ buyer-optimal) {\ksfair} mechanism achieves the same GFT approximation as the ones stated in Informal Theorems~\labelcref{infmthm:general,infmthm:regular buyer,infmthm:mhr buyer}, so high GFT is guaranteed when fairness is imposed.


\xhdr{Alternative fairness definitions.} Besides {\ksfairness}, we also explore alternative fairness definitions for the bilateral trade model.

We first explore another solution concept for the bargaining problem -- the Nash solution \citep{nash-51}. In the context of the bilateral trade model, the Nash solution corresponds to a {\NashSocialWelfareMaximizer}: a truthful mechanism that maximizes the Nash social welfare (NSW), i.e., the product of the two traders' ex ante utilities. Following an argument that is conceptually similar to our black-box reduction framework (for {\ksfair} mechanisms), we obtain a tight bound on the GFT approximation of any {\NashSocialWelfareMaximizer}.

\begin{informal}
    For every bilateral trade instance, a {\NashSocialWelfareMaximizer} guarantees a GFT of at least 50\% of the {\SecondBest}.

    Moreover, for any $\calC > 50\%$, there exists a zero-value seller instance in which no {\NashSocialWelfareMaximizer} can achieve a
    $\calC$-fraction of the {\SecondBest}.
\end{informal}
While our definition of {\ksfairness} aims to explicitly define fairness for bilateral trade, the  fairness properties of the Nash solution are rather implicit (it is more about subscribing a way to trade-off the traders' utilities). We also remark that a {\NashSocialWelfareMaximizer} could have complicated allocation and payment rules. In contrast, both the {\BiasedRandomOffer} and {\FixPrice} which we proposed and analyzed for {\ksfairness} are simple and easy to be implemented. Hence, we believe {\ksfairness} may be more suitable for the bilateral trade problem, and our paper mainly focuses on it.


As we mentioned earlier, we also establish negative results showing that equitability (motivated by the egalitarian solution \citep{Kal-77,Mye-77} to the bargaining problem) and interim or ex post {\ksfairness} (\Cref{def:interim ks fairness,def:ex post ks fairness}) may not be appropriate. Specifically, we show that the GFT of truthful mechanisms that satisfy any of those alternative fairness definitions, can be arbitrary lower than the {\SecondBest} (\Cref{lem:equitable GFT UB}) or imply no trade and thus zero GFT (\Cref{prop:interim/ex post fairness:no trade}), even in settings with a zero-value seller.

\subsection{Our Techniques} 
\label{subsec:intro:techniques}
We next describe the technical framework we put forward for proving our positive results for instances with a zero-value seller and a buyer with either a regular or an MHR valuation distribution (Informal Theorems~\labelcref{infmthm:regular buyer,infmthm:mhr buyer}, respectively), {and the novelty of our technique}. We start by explaining the high-level proof idea behind \Cref{infmthm:regular buyer}. To obtain the almost-tight positive result of at least $\fixedPriceGFTPercentageRegular$, we aim to directly compare a {\ksfair} {\FixPrice} with the {\SecondBest}.\footnote{As a comparison, in the analysis of the positive result in \Cref{infmthm:general}, we compare the GFT of {\ksfair} mechanisms with the summation of two traders' ideal utilities (which upper bounds the {\SecondBest}). Consider a simple example, where the seller and buyer have deterministic value of zero and one, respectively. In this example, the summation of two traders' ideal utilities could  be twice the {\FirstBest} (and thus at least twice the GFT of any truthful mechanism)}. Hence, by comparing with the summation of two traders' ideal utilities, it is impossible to obtain an approximation ratio strictly better than $\frac{1}{2}$. To do this, we develop a novel revenue curve reduction analysis. 

In the mechanism design literature, a revenue-curve-based analysis is a common approach to deriving approximation guarantees \citep[e.g.,][]{FILS-15,DRY-15,AB-18,AHNPY-18,JLQTX-19,BCW-22,FHL-21,ABB-22,JL-23}. Revenue curves \citep{BR-89} give an equivalent representation of the buyer's valuation distribution and enable clean characterization of the revenue of a given mechanism. Though there does not exist an automatic way to conduct a revenue-curve-based analysis, the common high-level idea is to argue that the worst approximation ratio among the class of regular distributions belongs to a subclass of distributions that can be characterized with a small set of parameters (e.g., monopoly reserve, quantile, or revenue). Most prior work focuses on revenue approximation and allows consideration of a class of mechanisms (e.g., anonymous pricing with all possible prices). In this way, the approximation ratio usually depends on a small set of parameters of the revenue curve, and thus the reduction argument can be established.

In contrast, our analysis requires studying the seller's ex-ante utility (revenue), the buyer's ex-ante utility (residual surplus) and the GFT (expected value) -- all three of these \emph{together}. Furthermore, we focus on a single mechanism ({\ksfair} {\FixPrice}). Hence, both the GFT benchmark and the GFT of our mechanism are highly sensitive to the \emph{entire} revenue curve {(e.g., parameters like the monopoly reserve and revenue are not enough)}.

To overcome this challenge, we conduct a three-step argument (see \Cref{lem:GFT program:regular buyer}). We first consider a {\FixPrice} (that is possibly not {\ksfair})  whose trading price $\price$ is selected based on a \emph{small set} of parameters of the revenue curve. 
In the second step, we argue that depending on buyer's ex-ante utility under trading price $\price$, we can modify this price to obtain a {\ksfair} trading price $\fprice$. By comparing the two traders' utility changes from trading price $\price$ to $\fprice$, we obtain a lower bound of the GFT approximation under trading price $\fprice$, which is {\ksfair}. Importantly, this lower bound is a {function of the trading price $\price$ chosen in the first step}. Loosely speaking, using the first and second step, we show that the worst GFT approximation lower bound belongs to a \emph{subclass of regular distributions} parameterized by trading price $\price$ and several other parameters including monopoly quantile and monopoly revenue. Finally, since this GFT lower bound depends on the choice of $\price$ determined in the first step, we formulate the problem of selecting the best price~$\price$ (to maximize the GFT approximation lower bound) as a \emph{two-player zero-sum game}. In this game, the ``min player'' (adversary) selects the revenue curve (represented by finitely many quantities on the revenue curve), while the ``max player'' (ourselves) selects the price $\price$. The game's payoff is the GFT approximation lower bound derived in the second step. Finally, we capture this two-player zero-sum game as an \emph{optimization program~\ref{program:GFT:regular buyer}} {(a minimization problem)} and numerically lower bound the optimal payoff of this game (i.e., optimal objective value of \ref{program:GFT:regular buyer}) by $\fixedPriceGFTPercentageRegular$.\footnote{Formulating the approximation guarantees as optimization program and then solve it numerically is common in the mechanism design literature. See the related work section (\Cref{subsec:related work}) for more discussion.} Also see \Cref{fig:GFT program:regular buyer} for a graphical illustration. 

The positive result of \Cref{infmthm:mhr buyer} relies on a similar reduction argument. However, instead of conducting the reduction on the revenue curve, we analyze the \emph{cumulative hazard rate function}, which is another equivalent representation of the buyer's valuation distribution. In particular, the buyer's valuation distribution is MHR if and only if the induced cumulative hazard rate function is convex. In our analysis (\Cref{lem:GFT program:mhr buyer} and \Cref{fig:GFT program:mhr buyer}), we formulate the GFT approximation of a {\ksfair} {\FixPrice} as a %n
minimization program~\ref{program:GFT:mhr buyer}. We then numerically lower bound its optimal objective value by $\fixedPriceGFTPercentageMHR$.

\label{sec:improved GFT}

In this section, we focus on the special case where the seller's valuation distribution is a single point mass (known to all). This is equivalent to assuming that the seller has zero value, which is publicly known by all parties. Such special case has been studied extensively in the mechanism design literature \citep[e.g.,][]{mye-81,BR-89,HR-09}, {mainly from the perspective of a monopolist seller aiming to maximize her revenue.} In this special case of zero-value seller, {as trading at price of $0$ is always efficient,} the first best and second best benchmark becomes identical, and are equal to the expected value of the buyer, i.e., $\OPTFB=\OPTSB = \expect[\val\sim\buyerdist]{\val}$. 

In \Cref{subsec:optimal GFT upper bound:general instance}, we first 

we focus on the special case of the bilateral trade problem where the seller has a deterministic value of zero. We first consider instances in which one trader value distribution is a point mass, and assume without loss of generality that it is that trader the seller, and her value is zero.
In setting with zero-value seller, we start with settings where the buyer value distribution is regular (\Cref{subsec:improved GFT:regular buyer}), and then consider settings that the distribution is MHR (\Cref{subsec:improved GFT:mhr buyer}). 
We then move to consider settings in which both traders value distributions are MHR (\Cref{subsec:improved GFT:mhr traders}). As we will show, (significantly) improved GFT-approximations are achievable for those instances. 

Before delving into specific cases where we impose stronger assumptions on traders' valuation distributions, we first provide intuition on why the 
GFT approximation ratio of $\frac{1}{2}$ in \Cref{thm:optimal GFT:general instance}, although optimal in the worst case (e.g., \Cref{example:all fair mech:irregular}), may be conservative for general instances.

Consider a simple instance where the seller has a deterministic value of $\cost = 0$, and the buyer has a deterministic value of $\val = 1$. In this case, the (unbiased) {\RandomOffer} mechanism is indeed {\ksfair} and achieves the first-best GFT benchmark, $\OPTFB = \OPTSB = 1$. However, when applying the black-box reduction framework for the {\RandomOffer}, \Cref{thm:blackbox reduction} guarantees only a $\frac{1}{2}( = \frac{\sellerexanteutil(\ROM)}{\sellerbenchmark} = \frac{\buyerexanteutil(\ROM)}{\buyerbenchmark})$-approximation. This results in a multiplicative factor of 2 loss, as its analysis compares the GFT of the {\RandomOffer} with $\sellerbenchmark + \buyerbenchmark = 2$, which is twice the second best GFT benchmark $\OPTSB = 1$.



\subsection{Tight Negative Result for Bilateral Trade with 0-Value Seller}
\label{subsec:optimal GFT upper bound:general instance}
In this section we show that even for the simple setting where the seller has zero value, there exists an instance (\Cref{example:all fair mech:irregular}) 
\mbe{for which every BIC, IIR, ex ante WBB mechanism that is {\ksfair}, cannot}
%OLD: in which no BIC, IIR, ex ante WBB, and {\ksfair} mechanism can 
obtain more than half of the second best GFT benchmark $\OPTSB$. 
We note that the buyer's valuation distribution in this instance is not regular.\footnote{As we show in \Cref{sec:improved GFT},  GFT approximation ratios better than $\frac{1}{2}$ are achievable under {\ksfairness} when traders' distributions are regular or MHR.}


\begin{example}
\label{example:all fair mech:irregular}
Fix any $\constantH \geq 1$. Let $\val\primed \triangleq \frac{\constantH}{\sqrt{\ln\constantH} + 1}$. The buyer has a valuation distribution $\buyerdist$ (that is not regular) defined as follows: % Specifically, 
distribution~$\buyerdist$ 
has support $\supp(\buyerdist)=[1, \constantH]$ and cumulative density function $\buyercdf(\val) = \frac{\val - 1}{\val}$ for $\val \in[1,\val\primed]$, $\buyercdf(\val) = 1- 
% \frac{(1+\sqrt{\ln\constantH}-1)}{(\val/\constantH+\sqrt{\ln\constantH}-1)}\frac{\sqrt{\ln\constantH}}{\constantH}
\frac{{\ln\constantH}}{(\val/\constantH+\sqrt{\ln\constantH}-1)\cdot \constantH}$ for $\val\in[\val\primed, \constantH]$, and $\buyercdf(\val) = 1$ for $\val \in(\constantH, \infty)$.  
(Namely, there is an atom at $\constantH$ with probability mass of $\frac{\sqrt{\ln\constantH}}{\constantH}$.)

The seller has a deterministic value of 0. See \Cref{fig:all fair mech:irregular} for an illustration of the revenue curve and the bargaining set of $\buyerdist$. 
\end{example}

% \begin{figure}[ht]
%     \centering
%     \input{Figures/fig-fair-mech-SB-example} 
%     \caption{The revenue curve of the buyer in \Cref{example:all fair mech:irregular}.}
%     \label{fig:all fair mech:irregular}
% \end{figure}

\usefigures{
\begin{figure}
    \centering
    \subfloat[]{
\input{Figures/fig-fair-mech-SB-example}
\label{fig:all fair mech:irregular:revenue curve}
}~~~~
    \subfloat[]{
\input{Figures/fig-fair-mech-SB-example-util-pair}
\label{fig:all fair mech:irregular:ex ante utility pair}
}
\caption{Graphical illustration of \Cref{example:all fair mech:irregular}. In \Cref{fig:all fair mech:irregular:revenue curve}, the black curve is the revenue curve of the buyer. In \Cref{fig:all fair mech:irregular:ex ante utility pair}, the blue region corresponds to all pairs of buyer and seller's ex ante utilities $(\buyerexanteutil,\sellerexanteutil)$ that are achievable by some BIC, IIR, ex ante WBB mechanism. The two black points represent the traders' ex ante utility pairs $(\buyerbenchmark,0)$ and $(0,\sellerbenchmark)$, induced by the {\BuyerOffer} and {\SellerOffer}, respectively. The red dashed line represents  
utility pairs that are {\ksfair}
%outcomes induced by {\ksfair} mechanisms 
(i.e., ones with $\buyerexanteutil/\buyerbenchmark = \sellerexanteutil/\sellerbenchmark$). The red point corresponds to the GFT-optimal {\ksfair} mechanism whose GFT is at least $\frac{1}{2}$ fraction of the second best GFT benchmark $\OPTSB$.}
    \label{fig:all fair mech:irregular}
\end{figure}

}

\begin{lemma}
\label{lem:optimal GFT upper bound:irregular}
    Fix any $\eps > 0$.
    For any instance in \Cref{example:all fair mech:irregular} with sufficiently large $\constantH$ (as a function of $\eps$), every BIC, IIR, ex ante WBB mechanism $\mech$ that is {\ksfair} obtains at most $(\frac{1}{2} + \eps)$ fraction of the second best GFT benchmark $\OPTSB$, i.e., $\GFT{\mech} \leq (\frac{1}{2} + \eps) \cdot \OPTSB$. Moreover, if mechanism $\mech$ further has a deterministic integral allocation rule (i.e., mechanism $\mech$ is a {\FixPrice}), its GFT is at most $\eps$ fraction of the second best benchmark $\OPTSB$, i.e., $\GFT{\mech}\leq \eps\cdot \OPTSB$. 
\end{lemma}
Recall that the {\ksfair} {\BiasedRandomOffer} (from \Cref{cor:biased random offer}) is a randomized mechanism.\footnote{Namely, if the item is indivisible, the allocation should be randomized. Otherwise (if the item is divisible), the allocation should be fractional.} \Cref{lem:optimal GFT upper bound:irregular} also 
shows % OLD: suggests 
the necessity of the randomization to achieve constant GFT approximation under the {\ksfairness}. 

\begin{proof}[Proof of \Cref{lem:optimal GFT upper bound:irregular}]
    In \Cref{example:all fair mech:irregular}, the seller has zero-value, so the second best GFT benchmark $\OPTSB$ is equal to the First Best $\OPTFB$, and it  satisfies
    \begin{align*}
        \OPTSB = \expect[\val]{\val} =
        \displaystyle\int_1^{\constantH} \val\cdot \d \buyercdf(\val)
        + \constantH\cdot (1 - \buyercdf(\constantH))
        =
        (1 - o_{}(1))\cdot \ln \constantH
    \end{align*}
    Moreover, two traders' benchmark can be computed as
    \begin{align*}
        \sellerbenchmark = \sqrt{\ln \constantH}
        \;\;
        \mbox{and}
        \;\;
        \buyerbenchmark = \OPTSB = (1 - o_{}(1))\cdot \ln \constantH
    \end{align*}
    We now prove the first claim in the lemma statement by contradiction. Suppose there exists BIC, IIR, ex ante WBB, and {\ksfair} mechanism $\mech = (\alloc,\price,\sellerprice)$ whose GFT is a $(\frac{1}{2} + \Omega_{}(1))$-approximation to the second best GFT benchmark $\OPTSB$.
    Note that the GFT of mechanism $\mech$ can be upper bounded as
    \begin{align*}
        \GFT{\mech} & = \expect[\val]{\val\cdot \alloc(\val)} 
        \leq
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val)
        +
        \displaystyle\int_{\val\primed}^{\constantH} \val\cdot \d \buyercdf(\val)
        + \constantH\cdot (1 - \buyercdf(\constantH))
        \\
        &{}=
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val)
        +
        o_{}(\ln\constantH)
    \end{align*}
    Invoking the assumption that $\GFT{\mech} \geq (\frac{1}{2} + \Omega_{}(1))\cdot \OPTSB$, we have 
    \begin{align*}
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val) 
        \geq
        \left(\frac{1}{2} + \Omega_{}(1)\right)
        \cdot \ln\constantH
    \end{align*}
    Moreover, since mechanism $\mech$ is BIC, the buyer's interim allocation $\alloc$ is weakly increasing and thus
    \begin{align*}
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val)\cdot \d \buyercdf(\val)
        \leq 
        \displaystyle\int_1^{\val\primed} \val\cdot \alloc(\val\primed)\cdot \d \buyercdf(\val)
        =
        (\alloc(\val\primed) - o_{}(1))\cdot \ln\constantH
    \end{align*}
    which further implies 
    \begin{align*}
        \alloc(\val\primed) \geq  \frac{1}{2} + \Omega_{}(1)
    \end{align*}
    We next upper bound the seller's ex ante utility $\sellerexanteutil(\mech)$ as follows
    \begin{align*}
        \sellerexanteutil(\mech) &{} = 
        \sellerprice(0) \overset{(a)}{\leq} 
        \expect[\val]{\price(\val)}
        \overset{(b)}{=}
        \expect[\val]{\virtualval(\val)\cdot \alloc(\val)}
        % \\
        % &{} 
        \overset{(c)}{\leq} 
        \virtualval(\constantH)\cdot (1 - \buyercdf(\constantH))
        +
        \virtualval(\val\primed)\cdot (\buyercdf(\constantH) - \buyercdf(\val\primed)) \cdot \alloc(\val\primed)
        \\
        &{}
        =
        \left(1 - \alloc(\val\primed) + o_{}(1)\right)\cdot \sqrt{\ln\constantH}
        % \\
        % &{} 
        \overset{(d)}{\leq}
        \left(\frac{1}{2} - \Omega_{}(1)\right) \cdot \sqrt{\ln\constantH}
    \end{align*}
    where inequality~(a) holds since mechanism $\mech$ is ex ante WBB, 
    equality~(b) holds due to \Cref{prop:revenue equivalence},
    inequality~(c) holds since the virtual value function $\virtualval$ satisfies $\virtualval(\constantH) = \constantH \geq 0$, $\virtualval(\val) = \virtualval(\val\primed) < 0$ for $\val\in[\val\primed,\constantH)$, $\virtualval(\val) = 0$ for $\val\in[1, \val\primed)$, and the buyer's interim allocation $\alloc$ is weakly increasing due to BIC, and inequality~(d) holds since $\alloc(\val\primed) \geq \frac{1}{2} + \Omega_{}(1)$ argued above.
    
    Meanwhile, the buyer's ex ante utility $\buyerexanteutil(\mech)$ can be lower bounded as 
    \begin{align*}
        \buyerexanteutil(\mech) &{}= \expect[\val]{\val\cdot \alloc(\val) - \price(\val)}
        \overset{(a)}{\geq} \expect[\val]{\val\cdot \alloc(\val)} - \sqrt{\ln\constantH}
        \overset{(b)}{\geq}
        \left(\frac{1}{2} + \Omega_{}(1)\right)
        \cdot \ln\constantH
    \end{align*}
    where the inequality~(a) holds since the expected payment of the buyer is upper bounded by the monopoly revenue $\sqrt{\ln\constantH}$, and inequality~(b) holds since $\int_1^{\val\primed} \val\alloc(\val)\cdot \d \buyercdf(\val) \geq (\frac{1}{2} + \Omega_{}(1)) \cdot \ln\constantH$ argued above.

    Putting all the pieces together, both traders' ex ante utilities satisfy
    \begin{align*}
        \frac{\sellerexanteutil(\mech)}{\sellerbenchmark} &\leq 
        \frac{\left(\frac{1}{2} - \Omega_{}(1)\right) \cdot \sqrt{\ln\constantH}}{\ln\constantH}
        =
        \frac{1}{2} - \Omega_{}(1)
        \;\;
        \mbox{and}
        \;\;-
        \frac{\buyerexanteutil(\mech)}{\buyerbenchmark} &\geq 
        \frac{\left(\frac{1}{2} + \Omega_{}(1)\right)
        \cdot \ln\constantH}{(1 - o_{}(1))\cdot \ln \constantH}
        =
        \frac{1}{2} + \Omega_{}(1)
    \end{align*}
    which implies mechanism $\mech$ is not {\ksfair}. This is a contradiction.
    
    We now prove the second claim in the lemma statement. Fix any BIC, IIR, ex ante WBB, {\ksfair} mechanism $\mech= (\alloc,\price,\sellerprice)$ that has a deterministic integral allocation rule $\alloc$. We consider two cases depending on allocation $\alloc(\val\primed)$ at value $\val\primed$. 
    
    \xhdr{Case (a) $\alloc(\val\primed) = 1$:} In this case, we can upper bound the seller's ex ante utility as 
    \begin{align*}
        \sellerexanteutil(\mech) = \sellerprice(0) \overset{(a)}{\leq} \expect[\val]{\price(\val)} \overset{(b)}{=} \expect[\val]{\virtualval(\val) \cdot \alloc(\val)}
        \overset{(c)}{\leq} \expect[\val]{\virtualval(\val)\cdot \indicator{\val \geq \val\primed}} = 1
    \end{align*}
    where inequality~(a) holds due to ex ante WBB, equality~(b) holds due to \Cref{prop:revenue equivalence}, and inequality~(c) holds since $\virtualval(\val) = 0 $ for every value $\val<\val\primed$ and $\alloc(\val) = \alloc(\val\primed) = 1$ for every value $\val \geq \val\primed$ (implied by BIC). Therefore, the GFT of mechanism can be upper bounded by
    \begin{align*}
        \GFT{\mech} &= \sellerexanteutil(\mech) + \buyerexanteutil(\mech) + \expect[\val,\cost]{\price(\val) - \sellerprice(\cost)}
        \overset{}{\leq } \frac{\sellerexanteutil(\mech)}{\sellerbenchmark}\cdot \left(\sellerbenchmark + \buyerbenchmark\right) + \expect[\val]{\price(\val)}
        \\
        &\leq 
        (1 - o_{}(1))\cdot \sqrt{\ln \constantH}
        = \bigO_{}\left(\frac{1}{\sqrt{\ln\constantH}}\right)\cdot \OPTSB
    \end{align*}
    where the first inequality holds due to the {\ksfairness} and the second inequality holds due to $\sellerexanteutil(\mech)\leq 1$ and $\expect[\val]{\price(\val)} \leq 1$ argued above.

    \xhdr{Case (b) $\alloc(\val\primed) = 0$:} In this case, we can upper bound the buyer's ex ante utility as 
    \begin{align*}
        \buyerexanteutil(\mech) \leq \expect[\val]{\val\cdot \indicator{\val\geq \val\primed}} = (1 + o_{}(1))\cdot \sqrt{\ln \constantH}
    \end{align*}
    and thus the GFT can be upper bounded as
    \begin{align*}
        \GFT{\mech} &= \sellerexanteutil(\mech) + \buyerexanteutil(\mech) + \expect[\val,\cost]{\price(\val) - \sellerprice(\cost)}
        \leq 2 \sellerbenchmark + \buyerexanteutil(\mech) 
        \\
        &\leq (3 +o_{}(1))\cdot \sqrt{\ln \constantH}
        = \bigO_{}\left(\frac{1}{\sqrt{\ln\constantH}}\right)\cdot \OPTSB
    \end{align*}
    where the first inequality holds since $\sellerexanteutil(\mech) \leq \sellerbenchmark$ and $\expect[\val,\cost]{\price(\val) - \sellerprice(\cost)}\leq\sellerbenchmark$.
    We now finish the proof of \Cref{lem:optimal GFT upper bound:irregular}.
\end{proof}



\subsection{Zero-Value Seller and Buyer with a Regular Distribution}
\label{subsec:improved GFT:regular buyer}
\input{Paper/zero-seller-regular-buyer}

\subsection{Zero-Value Seller and Buyer with a MHR Distribution}
\label{subsec:improved GFT:mhr buyer}
\input{Paper/zero-seller-mhr-buyer}

%\subsection{Seller and Buyer with MHR Distributions}

%\nmmc{Moved to section \Cref{sec:bargaining}.}

%\nmmd{
%\label{subsec:improved GFT:mhr traders}
%\input{Paper/mhr-seller-mhr-buyer}
%}
The field of \emph{Mechanism Design} studies the design of mechanisms that obtain good outcomes (as high social welfare or revenue) in the presence of strategic traders. In this paper, we consider imposing a fairness requirement on truthful trade mechanisms\footnote{A trade mechanism must also encourage participation even after an agent knows her value (interim individually rational), and not run a deficit.}, and the impact of such a requirement on the economic efficiency (social welfare) of the mechanism.  That is, a mechanism results in trade which generates gains, and (some of these) gains are allocated to the traders. We take a normative approach and search for simple truthful mechanisms that are constrained to distribute these gains ``fairly'', 
studying their economic efficiency. This problem can be viewed as searching for a fair solution to the bargaining problem between the two traders, but in settings with private valuations. Thus, for trade settings, our work focuses on \emph{the implications of the combination of strategic behavior and fairness requirements on the efficiency of the outcome}. 


We focus on the fundamental mechanism-design problem of bilateral trade in the Bayesian setting, that is, a seller that sells a single good to a buyer, where traders' values for the good are private, but are sampled independently from a known Bayesian prior.\footnote{Note that the seller is not the mechanism designer, but rather a trader in the mechanism.} The most basic of these problems is the setting where the seller has no value for the good.\footnote{This model is equivalent to a seller with known value for keeping the item: we can assume that value is $0$ by applying a simple normalization. Thus, we assume a value of $0$ for simplicity. The gains-from-trade (GFT) is invariant to the normalization (but not the welfare), and is harder to approximate than the welfare (so positive results for GFT are better).} We call this basic setting the \emph{zero-value seller setting}.

As an example, consider a zero-value seller setting with a buyer that has a value of $2$ for the good. In this simple setting there is no uncertainty about the values (a full information setting). If the seller can dictate the mechanism, she will use the seller's optimal mechanism ({\SellerOffer}) and post an optimal price of $2$. She will always sell the item,\footnote{Here the buyer is indifferent between buying or not, but for any $\varepsilon>0$, the seller can get revenue of $2-\varepsilon$ which giving a strict incentive to buy. Throughout the paper we ignore this issue and allow ties to be broken as needed.} obtaining utility of $2$, leaving the buyer with utility of $0$. This outcome seems highly unfair to the buyer, since the gains-from-trade (GFT) of $2$ are the result of a trade that cannot take place without the buyer, yet the buyer receives none of these gains. The alternative mechanism in which trade happens at a price of $1$, results with an efficient trade in which each trader gets utility of $1$, and that mechanism seems much more fair. More generally, when the value of the buyer is known to be $\val > 0$ (no private information), the mechanism in which trade happens at the price $\val/2$ maximizes the gains and seems to be perfectly fair to both traders, as it is \emph{equitable} (both get the same utility).\footnote{In fact, in such a full information setting, any symmetric solution to the bargaining problem (e.g., the Nash solution, or the egalitarian solution) will result with the same outcome where the two parties equally split the gains.} We thus see that when there is no private information, there is a mechanism that maximizes the GFT and is ``perfectly fair''.  

This work focuses on the more involved situation where traders do have private information, and are acting strategically. As an example, consider a seller of a digital good (zero cost/value for the good) to a population of buyers with values distributed according to some known distribution $\buyerdist$. For example, $\buyerdist$ might be the uniform distribution over $[0,1]$. As it is a digital good, the setting is equivalent to a single-buyer setting with value sampled from the valuation distribution. Let us consider the following three properties of a trade mechanism: being \emph{truthful}, being \emph{fair}, and \emph{maximizing the gains-from-trade (GFT)}. Without any fairness considerations, all GFT can be realized by a truthful mechanism that always trades at price 0. If we do not care about gains, the mechanism that never trades is truthful and can be considered fair under various definitions (e.g., it equalizes the utilities). Finally, disregarding the issue of strategic behavior (assuming access to the true values), the problem reduces to the full information case, for which we saw that it is possible to realize all gains and split them equally. We thus see that any two out of three properties can be achieved. Can all three be achieved together? Unfortunately, it seems that the answer is no. For example, in the zero-value seller setting and a buyer with value uniformly distributed over $[0,1]$, the only way to truthfully maximize the gains is to trade at 0, but that mechanism leaves the seller with no profit at all, which intuitively seems unfair (and is also formally unfair under essentially any fairness definition we can conceive). 

We thus relax the goal of exactly maximizing the GFT and only ask to approximate it in expectation, where approximation is with respect to {the {\SecondBest}, that is, the} maximum expected GFT {achievable by a mechanism} without fairness constraints, but with incentive constraints as well as 
participation constraints and the constraint of the mechanism not running a deficit. We ask:   
\emph{For which fairness notions can the truthful trade mechanism guarantee a good GFT approximation? For those fairness notions where a good approximation is possible, how good can the approximation be?}

We move to consider the problem {of picking a fair truthful mechanism} from an ex ante perspective (in expectation, before any values are realized). If the seller is a monopolist in the market, she can price at a Myerson price and maximize her own expected revenue, but this might result in very low expected utility for the buyer (such as in the case of full information), an outcome that can be considered very unfair. A market regulator (or a court) might impose the constraint that the mechanism used for trade be fair to both parties (at least ex ante). But, what kind of fairness can be required? Possibly the most natural would be to require equitability (at least ex ante). Unfortunately, such a definition is too stringent and does not allow for good GFT approximation, as we illustrate next.     

Consider a zero-value seller setting with a buyer that has a private value $\val$, sampled from the Equal-Revenue (ER) distribution with support $[1,\constantH]$ (where $\constantH>1$ is some constant).\footnote{The Equal-Revenue distribution (with support $[1,\constantH]$) has probability $1/\price$ of having value at least $\price\in [1,\constantH]$. Thus the expected revenue from any fixed trading price $\price\in [1,\constantH]$ is $1$.} As the buyer value is private information, we now consider the utilities of the parties in mechanisms that are truthful. It is well known \citep{mye-81} that the seller's ex ante utility in any such mechanism is at most $1$, and thus an ex ante equitable mechanism can yield total gains for both traders \footnote{Here we only consider the utilities of the two traders (disregarding any money kept by the mechanism). Our results in the paper allow for weak budget-balanced mechanisms, and our positive results hold with respect to the more challenging benchmark of the entire GFT, including the gains kept by the mechanism.} of at most 2. This is a negligible fraction of the maximal GFT of $\Theta(\log \constantH)$ (obtainable by the mechanism that always trades at price 0, which is very unfair to the seller).

We conclude that the fairness notion of ex ante equitability is too stringent for the setting of trade where the buyer has private information: imposing ex ante equitability in settings where the buyer and seller differ significantly from each other (ex ante) results in devastating implications on the GFT. Therefore, we seek an alternative fairness notion that is better suited for trade settings where the buyer is ex ante very different from the seller and the traders have private information, yet allows for a good GFT approximation.


In spirit, this problem is a cooperative bargaining problem, where the traders need to ex ante agree on a truthful mechanism that is fair. If they fail to reach an agreement, the default outcome of no trade occurs. Yet, the set over which the traders are bargaining is not explicitly given, but rather induced by the traders' valuation distributions. Moreover, in bilateral-trade settings, where the seller also has a non-trivial valuation distribution, it is known that some of these mechanisms (e.g., the one that maximizes GFT subject to truthfulness) are very complicated and unintuitive, even for simple distributions. 

Two prominent solutions to cooperative bargaining problems are the Kalai-Smorodinsky (KS) solution \citep{KS-75}, and the Nash solution \citep{nash-51}. We first ask:
\begin{displayquote}
\emph{How large is the fraction of GFT guaranteed by the Kalai-Smorodinsky solution? By the Nash solution?} 
\end{displayquote}
Our work mainly focuses on studying the GFT of mechanisms that are \emph{\ksfair}, satisfying the ``Kalai-Smorodinsky condition'': mechanisms that ex ante equalize the fraction of the ideal utilities of the two traders. 
We explain {\ksfairness} using the following simple example: Consider the zero-value seller setting where the buyer's value is uniformly distributed over $[0, 1]$. The buyer's ideal ex ante utility is $0.5$, obtained by trading at a price of $0$, while the seller's ideal ex ante utility is $0.25$, obtained by trading at the monopoly reserve (i.e., Myerson price) of $0.5$. If the two traders trade at a price of $0.2$, the seller receives an expected utility of $0.16$, while the buyer receives $0.32$. Since both utilities achieve the same fraction (64\%) of their respective optima, this mechanism is {\ksfair}. Moreover, its GFT is $0.16+0.32 = 0.48$, which is 96\% fraction of the optimal GFT of $0.5$, achieved by trading at price of $0$ (which is unfair to the seller). 


Although the Kalai-Smorodinsky solution satisfies {\ksfairness}, the mechanism corresponding to that solution may be complex, making both theoretical analysis and practical implementation challenging. This motivates us to design \emph{simple} mechanisms that are {\ksfair} and guarantee good GFT. Therefore, we pose the following question:
\begin{displayquote}
\emph{How large is the fraction of the {\SecondBest} that can be guaranteed by a simple mechanism satisfying {\ksfairness} (aka., the Kalai-Smorodinsky condition)?} 
\end{displayquote}
As we will explain in detail in the following section, our work presents simple mechanisms that are {\ksfair} and give nearly the best fraction of the {\SecondBest} we can hope for {from any {\ksfair} mechanism} (and split all the gains between the two traders). Furthermore, while these mechanisms may not always be Pareto-optimal (with the Pareto-optimal solution being the Kalai-Smorodinsky solution), they imply that the KS solution is also guaranteed to obtain {at least} the same GFT approximation.




\subsection{Our Contributions} 
\label{sec:intro-our}
\input{Paper/contribution-and-techniques}


\subsection{Related Work}
\label{subsec:related work}
\input{Paper/related-work}


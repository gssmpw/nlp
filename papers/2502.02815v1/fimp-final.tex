\documentclass[11pt,fleqn]{article}

\usepackage{amsmath,amssymb,amsthm}
\usepackage[margin=1in]{geometry}
\usepackage{xcolor}
\usepackage{url}
%
%
\usepackage{comment}
\usepackage{centernot}
\usepackage{graphicx}
%
\usepackage{booktabs}
%
\usepackage{subcaption}
%
%
\usepackage{enumitem}
%
\usepackage[hypertexnames=false,bookmarksnumbered=true,final]{hyperref}
%
\usepackage[capitalize,sort]{cleveref}

\def\colorschemesepia{sepia}
\def\colorschemedark{dark}
\def\colorschemelight{light}

\ifx\colorscheme\undefined
\let\colorscheme\colorschemelight
\fi

\ifx\colorscheme\colorschemelight
\colorlet{textColor}{black}
\colorlet{bgColor}{white}
\fi

\ifx\colorscheme\colorschemesepia
\definecolor{textColor}{HTML}{433423}
\definecolor{bgColor}{HTML}{fbf0da}
\fi

\ifx\colorscheme\colorschemedark
\definecolor{textColor}{HTML}{bdc1c6}
\definecolor{bgColor}{HTML}{202124}
\definecolor{textBlue}{HTML}{8ab4f8}
\definecolor{textRed}{HTML}{f9968b}
\definecolor{textGreen}{HTML}{81e681}
\definecolor{textPurple}{HTML}{c58af9}
\else
\colorlet{textBlue}{blue!50!black}
\colorlet{textRed}{red!50!black}
\colorlet{textGreen}{green!50!black}
\definecolor{textPurple}{HTML}{681da8}
\fi

\ifx\colorscheme\colorschemelight\else
\pagecolor{bgColor}
\color{textColor}
\fi

%

\hypersetup{colorlinks,linkcolor=textRed,citecolor=textRed,urlcolor=textBlue}
%
\let\eps\varepsilon
\newcommand*{\defeq}{:=}
\newcommand*{\Th}{^{\textrm{th}}}
\newcommand*{\WLoG}{Without loss of generality}
\newcommand*{\wLoG}{without loss of generality}

%
\newcommand*{\boolone}{\mathbf{1}}  %
\newcommand*{\bigfloor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand*{\bigceil}[1]{\left\lceil #1 \right\rceil}
\newcommand*{\floor}[1]{\lfloor #1 \rfloor}
\newcommand*{\ceil}[1]{\lceil #1 \rceil}
\newcommand*{\bigabs}[1]{\left\lvert #1 \right\rvert}
\newcommand*{\bignorm}[1]{\left\lVert #1 \right\rVert}
\newcommand*{\abs}[1]{\lvert #1 \rvert}
\newcommand*{\norm}[1]{\lVert #1 \rVert}
\DeclareMathOperator*{\E}{\mathbb{E}}
\DeclareMathOperator*{\Var}{Var}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}
%
%
\newcommand*{\fimplies}{\Longrightarrow}  %
\newcommand*{\nfimplies}{\centernot{\Longrightarrow}}  %
\newcommand*{\nimplies}{\centernot{\implies}}  %
\newcommand*{\optprog}[3]{
\begin{array}{*3{>{\displaystyle}l}}
#1 & \multicolumn{2}{>{\displaystyle}l}{#2}
#3 \end{array}}

%
\Urlmuskip=0mu plus 0.1mu
\makeatletter
\g@addto@macro{\UrlBreaks}{%
\do\/%
\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m%
\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z%
\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M%
\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z%
\do\0\do\1\do\2\do\3\do\4\do\5\do\6\do\7\do\8\do\9%
}
\makeatother

%
\newcommand*{\eqEnt}{-}

\newcommand*{\Acal}{\mathcal{A}}
\newcommand*{\Fcal}{\mathcal{F}}
\newcommand*{\Ical}{\mathcal{I}}
\newcommand*{\Icalhat}{\widehat{\Ical}}
\newcommand*{\Scal}{\mathcal{S}}

\newcommand*{\Ahat}{\widehat{A}}
\newcommand*{\Chat}{\widehat{C}}
\newcommand*{\Ghat}{\widehat{G}}
\newcommand*{\Mhat}{\widehat{M}}
\newcommand*{\Shat}{\widehat{S}}

\newcommand*{\chat}{\widehat{c}}
\newcommand*{\ghat}{\widehat{g}}
\newcommand*{\jhat}{\widehat{\jmath}}
\newcommand*{\phat}{\widehat{p}}
\newcommand*{\qhat}{\widehat{q}}
\newcommand*{\what}{\widehat{w}}

%
\newcommand*{\MMS}{\mathrm{MMS}}
\newcommand*{\MXS}{\mathrm{MXS}}
\newcommand*{\WMMS}{\mathrm{WMMS}}
\newcommand*{\pessShare}{\mathrm{pessShare}}
\newcommand*{\APS}{\mathrm{APS}}
\newcommand*{\pAPS}{\mathrm{pAPS}}
\newcommand*{\dAPS}{\mathrm{dAPS}}
\newcommand*{\MEFS}{\mathrm{MEFS}}
\newcommand*{\PO}{\mathrm{PO}}
\newcommand*{\PROP}{\mathrm{PROP}}
\DeclareMathOperator{\minFS}{minFS}
\DeclareMathOperator{\restrict}{restrict}
\newcommand*{\EFXZero}{EFX$_0$}
\newcommand*{\sorted}{sorted}
\newcommand*{\loodM}{\ell\textrm{-out-of-}d\textrm{-share}}
\newcommand*{\loodT}{$\ell$-out-of-$d$-share}

%
\allowdisplaybreaks
%
%
\defaultaddspace=0.0em

%
%
%
%
%
%
%
%
%
%
%

\def\versionDefault{default}
\def\versionIjcai{ijcai}

\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{remark}[theorem]{Remark}

\newenvironment*{tightenum}{\enumerate[nosep]}{\endenumerate}

\let\version\versionDefault

\title{Exploring Relations among Fairness Notions\texorpdfstring{\\}{ }in Discrete Fair Division}
\author{
Jugal Garg%
\thanks{Department of Industrial \& Enterprise Engineering, University of Illinois at Urbana-Champaign, USA}
\\ \texttt{\small jugal@illinois.edu}
\and
Eklavya Sharma\footnotemark[1]
\\ \texttt{\small eklavya2@illinois.edu}
}
%
\date{\empty}

\begin{document}

\maketitle
%
%

\begin{abstract}
Fairly allocating indivisible items among agents is an important and well-studied problem.
However, \emph{fairness} does not have a single universally agreed-upon definition,
and so, many different definitions of fairness have been proposed and studied.
Some of these definitions are considered more fair than others,
although stronger fairness notions are also more difficult to guarantee.
%
In this work, we study 21 different notions of fairness and arrange them in a hierarchy.
Formally, we say that a fairness notion $F_1$ \emph{implies} another notion $F_2$ if
every $F_1$-fair allocation is also an $F_2$-fair allocation.
We give a near-complete picture of implications among fairness notions:
for almost every pair of notions, we either prove that one notion implies the other,
or we give a counterexample, i.e., an allocation that is fair by one notion but not by the other.
Although some of these results are well-known, many of them are new.
%
We give results for many different settings: allocating goods,
allocating chores, and allocating mixed manna.
We believe our work clarifies the relative merits of different fairness notions,
and provides a foundation for further research in fair allocation.
%
Moreover, we developed an \emph{inference engine} to automate part of our work.
This inference engine is implemented as a user-friendly web application
and is not restricted to fair division scenarios, so it holds potential for broader use.
\end{abstract}

%
\section{Introduction}
\label{sec:intro}

The problem of fairly allocating items among multiple agents has garnered significant attention in the fields of economics, computer science, and operations research.
It finds applications in many real-world scenarios such as dividing inheritance, dividing natural resources among countries or states, allocating public housing, divorce settlements, and distributing research papers to reviewers.
One of the oldest-known applications occurs in the Bible \cite{bible_cut_and_choose}.

Research in fair division began with the study of \emph{divisible} resources (e.g., land, water, cake)
\cite{steinhaus1940sur,stromquist1980how,varian1974equity}.
\emph{Fairness} was formally defined in two different ways:
\emph{envy-freeness} (EF) and \emph{proportionality} (PROP).
EF means that each agent believes that she got the best bundle of items compared to others,
and PROP means that each agent's value for her own bundle is at least a $1/n$ fraction
of her value of the entire set of items.
By the 1980s, procedures for finding allocations meeting these fairness criteria were known.

These positive results break down when the items become indivisible.
For example, when 5 identical goods must be divided among two agents,
an EF or PROP allocation cannot exist.
However, one can still aim for \emph{approximate} fairness;
an allocation that gives 3 goods to one agent and 2 goods to the other
is intuitively as fair as possible.
But when we move away from this simple example to the general setting where
items are not identical and agents have heterogeneous preferences,
formally defining (approximate) fairness becomes challenging.
Consequently, many definitions of fairness have been proposed for the indivisible setting.

EF was relaxed to a notion called \emph{EF1} (envy-freeness up to one item),
and algorithms guaranteeing EF1 allocations were given \cite{budish2011combinatorial,lipton2004approximately}.
However, EF1 was considered a very weak fairness notion, so a stronger notion
called \emph{EFX} (envy-freeness up to any item) \cite{caragiannis2019unreasonable} was extensively studied.
Despite considerable effort from researchers, the existence of EFX allocations
remains an important open problem.
Hence, relaxations of EFX \cite{caragiannis2023new,amanatidis2020multiple,chaudhury2021little}
and the existence of EFX in special cases \cite{chaudhury2024efx,plaut2020almost,amanatidis2021maximum}
have been studied.
%
A similar story played out for relaxations of PROP:
PROP1's existence was easy to prove \cite{aziz2021fair},
but stronger notions like MMS \cite{kurokawa2018fair} and PROPx \cite{aziz2020polynomial}
were shown to be infeasible, so their relaxations have been studied
\cite{kurokawa2018fair,akrami2023breaking,baklanov2021propm,caragiannis2023new}.
Insisting on polynomial-time computability,
compatibility with economic efficiency notions (like Pareto optimality),
or other constraints \cite{bouveret2017fair,biswas2018fair,equbal2024fair}
makes the problem harder, necessitating the use of weaker fairness notions.

Hence, for the problem of fairly allocating indivisible items,
several notions of fairness have been proposed,
occupying varying levels of perceived fairness.
We believe a systematic study of the relative merits of different fairness notions
is key to informing practical applications and further research in this area.
We contribute towards this objective by doing a
comprehensive comparison of 21 different fairness notions
through the lens of \emph{implications}.

Formally, a fairness notion $F_1$ \emph{implies} another notion $F_2$
if every $F_1$-fair allocation is also $F_2$-fair.
On the other hand, if we can find an $F_1$-fair allocation that is not $F_2$-fair,
we get a \emph{counterexample}, i.e., a proof that $F_1$ does not imply $F_2$.
We give a near-complete picture of implications among fairness notions for additive valuations:
for almost every pair of notions, we either prove that one notion implies the other, or we give a counterexample.
These results put fairness notions into a hierarchy,
and the counterexamples shed light on the pros and cons of different notions.
See \cref{fig:additive-nny} for the implications we show for additive goods and additive chores,
and \cref{sec:dags} for similar figures for other fair division settings.

\begin{figure*}[!htb]
\centering
\begin{subfigure}{0.45\textwidth}
    \centering
    \includegraphics[scale=0.7]{dags/additive-nonneg-nny.pdf}
    \caption{Goods}
\end{subfigure}
\hfill
\begin{subfigure}{0.5\textwidth}
    \centering
    \includegraphics[scale=0.7]{dags/additive-nonpos-nny.pdf}
    \caption{Chores}
\end{subfigure}
\caption[Additive goods and chores with equal entitlements]{%
Implications between fairness notions for additive valuations over goods and over chores
when agents have equal entitlements. There is a vertex for each fairness notion.
Notion $F_1$ implies notion $F_2$ iff there is a path from $F_1$ to $F_2$ in the graph
(except that it is not known whether MXS implies EEF1 for goods).
Red vertices are infeasible notions, green vertices are feasible notions,
and the feasibility of gray vertices are open problems.
Note that goods and chores have some key differences.
For goods, PROP $\fimplies$ MMS $\fimplies$ EEF1 $\fimplies$ PROP1,
but for chores, MMS $\nfimplies$ PROP1, and PROP $\nfimplies$ EEF1.}
\label{fig:additive-nny}
\end{figure*}

Many different settings of fair division have been considered in the literature:
goods vs chores vs mixed manna, equal vs unequal entitlements, and different classes of valuation functions.
Special cases have also been studied, like identical valuations or fair division among just two agents.
Although our primary focus is equal entitlements and additive valuations over goods and over chores,
we also consider all the other settings, i.e., all combinations of the above aspects of fair division.
At first, this leads to a combinatorial explosion of different settings.
However, we get around this by encoding our implication and non-implication results in a machine-readable format
and implementing an inference engine that uses these results to automatically deduce new results.

For example, if we ask the inference engine ``Does epistemic envy-freeness (EEF) imply maximin share (MMS) for goods
with additive valuations?", it would give an affirmative answer based on these three results we show in the paper:
\begin{enumerate}
\item EEF implies minimum-EF-share fairness (MEFS).
\item MEFS implies proportionality (PROP) under subadditive valuations
    (\cref{thm:impl:mefs-to-prop} in \cref{sec:impls-extra}).
\item PROP implies MMS for superadditive valuations
    (\cref{thm:impl:prop-to-wmms} in \cref{sec:impls-extra}).
\end{enumerate}
We implement our inference engine as a client-side web application in JavaScript%
\ifx\version\versionIjcai\else
\ (\url{https://sharmaeklavya2.github.io/cpigjs/fairDiv/})%
\fi.
The engine is not tied to the specifics of fair division,
and so may be of independent interest.

Some fairness notions were originally defined only for very specific fair division settings.
E.g., EFX was defined in \cite{caragiannis2019unreasonable} for additive goods.
%
%
We extend all fairness notions to the most general fair division setting we consider:
mixed manna with unequal entitlements.
In some cases, picking an appropriate definition was non-trivial,
and we present several observations to motivate the definitions we propose.

\subsection{Related Work}

The most common setting in fair division is equally-entitled agents
having additive valuations over goods. For this setting, \cite{bouveret2016characterizing}
studied implications among 5 fairness notions (CEEI, EF, PROP, MMS, min-max-share).
\cite{aziz2021fair} consider implications between EF, PROP, EF1, and PROP1 for mixed manna instead.
Over time, as new fairness notions were proposed
\cite{caragiannis2023new,babaioff2023fair,barman2018groupwise,aziz2018knowledge},
their connections with other well-established notions were studied.
However, the above works only consider a limited number of fairness notions and fair division settings.
Our work, on the other hand, aims to be exhaustive, and thus, have broader applicability.

For the popular setting of equally-entitled agents having additive valuations over goods,
many implications were already known. However, it wasn't clear if this was the final picture,
since many of the counterexamples were not known, a gap that we have now filled.
For less common settings, e.g., chores, mixed manna, or unequal entitlements, much less was known,
so our work makes a significant advancement towards understanding the fair division landscape.

\subsection{Structure of the Paper}

In \cref{sec:prelims}, we formally define the fair division problem, describe different fair division settings, and introduce associated notation.
In \cref{sec:notions}, we describe all the fairness notions that we consider.
In \cref{sec:summary}, we present a summary of our results, i.e.,
a list of implications and counterexamples between pairs of fairness notions.
In \cref{sec:cpig}, we describe our inference engine.
\Cref{sec:conclusion} contains concluding remarks and open problems.

\ifx\version\versionIjcai
Due to space constraints, we move several details to appendices,
which can be found in the full version of the paper included in the supplementary material.
\fi
\Cref{sec:settings-extra,sec:notions-extra} contain details on fair division settings and fairness notions.
\Cref{sec:impls-extra,sec:cex-extra} contain proofs of our (non-)implication results.
\Cref{sec:feas} contains results on (in)feasibility of fairness notions.
\Cref{sec:dags} contains several implication DAGs, i.e.,
analogues of \cref{fig:additive-nny} for other fair division settings.

\section{Preliminaries}
\label{sec:prelims}

In the fair division problem, there is a finite set $M$ of items
that must be distributed among a finite set $N$ of agents fairly.
Formally, we are given as input a \emph{fair division instance} $\Ical \defeq (N, M, V, w)$.
Here $w \defeq (w_i)_{i \in N}$ is a collection of positive numbers that sum to 1,
and $V \defeq (v_i)_{i \in N}$ is a collection of functions,
where $v_i: 2^M \to \mathbb{R}$ and $v_i(\emptyset) = 0$ for each $i \in N$.
$v_i$ is called agent $i$'s \emph{valuation function},
and $w_i$ is called agent $i$'s \emph{entitlement}.

Our task is to find a fair allocation. An \emph{allocation} $A \defeq (A_i)_{i \in N}$ is
a collection of pairwise-disjoint subsets of $M$ such that $\bigcup_{i=1}^n A_i = M$.
(If we relax the condition $\bigcup_{i=1}^n A_i = M$, we get \emph{partial allocations}.)
The set $A_i$ is called agent $i$'s \emph{bundle} in $A$.

For any non-negative integer $k$, define $[k] \defeq \{1, 2, \ldots, k\}$.
We generally assume \wLoG{} that $N = [n]$ and $M = [m]$.
For an agent $i$ and item $j$, we often write $v_i(j)$ instead of $v_i(\{j\})$ for notational convenience.
We denote a fair division instance by $(N, M, V, \eqEnt)$
when entitlements are equal.
For any function $u: 2^M \to \mathbb{R}$ and sets $S, T \subseteq M$, the \emph{marginal value}
of $S$ over $T$ is defined as $u(S \mid T) \defeq u(S \cup T) - u(T)$.

\subsection{Fairness Notions}
\label{sec:prelims:fairness-notions}

A \emph{fairness notion} $F$ is a function that takes as input a fair division instance $\Ical$,
a (partial) allocation $A$, and an agent $i$, and outputs either true or false.
When $F(\Ical, A, i)$ is true, we say that allocation $A$ is $F$\emph{-fair} to agent $i$,
or that agent $i$ is $F$\emph{-satisfied} by allocation $A$.
Allocation $A$ is said to be $F$-fair if it is $F$-fair to every agent.

A notion $F$ of fairness is said to be \emph{feasible} if for every fair division instance,
there exists an $F$-fair allocation.
We say that a notion $F_1$ of fairness \emph{implies} another notion $F_2$ of fairness if
every $F_1$-fair allocation is also an $F_2$-fair allocation.
An allocation $A$ is $(F_1+F_2)$-fair to an agent $i$ if it is both $F_1$-fair
and $F_2$-fair to agent $i$.

%
%

In a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
an allocation $A$ \emph{Pareto-dominates} an allocation $B$ if
$v_i(A_i) \ge v_i(B_i)$ for each agent $i \in [n]$,
and $v_i(A_i) > v_i(B_i)$ for some agent $i \in [n]$.
An allocation is \emph{Pareto-optimal} (PO) if it is not Pareto-dominated by any other allocation.
An allocation $A$ is $F+\PO$ if it is PO and $F$-fair.
%
%
%

\subsection{Fair Division Settings}
\label{sec:settings}

We study many fair division settings in this paper.
A fair division setting is given by multiple \emph{features}.
By picking different values of these features, we can get a wide variety of fair division settings.
We consider 5 features in this paper:
\begin{tightenum}
\item Whether entitlements are equal.
\item Whether there are only two agents.
\item Whether agents have identical valuations.
\item Valuation function type.
\item Marginal values.
\end{tightenum}
The first three are self-explanatory. We give an overview of the last two,
and defer the details to \cref{sec:settings-extra}.

\textbf{Valuation Function Type}:
This feature tells us how values of different sets of items are related to each other.
We consider additive, subadditive, superadditive, submodular, supermodular, and general functions.

\textbf{Marginal values}:
This feature tells us the possible marginal values items can have.
For an agent $i \in N$, the marginal value of item $j$ over set $S$
is given by $v_i(j \mid S) \defeq v_i(S \cup \{j\}) - v_i(S)$.
We consider several marginal value types, e.g., non-negative (goods), non-positive (chores),
bivalued ($\{a, b\}$), binary ($\{0, 1\}$), negative binary ($\{0, -1\}$).

\section{Fairness Notions}
\label{sec:notions}

We now describe all the different fairness notions we consider in this paper.

\subsection{Envy-Based Notions}

\begin{definition}[EF]
\label{defn:ef}
Let $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance.
In an allocation $A$, an agent $i \in [n]$ \emph{envies} another agent $j \in [n] \setminus \{i\}$ if
$\frac{v_i(A_i)}{w_i} < \frac{v_i(A_j)}{w_j}$.
Agent $i$ is \emph{envy-free} in $A$ (or $A$ is EF-fair to $i$) if
she doesn't envy any other agent in $A$.
\end{definition}

For unequal entitlements, most papers use the term WEF instead of EF.
But we use the term EF in this paper to emphasize that unequal entitlements
is a property of the fair division setting, not the fairness notion.
%
It is easy to see that EF allocations may not exist, so several relaxations have been studied.
Two of the most popular relaxations of EF are
EF1 \cite{budish2011combinatorial,lipton2004approximately},
and EFX \cite{caragiannis2019unreasonable}.

\begin{definition}[EF1]
\label{defn:ef1}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
an allocation $A$ is EF1-fair to agent $i$ if for every other agent $j$,
either $i$ does not envy $j$,
or $\displaystyle \frac{v_i(A_i)}{w_i} \ge \frac{v_i(A_j \setminus \{g\})}{w_j}$ for some $g \in A_j$,
or $\displaystyle \frac{v_i(A_i \setminus \{c\})}{w_i} \ge \frac{v_i(A_j)}{w_j}$ for some $c \in A_i$.
\end{definition}

\begin{definition}[EFX]
\label{defn:efx}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
an allocation $A$ is EFX-fair to agent $i$ if for each $j \in [n] \setminus \{i\}$,
either $i$ doesn't envy $j$, or both of the following hold:
\begin{enumerate}
\ifx\version\versionIjcai
\item $\displaystyle \frac{v_i(A_i)}{w_i} \ge \frac{\max\left(\left\{
    \begin{array}{l}
    v_i(A_j \setminus S): S \subseteq A_j
    \\\quad \textrm{ and } v_i(S \mid A_i) > 0
    \\\quad \textrm{ and } v_i(S \mid A_j \setminus S) \ge 0
    \end{array}\right\}\right)}{w_j}$.
\else
\item $\displaystyle \frac{v_i(A_i)}{w_i} \ge \frac{\max(\{v_i(A_j \setminus S): S \subseteq A_j
    \textrm{ and } v_i(S \mid A_i) > 0 \textrm{ and } v_i(S \mid A_j \setminus S) \ge 0\})}{w_j}$.
\fi
\ifx\version\versionIjcai
\item $\displaystyle \frac{\min\left(\left\{
    \begin{array}{r}
    v_i(A_i \setminus S): S \subseteq A_i \textrm{ and }
    \\ v_i(S \mid A_i \setminus S) < 0
    \end{array}\right\}\right)}{w_i} \ge \frac{v_i(A_j)}{w_j}$.
\else
\item $\displaystyle \frac{\min\left(\left\{v_i(A_i \setminus S): S \subseteq A_i
    \textrm{ and } v_i(S \mid A_i \setminus S) < 0 \right\}\right)}{w_i} \ge \frac{v_i(A_j)}{w_j}$.
\fi
\end{enumerate}
\end{definition}

\Cref{defn:efx} looks very different from the original definition of EFX
given by \cite{caragiannis2019unreasonable}.
Moreover, an alternative definition of EFX, which we call \EFXZero,
is studied in some works \cite{plaut2020almost,chaudhury2021little,chaudhury2024efx}.
In \cref{sec:notions:efx}, we explain why \cref{defn:efx} makes sense
and why it is better than \EFXZero.
We also show that it is equivalent to the original definition when
valuations are submodular, and it is equivalent to \EFXZero{}
when marginals are (strictly) positive or negative.

\subsection{Proportionality-Based Notions}

\begin{definition}[PROP]
\label{defn:prop}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
agent $i$'s \emph{proportional share} is $w_iv_i([m])$.
Allocation $A$ is \emph{proportional} (PROP) if $v_i(A_i) \ge w_iv_i([m])$.
\end{definition}

\begin{definition}[PROP1 \cite{conitzer2017fair}]
\label{defn:prop1}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
an allocation $A$ is PROP1-fair to agent $i$ if
either $v_i(A_i) \ge w_iv_i([m])$,
or $v_i(A_i \cup \{g\}) > w_iv_i([m])$ for some $g \in [m] \setminus A_i$,
or $v_i(A_i \setminus \{c\}) > w_iv_i([m])$ for some $c \in A_i$.
\end{definition}

Note that \cref{defn:prop1} uses strict inequalities, whereas most papers don't.
We define it this way to make it a slightly stronger fairness notion.
Also, this nuance doesn't affect most results, except those involving
binary valuations.

\begin{definition}[PROPx \cite{aziz2020polynomial,li2022almost}]
\label{defn:propx}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
an allocation $A$ is said to be PROPx-fair to agent $i$ iff
either $v_i(A_i) \ge w_iv_i([m])$ or both of these conditions hold:
\begin{tightenum}
\item $v_i(A_i \cup S) > w_iv_i([m])$ for every $S \subseteq [m] \setminus A_i$
    such that $v_i(S \mid A_i) > 0$.
\item $v_i(A_i \setminus S) > w_iv_i([m])$ for every $S \subseteq A_i$
    such that $v_i(S \mid A_i \setminus S) < 0$.
\end{tightenum}
\end{definition}

\Cref{defn:propx} looks different from other well-known definitions of PROPx
\cite{aziz2020polynomial,li2022almost}.
This is because those definitions were for more restricted settings,
and for those settings, we show that our definition is equivalent to theirs
(\cref{sec:notions:propx}).

\begin{definition}[PROPm]
\label{defn:propm}
Let $([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance.
An allocation $A$ is PROPm-fair to agent $i$ iff
$v_i(A_i) \ge w_iv_i([m])$ or both of these conditions hold:
\begin{tightenum}
\item\label{item:propm:chores}$v_i(A_i \setminus S) > w_iv_i([m])$ for every $S \subseteq A_i$
    such that $v_i(S \mid A_i \setminus S) < 0$.
\item\label{item:propm:goods}For every $j \in [n] \setminus \{i\}$, define
    $\tau_j$ to be 0 if $v_i(S \mid A_i) \le 0$ for all $S \subseteq A_j$,
    and $\min(\{v_i(S \mid A_i): S \subseteq A_j \textrm{ and } v_i(S \mid A_i) > 0\})$ otherwise.
    Define $T \defeq \{\tau_j: j \in [n] \setminus \{i\} \textrm{ and } \tau_j > 0\}$.
    Then either $T = \emptyset$, or $v_i(A_i) + \max(T) > w_iv_i([m])$.
\end{tightenum}
\end{definition}

PROPm was originally defined in \cite{baklanov2021achieving} for additive goods.
That definition has a minor error, which \cref{defn:propm} fixes.
We explain the error in \cref{sec:notions:propm}.
Note that PROPm and PROPx are equivalent for chores.

\subsection{Maximin Share and AnyPrice Share}

\begin{definition}[MMS \cite{budish2011combinatorial}]
\label{defn:mms}
For a finite set $M$, let $\Pi_n(M)$ be the set of all $n$-partitions of $M$.
For a function $f: 2^M \to \mathbb{R}$, define
\[ \MMS_f^n(M) \defeq \max_{P \in \Pi_n(M)} \min_{j=1}^n f(P_j). \]
%
For a fair division instance $\Ical \defeq (N, M, (v_i)_{i \in N}, \eqEnt)$,
agent $i$'s \emph{maximin share} (MMS) is given by $\MMS_{v_i}^{|N|}(M)$.
When the instance $\Ical$ is clear from context, we write $\MMS_i$ instead of $\MMS_{v_i}^{|N|}(M)$.
An allocation $A$ is MMS-fair to agent $i$ if $v_i(A_i) \ge \MMS_{v_i}^{|N|}(M)$.
A partition $P \in \Pi_n(M)$ for which $\min_{j=1}^n v_i(P_j) = \MMS_i$
is called agent $i$'s \emph{MMS partition}.
\end{definition}

For unequal entitlements, there are two well-known extensions of MMS:
weighted MMS (WMMS) \cite{farhadi2019fair}
and pessimistic share (pessShare) \cite{babaioff2023fair}.
See \cref{sec:notions:mms} for their formal definitions.
We focus on WMMS in this paper.

Next, we define AnyPrice Share (APS) \cite{babaioff2023fair}.
For any non-negative integer $m$, define
$\Delta_m \defeq \{x \in \mathbb{R}^m_{\ge 0}: \sum_{j=1}^m x_j = 1\}$.
For any $x \in \mathbb{R}^m$ and $S \subseteq [m]$, define $x(S) \defeq \sum_{j=1}^m x_j$.

\begin{definition}[APS]
\label{defn:aps}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
agent $i$'s AnyPrice Share (APS) is defined as
\[ \APS_i \defeq \min_{p \in \mathbb{R}^m}\;\max_{S \subseteq [m]: p(S) \le w_ip([m])} v_i(S). \]
Here $p$ is called the \emph{price vector}.
A vector $p^* \in \mathbb{R}^m$ is called an \emph{optimal} price vector if
\[ p^* \in \argmin_{p \in \mathbb{R}^m}\;\max_{S \subseteq [m]: p(S) \le w_ip([m])} v_i(S). \]
\end{definition}

\Cref{defn:aps} is slightly different from the original definition given in \cite{babaioff2023fair}.
However, they assume that all items are goods, and for that special case,
their definition is equivalent to \cref{defn:aps}
(c.f.\cref{thm:aps-optimal-price} in \cref{sec:notions:aps}).

\subsection{Derived Notions}

New fairness notions can be obtained by systematically modifying existing notions.
%
We start with two related concepts, epistemic fairness \cite{aziz2018knowledge,caragiannis2023new}
and minimum fair share \cite{caragiannis2023new}.

\begin{definition}[epistemic fairness]
\label{defn:epistemic}
Let $F$ be a fairness notion.
An allocation $A$ is \emph{epistemic-$F$-fair} to an agent $i$ if
there exists another allocation $B$ that is $F$-fair to agent $i$ and $B_i = A_i$.
$B$ is called agent $i$'s \emph{epistemic-$F$-certificate} for $A$.
\end{definition}

\begin{definition}[minimum fair share]
\label{defn:minfs}
For a fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$
and fairness notion $F$, let $\Acal(\Ical, F, i)$ be the set of allocations
that are $F$-fair to agent $i$.
%
Then $A$ is minimum-$F$-share-fair to agent $i$ if there exists
an allocation $B \in \Acal(\Ical, F, i)$ such that $v_i(A_i) \ge v_i(B_i)$.
Then $B$ is called agent $i$'s \emph{minimum-$F$-share-certificate} for $A$.
%
Equivalently, an allocation $A$ is \emph{minimum-$F$-share-fair} to agent $i$ if
$v_i(A_i)$ is at least her minimum-$F$-share, defined as
\[ \minFS(\Ical, F, i) \defeq \min_{A \in \Acal(\Ical, F, i)} v_i(A_i). \]
\end{definition}

We now describe pairwise fairness \cite{caragiannis2019unreasonable}
and groupwise fairness \cite{barman2018groupwise}.

\begin{definition}[restricting]
\label{defn:restricting}
Let $\Ical \defeq (N, M, (v_i)_{i \in N}, w)$ be a fair division instance
and $A$ be an allocation. For a subset $S \subseteq N$ of agents, where $|S| \ge 2$,
let $\restrict(\Ical, A, S)$ be the pair $(\Icalhat, \Ahat)$, where
$\Ahat \defeq (A_j)_{j \in S}$, $\Icalhat \defeq (S, \Mhat, (v_j)_{j \in S}, \what)$,
$\Mhat \defeq \bigcup_{j \in S} A_j$, and $\what_j \defeq w_j / \sum_{j \in S} w_j$.
\end{definition}

\begin{definition}[pairwise fairness]
\label{defn:pairwise}
For a fair division instance $\Ical \defeq (N, M, (v_i)_{i \in N}, w)$,
an allocation $A$ is called \emph{pairwise-$F$-fair} to agent $i$ if
for all $j \in N \setminus \{i\}$, $A^{(j)}$ is $F$-fair to $i$ in the instance $\Ical^{(j)}$,
where $(\Ical^{(j)}, A^{(j)}) \defeq \restrict(\Ical, A, \{i, j\})$.
\end{definition}

\begin{definition}[groupwise fairness]
\label{defn:groupwise}
For a fair division instance $\Ical \defeq (N, M, (v_i)_{i \in N}, w)$,
an allocation $A$ is called \emph{groupwise-$F$-fair} to agent $i$ if
for all $S \subseteq N \setminus \{i\}$, $A^{(S)}$ is $F$-fair to $i$ in the instance $\Ical^{(S)}$,
where $(\Ical^{(S)}, A^{(S)}) \defeq \restrict(\Ical, A, \{i\} \cup S)$.
\end{definition}

In this paper, we consider the following derivative notions:
\begin{tightenum}
\item Epistemic envy-freeness (EEF), epistemic EFX (EEFX), epistemic EF1 (EEF1).
\item Minimum EF share (MEFS), minimum EFX share (MXS), minimum EF1 share (M1S).
\item Pairwise proportionality (PPROP), pairwise MMS (PMMS), pairwise APS (PAPS).
\item Groupwise proportionality (GPROP), groupwise MMS (GMMS), groupwise APS (GAPS).
\end{tightenum}

\section{Summary of Results}
\label{sec:summary}

We summarize implications among fairness notions in \cref{table:impls1},
and defer the proofs to \cref{sec:impls-extra}.
In \cref{sec:impls-extra:tribool}, we prove additional implications when marginals are in $\{-1, 0, 1\}$.
%
We give several non-implication results in \cref{table:non-impls},
and defer the proofs to \cref{sec:cex-extra}.
%
We list results regarding the feasibility and infeasibility of fairness notions
in \cref{table:feas,table:infeas}, respectively, in \cref{sec:feas}.

For conciseness in \cref{table:impls1}, we write ep-$F$ instead of epistemic-$F$,
min-$F$-sh instead of minimum-$F$-share,
g-$F$ instead of groupwise-$F$, and p-$F$ instead of pairwise-$F$.

\begin{table*}[!htb]
\centering
\caption{Implications among fairness notions.}
\label{table:impls1}
\footnotesize
\begin{tabular}{cccccccc}
\toprule & \tiny valuation & \tiny marginals & \tiny identical & \tiny $n$ & \tiny entitlements & &
\\ \midrule $F$ $\Rightarrow$ ep-$F$ $\Rightarrow$ min-$F$-sh
    & -- & -- & -- & -- & -- & \cref{thm:impl:epistemic} & trivial
\\[\defaultaddspace] g-$F$ $\fimplies$ $F$ + p-$F$
    & -- & -- & -- & -- & -- & \cref{thm:impl:groupwise} & trivial
\\[\defaultaddspace] ep-$F$ $\fimplies$ $F$
    & -- & -- & -- & $n=2$ & -- & \cref{thm:impl:epistemic} & trivial
\\[\defaultaddspace] ($F$ or p-$F$) $\fimplies$ g-$F$
    & -- & -- & -- & $n=2$ & -- & \cref{thm:impl:groupwise} & trivial
%
\\ \midrule EF $\fimplies$ EFX+EF1
    & -- & -- & -- & -- & -- & \cref{thm:impl:ef-to-efx+ef1} & trivial
\\[\defaultaddspace] EEF $\fimplies$ EEFX+EEF1
    & -- & -- & -- & -- & -- & \cref{thm:impl:ef-to-efx+ef1} & trivial
\\[\defaultaddspace] MEFS $\fimplies$ MXS+M1S
    & -- & -- & -- & -- & -- & \cref{thm:impl:ef-to-efx+ef1} & trivial
\\[\defaultaddspace] EFX $\fimplies$ EF1\textsuperscript{\ref{foot:efx-to-ef1}}
    & additive & -- & -- & -- & -- & \cref{thm:impl:efx-to-ef1} & trivial
\\[\defaultaddspace] EEFX $\fimplies$ EEF1\textsuperscript{\ref{foot:efx-to-ef1}}
    & additive & -- & -- & -- & -- & \cref{thm:impl:efx-to-ef1} & trivial
\\[\defaultaddspace] MXS $\fimplies$ M1S\textsuperscript{\ref{foot:efx-to-ef1}}
    & additive & -- & -- & -- & -- & \cref{thm:impl:efx-to-ef1} & trivial
\\[\defaultaddspace] MXS $\fimplies$ EF1
    & additive & -- & -- & $n=2$ & -- & \cref{thm:impl:mxs-to-ef1-n2} & \textbf{new}
%
\\[\defaultaddspace] PROP $\fimplies$ PROPx
    & -- & -- & -- & -- & -- & -- & trivial
\\[\defaultaddspace] PROP $\fimplies$ PROP1
    & -- & -- & -- & -- & -- & -- & trivial
\\[\defaultaddspace] PROPx $\fimplies$ PROPm
    & -- & -- & -- & -- & -- & \cref{thm:impl:propx-to-propm} & folklore
\\[\defaultaddspace] PROPm $\fimplies$ PROP1
    & submodular & -- & -- & -- & -- & \cref{thm:impl:propm-to-prop1} & folklore
\\[\defaultaddspace] PROPm $\fimplies$ PROP1
    & -- & $> 0$, $< 0$ & -- & -- & -- & \cref{thm:impl:propm-to-prop1} & folklore
\\[\defaultaddspace] PROPm $\fimplies$ PROPx
    & -- & -- & -- & $n=2$ & -- & -- & trivial
\\[\defaultaddspace] PROPm $\fimplies$ PROPx
    & -- & chores & -- & -- & -- & -- & trivial
%
\\ \midrule MEFS $\fimplies$ PROP
    & subadditive & -- & -- & -- & -- & \cref{thm:impl:mefs-to-prop} & \cite{bouveret2016characterizing}
\\[\defaultaddspace] EF $\fimplies$ GPROP
    & subadditive & -- & -- & -- & -- & \cref{thm:impl:ef-to-gprop} & \cite{bouveret2016characterizing}
\\[\defaultaddspace] PROP $\fimplies$ EF
    & superadditive & -- & yes & -- & -- & \cref{thm:impl:prop-to-ef-superadd-id} & folklore
\\[\defaultaddspace] PPROP $\fimplies$ EF
    & superadditive & -- & -- & -- & -- & \cref{thm:impl:prop-to-ef-n2} & folklore
%
\\\midrule EEF1 $\fimplies$ PROP1
    & additive & -- & -- & -- & equal & \cref{thm:impl:eef1-to-prop1} & \cite{aziz2021fair}
\\[\defaultaddspace] EEF1 $\fimplies$ PROP1
    & additive & -- & -- & $n=2$ & -- & \cref{thm:impl:eef1-to-prop1} & \textbf{new}
\\[\defaultaddspace] EEF1 $\fimplies$ PROP1
    & subadditive & chores & -- & -- & -- & \cref{thm:impl:eef1-to-prop1} & \textbf{new}
\\[\defaultaddspace] EEFX $\fimplies$ PROPx
    & subadditive & chores & -- & -- & -- & \cref{thm:impl:eefx-to-propx} & \cite{li2022almost}
\\[\defaultaddspace] EFX $\fimplies$ PROPm
    & additive & goods & -- & -- & equal & \cref{thm:impl:efx-to-propm} & folklore
\\[\defaultaddspace] EFX $\fimplies$ PROPm
    & additive & -- & -- & $n=2$ & -- & \cref{thm:impl:efx-to-propm} & \textbf{new}
\\[\defaultaddspace] MXS $\fimplies$ PROP1
    & additive & goods & -- & -- & equal & \cref{thm:impl:mxs-to-prop1} & \cite{caragiannis2023new}
%
\\\midrule PMMS $\fimplies$ EFX
    & additive & -- & -- & -- & equal & \cref{thm:impl:mms-to-efx-n2} & folklore
\\[\defaultaddspace] PWMMS $\fimplies$ EFX
    & -- & goods & -- & -- & -- & \cref{thm:impl:mms-to-efx-n2} & folklore
\\[\defaultaddspace] WMMS $\fimplies$ EEFX
    & -- & goods & -- & -- & -- & \cref{thm:impl:mms-to-eefx} & \cite{caragiannis2023new}
\\[\defaultaddspace] MMS $\fimplies$ MXS
    & additive & -- & -- & -- & equal & \cref{thm:impl:mms-to-mxs} & \textbf{new}
%
\\\midrule PROP $\fimplies$ APS\textsuperscript{\ref{foot:pg}}
    & additive & -- & -- & -- & -- & \cref{thm:impl:prop-to-aps} & \cite{babaioff2023fair}
\\[\defaultaddspace] PROP $\fimplies$ WMMS\textsuperscript{\ref{foot:pg}}
    & superadditive & -- & -- & -- & -- & \cref{thm:impl:prop-to-wmms} & folklore
\\[\defaultaddspace] APS $\fimplies$ MMS\textsuperscript{\ref{foot:pg}}
    & -- & -- & -- & -- & equal & \cref{thm:impl:aps-to-pess} & \cite{babaioff2023fair}
\\[\defaultaddspace] PWMMS $\fimplies$ PAPS
    & additive & -- & -- & -- & -- & \cref{thm:impl:mms-to-aps-n2} & \cite{babaioff2023fair}
\\ \bottomrule
\end{tabular}

\begin{tightenum}
\item \label{foot:efx-to-ef1}These results hold for additional settings.
    See \cref{thm:impl:efx-to-ef1} in \cref{sec:impls-extra:among-ef-efx-ef1} for details.
\item \label{foot:pg}In addition to $F_1 \implies F_2$, we also get p-$F_1$ $\fimplies$ p-$F_2$
    and g-$F_1$ $\fimplies$ g-$F_2$.
\end{tightenum}
\end{table*}

\begin{table*}[!htb]
\centering
\caption{Non-implications among fairness notions.}
\label{table:non-impls}
\footnotesize
\begin{tabular}{cccccccc}
\toprule & \tiny valuation & \tiny marginals & \tiny identical & \tiny $n$ & \tiny entitlements & &
\\ \midrule APS+PROPx $\nfimplies$ PROP
    & $m=1$ & $1, -1$ & yes & any & equal & \cref{cex:single-item} & trivial
\\[\defaultaddspace] APS+PROPx $\nfimplies$ EF1
    & additive & $1$ & yes & $n \ge 3$ & equal & \cref{cex:share-vs-envy-goods} & folklore
\\[\defaultaddspace] APS+EEFX $\nfimplies$ EF1
    & additive & $-1$ & yes & $n \ge 3$ & equal & \cref{cex:share-vs-envy-chores} & folklore
%
\\\midrule EEF $\nfimplies$ EF1
    & additive & bival & no & $n=3$ & equal & \cref{cex:eef-not-ef1} & \textbf{new}
\\[\defaultaddspace] PROP $\nfimplies$ MEFS
    & additive & $> 0$ & no & $n=3$ & equal & \cref{cex:prop-not-mefs-goods} & \textbf{new}
\\[\defaultaddspace] PROP $\nfimplies$ MEFS
    & additive & $< 0$ & no & $n=3$ & equal & \cref{cex:prop-not-mefs-chores} & \textbf{new}
\\[\defaultaddspace] MEFS $\nfimplies$ EEF
    & additive & $> 0$ & no & $n=3$ & equal & \cref{cex:mefs-not-eef-goods} & \textbf{new}
\\[\defaultaddspace] MEFS $\nfimplies$ EEF
    & additive & $< 0$ bival & no & $n=3$ & equal & \cref{cex:mefs-not-eef-chores} & \textbf{new}
\\[\defaultaddspace] MEFS $\nfimplies$ EEF1
    & additive & $< 0$ bival & no & $n=3$ & equal & \cref{cex:mefs-not-eef1-chores} & \textbf{new}
%
\\\midrule EFX $\nfimplies$ MMS
    & additive & bival & yes & $n=2$ & equal & \cref{cex:efx-not-mms} & folklore
\\[\defaultaddspace] EF1 $\nfimplies$ MXS or PROPx
    & additive & bival & yes & $n=2$ & equal & \cref{cex:ef1-not-propx-mxs} & \textbf{new}
\\[\defaultaddspace] PROPx $\nfimplies$ M1S
    & additive & bival & yes & $n=2$ & equal & \cref{cex:propx-not-m1s} & \textbf{new}
\\[\defaultaddspace] MXS $\nfimplies$ PROPx
    & additive & bival & yes & $n=2$ & equal & \cref{cex:mxs-not-propx-n2} & \cite{caragiannis2022existence}
\\[\defaultaddspace] M1S $\nfimplies$ PROP1
    & additive & bival & yes & $n=2$ & equal & \cref{cex:m1s-not-prop1} & \textbf{new}
%
\\\midrule GAPS $\nfimplies$ PROPx
    & additive & $> 0$ bival & yes & $n=3$ & equal & \cref{cex:gaps-not-propx} & \textbf{new}
\\[\defaultaddspace] GMMS $\nfimplies$ APS
    & additive & $> 0$, $< 0$ & yes & $n=3$ & equal & \cref{cex:gmms-not-aps} & \cite{babaioff2023fair}
\\[\defaultaddspace] PMMS $\nfimplies$ MMS
    & additive & $> 0$, $< 0$ & yes & $n=3$ & equal & \cref{cex:pmms-not-mms} & \cite{caragiannis2019unreasonable}
\\[\defaultaddspace] APS $\nfimplies$ PROPm
    & additive & $> 0$ & yes & $n=3$ & equal & \cref{cex:aps-not-propm} & \textbf{new}
\\[\defaultaddspace] APS $\nfimplies$ PROP1
    & additive & $< 0$ bival & yes & $n=3$ & equal & \cref{cex:aps-not-prop1-chores} & \textbf{new}
\\[\defaultaddspace] GAPS $\nfimplies$ PROPm
    & additive & mixed bival & yes & $n=3$ & equal & \cref{cex:propm-mixed-manna} & \textbf{new}
%
\\\midrule GWMMS $\nfimplies$ PROP1
    & additive & $1$ & yes & $n=3$ & unequal & \cref{cex:prop1-plus-m1s-ue} & \textbf{new}
\\[\defaultaddspace] GAPS $\nfimplies$ M1S
    & additive & $1$ & yes & $n=3$ & unequal & \cref{cex:prop1-plus-m1s-ue} & \textbf{new}
\\[\defaultaddspace] PROP1 $\nfimplies$ M1S
    & additive & $-1$, $1$ & yes & $n=2$ & unequal & \cref{cex:prop1-not-m1s-n2} & \textbf{new}
%
\\\midrule EF+APS $\nfimplies$ PROP1
    & supermod & $\ge 0$ bival & yes & $n=2$ & equal & \cref{cex:ef-not-prop-supmod} & folklore
\\[\defaultaddspace] PROP $\nfimplies$ M1S
    & unit-demd & $\ge 0$ & yes & $n=2$ & equal & \cref{cex:prop-not-m1s-submod} & \textbf{new}
\\[\defaultaddspace] EF1 $\nfimplies$ MXS
    & submod & $\{0, 1\}$ & yes & $n=2$ & equal & \cref{cex:ef1-not-mxs-submod-binary} & \textbf{new}
\\ \bottomrule
\end{tabular}
\end{table*}

%

\section{Inference Engine}
\label{sec:cpig}

We wrote a computer program that uses data from \cref{table:impls1,table:non-impls}
to infer new implications and non-implications among fairness notions.
See \cref{fig:cpigjs} for the program's screenshot.
\ifx\version\versionIjcai
Its source code is included in the supplementary material.
\else
Its source code can be found at \url{https://github.com/sharmaeklavya2/cpigjs/}.
\fi

\begin{figure}[htb]
\centering
\ifx\version\versionIjcai
\includegraphics[width=0.96\linewidth]{figs/cpigjs-fd-ui2.pdf}
\else
\includegraphics[width=0.6\textwidth]{figs/cpigjs-fd-ui.pdf}
\fi
\caption[Screenshot from cpigjs]{
Screenshot from the inference engine's web interface for fair division.}
\label{fig:cpigjs}
\end{figure}

Our program is not limited to just fair division.
It can be used more broadly for \emph{conditional predicate implications}.
A \emph{predicate} is a function whose co-domain is $\mathbb{B} \defeq \{\mathtt{true}, \mathtt{false}\}$.
Given two predicates $\phi_1, \phi_2: \Omega \to \mathbb{B}$,
we say that $\phi_1$ \emph{implies} $\phi_2$ conditioned on $S \subseteq \Omega$,
denoted as $\phi_1 \fimplies_S \phi_2$,
if $\phi_1(x) \fimplies \phi_2(x)$ for all $x \in S$.
In fair division, $\Omega$ is the set of all pairs $(\Ical, A)$,
where $\Ical$ is a fair division instance and $A$ is an allocation for $\Ical$.
A fair division setting is a subset of $\Omega$,
and fairness notions are predicates over $\Omega$.

The inference engine takes as input a tuple $(\Fcal, \Phi, I, C)$.
$\Fcal$ is a set family over a ground set $\Omega$.
    Since $\Omega$ can be uncountable, we represent sets in $\Fcal$ implicitly
    (see \cref{sec:fd-set-family} for details).
    Moreover, given $S_1, S_2 \in \Fcal$, we should be able to efficiently tell whether $S_1 \subseteq S_2$.
$\Phi$ is a set of predicates over $\Omega$.
$I$ is a set of \emph{conditional implications}, i.e., a set of triples
    $(\phi_1, \phi_2, S) \in \Phi \times \Phi \times \Fcal$
    where $\phi_1 \fimplies_S \phi_2$.
$C$ is a set of \emph{conditional counterexamples}, i.e., a set of triples
    $(\phi_1, \phi_2, S) \in \Phi \times \Phi \times \Fcal$,
    where $\phi_1(x) \nfimplies \phi_2(x)$ for some $x \in S$.

We repeatedly query the inference engine with a set $S \in \Fcal$,
and it outputs all possible implications and counterexamples conditioned on $S$,
even those that are not explicitly present in $I$ and $C$.
In our implementation, we represent the output as a Hasse diagram.

The inference engine works in two steps.
In step 1, we find all implications conditioned on $S$.
To do this, we simply select implications from $I$ that are conditioned on
supersets of $S$, and compute their transitive closure.
In step 2, we find all counterexamples conditioned on $S$.
To do this, for each $(\phi_1, \phi_2, T) \in C$,
we first find all implications conditioned on $T$ like in step 1.
Next, if $\phi_1 \fimplies_T \phi'_1$ and $\phi'_2 \fimplies_T \phi_2$,
then we can infer that $\phi'_1 \nfimplies_{\!\!\!T\,\,\,} \phi'_2$, because otherwise,
by transitivity, we get $\phi_1 \fimplies_T \phi_2$.
Using this technique, we expand the set of all counterexamples.
Then we select counterexamples conditioned on subsets of $S$.

We can further extend the inference engine to also make inferences about
feasibility and infeasibility of fairness notions using data from
\cref{table:feas,table:infeas} (c.f.~\cref{sec:feas}).
Specifically, if $F_1 \fimplies_S F_2$ and $F_1$ is feasible for setting $S$,
then $F_2$ is also feasible for setting $S$.
Contrapositively, if $F_1 \fimplies_S F_2$ and $F_2$ is infeasible for setting $S$,
then $F_1$ is infeasible for setting $S$.

\section{Conclusion and Open Problems}
\label{sec:conclusion}

We prove several implications and non-implications between fairness notions,
and for additive valuations, we give an almost complete picture of implications.
We believe this would help inform further research in fair division.
This would be especially useful if one wants to extend a fair division result
to a stronger notion or a more general setting,
or study a weaker notion or a simpler setting for a hard problem.

\Cref{fig:additive-nny} shows us that the only notions whose feasibility is unknown are EFX and PMMS,
and resolving their feasibility is one of fair division's most important problems.
For mixed manna, even the existence of MXS allocations is open.

For equally-entitled agents having additive valuations over goods,
EF1+PO allocations are known to exist \cite{caragiannis2019unreasonable,barman2018finding},
but their efficient computation remains open.
For chores, even existence is open.
Relaxing the problem to EEF1+PO can be a helpful first step.

Here are two interesting open problems regarding implications that we could not resolve:
\begin{tightenum}
\item For additive goods (equal entitlements), does MXS imply EEF1?
    Note that the implication holds for the special case of two agents
    (\cref{thm:impl:mxs-to-ef1-n2} in \cref{sec:impls-extra}).
\item For additive goods with unequal entitlements, does APS imply PROP1?
    This is open even for two agents.
\end{tightenum}
For less-studied settings like submodular goods with equal entitlements,
or additive chores with unequal entitlements, many implications are still open.

Another interesting direction is to study implications of the form $F_1$+PO $\fimplies$ $F_2$+PO.
For additive valuations and equal entitlements, most questions of this form are already resolved.
This is because if $F_1 \implies F_2$, then $F_1$+PO $\fimplies$ $F_2$+PO.
On the other hand, most of our counterexamples use identical valuations, where every allocation is trivially PO.

In our work, we didn't consider constrained fair division \cite{bouveret2017fair,biswas2018fair,equbal2024fair}
or multiplicative approximations of fairness notions \cite{amanatidis2018comparing}.
It would be interesting to study implications
and extend the inference engine (\cref{sec:cpig}) for them.

\input{fimp-final.bbl}

\appendix

\section{Details on Fair Division Settings}
\label{sec:settings-extra}

\subsection{Valuation Function Type}

A function $u: 2^M \to \mathbb{R}$ is
\begin{tightenum}
\item \emph{additive} if for any two disjoint sets $S, T \subseteq M$, we have $u(S \cup T) = u(S) + u(T)$.
    Equivalently, for every set $S \subseteq M$, we have $u(S) = \sum_{j \in S} u(\{j\})$.
\item \emph{subadditive} if for any two disjoint sets $S, T \subseteq M$, we have $u(S \cup T) \le u(S) + u(T)$.
\item \emph{superadditive} if for any two disjoint sets $S, T \subseteq M$, we have $u(S \cup T) \ge u(S) + u(T)$.
\item \emph{submodular} if for any $S, T \subseteq M$, we have $u(S \cup T) + u(S \cap T) \le u(S) + u(T)$.
\item \emph{supermodular} if for any $S, T \subseteq M$, we have $u(S \cup T) + u(S \cap T) \ge u(S) + u(T)$.
\item \emph{cancelable} if for any $T \subseteq M$ and $S_1, S_2 \subseteq M \setminus T$,
    we have $u(S_1 \cup T) > u(S_2 \cup T) \implies u(S_1) > u(S_2)$.
\item \emph{unit-demand} if $u(\emptyset) = 0$, and for any $\emptyset \neq S \subseteq M$,
    we have $u(S) \defeq \max_{j \in S} u(\{j\})$.
\end{tightenum}

Note that when $|M|=1$, $u$ belongs to all of these classes simultaneously.

\subsection{Marginal Values}

\begin{tightenum}
\item \emph{goods}: $v_i(j \mid S) \ge 0$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\item \emph{chores}: $v_i(j \mid S) \le 0$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\item \emph{positive}: $v_i(j \mid S) > 0$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\item \emph{negative}: $v_i(j \mid S) < 0$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\item \emph{bivalued}: There exist constants $a, b \in \mathbb{R}$ such that
    $v_i(j \mid S) \in \{a, b\}$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\item \emph{binary}: $v_i(j \mid S) \in \{0, 1\}$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\item \emph{negative binary}: $v_i(j \mid S) \in \{0, -1\}$ for all $S \subseteq M$, $j \in M \setminus S$, and $i \in N$.
\end{tightenum}

We can break up the class of bivalued instances into positive bivalued, negative bivalued,
binary, negative binary, and mixed bivalued
(mixed means that exactly one of $a$ and $b$ is positive and the other is negative).

\section{Details on Fairness Notions}
\label{sec:notions-extra}

Although we do not define any new fairness notions in this paper,
we extend some of them to more general settings than they were originally defined for.
For some notions, this extension is not obvious and is based on careful deliberation.
Here we show how we arrived at these extensions and why they make sense.

\subsection{EFX}
\label{sec:notions:efx}

Defining EFX in the fully general setting (non-additive valuations, mixed manna) is tricky.
So, we start with the definition of EFX for additive goods,
and gradually build up to the general definition of EFX from there.
Some of these ideas also appear in \cite{caragiannis2022existence}.

There are actually two competing definitions of EFX for additive goods.
According to the original definition by \cite{caragiannis2019unreasonable},
an allocation $A$ is EFX-fair to agent $i$ if for every other agent $j$,
removing any positively-valued good from $j$'s bundle eliminates $i$'s envy. Formally,
\[ \frac{v_i(A_i)}{w_i} \ge \max_{g \in A_j: v_i(g) > 0} \frac{v_i(A_j \setminus \{g\})}{w_j}. \]

A different definition, often called \EFXZero{},
doesn't require the good $j$ to have a positive value to $i$ \cite{plaut2020almost}.
See \cref{defn:efx0-goods} for a formal definition,
and \cref{defn:efx0-chores} for the chores analogue.

\begin{definition}[\EFXZero{} for goods]
\label{defn:efx0-goods}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ over goods,
an allocation $A$ is \EFXZero-fair to agent $i$ if for every other agent $j$, and every $g \in A_j$,
\[ \frac{v_i(A_i)}{w_i} \ge \frac{v_i(A_j \setminus \{g\})}{w_j}. \]
\end{definition}

\begin{definition}[\EFXZero{} for chores]
\label{defn:efx0-chores}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ over chores,
an allocation $A$ is \EFXZero-fair to agent $i$ if for every other agent $j$, and every $c \in A_i$,
\[ \frac{-v_i(A_i \setminus \{c\})}{w_i} \le \frac{-v_i(A_j)}{w_j}. \]
\end{definition}

\EFXZero{} is known to be incompatible with PO
based on the following simple example,
whereas it is not known whether EFX is compatible with PO.

\begin{example}
\label{ex:efx-po}
Consider the fair division instance $([2], \{g_1, g_2, g_3\}, (v_i)_{i=1}^2, (1/2, 1/2))$,
where $v_1$ and $v_2$ are additive, and
\begin{align*}
   v_1(g_1) &= 1, & v_1(g_2) &= 0, & v_1(g_3) &= 10,
\\ v_2(g_1) &= 0, & v_2(g_2) &= 1, & v_2(g_3) &= 10.
\end{align*}
\end{example}

For \cref{ex:efx-po}, for any Pareto-optimal allocation $A$, we have $g_1 \in A_1$ and $g_2 \in A_2$
(otherwise we can transfer $g_1$ to agent 1 or $g_2$ to agent 2 to obtain a Pareto-dominator of $A$).
Then the agent who did not get $g_3$ in $A$ is not \EFXZero-satisfied, although she is EFX-satisfied.

While \EFXZero{} is trivial to extend to non-additive valuations, EFX is not.
This is because every good in $j$'s bundle can have zero value to agent $i$.
(Additionally, the good's marginal value over $A_j$ and $A_i$ may also be zero.)
Before we try to address this issue, let's instead jump to the setting of additive mixed manna.

One way to define EFX for mixed manna is this:
agent $i$ is EFX-satisfied by allocation $A$ if for every other agent $j$,
either agent $i$ doesn't envy $j$, or $i$'s envy towards $j$ vanishes after
either removing the least valuable positively-valued item from $j$
or after removing the most valuable negatively-valued item from $i$.
However, we argue that this is not sufficient.

\begin{example}
\label{ex:efx-mixed-manna}
Consider a fair division instance $\Ical$ having 2 agents with equal entitlements,
identical additive valuations, two goods of values $10$ each,
and two chores of values $-9$ each.
Consider an allocation $A$ where all the 4 items are allocated to agent 2.
Then agent 1 would be EFX-satisfied by $A$, even though allocation $B$,
where each agent gets one good and one chore, is fairer.
\end{example}

For goods, EFX is considered one of the strongest notions of fairness,
so we would like it to be a very strong notion for mixed manna too.
The key observation in \cref{ex:efx-mixed-manna} is that in allocation $A$,
we can transfer a set of items (containing one good and one chore) from agent 2 to agent 1
and get a fairer allocation.
This suggests that instead of (hypothetically) removing a single good from $j$
or a single chore from $i$ in the definition of EFX,
we should remove a positively-valued subset of $A_j$
or a negatively-valued subset of $A_i$.

Hence, for additive mixed manna, an allocation $A$ is EFX-fair to agent $i$
if for every other agent $j$, $i$ doesn't envy $j$, or both of the following hold:
\begin{enumerate}
\item $\displaystyle \frac{v_i(A_i)}{w_i} \ge \frac{\max(\{v_i(A_j \setminus S): S \subseteq A_j
    \textrm{ and } v_i(S) > 0\})}{w_j}$.
\item $\displaystyle \frac{\min(\{v_i(A_i \setminus S): S \subseteq A_i
    \textrm{ and } v_i(S) < 0 \})}{w_i} \ge \frac{v_i(A_j)}{w_j}$.
\end{enumerate}

This definition also hints towards how to handle goods with non-additive valuations.
Even if every good in $j$'s bundle has (marginal) value zero to agent $i$,
some subset of $j$'s bundle must have positive (marginal) value.
We replace $v(S) > 0$ by $v_i(S \mid A_i) > 0$ to ensure that
transferring $S$ from $j$ to $i$ leads to an increase in $i$'s valuation,
otherwise we lose compatibility with PO, as the following example demonstrates.

\begin{example}
\label{ex:efx-two-colors}
Consider a fair division instance with two equally-entitled agents having identical valuations.
There are 2 red goods and 4 blue goods. The value of any bundle is $\max(k_r, k_b)$,
where $k_r$ and $k_b$ are the numbers of red and blue goods in the bundle, respectively.
\end{example}

For \cref{ex:efx-two-colors}, in any allocation, some agent gets at most 2 blue goods,
and that agent's value for her own bundle can be at most 2.
Also, the maximum value that any bundle can have is 4.
Hence, an allocation is PO iff one agent gets all the blue goods
and the other agent gets all the red goods.
If we want EFX and PO to be compatible for this instance,
we must define EFX such that the allocation obtained by giving
all blue goods to one agent and all red goods to the other agent must be EFX.

We now identify special cases where our definition of EFX (\cref{defn:efx})
is equivalent to well-known definitions of EFX under those special cases.

\begin{lemma}
\label{thm:efx-equiv-positive}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if all marginals are positive for agent $i$
(i.e., $v_i(g \mid R) > 0$ for all $R \subseteq [m]$ and $g \in [m] \setminus R$),
then $A$ is EFX-fair to agent $i$ iff $A$ is \EFXZero-fair to $i$.
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:efx}, $v_i(A_j \setminus S)$ is maximized by picking
some minimal $S \subseteq A_j$ such that $v_i(S \mid A_i) > 0$.
Since marginals are positive, $v_i(S \mid A_i) > 0$ for any $|S| \ge 1$.
Hence, in \cref{defn:efx}, we assume $|S| = 1$ \wLoG{}.
\end{proof}

\begin{lemma}
\label{thm:efx-equiv-negative}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if all marginals are negative for agent $i$
(i.e., $v_i(c \mid R) < 0$ for all $R \subseteq [m]$ and $c \in [m] \setminus R$),
then $A$ is EFX-fair to agent $i$ iff $A$ is \EFXZero-fair to agent $i$.
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:efx}, $|v_i(A_i \setminus S)|$ is maximized by picking
some minimal $S \subseteq A_i$ such that $v_i(S \mid A_i \setminus S) < 0$.
Since marginals are negative, $v_i(S \mid A_i \setminus S) < 0$ for any $|S| \ge 1$.
Hence, in \cref{defn:efx}, we assume $|S| = 1$ \wLoG{}.
\end{proof}

\begin{lemma}
\label{thm:submod-positive-elem}
Let $f: 2^M \to \mathbb{R}$ be a submodular function and $S, T \subseteq M$ be disjoint sets.
Then $f(S \mid T) > 0$ implies $f(g \mid T) > 0$ for some $g \in S$.
\end{lemma}
\begin{proof}
Let $S \defeq \{g_1, \ldots, g_k\}$. Then
\[ f(S \mid T) = \sum_{t=1}^k f(g_t \mid T \cup \{g_1, \ldots, g_{t-1}\})
    \le \sum_{t=1}^k f(g_t \mid T). \]
Hence, $\sum_{g \in S} f(g \mid T) \ge f(S \mid T) > 0$, so $f(g \mid T) > 0$ for some $g \in S$.
\end{proof}

\begin{lemma}
\label{thm:efx-equiv-submod-goods}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is submodular and all marginals are non-negative for agent $i$
(i.e., $v_i(g \mid R) \ge 0$ for all $R \subseteq [m]$ and $g \in [m] \setminus R$),
then $A$ is EFX-fair to agent $i$ iff for all $j \in [n] \setminus \{i\}$, we have
\[ \frac{v_i(A_i)}{w_i} \ge \frac{\max(\{v_i(A_j \setminus \{g\}):
    g \in A_j \textrm{ and } v_i(g \mid A_i) > 0\})}{w_j}. \]
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:efx}, $v_i(A_j \setminus S)$ is maximized by picking
some minimal $S \subseteq A_j$ such that $v_i(S \mid A_i) > 0$.
By \cref{thm:submod-positive-elem}, $v_i(S \mid A_i) > 0$ implies $\exists g \in S$
such that $v_i(g \mid A_i) > 0$, so we can assume \wLoG{} that $|S| = 1$.
\end{proof}

\begin{lemma}
\label{thm:submod-negative-elem}
Let $f: 2^M \to \mathbb{R}$ be a submodular function and let $S \subseteq T \subseteq M$.
Then $f(S \mid T \setminus S) < 0$ implies $f(c \mid T \setminus \{c\}) < 0$ for some $c \in S$.
\end{lemma}
\begin{proof}
Let $S \defeq \{c_1, \ldots, c_k\}$.
For any $t \in \{0\} \cup [k]$, let $S_t \defeq \{c_1, \ldots, c_t\}$. Then
\begin{align*}
f(S \mid T \setminus S) &= f(T \setminus S_0) - f(T \setminus S_k)
\\ &= \sum_{t=1}^k (f(T \setminus S_{t-1}) - f(T \setminus S_t))
\\ &= \sum_{t=1}^k f(c_t \mid T \setminus S_t)
\\ &\ge \sum_{t=1}^k f(c_t \mid T \setminus \{c_t\}).
\end{align*}
Hence, $\sum_{c \in S} f(c \mid T \setminus \{c\}) \le f(S \mid T \setminus S) < 0$,
so $f(c \mid T \setminus \{c\}) < 0$ for some $c \in S$.
\end{proof}

\begin{lemma}
\label{thm:efx-equiv-submod-chores}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is submodular and all marginals are non-positive for agent $i$
(i.e., $v_i(c \mid R) \le 0$ for all $R \subseteq [m]$ and $c \in [m] \setminus R$),
then $A$ is EFX-fair to agent $i$ iff for all $j \in [n] \setminus \{i\}$, we have
\[ \frac{\max(\{-v_i(A_i \setminus \{c\}): c \in A_i
    \textrm{ and } v_i(c \mid A_i \setminus \{c\}) < 0\})}{w_i} \le \frac{-v_i(A_j)}{w_j}. \]
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:efx}, $|v_i(A_i \setminus S)|$ is maximized by picking
some minimal $S \subseteq A_i$ such that $v_i(S \mid A_i \setminus S) < 0$.
By \cref{thm:submod-negative-elem}, $v_i(S \mid A_i \setminus S) < 0$ implies $\exists c \in S$
such that $v_i(c \mid A_i \setminus \{c\}) < 0$, so we can assume \wLoG{} that $|S| = 1$.
\end{proof}

\subsection{MMS}
\label{sec:notions:mms}

\begin{definition}[WMMS \cite{farhadi2019fair}]
\label{defn:wmms}
Let $\Ical \defeq (N, M, (v_i)_{i \in N}, w)$ be a fair division instance.
Let $\Acal$ be the set of all allocations for $\Ical$.
Then agent $i$'s \emph{weighted maximin share} (WMMS) is
\[ \WMMS_i := w_i \max_{X \in \Acal} \min_{j \in N} \frac{v_i(X_j)}{w_j}. \]
An allocation $A$ is WMMS-fair to agent $i$ if $v_i(A_i) \ge \WMMS_i$.
An allocation $X$ that maximizes $w_i \min_{j \in N} \frac{v_i(X_j)}{w_j}$
is called agent $i$'s \emph{WMMS partition}.
\end{definition}

For equal entitlements, it's trivial to show that $\WMMS_i = \MMS_i$.

\begin{definition}[pessShare \cite{babaioff2023fair}]
\label{defn:pessShare}
Let $1 \le \ell \le d$. Let $\Pi_d(M)$ be the set of all $d$-partitions of $M$.
Then agent $i$'s $\ell$-out-of-$d$ share is defined as
\[ \loodM_i := \max_{\substack{X \in \Pi_d(M):\\v_i(X_j) \le v_i(X_{j+1}) \forall j \in [d-1]}} \sum_{j=1}^{\ell} v_i(X_j). \]
Then agent $i$'s pessimistic share is defined as
\[ \pessShare_i := \sup_{1 \le \ell \le d:\;\ell / d \le w_i} \loodM_i. \]
Allocation $A$ is pessShare-fair to agent $i$ if $v_i(A_i) \ge \pessShare_i$.
\end{definition}

\begin{lemma}
\label{thm:pess-is-mms}
For any fair division instance with equal entitlements,
the pessShare of any agent is the same as her maximin share.
\end{lemma}
\begin{proof}
Let $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance,
where $w_i = 1/n$ for all $i \in [n]$.
Any agent $i$'s $1$-out-of-$n$ share is the same as $\MMS_i$, so $\pessShare_i \ge \MMS_i$.

Let $\ell/d \le n$ and let $X \in \Pi_d(M)$ such that $v_i(X_j) \le v_i(X_{j+1})$ for all $j \in [d-1]$.
Now let $Y_1$ be the union of the first $\ell$ bundles of $X$,
let $Y_2$ be the union of the next $\ell$ bundles of $X$, and so on.
Add any remaining bundles of $X$ to $Y_n$.
Formally, $Y \in \Pi_n(M)$ where $Y_k \defeq \bigcup_{j=(k-1)\ell+1}^{k\ell} X_j$ for $k \in [n-1]$
and $Y_n \defeq M \setminus \bigcup_{j=1}^{n-1} Y_j$.
Then $Y_n$ contains at least $\ell$ bundles of $X$, since $d \ge \ell n$.
Hence, $v_i(Y_1) \le v_i(Y_2) \le \ldots \le v_i(Y_n)$,
and $v_i(Y_1)$ is agent $i$'s $\ell$-out-of-$d$ share.

By definition of MMS, $v_i(Y_1) \le \MMS_i$.
Hence, for any $\ell$ and $d$ such that $\ell/d \le n$,
agent $i$'s $\ell$-out-of-$d$ share is at most her MMS.
Hence, $\pessShare \le \MMS_i$.
\end{proof}

\subsection{APS}
\label{sec:notions:aps}

\begin{lemma}
\label{thm:aps-optimal-price}
Let $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance.
For agent $i$, let $G$ be the set of goods and $C$ be the set of chores,
i.e., $G \defeq \{g \in [m]: v_i(g \mid R) \ge 0 \; \forall R \subseteq [m] \setminus \{g\}\}$
and $C \defeq \{c \in [m]: v_i(c \mid R) \le 0 \; \forall R \subseteq [m] \setminus \{c\}\}$
Then for some optimal price vector $\phat \in \mathbb{R}^m$, we have
$\phat_g \ge 0$ for all $g \in G$ and $\phat_c \le 0$ for all $c \in C$.
\end{lemma}
\begin{proof}
Let $p^* \in \mathbb{R}^m$ be an optimal price vector.
Let $\Ghat \defeq \{g \in G: p^*_g < 0\}$ and $\Chat \defeq \{c \in C: p^*_c > 0\}$.
%
The high-level idea is that if we change the price of $\Ghat \cup \Chat$ to 0,
we get potentially better prices.
%
Define $\phat \in \mathbb{R}^m$ as
\[ \phat_j \defeq \begin{cases}
0 & \textrm{ if } j \in \Ghat \cup \Chat
\\ p^*_j & \textrm{ otherwise}
\end{cases}, \]
and let
\[ \Shat \in \argmax_{S \subseteq [m]: \phat(S) \le w_i\phat([m])} v_i(S) .\]
Since $\phat(\Shat \cup \Ghat \setminus \Chat) = \phat(\Shat)$
and $v_i(\Shat \cup \Ghat \setminus \Chat) \ge v_i(\Shat)$,
we can assume without loss of generality that
$\Ghat \subseteq \Shat$ and $\Chat \cap \Shat = \emptyset$.
\[ p^*(\Shat) - w_ip^*([m])
= (\phat(\Shat) - w_i\phat([m])) - (1-w_i)(-p^*(\Ghat)) - w_ip^*(\Chat) \le 0. \]
Hence,
\[ \max_{S \subseteq [m]: p^*(S) \le w_ip^*([m])} v_i(S)
\ge v_i(\Shat) = \max_{S \subseteq [m]: \phat(S) \le w_i\phat([m])} v_i(S), \]
so $\phat$ is also an optimal price vector.
\end{proof}

When all items are goods, by \cref{thm:aps-optimal-price}, we can assume \wLoG{} that
$p$ is non-negative and $p([m]) = 1$. Hence,
\[ \APS_i = \min_{p \in \Delta_m}\;\max_{S \subseteq [m]: p(S) \le w_i} v_i(S). \]

When all items are chores, by \cref{thm:aps-optimal-price}, we can assume \wLoG{} that
$p$ is non-positive and $p([m]) = -1$. Hence,
\[ -\APS_i = \max_{q \in \Delta_m}\;\min_{S \subseteq [m]: q(S) \ge w_i} |v_i(S)|. \]

\cite{babaioff2023fair} gives another equivalent definition of APS,
called the \emph{dual} definition.

\begin{definition}[APS (dual)]
\label{defn:aps-dual}
Let $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance.
For an agent $i$ and any $z \in \mathbb{R}$, let $\Scal_z \defeq \{S \subseteq [m]: v_i(S) \ge z\}$.
Then agent $i$'s AnyPrice share, denoted by $\APS_i$, is the largest value $z$ such that
\[ \exists x \in \mathbb{R}_{\ge 0}^{\Scal_z}, \sum_{S \in \Scal_z} x_S = 1
    \textrm{ and } \left(\forall j \in [m], \sum_{S \in \Scal_z: j \in S} x_S = w_i\right). \]
\end{definition}

\Cref{defn:aps-dual} can be interpreted as a linear programming relaxation of MMS.
Formally, when entitlements are equal, adding the integrality constraints
$nx_S \in \mathbb{Z}_{\ge 0}$ for all $S \in \Scal_z$ gives us an alternate definition of MMS.

\cite{babaioff2023fair} show that the primal and dual definitions of APS are equivalent.
They prove this only for goods, but their proof can be easily adapted to the case of mixed manna.

\begin{lemma}
\label{thm:aps-primal-dual-equiv}
\Cref{defn:aps,defn:aps-dual} are equivalent.
\end{lemma}
\begin{proof}
Let $\pAPS_i$ and $\dAPS_i$ be agent $i$'s AnyPrice shares given by
the primal and dual definitions, respectively.
We will show that for any $z \in \mathbb{R}$, $\pAPS_i \ge z$ iff $\dAPS_i \ge z$.
This would prove that $\pAPS_i = \dAPS_i$.

$\dAPS_i \ge z$ iff the following linear program has a feasible solution:
\[ \min_{x \in \mathbb{R}_{\ge 0}^{\Scal_z}} 0
\textrm{ where } \sum_{S \in \Scal_z} x_S = 1
    \textrm{ and } \left(\forall j \in [m], \sum_{S \in \Scal_z: j \in S} x_S = w_i\right). \]
Its dual is
\[ \max_{p \in \mathbb{R}^m, r \in \mathbb{R}} r - w_ip([m])
\textrm{ where } p(S) \ge r \textrm{ for all } S \in \Scal_z. \]
The dual LP is feasible since $(0, 0)$ is a solution.
Furthermore, if $(p, r)$ is feasible for the dual LP,
then $(\alpha p, \alpha r)$ is also feasible, for any $\alpha \ge 0$.
Hence, by strong duality of LPs, the primal LP is feasible iff
all feasible solutions to the dual have objective value at most 0.

For a given $p$, the optimal $r$ is $\min_{S \in \Scal_z} p(S)$.
Hence, the dual LP is bounded iff for all $p \in \mathbb{R}^m$,
\[ \min_{S \in \Scal_z} p(S) \le w_ip([m]). \]
Furthermore,
\begin{align*}
& \forall p \in \mathbb{R}^m, \min_{S \in \Scal_z} p(S) \le w_ip([m])
\\ &\iff \forall p \in \mathbb{R}^m, \exists S \subseteq [m] \textrm{ such that }
    p(S) \le w_ip([m]) \textrm{ and } v_i(S) \ge z
\\ &\iff \left(\min_{p \in \mathbb{R}^m} \max_{S \subseteq [m]: p(S) \le w_ip([m])} v_i(S)\right) \ge z
\\ &\iff \pAPS_i \ge z.
\end{align*}
Hence, $\dAPS_i \ge z \iff \pAPS_i \ge z$.
\end{proof}

\subsection{PROPx}
\label{sec:notions:propx}

We identify special cases where our definition of PROPx (\cref{defn:propx})
is equivalent to well-known definitions of PROPx under those special cases.

\begin{lemma}
\label{thm:propx-equiv-positive}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if all marginals are positive for agent $i$
(i.e., $v_i(g \mid R) > 0$ for all $R \subseteq [m]$ and $g \in [m] \setminus R$),
then $A$ is PROPx-fair to agent $i$ iff $v_i(A_i) \ge w_iv_i([m])$ or
$v_i(A_i \cup \{g\}) > w_iv_i([m])$ for some $g \in [m] \setminus A_i$.
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:propx}, $v_i(A_i \cup S)$ is minimized by picking
some minimal $S \subseteq [m] \setminus A_i$ such that $v_i(S \mid A_i) > 0$.
Since marginals are positive, $v_i(S \mid A_i) > 0$ for any $|S| \ge 1$.
Hence, in \cref{defn:propx}, we assume $|S| = 1$ \wLoG{}.
\end{proof}

\begin{lemma}
\label{thm:propx-equiv-negative}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if all marginals are negative for agent $i$
(i.e., $v_i(c \mid R) < 0$ for all $R \subseteq [m]$ and $c \in [m] \setminus R$),
then $A$ is PROPx-fair to agent $i$ iff $|v_i(A_i)| \le w_i|v_i([m])|$ or
$|v_i(A_i \setminus \{c\})| < w_i|v_i([m])|$ for some $c \in A_i$.
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:propx}, $|v_i(A_i \setminus S)|$ is maximized by picking
some minimal $S \subseteq A_i$ such that $v_i(S \mid A_i \setminus S) < 0$.
Since marginals are negative, $v_i(S \mid A_i \setminus S) < 0$ for any $|S| \ge 1$.
Hence, in \cref{defn:propx}, we assume $|S| = 1$ \wLoG{}.
\end{proof}

\begin{lemma}
\label{thm:propx-equiv-submod-goods}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is submodular and all marginals are non-negative for agent $i$
(i.e., $v_i(g \mid R) \ge 0$ for all $R \subseteq [m]$ and $g \in [m] \setminus R$),
then $A$ is PROPx-fair to agent $i$ iff $v_i(A_i) \ge w_iv_i([m])$ or
$v_i(A_i \cup \{g\}) > w_iv_i([m])$ for some $g \in [m] \setminus A_i$ such that $v_i(g \mid A_i) > 0$.
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:propx}, $v_i(A_i \cup S)$ is minimized by picking
some minimal $S \subseteq [m] \setminus A_i$ such that $v_i(S \mid A_i) > 0$.
By \cref{thm:submod-positive-elem}, $v_i(S \mid A_i) > 0$ implies $\exists g \in S$
such that $v_i(g \mid A_i) > 0$, so we can assume \wLoG{} that $|S| = 1$.
\end{proof}

\begin{lemma}
\label{thm:propx-equiv-submod-chores}
In the fair division instance $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is submodular and all marginals are non-positive for agent $i$
(i.e., $v_i(c \mid R) \le 0$ for all $R \subseteq [m]$ and $c \in [m] \setminus R$),
then $A$ is PROPx-fair to agent $i$ iff $|v_i(A_i)| \le w_i|v_i([m])|$ or
$|v_i(A_i \setminus \{c\})| < w_i|v_i([m])|$ for some $c \in A_i$
such that $v_i(c \mid A_i \setminus \{c\}) < 0$.
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:propx}, $|v_i(A_i \setminus S)|$ is maximized by picking
some minimal $S \subseteq A_i$ such that $v_i(S \mid A_i \setminus S) < 0$.
By \cref{thm:submod-negative-elem}, $v_i(S \mid A_i \setminus S) < 0$ implies $\exists c \in S$
such that $v_i(c \mid A_i \setminus \{c\}) < 0$, so we can assume \wLoG{} that $|S| = 1$.
\end{proof}

\subsection{PROPm}
\label{sec:notions:propm}

PROPm was first defined in \cite{baklanov2021achieving}
for equal entitlements and goods with additive valuations.
%
Moreover, they claimed that PROPx implies PROPm and PROPm implies PROP1.

According to \cite{baklanov2021achieving}, when dividing a set $[m]$ of goods among $n$ agents,
$A$ is PROPm-fair to agent $i$ if $v_i(A_i) + \max_{j \neq i} m_i(A_j) \ge v_i([m])/n$,
where $m_i(S) \defeq \min_{g \in S} v_i(g)$.
However, \cite{baklanov2021achieving} doesn't explicitly state what $m_i(\emptyset)$ is.
The well-known convention of $\min(\emptyset) = \infty$ leads to the strange phenomenon
where every agent is PROPm-satisfied if two agents receive no goods
(whereas PROP1 is not guaranteed).
One way to fix this is to only consider agents with non-empty bundles,
i.e., we say that $i$ is PROPm-satisfied by $A$ if
$v_i(A_i) + \max_{j \in [n] \setminus \{i\}: A_j \neq \emptyset} m_i(A_j) \ge v_i([m])/n$.
This doesn't give a satisfactory definition when $A_j = \emptyset$
for all $j \in N \setminus \{i\}$ (assuming $\max(\emptyset) = -\infty$),
so we define $A$ to be PROPm-fair to $i$ for that edge case.

The above idea, along with extending the definition to mixed manna
in the same way as PROPx (\cref{defn:propx}),
gives us our definition of PROPm (\cref{defn:propm}).
Moreover, the following two example instances
(having 3 equally-entitled agents with identical additive valuations)
guided our definition of PROPm.

\begin{enumerate}
\item Consider three goods of values 100, 10, and 1.
    Intuitively, each agent should get 1 good each, and that should be considered fair.
\item Consider 5 items of values $-1000$, $-1000$, $-1000$, $10$, $1$.
    Intuitively, the allocation ($\{-1000, 10, 1\}$, $\{-1000\}$, $\{-1000\}$) should not be fair,
    and the allocation ($\{-1000, 10\}$, $\{-1000, 1\}$, $\{-1000\}$) should be fair.
    In both allocations, removing a chore makes an agent PROP-satisfied, so just
    satisfying this condition is not enough. We also need to look at the goods.
\end{enumerate}

For mixed manna, \cite{livanos2022almost} defines a notion called PropMX,
but that definition is too weak: when all items are goods, every allocation is trivially PropMX.

\cite{baklanov2021propm} showed that for equal entitlements and goods with additive valuations,
a PROPm allocation always exists and can be computed in polynomial time.
It can be verified that their result also works for our definition of PROPm (\cref{defn:propm}).

We show that \cref{defn:propm} simplifies for submodular valuations over goods.

\begin{lemma}
\label{thm:propm-submod-goods}
Let $([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance.
An allocation $A$ is PROPm-fair to agent $i$ iff $v_i(A_i) \ge w_iv_i([m])$
or $T = \emptyset$ or $v_i(A_i) + \max(T) > w_iv_i([m])$, where
$T \defeq \{\tau_j \mid j \in [n] \setminus \{i\} \textrm{ and } \tau_j > 0\}$, and
\[ \tau_j \defeq \begin{cases}
0 & \textrm{ if } v_i(g \mid A_i) \le 0 \textrm{ for all } g \in A_j
\\ \min(\{v_i(g \mid A_i) \mid g \in A_j \textrm{ and } v_i(g \mid A_i) > 0\}) & \textrm{ otherwise}
\end{cases}. \]
\end{lemma}
\begin{proof}[Proof sketch]
In \cref{defn:propm}, $v_i(S \mid A_i)$ is minimized by picking
some minimal $S \subseteq A_j$ such that $v_i(S \mid A_i) > 0$.
By \cref{thm:submod-positive-elem}, $v_i(S \mid A_i) > 0$ implies $\exists g \in S$
such that $v_i(g \mid A_i) > 0$, so we can assume \wLoG{} that $|S| = 1$.
\end{proof}

\section{Proofs of Implications}
\label{sec:impls-extra}

\subsection{Among Derived Notions}
\label{sec:impls-extra:among-derived}

\begin{remark}
\label{thm:impl:epistemic}
For any fairness notion $F$, if an allocation is $F$-fair to an agent $i$,
then it is also epistemic-$F$-fair to agent $i$.
If an allocation is epistemic-$F$-fair to an agent $i$,
then it is also minimum-$F$-share-fair to agent $i$.
If there are only two agents, then an allocation is epistemic-$F$-fair to an agent $i$
iff it is $F$-fair to agent $i$.
\end{remark}

\begin{remark}
\label{thm:impl:groupwise}
For any fairness notion $F$, if an allocation is groupwise-$F$-fair to an agent $i$,
then it is also pairwise-$F$-fair to agent $i$ and $F$-fair to agent $i$.
When there are only two agents, all three of these notions are equivalent.
\end{remark}

\begin{lemma}
\label{thm:impl:ext-to-epistemic}
Let $\Omega$ be a set containing pairs of the form $(\Ical, A)$,
where $\Ical$ is a fair division instance and $A$ is an allocation for $\Ical$.
For any two fairness notions $F_1$ and $F_2$, let $\phi(F_1, F_2)$ be the proposition
``\,$\forall (\Ical, A) \in \Omega$, for every agent $i$ in $\Ical$,
$A$ is $F_2$-fair to $i$ whenever $A$ is $F_1$-fair to $i$". Then
$\phi(F_1, F_2) \implies \phi(\textrm{epistemic-}F_1, \textrm{epistemic-}F_2)
\textrm{ and } \phi(\textrm{min-}F_1\textrm{-share}, \textrm{min-}F_2\textrm{-share})$.
\end{lemma}
\begin{proof}
Suppose $\phi(F_1, F_2)$.
Pick any $(\Ical, A) \in \Omega$.
Let $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, w)$.
Pick any $i \in [n]$.

Suppose $A$ is epistemic-$F_1$-fair to $i$.
Let $B$ be $i$'s epistemic-$F_1$-certificate for $A$.
Then $B$ is $F_1$-fair to $i$ and $A_i = B_i$.
By $\phi(F_1, F_2)$, $B$ is also $F_2$-fair to $i$.
Hence, $B$ is $i$'s epistemic-$F_2$-certificate for $A$.
Therefore, $\phi(\textrm{epistemic-}F_1, \textrm{epistemic-}F_2)$ holds.

Suppose $A$ is min-$F_1$-share-fair to $i$.
Let $B$ be $i$'s min-$F_1$-share-certificate for $A$.
Then $B$ is $F_1$-fair to $i$ and $v_i(A_i) \ge v_i(B_i)$.
By $\phi(F_1, F_2)$, $B$ is also $F_2$-fair to $i$.
Hence, $B$ is $i$'s min-$F_2$-share-certificate for $A$.
Therefore, $\phi(\textrm{min-}F_1\textrm{-share}, \textrm{min-}F_2\textrm{-share})$ holds.
\end{proof}

\subsection{Among EF, EFX, EF1}
\label{sec:impls-extra:among-ef-efx-ef1}

Here we look at implications among EF, EFX, EF1, and their epistemic variants.

\begin{remark}[EF $\fimplies$ EFX+EF1]
\label{thm:impl:ef-to-efx+ef1}
If an allocation is EF-fair to agent $i$, then it is also EFX-fair to $i$ and EF1-fair to $i$.
\end{remark}

Because of how we define EFX (\cref{defn:efx}),
it's not always true that EFX implies EF1.
However, it's true for many common settings, as the following lemma shows.

\begin{lemma}[EFX $\fimplies$ EF1]
\label{thm:impl:efx-to-ef1}
For the fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
let $A$ be an allocation where agent $i$ is EFX-satisfied.
Then agent $i$ is EF1-satisfied in these scenarios:
\begin{tightenum}
\item $v_i$ is additive.
\item $v_i$ is doubly strictly monotone, i.e., $[m] = G \cup C$, $v_i(g \mid \cdot) > 0$
    for every $g \in G$, and $v_i(c \mid \cdot) < 0$ for every $c \in C$.
\item Agents have equal entitlements, $v_i$ is submodular, and all items are goods for agent $i$.
\item $v_i$ is submodular and all items are chores for agent $i$.
\end{tightenum}
\end{lemma}
\begin{proof}
Suppose $i$ is EFX-satisfied but not EF1-satisfied.
Suppose $i$ EF1-envies $j$.

Since $i$ EF1-envies $j$, we get that for all $t \in A_j$, we have
\[ \frac{v_i(A_i)}{w_i} < \frac{v_i(A_j \setminus \{t\})}{w_j}. \]
Since $i$ is EFX-satisfied, we get that
for all $t \in A_j$ such that $v_i(t \mid A_i) > 0$, we have
\[ \frac{v_i(A_i)}{w_i} \ge \frac{v_i(A_j \setminus \{t\})}{w_j}. \]
Hence, for all $t \in A_j$, we get $v_i(t \mid A_i) \le 0$.

Since $i$ EF1-envies $j$, we get that for all $t \in A_i$, we have
\[ \frac{v_i(A_i \setminus \{t\})}{w_i} < \frac{v_i(A_j)}{w_j}. \]
Since $i$ is EFX-satisfied, we get that
for all $t \in A_i$ such that $v_i(t \mid A_i \setminus \{t\}) < 0$, we have
\[ \frac{v_i(A_i \setminus \{t\})}{w_i} \ge \frac{v_i(A_j)}{w_j}. \]
Hence, for all $t \in A_i$, we get $v_i(t \mid A_i \setminus \{t\}) \ge 0$.

If $v_i$ is additive, we get $v_i(A_i) \ge 0 \ge v_i(A_j)$, which is a contradiction.

If $v_i$ is doubly-monotone and $v_i(g \mid S) > 0$ for every good $g$
and $v_i(c \mid S) < 0$ for every chore $c$, then
all items in $A_j$ are chores and all items in $A_i$ are goods.
Hence, $v_i(A_i) \ge 0 \ge v_i(A_j)$, which is a contradiction.

Suppose all agents have equal entitlements, all items are goods for $i$, and $v_i$ is submodular.
Let $A_j \defeq \{g_1, \ldots, g_k\}$. Then
\[ v_i(A_j \mid A_i) = \sum_{t=1}^k v_i(g_t \mid A_i \cup \{g_1, \ldots, g_{t-1}\})
\le \sum_{t=1}^k v_i(g_t \mid A_i) \le 0. \]
Hence, $v_i(A_j) \le v_i(A_i \cup A_j) = v_i(A_i) + v_i(A_j \mid A_i) \le v_i(A_i)$.
This is a contradiction.

Suppose all items are chores for $i$ and $v_i$ is submodular.
Let $A_i = \{c_1, \ldots, c_k\}$. Then
\[ v_i(A_i) = \sum_{t=1}^k v_i(c_t \mid \{c_1, \ldots, c_{t-1}\})
\ge \sum_{t=1}^k v_i(c_t \mid A_i \setminus \{c_t\}) \ge 0. \]
Hence, $v_i(A_i) \ge 0 \ge v_i(A_j)$, which is a contradiction.

A contradiction implies that it's impossible for agent $i$ to be
EFX-satisfied but not EF1-satisfied.
\end{proof}

\begin{lemma}[MXS $\fimplies$ EF1 for $n=2$]
\label{thm:impl:mxs-to-ef1-n2}
Let $([2], [m], (v_1, v_2), w)$ be a fair division instance with indivisible items.
If $v_1$ is additive and agent 1 is MXS-satisfied by allocation $A$,
then agent 1 is also EF1-satisfied by $A$.
\end{lemma}
\begin{proof}
Suppose $A$ is MXS-fair to agent 1 but not EF1-fair to her.
Then agent 1 envies agent 2 in $A$, so $v_1(A_1) < v_1(A_2)$.
Let $B$ be agent 1's MXS-certificate for $A$. Then $v_1(B_1) \le v_1(A_1)$.
Moreover, $v_1(A_2) = v_1([m]) - v_1(A_1) \le v_1([m]) - v_1(B_1) = v_1(B_2)$.
Hence, we get $v_1(B_1) \le v_1(A_1) < v_1(A_2) \le v_1(B_2)$.

Let $G \defeq \{g \in [m]: v_1(g) > 0\}$ and $C \defeq \{c \in [m]: v_1(c) < 0\}$.
Let $\max(\emptyset) \defeq -\infty$ and $\min(\emptyset) \defeq \infty$.

Since agent 1 is EFX-satisfied by $B$ and not EF1-satisfied by $A$,
for every $\ghat \in A_2$, we get
\begin{align*}
& \frac{v_1(A_2) - v_1(\ghat)}{w_2} > \frac{v_1(A_1)}{w_1}
\ge \frac{v_1(B_1)}{w_1}
\\ &\ge \frac{1}{w_2}\left(v_1(B_2) - \min_{g \in B_2 \cap G} v_1(g)\right)
\\ &\ge \frac{1}{w_2}\left(v_1(A_2) - \min_{g \in B_2 \cap G} v_1(g)\right).
\end{align*}
Hence, for every $\ghat \in A_2$, we get $v_1(\ghat) < \min_{g \in B_2 \cap G} v_1(g)$.
Hence, $A_2 \cap G$ and $B_2 \cap G$ are disjoint, so $A_2 \cap G \subseteq B_1 \cap G$.
Let $d_i \defeq -v_i$ for all $i$. Then for every $\chat \in A_1$, we get
\begin{align*}
& \frac{d_1(A_1) - d_1(\chat)}{w_1} > \frac{d_1(A_2)}{w_2}
\ge \frac{d_2(B_2)}{w_2}
\\ &\ge \frac{1}{w_1}\left(d_1(B_1) - \min_{c \in B_1 \cap C} d_1(c)\right)
\\ &\ge \frac{1}{w_1}\left(d_1(A_1) - \min_{c \in B_1 \cap C} d_1(c)\right).
\end{align*}
Hence, for every $\chat \in A_1$, we have $d_1(\chat) < \min_{c \in B_1 \cap C} d_1(c)$.
Hence, $A_1 \cap C$ and $B_1 \cap C$ are disjoint, so $B_1 \cap C \subseteq A_2 \cap C$.
Hence,
\begin{align*}
v_1(A_2) &= v_1(A_2 \cap G) - d_1(A_2 \cap C)
\\ &\le v_1(B_1 \cap G) - d_1(B_1 \cap C) = v_1(B_1),
\end{align*}
which is a contradiction.
Hence, it's not possible for $A$ to be MXS-fair to agent 1 but not EF1-fair to her.
\end{proof}

\subsection{Among PROP-Based Notions}
\label{sec:impls-extra:among-prop-based}

\begin{lemma}[PROPx $\fimplies$ PROPm]
\label{thm:impl:propx-to-propm}
In a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if an allocation is PROPx-fair to agent $i$, then it is also PROPm-fair to agent $i$.
\end{lemma}
\begin{proof}
Assume (for the sake of contradiction) that there is an allocation $A$ where
agent $i$ is PROPx-satisfied but not PROPm-satisfied.
%
Since $i$ is not PROPm-satisfied, we get $v_i(A_i) \le w_iv_i([m])$.
Since $i$ is PROPx-satisfied, we get

\begin{itemize}
\item $v_i(A_i \setminus S) > w_iv_i([m])$ for all $S \subseteq A_i$ such that
    $v_i(S \mid A_i \setminus S) < 0$.
\item $v_i(A_i \cup S) > w_iv_i([m])$ for all $S \subseteq [m] \setminus A_i$
    such that $v_i(S \mid A_i) > 0$.
\end{itemize}

Since $i$ is not PROPm-satisfied, we get that $T \neq \emptyset$ and $v_i(A_i) + \max(T) \le w_iv_i([m])$.
Let $\max(T) = \tau_{\jhat} = v_i(\Shat \mid A_i) > 0$.
Then $v_i(A_i \cup \Shat) \le w_iv_i([m])$, which contradicts the fact that
$i$ is PROPx-satisfied by $A$.
Hence, if $i$ is PROPx-satisfied by $A$, then she is also PROPm-satisfied by $A$.
\end{proof}

\begin{lemma}
\label{thm:submod-marginal-is-submod}
For any $X \subseteq \Omega$ and any submodular function $f: 2^{\Omega} \to \mathbb{R}$,
$f(\cdot \mid X)$ is submodular.
\end{lemma}
\begin{proof}
Let $P, Q \subseteq \Omega \setminus X$. Let $g(Y) \defeq f(Y \mid X)$. Then
\begin{align*}
& g(P) + g(Q)
\\ &= f(P \cup X) + f(Q \cup X) - 2f(X)
\\ &\ge f((P \cup X) \cup (Q \cup X)) + f((P \cup X) \cap (Q \cap X)) - 2f(X)
    \tag{by $f$'s submodularity}
\\ &= f((P \cup Q) \cup X) + f((P \cap Q) \cup X) - 2f(X)
    \tag{by De Morgan's law}
\\ &= g(P \cup Q) + g(P \cap Q).
\end{align*}
Hence, $g$ is submodular.
\end{proof}

\begin{lemma}[PROPm $\fimplies$ PROP1]
\label{thm:impl:propm-to-prop1}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if an allocation $A$ is PROPm-fair to agent $i$, then it is also PROP1-fair to agent $i$
if at least one of these conditions holds:
\begin{tightenum}
\item $v_i$ is submodular.
\item $v_i$ is doubly strictly monotone, i.e., $[m] = G \cup C$, $v_i(g \mid \cdot) > 0$
    for every $g \in G$, and $v_i(c \mid \cdot) < 0$ for every $c \in C$.
\end{tightenum}
\end{lemma}
\begin{proof}
Suppose allocation $A$ is PROPm-fair to $i$ but not PROP1-fair to $i$. Then
\begin{tightenum}
\item\label{item:impl:propm-to-prop1:unprop}$v_i(A_i) < w_iv_i([m])$ (by PROP1 unfairness).
\item\label{item:impl:propm-to-prop1:unprop1-chores}$v_i(A_i \setminus \{c\}) \le w_iv_i([m])$
    for all $c \in A_i$ (by PROP1 unfairness).
\item\label{item:impl:propm-to-prop1:unprop1-goods}$v_i(A_i \cup \{g\}) \le w_iv_i([m])$
    for all $g \in [m] \setminus A_i$ (by PROP1 unfairness).
\item\label{item:impl:propm-to-prop1:propm-chores}$v_i(A_i \setminus \{c\}) > w_iv_i([m])$
    for all $c \in A_i$ such that $v_i(c \mid A_i \setminus \{c\}) < 0$ (by PROPm fairness).
\item\label{item:impl:propm-to-prop1:propm-goods}$T = \emptyset$ or $v_i(A_i) + \max(T) > w_iv_i([m])$
    (by PROPm fairness; c.f.~\cref{defn:propm} for the definition of $T$).
\end{tightenum}

By \ref{item:impl:propm-to-prop1:unprop1-chores} and \ref{item:impl:propm-to-prop1:propm-chores},
we get $v_i(c \mid A_i \setminus \{c\}) \ge 0$ for all $c \in A_i$.
We now show that $v_i(A_i) \ge 0$.
If $v_i$ is doubly strictly monotone, then $A_i$ only contains goods, so $v_i(A_i) \ge 0$.
Now suppose $v_i$ is submodular. Let $A_i = \{g_1, \ldots, g_k\}$. Then
\[ v_i(A_i) = \sum_{j=1}^k v_i(g_j \mid \{g_1, \ldots, g_{j-1}\})
    \ge v_i(g_j \mid A_i \setminus \{g_j\}) \ge 0. \]

Suppose $T = \emptyset$. Then $\tau_j = 0$ for all $j \in [n] \setminus \{i\}$.
Hence, for all $j \in [n] \setminus \{i\}$, we have $v_i(A_j \mid A_i) \le 0$.
If $v_i$ is doubly strictly monotone, then $[m] \setminus A_i$ contains only chores,
so $v_i([m] \setminus A_i \mid A_i) \le 0$. If $v_i$ is submodular, then
$v_i(\cdot \mid A_i)$ is subadditive by \cref{thm:submod-marginal-is-submod}, so
\[ v_i([m] \setminus A_i \mid A_i)
    \le \sum_{j \in [n] \setminus \{i\}} v_i(A_j \mid A_i) \le 0. \]
Hence, $v_i(A_i) \ge v_i([m])$.
If $v_i([m]) \le 0$, then $v_i(A_i) \ge 0 \ge w_iv_i([m])$,
and if $v_i([m]) \ge 0$, then $v_i(A_i) \ge v_i([m]) \ge w_iv_i([m])$.
This contradicts \ref{item:impl:propm-to-prop1:unprop}, so $T \neq \emptyset$.

Let $\max(T) = \tau_{\jhat} > 0$. By definition of $\tau_{\jhat}$, we get
\begin{align*}
0 < \tau_{\jhat} &= \min(\{v_i(S \mid A_i) \mid S \subseteq A_{\jhat} \textrm{ and } v_i(S \mid A_i) > 0\})
\\ &\le \min(\{v_i(g \mid A_i) \mid g \in A_{\jhat} \textrm{ and } v_i(g \mid A_i) > 0\}).
\end{align*}

\textbf{Case 1}: $v_i(g \mid A_i) \le 0$ for all $g \in A_{\jhat}$.
\\ If $v_i$ is doubly strictly monotone, then $A_{\jhat}$ only has chores,
and so $v_i(S \mid A_i) \le 0$ for all $S \subseteq A_{\jhat}$.
This contradicts the fact that $\tau_{\jhat} > 0$.
Now let $v_i$ be submodular.
Since $v_i(\cdot \mid A_i)$ is subadditive by \cref{thm:submod-marginal-is-submod},
for any $S \subseteq A_{\jhat}$, we get
$v_i(S \mid A_i) \le \sum_{c \in S} v_i(c \mid A_i) \le 0$.
This contradicts the fact that $\tau_{\jhat} > 0$.

\textbf{Case 2}: $v_i(\ghat \mid A_i) > 0$ for some $\ghat \in A_{\jhat}$.
\\ Then $\max(T) = \tau_{\jhat} \le v_i(\ghat \mid A_i)$.
By \ref{item:impl:propm-to-prop1:propm-goods}, we get
$w_iv_i([m]) < v_i(A_i) + \max(T) \le v_i(A_i \cup \{\ghat\})$.
But this contradicts \ref{item:impl:propm-to-prop1:unprop1-goods}.

Hence, it cannot happen that $i$ is PROPm-satisfied by $A$ but not PROP1-satisfied.
\end{proof}

\subsection{EF vs PROP}
\label{sec:impls-extra:ef-vs-prop}

Here we look at implications between EF (and its epistemic variants) and PROP (and its epistemic variants).

\begin{lemma}[MEFS $\fimplies$ PROP, \cite{bouveret2016characterizing}]
\label{thm:impl:mefs-to-prop}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is subadditive and an allocation $A$ is MEFS-fair to $i$, then $A$ is also PROP-fair to $i$.
\end{lemma}
\begin{proof}
Let $B$ be agent $i$'s MEFS-certificate for $A$.
Then for all $j \in [n]$, we have $v_i(B_i)/w_i \ge v_i(B_j)/w_j$.
Sum these inequalities over all $j \in [n]$, weighting each by $w_j$,
to get $v_i(B_i)/w_i \ge \sum_{j=1}^n v_i(B_j)$.
Since $v_i$ is subadditive, we get $v_i([m]) \le \sum_{j=1}^n v_i(B_j)$.
Hence,
\[ \frac{v_i(A_i)}{w_i} \ge \frac{v_i(B_i)}{w_i} \ge \sum_{j=1}^n v_i(B_j) \ge v_i([m]). \]
\end{proof}

\begin{lemma}[EF $\fimplies$ GPROP]
\label{thm:impl:ef-to-gprop}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is subadditive and agent $i$ is envy-free in $A$,
then $A$ is groupwise-PROP-fair to $i$.
\end{lemma}
\begin{proof}
Let $S$ be a subset of agents containing $i$.
Let $\Ahat$ be the allocation obtained by restricting $A$ to $S$ (c.f.~\cref{defn:restricting}).
Then $i$ is also envy-free in $\Ahat$.
$i$ is also MEFS-satisfied by $\Ahat$, since $\Ahat$ is its own MEFS-certificate for agent $i$.
By \cref{thm:impl:mefs-to-prop}, agent $i$ is PROP-satisfied by $\Ahat$.
Since this is true for all $S$ containing $i$,
we get that $A$ is groupwise-PROP-fair to agent $i$.
\end{proof}

\begin{lemma}[PROP $\fimplies$ EF for idval]
\label{thm:impl:prop-to-ef-superadd-id}
In a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ with identical superadditive valuations,
a PROP allocation is also an EF allocation.
\end{lemma}
\begin{proof}
Let $v$ be the common valuation function. Let $A$ be a PROP allocation.
Then for each agent $i$, we have $v(A_i) \ge w_iv([m])$.
Suppose $v(A_k) > w_kv([m])$ for some agent $k$.
Sum these inequalities to get $\sum_{i=1}^n v(A_i) > v([m])$.
This contradicts superadditivity of $v$, so $v(A_i) = w_iv([m])$ for each agent $i$.
Hence, $v(A_i)/w_i = v([m])$ for all $i$, so $A$ is EF.
\end{proof}

\begin{lemma}[PROP $\fimplies$ EF for $n=2$]
\label{thm:impl:prop-to-ef-n2}
In the fair division instance $([2], [m], (v_1, v_2), w)$, for some agent $i$,
if $v_i$ is superadditive and agent $i$ is PROP-satisfied by allocation $A$,
then she is also envy-free in $A$.
\end{lemma}
\begin{proof}
Assume $i=1$ \wLoG. Then
\begin{align*}
& \frac{v_1(A_1)}{w_1} \ge v_1([m]) \ge v_1(A_1) + v_1(A_2)
\\ &\implies v_1(A_2) \le v_1(A_1)\left(\frac{1}{w_1} - 1\right) = w_2 \frac{v_1(A_1)}{w_1}.
\end{align*}
Hence, agent 1 does not envy agent 2.
\end{proof}

\subsection{EFX, EF1 vs PROPx, PROPm, PROP1}
\label{sec:impls-extra:efx-ef1-vs-propx-propm-prop1}

\begin{lemma}[MXS $\fimplies$ PROP1, Theorem 3 of \cite{caragiannis2023new}]
\label{thm:impl:mxs-to-prop1}
In a fair division instance with equal entitlements,
if $v_i$ is additive for some agent $i$, $v_i(g) \ge 0$ for every item $g$,
and an allocation $A$ is MXS-fair to agent $i$, then $A$ is also PROP1-fair to agent $i$.
\end{lemma}

\begin{lemma}[EEF1 $\fimplies$ PROP1, Proposition 2 of \cite{aziz2021fair}]
\label{thm:impl:eef1-to-prop1}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if an allocation $X$ is epistemic-EF1-fair to agent $i$, then $X$ is also PROP1-fair to $i$
if one of these conditions hold:
\begin{tightenum}
\item $v_i$ is subadditive and the items are chores to agent $i$.
\item $v_i$ is additive and $w_i \le w_j$ for all $j \in [n] \setminus \{i\}$.
\item $v_i$ is additive and $n=2$.
\end{tightenum}
\end{lemma}
\begin{proof}
Suppose agent $i$ is epistemic-EF1-satisfied but not PROP1-satisfied by allocation $X$.
Let $A$ be agent $i$'s epistemic-EF1-certificate for $X$.
Then $A$ is EF1-fair to agent $i$.
If $A$ is PROP1-fair to $i$, then $X$ would also be PROP1-fair to agent $i$,
which is a contradiction. Hence, $A$ is not PROP1-fair to $i$.
Therefore, all of these hold:
\begin{tightenum}
\item $v_i(A_i) < w_iv_i([m])$.
\item $v_i(A_i \cup \{g\}) \le w_iv_i([m])$ for all $g \in [m] \setminus A_i$.
\item $v_i(A_i \setminus \{c\}) \le w_iv_i([m])$ for all $c \in A_i$.
\end{tightenum}

Since $v_i$ is subadditive, there exists $j \in [n] \setminus \{i\}$ such that $v_i(A_j) > w_jv_i([m])$
(otherwise $v_i([m]) \le \sum_{j=1}^n v_i(A_j) < \sum_{j=1}^n w_jv_j([m]) = v_i([m])$). Hence,
\[ \frac{v_i(A_i)}{w_i} < v_i([m]) < \frac{v_i(A_j)}{w_j}. \]
Hence, $i$ envies $j$. But $i$ is EF1-satisfied. Hence,
\\ $\exists c \in A_i$ such that
    $\displaystyle \frac{v_i(A_i \setminus \{c\})}{w_i} \ge \frac{v_i(A_j)}{w_j}$,
\\ or $\exists g \in A_j$ such that
    $\displaystyle \frac{v_i(A_i)}{w_i} \ge \frac{v_i(A_j \setminus \{g\})}{w_j}$.

\textbf{Case 1}: $\exists c \in A_i$ such that $v_i(A_i \setminus \{c\})/w_i \ge v_i(A_j)/w_j$.

Since $i$ is PROP1-unsatisfied and $v_i(A_j) > w_jv_i([m])$, we get
\[ \frac{v_i(A_j)}{w_j} \le \frac{v_i(A_i \setminus \{c\})}{w_i} \le v_i([m]) < \frac{v_i(A_j)}{w_j}, \]
which is a contradiction.
Hence, it's impossible for agent $i$ to be EF1-satisfied but not PROP1-satisfied by $A$ for this case.

\textbf{Case 2}: $\exists g \in A_j$ such that $v_i(A_i)/w_i \ge v_i(A_j \setminus \{g\})/w_j$.

First, we show that this case doesn't occur if all items in $A_j$ are chores.
Since $i$ envies $j$ but not EF1-envies $j$, we get
\begin{equation}
\label{eq:impl:eef1-to-prop1:gpos}
\frac{v_i(g \mid A_j \setminus \{g\})}{w_j}
= \frac{v_i(A_j) - v_i(A_j \setminus \{g\})}{w_j}
\ge \frac{v_i(A_j)}{w_j} - \frac{v_i(A_i)}{w_i} > 0.
\end{equation}
Hence, this case doesn't occur if all items in $A_j$ are chores.

Since $i$ is not PROP1-satisfied, we get
\begin{align*}
& \frac{v_i(A_i) + v_i(g \mid A_i)}{w_i} \le w_i([m]) < \frac{v_i(A_j)}{w_j}
\\ &\implies \frac{v_i(g \mid A_i)}{w_i} < \frac{v_i(A_j)}{w_j} - \frac{v_i(A_i)}{w_i}
    \le \frac{v_i(g \mid A_j \setminus \{g\})}{w_j}.
\end{align*}

Let $v_i$ be additive. Then we get
\[ \frac{v_i(g)}{w_i} < \frac{v_i(g)}{w_j} \implies w_j < w_i. \]
If $w_i \le w_j$ for all $j \in [n] \setminus \{i\}$, we get a contradiction.

Now suppose $v_i$ is additive and $n=2$.
Then the agents are $i$ and $j$. Note that $w_i + w_j = 1$.
Let $\ghat \in \argmax_{t \in A_j} v_i(t)$.
Since $i$ is not PROP1-satisfied, we get
\begin{align*}
& v_i(A_i \cup \{\ghat\}) \le w_iv_i([m]) = w_iv_i(A_i \cup \{\ghat\}) + w_iv_i(A_j \setminus \{\ghat\})
\\ &\implies \frac{v_i(A_i \cup \{\ghat\})}{w_i} \le \frac{v_i(A_j \setminus \{\ghat\})}{w_j}.
\end{align*}
Based on the assumption of Case 2, we get
\[ \frac{v_i(A_i)}{w_i} \ge \frac{v_i(A_j \setminus \{g\})}{w_j} \ge \frac{v_i(A_j \setminus \{\ghat\})}{w_j}. \]
Hence,
\[ v_i(A_i \cup \{\ghat\}) \le \frac{w_i}{w_j}v_i(A_j \setminus \{\ghat\}) \le v_i(A_i). \]
Therefore, $v_i(\ghat) \le 0$.
Since $\ghat$ is the most-valuable item in $A_j$ to $i$, we get that $v_i(g) \le 0$,
which contradicts \eqref{eq:impl:eef1-to-prop1:gpos}.
Hence, it's impossible for agent $i$ to be EF1-satisfied but not PROP1-satisfied by $A$ for this case.
\end{proof}

\begin{lemma}[EEFX $\fimplies$ PROPx, Lemma 2.1 of \cite{li2022almost}]
\label{thm:impl:eefx-to-propx}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ where
the items are chores to agent $i$ and $v_i$ is subadditive.
If an allocation $A$ is epistemic-EFX-fair to agent $i$,
then it is also PROPx-fair to agent $i$.
\end{lemma}
\begin{proof}
Suppose $A$ is epistemic-EFX-fair to agent $i$ but not PROPx-fair to $i$.
Let $B$ be agent $i$'s epistemic-EFX-certificate for $A$.
Then $B$ is also PROPx-unfair to $i$.

Since $i$ is EFX-satisfied with $B$, we get that for all $j \in [n] \setminus \{i\}$,
\[ \min_{S \in \Scal} \frac{v_i(B_i \setminus S)}{w_i} \ge \frac{v_i(B_j)}{w_j}, \]
where $\Scal \defeq \{S \subseteq B_i: v_i(S \mid B_i \setminus S) < 0\}$.
Add these inequalities for all $j$, weighting each by $w_j$, to get
\[ \min_{S \in \Scal} \frac{v_i(B_i \setminus \{c\})}{w_i} > \sum_{j=1}^n v_i(B_j) \ge v_i([m]), \]
which implies that $B$ is PROPx-fair, a contradiction.
Hence, there can't be an allocation $A$ that is epistemic-EFX-fair to $i$
but not PROPx-fair to $i$.
\end{proof}

\begin{lemma}[EFX $\fimplies$ PROPm]
\label{thm:impl:efx-to-propm}
Let $([n], [m], (v_i)_{i=1}^n, w)$ be a fair division instance
where $v_i$ is additive for some agent $i$.
If an allocation $A$ is EFX-fair to agent $i$, then it is also PROPm-fair to agent $i$
if at least one of these conditions holds:
\begin{tightenum}
\item $w_i \le w_j$ for all $j \in [n] \setminus \{i\}$, and $v_i(A_i) \ge 0$.
\item $n=2$.
\end{tightenum}
\end{lemma}
\begin{proof}
Suppose agent $i$ is EFX-satisfied but not PROPm-satisfied by allocation $A$.
Then for some agent $\jhat \in [n] \setminus \{i\}$, we have
\[ \frac{v_i(A_i)}{w_i} < v_i([m]) < \frac{v_i(A_{\jhat})}{w_{\jhat}}. \]

Since $i$ doesn't EFX-envy $\jhat$, for all $S \subseteq A_i$ such that
$v_i(S \mid A_i \setminus S) < 0$, we get
\[ \frac{v_i(A_i \setminus S)}{w_i} \ge \frac{v_i(A_{\jhat})}{w_{\jhat}} > v_i([m]). \]
Hence, condition \ref{item:propm:chores} (chores condition) of PROPm is satisfied.
Since condition \ref{item:propm:goods} (goods condition) of PROPm is not satisfied, we get that
$T \neq \emptyset$ and $v_i(A_i) + \max(T) \le w_iv_i([m])$.
%
For all $j \in T$, we get
\begin{align}
\frac{v_i(A_i)}{w_i} &\ge \frac{\max(\{v_i(A_j \setminus S): S \subseteq A_j \textrm{ and } v_i(S \mid A_i) > 0\})}{w_j}
    \tag{$i$ doesn't EFX-envy $j$}
\\ &= \frac{v_i(A_j)}{w_j} - \frac{\min(\{v_i(S): S \subseteq A_j \textrm{ and } v_i(S) > 0\})}{w_j}
    \notag
\\ &= \frac{v_i(A_j)}{w_j} - \frac{\tau_j}{w_j} \ge \frac{v_i(A_j)}{w_j} - \frac{\max(T)}{w_j}.
    \label{eqn:impl:efx-to-propm:1}
\end{align}

\textbf{Special case 1}: $w_i \le w_j$ for all $j \in [n] \setminus \{i\}$, and $v_i(A_i) \ge 0$.

Let $J \defeq \{j \in [n] \setminus \{i\}: \tau_j > 0\}$.
For all $j \in J$, using \eqref{eqn:impl:efx-to-propm:1}, we get
\[ \frac{v_i(A_i) + \max(T)}{w_i}
\ge \frac{v_i(A_j)}{w_j} - \frac{\max(T)}{w_j} + \frac{\max(T)}{w_i}
\ge \frac{v_i(A_j)}{w_j}. \]

For all $j \in [n] \setminus (J \cup \{i\})$, we have $\tau_j = 0$, so $v_i(A_j) \le 0$. Hence,
\[ \frac{v_i(A_i)}{w_i} \ge 0 \ge \frac{v_i(A_j)}{w_j}. \]
Therefore,
\[ v([m]) = \sum_{j=1}^n w_j\left(\frac{v_i(A_j)}{w_j}\right)
    < \sum_{j=1}^n w_j\left(\frac{v_i(A_i) + \max(T)}{w_i}\right)
    = \frac{v_i(A_i) + \max(T)}{w_i}. \]
Hence, condition 1 of PROPm is satisfied, which is a contradiction.
Hence, it's impossible for $i$ to be EFX-satisfied by $A$ but not PROPm-satisfied by $A$.

\textbf{Special case 2}: $n=2$

Let the two agents be $i$ and $j$. Since $T \neq \emptyset$, we have $\max(T) = \tau_j > 0$.
Since $i$ is not PROPm-satisfied by $A$, we get
\begin{align}
& v_i(A_i) + \tau_j \le w_iv_i([m]) = w_iv_i(A_i) + w_iv_i(A_j)
\\ &\implies w_jv_i(A_i) + \tau_j \le w_iv_i(A_j)
\\ &\implies \frac{v_i(A_i)}{w_i} \le \frac{v_i(A_j)}{w_j} - \frac{\tau_j}{w_iw_j}
    \le \frac{v_i(A_j)}{w_j} - \frac{\tau_j}{w_j}.
\end{align}
Combining this with equation \eqref{eqn:impl:efx-to-propm:1} gives us $\tau_j = 0$, which is a contradiction.
Hence, it's impossible for $i$ to be EFX-satisfied by $A$ but not PROPm-satisfied by $A$.
\end{proof}

\subsection{MMS vs EFX}
\label{sec:impls-extra:mms-vs-efx}

We prove some results connecting MMS, EFX, and related notions,
using techniques from \cite{plaut2020almost,caragiannis2023new}.

\begin{lemma}
\label{thm:mms-and-all-envy}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
suppose an allocation $A$ is WMMS-fair to agent $i$
and $i$ envies every other agent.
Then $A$ is also EFX-fair to agent $i$ if at least one of these conditions hold:
\begin{tightenum}
\item The items are goods to agent $i$ (i.e., $v_i(g \mid R) \ge 0$
    for all $R \subseteq [m]$ and $g \in [m] \setminus R$).
\item $v_i$ is additive and $w_i \le w_j$ for all $j \in [n] \setminus \{i\}$.
\end{tightenum}
\end{lemma}
\begin{proof}
Suppose agent $i$ is not EFX-satisfied by $A$, i.e., she EFX-envies some agent $j$.
Then $\exists S \subseteq A_i \cup A_j$ where either

\begin{tightenum}
\item $S \subseteq A_j$, $v_i(S \mid A_i) > 0$, and
    $\displaystyle \frac{v_i(A_i)}{w_i} < \frac{v_i(A_j \setminus S)}{w_j}$.
\item $S \subseteq A_i$, $v_i(S \mid A_i \setminus S) < 0$, and
    $\displaystyle \frac{v_i(A_i \setminus S)}{w_i} < \frac{v_i(A_j)}{w_j}$.
\end{tightenum}

If all items are goods, case 2 doesn't occur.

\textbf{Case 1}: $S \subseteq A_j$

Let $B$ be the allocation obtained by transferring $S$ from $A_j$ to $A_i$.
Formally, let $B_i \defeq A_i \cup S$, $B_j \defeq A_j \setminus S$,
and $B_k \defeq A_k$ for all $k \in [n] \setminus \{i, j\}$. Then
\[ \frac{v_i(B_i)}{w_i} = \frac{v_i(A_i) + v_i(S \mid A_i)}{w_i} > \frac{v_i(A_i)}{w_i}, \]
\[ \frac{v_i(B_j)}{w_j} = \frac{v_i(A_j \setminus S)}{w_j} > \frac{v_i(A_i)}{w_i}, \]
and for any $k \in [n] \setminus \{i, j\}$, we get
\[ \frac{v_i(B_k)}{w_k} = \frac{v_i(A_k)}{w_k} > \frac{v_i(A_i)}{w_i}. \]
Hence,
\[ \min_{k=1}^n \frac{v_i(B_k)}{w_k} > \frac{v_i(A_i)}{w_i} \ge \frac{\WMMS_i}{w_i}, \]
which is a contradiction.

\textbf{Case 2}: $S \subseteq A_i$

Let $v_i$ be additive and $w_i \le w_j$.
Let $B$ be the allocation obtained by transferring $S$ from $A_i$ to $A_j$. Formally,
let $B_i \defeq A_i \setminus S$, $B_j \defeq A_j \cup S$,
and $B_k \defeq A_k$ for all $k \in [n] \setminus \{i, j\}$. Then
\[ \frac{v_i(B_i)}{w_i} = \frac{v_i(A_i) - v_i(S)}{w_i} > \frac{v_i(A_i)}{w_i}, \]
\[ \frac{v_i(B_j)}{w_j} = \frac{v_i(A_j) + v_i(S)}{w_j} > \frac{v_i(A_i \setminus S)}{w_i} - \frac{(-v_i(S))}{w_j} \ge \frac{v_i(A_i)}{w_i}, \]
and for any $k \in [n] \setminus \{i, j\}$, we get
\[ \frac{v_i(B_k)}{w_k} = \frac{v_i(A_k)}{w_k} > \frac{v_i(A_i)}{w_i}. \]
Hence,
\[ \min_{k=1}^n \frac{v_i(B_k)}{w_k} > \frac{v_i(A_i)}{w_i} \ge \frac{\WMMS_i}{w_i}, \]
which is a contradiction.
\end{proof}

\begin{lemma}[MMS $\fimplies$ EFX for $n=2$]
\label{thm:impl:mms-to-efx-n2}
For a fair division instance $([2], [m], (v_i)_{i=1}^2, w)$,
suppose an allocation $A$ is WMMS-fair to agent 1.
Then $A$ is also EFX-fair to agent 1 if at least one of these conditions hold:
\begin{tightenum}
\item The items are goods to agent 1.
\item $v_1$ is additive and $w_1 \le w_2$.
\end{tightenum}
\end{lemma}
\begin{proof}
If agent 1 doesn't envy agent 2, she is EFX-satisfied.
Otherwise, she is EFX-satisfied because of \cref{thm:mms-and-all-envy}.
\end{proof}

Theorem 2 in \cite{caragiannis2023new} states that an MMS allocation is also an EEFX allocation
(for additive valuations over goods and equal entitlements).
The proof can be easily adapted to non-additive valuations over goods and unequal entitlements.
For the sake of completeness, we give a proof below.

\begin{lemma}[MMS $\fimplies$ EEFX, \cite{caragiannis2023new}]
\label{thm:impl:mms-to-eefx}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if all items are goods to agent $i$ and allocation $A$ is WMMS-fair to agent $i$,
then $A$ is also epistemic-EFX-fair to $i$.
\end{lemma}
\begin{proof}
In any allocation $X$, let
$E_X$ be the set of agents envied by $i$,
$S_X$ be the set of agents EFX-envied by $i$,
$W_X$ be the total number of items among the agents in $S_X$.

$E_X \defeq \{t \in [n] \setminus \{i\}: i \textrm{ envies } t \textrm{ in } X\}$,
$S_X \defeq \{t \in [n] \setminus \{i\}: i \textrm{ EFX-envies } t \textrm{ in } X\}$,
$W_X \defeq \sum_{t \in S_X} |X_t|$, and $\phi(X) \defeq (-|E_X|, W_X)$.

First, we show that for any allocation $X$ where $|E_X| \le n-2$ and $S_X \neq \emptyset$,
there exists a \emph{better} allocation $Y$, i.e, $Y_i = X_i$ and $\phi(Y) < \phi(X)$
(tuples are compared lexicographically).

Let $j \in S_X$ and $k \in [n] \setminus \{i\} \setminus E_X$.
Since $i$ EFX-envies $j$, $\exists S \subseteq X_j$ such that $v_i(S \mid X_i) > 0$ and
\[ \frac{v_1(X_1)}{w_1} < \frac{v_1(X_j \setminus S)}{w_j}. \]
Let $Y_k \defeq X_k \cup S$, $Y_j \defeq X_j \setminus S$,
and $Y_t \defeq X_t$ for all $t \in [n] \setminus \{j, k\}$.

Then $i$ envies $j$ in $Y$. Hence, $E_X \subseteq E_Y$.
If $k \in E_Y$, then $|E_Y| > |E_X|$, so $\phi(Y) < \phi(X)$.
If $k \not\in E_Y$, then $W_Y < W_X$, so $\phi(Y) < \phi(X)$.
Hence, $Y$ is better than $X$.

Set $X = A$. As long as $|E_X| < n-1$ and $S_X \neq \emptyset$,
keep modifying $X$ as per Lemma 1.
This process will eventually end, since $\phi(X)$ keeps reducing,
and there are a finite number of different values $\phi(X)$ can take.
Let $B$ be the final allocation thus obtained.
Then $B_i = A_i$, and $|E_B| = n-1$ or $S_B = \emptyset$.

By \cref{thm:mms-and-all-envy},
$|E_B| = n-1$ implies $S_B = \emptyset$.
Hence, $B$ is agent $i$'s EEFX-certificate for $A$.
\end{proof}

\begin{definition}
\label{defn:leximin}
For any set $S \subseteq M$, let $\Pi_n(S)$ denote the set of all $n$-partitions of $S$.
For any sequence $X = (x_i)_{i=1}^n$ of real numbers, define $\sorted(X)$ to be a permutation of $X$
where entries occur in non-decreasing order.
For any two sequences $X = (x_i)_{i=1}^n$ and $Y = (y_i)_{i=1}^n$, we say that $X \le Y$ if
$\exists i \in [n]$ such that $x_i \le y_i$ and $x_j = y_j$ for all $j \in [i-1]$.
(Note that this relation $\le$ over sequences is a total ordering.)

We say that $P \in \Pi_n([m])$ is a leximin $n$-partition of a function $f: 2^{[m]} \to \mathbb{R}$ if
\[ P \in \argmax_{X \in \Pi_n([m])} \sorted\left((f(X_j))_{j=1}^n\right). \]
\end{definition}

It is easy to see that if $P$ is a leximin $n$-partition of $f: 2^{[m]} \to \mathbb{R}$,
then $\min_{j=1}^n f(P_j) = \MMS_f^n([m])$.

\begin{lemma}[MMS $\fimplies$ MXS]
\label{thm:impl:mms-to-mxs}
Let $\Ical \defeq ([n], [m], (v_i)_{i=1}^n, \eqEnt)$ be a fair division instance.
Let allocation $A$ be MMS-fair to agent $i$.
Then $A$ is also MXS-fair to $i$ if at least one of these conditions hold:
\begin{tightenum}
\item All items are goods to agent $i$.
\item $v_i$ is additive.
\end{tightenum}
\end{lemma}
\begin{proof}
We will show that agent $i$'s leximin $n$-partition is her MXS-certificate for $A$,
which would prove that $A$ is MXS-fair to agent $i$.

Without loss of generality, assume $i = 1$.
Let $P$ be a leximin $n$-partition of $v_1$ (c.f.~\cref{defn:leximin})
such that $v_1(P_1) \le v_1(P_2) \le \ldots \le v_1(P_n)$.
Then $v_1(P_1) = \MMS_{v_1}^n([m]) \le v_1(A_1)$.

For any agent $j \ge 2$, the allocation $(P_1, P_j)$ is leximin for
the instance $\Icalhat \defeq (\{i, j\}, P_1 \cup P_j, (v_1, v_j), (1/2, 1/2))$.
Hence, agent 1 is MMS-satisfied by $(P_1, P_j)$ in $\Icalhat$.
Since either all items are goods to agent 1 or $v_1$ is additive,
by \cref{thm:impl:mms-to-efx-n2}, agent 1 is EFX-satisfied by $(P_1, P_j)$ in $\Icalhat$.

On considering all values of $j$, we get that agent 1 is EFX-satisfied by $P$ in $\Ical$.
Hence, $P$ is agent 1's MXS-certificate for $A$.
\end{proof}

\subsection{Among PROP, APS, MMS}

We prove implications among share-based notions like PROP, APS, and MMS.

\begin{lemma}[PROP $\fimplies$ APS, Proposition 4 of \cite{babaioff2023fair}]
\label{thm:impl:prop-to-aps}
For any fair division instance
\\ $([n], [m], (v_i)_{i=1}^n, w)$,
$\APS_i \le w_iv_i([m])$ for agent $i$ if $v_i$ is additive.
\end{lemma}
\begin{proof}
Set the price $p(g)$ of each item $g$ to $v_i(g)$. Then
\[ \APS_i \le \max_{S \subseteq [m]: p(S) \le w_ip([m])} v_i(S)
= \max_{S \subseteq [m]: v_i(S) \le w_iv_i([m])} v_i(S) \le w_iv_i([m]).
\qedhere \]
\end{proof}

\begin{lemma}[PROP $\fimplies$ WMMS]
\label{thm:impl:prop-to-wmms}
For any fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is superadditive, then $\WMMS_i \le w_iv_i([m])$.
\end{lemma}
\begin{proof}
Let $P$ be agent $i$'s WMMS partition. Then
\[ v_i([m]) \ge \sum_{j=1}^n v_i(P_j) = \sum_{j=1}^n w_j\left(\frac{v_i(P_j)}{w_j}\right)
    \ge \sum_{j=1}^n w_j\frac{\WMMS_i}{w_i} = \frac{\WMMS_i}{w_i}. \qedhere \]
\end{proof}

\begin{lemma}
\label{thm:prefix-sum-bound}
Let $a_1 \le a_2 \le \ldots \le a_n$ be $n$ real numbers.
Let $s_k \defeq \sum_{i=1}^k a_i$ for any $0 \le k \le n$.
Then $s_k \le (k/n)s_n$.
\end{lemma}
\begin{proof}
$\displaystyle s_n = s_k + \sum_{i=k+1}^n a_i \ge s_k + (n-k)a_k \ge s_k + (n-k)\frac{s_k}{k}
= \frac{n}{k}s_k$.
\end{proof}

\begin{lemma}[PROP $\fimplies$ pessShare]
\label{thm:impl:prop-to-pessShare}
For any fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
if $v_i$ is superadditive, then $\pessShare_i \le w_iv_i([m])$.
\end{lemma}
\begin{proof}
Let $P$ be agent $i$'s $\ell$-out-of-$d$-partition.
Assume \wLoG{} that $v_i(P_1) \le v_i(P_2) \le \ldots \le v_i(P_d)$.
Then by \cref{thm:prefix-sum-bound} and superadditivity of $v_i$, we get
\[ \loodM_i = \sum_{j=1}^{\ell} v_i(P_j)
    \le \frac{\ell}{d}\sum_{j=1}^d v_i(P_j) \le \frac{\ell}{d}v_i([m]). \]
Hence,
\[ \pessShare_i \defeq \sup_{1 \le \ell \le d: \ell/d \le w_i} \loodM_i
    \le \sup_{1 \le \ell \le d: \ell/d \le w_i} (\ell/d)v_i([m]) \le w_iv_i([m]).
    \qedhere \]
\end{proof}

\begin{lemma}[APS $\fimplies$ pessShare]
\label{thm:impl:aps-to-pess}
For any fair division instance $([n], [m], (v_i)_{i=1}^n, w)$,
$\APS_i \ge \pessShare_i$ for every agent $i$.
\end{lemma}
\begin{proof}
Proposition 2 in \cite{babaioff2023fair} proves this for goods,
but their proof works for mixed manna too.
\end{proof}

\begin{lemma}
\label{thm:wmms-vs-knapsack}
For a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ and any agent $i$, define
\[ \beta_i \defeq \max_{j=1}^n \max_{\substack{S \subseteq [m]:\\v_i(S) \le w_jv_i([m])}} \frac{v_i(S)}{w_j}. \]
If $v_i$ is superadditive, then $\WMMS_i \le w_i\beta_i$.
If $v_i$ is additive and $n = 2$, then $\WMMS_i = w_i\beta_i$.
\end{lemma}
\begin{proof}
For any $j \in [n]$, define
\[ S_j \defeq \argmax_{\substack{S \subseteq [m]:\\v_i(S) \le w_jv_i([m])}} \frac{v_i(S)}{w_j}. \]
Then $\beta_i \defeq \max_{j=1}^n v_i(S_j)/w_j$.

Let $\Pi_n([m])$ be the set of all $n$-partitions of $[m]$. Let
\begin{align*}
P &\defeq \argmax_{P \in \Pi_n([m])} \min_{j=1}^n \frac{v_i(P_j)}{w_j},
& k &\defeq \argmin_{j=1}^n \frac{v_i(P_j)}{w_j}.
\end{align*}
Then $\WMMS_i/w_i \defeq v_i(P_k)/w_k$.

By \cref{thm:impl:prop-to-wmms}, we get $v_i(P_k)/w_k \le v_i([m])$. Hence,
\[ \frac{\WMMS_i}{w_i} = \frac{v_i(P_k)}{w_k} \le \frac{v_i(S_k)}{w_k}
    \le \max_{j=1}^n \frac{v_i(S_j)}{w_j} = \beta_i. \]

Now let $v_i$ be additive and $n = 2$.
For any $j \in [2]$, let $Q^{(j)}$ be an allocation where $Q^{(j)}_j \defeq S_j$
and $Q^{(j)}_{3-j} \defeq [m] \setminus S_j$.
Then $v_i(Q^{(j)}_j) = v_i(S_j) \le w_jv_i([m])$ and
\[ v_i(Q^{(j)}_{3-j}) = v_i([m]) - v_i(S_j) \ge v_i([m]) - w_jv_i([m]) = w_{3-j}v_i([m]). \]
Hence,
\[ \frac{v_i(Q^{(j)}_j)}{w_j} \le v_i([m]) \le \frac{v_i(Q^{(j)}_{3-j})}{w_{3-j}}. \]
Therefore,
\begin{align*}
\frac{\WMMS_i}{w_i} &= \min\left(\frac{v_i(P_1)}{w_1}, \frac{v_i(P_2)}{w_2}\right)
\\ &\ge \max_{j=1}^n \min\left(\frac{v_i(Q^{(j)}_j)}{w_j}, \frac{v_i(Q^{(j)}_{3-j})}{w_{3-j}}\right)
    \tag{by definition of $P$}
\\ &= \max_{j=1}^n \frac{v_i(S_j)}{w_j} = \beta_i.
\end{align*}
Hence, $\WMMS_i/w_i \ge \beta_i$.
\end{proof}

\begin{lemma}[WMMS $\fimplies$ APS for $n=2$]
\label{thm:impl:mms-to-aps-n2}
For a fair division instance $([2], [m], (v_i)_{i=1}^2, w)$,
if $v_i$ is additive for some $i$, then $\APS_i \le \WMMS_i$.
Moreover, when entitlements are equal, we get $\APS_i = \MMS_i$.
\end{lemma}
\begin{proof}
By \cref{thm:wmms-vs-knapsack}, we get
\[ \frac{\WMMS_i}{w_i} = \beta_i \defeq \max_{j=1}^2 \frac{v_i(S_j)}{w_j},
\quad\textrm{where}\quad
S_j \defeq \argmax_{\substack{S \subseteq [m]:\\ v_i(S) \le w_jv_i([m])}} v_i(S). \]
On setting $p = v_i$ in the primal definition of APS (\cref{defn:aps}), we get
\[ \APS_i \le \max_{\substack{S \subseteq [m]:\\ p(S) \le w_ip([m])}} v_i(S)
    = v_i(S_i) \le w_i\beta_i = \WMMS_i. \]
When entitlements are equal, $\APS_i \ge \pessShare_i \ge \MMS_i$
by \cref{thm:impl:aps-to-pess}.
\end{proof}

\subsection{Additive Triboolean Valuations}
\label{sec:impls-extra:tribool}

\begin{table*}[htb]
\centering
\caption[Tribool implications]{Implications among fairness notions when
valuations are additive and marginals are triboolean,
i.e, they belong to the set $\{-1, 0, 1\}$.}
\label{table:impls-tribool}
\small
\begin{tabular}{cccccccc}
\toprule & \footnotesize valuations & \footnotesize marginals & \footnotesize $n=2$ & \footnotesize entitlements & &
\\\midrule EF1 $\fimplies$ EFX & additive & $\{-1, 0, 1\}$
    & -- & -- & -- & trivial
\\[\defaultaddspace] EEF1 $\fimplies$ EEFX & additive & $\{-1, 0, 1\}$
    & -- & -- & -- & trivial
\\[\defaultaddspace] M1S $\fimplies$ MXS & additive & $\{-1, 0, 1\}$
    & -- & -- & -- & trivial
\\[\defaultaddspace] PROP1 $\fimplies$ PROPx & -- & $\{-1, 0, 1\}$
    & -- & -- & \cref{thm:impl:prop1-to-propx-tribool} & \textbf{new}
%
\\\midrule PROP $\fimplies$ EEF & additive & $\{-1, 0, 1\}$
    & -- & equal & \cref{thm:impl:tribool:prop} & \textbf{new}
\\[\defaultaddspace] APS $\fimplies$ PROPx & additive & $\{-1, 0, 1\}$
    & -- & -- & \cref{thm:impl:tribool:prop1,thm:impl:tribool:aps} & \textbf{new}
\\[\defaultaddspace] PROP1 $\fimplies$ APS & additive & $\{-1, 0, 1\}$
    & -- & -- & \cref{thm:impl:tribool:prop1,thm:impl:tribool:aps} & \textbf{new}
\\[\defaultaddspace] M1S $\fimplies$ APS & additive & $\{-1, 0, 1\}$
    & -- & equal & \cref{thm:impl:tribool:aps,thm:impl:tribool:m1s} & \textbf{new}
\\[\defaultaddspace] MMS $\fimplies$ EEFX & additive & $\{-1, 0, 1\}$
    & -- & equal & \cref{thm:impl:tribool:mms-to-eefx} & \textbf{new}
%
\\\midrule EF1 $\fimplies$ GAPS & additive & $\{-1, 0, 1\}$
    & -- & equal & \cref{thm:impl:tribool:ef1-gaps} & \textbf{new}
\\[\defaultaddspace] EF1 $\fimplies$ GAPS & additive & $\{-1, 0, 1\}$
    & $n=2$ & -- & \cref{thm:impl:tribool:ef1-gaps} & \textbf{new}
\\[\defaultaddspace] EF1 $\fimplies$ GAPS & additive & $\{-1, 0\}$
    & -- & -- & \cref{thm:impl:tribool:ef1-gaps} & \textbf{new}
\\ \bottomrule
\end{tabular}
\end{table*}

\begin{lemma}[PROP1 $\fimplies$ PROPx]
\label{thm:impl:prop1-to-propx-tribool}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ where for some agent $i$,
marginals are triboolean, i.e., $v_i(t \mid S) \in \{-1, 0, 1\}$
for all $S \subseteq [m]$ and $t \in [m] \setminus S$ for some agent $i$.
Then if an allocation $A$ is PROP1-fair to agent $i$, then it is also PROPx-fair to $i$.
\end{lemma}
\begin{proof}
If $v_i(A_i) \ge w_iv_i([m])$, then $A$ is PROPx.
Otherwise, we get $v_i(A_i) + 1 > w_iv_i([m])$ since $A$ is PROP1
and marginals are triboolean.
Removing any positive-disutility subset from $A_i$
or adding any positive-utility subset to $A_i$ will increase its value by at least 1.
Hence, $A$ is PROPx.
\end{proof}

\begin{lemma}
\label{thm:tribool-rr}
For an additive function $f: 2^{[m]} \to \{-1, 0, 1\}$,
there exists an $n$-partition $P$ such that $|f(P_i) - f(P_j)| \le 1$
for all $i, j \in [n]$ and
and $\floor{f([m])/n} \le f(P_i) \le \ceil{f([m])/n}$ for all $i \in [n]$.
\end{lemma}
\begin{proof}
Partition $[m]$ into
goods $M_+ \defeq \{g \in [m]: v_i(g) > 0\}$,
chores $M_- \defeq \{c \in [m]: v_i(c) < 0\}$,
and neutral items $M_0 \defeq \{t \in [m]: v_i(t) = 0\}$.
Fuse items $M_0$, $\min(|M_+|, |M_-|)$ goods, and $\min(|M_+|, |M_-|)$ chores
into a single item $h$.
Then we are left with only goods and a neutral item,
or only chores and a neutral item.
Using round-robin, one can allocate items such that
any two bundles differ by at most one item.
\end{proof}

\begin{lemma}
\label{thm:impl:tribool:prop}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, \eqEnt)$
where $v_i$ is additive and $v_i(t) \in \{-1, 0, 1\}$ for all $t \in [m]$ for some agent $i$.
If an allocation $A$ is PROP-fair to $i$, then it is also epistemic-EF-fair to $i$.
\end{lemma}
\begin{proof}
Since $A$ is PROP-fair to $i$, and $v_i(S) \in \mathbb{Z}$ for all $S \subseteq [m]$,
we get $v_i(A_i) \ge \ceil{v_i([m])/n}$.

Construct an allocation $B$ where $B_i = A_i$, and items $[m] \setminus A_i$
are allocated among agents $[n] \setminus \{i\}$ using \cref{thm:tribool-rr} with $f = v_i$.
We will show that $B$ is agent $i$'s epistemic-EF-certificate for $A$.

In $B$, for each agent $j \in [n] \setminus \{i\}$, we have
\[ v_i(B_j) \le \bigceil{\frac{v_i([m] \setminus A_i)}{n-1}}
    \le \bigceil{\frac{v_i([m]) - v_i([m])/n}{n-1}}
    \le \bigceil{\frac{v_i([m])}{n}} \le v_i(A_i). \]
Hence, $i$ doesn't envy anyone in $B$.
Hence, $B$ is agent $i$'s epistemic-EF-certificate for $A$.
\end{proof}

\begin{lemma}
\label{thm:impl:tribool:prop1}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ where
$v_i$ is additive and $v_i(t) \in \{-1, 0, 1\}$ for all $t \in [m]$ for some agent $i$.
Then the following statements are equivalent:
\begin{tightenum}
\item Allocation $A$ is PROP1-fair to $i$.
\item Allocation $A$ is PROPx-fair to $i$.
\item $v_i(A_i) \ge \floor{w_iv_i([m])}$.
\end{tightenum}
\end{lemma}
\begin{proof}
Partition $[m]$ into
goods $M_+ \defeq \{g \in [m]: v_i(g) > 0\}$,
chores $M_- \defeq \{c \in [m]: v_i(c) < 0\}$,
and neutral items $M_0 \defeq \{t \in [m]: v_i(t) = 0\}$.

\textbf{Case 1}: $A_i$ has all goods and no chores.
\\ Then $v_i(A_i) \ge \max(0, v_i([m]))$.
If $v_i([m]) \ge 0$, then $v_i(A_i) \ge v_i([m]) \ge w_iv_i([m])$,
else $v_i(A_i) \ge 0 \ge w_iv_i([m])$.
Hence, $v_i(A_i) \ge w_iv_i([m])$ and $A$ is PROPx+PROP1.

\textbf{Case 2}: $A_i$ has a chore or some good is outside $A_i$.
\\ Then adding a good to $A_i$ or removing a chore from $A_i$
makes it's value more than $w_iv_i([m])$ iff $v_i(A_i) \ge \floor{w_iv_i([m])}$.
Hence, $A$ is PROP1 iff $A$ is PROPx iff $v_i(A_i) \ge \floor{w_iv_i([m])}$.
\end{proof}

\begin{lemma}
\label{thm:impl:tribool:aps}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ where
$v_i$ is additive and $v_i(t) \in \{-1, 0, 1\}$ for all $t \in [m]$ for some agent $i$.
Then $\APS_i = \floor{w_iv_i([m])}$.
\end{lemma}
\begin{proof}
Partition $[m]$ into goods $M_+ \defeq \{g \in [m]: v_i(g) > 0\}$,
chores $M_- \defeq \{c \in [m]: v_i(c) < 0\}$, and
neutral items $M_0 \defeq \{t \in [m]: v_i(t) = 0\}$.

First, set $p(t) = v_i(t)$ for each $t \in [m]$ to get $\APS_i \le w_im_i$.
Since the APS is the value of some bundle, and bundle values can only be integers,
we get $\APS_i \le \floor{w_im_i}$.

Pick an arbitrary price vector $p \in \Delta_m$.
We will construct a set $S$ such that $p(S) \le w_ip([m])$ and $v_i(S) \ge w_iv_i([m])$.
Fuse items $M_0$, $\min(|M_+|, |M_-|)$ goods, and $\min(|M_+|, |M_-|)$ chores
into a single item $h$.
Let $M'_+$ and $M'_-$ be the remaining goods and chores, respectively.
Then $M'_+ = \emptyset$ or $M'_- = \emptyset$.
Using techniques from \cref{thm:aps-optimal-price},
we can assume \wLoG{} that $p_g \ge 0$ for all $g \in M'_+$,
$p_c \le 0$ for all $c \in M'_-$, and $p_h = 0$.

\textbf{Case 1}: $M'_- = \emptyset$.
\\ Let $m_i \defeq |M'_+| = v_i([m])$.
Let $S$ be the cheapest $\floor{w_im_i}$ items in $M'_+$.
Then using \cref{thm:prefix-sum-bound}, we get
\[ p(S) \le \frac{\floor{w_im_i}}{m_i}p(M_+) \le w_ip([m]). \]
Then $S$ is affordable and $v_i(S) = \floor{w_im_i}$.
Hence, $\APS_i \ge \floor{w_im_i}$.

\textbf{Case 2}: $M'_+ = \emptyset$.
\\ Let $m_i \defeq |M'_-| = -v_i([m])$.
Let $S$ be the cheapest $\ceil{w_im_i}$ items in $M'_- \cup \{h\}$.
Then using \cref{thm:prefix-sum-bound}, we get
\[ -p(S) \ge \frac{\ceil{w_im_i}}{m_i}(-p([m])) \ge w_i(-p([m])). \]
Then $S$ is affordable and $-v_i(S) \le \ceil{w_im_i} = -\floor{w_iv_i([m])}$.
Hence, $\APS_i \ge \floor{w_iv_i([m])}$.
\end{proof}

\begin{lemma}
\label{thm:impl:tribool:m1s}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, \eqEnt)$
where $v_i$ is additive and $v_i(t) \in \{-1, 0, 1\}$ for all $t \in [m]$ for some agent $i$.
Then $\MMS_i = \mathrm{M1S}_i = \floor{v_i([m])/n}$.
\end{lemma}
\begin{proof}
Allocate items $[m]$ among agents $[n]$ using \cref{thm:tribool-rr} with $f = v_i$.
Then any two bundles differ by a value of at most one.
Hence, $\MMS_i = \floor{m'/n}$ and $\mathrm{M1S}_i \le \floor{m'/n}$,
where $m' \defeq v_i([m])$.

Let $X$ be an allocation where agent $i$ is EF1-satisfied.
Then any two bundles can differ by a value of at most one.
Hence, the smallest value $v_i(X_i)$ can have is $\floor{m'/n}$.
Hence, $\mathrm{M1S}_i \ge \floor{m'/n}$.
\end{proof}

\begin{lemma}
\label{thm:impl:tribool:ef1-gaps}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$ where
$v_i$ is additive and $v_i(t) \in \{-1, 0, 1\}$ for all $t \in [m]$ for some agent $i$.
If an allocation $A$ is EF1-fair to $i$, then it is also groupwise-APS-fair to $i$
if at least one of these conditions hold:
\begin{tightenum}
\item $n=2$
\item $w_i \le w_j$ for all $j \in [n] \setminus \{i\}$.
\item $v_i(c) \in \{0, -1\}$ for all $c \in [m]$.
\end{tightenum}
\end{lemma}
\begin{proof}
Consider any subset $S$ of agents.
On restricting $A$ to $S$, we get an allocation $B$ that is EF1-fair to $i$.
$B$ is also PROP1-fair to $i$ by \cref{thm:impl:eef1-to-prop1},
and APS-fair to $i$ by \cref{thm:impl:tribool:prop1,thm:impl:tribool:aps}.
Hence, $A$ is groupwise-APS-fair to $i$.
\end{proof}

\begin{remark}
\label{thm:ceil-floor}
For any $m \in \mathbb{Z}$ and $n \in \mathbb{Z}_{\ge 1}$, we get
\[ \bigfloor{\frac{m}{n}} = \bigceil{\frac{m+1}{n}} - 1. \]
\end{remark}

\begin{lemma}
\label{thm:impl:tribool:mms-to-eefx}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, \eqEnt)$
where $v_i$ is additive and $v_i(t) \in \{-1, 0, 1\}$ for all $t \in [m]$ for some agent $i$.
If $v_i(A_i) \ge \floor{v_i([m])/n}$ for some allocation $A$,
then $A$ is epistemic-EFX-fair to $i$.
\end{lemma}
\begin{proof}
Construct an allocation $B$ where $B_i = A_i$, and items $[m] \setminus A_i$
are allocated among agents $[n] \setminus \{i\}$ using \cref{thm:tribool-rr} with $f = v_i$.
We will show that $B$ is agent $i$'s epistemic-EFX-certificate for $A$.

Let $k \defeq v_i([m])$.
Suppose $v_i(A_i) \ge \floor{k/n} = \ceil{(k+1)/n} - 1$ (c.f.~\cref{thm:ceil-floor}).
Then for any other agent $j \in [n] \setminus \{i\}$, we get
\[ v_i(B_j) \le \bigceil{\frac{v_i([m] \setminus A_i)}{n-1}}
    \le \bigceil{\frac{k - (k+1)/n + 1}{n-1}} = \bigceil{\frac{k+1}{n}}
    \le v_i(B_i) + 1. \]
If $B_j$ contains no goods and $B_i$ contains no chores,
then $v_i(B_i) \ge 0 \ge v_i(B_j)$, so $i$ doesn't envy $j$ in $B$.
Otherwise, transferring a good from $j$ to $i$ or a chore from $i$ to $j$ in $B$
eliminates $i$'s envy towards $j$.
Hence, $B$ is agent $i$'s epistemic-EFX-certificate for $A$.
\end{proof}

\section{Details of Non-Implications}
\label{sec:cex-extra}

\subsection{Trivial Examples}
\label{sec:cex-extra:trivial}

\begin{example}[single item]
\label{cex:single-item}
Consider a fair division instance with $n$ agents and one item
(which is either a good to everyone or a chore to everyone).
Then every allocation is EFX, EF1, APS, MMS, PROPx, GAPS, GMMS, PAPS, PMMS,
EEFX, EEF1, MXS, M1S, PROPm, and PROP1,
but not EF or PROP or GPROP or PPROP or EEF or MEFS.
\end{example}

\begin{lemma}
\label{cex:share-vs-envy-goods}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, \eqEnt)$
with $n \ge 3$, $m = 2n-1$, and identical additive valuations,
where each item has value 1 to each agent.
Let $A$ be an allocation where agent $n$ gets $n$ goods,
and all other agents get 1 good each.
Then this allocation is APS+MMS+EEFX+PROPx, but not EF1.
\end{lemma}
\begin{proof}
By \cref{thm:impl:aps-to-pess,thm:impl:prop-to-aps},
$1 = \MMS_i \le \APS_i \le v([m])/n = 2 - 1/n$.
Hence, $APS_i = 1$, since the APS is the value of some bundle.
Hence, $A$ is APS+MMS+PROPx.
Agent $n$'s EEFX-certificate for $A$ is $A$ itself.
For $i \neq n$, agent $n$'s EEFX-certificate is $B$,
where $|B_i| = 1$ and $|B_j| = 2$ for $j \neq i$.
%
$A$ is not EF1 because the first $n-1$ agents EF1-envy agent $n$.
\end{proof}

\begin{lemma}
\label{cex:share-vs-envy-chores}
Consider a fair division instance $([n], [m], (v_i)_{i=1}^n, w)$
with $n \ge 3$, equal entitlements, identical additive disutilities,
and $m = n+1$ chores, each of disutility 1.
Let $A$ be an allocation where agents 1 and 2 get 2 chores each,
agent $n$ gets 0 chores, and the remaining agents get 1 chore each.
Then this allocation is APS+MMS+EEFX+PROPx, but not EF1.
\end{lemma}
\begin{proof}
$-2 = \MMS_i \le \APS_i \le v([m])/n = - 1 - 1/n$.
Hence, $APS_i = -2$, since the APS is the value of some bundle.
Hence, $A$ is APS+MMS+PROPx.

Agents $[n] \setminus [2]$ do not EFX-envy anyone in $A$.
For $i \in \{1, 2\}$, agent $i$'s epistemic-EFX-certificate can be obtained by
transferring a chore from agent $3-i$ to agent $n$.
Hence, $A$ is epistemic EFX.

$A$ is not EF1 because agents 1 and 2 EF1-envy agent $n$.
\end{proof}

\subsection{From EEF, MEFS, PROP}
\label{sec:cex-extra:from-eef-mefs-prop}

\begin{lemma}[EEF $\nfimplies$ EF1]
\label{cex:eef-not-ef1}
Let $0 \le 2a < b$. Let $f_1, f_2, f_3: 2^{[12]} \to \mathbb{R}_{>0}$ be additive sets functions:

\begin{tabular}{c|cccc|cccc|cccc}
& 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12
\\ \hline $f_1$ & $a$ & $a$ & $b$ & $b$ & $b$ & $b$ & $b$ & $b$ & $a$ & $a$ & $a$ & $a$
\\ $f_2$ & $a$ & $a$ & $a$ & $a$ & $a$ & $a$ & $b$ & $b$ & $b$ & $b$ & $b$ & $b$
\\ $f_3$ & $b$ & $b$ & $b$ & $b$ & $a$ & $a$ & $a$ & $a$ & $a$ & $a$ & $b$ & $b$
\end{tabular}

Let $t \in \{-1, 1\}$ and let $\Ical \defeq ([3], [12], (v_i)_{i=1}^3, \eqEnt)$
be a fair division instance where $v_i \defeq tf_i$ for all $i \in [3]$.
Then allocation
$A \defeq ([4], [8] \setminus [4], [12] \setminus [8])$ is EEF+PROP but not EF1.
\end{lemma}
\begin{proof}
For $t = 1$, agent 1 EF1-envies agent 2 in $A$,
and for $t = -1$, agent 1 EF1-envies agent 3 in $A$.
$B = ([4], \{5, 6, 9, 10\}, \{7, 8, 11, 12\})$ is agent 1's EEF-certificate.
A similar argument holds for agents 2 and 3 too.
\end{proof}

\begin{example}[PROP $\nfimplies$ MEFS]
\label{cex:prop-not-mefs-goods}
Consider a fair division instance with 3 equally-entitled agents
having additive valuations over 3 goods:

\begin{tabular}{c|ccc}
& 1 & 2 & 3
\\ \hline $v_1$ & 10 & 20 & 30
\\ $v_2$ & 20 & 10 & 30
\\ $v_3$ & 10 & 20 & 30
\end{tabular}

Then the allocation $(\{2\}, \{1\}, \{3\})$ is PROP, but no allocation is MEFS
(every agent's minimum EF share is 30).
\end{example}

\begin{example}[PROP $\nfimplies$ MEFS]
\label{cex:prop-not-mefs-chores}
Consider a fair division instance with 3 equally-entitled agents
having additive disutilities over 3 chores:

\begin{tabular}{c|ccc}
& 1 & 2 & 3
\\ \hline $-v_1$ & 30 & 20 & 10
\\ $-v_2$ & 20 & 30 & 10
\\ $-v_3$ & 30 & 20 & 10
\end{tabular}

Then the allocation $(\{2\}, \{1\}, \{3\})$ is PROP, but no allocation is MEFS
(every agent's minimum EF share is $-10$).
\end{example}

\begin{lemma}[MEFS $\nfimplies$ EEF]
\label{cex:mefs-not-eef-goods}
Consider a fair division instance with 3 equally-entitled agents
having additive valuations over 6 goods:

\begin{tabular}{c|cccccc}
& 1 & 2 & 3 & 4 & 5 & 6
\\ \hline $v_1$ & 20 & 20 & 20 & 10 & 10 & 10
\\ $v_2$, $v_3$ & 20 & 10 & 10 &  1 &  1 &  1
\end{tabular}

Then the allocation $A \defeq (\{4, 5, 6\}, \{1\}, \{2, 3\})$ is MEFS, but no allocation is epistemic EF.
\end{lemma}
\begin{proof}
Agents 2 and 3 are envy-free in $A$.
Agent 1 has $B \defeq (\{1, 4\}, \{2, 5\}, \{3, 6\})$ as her MEFS-certificate for $A$.
Hence, $A$ is MEFS.

Suppose an epistemic EF allocation $X$ exists.
Let $Y^{(i)}$ be each agent $i$'s epistemic-EF-certificate.
For agent 2 to be envy-free in $Y^{(2)}$,
we require $Y^{(2)}_2 \supseteq \{1\}$ or $Y^{(2)}_2 \supseteq \{2, 3\}$.
Similarly, $Y^{(3)}_3 \supseteq \{1\}$ or $Y^{(3)}_3 \supseteq \{2, 3\}$.
Since $Y^{(i)}_i = X_i$ for all $i$, we get $X_2 \cup X_3 \supseteq \{1, 2, 3\}$.
Hence, $X_1 \subseteq \{4, 5, 6\}$.
But then no epistemic-EF-certificate exists for agent 1 for $X$,
contradicting our assumption that $X$ is epistemic EF.
Hence, no epistemic EF allocation exists.
\end{proof}

\begin{example}[MEFS $\nfimplies$ EEF]
\label{cex:mefs-not-eef-chores}
Consider a fair division instance with 3 equally-entitled agents
having additive disutilities over 6 chores:

\begin{tabular}{c|cccccc}
& 1 & 2 & 3 & 4 & 5 & 6
\\ \hline $-v_1$ & 20 & 20 & 20 & 10 & 10 & 10
\\ $-v_2$, $-v_3$ & 20 & 10 & 10 & 10 & 10 & 10
\end{tabular}

Then the allocation $A \defeq (\{4, 5, 6\}, \{1\}, \{2, 3\})$ is MEFS
(agents 2 and 3 are EF, agent 1's MEFS-certificate is $(\{1, 4\}, \{2, 5\}, \{3, 6\})$).
Agent 1 is not epistemic-EF-satisfied by $A$.
\end{example}

\begin{lemma}[MEFS $\nfimplies$ EEF1]
\label{cex:mefs-not-eef1-chores}
Consider a fair division instance with 3 equally-entitled agents
having additive disutilities over 12 chores.
$v_1(1) = v(2) = v(3) = 70$ and $v(c) = 10$ for all $c \in [12] \setminus [3]$.
Agents 2 and 3 have disutility 10 for each chore.
Then $A \defeq ([12] \setminus [3], [2], \{3\})$ is a MEFS+PROP allocation
where agent 1 is not EEF1-satisfied.
\end{lemma}
\begin{proof}
$\PROP_1 = -100$ and $\PROP_2 = \PROP_3 = -40$.
$\MEFS_1 \le -100$ because of the allocation $(\{1, 4, 5, 6\}, \{2, 7, 8, 9\}, \{3, 10, 11, 12\})$.
$\MEFS_i \le -40$ for $i \in \{2, 3\}$ because of the allocation
$([4], [8] \setminus [4], [12] \setminus [8])$.
Agent 1 has disutility $90$ in $A$, so $A$ is MEFS-fair and PROP-fair to agent 1.
Agents 2 and 3 have disutility at most $20$ in $A$, so $A$ is MEFS-fair and PROP-fair to them.

Agent 1 is not EEF1-satisfied by $A$, since in any EEF1-certificate $B$,
some agent $j \in \{2, 3\}$ receives at most one chore of value $70$,
and agent 1 would EF1-envy $j$.
\end{proof}

\subsection{Two Equally-Entitled Agents}
\label{sec:cex-extra:2-eqEnt}

\begin{example}[EFX $\nfimplies$ MMS]
\label{cex:efx-not-mms}
Let $t \in \{-1, 1\}$.
Consider a fair division instance with 2 equally-entitled agents having
an identical additive valuation function $v$ over 5 items.
$v(1) = v(2) = 3t$ and $v(3) = v(4) = v(5) = 2t$.
Then allocation $A \defeq (\{1, 3\}, \{2, 4, 5\})$ is EFX.
The MMS is $6t$, since $P = (\{3t, 3t\}, \{2t, 2t, 2t\})$ is an MMS partition.
But in $A$, some agent doesn't get her MMS.
\end{example}

\begin{example}[EF1 $\nfimplies$ PROPX or MXS]
\label{cex:ef1-not-propx-mxs}
Let $t \in \{-1, 1\}$.
Consider a fair division instance with 2 equally-entitled agents
having an identical additive valuation function $v$ over 5 items,
where $v(1) = v(2) = 4t$ and $v(3) = v(4) = v(5) = t$.
Then allocation $A \defeq (\{1\}, [5] \setminus \{1\})$ is EF1 but not PROPx and not MXS.
\end{example}

\begin{lemma}[PROPx $\nfimplies$ M1S]
\label{cex:propx-not-m1s}
Let $t \in \{-1, 1\}$ and $0 < \eps < 1/2$.
Consider a fair division instance with 2 equally-entitled agents having
an identical additive valuation function $v$ over 4 items.
Let $v(4) = (1+2\eps)t$ and $v(j) = t$ for $j \in [3]$.
Then allocation $A \defeq (\{4\}, [3])$ is PROPx but not M1S.
\end{lemma}
\begin{proof}
$v([m])/2 = (2+\eps)t$, so $A$ is PROPx.
%
For $t = 1$, in any allocation $B$ where agent 1 doesn't EF1-envy agent 2, she must have at least 2 goods.
But $v(A_1) = 1+2\eps$, so agent 1 doesn't have an M1S-certificate for $A$. Hence, $A$ is not M1S.
%
For $t = -1$, in any allocation $B$ where agent 2 doesn't EF1-envy agent 1, she must have at most 2 chores.
But $v(A_2) = -3$, so agent 1 doesn't have an M1S-certificate for $A$. Hence, $A$ is not M1S.
\end{proof}

\begin{example}[MXS $\nfimplies$ PROPx for $n=2$, \cite{caragiannis2022existence}]
\label{cex:mxs-not-propx-n2}
Let $t \in \{-1, 1\}$.
Consider a fair division instance with 2 equally-entitled agents
having identical additive valuations over 7 items:
the first 2 items of value $4t$ and the last 5 items of value $t$.
Then the allocation $A = (\{1, 3\}, \{2, 4, 5, 6, 7\})$ is not PROPx or EFX,
but it is MXS because the agents have $([7] \setminus [2], [2])$
and $([2], [7] \setminus [2])$ as their MXS-certificates for $A$.
\end{example}

\begin{lemma}[M1S $\nfimplies$ PROP1]
\label{cex:m1s-not-prop1}
Consider a fair division instance with 2 equally-entitled agents
having an identical additive valuation function $v$ over 9 items.
Let $t \in \{-1, 1\}$ and $v(9) = 4t$ and $v(j) = t$ for $j \in [8]$.
Then allocation $A \defeq (\{9\}, [8])$ is M1S but not PROP1.
\end{lemma}
\begin{proof}
$v([9])/2 = 6t$. Let $B \defeq ([4], [9] \setminus [4])$.
%
For $t = 1$ (goods), $B$ is agent 1's M1S-certificate for $A$,
but agent 1 is not PROP1-satisfied by $A$.
%
For $t = -1$ (chores), $B$ is agent 2's M1S-certificate for $A$,
but agent 2 is not PROP1-satisfied by $A$.
\end{proof}

\subsection{Three Equally-Entitled Agents}
\label{sec:cex-extra:3-eqEnt}

\begin{example}[GAPS $\nfimplies$ PROPx]
\label{cex:gaps-not-propx}
Consider a fair division instance with 3 equally-entitled agents
having identical additive valuations. There are 2 goods of values 50 and 10.
In every allocation, some agent doesn't get any good, and that agent is not PROPx-satisfied.
The allocation where the first agent gets the good of value 5
and the second agent gets the good of value 1 is a groupwise APS allocation
(set the price of the goods to $1.1$ and $0.9$).
\end{example}

\begin{lemma}[APS $>$ MMS]
\label{thm:aps-gt-mms}
Let $t \in \{-1, 1\}$.
Consider a fair division instance with 3 equally-entitled agents
having identical additive valuations over 15 items. The items' values are
$65t$, $31t$, $31t$, $31t$, $23t$, $23t$, $23t$, $17t$, $11t$, $7t$, $7t$, $7t$, $5t$, $5t$, $5t$.
Then the AnyPrice share is at least $97t$, the proportional share is $97t$,
and the maximin share is less than $97t$.
\end{lemma}
\begin{proof}
For $t = 1$, this follows from Lemma C.1 of \cite{babaioff2023fair}.
For $t = -1$, a similar argument tells us that the AnyPrice share is at least $-97$.
If the maximin share is at least $-97$, then there must exist a partition $P$ of the chores
where each bundle has disutility 97. But then $P$ would prove that the maximin share
in the corresponding goods instance is at least 97, which is a contradiction.
Hence, for $t = -1$, the maximin share is less than $-97$.
\end{proof}

\begin{example}[GMMS $\nfimplies$ APS]
\label{cex:gmms-not-aps}
For the fair division instance in \cref{thm:aps-gt-mms},
the leximin allocation is GMMS (since on restricting to any subset of agents,
the resulting allocation is still leximin, and is therefore MMS).
However, no APS allocation exists, because APS $>$ MMS,
and the minimum value across all bundles is at most the MMS.
\end{example}

\begin{example}[PMMS $\nfimplies$ MMS, Example 4.4 of \cite{caragiannis2019unreasonable}]
\label{cex:pmms-not-mms}
Let $t \in \{-1, 1\}$.
Consider a fair division instance with 3 equally-entitled agents
having an identical valuation function $v$ over 7 items where
$v(1) = 6t$, $v(2) = 4t$, $v(3) = v(4) = 3t$, $v(5) = v(6) = 2t$, $v(7) = t$.
Each agent's maximin share is $7t$ ($(\{1, 7\}, \{2, 3\}, \{4, 5, 6\})$ is a maximin partition).
Allocation $(\{1\}, \{3, 4, 5\}, \{2, 6, 7\})$ is PMMS but not MMS.
\end{example}

\begin{example}[APS $\nfimplies$ PROPm]
\label{cex:aps-not-propm}
Consider a fair division instance with 3 equally-entitled agents
having an identical additive valuation function $v$ over 6 goods:
$v(1) = 60$, $v(2) = 30$, and $v(3) = v(4) = v(5) = v(6) = 10$.
The allocation $A \defeq (\{2\}, \{3, 4, 5\}, \{1, 6\})$ is APS+MMS, since the MMS is 30,
and the APS is at most 30 because of the price vector $(4, 3, 1, 1, 1, 1)$.
However, $A$ is not PROPm-fair to agent 1, because the proportional share is $130/4 > 40$.
\end{example}

\begin{example}[APS $\nfimplies$ PROP1]
\label{cex:aps-not-prop1-chores}
Consider a fair division instance with 3 equally-entitled agents
having an identical additive valuation function $v$ over 6 chores:
the first chore has disutility 18 (large chore) and the remaining chores have disutility 3 each (small chores).
Then $X \defeq ([6] \setminus \{1\}, \{1\}, \emptyset)$ is MMS+APS,
since the MMS is $-18$, and the APS is at most $-18$ due to the price vector $(1, 0, 0, 0, 0, 0)$.
$X$ is not PROP1-fair to agent 1, since the proportional share is $-11$,
and agent 1's disutility in $X$ after removing any chore is $12$.
$X$ is not EEF1-fair to agent 1 because even after redistributing chores among the remaining agents,
someone will always have no chores.
\end{example}

\begin{lemma}[PROPm doesn't exist for mixed manna]
\label{cex:propm-mixed-manna}
Consider a fair division instance $([3], [6], (v_i)_{i=1}^3, \eqEnt)$
where agents have identical additive valuations, and the items have values
$(-3, -3, -3, -3, -3, 3\eps)$, where $0 < \eps < 1/2$.
Then there exists an EFX+GMMS+GAPS allocation but no PROPm allocation.
\end{lemma}
\begin{proof}
The proportional share is $v([m])/3 = -5 + \eps$.
\WLoG, assume agent 1 receives the most number of chores,
and agent 3 receives the least number of chores.
Then agent 1 has at least 2 chores, and agent 3 has at most 1 chore.

\textbf{Case 1}: agent 1 receives at least 3 chores.
\\ Then even after removing one of her chores, and even if she receives the good,
her value for her bundle is at most $-6 + 3\eps < -5 + \eps$.
Hence, she is not PROPm-satisfied.

\textbf{Case 2}: agent 1 receives 2 chores.
\\ Then agent 2 also receives 2 chores, and agent 3 receives 1 chore.
Assume without loss of generality that agent 2 receives the good.
Then this allocation is EFX and groupwise MMS.
On setting the price of each chore to $-3$ and the price of the good to 3,
we get that the allocation is groupwise APS.
However, if agent 1 adds the good to her bundle, her value becomes $-6 + 3\eps < -5 + \eps$.
Hence, she is not PROPm-satisfied.
\end{proof}

\subsection{Unequal Entitlements}
\label{sec:cex-extra:uneqEnt}

\begin{lemma}[PROP1+M1S is infeasible]
\label{cex:prop1-plus-m1s-ue}
Consider a fair division instance $\Ical \defeq ([3], [7], (v_i)_{i=1}^3, w)$,
where the entitlement vector is $w \defeq (7/12, 5/24, 5/24)$,
the agents have identical additive valuations, and each good has value 1. Then
\begin{tightenum}
\item $\APS_1 = 4$ and $\APS_2 = \APS_3 = 1$.
\item $X$ is APS $\iff$ $X$ is groupwise-APS (GAPS) $\iff$ $X$ is PROP1.
\item $\WMMS_1 = 3$ and $\WMMS_2 = \WMMS_3 = 15/14$.
\item $X$ is WMMS $\iff$ $X$ is groupwise-WMMS (GWMMS) $\iff$ $X$ is EFX $\iff$ $X$ is M1S.
\end{tightenum}
Therefore,
\begin{tightenum}
\item M1S+PROP1 is infeasible for this instance.
\item GWMMS+EFX doesn't imply PROP1.
\item GAPS doesn't imply M1S.
\end{tightenum}
\end{lemma}
\begin{proof}
By \cref{thm:impl:tribool:aps}, $\APS_1 = \floor{\frac{7 \times 7}{12}} = 4$
and $\APS_2 = \APS_3 = \floor{\frac{5 \times 7}{24}} = 1$.
By \cref{thm:impl:tribool:aps,thm:impl:tribool:prop1},
an allocation is APS iff it is PROP1.

Any GAPS allocation is also APS by definition.
We will now show that any APS allocation is also GAPS.
Formally, let $A$ be an APS allocation for $\Ical$.
The cardinality vector of $A$, i.e., $c \defeq (|A_1|, |A_2|, |A_3|)$,
can have three possible values: $(5, 1, 1)$, $(4, 2, 1)$, $(4, 1, 2)$.
For every possible value of $c$ and $S \subseteq [3]$,
we show that $(\Icalhat, \Ahat) \defeq \restrict(\Ical, A, S)$ is APS
(c.f.~\cref{defn:restricting}).
\begin{tightenum}
\item $c = (5, 1, 1)$ and $S = \{1, 2\}$:
    $\Icalhat$ has 6 goods and entitlement vector $(14/19, 5/19)$.
    $\APS_1 = \floor{\frac{14 \times 6}{19}} = 4$ and $\APS_2 = \floor{\frac{5 \times 6}{19}} = 1$.
    Hence, $\Ahat$ is APS for $\Icalhat$.
\item $c = (5, 1, 1)$ and $S = \{1, 3\}$:
    Similar to the $S = \{1, 2\}$ case.
\item $c = (5, 1, 1)$ and $S = \{2, 3\}$:
    $\Icalhat$ has 2 goods and entitlement vector $(1/2, 1/2)$.
    $\APS_3 = \APS_3 = 1$, so $\Ahat$ is APS for $\Icalhat$.
\item $c = (4, 2, 1)$ and $S = \{1, 2\}$:
    $\Icalhat$ has 6 goods and entitlement vector $(14/19, 5/19)$.
    $\APS_1 = \floor{\frac{14 \times 6}{19}} = 4$ and $\APS_2 = \floor{\frac{5 \times 6}{19}} = 1$.
    Hence, $\Ahat$ is APS for $\Icalhat$.
\item $c = (4, 2, 1)$ and $S = \{1, 3\}$:
    $\Icalhat$ has 5 goods and entitlement vector $(14/19, 5/19)$.
    $\APS_1 = \floor{\frac{14 \times 5}{19}} = 3$ and $\APS_2 = \floor{\frac{5 \times 5}{19}} = 1$.
    Hence, $\Ahat$ is APS for $\Icalhat$.
\item $c = (4, 2, 1)$ and $S = \{2, 3\}$:
    $\Icalhat$ has 3 goods and entitlement vector $(1/2, 1/2)$.
    $\APS_2 = \APS_3 = \floor{\frac{1 \times 3}{2}} = 1$.
    Hence, $\Ahat$ is APS for $\Icalhat$.
\item $c = (4, 1, 2)$:
    Similar to the $c = (4, 2, 1)$ case.
\end{tightenum}
Hence, any APS allocation for $\Ical$ is also GAPS.

For any allocation $X$, define
\[ f(X) \defeq \min_{j=1}^3 \frac{|X_j|}{w_j}. \]
Then $\WMMS_i = w_i\max_X f(X)$ for all $i \in [3]$.
If $|X_1| \le 2$, then $f(X) \le |X_1|/w_1 \le 24/7 = 3 + 3/7$.
If $|X_2| \le 1$ or $|X_3| \le 1$, $f(X) \le 24/5 = 4 + 4/5$.
Otherwise, $|X_1| = 3$ and $|X_2| = |X_3| = 2$,
so $f(X) = \min(3 \times 12/7, 2 \times 24/5) = 36/7 = 5 + 1/6$.
Hence, $\max_X f(X) = 36/7$, so $\WMMS_1 = 3$ and $\WMMS_2 = \WMMS_3 = 15/14$.
So, an allocation is WMMS iff it has cardinality vector $(3, 2, 2)$.

Any GWMMS allocation is also WMMS by definition. We now prove the converse.
For every possible value of $S \subseteq [3]$,
we show that $(\Icalhat, \Ahat) \defeq \restrict(\Ical, A, S)$ is WMMS
(c.f.~\cref{defn:restricting}).
\begin{tightenum}
\item $S = \{1, 2\}$:
    $\Icalhat$ has 5 goods and entitlement vector $(14/19, 5/19)$.
    If $|X_1| \le 2$, then $f(X) \le |X_1|/w_1 \le 38/14 = 2 + 10/14$.
    If $|X_2| \le 1$, then $f(X) \le |X_2|/w_2 \le 19/5 = 3 + 10/14$.
    Otherwise, $|X_1| = 3$ and $|X_2| = 2$, so $f(X) = \min(3/w_1, 2/w_2) = \min(57/14, 38/5) = 57/14 = 4 + 1/14$.
    Hence, $\WMMS_1 = 3$ and $\WMMS_2 = \WMMS_3 = 57/14 \times 5/19 = 1 + 19/266$.
    Hence, $\Ahat$ is WMMS for $\Icalhat$.
\item $S = \{1, 3\}$:
    Similar to the $S = \{1, 2\}$ case.
\item $S = \{2, 3\}$:
    $\Icalhat$ has 4 goods and entitlement vector $(1/2, 1/2)$.
    Then $\WMMS_1 = \WMMS_2 = 2$.
    Hence, $\Ahat$ is WMMS for $\Icalhat$.
\end{tightenum}
Hence, any WMMS allocation for $\Ical$ is also GWMMS.

Any GWMMS allocation is EFX by \cref{thm:impl:mms-to-efx-n2},
and any EFX allocation is M1S by \cref{thm:impl:efx-to-ef1}.
We will now show that any M1S allocation is WMMS.

Let $X$ be an M1S allocation.
Let $A$ be agent 1's M1S certificate.
If $|A_1| \le 2$, then $|A_j| \ge 3$ for some $j \in \{2, 3\}$.
Since agent 1 has higher entitlement, she would EF1-envy agent $j$,
which is a contradiction. Hence, $|X_1| \ge |A_1| \ge 3$.

Let $B$ be agent 2's M1S certificate.
Suppose $|B_2| \le 1$. Since $2$ doesn't EF1-envy $3$, we get $|B_3| \le 2$.
Since $2$ doesn't EF1-envy $1$, we get
\[ \frac{|B_1|-1}{w_1} \le \frac{|B_2|}{w_2} \iff |B_1| \le 1 + \frac{w_1}{w_2} = 3 + \frac{4}{5}. \]
Hence, $|B_1| + |B_2| + |B_3| \le 3 + 1 + 2 = 6$, which is a contradiction.
Hence, $|X_2| \ge |B_2| \ge 2$.
Similarly, we can prove that $|X_3| \ge 2$.

Hence, $|X_i| \ge \WMMS_i$ for all $i$, so $X$ is WMMS.
This proves that any M1S allocation is WMMS.
\end{proof}

\cite{chakraborty2021weighted} also proves that EF1+PROP1 allocations may not exist for unequal entitlements,
We use a different counterexample in \cref{cex:prop1-plus-m1s-ue},
which allows us to also prove other non-implications.

\begin{example}[PROP1 $\nfimplies$ M1S]
\label{cex:prop1-not-m1s-n2}
Consider a fair division instance with 2 agents having identical additive valuations.
Let $t \in \{-1, 1\}$. Let there be 2 items, each of value $t$.
Let the entitlement vector be $(2/3, 1/3)$.
Let $A$ be an allocation where the first agent gets both items.
Then $A$ is PROP1 but not M1S.
\end{example}

\subsection{Non-Additive Valuations}
\label{sec:cex-extra:non-add}

\begin{lemma}[EF $\nfimplies$ PROP]
\label{cex:ef-not-prop-supmod}
Consider a fair division instance with 2 agents and 4 goods.
The agents have identical valuations and equal entitlements.
Let $a, b \in \mathbb{R}_{\ge 0}$ such that $3a < b$.
The valuation function $v$ is given by
\[ v(S) \defeq \begin{cases}
|S|a & \textrm{ if } |S| \le 3
\\ 3a + b & \textrm{ if } |S| = 4
\end{cases}. \]
Then $v$ is supermodular, no PROP1 allocation exists,
and if $a > 0$, then no PROPm allocation exists.
However, an allocation where each agent gets 2 goods is EF+APS+MMS.
\end{lemma}
\begin{proof}
For any $g \in [4]$ and $S \subseteq [4] \setminus \{g\}$, we have
\[ v(g \mid S) = \begin{cases}
a & \textrm{ if } |S| \le 2
\\ b & \textrm{ if } |S| = 3
\end{cases}. \]
Hence, $v$ is supermodular.

The proportional share is $(3a + b)/2$.
In any allocation, some agent gets at most 2 goods,
and even if she is given an additional good, her valuation is $3a < (3a+b)/2$.
Hence, no allocation is PROP1, and no allocation is PROPm if $a > 0$.
(When $a = 0$, every allocation is PROPm.)

$v(A_1) = v(A_2) = 2a$, so $A$ is EF.
It is easy to check that the MMS is $2a$.

If we set the price of each good to 1, then at most 2 goods are affordable.
Hence, APS is at most $2a$.
Moreover, for any price vector, the cheapest 2 goods are affordable, and their total valuation is $2a$.
Hence, APS is at least $2a$.
\end{proof}

We first define a function in \cref{cex:ud-submod-canc} by perturbing a unit-demand function.
We then use it to show that a PROP allocation may not be M1S.

\begin{lemma}
\label{cex:ud-submod-canc}
Let $0 \le \eps < 1/6$ and $v: 2^{[3]} \to \mathbb{R}_{\ge 0}$, where
\[ v(S) := \begin{cases}
4 + 2\eps|S| & \textrm{ if } 1 \in S \textrm{ or } 2 \in S
\\ 3 + 2\eps|S| & \textrm{ if } S = \{3\}
\\ 0 & \textrm{ otherwise}
\end{cases}. \]
Then $v$ is submodular and cancelable.
\end{lemma}
\begin{proof}
\[ v(g \mid S) = 2\eps + \begin{cases}
0 & \textrm{ if } 1 \in S \textrm{ or } 2 \in S
\\ 1 & \textrm{ if } S = \{3\}
\\ v(\{g\}) & \textrm{ if } S = \emptyset
\end{cases}. \]
We can see that adding elements to $S$ never increases $v(g \mid S)$.
Hence, $v$ is submodular.

One can confirm that $v$ is cancelable by painstakingly applying the definition of cancelable valuations
(c.f.~\cref{sec:settings-extra}).
\end{proof}

\begin{lemma}[PROP $\nfimplies$ M1S]
\label{cex:prop-not-m1s-submod}
Consider a fair division instance with 2 equally-entitled agents
having an identical valuation function $v$ over 3 goods as defined in \cref{cex:ud-submod-canc}.
Then the allocation $A = (\{1, 2\}, \{3\})$ is PROP but not M1S.
\end{lemma}
\begin{proof}
$A$ is PROP since $v(A_1) = 4+6\eps$, $v(A_2) = 3+2\eps$, and the PROP share is $2+3\eps$.
Suppose $A$ is M1S and agent 2's M1S certificate for $A$ is $B$.
Then $v(B_2) \le v(A_2) = 3 + 2\eps$, so $B_2 = \{3\}$. Hence, $B_1 = \{1, 2\}$.
However, $\min_{g \in B_1} v(B_1 \setminus \{g\}) = 4 + 6\eps > 3 + 2\eps = v(B_2)$.
Hence, agent 2 is not EF1-satisfied by $B$, which contradicts the fact that $B$
is agent 2's M1S certificate for $A$. Hence, $A$ is not M1S.
\end{proof}

\begin{lemma}
\label{cex:part-matroid-rank}
Let $M \defeq \{r_1, r_2, g_1, g_2, b\}$ and define $v: 2^M \to \mathbb{R}$ as
$v(S) \defeq \boolone(r_1 \in S \textrm{ or } r_2 \in S)
    + \boolone(g_1 \in S \textrm{ or } g_2 \in S) + \boolone(b \in S)$.
Then $v$ is submodular and has binary marginals, i.e.,
$v(g \mid S) \in \{0, 1\}$ for all $S \subseteq M$ and $g \in M \setminus S$.
\end{lemma}
\begin{proof}[Proof sketch]
$v$ is the rank function of a partition matroid.
\end{proof}

\begin{example}[EF1 $\nfimplies$ MXS]
\label{cex:ef1-not-mxs-submod-binary}
Consider a fair division instance with 2 equally-entitled agents
having an identical valuation function $v$ over 5 goods as defined in \cref{cex:part-matroid-rank}.
Then the allocation $A \defeq (\{r_1, r_2\}, \{g_1, g_2, b\})$ is EF1
but agent 1 is not MXS-satisfied by $A$.
\end{example}

\section{Feasibility of Fairness Notions}
\label{sec:feas}
\label{sec:feas-extra}

We list results regarding the feasibility and infeasibility of fairness notions
in \cref{table:feas,table:infeas}, respectively.

\begin{table*}[!htb]
\centering
\caption{Feasibility of fairness notions}
\label{table:feas}
\begin{tabular}{lcccccr}
\toprule \scriptsize notion & \scriptsize valuation & \scriptsize marginals & \scriptsize identical & \scriptsize $n$ & \scriptsize entitlements &
\\ \midrule EF1 & -- & dbl-mono\textsuperscript{\ref{foot:dbl-mono}} & -- & -- & equal
    & Theorem 4 of \cite{bhaskar2021approximate}
\\[\defaultaddspace] EF1 & additive & goods & -- & -- & --
    & Theorem 3.3 of \cite{chakraborty2021weighted}
\\[\defaultaddspace] EF1 & additive & chores & -- & -- & --
    & Theorem 19 of \cite{springer2024almost}
\\[\defaultaddspace] MMS & -- & -- & -- & $n=2$ & equal
    & Cut-and-choose
\\[\defaultaddspace] WMMS & -- & -- & yes & -- & --
    & Trivial
\\[\defaultaddspace] PROPm & additive & goods & -- & -- & equal
    & \cite{baklanov2021propm}
\\[\defaultaddspace] PROP1 & additive & -- & -- & -- & --
    & \cite{aziz2020polynomial}
\\[\defaultaddspace] PROPx & additive & chores & -- & -- & --
    & Theorem 4.1 of \cite{li2022almost}\textsuperscript{\ref{foot:propx-li}}
\\[\defaultaddspace] EFX & additive & $\ge 0$, $\le 0$ & yes & -- & --
    & Theorem 5 of \cite{springer2024almost}
\\[\defaultaddspace] EEFX & cancelable & $\ge 0$, $\le 0$ & -- & -- & equal
    & \cite{caragiannis2022existence}
\\[\defaultaddspace] EEFX & -- & $\ge 0$, $\le 0$ & -- & -- & equal
    & \cite{akrami2024epistemic}
\\[\defaultaddspace] EFX & additive & bival goods & -- & -- & equal
    & Theorem 4.1 of \cite{amanatidis2021maximum}
\\[\defaultaddspace] MMS & additive & bival goods & -- & -- & equal
    & \cite{feige2022maximin}
\\[\defaultaddspace] MMS & additive & bival chores & -- & -- & equal
    & \cite{feige2022maximin}
\\[\defaultaddspace] MMS & submodular & $\{0, 1\}$ & -- & -- & equal
    & Theorem 1 of \cite{barman2021existence}
\\[\defaultaddspace] PMMS & submodular & $\{0, 1\}$ & -- & -- & equal
    & Theorem 4 of \cite{barman2021existence}
\\[\defaultaddspace] MMS & submodular & $\{0, -1\}$ & -- & -- & equal
    & Theorem 9 of \cite{barman2023fair}
\\[\defaultaddspace] GMMS & -- & -- & yes & -- & equal
    & Leximin is GMMS
\\ \bottomrule
\end{tabular}

\footnotesize
\begin{tightenum}
\item \label{foot:dbl-mono}A function $v: 2^M \to \mathbb{R}$ is \emph{doubly monotone}
    if $M = G \cup C$, and $\forall\,R \subseteq M$,
    we have $v(g \mid R) \ge 0$ for all $g \in G \setminus R$
    and $v(c \mid R) \le 0$ for all $c \in C \setminus R$.
\item \label{foot:propx-li}Algorithm 2 of \cite{li2022almost} must be slightly modified
    to meet our slightly stricter definition of PROPx.
    Change line 5 from `if $|v_i(X_i)| > w_i$' to `if $|v_i(X_i)| \ge w_i$'.
\end{tightenum}
\end{table*}

\begin{table*}[!htb]
\centering
\caption{Infeasibility of fairness notions}
\label{table:infeas}
\begin{tabular}{lcccccr}
\toprule \scriptsize notion & \scriptsize valuation & \scriptsize marginals & \scriptsize identical & \scriptsize $n$ & \scriptsize entitlements &
\\ \midrule PROP & $m=1$ & $1$, $-1$ & yes & any & equal
    & \cref{cex:single-item}
\\[\defaultaddspace] APS & submod & $\ge 0$ & yes & $n=2$ & equal
    & Remark 2 of \cite{babaioff2023fair}
\\[\defaultaddspace] APS & additive & $> 0$, $< 0$ & yes & $n=3$ & equal
    & Lemma C.1 of \cite{babaioff2023fair}
\\[\defaultaddspace] MMS & additive & $> 0$, $< 0$ & no & $n=3$ & equal
    & \cite{feige2022tight}
\\[\defaultaddspace] MMS & XOS & $\{0, 1\}$ & no & $n=2$ & equal
    & Theorem 2 of \cite{barman2021existence}
\\[\defaultaddspace] PROPx & additive & $> 0$ bival & yes & $n=3$ & equal
    & \cref{cex:propx}
\\[\defaultaddspace] PROPm & additive & mixed bival & yes & $n=3$ & equal
    & \cref{cex:propm-mixed-manna}
\\[\defaultaddspace] MXS & additive & $> 0$ & no & $n=2$ & unequal
    & \cref{cex:wmxs-goods}
\\[\defaultaddspace] MXS & additive & $< 0$ & no & $n=2$ & unequal
    & \cref{cex:wmxs-chores}
\\[\defaultaddspace] PROP1+M1S & additive & $1$ & yes & $n=3$ & unequal
    & \cref{cex:prop1-plus-m1s-ue}
\\[\defaultaddspace] PROP1 & supermod & $\ge 0$ bival & yes & $n=2$ & equal
    & \cref{cex:ef-not-prop-supmod}
\\[\defaultaddspace] MMS & supermod & $\ge 0$ bival & no & $n=2$ & equal
    & \cref{cex:mms-supmod-goods}
\\[\defaultaddspace] MMS & supermod & $\le 0$ bival & no & $n=2$ & equal
    & \cref{cex:mms-supmod-chores}
\\ \bottomrule
\end{tabular}
\end{table*}

\begin{example}[PROPx is infeasible]
\label{cex:propx}
An instance with 3 equally-entitled agents having identical additive valuations over 2 goods
with values 10 and 1, respectively.
\end{example}

\begin{lemma}[WMXS is infeasible for goods, Theorem 8 of \cite{springer2024almost}]
\label{cex:wmxs-goods}
Let $0 < \eps \le 1/4$, and $\phi \defeq (\sqrt{5}+1)/2$.
No MXS allocation exists for the fair division instance $([2], [4], (v_i)_{i=1}^2, w)$,
where $w_1 = 1/(\sqrt{\phi}+1)$, $w_2 = \sqrt{\phi}/(\sqrt{\phi}+1)$,
and agents have additive valuations given by the following table:

\centering
\begin{tabular}{c|cccc}
$g$ & 1 & 2 & 3 & 4
\\ \hline $v_1(g)$ & $\eps$ & $1$ & $\phi$ & $\phi$
\\ $v_2(g)$ & $\eps$ & $\eps$ & $1$ & $1$
\end{tabular}
\end{lemma}
\begin{proof}[Proof sketch.]
Note that $1 + \eps < \sqrt{\phi} = w_2/w_1$.
The only bundles agent $2$ is EFX-satisfied with are
$\{1, 2, 3\}$, $\{1, 2, 4\}$, $\{3, 4\}$, and their supersets.
Hence, $\MXS_2 = 1 + 2\eps$.
%
The only bundles agent $1$ is EFX-satisfied with are
$\{1, 3\}$, $\{1, 4\}$, $\{2, 3\}$, $\{2, 4\}$, $\{3, 4\}$, and their supersets.
Hence, $\MXS_1 = \phi + \eps$.
%
One can check that no allocation is MXS.
\end{proof}

\begin{lemma}[WMXS is infeasible for chores, Theorem 17 of \cite{springer2024almost}]
\label{cex:wmxs-chores}
Let $0 < \eps \le 1/4$, and $\phi \defeq (\sqrt{5}+1)/2$.
No MXS allocation exists for the fair division instance $([2], [4], (v_i)_{i=1}^2, w)$,
where $w_1 = \sqrt{\phi}/(\sqrt{\phi}+1)$, $w_2 = 1/(\sqrt{\phi}+1)$,
and agents have additive disutilities given by the following table:

\centering
\begin{tabular}{c|cccc}
$c$ & 1 & 2 & 3 & 4
\\ \hline $-v_1(c)$ & $\eps$ & $1$ & $\phi$ & $\phi$
\\ $-v_2(c)$ & $\eps$ & $\eps$ & $1$ & $1$
\end{tabular}
\end{lemma}
\begin{proof}[Proof sketch.]
Note that $1 + \eps < \sqrt{\phi} = w_1/w_2$.
The only bundles agent $2$ is EFX-satisfied with are
$\{1, 2\}$, $\{3\}$, $\{4\}$, and their subsets.
Hence, $\MXS_2 = -1$.
%
The only bundles agent $1$ is EFX-satisfied with are
$\{2, 3\}$, $\{2, 4\}$, $\{1, 3\}$, $\{1, 4\}$, $\{1, 2\}$, and their subsets.
Hence, $\MXS_1 = -\phi^2$.
%
One can check that no allocation is MXS.
\end{proof}

\begin{lemma}[MMS is infeasible]
\label{cex:mms-supmod-goods}
Let $0 \le a < b$. Let $([2], [4], (v_i)_{i=1}^2, \eqEnt)$ be a fair division instance
where $v_1(S) = |S|a + (b-a)(\boolone(S \supseteq \{1, 2\}) + \boolone(S \supseteq \{3, 4\}))$
and $v_2(S) = |S|a + (b-a)(\boolone(S \supseteq \{1, 3\}) + \boolone(S \supseteq \{2, 4\}))$.
Then $v_1$ and $v_2$ are supermodular, and no MMS allocation exists.
In fact, the best multiplicative approximation to the MMS one can achieve is $2a/(a+b)$.
\end{lemma}
\begin{proof}
Each agent has MMS $a+b$.
The only way agent 1 can receive her MMS is if she receives a superset of $\{1, 2\}$ or $\{3, 4\}$.
The only way agent 2 can receive her MMS is if she receives a superset of $\{1, 3\}$ or $\{2, 4\}$.
Hence, some agent doesn't get her MMS. In fact, some agent gets a bundle of value at most $2a$.
One can check that $v_1$ and $v_2$ are supermodular by painstakingly comparing all marginal values.
\end{proof}

\begin{lemma}[MMS is infeasible]
\label{cex:mms-supmod-chores}
Let $0 \le a < b$. Let $([2], [4], (v_i)_{i=1}^2, \eqEnt)$ be a fair division instance
where $-v_1(S) = |S|b - (b-a)(\boolone(S \supseteq \{1, 2\}) + \boolone(S \supseteq \{3, 4\}))$
and $-v_2(S) = |S|b - (b-a)(\boolone(S \supseteq \{1, 3\}) + \boolone(S \supseteq \{2, 4\}))$.
Then $v_1$ and $v_2$ are supermodular, and no MMS allocation exists.
In fact, the best multiplicative approximation to the MMS one can achieve is $2b/(a+b)$.
\end{lemma}
\begin{proof}
Each agent has MMS $-(a+b)$.
The only way agent 1 can receive her MMS is if she receives a subset of $\{1, 2\}$ or $\{3, 4\}$.
The only way agent 2 can receive her MMS is if she receives a subset of $\{1, 3\}$ or $\{2, 4\}$.
Hence, some agent doesn't get her MMS. In fact, some agent gets a bundle of disutility at least $2b$.
One can check that $v_1$ and $v_2$ are supermodular by painstakingly comparing all marginal values.
\end{proof}

\section{Implicit Representation of Set Families}
\label{sec:fd-set-family}

\Cref{sec:cpig} introduced the concept of \emph{conditional predicate implications},
and presented an algorithm for inferring additional implications and counterexamples.
Let $\Omega$, called the \emph{ground set}, be the domain of predicates.
$\Omega$ is often, as in fair division, uncountably infinite.
This raises the question: how do we represent sets that implications and counterexamples
are conditioned on, for the purpose of computation?
\Cref{sec:cpig} briefly mentioned how to handle this:
define a finite set family $\Fcal \subseteq 2^{\Omega}$ that is represented implicitly,
and have all implications and counterexamples be conditioned on sets from $\Fcal$.
Moreover, given any $S, T \in \Fcal$, we need an efficient algorithm to
check if $S \subseteq T$.
But what do we mean by implicit representation?
And how do we implicitly represent $\Omega$ for the fair division problem?
In this section, we give precise answers to these questions.

\subsection{Representing Set Families as Mappings from Partial Orders}

\begin{definition}
\label{defn:set-family-repr}
A set family $\Fcal \subseteq 2^{\Omega}$ is \emph{represented by} a partial order $(P, \preceq)$
if there exists an order-preserving surjective mapping $f: P \to \Fcal$,
i.e., for all $S \in \Fcal$, there exists $x \in P$ such that $f(x) = S$,
and for all $x, y \in P$, we have $x \preceq y \implies f(x) \subseteq f(y)$.
\end{definition}

Note that the converse is not required to be true, i.e.,
$f(x) \subseteq f(y)$ need not imply $x \preceq y$.
Hence, if $P$ is an antichain, then $P$ trivially represents $\Fcal$.
However, such a representation is useless.
The more a representation captures the subset relations in $\Fcal$,
the better that representation is.

\begin{example}
Let $E$ be the set of even integers, i.e., $E \defeq \{2i: i \in \mathbb{Z}\}$,
and let $O$ be the set of odd integers, i.e., $O \defeq \{2i+1: i \in \mathbb{Z}\}$.
Then the set family $\Fcal \defeq \{E, O, \mathbb{Z}\}$ can be represented by
the partial order $(\{e, o, a\}, \{e \preceq e, a \preceq a, o \preceq o, e \preceq a, o \preceq a\})$,
where the corresponding mapping $f$ is given by $f(e) = E$, $f(o) = O$, and $f(a) = \mathbb{Z}$.
\end{example}

Hence, for the conditional predicate implication problem,
if we can represent a set family $\Fcal \subseteq 2^{\Omega}$
by a finite partial order $(P, \preceq)$,
then we can indirectly specify the sets that implications and counterexamples
are conditioned on by elements in $P$.
In fact, for computation, we don't even need to know the set $\Fcal$ and the mapping $f$;
we can just work with elements in $P$ instead.
In the algorithm for inferring additional implications and counterexamples,
we perform several checks of the form $S \subseteq T$, where $S, T \in \Fcal$.
We replace them with checks of the form $x \preceq y$, where $f(x) = S$ and $f(y) = T$.

\subsection{Partial Order for Fair Division Settings}

\Cref{sec:cpig} mentioned that to apply the conditional predicate implication framework
to the fair division problem, we let $\Omega$ be the set of all pairs $(\Ical, A)$,
where $\Ical$ is a fair division instance and $A$ is an allocation for $\Ical$.
We want our family $\Fcal \subseteq 2^{\Omega}$ to represent fair division settings.
Hence, we represent each set in $\Fcal$ by a 5-tuple, as specified in \cref{sec:settings}.
We now explain how to define a partial order on these 5-tuples,
and how to map each 5-tuple to a subset of $\Omega$.

\begin{definition}[Product order]
Let $((P_i, \preceq_i))_{i=1}^k$ be a sequence of partial orders.
Their \emph{product} is another partial order $(P, \preceq)$, where
$P \defeq \prod_{i=1}^k P_i \defeq \{(p_i)_{i=1}^k: p_j \in P_j \forall j \in [k]\}$
and $(p_1, \ldots, p_k) \preceq (q_1, \ldots, q_k)$ iff $p_i \preceq_i q_i$ for all $i \in [k]$.
\end{definition}

\begin{example}
The product of $(\mathbb{N}, \le)$ with itself is $(\mathbb{N}^2, \preceq)$,
where $(a_1, a_2) \preceq (b_1, b_2)$ iff $a_1 \le a_2$ and $b_1 \le b_2$.
\end{example}

\begin{figure*}[!htb]
\centering
\begin{subfigure}{0.4\textwidth}
    \centering
    \includegraphics[scale=0.65]{figs/valuation.pdf}
    \caption{Valuation function type}
\end{subfigure}
\hfill
\begin{subfigure}{0.59\textwidth}
    \centering
    \includegraphics[scale=0.65]{figs/marginal.pdf}
    \caption{Marginal values}
\end{subfigure}
\caption[Hasse diagrams of valuation function type and marginal values]{%
Partial orders for valuation function type and marginal values represented as \emph{Hasse diagrams},
i.e., for a DAG $G = (V, E)$, the corresponding partial order is $(V, \preceq)$,
where $u \preceq v$ iff there is a path from $u$ to $v$ in $G$.}
\label{fig:dag-posets}
\end{figure*}

Recall the 5 features of fair division from \cref{sec:settings}:
whether entitlements are equal,
whether there are only two agents,
whether agents have identical valuations,
valuation function type,
and marginal values.
%
We define a partial order for each of these 5 features.
The first three features are represented by the \emph{boolean} partial order:
$(\{\mathrm{true}, \mathrm{unknown}\}, \{\mathrm{true} \preceq \mathrm{unknown}, \mathrm{true} \preceq \mathrm{true}, \mathrm{unknown} \preceq \mathrm{unknown}\})$.
The partial orders for the last two features are given by \cref{fig:dag-posets}.
Let $(P, \preceq)$ be the product of these 5 partial orders.
%
For a fair division setting $s \in P$, let
$f(s) \defeq \{(\Ical, A): \Ical$ is an instance consistent with $s$,
$A$ is an allocation for $\Ical\}$, and $\Fcal \defeq \{f(s): s \in P\}$.
It is easy to check that $f$ is order-preserving and surjective.
This completes our description of how to map fair division settings to subsets of $\Omega$.

Note that $f$ is not injective. The settings
$s_1 \defeq (\mathrm{unknown}, \mathrm{unknown}, \mathrm{true}, \mathrm{additive}, \{1\})$
and $s_2 \defeq (\mathrm{unknown}, \mathrm{unknown}, \mathrm{unknown}, \mathrm{general}, \{1\})$
map to the same set in $\Fcal$, because if
each item's marginal value is 1, then valuations are identical and additive.
Querying the inference engine with $s_2$
may fail to infer implications that rely on additivity or identical valuations.
Note that $s_1 \preceq s_2$.
Among equivalent settings, querying the inference engine with a minimal setting
gives the most informative results, provided that counterexamples fed to the engine
are also conditioned on minimal settings.

\newpage
\section{Collection of Impliction DAGs}
\label{sec:dags}

\begin{figure*}[!htb]
\centering
\includegraphics[scale=0.8]{dags/additive-general-nny.pdf}
\caption{Additive valuations, mixed manna, equal entitlements.}
\label{fig:additive-general-nny}
\end{figure*}

\begin{figure*}[!htb]
\centering
\includegraphics[scale=0.8]{dags/additive-nonneg-nnn.pdf}
\caption{Additive valuations, goods, unequal entitlements.}
\label{fig:additive-nonneg-nnn}
\end{figure*}

\begin{figure*}[!htb]
\centering
\includegraphics[scale=0.8]{dags/additive-tribool-nny.pdf}
\caption{Additive valuations, marginals in $\{-1, 0, 1\}$, equal entitlements.
We get the same DAG when marginals are in $\{0, -1\}$ or $\{0, 1\}$.}
\label{fig:additive-tribool-nny}
\end{figure*}

\begin{figure*}[!htb]
\centering
\includegraphics[scale=0.8]{dags/additive-nonneg-nyn.pdf}
\caption{Additive valuations, goods, two agents, unequal entitlements.}
\label{fig:additive-nonneg-nyn}
\end{figure*}

\begin{figure*}[!htb]
\centering
\includegraphics[scale=0.8]{dags/additive-general-nyy.pdf}
\caption{Additive valuations, two agents, equal entitlements.
We get the same DAG for goods, chores, and mixed manna.}
\label{fig:additive-general-nyy}
\end{figure*}

\end{document}

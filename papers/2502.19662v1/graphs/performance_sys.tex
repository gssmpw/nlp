\begin{tikzpicture}
\begin{groupplot}[
  group style={
    group name=my plots,
    group size=1 by 1,
    xlabels at=edge bottom,
    xticklabels at=edge bottom,
    vertical sep=7pt
  },
  xtick=data,
  x tick label style={font=\scriptsize,rotate=45,text height=3pt]},
  xticklabels from table={graphs/data/performance_sys.data}{Model},
  legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
]

\nextgroupplot[
  width=\columnwidth, height=3.2cm,
  label style={align=center},
  ylabel={Normalized\\execution time},
  bar width=3.5pt,
  ybar=0pt,
  ymin=0,
  typeset ticklabels with strut,
  legend columns=4,
  legend style={at={(0.5,-1.3,1.15)}, anchor=south},
]

% Plotting each baseline and HALO
\addplot[fill=darkgoldenrod, postaction={pattern=north west lines}]
table[
  x expr = \coordindex,
  y = FP16,
]{graphs/data/performance_sys.data};
\addlegendentry{\em FP16}

\addplot[fill=asparagus, postaction={pattern=north east lines}]
table[
  x expr = \coordindex,
  y = INT8(W8/A8),
]{graphs/data/performance_sys.data};
\addlegendentry{\em W8A8}

\addplot[fill=lightgray, postaction={pattern=grid}]
table[
  x expr = \coordindex,
  y = INT4(W4/A8),
]{graphs/data/performance_sys.data};
\addlegendentry{\em W4A8}

\addplot[fill=lightblue, postaction={pattern=crosshatch}]
table[
  x expr = \coordindex,
  y = INT3(W3/A8),
]{graphs/data/performance_sys.data};
\addlegendentry{\em W3A8}

\addplot[fill=teal, postaction={pattern=dots}]
table[
  x expr = \coordindex,
  y = SystolicX_perf,
]{graphs/data/performance_sys.data};
\addlegendentry{\em HALO(perf-opt)}

\addplot[fill=purple, postaction={pattern=horizontal lines}]
table[
  x expr = \coordindex,
  y = SystolicX_acc,
]{graphs/data/performance_sys.data};
\addlegendentry{\em HALO(acc-opt)}

\addplot[fill=orange, postaction={pattern=crosshatch}]
table[
  x expr = \coordindex,
  y = SystolicX_bal,
]{graphs/data/performance_sys.data};
\addlegendentry{\em HALO(bal)}

\end{groupplot}

\end{tikzpicture}

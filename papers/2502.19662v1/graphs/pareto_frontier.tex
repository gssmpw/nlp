%\documentclass{standalone}
%\usepackage{pgfplots}
\pgfplotsset{compat=1.17}
\usepgfplotslibrary{groupplots} % Import the groupplots library

\begin{tikzpicture}
\begin{groupplot}[
    group style={
        group name=my plots,
        group size=2 by 2,
        xlabels at=edge bottom,
        ylabels at=edge left,
        horizontal sep=0.8cm,
        vertical sep=0.7cm
    },
    width=5cm, height=3cm,
    legend pos=north west,
    legend cell align={left},
    % legend style={fill=white, draw=gray!50, font=\small},
    legend style={font=\small, at={(-0.8,-0.6,-0.2)},anchor=north west,legend columns=3},
    grid=both,
    xtick={1.0, 1.1, 1.2, 1.3, 1.4}, % Set uniform x-axis ticks
    x label style={font=\small},
    y label style={font=\small}
]

% First Plot
\nextgroupplot[
    % xlabel={\scriptsize{Normalized Performance} 1},
    ylabel={\scriptsize{Perplexity}},
    xmin=1.0, xmax=1.5,
    ymin=5.94, ymax=6.4,
    title={Plot 1: Llama-2 7b},
    title style={yshift=-2ex} % Adjust yshift to control title distance
]
\begin{comment}
\addplot[
    only marks,
    mark=*,
    mark size=2pt,
    color=blue,
] coordinates {
    (1.0, 9.75) (1.05, 9.78) (1.1, 9.79) (1.15, 9.84) (1.2, 9.85) (1.25, 9.88) (1.3, 9.9) (1.35, 9.92) (1.4, 9.94)
};
%\addlegendentry{All points}
\end{comment}

\addplot[
    color=indianred,
    mark=*,
    mark options={fill=indianred},
    line width=1pt
] table[x=llama_7_x, y=llama_7_y] {graphs/data/pareto_frontier.data};
%\addlegendentry{Pareto front}

\addplot[
    only marks,
    mark=*,
    mark size=3pt,
    color=darkolivegreen,
    fill=darkolivegreen
] coordinates {
    (1.053911243,6.013976097)
};
%\addlegendentry{Knee point}

% Arrows and labels for points
%\draw[->, thick] (my plots c1r1.north west) ++(1,9.8) -- ++(1.1,9.6) node[anchor=north east] {Point 1};

% Second Plot
\nextgroupplot[
    % xlabel={\scriptsize{Normalized Performance} 2},
    % ylabel={Accuracy (higher is better)},
    xmin=1.0, xmax=1.45,
    ymin=5.2, ymax=5.5,
    title={Plot 2: Llama-2 13b},
    title style={yshift=-2ex} % Adjust yshift to control title distance
]
\begin{comment}
\addplot[
    only marks,
    mark=*,
    mark size=2pt,
    color=blue,
] coordinates {
    (1.0, 75) (1.05, 78) (1.1, 79) (1.15, 84) (1.2, 85) (1.25, 88) (1.3, 90) (1.35, 92) (1.4, 94)
};
\end{comment}
%\addlegendentry{All points}

\addplot[
    color=indianred,
    mark=*,
    mark options={fill=indianred},
    line width=1pt
] table[x=llama_13_x, y=llama_13_y] {graphs/data/pareto_frontier.data};
%\addlegendentry{Pareto front}

\addplot[
    only marks,
    mark=*,
    mark size=3pt,
    color=darkolivegreen,
    fill=darkolivegreen
] coordinates {
    (1.4219069335851982, 5.445988655)
};
%\addlegendentry{Knee point}

% Third Plot
\nextgroupplot[
    xlabel={\scriptsize{Normalized Performance}},
    ylabel={\scriptsize{Perplexity}},
    xmin=1.0, xmax=1.43,
    ymin=11.1, ymax=11.6,
    title={Plot 3: OPT 1.3b},
    title style={yshift=-2ex} % Adjust yshift to control title distance
]
\begin{comment}
\addplot[
    only marks,
    mark=*,
    mark size=2pt,
    color=blue,
] coordinates {
    (1.0, 50) (1.05, 48) (1.1, 47) (1.15, 46) (1.2, 45) (1.25, 44) (1.3, 43) (1.35, 42) (1.4, 41)
};
\end{comment}
%\addlegendentry{All points}

\addplot[
    color=indianred,
    mark=*,
    mark options={fill=indianred},
    line width=1pt
] table[x=opt_6_7_x, y=opt_6_7_y] {graphs/data/pareto_frontier.data};
%\addlegendentry{Pareto front}

\addplot[
    only marks,
    mark=*,
    mark size=3pt,
    color=darkolivegreen,
    fill=darkolivegreen
] coordinates {
    (1.169621678, 11.294034)
};
%\addlegendentry{Knee point}

% Fourth Plot
\nextgroupplot[
    xlabel={\scriptsize{Normalized Performance}},
    % ylabel={Energy Efficiency (higher is better)},
    xmin=1.0, xmax=1.42,
    ymin=10.55, ymax=10.85,
    title={Plot 4: OPT 2.7b},
    title style={yshift=-2ex} % Adjust yshift to control title distance
]
\begin{comment}
\addplot[
    only marks,
    mark=*,
    mark size=2pt,
    color=blue,
] coordinates {
    (1.0, 10) (1.05, 12) (1.1, 13) (1.15, 14) (1.2, 15) (1.25, 16) (1.3, 17) (1.35, 18) (1.4, 19)
};
\end{comment}
%\addlegendentry{All points}

\addplot[
    color=indianred,
    mark=*,
    mark options={fill=indianred},
    line width=1pt
]  table[x=opt_13_x, y=opt_13_y] {graphs/data/pareto_frontier.data};
\addlegendentry{Pareto-front}

\addplot[
    only marks,
    mark=*,
    mark size=3pt,
    color=darkolivegreen,
    fill=darkolivegreen
] coordinates {
    (1.108324123, 10.65611744)
};
\addlegendentry{Knee point}

\end{groupplot}
\end{tikzpicture}


\section{P6\&9: Thanksgiving Dinner With and Without Update}

This appendix presents an implementation of the P6 and P9: Thanksgiving Dinner Problem Without and With Disruption using LangGraph~\cite{langgraph2024}. 
\subsection{Prompt and Collaborative Agent Pipeline}

\begin{lstlisting}[style=PythonStyle, caption=Prompt and Collaborative Agent Pipeline, label=lst:agent_pipeline]
with Crew() as crew:
    # ---- Member & Time Setup Agent ---- #
    MT_Agent = Agent(
        name="Member & Time Setup Agent",
        backstory="You track family members' arrivals and ensure accurate scheduling.",
        task_description="Set up arrival times, locations, and travel durations for all family members.",
        task_expected_output="Structured schedule ensuring all members arrive on time for dinner. - Sarah(Mom):Host,athome, - James(Dad):LandsatBOS1:00PMfromSF, - Emily(Sister):LandsatBOS2:30PMfromChicago - Michael(Brother):Driving,arrives3:00PMfromNY - Grandma:NeedspickupfromsuburbanBoston"
    )
    
    # ---- Requirement Setup Agent ---- #
    RS_Agent = Agent(
        name="Requirement Setup Agent",
        backstory="You manage cooking schedules and key logistical needs.",
        task_description="Schedule turkey and side dish preparation while ensuring someone stays home for supervision.",
        task_expected_output="Optimized cooking schedule aligning with dinner timing. cooking requirements:  -Turkey:4hourscookingtime, - Sidedishes:2hourspreparation, - Someonemuststayhomeduringcooking, "
    )
    
    # ---- Constraint Validation Agent ---- #
    CV_Agent = Agent(
        name="Constraint Validation Agent",
        backstory="You verify all scheduling constraints and ensure compliance.",
        task_description="Validate that all pickups, cooking timelines, and supervision requirements are met.",
task_expected_output="A conflict-free schedule ensuring all tasks are completed efficiently.
- James must rent a car after landing,
- Emily requires airport pickup,
- Travel times:
  - Home to BOS Airport: 60min
  - BOS Airport to Grandma's: 60min
  - Home to Grandma's: 30min"
    )
    
    # ---- Supervisor Agent ---- #
    SA_Agent = Agent(
        name="Supervisor Agent",
        backstory="You oversee all logistical elements and generate the final dinner preparation report.",
        task_description="Monitor and report on key tasks, including cooking start time, Emily's pickup, and Grandma's pickup.",
        task_expected_output="Comprehensive report detailing dinner preparation logistics and arrivals. key requirement: - Allfamilymembersathomefor6:00PMdinner - Turkeyandsidesreadybydinnertime - Allpickupscompletedwithavailabledrivers - Cookingsupervisionmaintained"
    )

    Writer_agent = Agent(
        name="Writer Agent",
        backstory="You are a language model specialised in writing text into .json files",
        task_description="Write the json response into './p5_output.json'",
        task_expected_output="A .json file containing the given string",
        tools=write_str_to_txt,
    )
    
    # ---- Define Dependencies (Without Disruption)---- #
    MT_Agent >> RS_Agent >> CV_Agent >> SA_Agent >> Writer_agent

\end{lstlisting}

\subsection{Meta Plan}
\textbf{Without Real-time Search (Without Disruption):}
\begin{lstlisting}[style=JSONStyle, caption=Sample JSON Output from Agent Pipeline, label=lst:data_collection]
==================================================
RUNNING AGENT: Member & Time Setup Agent
==================================================

Structured schedule ensuring all members arrive on time for dinner. 
- Sarah(Mom): Host, at home
- James(Dad): Lands at BOS 1:00 PM from SF
- Emily(Sister): Lands at BOS 2:30 PM from Chicago
- Michael(Brother): Driving, arrives 3:00 PM from NY
- Grandma: Needs pickup from suburban Boston

==================================================
RUNNING AGENT: Requirement Setup Agent
==================================================

To ensure a smooth preparation and timely dinner, here's an optimized cooking schedule:

1. **Turkey Preparation:**
   - Start Time: 11:00 AM
   - End Time: 3:00 PM
   - Cooking Time: 4 hours

2. **Side Dishes Preparation:**
   - Start Time: 1:00 PM
   - End Time: 3:00 PM
   - Preparation Time: 2 hours

**Supervision Schedule:**
- **Sarah (Mom)** will be at home to supervise the entire cooking process from 11:00 AM onwards.

**Logistics:**
- **James (Dad)** arrives at 1:00 PM and can assist with any last-minute preparations or errands.
- **Emily (Sister)** arrives at 2:30 PM and can help with setting the table or other light tasks.
- **Michael (Brother)** arrives at 3:00 PM, just in time for dinner.
- **Grandma** requires a pickup from suburban Boston, which can be coordinated by James or Michael after their arrival.

This schedule ensures that the turkey and side dishes are ready by 3:00 PM, allowing time for any final touches before dinner.

==================================================
RUNNING AGENT: Constraint Validation Agent
==================================================

To ensure a conflict-free schedule and meet all requirements, here is the optimized plan:

1. **Travel and Pickup Schedule:**
   - **James** must rent a car after landing at the airport. He arrives at 1:00 PM, so he should rent the car immediately after landing to ensure he can assist with any last-minute preparations.
   - **Emily** requires an airport pickup. Since she arrives at 2:30 PM, James can pick her up after renting the car, as he will already be at the airport.

2. **Cooking and Supervision Schedule:**
   - **Turkey Preparation:** 11:00 AM - 3:00 PM
   - **Side Dishes Preparation:** 1:00 PM - 3:00 PM
   - **Supervision:** Sarah (Mom) will supervise the cooking from 11:00 AM onwards.

3. **Logistics and Coordination:**
   - **James** arrives at 1:00 PM and can handle any last-minute errands or assist with Emily's pickup.
   - **Emily** arrives at 2:30 PM and can help with setting the table or other light tasks upon arrival.
   - **Michael** arrives at 3:00 PM, just in time for dinner.
   - **Grandma** requires a pickup from suburban Boston. Given the travel times:
     - **Home to BOS Airport:** 60 min
     - **BOS Airport to Grandma's:** 60 min
     - **Home to Grandma's:** 30 min

   James or Michael can coordinate Grandma's pickup after their arrival. If James picks up Emily at 2:30 PM, he can then proceed to pick up Grandma, ensuring everyone is home by dinner time.

This schedule ensures all tasks are completed efficiently and all supervision and pickup requirements are met.

==================================================
RUNNING AGENT: Supervisor Agent
==================================================

Comprehensive Report on Dinner Preparation Logistics and Arrivals:

1. **Cooking Start Time and Supervision:**
   - Turkey preparation began at 11:00 AM, with side dishes starting at 1:00 PM. Both were scheduled to be completed by 3:00 PM.
   - Sarah (Mom) supervised the cooking process from 11:00 AM onwards to ensure everything was on track.

2. **Pickup and Arrival Schedule:**
   - **James** arrived at the airport at 1:00 PM and rented a car immediately. He was responsible for picking up Emily and potentially Grandma.
   - **Emily** was picked up by James at 2:30 PM from the airport. Upon arrival, she assisted with setting the table and other light tasks.
   - **Michael** arrived at 3:00 PM, just in time to join the family for dinner preparations.
   - **Grandma** required a pickup from suburban Boston. James, after picking up Emily, proceeded to pick up Grandma, ensuring they both arrived home in time for dinner.

3. **Dinner Logistics:**
   - All family members were at home by 6:00 PM for dinner.
   - The turkey and side dishes were ready by dinner time, meeting the meal preparation schedule.
   - All pickups were completed with available drivers, ensuring a smooth and timely arrival for all family members.

This report confirms that all key tasks were successfully monitored and executed, ensuring a seamless dinner preparation and family gathering.

==================================================
RUNNING AGENT: Writer Agent
==================================================


Thought: I need to write the given context as a JSON string into a file named './p6_output.json'.

Using Tool: write_str_to_txt

Tool call dict: 
{'name': 'write_str_to_txt', 'arguments': {'string_data': '{"Comprehensive Report on Dinner Preparation Logistics and Arrivals": {"Cooking Start Time and Supervision": {"Turkey preparation began": "11:00 AM", "Side dishes starting": "1:00 PM", "Scheduled completion": "3:00 PM", "Supervised by": "Sarah (Mom) from 11:00 AM"}, "Pickup and Arrival Schedule": {"James": "Arrived at airport at 1:00 PM, rented car, picked up Emily and potentially Grandma", "Emily": "Picked up by James at 2:30 PM, assisted with setting table", "Michael": "Arrived at 3:00 PM for dinner preparations", "Grandma": "Picked up by James from suburban Boston, arrived home in time for dinner"}, "Dinner Logistics": {"All family members at home by": "6:00 PM", "Turkey and side dishes ready by dinner time": true, "All pickups completed with available drivers": true}}}', 'txt_filename': './p5_output.json'}, 'id': 0}
Data successfully written to ./p6_output.json

Tool result: 
None

Observations: {0: None}
The JSON string has been successfully written to './p6_output.json'.

\end{lstlisting}

\textbf{Without Real-time Search (With Disruption):}
\begin{lstlisting}[style=JSONStyle, caption=Sample JSON Output from Agent Pipeline, label=lst:data_collection]
==================================================
RUNNING AGENT: Disruption Update Agent
==================================================

<Updated Schedule>

**Logistics:**
- James (Dad) now lands at BOS at 2:00 PM due to a flight delay. He will head home directly after landing.
- Emily (Sister) lands at BOS at 2:30 PM. She can coordinate with Michael for Grandma's pickup if needed, as James will arrive later than planned.
- Michael (Brother) arrives by car at 3:00 PM. He can assist with any last-minute errands or help at home.

**Dinner Timing:**
- Dinner is still planned to be served at 5:30 PM, allowing for a 30-minute buffer after side dishes are ready.
- All family members should aim to be home by 5:00 PM to ensure a timely dinner start. Adjustments may be needed if any further delays occur.

\end{lstlisting}

%\end{document}

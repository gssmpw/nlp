\begin{figure*}[th!]
    \centering
    \begin{tikzpicture}[
        node distance=1.5cm,
        process/.style={rectangle, draw, fill=orange!20, minimum width=2.8cm, minimum height=1cm, thick},
        data/.style={cylinder, draw, fill=blue!15, shape border rotate=90, aspect=0.2, minimum width=2.5cm, minimum height=1cm, thick},
        decision/.style={diamond, draw, fill=blue!20, minimum width=2.2cm, minimum height=1.2cm, align=center, thick},
        action/.style={rectangle, draw, rounded corners, fill=green!15, minimum width=2.5cm, minimum height=1cm, thick},
        arrow/.style={->, line width=1.5pt, blue!60}
    ]
        % Data Sources
        \node[data] (market) at (-3.6,2) {Market Data};
        \node[data] (news) at (-3.6,0.95) {News Feed};
        \node[data] (econ) at (-3.6,-.15) {Economic Data};
        
        % Processing Nodes horizontal flow
        \node[process] (collect) at (0,2) {Data Collection};
        \node[process] (feature) at (3,2) {Feature Extraction};
        \node[process] (train) at (6,2) {Model Training};
        
        % Time labels above boxes
        \node[text width=2.8cm, align=center] at (0,2.8) {$t_{refresh}=5min$};
        \node[text width=2.8cm, align=center] at (3,2.8) {$t_{process}=5min$};
        
        % Validation and Prediction vertical flow
        \node[decision] (trainval) at (6,0.0) {Train\\ Valid?};
        \node[process] (predict) at (6,-2.0) {Prediction};
        
        % Alert and Trade
        \node[decision] (alert) at (3,-2.0) {Accurate?};
        \node[action] (trade) at (-0.6,-2.0) {Trading Alert};
        
        % Dependencies
        \draw[arrow, orange!60] (market) -- (collect);
        \draw[arrow, orange!60] (news) -- (collect);
        \draw[arrow, orange!60] (econ) -- (collect);
        \draw[arrow] (collect) -- (feature);
        \draw[arrow] (feature) -- (train);
        \draw[arrow] (train) -- (trainval);
        
        % Validation flows
        \draw[arrow] (trainval) -- node[right] {\textbf{Yes}} (predict);
        \draw[arrow, purple!60] (trainval.west) -- ++(-3,0) -- node[left] {\textbf{No}} (collect.south);
        
        % Real-time Flows
        \draw[arrow] (predict) -- (alert);
        \draw[arrow, blue!60] (feature) -- (alert);
        \draw[arrow] (alert) -- node[above] {\textbf{Yes}} (trade);
        \draw[arrow, purple!60] (alert.west) -- node[left] {\textbf{No}} (collect.south);
        
    \end{tikzpicture}
    \caption{Stock Market Prediction Workflow with Validation Loops. Two decision points validate: 1) model accuracy on testing data, and 2) real-time prediction accuracy for trading notifications.}
    \label{fig:P11workflow}
%    \vspace{.1in}
\end{figure*}


\noindent \textbf{Problem Specification:}

\noindent \underline{\textit{Setup:}}
\begin{itemize}[leftmargin=1.2em, topsep=-.0em, parsep=-.0em, label=*]
   \item \textit{Objective:} Predict a portfolio of stock prices for time \(\tau\), enabling actionable insights for risk management, investment decisions, and automated trading.
   \item \textit{Historical Data:}
   \begin{itemize}[leftmargin=1em, topsep=-.1em, parsep=-.1em]
       \item Training period: 2010--2020.
       \item Validation period: 2021--2023.
       \item Real-time data feed required during operation.
   \end{itemize}
   \item \textit{Data Sources:} Yahoo Finance, SEC EDGAR, news feeds, macroeconomic indicators.
   \item \textit{Required Features:}
   \begin{itemize}[leftmargin=1em, topsep=-.1em, parsep=-.1em]
       \item \textit{Technical Indicators:} MA, MACD, RSI, Bollinger Bands.
       \item \textit{Market Context:} Sector indices, competitor stock performance, correlation metrics.
       \item \textit{External Events:} Economic reports, policy changes, earnings announcements.
       \item \textit{Sentiment Analysis:} Real-time news, social media, financial disclosures.
   \end{itemize}
\end{itemize}

\noindent \underline{\textit{Constraints:}}
\begin{itemize}[leftmargin=1.5em, topsep=-.15em, parsep=-.15em, label=*]
   \item \textit{Processing latency:} Under 5 minutes for real-time predictions.
   \item \textit{Prediction confidence interval:} 95\% confidence bounds required.
   \item \textit{Model Dependencies:} 
   \begin{itemize}[leftmargin=1em, topsep=-.1em, parsep=-.1em]
       \item Data collection before feature extraction.
       \item Feature extraction before model training.
       \item Model training before prediction generation.
   \end{itemize}
   \item \textit{Performance Requirements:}
   \begin{itemize}[leftmargin=1em, topsep=-.1em, parsep=-.1em]
       \item Mean Absolute Percentage Error (MAPE) $<$ 5\% on validation.
       \item False alert rate $<$ 1\%.
       \item System uptime $>$ 99.9\% during market hours.
   \end{itemize}
\end{itemize}

\noindent \underline{\textit{State Space:}}
\begin{itemize}[leftmargin=1.5em, topsep=-.1em, parsep=-.1em, label=*]
    \item \textit{Processing Nodes ($V$):}
    \begin{itemize}[leftmargin=1em, topsep=-.1em, parsep=-.1em]
        \item Data Nodes: DC (data collection), FE (feature extraction).
        \item Model Nodes: MT (model training), PG (prediction generation).
        \item Integration Nodes: IG (integration), AG (alert generation).
    \end{itemize}
    \item \textit{Dependencies ($E$):}
    \begin{itemize}[leftmargin=1em, topsep=-.1em, parsep=-.1em]
        \item Pipeline: $DC \rightarrow FE \rightarrow MT \rightarrow PG \rightarrow AG$.
        \item Feedback: $AG \rightarrow DC$ for adaptive updates.
        \item External: Market events affect all nodes.
    \end{itemize}
\end{itemize}

\noindent \underline{\textit{Market Regime Adaptation:}}
\begin{itemize}[leftmargin=1.5em, topsep=-.1em, parsep=-.1em, label=*]
   \item Detect shifts in volatility, liquidity, and trend strength.
   \item Adjust prediction models based on regime detection.
   \item Implement fallback strategies for extreme market shifts.
\end{itemize}

\noindent \underline{\textit{Adaptive Refresh Rates:}}
\begin{itemize}[leftmargin=1.5em, topsep=-.1em, parsep=-.1em, label=*]
   \item \(t_{\text{Drefresh}}\) (data collection) adjusts based on market volatility.
   \item \(t_{\text{Nrefresh}}\) (news updates) increases during high-impact events.
\end{itemize}

\noindent \underline{\textit{Decision Module:}}
\begin{itemize}[leftmargin=1.5em, topsep=-.1em, parsep=-.1em, label=*]
   \item \textit{Trading Strategy:} Buy/sell signals, stop losses, risk thresholds.
   \item \textit{Risk Assessment:} Hedging, diversification, leverage constraints.
   \item \textit{Dynamic Adjustment:} Rebalancing frequency, asset weighting, market response.
\end{itemize}

\noindent \underline{\textit{Backtesting and Iterative Validation:}}
\begin{itemize}[leftmargin=1.5em, topsep=-.1em, parsep=-.1em, label=*]
   \item Run models on historical data to evaluate predictive accuracy.
   \item Compare performance on different market regimes/conditions.
   \item Adjust hyperparameters based on validation results.
\end{itemize}

\begin{table}[th!]
\centering
\caption{Stock Market Prediction Problem Framework}
%\vspace{-.1in}
\begin{small}
\renewcommand{\arraystretch}{1.1}
\fbox{
\begin{minipage}{0.45\textwidth}
\textbf{Network Structure:} $G=(V,E)$ where $V$ represents processing nodes and $E$ represents data flows

\textbf{Processing Nodes ($V$):}
\begin{itemize}[leftmargin=1em, topsep=-.1pt, itemsep=-.1pt, label=-]
\item Data nodes: DC (data collection), FE (feature extraction)
\item Model nodes: MT (model training), PG (prediction generation)
\item Integration nodes: IG (integration), AG (alert generation)
\end{itemize}

\textbf{Dependencies ($E$):}
\begin{itemize}[leftmargin=1em, topsep=-.1pt, itemsep=-.1pt, label=-]
\item Technical Analysis: $DC \rightarrow FE \rightarrow MT$
\item Market Context: External events affect all nodes
\item Model Chain: $MT \rightarrow PG \rightarrow AG$
\item Feedback Loop: $AG \rightarrow DC$ for adaptive updates
\end{itemize}

\textbf{Data Requirements:}
\begin{itemize}[leftmargin=1em, topsep=-.1pt, itemsep=-.1pt, label=-]
\item Historical: Training (2010--2020), Validation (2021--2023)
\item Technical Indicators: MA, BB, MACD, RSI, ATR, OBV
\item Price Data: OHLCV with adjustments
\item External: Policy, economic indices, news sentiment
\end{itemize}

\textbf{System Parameters:}
\[
\begin{aligned}
t_{refresh} &= 5 \text{ min}, \text{conf}_{interval} = 95\% \\
\text{MAPE} &< 5\%, \text{uptime} = 99.9\%
\end{aligned}
\]

\textbf{Workflow Stages:}
\begin{itemize}[leftmargin=1em, topsep=-.1pt, itemsep=-.1pt, label=-]
\item Stage 1: Data Collection \& Feature Extraction
\item Stage 2: Model Training \& Validation
\item Stage 3: Prediction Generation
\item Stage 4: Alert \& Decision Support
\item Stage 5: Iterative Refinement
\end{itemize}

\textbf{Dynamic Adaptations:}
\begin{itemize}[leftmargin=1em, topsep=-.1pt, itemsep=-.1pt, label=-]
\item Market regime shifts trigger model updates
\item News events modify prediction weights
\item Volatility affects refresh rates
\item Anomalies initiate retraining cycles
\end{itemize}

\textbf{Performance Metrics:}
\begin{itemize}[leftmargin=1em, topsep=-.1pt, itemsep=-.1pt, label=-]
\item Prediction accuracy (RMSE, MAPE)
\item System responsiveness (latency)
\item Alert precision (false positive rate)
\item Model adaptability (regime changes)
\end{itemize}
\end{minipage}
}
\end{small}
\label{tab:StockPrediction}
\end{table}


\begin{comment}
\input{ProblemSP}
\input{MLLAP-metaplan}
\end{comment}

    \begin{tikzpicture}

    % TIA
    \begin{axis}[
        width=\columnwidth,, height=3.4cm,
        ybar stacked,
        bar width=0.2,
        ymin=0,
        ymax=2.1,
        ylabel={Normalized \# of cycles},
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/performance_tia.data}{Kernel}, xticklabel style={rotate=45}
    ]


    \addplot [fill=blizzardblue, postaction={pattern=grid}]
    table[
        x expr = \coordindex,
        y = Compute,
        ]{graphs/data/performance_tia.data};
    
    \addplot [fill=blizzardblue, postaction={pattern=north west lines}]
    table[
        x expr = \coordindex,
        y = Memory,
        ]{graphs/data/performance_tia.data};
    
    \addplot [fill=blizzardblue, postaction={pattern=crosshatch dots}]
    table[
        x expr = \coordindex,
        y = Stalls,
        ]{graphs/data/performance_tia.data};


    \end{axis}

    % Nexus
    \begin{axis}[bar shift=+4.8pt,
        hide axis,
        width=\columnwidth,, height=3.4cm,
        ybar stacked,
        bar width=0.2,
        ymin=0,
        ymax=2.1,
        ylabel={Total network Congestion (in \%)},
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/performance_nexus1.data}{Kernel}, xticklabel style={rotate=45}
    ]


    \addplot [fill=asparagus, postaction={pattern=grid}]
    table[
        x expr = \coordindex,
        y = Compute,
        ]{graphs/data/performance_nexus1.data};
    
    \addplot [fill=asparagus, postaction={pattern=north west lines}]
    table[
        x expr = \coordindex,
        y = Memory,
        ]{graphs/data/performance_nexus1.data};
    
    \addplot [fill=asparagus, postaction={pattern=crosshatch dots}]
    table[
        x expr = \coordindex,
        y = Stalls,
        ]{graphs/data/performance_nexus1.data};

    \end{axis}

    % Static
    \begin{axis}[bar shift=-4.8pt,
        hide axis,
        width=\columnwidth,, height=3.4cm,
        ybar stacked,
        bar width=0.2,
        ymin=0,
        ymax=2.1,
        ylabel={Total network Congestion (in \%)},
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/performance_static.data}{Kernel},
    ]

    \addplot [fill=darkgoldenrod]
    table[
        x expr = \coordindex,
        y = Compute,
        ]{graphs/data/performance_static.data};
    
    \addplot [fill=blizzardblue, postaction={pattern=grid}]
    table[
        x expr = \coordindex,
        y = Memory,
        ]{graphs/data/performance_static.data};
    
    \addplot [fill=asparagus, postaction={pattern=grid}]
    table[
        x expr = \coordindex,
        y = Stalls,
        ]{graphs/data/performance_static.data};

    \end{axis}

    % Legend
    \begin{axis}[hide axis,
        width=\columnwidth,, height=3.4cm,
        ybar stacked,
        ymin=0,
        ymax=40,
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/performance_tia.data}{Kernel},
    ]
    
    \addplot [pattern=crosshatch dots]
    table[
        x expr = \coordindex,
        y = Extra,
        ]{graphs/data/performance_tia.data};
    \addlegendentry{\em Stalls};
    
    % \addplot [pattern=grid]
    % table[
    %     x expr = \coordindex,
    %     y = Extra,
    %     ]{graphs/data/performance_tia.data};
    % \addlegendentry{\em Memory};
    
    \addplot [pattern=grid]
    table[
        x expr = \coordindex,
        y = Extra,
        ]{graphs/data/performance_tia.data};
    \addlegendentry{\em Compute};
    \end{axis}


    % CGRA legend
    \begin{axis}[hide axis,
        width=\columnwidth, height=3.4cm,
        ybar stacked,
        ymin=0,
        ymax=40,
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,-0.9,1.15)}, anchor=south, font=\scriptsize},
        xticklabels from table={graphs/data/performance_tia.data}{Kernel},
    ]
    \addplot [fill=darkgoldenrod]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/performance_tia.data};
    \addlegendentry{\em Generic CGRA};

    \addplot [fill=blizzardblue]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/performance_tia.data};
    \addlegendentry{\em TIA-like};

    \addplot [fill=asparagus]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/performance_tia.data};
    \addlegendentry{\em Nexus Machine};

    \end{axis}

\end{tikzpicture}
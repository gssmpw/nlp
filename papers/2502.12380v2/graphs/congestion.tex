    \begin{tikzpicture}

    % TIA
    \begin{axis}[bar shift=-2.9pt,
        width=\columnwidth,, height=3cm,
        bar width=0.3,
        ybar stacked,
        ymin=0,
        ymax=35,
        ylabel={Total network Congestion (in \%)},
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/congestion_tia.data}{Kernel},
        xticklabel style={rotate=45}
    ]
 
    \addplot [fill=blizzardblue, postaction={pattern=horizontal lines}]
    table[
        x expr = \coordindex,
        y = Local,
        ]{graphs/data/congestion_tia.data};
    
    \addplot [fill=asparagus, postaction={pattern=horizontal lines}]
    table[
        x expr = \coordindex,
        y = North,
        ]{graphs/data/congestion_tia.data};

    \addplot [fill=yellow!60, postaction={pattern=horizontal lines}]
    table[
        x expr = \coordindex,
        y = East,
        ]{graphs/data/congestion_tia.data};

    \addplot [fill=darkgoldenrod, postaction={pattern=horizontal lines}]
    table[
        x expr = \coordindex,
        y = South,
        ]{graphs/data/congestion_tia.data};

    \addplot [fill=purple!60, postaction={pattern=horizontal lines}]
    table[
        x expr = \coordindex,
        y = West,
        ]{graphs/data/congestion_tia.data};
        
    \end{axis}

    % Nexus
    \begin{axis}[bar shift=+2.9pt,
        hide axis,
        width=\columnwidth,, height=3cm,
        bar width=0.3,
        ybar stacked,
        ymin=0,
        ymax=35,
        ylabel={Total network Congestion (in \%)},
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,1.05,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/congestion_nexus.data}{Kernel},
    ]

    
    \addplot [fill=blizzardblue, postaction={pattern=north east lines}]
    table[
        x expr = \coordindex,
        y = Local,
        ]{graphs/data/congestion_nexus.data};
    
    \addplot [fill=asparagus, postaction={pattern=north east lines}]
    table[
        x expr = \coordindex,
        y = North,
        ]{graphs/data/congestion_nexus.data};

    \addplot [fill=yellow!60, postaction={pattern=north east lines}]
    table[
        x expr = \coordindex,
        y = East,
        ]{graphs/data/congestion_nexus.data};

    \addplot [fill=darkgoldenrod, postaction={pattern=north east lines}]
    table[
        x expr = \coordindex,
        y = South,
        ]{graphs/data/congestion_nexus.data};

    \addplot [fill=purple!60, postaction={pattern=north east lines}]
    table[
        x expr = \coordindex,
        y = West,
        ]{graphs/data/congestion_nexus.data};

    \end{axis}

    % Legend
    \begin{axis}[hide axis,
        width=\columnwidth,, height=3cm,
        ybar stacked,
        ymin=0,
        ymax=35,
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,0.95,1.15)}, anchor=south, font=\scriptsize},
        reverse legend=true,
        xticklabels from table={graphs/data/congestion_tia.data}{Kernel},
    ]

    \addplot [fill=purple!60]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em West};

    \addplot [fill=darkgoldenrod]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em South};

    \addplot [fill=yellow!60]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em East};

    \addplot [fill=asparagus]
    table[
        x expr = \coordindex,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em North};
    
    \addplot [fill=blizzardblue]
    table[
        x expr = \coordindex,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em Local};

    \end{axis}


    % CGRA legend
    \begin{axis}[hide axis,
        width=\columnwidth,, height=3cm,
        ybar stacked,
        ymin=0,
        ymax=40,
        xtick=data,
        legend columns=4,
        legend columns=8,
        legend style={fill=white, at={(0.5,-1,1.15)}, anchor=south, font=\scriptsize},
        xticklabels from table={graphs/data/congestion_tia.data}{Kernel},
    ]
        \addplot [fill=white, postaction={pattern=horizontal lines}]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em TIA-like};

    \addplot [fill=white, postaction={pattern=north east lines}]
    table[
        x expr = 0,
        y = Extra,
        ]{graphs/data/congestion_tia.data};
    \addlegendentry{\em Nexus Machine};

    \end{axis}

\end{tikzpicture}
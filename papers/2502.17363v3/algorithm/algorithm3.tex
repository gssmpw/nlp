\begin{algorithm}[t]
\caption{Simplified Inf. version KV-Edit}
\begin{algorithmic}[1]
\State \textbf{Input:} $t_{i}$, real image $x^{src}_0$, foreground $z^{fg}_{t_{i}}$,foreground region $mask$, KV cache $C$
\State \textbf{Output:} Prediction vector $V^{fg}_{\theta t_{i}}$
\State $N_{t_{i}}\sim\mathcal{N}(0,1)$
\State $x^{src}_{t_i} =(1-t_i)x^{src}_{t_0}+t_i N_{t_{i}}$
\State $V^{src}_{\theta t_{i}},C = \text{KV-Inverison}(x^{src}_{t_i}, t_{i},C)$
\State $\widetilde{z}^{fg}_{t_{i}} = z^{fg}_{t_{i}}+mask\cdot(x^{src}_{t_i}-x^{src}_0)$
\State $\widetilde{V}^{fg}_{\theta t_{i}},C = \text{KV-Denosing}(\widetilde{z}^{fg}_{t_{i}}, t_{i},C)$
\State \textbf{Return} $V^{fg}_{\theta t_{i}} = \widetilde{V}^{fg}_{\theta t_{i}} - V^{src}_{\theta t_{i}}$
\end{algorithmic}
\label{algorithm:algorithm3}
\end{algorithm}

\begin{figure}[hbtp]
  \centering
  \subfigure[Allocation-only workload: $2^{28}$ allocations of 64 bytes.]{
    \label{fig:allocator-alloc--runtime}
    \includegraphics[width=0.98\linewidth]{out/allocator-alloc-runtime.pdf}
  }
  \subfigure[Deallocation-only workload: $2^{28}$ deallocations of allocated memory.]{
    \label{fig:allocator-free--runtime}
    \includegraphics[width=0.98\linewidth]{out/allocator-free-runtime.pdf}
  }
  \subfigure[Mixed workload: $2^{22}$ allocations and $2^{22}$ deallocations, $64$ times.]{
    \label{fig:allocator-mixed--runtime}
    \includegraphics[width=0.98\linewidth]{out/allocator-mixed-runtime.pdf}
  } \\[-2ex]
  \caption{Relative Runtime of memory allocators across three workloads: \textit{(a)} \textit{allocation-only}, where $2^{28}$ allocations of $64$ bytes each are performed; \textit{(b)} \textit{deallocation-only}, with $2^{28}$ deallocations; and \textit{(c)} mixed, with $2^{22}$ allocations followed by $2^{22}$ deallocations, repeated $64$ times. The allocators include the C library allocator ($malloc()/free()$), C++ runtime allocator ($new[]/delete[]$), Fixed Arena Allocator (FAA), variable-capacity Arena Allocator (AA), and Concurrent Power-of-2 Arena Allocator (CP2AA). Details on FAA, AA, and CP2AA allocators is given in Section \ref{sec:memory-allocators}.}
  \label{fig:allocator-runtime}
\end{figure}
% This is actually three separate experiments, which aim the measure the performance of memory allocators in different scenarios/workloads. In the first experiment, we consider an allocation-only workload, where each allocator is stress tested with repeated memory allocations ($2^28$ allocations in total) of each $64$ bytes, and the total time taken to do so is measured. The allocated memory addresses in this case are stored in an array. In the second experiment, we consider an deallocation-only workload, where each allocator is now tested with repeated memory deallocations (of the memory addresses obtained from the first experiment), and the total time taken to do so is measured. Finally, in the third experiment, we consider a mixed workload, which consists of $2^22$ allocations, followed by $2^22$ deallocations, both of which are repeated $64$ times. In all experiments, the performance of C library allocator ($malloc()/free()$), C++ runtime allocators ($new[]/delete[]$), Fixed Arena Allocator (FAA), variable-capacity Arena Allocator (AA), and Concurrent Power-of-2 Arena Allocator (CP2AA). The above figure shows the relative runtime of each of the allocators in each of the three scenarios/experiments.
% Allocation-only workload: Total runtime of $2^{28}$ allocations of 64 bytes for each allocator.
% Deallocation-only workload: Total runtime of $2^{28}$ deallocations, using the addresses from the allocation experiment, for each allocator.
% Mixed workload: Total runtime for $2^{22}$ allocations followed by $2^{22}$ deallocations, repeated 64 times for each allocator.

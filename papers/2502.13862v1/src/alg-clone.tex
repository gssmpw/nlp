\begin{algorithm}[hbtp]
\caption{Create a deep-copy of a graph.}
\label{alg:clone}
\begin{algorithmic}[1]
\Require{$G(V, E)$: Input graph}
\Require{$G'(V', E')$: Cloned graph}

\Statex

\Function{cloneGraph}{$G$}
  \State $G' \gets \{\}$ \label{alg:clone--init}
  \State $\rhd$ Reserve space for vertices
  \State $G'.reserve(maxVertexId(G) + 1)$ \label{alg:clone--reserve-vertices}
  \State $\rhd$ Add vertices
  \ForAll{$u \in V$ \textbf{in parallel}} \label{alg:clone--add-vertices-begin}
    \State $G'.addVertex(u)$
  \EndFor \label{alg:clone--add-vertices-end}
  \State $\rhd$ Reserve space for edges
  \ForAll{$u \in V$ \textbf{in parallel}} \label{alg:clone--reserve-edges-begin}
    \State $G'.allocateEdges(u, G.degree(u))$
  \EndFor \label{alg:clone--reserve-edges-end}
  \State $\rhd$ Populate the edges
  \ForAll{$u \in V$ \textbf{in parallel}} \label{alg:clone--populate-edges-begin}
    \State $G'.edges(u) \gets G.edges(u)$
    \State $G'.degree(u) \gets G.degree(u)$
  \EndFor \label{alg:clone--populate-edges-end}
  \State $\rhd$ Update vertex and edge counts
  \If{$G.isCsr()$} $G'.update(true, false)$ \label{alg:clone--update-counts-csr}
  \Else\ $|V'| \gets |V|$ \textbf{;} $|E'| \gets |E|$ \label{alg:clone--update-counts-noncsr}
  \EndIf
  \Return{$G'$} \label{alg:clone--return}
\EndFunction
\end{algorithmic}
\end{algorithm}

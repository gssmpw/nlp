\tikzstyle{my-box}=[
	rectangle,
	draw=black, % hidden-draw,
	rounded corners,
	text opacity=1,
	minimum height=1.5em,
	minimum width=5em,
	inner sep=2pt,
	align=center,
	fill opacity=.5,
	line width=0.8pt,
]
\tikzstyle{leaf}=[my-box, minimum height=1.5em,
	text=black, align=left,font=\normalsize,
	inner xsep=10pt,
	inner ysep=4pt,
	line width=0.8pt,
]


\begin{figure*}[t]
	\centering
	\resizebox{\textwidth}{!}{
		\begin{forest}
			forked edges,
			for tree={
				grow=east,
				reversed=true,
				anchor=base west,
				parent anchor=east,
				child anchor=west,
				base=center,
				font=\large,
				rectangle,
				draw=black, % hidden-draw,
				rounded corners,
				align=left,
				text centered,
				minimum width=4em,
				edge+={darkgray, line width=1pt},
				s sep=3pt,
				inner xsep=2pt,
				inner ysep=3pt,
				line width=0.8pt,
				ver/.style={rotate=90, child anchor=north, parent anchor=south, anchor=center, minimum width=16em, fill=gray!10},
			},
			where level=1{text width=15em,font=\normalsize,fill=green!10}{},
			where level=2{text width=15em, align=left, font=\normalsize, fill=orange!10}{},
			where level=3{text width=30em}{},
			where level=4{text width=18em,font=\normalsize,}{},
			where level=5{text width=18em,font=\normalsize,}{},
			[
				\textbf{Inference Infrastructure}, ver
				% [
    %                     \textbf{Challenges Overview}
    %                     [
    %                         \textbf{High Throughput}
    %                     ]
    %                     [
    %                         \textbf{Low Latency}
    %                     ]
    %                     [
    %                         \textbf{Distributed Processing}
    %                     ]
    %                 ]
                    [
                        \textbf{Memory Optimization~(\S\ref{sec7_1})}
                        [
                            \textbf{Defragmentation}
                            [
                                \textbf{Virtual Memory on Device \& Paging Mechanisms}, leaf
                            ]
                        ]
                        [
                            \textbf{Footprint Reduction}
                            [
                                \textbf{Traditional Methods}, leaf
                            ]
                            [
                                \textbf{Fine-grained Memory Management}, leaf
                            ]
                        ]
                    ]
                    [
                        \textbf{Computation Optimization~(\S\ref{sec7_2})}
                        [
                            \textbf{System-level Optimization}
                        ]
                        [
                            \textbf{Redundancy Elimination}
                        ]
                        [
                            \textbf{KV Cache Reuse}
                            [
                                \textbf{Prefix Sharing}, leaf
                            ]
                            [
                                \textbf{Approximation Method}, leaf
                            ]
                        ]
                    ]
                    [
                        \textbf{Distributed Processing~(\S\ref{sec7_3})}
                        [
                            \textbf{Distributed Attention}
                        ]
                        [
                            \textbf{Scheduling Strategies}\\ \newline\textbf{of Inference Service}
                            [
                                \textbf{Disaggregated Inference}, leaf
                            ]
                            [
                                \textbf{Other Resource Partitioning \& Scheduling Methods}, leaf
                            ]
                        ]
                    ]
			]
		\end{forest}
	}
	\caption{An overview of inference infrastructure of long-context LLMs.}
	\label{fig:infer_infra}
\end{figure*}

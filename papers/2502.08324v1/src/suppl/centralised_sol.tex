\section{Centralised solution to the coordination problem}\label{sec:centralised_appr}

In this section, we aim at determining if a given problem instance $(\mathcal{G}_I, \mathcal{G}_C)$ admits a solution and, in case it does, we want to compute all possible solutions while identifying the optimal ones.
%\textcolor{blue}{forse conviene specificare che non Ã¨ possibile farlo in maniera decentralizzata ? }
To accomplish this, we can reformulate the problem as an integer linear programming (ILP) task and utilize widely available software such as CPLEX \footnote{https://www.ibm.com/it-it/products/ilog-cplex-optimization-studio} as solvers.
%
%Given a problem instance $(\mathcal{G}_I, \mathcal{G}_C)$, we would like to know whether it admits a solution or not and, in case it does, what are all the possible solutions and which ones are optimal. A method to achieve this goal is by reformulating it as an integer linear programming (ILP) problem and solve it by means of standard software like CPLEX. 
%
%The output of our decentralised algorithm at convergence is a solution to the problem instance being solved. A way to assess the performance of the our algorithm is to compare the value of the solution found with the value of the optimal solution to the problem being solved. A method to compute the optimal solution of a problem instance is by reformulating it as an integer linear programming (ILP) problem and solve it by means of tools like CPLEX. 
%
Such a centralised approach provides a reference for the evaluation of the decentralised solutions in our experiments, as discussed in the main text. 

%The output of our decentralised algorithm at convergence is a solution to the problem instance being solved. In order to assess the performance of the consensus procedure we must access all the solutions of the problem instance. One way to compute the entire set of solutions of a problem instance is by reformulating the rtRTMP as an integer linear programming (ILP) problem and solve it by means of a solver like CPLEX. Such an approach is no longer decentralised and serves as a baseline for our experiments in section \ref{sec:exps}. 
To define the ILP forumulation, we first introduce the mapping $\alpha : \mathcal{V}_C \mapsto \{1, \ldots, n\}$ associating to each path $d$ the index of the agent it belongs to. Then, we define the binary decision variables $y_d$ as follows:
%
\begin{equation}
\label{eq:binary}
y_d = \left\{
                \begin{array}{ll}
                  1 \quad \mbox{if $v_{\alpha(d)}=d$}     \\
                  0	\quad \mbox{otherwise}\\
                \end{array}
                 \right. \quad \forall d \in \mathcal{V}_C
\end{equation}
where the notation $v_{\alpha(d)}=d$ means that the path $d$ has been assigned to the variable $v_{\alpha(d)}$ controlled by the agent $a_{\alpha(d)}$. 
Recall also that each node $d \in \mathcal{V}_C$ has a value $u(d)$. 
Then, the centralized optimization problem consists in finding the appropriate complete assignment of paths to maximise the following objective function: 
%
\begin{equation}\label{eq:objective}
\max\sum_{d \in \mathcal{V}_C} u(d) \ y_d 
\end{equation}
provided that the following constraints are satisfied:
\begin{align}
\sum_{d \in D_i} y_d = 1,\quad      &\forall i = 1 \ldots n  \label{eq:eq3} \\[10pt] 
\sum_{d^{\prime} \in D_j : (d, d^{\prime}) \in \mathcal{E}_C} y_{d^{\prime}}  \geq y_d \quad &\forall d \in \mathcal{V}_C, \nonumber \\[-15pt] 
                                                                                       &\forall j=1 \ldots n : A_j  \in \mathcal{N}_{\alpha(d)}, j \neq \alpha(d) \label{eq:eq4}
\end{align}
Constraints~(\ref{eq:eq3}) ensure that exactly one path per train is selected (each agent can only assign one value to the variable it controls). Constraints~(\ref{eq:eq4}) state that, if path $d$ is selected and it is associated to agent $\alpha(d)$, then each neighbouring agent in $\mathcal{N}_{\alpha(d)}$ must select a path that is compatible with $d$.

By exploiting CPLEX as solver for this ILP formulation of the agent coordination in the dec-rtRTMP, we are able to find all possible solutions to a given problem instance, and among them, to identify the optimal ones as well.
%and among these to also identify the optimal solution.

\section{Appendix}
The outline of the Appendix is as follows:
 \begin{itemize}
     \item Details of the refined-VAE in BD-Diff.
     \item Additional quantitative results.
     \item Additional qualitative results.
 \end{itemize}


\section{Details of the Refined-VAE in BD-Diff}
\label{appendix: vaerefiner}

In this section, we introduce the refined-VAE in BD-Diff. The pre-trained SD model utilizes a VAE to compress images into latent codes, reducing computational costs during diffusion. However, due to the compression inherent in the VAE and the randomness of the diffusion process, using the original SD VAE in deblurring tasks can lead to issues such as detail distortion and loss, resulting in discrepancies between the restored images and the input ones~\cite{zhu2023designing}. To mitigate this issue, we replace the VAE of SD with a refined-VAE, consistent with previous generative-diffusion-based methods~\cite{zhang2024diff,chen2025unirestore}. As illustrated in Figure~\ref{fig:refiner}, the refined-VAE $\mathcal{V'}$ introduces feature constraints by adding a refiner to both the encoder and decoder of the original VAE $\mathcal{V}$ to align the compressed latent codes and the input images. The encoder refiner performs pre-filtering operations on the degraded features after each layer of the original VAE encoder, thereby reducing content loss during compression. These refined features are then combined with the decoder-refiner via skip connections. The decoder refiner operates after each decoder layer of the original VAE, aiming to combine the features of the original image when decoding the latent codes refined by the diffusion process. This approach helps to minimize the discrepancies between the decoded image and the original one.

During training, we adapt the strategy from~\cite{chen2025unirestore}, which consists of two phases. In the first phase, we train the encoder refiner. The degraded image $x$ is encoded into latent codes using $\mathcal{V'}$, while the corresponding sharp image $y$ is encoded into ground truth latent codes using $\mathcal{V}$. The Mean Squared Error (MSE) loss is used for constraint. The optimization function is as follows:
\begin{equation}
\mathcal{L}_{\text{encoder}} = \text{MSE}(\mathcal{V}(y), \mathcal{V'}{\text{encoder}}(x)).
\end{equation}
In the second phase, we train the decoder refiner. We freeze the trained encoder refiner and utilize the refined VAE encoder $\mathcal{V'}_{\text{encoder}}$ to encode $x$ into latent codes $z$ with intermediate features. The trained BD-Diff then processes $z$ to generate the final latent codes, which will be decoded into images using the refined VAE decoder $\mathcal{V'}_{\text{decoder}}$, considering the intermediate features. The generated image is compared with the corresponding sharp image $y$ using MSE loss. The optimization function is as follows:
\begin{equation}
\begin{aligned}
\mathcal{L}_{\text{decoder}} &= \text{MSE}(y, \mathcal{V'}{\text{decoder}}(\text{BD-Diff}(z))), \\
z &= \mathcal{V'}{\text{encoder}}(x).
\end{aligned}
\end{equation}
For fast convergence, the parameters of the original VAE are frozen during the training process. We use the same method as described in Section~\ref{sec:details} to construct synthetic data for training the refiner to ensure fair comparison.


\begin{figure}[!t]
	\centering
	\includegraphics[width=0.5\textwidth]{images/refiner.pdf}
	\caption{Architecture of the refined-VAE in BD-Diff.}
	\label{fig:refiner}
\end{figure}

\section{Additional Quantitative Results}
\label{appendix: additional metrics}
In this section, we present additional quantitative results on reference-based metrics: FID, PSNR, SSIM, and LPIPS~\cite{zhang2018unreasonable}. All experimental settings are aligned with Section~\ref{sec:exp}.

\textbf{Comparison with SOTA Methods.} The performance comparisons with selected baselines on reference-based metrics are presented in Table~\ref{tab:addition ablation}. BD-Diff performs favorably against other generative-diffusion-based methods across all selected datasets. Notably, due to the generative nature of T2I diffusion models and the randomness of the diffusion process, diffusion-based methods tend to supplement details in blurred regions at the expense of consistency with the original image. As a result, they generally underperform on reference-based metrics compared to non-diffusion-based models. However, the decoupled learning strategy of BD-Diff allows it to effectively extract structural information from blurred images and restore structures that are faithful to the original image, thereby maintaining competitiveness with other SOTA methods.
 
\textbf{Ablation Study.} The results of the ablation study on reference-based metrics are presented in Table~\ref{tab:addition ablation}. Omitting any key component or training phase from BD-Diff leads to a decline across all reference-based metrics, which aligns with the performance trend observed in the NR-IQA metrics shown in Table~\ref{tab:No-Reference Metrics Results of Ablation Studies}. This further demonstrates the effectiveness of BD-Diff.


\begin{table}[!t]
  \caption{Quantitative comparison with SOTA methods on reference-based metrics. \textbf{Bold} and \uline{underlined} indicate the best and the second-best performance, respectively.}
  \label{tab:addition results}
  \centering
\resizebox{0.49\textwidth}{!}{
\begin{tabular}{cllcccc}
\toprule
Data & Model & Source & FID$\downarrow$ & PSNR$\uparrow$ & SSIM$\uparrow$ & LPIPS$\downarrow$ \\
\midrule
\multirow{7}{*}{GoPro} 
&AirNet          & CVPR 2022 & 56.09 & 21.82 & 0.7348 & 0.1446 \\
&PromptIR        & NeurIPS 2023 & \uline{49.65} & 21.97& 0.7361 & 0.1390 \\
&Blur2Blur       & CVPR 2024 & \textbf{46.31} & \uline{24.33} & \uline{0.7392} & 0.1317 \\
&DiffPlugin      & CVPR 2024    & 50.55  & 22.87 & 0.6902 & 0.1388 \\
&DiffBir         & ECCV 2024    & 58.45 & 23.42 & 0.7043 & 0.1382 \\
&DA-CLIP         & ICLR 2024    & 54.79 & 24.24 & 0.6442 & \textbf{0.1299} \\
&\cellcolor[HTML]{E6F0E8}\textbf{Ours}   & \cellcolor[HTML]{E6F0E8}Under review & \cellcolor[HTML]{E6F0E8}49.68 & \cellcolor[HTML]{E6F0E8}\textbf{25.08} & \cellcolor[HTML]{E6F0E8}\textbf{0.7403} & \cellcolor[HTML]{E6F0E8}\uline{0.1310} \\
\midrule
\multirow{7}{*}{REDS} 
&AirNet          & CVPR 2022 & 33.36 & 23.94 & 0.7419 & 0.0975 \\
&PromptIR        & NeurIPS 2023 & 16.57 &\uline{27.03}& \uline{0.8149} & 0.0504 \\
&Blur2Blur       & CVPR 2024 & \uline{15.49} & \textbf{28.94} & \textbf{0.8522} & \textbf{0.0431} \\
&DiffPlugin      & CVPR 2024    & 26.80  & 21.95 & 0.6215 & 0.0773 \\
&DiffBir         & ECCV 2024    & 37.19 & 22.67 & 0.5741 & 0.0817 \\
&DA-CLIP         & ICLR 2024    & 62.14 & 21.43 & 0.5953 & 0.1402 \\
&\cellcolor[HTML]{E6F0E8}\textbf{Ours}   &\cellcolor[HTML]{E6F0E8}Under review &\cellcolor[HTML]{E6F0E8}\textbf{15.35} &\cellcolor[HTML]{E6F0E8}25.83 &\cellcolor[HTML]{E6F0E8}0.7782 &\cellcolor[HTML]{E6F0E8}\uline{0.0498} \\
\midrule
\multirow{7}{*}{RealBlur-J} 
&AirNet          & CVPR 2022    & 38.52 & 22.51 & 0.7347 & 0.1483 \\
&PromptIR       & NeurIPS 2023 & \uline{17.02} & 22.51 & 0.7598 & 0.1382 \\
&Blur2Blur       & CVPR 2024 & \textbf{16.64} & \uline{22.71} & \uline{0.7642} & \textbf{0.1314} \\
&DiffPlugin      & CVPR 2024    & 38.68 & 22.61 & 0.7035 & 0.1568 \\
&DiffBir         & ECCV 2024    & 48.29 & \textbf{22.76} & 0.7220  & 0.1471 \\
&DA-CLIP         & ICLR 2024    & 52.61 & 22.35 & 0.7129 & 0.1794 \\
&\cellcolor[HTML]{E6F0E8}Ours   &\cellcolor[HTML]{E6F0E8}Under review &\cellcolor[HTML]{E6F0E8}17.99 &\cellcolor[HTML]{E6F0E8}\textbf{22.76} &\cellcolor[HTML]{E6F0E8}\textbf{0.7693} &\cellcolor[HTML]{E6F0E8}\uline{0.1379} \\
\midrule
\multirow{7}{*}{RealBlur-R} 
&AirNet          & CVPR 2022    & 40.93 & 16.82 & 0.5093 & \uline{0.2295} \\
&PromptIR        & NeurIPS 2023 & 36.82 & 17.03 & 0.5290  & 0.2011 \\
&Blur2Blur       & CVPR 2024 & \textbf{21.43} & 19.82 & 0.5432 & 0.2231 \\
&DiffPlugin      & CVPR 2024    & 35.91 & 16.56 & 0.5206 & 0.2147 \\
&DiffBir         & ECCV 2024    & 38.33 & 17.24 & 0.4883 & 0.2107 \\
&DA-CLIP         & ICLR 2024    & 92.61 & \uline{21.35} & \uline{0.7129} & 0.1794 \\
&\cellcolor[HTML]{E6F0E8}\textbf{Ours}   &\cellcolor[HTML]{E6F0E8}Under review &\cellcolor[HTML]{E6F0E8}\uline{32.11} &\cellcolor[HTML]{E6F0E8}\textbf{22.47} &\cellcolor[HTML]{E6F0E8}\textbf{0.7387} &\cellcolor[HTML]{E6F0E8}\textbf{0.2348} \\
\bottomrule
\end{tabular}}
\vspace{-1mm}
\end{table}


\begin{table}[!t]
  \caption{Ablation study results on reference-based metrics.}
  \label{tab:addition ablation}
  \centering
\resizebox{0.5\textwidth}{!}{

\begin{tabular}{cl|cc|ccc|cccc}
\toprule
& \multicolumn{1}{c}{} & \multicolumn{2}{c}{Components} & \multicolumn{3}{c}{Training Tasks} & \multicolumn{4}{c}{Metrics} \\
\multirow{-2}{*}{Dataset}    & \multicolumn{1}{c|}{\multirow{-2}{*}{Model}} & \multicolumn{1}{c}{$Q_s$} & \multicolumn{1}{c|}{$Q_b$} & $T_{1}$ & $T_{2}$ & $T_{3}$ & FID$\downarrow$ & PSNR$\uparrow$ & SSIM$\uparrow$ & LPIPS$\downarrow$  \\
\midrule
& w/o $Q_s$  & \ding{55} & \ding{55} & \checkmark & \ding{55} & \ding{55}  & 50.52 & 22.67 & 0.6887 & 0.1689 \\
& w/o $T_{2}T_{3}$ & \checkmark & \ding{55} & \checkmark & \ding{55} & \ding{55} & 54.53 & 22.91 & 0.7316 & 0.1541 \\
& w/o $T_{3}$  & \checkmark & \checkmark  & \checkmark & \checkmark & \ding{55} & 50.45 & 24.34 & 0.7231 & 0.1552  \\
\multirow{-4}{*}{GoPro}       & \cellcolor[HTML]{E6F0E8}\textbf{Ours}       & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\textbf{\checkmark} & \cellcolor[HTML]{E6F0E8}\textbf{49.68} & \cellcolor[HTML]{E6F0E8}\textbf{25.08} & \cellcolor[HTML]{E6F0E8}\textbf{0.7403} & \cellcolor[HTML]{E6F0E8}\textbf{0.1310} \\
\midrule
& w/o $Q_s$ & \ding{55} & \ding{55} & \checkmark& \ding{55} & \ding{55} & 26.86 & 22.03 & 0.6210 & 0.0783 \\
& w/o $T_{2}T_{3}$  & \checkmark   & \ding{55}    & \checkmark  & \ding{55}    & \ding{55}  &  27.22   & 23.53       & 0.6871 & 0.0782   \\
& w/o $T_{3}$& \checkmark& \checkmark& \checkmark& \checkmark& \ding{55} & 30.03& 23.60& 0.7137& 0.0813  \\
\multirow{-4}{*}{REDS}       & \cellcolor[HTML]{E6F0E8}\textbf{Ours}       & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\textbf{\checkmark} & \cellcolor[HTML]{E6F0E8}\textbf{26.35} & \cellcolor[HTML]{E6F0E8}\textbf{25.83} & \cellcolor[HTML]{E6F0E8}\textbf{0.7782} & \cellcolor[HTML]{E6F0E8}\textbf{0.0682} \\
\midrule
& w/o $Q_s$ & \ding{55}& \ding{55} & \checkmark  & \ding{55} & \ding{55}  & 38.92 & 18.93 & 0.5283 & 0.2090 \\
& w/o $T_{2}T_{3}$& \checkmark& \checkmark& \checkmark& \checkmark& \ding{55} & 38.98& 21.27& 0.7283 & 0.2257  \\
& w/o $T_{3}$  & \checkmark & \ding{55}& \checkmark & \ding{55} & \ding{55}& 38.94& 21.33 & 0.7205 & 0.2170 \\
\multirow{-4}{*}{RealBlur-J} & \cellcolor[HTML]{E6F0E8}\textbf{Ours}       & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\textbf{\checkmark} & \cellcolor[HTML]{E6F0E8}\textbf{37.99} & \cellcolor[HTML]{E6F0E8}\textbf{22.76} & \cellcolor[HTML]{E6F0E8}\textbf{0.7293} & \cellcolor[HTML]{E6F0E8}\textbf{0.1379}  \\
\midrule
& w/o $Q_s$& \ding{55}& \ding{55}& \checkmark& \ding{55} & \ding{55}& 37.44 & 16.21 & 0.5213 & 0.2501 \\
& w/o $T_{2}T_{3}$& \checkmark& \checkmark& \checkmark& \checkmark& \ding{55}&37.08& 17.27 & 0.5283 & 0.2457 \\
& w/o $T_{3}$& \checkmark& \ding{55}& \checkmark& \ding{55}& \ding{55}& 34.49& 19.74&0.5345&0.2458\\
\multirow{-4}{*}{RealBlur-R} & \cellcolor[HTML]{E6F0E8}\textbf{Ours}       & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\checkmark & \cellcolor[HTML]{E6F0E8}\textbf{\checkmark} & \cellcolor[HTML]{E6F0E8}\textbf{32.11} & \cellcolor[HTML]{E6F0E8}\textbf{22.47} & \cellcolor[HTML]{E6F0E8}\textbf{0.5387}  & \cellcolor[HTML]{E6F0E8}\textbf{0.2348} \\
\bottomrule
\end{tabular}
}
\end{table}


\section{Additional Qualitative Results}
In this section, we present additional visualization results on the test sets of our selected datasets: GoPro, REDS, RealBlur-J, and RealBlur-R. As shown in Figure~\ref{fig:appendix results1} and Figure~\ref{fig:appendix results2}, BD-Diff performs favorably against other SOTA methods across various real-world deblurring scenarios.


\begin{figure*}[!t]
  \centering
  \setlength{\tabcolsep}{3pt} 
  \begin{tabular}{ccccccccc}
    &  \small Sample 1 & \small  Sample 2 & \small  Sample 3 & \small  Sample 4 & \small  Sample 5 & \small  Sample 6 & \small  Sample 7 & \small  Sample 8 \\
    \raisebox{0.82\height}{\rotatebox[origin=c]{90}{\small Ground Truth}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/1.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/1.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/1.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/1.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.55\height}{\rotatebox[origin=c]{90}{\small AirNet}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/2.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/2.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/2.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/2.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.3\height}{\rotatebox[origin=c]{90}{\small PromptIR}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/3.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/3.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/3.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/3.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.1\height}{\rotatebox[origin=c]{90}{\small Blur2Blur}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/4.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/4.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/4.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/4.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.4\height}{\rotatebox[origin=c]{90}{\small DiffBir}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/5.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/5.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/5.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/5.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.1\height}{\rotatebox[origin=c]{90}{\small Diff-Plugin}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/6.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/6.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/6.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/6.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.2\height}{\rotatebox[origin=c]{90}{\small DA-CLIP}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/7.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/7.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/7.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/7.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1\height}{\rotatebox[origin=c]{90}{\small Ours w/o $Q_s$}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/8.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/8.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/8.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/8.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{0.79\height}{\rotatebox[origin=c]{90}{\small Ours w/o $T_{2}T_{3}$}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/9.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/9.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/9.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/9.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{0.9\height}{\rotatebox[origin=c]{90}{\small Ours w/o $T_{3}$}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/10.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/10.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/10.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/10.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.7\height}{\rotatebox[origin=c]{90}{\small \textbf{Ours}}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/11.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/11.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/11.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/11.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{2.2\height}{\rotatebox[origin=c]{90}{\small Blur}} &
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/1/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/2/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/3/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/Gopro/4/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/1/12.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/2/12.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/REDS/3/12.png} &    \includegraphics[width=.109\textwidth]{images/appendix/REDS/4/12.png} \\
   \multicolumn{5}{c}{\vspace{-22pt}} \\
  \end{tabular}
  \caption{Additional visual comparison on the \textcolor{red}{GoPro} and \textcolor{yellow}{REDS} datasets. Please zoom in for the best view.}
  \label{fig:appendix results1}
\end{figure*}



\begin{figure*}[!t]
  \centering
  \setlength{\tabcolsep}{3pt} 
  \begin{tabular}{ccccccccc}
    &  \small Sample 1 & \small  Sample 2 & \small  Sample 3 & \small  Sample 4 & \small  Sample 5 & \small  Sample 6 & \small  Sample 7 & \small  Sample 8 \\
    \raisebox{0.82\height}{\rotatebox[origin=c]{90}{\small Ground Truth}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/1.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/1.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/1.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/1.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/1.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.55\height}{\rotatebox[origin=c]{90}{\small AirNet}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/2.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/2.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/2.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/2.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/2.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.3\height}{\rotatebox[origin=c]{90}{\small PromptIR}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/3.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/3.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/3.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/3.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/3.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.1\height}{\rotatebox[origin=c]{90}{\small Blur2Blur}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/4.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/4.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/4.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/4.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/4.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.4\height}{\rotatebox[origin=c]{90}{\small DiffBir}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/5.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/5.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/5.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/5.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/5.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.1\height}{\rotatebox[origin=c]{90}{\small Diff-Plugin}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/6.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/6.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/6.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/6.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/6.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.2\height}{\rotatebox[origin=c]{90}{\small DA-CLIP}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/7.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/7.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/7.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/7.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/7.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1\height}{\rotatebox[origin=c]{90}{\small Ours w/o $Q_s$}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/8.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/8.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/8.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/8.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/8.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{0.79\height}{\rotatebox[origin=c]{90}{\small Ours w/o $T_{2}T_{3}$}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/9.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/9.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/9.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/9.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/9.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{0.9\height}{\rotatebox[origin=c]{90}{\small Ours w/o $T_{3}$}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/10.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/10.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/10.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/10.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/10.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{1.7\height}{\rotatebox[origin=c]{90}{\small \textbf{Ours}}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/11.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/11.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/11.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/11.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/11.png} \\
   \multicolumn{5}{c}{\vspace{-15.5pt}} \\
    \raisebox{2.2\height}{\rotatebox[origin=c]{90}{\small Blur}} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/1/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/2/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/3/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealJ/4/12.png} & 
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/1/12.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/2/12.png} &
    \includegraphics[width=.109\textwidth]{images/appendix/RealR/3/12.png} &    \includegraphics[width=.109\textwidth]{images/appendix/RealR/4/12.png} \\
   \multicolumn{5}{c}{\vspace{-22pt}} \\
  \end{tabular}
  \caption{Additional visual comparison on the \textcolor{blue}{RealBlur-J} and \textcolor{green}{RealBlur-R} datasets. Please zoom in for the best view.}
  \label{fig:appendix results2}
\end{figure*}
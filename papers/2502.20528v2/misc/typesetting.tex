% Pre-condition: Set the ifs, \ifDEBUG and \ifANONYMOUS

%%%%%
% Standard packages
%%%%%

%\usepackage[compress]{cite} % numbered ordering of multiple citations, set to compress ranges
\let\Bbbk\relax

\usepackage{amsmath,amssymb,amsfonts}

\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{booktabs} % For formal tables \toprule
\usepackage{xspace} % Put an \xspace within numeric macros
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{tcolorbox}
\usepackage{enumitem}
\usepackage{siunitx}
\usepackage[vskip=1em,font=itshape,leftmargin=2em,rightmargin=2em]{quoting}
% \usepackage{fontawesome5}
% \usepackage{fontawesome}
% \usepackage[compact]{titlesec}
\usepackage{tabularx}
% \usepackage{float}
\usepackage{hyperref}
\hypersetup{
  breaklinks=true,
  colorlinks=true,
  urlcolor=blue
}
\usepackage{breakurl}
\usepackage{lscape}
\usepackage{afterpage}

\usepackage{makecell}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage[T1]{fontenc}

\usepackage{setspace}

\usepackage{tikz}

\usepackage{wrapfig}

\usepackage{enumitem}
\usepackage{xurl}
% \usepackage[noadjust]{cite}

% EMSE citation format
% \usepackage{natbib}
% \setcitestyle{aysep={}} % sets the separator between author and year to nothing
% \let\oldcitep\citep
% \renewcommand{\citep}[1]{\citeauthor{#1} \textcolor{blue}{(\citeyear{#1})}}



% \useunder{\uline}{\ul}{}
% \usepackage{filecontent}
\usepackage{lipsum}
% \usepackage[noadjust]{cite}
% \def\citepunct{,\,}
% \def\citedash{--}

%%%%%
% Comments and TODOs
%%%%%

\usepackage{soul}

\ifDEBUG
    % Floating comment boxes
    \newcommand{\JD}[1]{\textcolor{purple}{[JD:#1]}}
    \newcommand{\AG}[1]{\textcolor{olive}{[AG:#1]}}
    \newcommand{\WJ}[1]{\textcolor{teal}{[WJ:#1]}}
    \newcommand{\GKT}[1]{\textcolor{brown}{[GKT:#1]}}
    \newcommand{\NMS}[1]{\textcolor{orange}{[NMS: #1]}}
    \newcommand{\NV}[1]{\textcolor{red}{[NV: #1]}}
    \newcommand{\CC}[1]{\textcolor{violet}{[CC: #1]}}
    \newcommand{\Andreas}[1]{\textcolor{cyan}{[ADK: #1]}}
     \newcommand{\YT}[1]{\textcolor{red}{[YT: #1]}}
     \newcommand{\MIK}[1]{\textcolor{red}{[Mik: #1]}}
     \newcommand{\PA}[1]{\textcolor{violet}{[PA: #1]}}
    \newcommand{\BC}[1]{\textcolor{blue}{[BC: #1]}}

    
    
    % Inline comments and WIP phrasing
    \newcommand{\TODO}[1]{\hl{#1}}
\else
    \newcommand{\JD}[1]{}
    \newcommand{\AG}[1]{}
    \newcommand{\WJ}[1]{}
    \newcommand{\GKT}[1]{}
    \newcommand{\NS}[1]{}
    \newcommand{\NV}[1]{}
    \newcommand{\CC}[1]{}
    \newcommand{\JY}[1]{}
    \newcommand{\YT}[1]{}
    \newcommand{\PA}[1]{}
    \newcommand{\BC}[1]{}

    \newcommand{\TODO}[1]{#1}
\fi

%%%%%
% Paragraph-level labels
%%%%%

%%%%%
% Space hacking
%%%%%

% To reduce spacing after headings %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \usepackage{titlesec}
% \usepackage[compact]{titlesec}
    % The bug in the new version 2.10.1 is not properly starting horizontal mode
    % http://tex.stackexchange.com/questions/299969/titlesec-loss-of-section-numbering-with-the-new-update-2016-03-15
    \usepackage{etoolbox}
    \makeatletter
    \patchcmd{\ttlh@hang}{\parindent\z@}{\parindent\z@\leavevmode}{}{}
    \patchcmd{\ttlh@hang}{\noindent}{}{}{}
    \makeatother

% Make a \paragraph that is inline and emphasized
\newcommand{\myparagraph}[1]{\vspace{0.10cm}\noindent\textbf{#1} \noindent{}}
% \renewcommand{\myparagraph}[1]{\paragraph{#1}}

\newcommand{\myminisection}[1]{\vspace{0.1cm} \noindent \textbf{#1.}}

\ifSPACEHACK
    % Titlespacing args: \titlespacing*\section{left}{before}{after}{right}
    % The * kills indentation of the first paragraph after a heading
    \titlespacing*\section{0pt}{5pt plus 1pt minus 1pt}{3pt plus 1pt minus 1pt}
    \titlespacing*\subsection{0pt}{4pt plus 1.5pt minus 1.5pt}{4pt plus 1.5pt minus 1.5pt}
    \titlespacing*\subsubsection{0pt}{3pt plus 1pt minus 1pt}{3pt plus 1.5pt minus 1.5pt}
    \titlespacing*\paragraph{0pt}{1pt plus 1.5pt minus 1.5pt}{2pt plus 1.5pt minus 1.5pt}
    \setlength{\abovecaptionskip}{2pt plus 1pt minus 1pt}
    \setlength{\belowcaptionskip}{2pt plus 1pt minus 1pt}
    \setlength{\floatsep}{2.0pt plus 2.0pt minus 2.0pt}
    % \titlespacing{\section}{\unskip}{2ex}{1ex}
    % \titlespacing{\subsection}{\unskip}{1ex}{0ex}
    % \titlespacing{\subsubsection}{\unskip}{0.5ex}{0ex}
    % \def\subsection{\@startsection{subsection}% name
    %                              {3}% level
    %                              {\parindent}% indent
    %                              {0ex plus 0.1ex minus 0.1ex}% before skip
    %                              {0ex}% after skip
    %                              {\normalfont\normalsize\itshape}}% style
    % \def\subsubsection{\@startsection{subsubsection}% name
    %                              {3}% level
    %                              {\parindent}% indent
    %                              {0ex plus 0.1ex minus 0.1ex}% before skip
    %                              {0ex}% after skip
    %                              {\normalfont\normalsize\itshape}}% style

\fi
%\setlength{\textfloatsep}{3.0pt plus 2.0pt minus 4.0pt}
% \setlength{\floatsep}{2.0pt plus 2.0pt minus 2.0pt} 
%\setlength{\intextsep}{2.0pt plus 2.0pt minus 2.0pt}

%%%%%%%%
% Peer review
%%%%%%%%

%%%%%%%%
% Balance references
%%%%%%%%

\usepackage{balance} % Put \balance on the last page
%\usepackage{caption}
%\usepackage[font=normal]{caption}
\usepackage[font=small,labelfont=bf]{caption}
\usepackage{subcaption}
\usepackage[bottom]{footmisc}
%%%%
% Intra-paper references
%%%%
\makeatletter
\def\cl@chapter{}
\makeatother
\usepackage{cleveref}
% \usepackage[margin=1in]{geometry}
% \usepackage{listings}

\crefformat{section}{\S#2#1#3}
\crefname{figure}{Figure}{Figures}
\crefname{appendix}{Appendix}{Appendices}
\crefname{table}{Table}{Tables}
\crefname{algorithm}{Algorithm}{Algorithms}
\crefname{listing}{Listing}{Listings}
\crefname{theorem}{Theorem}{Theorems}
\crefname{thm}{Theorem}{Theorems}
\crefname{lemma}{Lemma}{Lemmata}
\crefname{equation}{Eqt.}{Eqts.}
\crefformat{Grammar}{Grammar #1}

%%%%
% Tunable enumerate and itemize
%%%%
\usepackage{seqsplit}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage[ruled,vlined]{algorithm2e}

%%%%
% Latin
%%%%

\newcommand{\ie}{\textit{i.e.,} }
\newcommand{\eg}{\textit{e.g.,} }
\newcommand{\etal}{\textit{et al.}\xspace}
\newcommand{\etals}{\textit{et al.'s}\xspace}
\newcommand{\nb}{\textit{N.B.,} }

% Please add the following required packages to your document preamble:


%\usepackage{booktabs}
%\usepackage[normalem]{ulem}

% Nice formatting for a list of RQs
\newenvironment{RQList}{
   \setlength{\topsep}{0pt}
   \setlength{\partopsep}{0pt}
   \setlength{\parskip}{0pt}
   \begin{description}[style=unboxed]
   \setlength{\leftmargin}{1in}
   \setlength{\parsep}{0pt}
   \setlength{\parskip}{0pt}
   \setlength{\itemsep}{0pt}
   }
   {\end{description}}
   
% Space hacking
% \setlength{\abovecaptionskip}{2pt plus 1pt minus 1pt}
% \setlength{\belowcaptionskip}{2pt plus 1pt minus 1pt}

\newcommand{\myquote}[1]{\begin{quote}\emph{``#1''}\end{quote}}
\newcommand{\myinlinequote}[1]{\emph{``#1''}}

\newcommand{\SmallLongString}[1]{{\small \emph{#1}}\xspace}

% ParticipantID, Quote
\newcommand{\ParticipantQuote}[2]{
    \begin{quote}
    \emph{\textbf{#1}: ``#2''} 
    \end{quote}}

\newcommand{\new}[1]{\textcolor{black}{#1}}
\newcommand{\newnew}[1]{\textcolor{blue}{#1}}

\newcommand{\code}[1]{{\small\texttt{#1}}\xspace}

\begin{tikzpicture}
    \tikzset{
        rahmen/.style={
            rounded corners = 5pt,
            draw,
            dashed
        }
    }

    \newcommand{\vdotss}[2]{%
        \node at ($(#1)!0.5!(#2)$) {\hspace{0.7pt}\rotatebox{90}{$\cdot$\hspace{-1pt}$\cdot$\hspace{-1pt}$\cdot$}}%
    }
    \newcommand{\fframe}[3]{%
        \draw[rahmen,#1] ($(#2.north west)+(-0.4,0.4)$) rectangle ($(#3.south east)+(0.4,-0.4)$)%
    }
    \newcommand{\rclique}[2]{%
        \expandafter\node[vertex,draw=#1,fill=#1] (#2 k) at (0,1.5) {};
        \expandafter\node[vertex,draw=#1,fill=#1] (#2 2) at (0,0.5) {};
        \node[vertex,draw=#1,fill=#1] (#2 1) at (0,0) {};
        \vdotss{#2 2}{#2 k};
    }
    \newcommand{\clique}[2]{%
        \rclique{#1}{#2};
        \fframe{#1}{#2 k}{#2 1};
    }
    \newcommand{\iclique}[2]{%
        \expandafter\node[vertex,draw=#1,fill=#1] (#2 k) at (0,0) {};
        \expandafter\node[vertex,draw=#1,fill=#1] (#2 2) at (0,1) {};
        \node[vertex,draw=#1,fill=#1] (#2 1) at (0,1.5) {};
        \vdotss{#2 2}{#2 k};
        \fframe{#1}{#2 1}{#2 k};
    }

    \begin{scope}[xscale=0.5,yscale = 0.9, rotate = 90]
    %\begin{scope}[yscale=0.5]
    % v_1
    \rclique{nicered}{u};
    \begin{scope}[xshift=2cm,yshift=1cm]
        \clique{lightblue}{cu};
        \node[](t) at (0.6,1){$C_{v_1}$};
    \end{scope}
    \begin{scope}[xshift=2cm,yshift=-2.5cm]
        \iclique{nicered}{cpu};
        \node[](t) at (0.6,0.4){$C_{v_1}'$};
    \end{scope}
    \node[bvertex] (up) at (4,0) {};

    % v_2
    \begin{scope}[yshift=-7cm]
        \rclique{nicered}{v};
        \begin{scope}[xshift=2cm,yshift=1cm]
            \clique{nicered}{cv};
            \node[](t) at (0.6,1){$C_{v_2}$};
        \end{scope}
        \begin{scope}[xshift=2cm,yshift=-2.5cm]
            \iclique{lightblue}{cpv};
            \node[](t) at (0.6,0.4){$C_{v_2}'$};
        \end{scope}
        \node[bvertex] (vp) at (4,0) {};
    \end{scope}

    \node[rvertex] (e) at ($(u 1)!0.5!(v k)$) {};

    \node[rvertex, label = left:$a$] (a) at (0, -10.5) {};
    \node[bvertex, label = left: $b$] (b) at (4, -10.5) {};
    
    \fframe{nicered}{u k}{a};
    \node[](t) at (0,-11.7){$C$};
    \fframe{lightblue}{up}{b};
     \node[](t) at (4,-11.7){$C'$};
    
    \draw[tedge] (a) -- (b);

    % edge
    \draw[edge] (e) -- (cpu 2);
    \draw[tedge] (e) -- (cpv 2);

    % v_1
    \draw[tedge] (u 1) -- (cu 1);
    \draw[tedge] (u 2) -- (cu 2);
    \draw[tedge] (u k) -- (cu k);
    \draw[edge] (cu 1) -- (up);
    \draw[edge]  (u 1) -- (cpu 1);
    \draw[tedge] (cpu 1) -- (up);

    % v_2
    \draw[edge] (v 1) -- (cv 1);
    \draw[edge] (v 2) -- (cv 2);
    \draw[edge] (v k) -- (cv k);
    \draw[tedge] (cv 1) -- (vp);
    \draw[tedge]  (v 1) -- (cpv 1);
    \draw[edge] (cpv 1) -- (vp);
    \end{scope}

    %\end{scope}
\end{tikzpicture}
%%%%%%%%%%%%%%%%%%%%%%%%%% New table command %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\entry}[2]{$#1 \pm${\tiny $#2$}}
\newcommand{\bentry}[2]{$\mathbf{#1 \pm}${\tiny $\mathbf{#2}$}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% sets visibility %%%%%%%%%%%
\newif\ifsolution 
\newif\iflongversion
\longversionfalse
\newif\ifgrad

%%%%%%%%%%%%%%%%%%%%%%% Underbraces in Matrix Divided in Blocks %%%%%%%%%
\newcommand\undermat[2]{%
	\makebox[0pt][l]{$\smash{\underbrace{\phantom{%
					\begin{matrix}#2\end{matrix}}}_{\text{$#1$}}}$}#2}
%\left (
%\begin{array}{rrr|rrr}
%	0 & 0 & 0 & 0 & 0 & 0 \\
%	0 & 0 & 0 & 0 & 0 & 0 \\
%	\undermat{A}{0 & 0 & 0} & \undermat{B}{0 & 0 & 0} \\
%\end{array}
%\right )
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{accents}
\newcommand\thickbar[1]{\accentset{\rule{.45em}{.8pt}}{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{xspace}
\newcommand\nd{\textsuperscript{nd}\xspace}
\newcommand\rd{\textsuperscript{rd}\xspace}
\renewcommand\th{\textsuperscript{th}\xspace}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%% Double tilde %%%%%%%%%%%%%%%%%
\usepackage{accents}
\newcommand{\dbtilde}[1]{\accentset{\approx}{#1}}
\newcommand{\vardbtilde}[1]{\tilde{\raisebox{0pt}[0.85\height]{$\tilde{#1}$}}}
\usepackage{stackengine}
\stackMath
\newcommand\tsup[2][2]{%
	\def\useanchorwidth{T}%
	\ifnum#1>1%
	\stackon[-.5pt]{\tsup[\numexpr#1-1\relax]{#2}}{\scriptscriptstyle\sim}%
	\else%
	\stackon[.5pt]{#2}{\scriptscriptstyle\sim}%
	\fi%
}
% \vardbtilde{\epsilon} or \tsup[3]{\Delta}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\newcommand{\longdash}[1][2em]{%
	\makebox[#1]{$\m@th\smash-\mkern-7mu\cleaders\hbox{$\mkern-2mu\smash-\mkern-2mu$}\hfill\mkern-7mu\smash-$}}
\makeatother
\newcommand{\omitskip}{\kern-\arraycolsep}
\newcommand{\llongdash}[1][2em]{\longdash[#1]\omitskip}
\newcommand{\rlongdash}[1][2em]{\omitskip\longdash[#1]}
%% Usage
%\begin{bmatrix}
%	\llongdash & x_{1}   & \rlongdash \\
%	\llongdash & x_{2}+y & \rlongdash \\
%	\llongdash & x_{n}   & \rlongdash
%\end{bmatrix}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\Mm#1{\mbox{\boldmath$\scriptstyle #1$\unboldmath}} % Math-bold in subscript
\def\MM#1{\mbox{\boldmath$#1$\unboldmath}} % Math-bold


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\df}{\mathrm{d}}
%\renewcommand{\v}[1]{\boldsymbol{#1}}
%\renewcommand{\v}[1]{{\bf{#1}}}
\newcommand{\real}{\mathbb{R}}
\newcommand{\complex}{\mathbb{C}}
\newcommand{\nat}{\mathbb{N}}
\newcommand{\field}{\mathbb{F}}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\Argmin}{Arg\,min}
\newcommand*\indic[1]{\mathbbm{1}_{\left\{#1\right\}}}

%%%%%%%%%%% Transpose %%%%%%%%%%%%%%%%%%%
\makeatletter
\newcommand*{\transpose}{%
	{\mathpalette\@transpose{}}%
}
\newcommand*{\@transpose}[2]{%
	% #1: math style
	% #2: unused
	\raisebox{\depth}{$\m@th#1\intercal$}%
}
\makeatother
\newcommand*{\hermconj}{{\mathsf{\ast}}}
\newcommand*{\T}{{\transpose}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%% For Sets %%%%%%%%%%%%
\newcommand{\sA}{\mathcal{A}}
\newcommand{\sB}{\mathcal{B}}
\newcommand{\sC}{\mathcal{C}}
\newcommand{\sD}{\mathcal{D}}
\newcommand{\sE}{\mathcal{E}}
\newcommand{\sF}{\mathcal{F}}
\newcommand{\sG}{\mathcal{G}}
\newcommand{\sH}{\mathcal{H}}
\newcommand{\sK}{\mathcal{K}}
\newcommand{\sR}{\mathcal{R}}
\newcommand{\sS}{\mathcal{S}}
\newcommand{\sT}{\mathcal{T}}
\newcommand{\sL}{\mathcal{L}}
\newcommand{\sN}{\mathcal{N}}
\newcommand{\sP}{\mathcal{P}}
\newcommand{\sU}{\mathcal{U}}
\newcommand{\sV}{\mathcal{V}}
\newcommand{\sW}{\mathcal{W}}
\newcommand{\sX}{\mathcal{X}}
\newcommand{\sY}{\mathcal{Y}}
\newcommand{\sZ}{\mathcal{Z}}

%%%%%%%%%%%%% For matrices %%%%%%%%
%\newcommand {\mA}  { {\mathbf{A}} }
\renewcommand {\AA}  { {\mathbf{A}} }
\newcommand {\AAt}  { {\AA^{\T}} }
\newcommand {\AAd}  { {\AA^{\dagger}} }
\newcommand {\AAi}  { {\AA^{-1}} }
\newcommand {\RR}  { {\mathbf{R}} }
\newcommand {\BB}  { {\mathbf{B}} }
\newcommand {\CC}  { {\mathbf{C}} }
\newcommand {\DD}  { {\mathbf{D}} }
\newcommand {\EE}  { {\mathbf{E}} }
\newcommand {\FF}  { {\mathbf{F}} }
\newcommand {\GG}  { {\mathbf{G}} }
\newcommand {\HH}  { {\mathbf{H}} }
\newcommand {\KK}  { {\mathbf{K}} }
\newcommand {\bMM}  { {\mathbf{M}} }
\newcommand {\VV}  { {\mathbf{V}} }
\newcommand {\WW}  { {\mathbf{W}} }
\newcommand {\UU}  { {\mathbf{U}} }
\newcommand {\LL}  { {\mathbf{L}} }
\newcommand {\NN}  { {\mathbf{N}} }
\newcommand {\PP}  { {\mathbf{P}} }
\newcommand {\QQ}  { {\mathbf{Q}} }
\newcommand {\bSS}  { {\mathbf{S}} }
\newcommand {\JJ}  { {\mathbf{J}} }
\newcommand {\XX}  { {\mathbf{X}} }
\newcommand {\YY}  { {\mathbf{Y}} }

\newcommand {\bDelta}  { {\mathbf{\Delta}} }
\newcommand {\bSigma}  { {\mathbf{\Sigma}} }
\newcommand{\eye}{\mathbf{I}}

%%%%%%%%%%%%% For vectors %%%%%%%%%%
\renewcommand {\aa}  { {\bf a} }
\newcommand {\bb}  { {\bf b} }
\newcommand {\cc}  { {\bf c} }
\newcommand {\dd}  { {\bf d} }
\newcommand {\ee}  { {\bf e} }
\newcommand {\ff}  { {\bf f} }
\newcommand {\bgg}  { {\bf g} }
\newcommand {\ii}  { {\bf i} }
\newcommand {\jj}  { {\bf j} }
\newcommand {\yy}  { {\bf y} }
\newcommand {\hh}  { {\bf h} }
\newcommand {\kk}  { {\bf k} }
\newcommand {\rr}  { {\bf r} }
\newcommand {\uu}  { {\bf u} }
\newcommand {\qq}  { {\bf q} }
\newcommand {\pp}  { {\bf p} }
\newcommand {\bss}  { {\bf s} }
\newcommand {\btt}  { {\bf t} }
\newcommand {\mm}  { {\bf m} }
\newcommand {\vv}  { {\bf v} }
\newcommand {\ww}  { {\bf w} }
\newcommand {\xx}  { {\bf x} }
\newcommand {\zz}  { {\bf z} }
\newcommand {\balpha} {\bm \alpha}
\newcommand {\btheta} {\bm \theta}
\newcommand {\bmu} {\bm \mu}
\newcommand {\bpsi} {\bm \psi}
\newcommand {\blambda} {\bm \lambda}
\newcommand {\bepsilon} {\bm \epsilon}
\newcommand {\bomega} {\bm \omega}
\newcommand {\bsigma} {\bm \sigma}
\newcommand {\zero}  { {\bf 0} }
\newcommand {\one}  { {\bf 1} }

%%%%%%%%%%%%%  Iteration counter %%%%%%%%%%%%%%%%%%%%%
\newcommand {\alphao}  { {{\alpha}_{0}} }
\newcommand {\alphai}  { {{\alpha}_{i}} }
\newcommand {\alphakmm}  { {{\alpha}_{k-2}} }
\newcommand {\alphakm}  { {{\alpha}_{k-1}} }
\newcommand {\alphak}  { {{\alpha}_{k}} }
\newcommand {\betak}  { {{\beta}_{k}} }
\newcommand {\betakk}  { {{\beta}_{k+1}} }
\newcommand {\UUk}  { {\UU_{k}} }
\newcommand {\BBkm}  { {\BB_{k-1} } }
\newcommand {\BBk}  { {\BB_{k}} }
\newcommand {\BBkk}  { {\BB_{k+1}} }
\newcommand {\HHkm}  { {\HH_{k-1}} }
\newcommand {\HHk}  { {\HH_{k}} }
\newcommand {\HHkk}  { {\HH_{k+1}} }
\newcommand {\bsskm}  { {{\bss}_{k-1}} }
\newcommand {\bssk}  { {{\bss}_{k}} }
\newcommand {\bsskk}  { {{\bss}_{k+1}} }
\newcommand {\bggk}  { {{\bgg}_{k}} }
\newcommand {\bggkk}  { {{\bgg}_{k+1}} }
\newcommand {\xxo}  { {{\xx}_{0}} }
\newcommand {\ppo}  { {{\pp}_{0}} }
\newcommand {\xxi}  { {{\xx}_{i}} }
\newcommand {\xxkmm}  { {{\xx}_{k-2}} }
\newcommand {\xxkm}  { {{\xx}_{k-1}} }
\newcommand {\xxk}  { {{\xx}_{k}} }
\newcommand {\xxj}  { {{\xx}_{j}} }
\newcommand {\xxt}  { {{\xx}_{t}} }
\newcommand {\txxo}  { {{\tilde{\xx}}_{0}} }
\newcommand {\txxone}  { {{\tilde{\xx}}_{1}} }
\newcommand {\txxkm}  { {{\tilde{\xx}}_{k-1}} }
\newcommand {\txxk}  { {{\tilde{\xx}}_{k}} }
\newcommand {\txxkk}  { {{\tilde{\xx}}_{k+1}} }
\newcommand {\xxkk}  { {{\xx}_{k+1}} }
\newcommand {\xxs}  { {{\xx}^{\star}} }
\newcommand {\pps}  { {{\pp}^{\star}} }
\newcommand {\yyo}  { {{\yy}_{0}} }
\newcommand {\yykm}  { {{\yy}_{k-1}} }
\newcommand {\yyk}  { {{\yy}_{k}} }
\newcommand {\yykk}  { {{\yy}_{k+1}} }
\newcommand {\yys}  { {{\yy}^{\star}} }
\newcommand {\eeo}  { {{\ee}_{0}} }
\newcommand {\eek}  { {{\ee}_{k}} }
\newcommand {\teekm}  { {{\tilde{\ee}}_{k-1}} }
\newcommand {\teek}  { {{\tilde{\ee}}_{k}} }
\newcommand {\teekk}  { {{\tilde{\ee}}_{k+1}} }
\newcommand {\eei}  { {{\ee}_{i}} }
\newcommand {\eekm}  { {{\ee}_{k-1}} }
\newcommand {\eekk}  { {{\ee}_{k+1}} }
\newcommand {\rro}  { {{\rr}_{0}} }
\newcommand {\rri}  { {{\rr}_{i}} }
\newcommand {\rrkm}  { {{\rr}_{k-1}} }
\newcommand {\rrkmm}  { {{\rr}_{k-2}} }
\newcommand {\rrk}  { {{\rr}_{k}} }
\newcommand {\rrkk}  { {{\rr}_{k+1}} }
\newcommand {\qqk}  { {{\qq}_{k}} }
\newcommand {\ppk}  { {{\pp}_{k}} }
\newcommand {\ppt}  { {{\pp}_{t}} }
\newcommand {\ddk}  { {{\dd}_{k}} }
\newcommand {\ppkk}  { {{\pp}_{k+1}} }
\newcommand {\ppkm}  { {{\pp}_{k-1}} }
\newcommand {\bSSk}  { {\mathbf{S}_{k}} }
\newcommand {\bthetak}  { {\btheta_{k}} }

%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand {\dom}  { {\textnormal{dom}} }
\newcommand {\rank}  { {\textnormal{Rank}} }
\newcommand {\graph}  { {\textnormal{Graph}} }
\newcommand {\cond}  { {\textnormal{Cond}} }
\newcommand {\range}  { {\textnormal{Range}} }
\newcommand {\Null}  { {\textnormal{Null}} }
\newcommand {\Span}  { {\textnormal{Span}} }
\newcommand {\trace}  { {\textnormal{Trace}} }
\newcommand {\spec}  { {\textnormal{spec}} }
\newcommand {\diag}  { {\textnormal{diag}} }
\newcommand{\m}[1]{\ensuremath{{\mathtt{#1}}}}
\newcommand{\mt}[1]{{\texttt{#1}}}
%\newcommand {\m}[1]{{\texttt{#1}}}
\newcommand{\fh} { {\widehat{f}} }



%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand {\teps}  { {\tilde{\epsilon}} }
\newcommand {\teta}  { {\tilde{\eta}} }
\newcommand {\tteps}  { {\vardbtilde{\epsilon}} }
\newcommand {\tnu}  { {\tilde{\nu}} }
\newcommand {\tr}  { {\tilde{r}} }
\newcommand {\tuu}  { {\tilde{\uu}} }
\newcommand {\tvv}  { {\tilde{\vv}} }
\newcommand {\tf}  { {\tilde{f}} }
\newcommand {\tgamma}  { {\tilde{\gamma}} }
\newcommand {\bgamma}  { {\bar{\gamma}} }
\newcommand {\tSigma}  { {\tilde{\Sigma}} }
\newcommand {\tHHd}  { {{\tilde{\HH}}^{\dagger}} }
\newcommand {\tHH}  { {\tilde{\HH}} }
\newcommand {\HHd}  { {\HH^{\dagger}} }
\newcommand {\EEd}  { {\EE^{\dagger}} }
\newcommand {\HHdk}  { {\left[\HH_{k}\right]^{\dagger}} }
\newcommand {\tgg}  { {\tilde{\bgg}} }
\newcommand {\tHHk}  { {\tilde{\HH}_{k}} }
\newcommand {\hHHk}  { {\widehat{\HH}_{k}} }
\newcommand {\hHH}  { {\widehat{\HH}} }
\newcommand {\hHHd}  { {{\widehat{\HH}}^{\dagger}} }
\newcommand {\hHHdk}  { {\left[\widehat{\HH}_{k}\right]^{\dagger}} }
\newcommand {\tHHdk}  { {\left[\tilde{\HH}_{k}\right]^{\dagger}} }
\newcommand {\tggk}  { {\tilde{\bgg}_{k}} }
\newcommand {\trr}  { {\tilde{\bf r}} }
\newcommand {\fs}  { {|\mathcal{S}|} }
\newcommand {\UUt}  { {\UU^{\intercal}} }
\newcommand {\tUU}  { {\tilde{\UU}} }
\newcommand {\UUp}  { {\UU_{\perp}} }
\newcommand {\tUUt}  { {\tilde{\UU}^{\intercal}} }
\newcommand {\VVt}  { {\VV^{\intercal}} }
\newcommand {\tVV}  { {\tilde{\VV}} }
\newcommand {\tVVt}  { {\tilde{\VV}^{\intercal}} }
\newcommand {\tAAd}  { {{\tilde{\AA}}^{\dagger}} }
\newcommand {\tAA}  { {\tilde{\AA}} }



\newcommand {\wxx}  { {\widehat{\xx}} }
\newcommand {\bxx}  { {\bar{\xx}} }
\newcommand {\txx}  { {\tilde{\xx}} }
\newcommand {\tbb}  { {\tilde{\bb}} }
\newcommand {\txxt}  { {\tilde{\xx}^{(t)}} }
\newcommand {\tyy}  { {\tilde{\yy}} }
\newcommand {\byy}  { {\bar{\yy}} }
\newcommand {\yyt}  { {\yy^{(t)}} }
\newcommand {\tyyt}  { {\tilde{\yy}^{(t)}} }
\newcommand {\tzz}  { {\tilde{\zz}} }
\newcommand {\bzz}  { {\bar{\zz}} }
\newcommand {\zzt}  { {\zz^{(t)}} }
\newcommand {\tzzt}  { {\tilde{\zz}^{(t)}} }
\newcommand {\ppkt}  { {\pp_{k}^{(t)}} }
\newcommand {\QQt}  { {\QQ_{t}} }
\newcommand {\wwpt}  { {\ww^{(t)}} }
\newcommand {\tbeta}  { {\tilde{\beta}} }

\newcommand {\TT}  { {\mathbf{T}} }
\newcommand {\TTt}  { {\mathbf{T}_{t}} }

\newcommand {\BBt}  { {\mathbf{B}_{t}} }
\newcommand {\tBBt}  { {\tilde{\mathbf{B}}^{(t)}} }
\newcommand {\tBB}  { {\tilde{\mathbf{B}}} }

%\newcommand {\tTT}  { {\tilde{\mathbf{T}}} }
%\newcommand {\TTk}  { {\mathbf{T}_k} }

\newcommand {\bTT}  { {\bar{\TT} }}
\newcommand {\bQQ}  { {\bar{\QQ} }}
\newcommand {\tQQ}  { {\tilde{\QQ} }}
\newcommand {\tQQt}  { {\tilde{\QQ}^{(t)} }}
\newcommand {\tqq}  { {\tilde{\qq} }}
\newcommand {\tPP}  { {\tilde{\PP} }}
\newcommand {\ppat}  { {\pp_{a}^{(t)}} }
\newcommand {\ppbt}  { {\pp_{b}^{(t)}} }


\newcommand {\tK}  { {\tilde{K}} }
%\newcommand {\tsigma}  { {\tilde{\sigma}} }
\newcommand {\tSIGMA}  { {\tilde{\mathbf{\Sigma}}} }
\newcommand {\SIGMA}  { {\mathbf{\Sigma}} }

\newcommand{\km}{ {\KK} }
\newcommand{\kv}{ {\kk} }


%%%%%%%%%%%%%%%% Constants %%%%%%%%%%%%%%%%
\newcommand {\ts}  { {t^{\star}} }
\newcommand {\Lf}  { {L_{f}} }
\newcommand {\Lg}  { {L_{\bgg}} }
\newcommand {\LH}  { {L_{\HH}} }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\hf}{\frac12}
\renewcommand{\vec}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\grad}{\ensuremath {\vec \nabla}}
\newcommand{\curl}{\ensuremath{{\vec \nabla}\times\,}}

\newcommand{\defeq}{\triangleq}
%\newcommand{\defeq}{\mathrel{\mathop:}=}
\newcommand{\defeqr}{=\mathrel{\mathop:}}
\newcommand{\opnsubset}{\mathrel{\ooalign{$\subset$\cr
			\hidewidth\hbox{$\circ\mkern.5mu$}\cr}}}

\newcommand{\gxpk}{\bgg(\xxk) + \lambda \ppk}
\newcommand{\gxpkk}{\bgg(\xxkk) + \lambda \ppkk}
\newcommand{\gxps}{\bgg(\xxs) + \lambda \pps}
\newcommand{\hxpk}{h\left(\gxpk\right)}
\newcommand{\hxpkk}{h\left(\gxpkk\right)}
\newcommand{\hxps}{h\left(\gxps\right)}


\newcommand {\krylovt}[1]{ {\mathcal{K}_{t}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovtt}[1]{ {\mathcal{K}_{t+1}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovttt}[1]{ {\mathcal{K}_{t+2}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovone}[1]{ {\mathcal{K}_{1}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovtwo}[1]{ {\mathcal{K}_{2}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovkm}[1]{ {\mathcal{K}_{k-1}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovk}[1]{ {\mathcal{K}_{k}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovkk}[1]{ {\mathcal{K}_{k+1}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovn}[1]{ {\mathcal{K}_{n}} \left(\ensuremath{#1}\right) }
\newcommand {\krylovj}[1]{ {\mathcal{K}_{j}} \left(\ensuremath{#1}\right) }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
\newcommand{\changeurlcolor}[1]{\hypersetup{urlcolor=#1}}   
\newcommand{\red}[1]{{\leavevmode\color{red}#1}}
\newcommand{\blue}[1]{{\leavevmode\color{blue}#1}}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\newcommand{\forestgreen}[1]{\textcolor{forestgreen}{#1}}
\definecolor{amber}{rgb}{1.0, 0.75, 0.0}
\newcommand{\amber}[1]{\textcolor{amber}{#1}}


\definecolor{bananayellow}{rgb}{.8, 0.6, 0}
\newcommand{\bananayellow}[1]{\textcolor{bananayellow}{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
\newcommand{\fred}[1]{{\leavevmode\color{red}{Fred:\ #1}}}
\newcommand{\liam}[1]{{\leavevmode\color{magenta}{Liam:\ #1}}}
\newcommand{\joe}[1]{{\leavevmode\color{brown}{Joe:\ #1}}}
\newcommand{\ch}[1]{\textcolor{red}{#1}}
\newcommand{\refone}[1]{{\leavevmode\color{red}#1}}
\newcommand{\reftwo}[1]{{\leavevmode\color{blue}#1}}
\newcommand{\refboth}[1]{{\leavevmode\color{magenta}#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
\newcounter{comment}\setcounter{comment}{0}
\def\comment{\refstepcounter{comment}\textbf{Comment \arabic{comment}: }}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  


%%%%%%%%%%%%%%%%%%%%%% Framed Theorem %%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{framed} % or, "mdframed"
%\usepackage[framed,amsthm,hyperref]{ntheorem}
\usepackage{amsthm}
\usepackage[framemethod=TikZ]{mdframed}

% Define the "example" environment
\newtheorem{example}{Example}
\newtheorem*{example*}{Example}

% %%%%%%%%%%% Removed for AISTATS for plain formatting.
% %%%%%%%%%% Add plain formatting Theorem %%%%%%%%%%%%%%%%%%%%%%%%%

% \newtheorem{theorem}{Theorem}[section]
% \newtheorem{lemma}{Lemma}[section]
% \newtheorem{assumption}{Assumption}[section]

% %\theoremclass{Theorem}
% %\theoremstyle{break}
% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = green!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{theorem}{Theorem}

% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = green!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{corollary}{Corollary}

% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = green!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{lemma}{Lemma}

% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = blue!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{definition}{Definition}

% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = green!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{proposition}{Proposition}

% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = green!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{condition}{Condition}

% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = yellow!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{assumption}{Assumption}

% \theoremstyle{definition}
% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = cyan!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{example}{Example}

% \theoremstyle{definition}
% \newmdtheoremenv[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = red!3,%
% outerlinecolor = blue!70!black,%
% %innertopmargin = \topskip,%
% %innerbottommargin=\topskip,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{remark}{Remark}

% \mdtheorem[%
% linewidth = 1pt,%
% roundcorner = 10pt,%
% leftmargin = 0,%
% rightmargin = 0,%
% backgroundcolor = yellow!3,%
% %backgroundcolor = white,%
% outerlinecolor = blue!70!black,%
% splittopskip = \topskip,%
% ntheorem = true,%
% ]{informal}{Definition}


%\newcommand{\qed}{\nobreak \ifvmode \relax \else
%	\ifdim\lastskip<1.5em \hskip-\lastskip
%	\hskip1.5em plus0em minus0.5em \fi \nobreak
%	\vrule height0.5em width0.5em depth0.25em\fi}
%\newenvironment{proof}[1][Proof]{\begin{trivlist}
%		\item[\hskip \labelsep {\bfseries #1}]}{\qed\end{trivlist}}

%\newcounter{remark}
%\newenvironment{remark}[1][]{\refstepcounter{remark}\par\medskip
%	\noindent \textbf{Remark~\theremark. #1} \rmfamily}{\medskip}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  

%\usepackage{tcolorbox} % for boxed text
%\tcbuselibrary{breakable}
%\tcbuselibrary{skins}
%% use by 
% \begin{tcolorbox}[breakable,enhanced]
%\end{tcolorbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{tikz}
\usepackage{xparse}% So that we can have two optional parameters

\NewDocumentCommand\DownArrow{O{2.0ex} O{black}}{%
	\mathrel{\tikz[baseline] \draw [<-, line width=0.5pt, #2] (0,0) -- ++(0,#1);}
}

%\[ a
%\DownArrow b 
%\DownArrow[30pt][>=latex,red, ultra thick] c
%\DownArrow[2.5cm][>=stealth,blue, thick, dashed] b
%\]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings} % to inser code

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},   
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2
}
\lstset{style=mystyle}

%
%\lstset{ %
%  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
%  basicstyle=\footnotesize,        % the size of the fonts that are used for the code
%  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
%  breaklines=true,                 % sets automatic line breaking
%  captionpos=b,                    % sets the caption-position to bottom
%  commentstyle=\color{mygreen},    % comment style
%  deletekeywords={...},            % if you want to delete keywords from the given language
%  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
%  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
%  frame=single,	                   % adds a frame around the code
%  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
%  keywordstyle=\color{blue},       % keyword style
%  language=Octave,                 % the language of the code
%  morekeywords={*,...},           % if you want to add more keywords to the set
%  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
%  numbersep=5pt,                   % how far the line-numbers are from the code
%  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
%  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
%  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
%  showstringspaces=false,          % underline spaces within strings only
%  showtabs=false,                  % show tabs within strings adding particular underscores
%  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
%  stringstyle=\color{mymauve},     % string literal style
%  tabsize=2,	                   % sets default tabsize to 2 spaces
%  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5

\newcommand*\dotprod[1]{\left\langle #1\right\rangle}
\newcommand*\vnorm[1]{\left\| #1\right\|}
\newcommand*\abs[1]{\left| #1\right|}
\newcommand {\Ex} { {\mathbb E} }
\renewcommand {\Pr} { {\mathbb P} }
\newcommand {\Qr} { {\mathbb Q} }
\newcommand*\prob[1]{\Pr\left( #1\right)}
\newcommand*{\prox}{\hbox{\bf{prox}}}




%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*\bigO[1]{\mathcal O\left( #1\right)}

\newcommand\bbN{\ensuremath{\mathbb{N}}} % Real numbers
\newcommand\bbR{\ensuremath{\mathbb{R}}} % Real numbers
\newcommand\bbC{\ensuremath{\mathbb{C}}} % Real numbers
\newcommand\bbZ{\ensuremath{\mathbb{Z}}} % Integers

\usepackage{dsfont}
\newcommand*\indicfun[1]{\mathds{1}_{\left\{#1\right\}}}

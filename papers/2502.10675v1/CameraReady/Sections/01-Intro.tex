\section{Introduction}

\input{CameraReady/Figures/motivation}

Indoor scene design requires a comprehensive consideration of space partition, functional arrangement, and aesthetic creativity to determine the object selection and placement to form the scene layout. There has been a vast amount of research on indoor scene synthesis, ranging from layout optimization~\cite{Yu2011MakeIH, Merrell2011InteractiveFL, Qi2018HumanCentricIS} to various conditional scene synthesis~\cite{Wang2018DeepCP, Paschalidou2021ATISSAT, Gao2023SceneHGNHG, Tang2023DiffuSceneSG}. The goal is to automatically produce plausible, realistic, and diverse 3D indoor scenes, especially
given arbitrary user requirements. However, due to the complexity of indoor scenes, most of them are limited within the scope of training data and cannot be generalized to arbitrary conditions.

Some pioneer works~\cite{Feng2023LayoutGPTCV, Wen2023AnyHomeOG, Yang2023HolodeckLG} make use of the promising generalization ability of pre-trained large language models (LLM) to address the open-vocabulary scene synthesis task, where the LLM is responsible for interpreting any textual requirement into detailed scene configurations. The challenge lies in obtaining reasonable and physically feasible scene layouts from LLM outputs. Directly using LLM to output numerical layouts~\cite{Feng2023LayoutGPTCV} causes unreliable results with heavy object overlap and out-of-boundary, since LLM fails to understand the spatial relationship with numerical layouts. On the other hand, LLM shows good performance in generating detailed text descriptions of various scenes, but still require an approach to convert the textual descriptions into numerical layouts while maintaining the generalization of the entire pipeline. The existing methods~\cite{Wen2023AnyHomeOG, Yang2023HolodeckLG} have to pre-define textual phrases and numerical rules for several types of spatial relations to obtain the layouts. However, dense spatial relations often lead to incompatible object arrangements while coarse relations fail to capture diverse spatial placements, causing misalignment between LLM-generated configuration and the results. 

In this paper, we propose to use hierarchical scene descriptions as the intermediate representation in the LLM-assisted scene synthesis pipeline. The hierarchical structure has three levels, with the entire scene as root node, functional areas as internal nodes, and objects as leaf nodes, as illustrated in Figure~\ref{fig:hierarchy}. Our approach contains three stages. First, we prompt the pre-trained LLM to generate the hierarchical structure with text descriptions. Second, we train a hierarchy-aware network to further infer the fine-grained relative placements between objects with textual spatial relations. Taking the hierarchical structure as grounding, the network can infer reasonable relative placements in an open-vocabulary setting. Third, we develop a divide-and-conquer optimization, which optimizes each functional area separately and then arranges them to form the entire scene, to solve for the physically feasible scene layouts effectively.

The advantages of using hierarchically structured scene representation are two-fold. First, the hierarchical structure provides a rough grounding for object arrangement, which alleviates contradictory placements with dense relations and enhances the generalization ability of the network to infer fine-grained placements. Second, it naturally supports the divide-and-conquer optimization to more effectively solve for a feasible layout that matches with the LLM-generated descriptions. We perform extensive comparison experiments and ablation studies with both qualitative and quantitative evaluations. Our approach generates more reasonable and physically feasible scenes that align better with the user requirements and LLM arrangements. In addition, we show the results of open-vocabulary scene synthesis and interactive scene design as practical applications of our approach.

Our contributions are summarized as follows:
\begin{itemize}
\item We propose an LLM-assisted hierarchically-structured scene synthesis pipeline, which uses a three-level hierarchical structure to infer reasonable object arrangements.
\item We develop the hierarchy-aware network and the divide-and-conquer optimization, which takes advantage of the hierarchical structure for effective layout synthesis.
\item We conducted extensive comparison and ablation study experiments to validate the effectiveness of our approach, as well as two applications to show its practical usage.
\end{itemize}


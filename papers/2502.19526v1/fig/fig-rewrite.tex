\begin{figure}
% \[
% \plug(a, \tree_1, \tree_2) =
%      \begin{cases}
%       \gseqa {\trace_1} {\tree_2}  & \text{\emph{if}}\ \tree_1 = \gcseq{\trace_1}\\
%        \gseqb{\trace_1}{\plug (a, \tree'_1, \tree_2)}  & \text{\emph{if}}\ \tree_1 = \gseqb{\trace_1}{\tree'_1} \\
%        \gcparnamed{\trace_1}{\tree'_1}{b}{\plug (a, \tree''_1, \tree_2)}  & \text{\emph{if}}\
%         \tree_1 = \gcparnamed{\trace_1}{\tree'_1}{b}{\tree''_1} \\
%      \end{cases}
% \]


% $
%   \begin{array}{c c c}
%      \plug(a, \gcseq{\trace_1}, \tree_2) & =  & \gseqa {\trace_1} {\tree_2} \\
%      \plug(a, \ \gseqb{\trace_1}{\tree'_1}, \tree_2) & =  & \gseqb{\trace_1}{\plug (a, \tree'_1, \tree_2)} \\
%      \plug(a, \gcparnamed{\trace_1}{\tree'_1}{b}{\tree''_1}, \tree_2) & =  & \gcparnamed{\trace_1}{\tree'_1}{b}{\plug (a, \tree''_1, \tree_2)} \\
%   \end{array}
% $

\[
\begin{array}{c}
% \small
\infer[Lopt]
{
  \mathsf{length}(C) \leq \Omega
  \quad
  C' = \oracle{}(C)
  \quad
  \costof{C'} < \costof{C}
}
{
  \localstep\Omega{P; C; S}{P; C'; S}
}
\\[3ex]
\infer[ShiftLeft]
{
  G \in L_2 \\
  % \forall q \in \qubits G.~ q \not\in \qubits{L_1} \\
  % \qubits{G} \cap \qubits{L_1} = \emptyset{} \\
  \compat{L_1}{\{G\}} \\
  L'_1 =  L_1 \cup \{G\} \\
  L'_2 = L_2 \setminus \{ G \} 
}
{
  \localstep\Omega{P; \langle L_1, L_2 \rangle; S}{P; \langle L'_1, L'_2 \rangle; S}
}

\end{array}
\]
% \addtolength{\belowcaptionskip}{-18pt}

\caption{Local optimization rewrite rules.}
\label{fig:circ-rewrite}
\end{figure}

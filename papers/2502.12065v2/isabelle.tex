\usepackage{listings}
\usepackage{setspace}
\usepackage{color}

\definecolor{isarblue}{HTML}{006699}
\definecolor{isarfaintblue}{rgb}{0.0, 0.75, 1.0}
\definecolor{isargreen}{HTML}{009966}
\definecolor{red}{HTML}{990000}
\definecolor{patriarch}{rgb}{0.5, 0.0, 0.5}

\lstdefinelanguage{isabelle}{%
    keywords=[1]{theory,type_synonym,datatype,fun,abbreviation,definition,proof,lemma,theorem,qed,corollary,have,hence,also,finally,ultimately,moreover,using,\{},
    keywordstyle=[1]\bfseries\color{isarblue},
    keywords=[2]{where,assumes,shows,fixes,and,begin,end,imports},
    keywordstyle=[2]\bfseries\color{isargreen},
    keywords=[3]{if,then,else,case,SOME,let,in,O},
    keywordstyle=[3]\color{isarblue},
    keywords=[4]{ATP},
    keywordstyle=[4]\it\color{patriarch},
    keywords=[5]{show,assume,obtain},
    keywordstyle=[5]\bfseries\color{isarfaintblue},
    keywords=[6]{<proof>},
    keywordstyle=[6]\color{yellow},
}


\lstdefinestyle{isabelle}{%
  language=isabelle,
  escapeinside={&}{&},
  columns=fixed,
  extendedchars,
  basewidth={0.5em,0.45em},
  basicstyle=\singlespacing\ttfamily\small,
  mathescape,
  morecomment=[s][\bfseries\color{red}]{(*}{*)},
  morecomment=[l][\bfseries]{####},
}

\lstset{
    language=isabelle,
    mathescape=true,
    escapeinside={--"}{"},
    basicstyle={\itshape},
    keywordstyle=\rm\ttfamily\fontseries{b}\selectfont,
    keywordstyle=[2]\rm\ttfamily\fontseries{m}\selectfont,
    keywordstyle=[3]\rm,
    keywordstyle=[4]\rm,
    showstringspaces=false,
    keepspaces=true,
    columns=[c]fullflexible}
\lstset{literate=
  {'}{{${}^\prime\!$}}1
  {\\<^sup>*}{{$^*$}}1
  {\\<^sub>*}{{$_*$}}1
  {\\<^sub>A}{{$_A$}}1
  {\\<^sub>M}{{$_M$}}1
  {\\<^sub>r}{{$_r$}}1
  {\\<^sub>a}{{$_a$}}1
  {\\<A>}{{$\mathcal{A}$}}1
  {\\<O>}{{\sf o}}1
  {\\<lambda>}{{$\lambda$}}1
  {\\<Lambda>}{{$\Lambda$}}1
  {\\<phi>}{{$\phi$}}1
  {\\<Phi>}{{$\Phi$}}1
  {\\<psi>}{{$\psi$}}1
  {\\<Psi>}{{$\Psi$}}1
  {\\<theta>}{{$\theta$}}1
  {\\<Theta>}{{$\Theta$}}1
  {\\<sigma>}{{$\sigma$}}1
  {\\<Sigma>}{{$\Sigma$}}1
  {\\<gamma>}{{$\gamma$}}1
  {\\<Gamma>}{{$\Gamma$}}1
  {\\<alpha>}{{$\alpha$}}1
  {\\<beta>}{{$\beta$}}1
  {\\<omega>}{{$\omega$}}1
  {\\<cdot>}{{$\cdot$}}1
  {\\<in>}{{$\in$}}1
  {\\<le>}{{$\le$}}1
  {\\<ge>}{{$\ge$}}1
  {\\<noteq>}{{$\ne$}}1
  {\\<longrightarrow>}{{$\longrightarrow$}}1
  {\\<longleftrightarrow>}{{$\longleftrightarrow$}}1
  {\\<Rightarrow>}{{$\Rightarrow$}}1
  {\\<Longrightarrow>}{{$\Longrightarrow$}}1
  {\\<rightarrow>}{{$\rightarrow$}}1
  {\\<leftarrow>}{{$\leftarrow$}}1
  {\\<mapsto>}{{$\mapsto$}}1
  {\\<leftrightarrow>}{{$\leftrightarrow$}}1
  {\\<equiv>}{{$\equiv$}}1
  {\\<and>}{{$\wedge$}}1
  {\\<or>}{{$\vee$}}1
  {\\<And>}{{$\bigwedge$}}1
  {\\<Up>}{{$\Uparrow$}}1
  {\\<Down>}{{$\Downarrow$}}1
  {\\<Union>}{{$\bigcup$}}1
  {\\<up>}{{$\uparrow$}}1
  {\\<down>}{{$\downarrow$}}1
  {\\<times>}{{$\times$}}1
  {\\<forall>}{{$\forall$}}1
  {\\<exists>}{{$\exists$}}1
  {\\<nexists>}{{$\nexists$}}1
  {\\<union>}{{$\cup$}}1
  {\\<inter>}{{$\cap$}}1
  {\\<subset>}{{$\subset$}}1
  {\\<subseteq>}{{$\subseteq$}}1
  {\\<supset>}{{$\supset$}}1
  {\\<supseteq>}{{$\supseteq$}}1
  {\\<langle>}{{$\langle$}}1
  {\\<rangle>}{{$\rangle$}}1
  {\\<not>}{{$\neg$}}1
  {\\<box>}{{$\oblong$}}1
  {\\<bot>}{{$\bot$}}1
  {\\<top>}{{$\top$}}1
  {\\<notin>}{{$\notin$}}1
  {\\<guillemotright>}{{$\gg$}}1
  {\\<open>}{{\rm\guilsinglleft}}1
  {\\<close>}{{\rm\guilsinglright}}1
  {\\<integral>}{{$\int$}}1
  {\\<partial>}{{$\partial$}}1
  {\\<Sum>}{{$\sum$}}2
  {⇒}{{$\Rightarrow$}}1
  {⟷}{{$\leftrightarrow$}}1
  {∈}{{$\in$}}1
  {∧}{{$\wedge$}}1
  {∀}{{$\forall$}}1
  {λ}{{$\lambda$}}1
  {σ}{{$\sigma$}}1
  {β}{{$\beta$}}1
  {ω}{{$\omega$}}1
  {∑}{{$\Sigma$}}1
  {⟶}{{$\rightarrow$}}1
  {×}{{$\times$}}1
  {≡}{{$\equiv$}}1
  {≥}{{$\geq$}}1
  {≤}{{$\leq$}}1
  {⋃}{{$\bigcup$}}2
}

\section*{Appendix}

%We here provide the proofs of the Propositions.
\section{Proof of Propositions}\label{sec:appendix}

\restateUntil*
% It states that, for the signals $\signal$ if its encoded timed word $\tword$ is accepted by the transducer of Until operator $\automaton_{p_1\until_{[t_1,t_2]}p_2}$ and the output of  all the transitions for that accepting run, is $\top$, then the corresponding signals  $\signal$  satisfy $ p_1\until_{[t_1,t_2]}p_2$, and vice versa i.e.,
%             \[
%             \llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top} \iff \signal \models p_1 \until_{[t_1, t_2]} p_2
%             \]
            

    \begin{proof}To prove the above proposition, it suffices to demonstrate it in two steps/implications. Once both implications are established, it follows that the proposition holds. Thus, let us prove the proposition in 2 steps:

    \begin{tcolorbox}[boxrule=.5pt,colback=white,colframe=black!75]
    \[
        1.~~~~ \llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top} \implies \signal \models p_1 \until_{[t_1, t_2]} p_2
    \]
    \end{tcolorbox}
    
    Let us consider the following cases based on the events received in time intervals: $[0, t_1], (t_1,t_2]$.
    \begin{enumerate}
        \item Case 1: when the time interval is $[0,t_1]$:\\
        Based on the events received at $t\in [0,t_1]$, we have the following sub-cases:
        \begin{enumerate}
            \item Case 1a: $p_1$ is continuously received by the transducer at $t \in [0,t_1]$ with the output of all transitions being $\top$ and $p_2$ is received at $t\in[t_1,t_1]$ with the output of the transition being $\top$ again.

            The sequence of locations visited by the transducer for this case will be $l_0, l_1, l_2$. We see that the final location $l_2$ is reached by the transducer, thus $\llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top}$.

            According to the semantics of STL, if $p_2$ is received at $t\in[t_1, t_1]$ until that if $p_1$ is continuously received, then the STL formula is satisfied by the signal corresponding to $\tword$. Thus the proposition holds for this sub-case.
            
            \item Case 1b: $p_1$ is not true at $t \in [0,t_1]$ with the output of all transitions being $\bot_{p_1}$ and $p_2$ is true at $t\in[t_1,t_1]$.

            The proposition trivially holds here as well.\\
            
        \end{enumerate}
        \item Case 2: when the time interval is $(t_1,t_2]$:\\
         Based on the events received at $t\in (t_1,t_2]$, we have the following sub-cases:
        \begin{enumerate}
            \item Case 2a: $p_2$ is received by the transducer at $t \in (t_1,t_2]$ with the output of transition being $\top$  and $p_1$ is continuously received until that with the output of all transitions being $\top$.
            
            The sequence of locations visited by the transducer for this case will be $l_0, l_1, l_3, l_2$. We see that the final location $l_2$ is reached by the transducer, thus $\llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top}$.

            According to the semantics of STL, if $p_2$ is received at $t\in (t_1,t_2]$ until that $p_1$ is continuously received, then the STL formula is satisfied by the signal corresponding to $\tword$. Thus the proposition holds for this sub-case.

            \item Case 2b: $p_2$ is not true at $t\in(t_1,t_2]$ until that time $p_1$ is true, with the output of transition being $\bot_{p_2}$. The proposition trivially holds here as well.

            \item Case 2c: $p_2$ is true at $t\in(t_1,t_2]$ however until that time $p_1$ is not true, with the output of transition being $\bot_{p_1}$. The proposition trivially holds here as well.

            \item Case 2d: $p_2$ is not true at $t\in(t_1,t_2]$ however until that time $p_1$ is also not true, with the output of transition being $\bot_{p_1}$ or $\bot_{p_2}$ accordingly. The proposition trivially holds here as well. The proposition trivially holds here as well.
             
        \end{enumerate}
    \end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tcolorbox}[boxrule=.5pt,colback=white,colframe=black!75]
    \[
        2. ~~~~\signal \models p_1 \until_{[t_1, t_2]} p_2  \implies \llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top}
    \]
    \end{tcolorbox}



Let us consider the following cases based on the events received in time intervals: $[0, t_1], (t_1,t_2]$.
    \begin{enumerate}
        \item Case 1: when the time interval is $[0,t_1]$: an STL formula is satisfied at $t\in [0, t_1]$ by signal $\signal$, if $p_1$ of the encoded word $\tword$ of $\signal$ is continuously true and $p_2$ of the encoded word $\tword$ of $\signal$ is true at $t\in[t_1, t_1]$.

        For that encoded word $\tword$ of signal $\signal$, the transducer makes a sequence of transitions involving locations $l_0, l_1, l_2$ (with the output being $\top$ for all the transitions) and goes to the accepting state $l_2$. Thus,  $\llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top}$ and the proposition holds.

        \item  Case 2: when the time interval is $(t_1,t_2]$: an STL formula is satisfied at $t\in (t_1,t_2]$ by signal $\signal$, if $p_2$ of the encoded word $\tword$ of $\signal$ is received at $t\in (t_1,t_2]$ and  $p_1$ of the encoded word  $\tword$ of $\signal$  is continuously true until that.

        For that encoded word $\tword$ of signal $\signal$, the transducer makes a sequence of transitions involving locations $l_0, l_1, l_3, l_2$ (with the output being $\top$ for all the transitions) and goes to the accepting state $l_2$. Thus,  $\llangle\automaton_{\until}\rrangle(\tword) = \bm{\omega}_{\top}$ and the proposition holds.\\
    \end{enumerate}
\end{proof}

% \restateRelease*
% \begin{proof}
%     The proof is similar to that of \cref{propo1} and is omitted here.
% \end{proof}

\restateComposition*
\begin{proof}
    Let us prove this proposition using induction on the predicates. There will be two distinct cases based on $op\in \{\land, \lor\}$. Let us prove this proposition for $op= \{\land\}$. Similar proof will follow for $op= \{\lor\}$.\\
    
    \noindent \textit{Induction basis.} Consider STL formula $\varphi_1 \land \varphi_2$. Let us consider following cases:

    \begin{enumerate}
        \item Case 1: $\phi_1 \until_{[t_1, t_2]} \phi_2 \land \top$ \\
        where $\varphi_1 \equiv \phi_1 \until_{[t_1, t_2]} \phi_2$ and $\varphi_2 \equiv \top$.\\
        
        (Similar proof will follow for  $\top \land \phi_1 \until_{[t_1, t_2]} \phi_2$.)\\
        
        $\top$ (the true predicate) represents a property or a transducer that is always true, regardless of time constraints or inputs. A timed transducer for $\top$ would have only one state, an "accepting" state with a self-loop transition on this state allowing any input or no input to be processed at any time and $\top$ as output. 

        The structure (states and transitions) of $\land$-product of transducers $\automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2}$ and $\automaton_{\top}$ will be the similar as transducer $\automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2}$ (with $\top$ also an output for all transitions indicating predicate $\top$ is true).

        And from proposition \ref{propo1}, we will have following results:        
        $\llangle\automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2} ~\times_{\land} ~\automaton_{\top}\rrangle(\tword) = \bm{\omega}_{\top} \iff \signal \models \phi_1 \until_{[t_1, t_2]} \phi_2 ~\land ~\top$.
        Thus, the proposition holds.
        
        \item Case 2: $p_1 \release_{[t_1, t_2]} p_2 \land \top$ \\
        (or similarly, $\top \land p_1 \release_{[t_1, t_2]} p_2$)\\

        Similar proof follows for this case as well.
    \end{enumerate}

    \noindent \textit{Induction Step.}
    \begin{enumerate}
        \item Case 1: $\phi_1 \until_{[t_1, t_2]} \phi_2 \land \phi_3 \until_{[t_3, t_4]} \phi_4$\\
        where $\varphi_1 \equiv \phi_1 \until_{[t_1, t_2]} \phi_2$ and $\varphi_2 \equiv \phi_3 \until_{[t_3, t_4]} \phi_4$.

        Let us consider sub-cases based on time intervals.
        \begin{enumerate}
            \item Case: when the time interval is $[0,t_1]$:
            \begin{enumerate}
                \item Case: $\phi_1$ and $\phi_3$ are continuously received by the transducer at $t \in [0,t_1]$ and  $t \in [0,t_3]$ respectively, with the output of all transitions being $\top$. $\phi_2$ and $\phi_4$ are received at $t\in[t_1,t_1]$ and  $t\in[t_3,t_3]$ respectively with the output of the transition being $\top$ again.
    
                The sequence of locations visited by the transducer $\automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2} \times_{\land} \automaton_{\phi_3 \until_{[t_3, t_4]} \phi_4}$ for this case will be $(l_0, l_0'), (l_1, l_1'), (l_2,l_2')$ where $\{l_0, l_1, l_2\} \in L $ of $ \automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2}$ and $\{l_0', l_1', l_2'\} \in L'$ of $\automaton_{\phi_3 \until_{[t_3, t_4]} \phi_4}$. We see that the final location $(l_2,l_2')$ is reached, thus $\llangle\automaton_{\automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2} \times_{\land} \automaton_{\phi_3 \until_{[t_3, t_4]} \phi_4}}\rrangle(\tword) = \bm{\omega}_{\top}$.
    
                This is inline with the semantics of STL. Thus,
                $\llangle\automaton_{\varphi_1}\times_{op}\automaton_{\varphi_2}\rrangle(\tword) = \bm{\omega}_{\top} \implies \signal \models \varphi_1\,op\,\varphi_2$. 
                
                Similarly, following step 2 of proof of  proposition \ref{propo1} proof of $\signal \models \varphi_1\,op\,\varphi_2  \implies \llangle\automaton_{\varphi_1}\times_{op}\automaton_{\varphi_2}\rrangle(\tword) = \bm{\omega}_{\top} $ will follow. Thus, the proposition holds.
                
                \item Case: $\phi_1$ and $\phi_3$ is not true at $t \in [0,t_1]$ and $t \in [0,t_3]$ respectively with the output of all transitions being $\bot_{\phi_1}$ and $\bot_{\phi_3}$.  $\phi_2$ and $\phi_4$ is true at $t\in[t_1,t_1]$ and $t\in[t_3,t_3]$ respectively.
    
                The proposition trivially holds here.\\
        \end{enumerate}

            
            \item Case: when the time interval is $(t_1,t_2]$:\\
            Based on the events received at $t\in (t_1,t_2]$, we have the following sub-cases:
            \begin{enumerate}
                \item Case: $\phi_2$ and $\phi_4$ are received at $t \in (t_1,t_2]$ and $t \in (t_3,t_4]$ respectively with the output of transition being $\top$  and $\phi_1$ and $\phi_3$ are continuously received until that, with the output of all transitions being $\top$.
                
                The sequence of locations visited by the transducer for this case will be $(l_0, l_0'), (l_1,l_1'), (l_3,l_3'), (l_2,l_2')$. Thus, we see that the final location $(l_2,l_2')$ is reached, thus $\llangle\automaton_{\automaton_{\phi_1 \until_{[t_1, t_2]} \phi_2} \times_{\land} \automaton_{\phi_3 \until_{[t_3, t_4]} \phi_4}}\rrangle(\tword) = \bm{\omega}_{\top}$.
    
                This is inline with the semantics of STL. Thus the proposition holds.
    
                \item Case: $\phi_1$ and $\phi_3$ is true at $t \in (t_1,t_2]$ and $t \in (t_3,t_4]$ respectively. $\phi_2$ and $\phi_4$ are not true at $t\in(t_1,t_2]$ and $t \in (t_3,t_4]$ respectively with the output of transition being $\bot_{p_2}$ and $\bot_{p_4}$.
    
                The proposition trivially holds here.\\
    
                \item Case: $\phi_1$ and $\phi_3$ are not true at $t\in(t_1,t_2]$. $\phi_2$ and $\phi_4$ are also not true until that. The output of all transitions being $\bot_{p_1}$, $\bot_{p_2}$, $\bot_{p_3}$ or $\bot_{p_4}$.
    
                 The proposition trivially holds here.\\

                 \item Case: $\phi_1$ and $\phi_3$ are not true at $t\in(t_1,t_2]$. However, $\phi_2$ and $\phi_4$ are true until that. The output of all transitions being $\bot_{p_1}$ or $\bot_{p_2}$.
                \end{enumerate} 
        \end{enumerate}
        
        \item Case 2: $p_1 \release_{[t_1, t_2]} p_2 \land p_3 \release_{[t_3, t_4]} p_4$\\
        where $\varphi_1 \equiv p_1 \release_{[t_1, t_2]} p_2$ and $\varphi_2=p_3 \release_{[t_3, t_4]} p_4$

        \item Case 3: $p_1 \release_{[t_1, t_2]} p_2 \land p_3 \until_{[t_3, t_4]} p_4$\\
        where $\varphi_1 \equiv p_1 \release_{[t_1, t_2]} p_2$ and $\varphi_2\equiv  p_3 \until_{[t_3, t_4]} p_4$

        \item Case 4: $p_1 \until_{[t_1, t_2]} p_2 \land p_3 \release_{[t_3, t_4]} p_4$\\
        where  $\varphi_1 \equiv p_1 \until_{[t_1, t_2]} p_2$ and $\varphi_2\equiv \varphi_1  p_3 \release_{[t_3, t_4]} p_4$

        Cases 2, 3 and 4 can be proved similarly.
    \end{enumerate}

      
\end{proof}






















% \section{Additional validation of performance in other scenarios}
% We performed additional validation in other cases, such as battery charging systems in AVs. We consider the scenario that under normal conditions, the current remains within a safe range (below 10 amps) during a specified interval. However, if the voltage reaches 4.2 volts within this time frame, the system can recognize this as a signal to relax the current limit. The voltage condition (4.2 volts) could indicate a specific state, such as a change in the charging mode, where it is safe to allow higher currents.

% To ensure such safe operating conditions, one can define the following STL property: $(V==4.2) \release_{[2,10]} (I<10)$  and monitor this property in real time. Such monitoring is essential in applications like electric vehicles or electronic devices, where excessive current could lead to overheating or damage, making strict limits crucial for system safety and longevity.

% The original generated signals of $V$ and $I$ are given in the top plots in Figure \ref{fig:battery}. The corresponding corrected signals are given in the bottom plots in Figure \ref{fig:battery}, where we observe that, during the interval from 2 to 10 seconds, the current $I$ is minimally adjusted to stay below 10 as long as the voltage $V$ is not equal to 4.2.
% \begin{figure*}[htp]
%     \centering
%     \includegraphics[width=1\linewidth]{figures/battery_uncorrected.png}
%     \includegraphics[width=1\linewidth]{figures/battery_corrected.png}
%     \caption{Generated vs Corrected V and I signals}
%     \label{fig:battery}
% \end{figure*}

%  Table \ref{Tab:performance2} gives the enforcement time (measured in ms) against the number of violating points. It suggests that the enforcement time increases (piecewise) linearly with a linear increase in the number of violations.
 
% \begin{table}[H]
% \begin{tabular}{@{}|l|ll|@{}}
% \toprule
% \multicolumn{1}{|c|}{\multirow{2}{*}{$\#v$}} & \multicolumn{2}{c|}{$(x_1==4.2)\release_{[2,10]}(x_2<10)$}     \\ \cmidrule(l){2-3} 
% \multicolumn{1}{|c|}{}                   & \multicolumn{1}{c|}{$len(\sigma)$} & \multicolumn{1}{c|}{$T(ms)$} \\ \midrule
% 2                                        & \multicolumn{1}{l|}{5}          & 0.086                      \\ \midrule
% 4                                        & \multicolumn{1}{l|}{7}          & 0.146                      \\ \midrule
% 6                                        & \multicolumn{1}{l|}{9}          & 0.156                      \\ \midrule
% 8                                        & \multicolumn{1}{l|}{11}         & 0.173                      \\ \midrule
% 10                                       & \multicolumn{1}{l|}{13}         & 0.19                       \\ \midrule
% 12                                       & \multicolumn{1}{l|}{15}         & 0.199                      \\ \midrule
% 14                                       & \multicolumn{1}{l|}{14}         & 0.215                      \\ \midrule
% 16                                       & \multicolumn{1}{l|}{17}         & 0.262                      \\ \midrule
% 18                                       & \multicolumn{1}{l|}{19}         & 0.265                      \\ \midrule
% 20                                       & \multicolumn{1}{l|}{17}         & 0.242                      \\ \bottomrule
% \end{tabular}
% \caption{Eﬀect on time taken ($T(ms)$) by enforcement by varying the number of violations ($v$).}
% \label{Tab:performance2}
% \end{table}
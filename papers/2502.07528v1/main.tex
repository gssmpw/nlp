%Version 10 February 2025

\documentclass[pdflatex,sn-mathphys-num]{sn-jnl}
% \documentclass{article}


%%%% Standard Packages
\usepackage{graphicx}%
\usepackage{multirow}%
\usepackage{amsmath,amssymb,amsfonts}%
\usepackage{amsthm}%
\usepackage{mathrsfs}%
\usepackage[title]{appendix}%
\usepackage{xcolor}%
\usepackage{textcomp}%
\usepackage{manyfoot}%
\usepackage{booktabs}%
\usepackage{algorithm}%
\usepackage{algorithmicx}%
\usepackage{algpseudocode}%
\usepackage{listings}%
\usepackage{eurosym}%
\usepackage{longtable}%
\usepackage{hyperref}%


\raggedbottom
%%\unnumbered% uncomment this for unnumbered level heads

\begin{document}

\title[Article Title]{Forecasting the future development in quality and value of professional football players for applications in team management}

%%=============================================================%%
%% GivenName	-> \fnm{Joergen W.}
%% Particle	-> \spfx{van der} -> surname prefix
%% FamilyName	-> \sur{Ploeg}
%% Suffix	-> \sfx{IV}
%% \author*[1,2]{\fnm{Joergen W.} \spfx{van der} \sur{Ploeg} 
%%  \sfx{IV}}\email{iauthor@gmail.com}
%%=============================================================%%

\author*[1]{\fnm{Koen W.} \spfx{van} \sur{Arem}}\email{k.w.vanarem@tudelft.nl}

\author[2]{\fnm{Floris} \sur{Goes-Smit}}

\author[1]{\fnm{Jakob} \sur{S\"ohl}}

\affil[1]{\orgdiv{Delft Institute of Applied Mathematics}, \orgname{Delft University of Technology}}

\affil[2]{\orgname{SciSports}}

\abstract{Transfers in professional football (soccer) are risky investments because of the large transfer fees and high risks involved. Although data-driven models can be used to improve transfer decisions, existing models focus on describing players’ historical progress, leaving their future performance unknown. Moreover, recent developments have called for the use of explainable models combined with uncertainty quantification of predictions. This paper assesses explainable machine learning models based on predictive accuracy and uncertainty quantification methods for the prediction of the future development in quality and transfer value of professional football players. Using a historical data set of data-driven indicators describing player quality and the transfer value of a football player, the models are trained to forecast player quality and player value one year ahead. These two prediction problems demonstrate the efficacy of tree-based models, particularly random forest and XGBoost, in making accurate predictions. In general, the random forest model is found to be the most suitable model because it provides accurate predictions as well as an uncertainty quantification method that naturally arises from the bagging procedure of the random forest model. Additionally, our research shows that the development of player performance contains nonlinear patterns and interactions between variables, and that time series information can provide useful information for the modeling of player performance metrics. Our research provides models to help football clubs make more informed, data-driven transfer decisions by forecasting player quality and transfer value.}

\keywords{Football analytics, football scouting, explainable machine learning, player quality, player value, practitioner-oriented research, player development prediction, uncertainty quantification}

\maketitle

\section{Introduction}\label{section: introduction}
Transfers in professional football (soccer) are a risky business because the average transfer fee has increased in recent years \citep{YangKoenigstorferPawlowski2024} and because these fees can be characterized as investments with high risks where large fees are involved \citep{McHaleHolmes2022}. Extensive knowledge about players is beneficial to make well-informed decisions about these complex transfer investments in football. This paper shows how football players' development in quality and monetary value can be predicted to enhance decision making.

Models providing information about player quality and value recently emerged with the evolution of data-driven player performance indicators. Improvements in data-capturing technologies resulted in large data sets containing in-game data about football players, which provide the opportunity to obtain more complex variables on player performance \citep{Rein2016, HeroldGoes2019}. Numerous player performance indicators have been introduced since then. An example is the expected goals (xG) indicator which values shot chances and shooting ability \citep{Green2012, EggelsvanElkPechenizkiy2016, AnzerBauer2021, MeadOHareMcMenemy2023}. Next to such action-specific models, assessment methods exist for general player performance, which can be divided into bottom-up and top-down ratings \citep{HvattumGelade2021}. Expected threat (xThreat) \citep{Rudd2011, VanRoy2020, VanArem2024} and VAEP \citep{Decroos2019, Decroos2020, VanHaaren2021, MendesNeves2022} are examples of bottom-up ratings that quantify action quality and use the quality of the actions to create general ratings. Top-down ratings such as plus-minus ratings \citep{SeaboHvattum2015, KharratMcHalePenaLopez2020, PantusoHvattum2021, Hvattum2020, DeBaccoWangBlei2024}, Elo ratings adjusted for team sports \citep{WolfSchmittSchuller2020}, and SciSkill algorithm \citep{SciSkill2020} distribute credit of player performance based on the result of a team as a whole. For the monetary value of players, many models about the estimation of transfer fees and market values have been introduced and provide indicators of the current value of football players \citep{FranceschiBrocardFollerGouguet2023}. These performance and financial models describe the quality and monetary value of a football player and these can complement traditional scouting reports. This allows managers and technical directors of football clubs to make better-informed transfer decisions.

These models for the player quality and the transfer value give information about the quality and financial value of football players up to that moment, although a transfer decision regards whether a football player should be part of a team in the future. To make better-informed transfer decisions, team managers and technical directors also need insights into the development of the indicator values that describe the financial value and player performance in the future. This paper examines the training of supervised learning models that forecast the development in player quality and transfer value of players one year ahead.

To this end, two prediction problems are studied: forecasting the quality of a football player and forecasting their transfer value one year ahead. In the first prediction problem, models are trained to predict the development of a top-down quality indicator, the SciSkill \citep{SciSkill2020}. The second prediction problem concerns the prediction of the development of the player value, described by the Estimated Transfer Value (ETV) \citep{ETV2020}. The resulting models of these prediction problems offer insight into the question of whether a player will be worth the money in the future. These models thus provide critical insights for the managerial staff of a professional football club.

To further improve the usability of the research results for staff at football organizations, the findings of models should be presented such that they can be utilized by football clubs in practice as stressed by \citet{HeroldGoes2019}. This means that models should not only be assessed on predictive accuracy but also on explainability and methods for uncertainty quantification \citep{DaviesBransenDevos2024}. To this end, only explainable supervised learning models are used in this research and the models are assessed on their methods for uncertainty quantification. To focus even more on the applicability for practitioners, the accuracy of the models is partly determined by estimating the loss values of different groups of football players, because certain types of football players are more important from a practitioner's perspective. 

Thus, the aim of this research is to find the most suitable explainable machine learning model to forecast player performance with respect to predictive accuracy and methods for uncertainty quantification. This is done by training supervised models to predict the development of the player quality (SciSkill) and the player value (ETV) one year ahead. To bridge the gap between research and practitioners, only explainable machine learning models are considered and they are assessed on both the predictive quality and the methods for uncertainty quantification. In this way, new models are constructed that can assist in making transfer decisions in football.

This paper is organized as follows: The scientific background on existing literature is given in \autoref{section: background}. The long-term forecasting of player development is then studied for the two prediction problems, of which the methods are described in \autoref{section: methods}. The results of the models in the prediction problem of the player quality are presented in \autoref{res:prediction problem player quality (sciskill)} and the results of the player value in \autoref{res:prediction problem player value (etv)}. The conclusions are summarized in \autoref{section: conclusion} followed by a discussion of the research in \autoref{section: discussion}.


\section{Background}\label{section: background}
\subsection{Existing indicators}
In recent years, the increasing amount of available data in football has driven the introduction of methods to rate individual football players \citep{ArntzenHvattum2021}. The performance of a professional football player has traditionally been determined via expert judgment based on video data and statistics describing the frequency of in-game events.
Data-driven models have offered the possibility to reduce the bias in assessments and improve the consistency of the judgment of both player quality and player value. In this way, these models have provide new and consistent insights into the quality and monetary value of football players, which has aided in transfer decisions.

\subsubsection{Player performance}
The creation and the comparison of models for player performance have revealed new challenges. Because teams can have different aims in football and can apply various tactics, there does not exist a ground truth for player performance \citep{DaviesBransenDevos2024}. A player can, for instance, be instructed to keep the ball in possession, which leads to the player performing fewer actions that might result in scoring a goal. Because of this, there is a lack of ground truth, and various models exist that describe different aspects of the game.

Some models define the players' quality by their actions. Although action-specific models exist \citep{Green2012, EggelsvanElkPechenizkiy2016, GoesKempeMeerhoffLemmink2018,  AnzerBauer2021, MeadOHareMcMenemy2023}, methods to assess the quality of all types of actions have been introduced that generalize the action specific models. These general models often define a `good' action as one that increases the probability of scoring and decreases the probability of conceding a goal. The VAEP model by \Citet{Decroos2019} calculates the probability of scoring given the last three actions including in-game context. Because the involved machine learning techniques are considered a black-box model by practitioners, the authors in \cite{Decroos2020, VanHaaren2021} introduced methods to make the VAEP model more accessible for practitioners. The research by \Citet{Decroos2020} shows that VAEP models with GAMs provide competitive predictive performance while being more interpretable for practitioners. \Citet{VanHaaren2021} adjusted the VAEP model to use fuzzy assignments to pitch zones instead of a location on the field to relate the model to concepts that are known to practitioners. Further research on the VAEP models has been carried out by \Citet{MendesNeves2022}, who have introduced the Intend VAEP (I-VAEP) and Outcome VAEP (O-VAEP) models, which describe the VAEP value of the intent of players and the outcome of their actions, respectively. The authors have studied these VAEP values over time and found that the quality of a football player can be considered as a continuous process over a player's career. A comparable framework is the xThreat model by \Citet{Rudd2011}, which only considers the current situation, defined by the location of the ball-possessing player, to estimate the probabilities of the ball transitioning to somewhere else on the pitch. This is modeled by a Markov chain, which can be used to describe the probabilities of scoring before and after each action to find the quality of an action. \Citet{VanRoy2020} have compared the xThreat and VAEP models and have found that, although the xThreat model is more interpretable to practitioners, it can only take into account the position of an action and excludes contextual information such as the position of defenders from its model. This means that there is a trade-off between explainability and the inclusion of in-game context when choosing either VAEP or xThreat models. \Citet{VanArem2024} have extended the xThreat model by including variables describing the defensive situation and height of the ball. This Extended xThreat model can take into account in-game context like the VAEP model, while maintaining explainability as an xThreat model. 

The bottom-up ratings like xThreat and VAEP describe the quality of a professional football player by assessing in-game on-the-ball actions. These on-the-ball actions are often offensive actions and they are better at capturing the quality of attackers and attacking midfielders, which indicates that a bias occurs when these models are studied. This bias makes it harder to assess the quality of defensive players and it can be reduced by using top-down models that describe player quality using the lineups and outcomes. Plus-minus ratings are such ratings that were first used in ice hockey and basketball \citep{KharratMcHalePenaLopez2020}, and were later applied to football by \Citet{SeaboHvattum2015}. For plus-minus ratings, the game is partitioned into game segments that contain the same lineups, which correspond to the data points in the data set. In this data set, the result of the game segment, the goal difference, for example, is the dependent variable. Indicators describing whether a player was active in the segment are the independent variables. Linear regression is then applied to estimate the influence of players on the results. The coefficients of the regression describe the average impact of a player on the game result and give an indicator for player performance over the period of time covered by the data. Because substitutions are infrequent in football, a game does not have many game segments with different lineups. Moreover, football is a low-scoring sport. This creates a situation where a low number of segments with limited distinction in outcomes must be used to infer player quality. To deal with this, other quantities have been used as the dependent variable to describe the result of a segment like the expected number of goals (xG), the expected number of points (xP), and the created VAEP values by \citet{KharratMcHalePenaLopez2020} and \citet{HvattumGelade2021}. \citet{PantusoHvattum2021} additionally showed the potential of taking age, cards, and home advantage into account, and \citet{Hvattum2020} illustrated how separate defensive and offensive ratings can be obtained. Because putting a player in the lineup is an action that a coach performs, \citet{DeBaccoWangBlei2024} adapted the plus-minus ratings using a causal model to better describe the influence of the selection of a player. These studies show how plus-minus ratings have been adapted to the application of rating players in football.

Whereas the plus-minus ratings describe the quality of a player using multiple historical games, there also exist models that determine the quality of a player after each game using the lineups and final score. Elo ratings are such ratings and were originally developed to evaluate performance in one-on-one sports. The concept was subsequently adapted to the game of football by \citet{WolfSchmittSchuller2020}. This adapted algorithm provides ratings for each individual football player and calculates the team rating via the average of players in a game weighted by the number of minutes played. The ratings are then used to predict the match outcome using a fixed logistic function, and after each game, the individual ratings are adjusted. If the outcome is better than predicted, the player rating is increased and if the outcome is worse than expected, it is decreased. The authors also introduced an indicator for player impact to deal with the fact that this rating undervalues good players at below-average teams. The SciSkill \citep{SciSkill2020} is a model that generalizes the Elo rating in several aspects. Instead of only considering one player quality, it describes football players using a defensive rating and an offensive rating. These offensive and defensive scores are then combined to obtain one value, the SciSkill. For each game, the outcome of the game is predicted using a model via an expectation-maximization algorithm. After the prediction, the SciSkill is updated by adjusting the SciSkill values based on the difference with the actual game result.
Compared to the Elo algorithm, the SciSkill model extracts more detailed information from the matches and describes the player quality more elaborately. 

\subsubsection{Player value}
In contrast with player quality, there does exist a ground truth for the concept of player values. The value of a transfer fee is based on the value of the player for each of the involved clubs and historical transfers of similar players \citep{PoliBessonRavenel2022}. Thus, the historical values of these fees can be used to predict the transfer value of a player albeit at the cost of some selection bias.

A well-known medium that describes the value of a player is Transfermarkt. This company uses crowd estimation to assign values to players \citep{HermCallsenBrackerKreis2014}. These market values describe the general value of a player and do not take into account the temporary situation of a football player like the current club and contract length. This means that they describe a different quantity than the expected value of a transfer fee. Nonetheless, these values are strongly correlated with the real transfer fees as shown by \citet{HermCallsenBrackerKreis2014}. Therefore, both market values by Transfermarkt and transfer values are often used interchangeably when describing the monetary value of a football player. 

Many studies have been performed to describe the monetary value of a football player based on data. Most of these studies used linear regression as found by \citet{FranceschiBrocardFollerGouguet2023}. These linear models were then used to find what variables have a significant linear dependence on the value of a football player. The study by \citet{FranceschiBrocardFollerGouguet2023} considered 111 trained models that were used in the scientific literature to investigate the transfer value of a football player. The vast majority (85\%) of the models are based on ordinary least squares. The authors also have shown the importance of different variables in the considered models. For instance, they have found that age, the square of the age, and the number of matches played by a player are frequently studied variables. These variables are also most often found to be significant. Players frequently increase in value as they get better with experience that is gained over the years, but they also decrease in value as a player loses the potential to improve when getting older. Consequently, the influence of age is often measured with a quadratic term. Similarly, the number of games played can be expected to be an important variable because players gain experience by playing games, which makes them more valuable. Moreover, players who play a lot of games are often the better players on a team. This explains why these variables are important as found by \citet{FranceschiBrocardFollerGouguet2023}. Their study also shows that almost no variables describing defensive behavior are considered when other researchers trained models to describe transfer values. As a consequence, the resulting models can be expected to describe the value of offensive players better than that of defensive players. In addition, the linear models in these studies are mostly trained to determine the influence of variables and the transfer value of a football player. These models are generally not trained and tested for out-of-sample prediction, which limits the application of predicting based on new unseen data. 

In contrast, some machine learning studies have been performed to give out-of-sample predictions. This makes it possible to predict the transfer fees for unseen situations or new players. \citet{AlAsadiTasdemir2022} have trained multiple models to predict market values of football players with features from the video game FIFA. They have found that a random forest model gives improved prediction over linear methods. \citet{ArrulSubramanianMafas2022} have studied the application of artificial neural networks for the same problem, also considering features from the video game FIFA. They obtain similar loss values as the random forest model of \citet{AlAsadiTasdemir2022}. The research by \citet{BehravanRazavi2021} introduces a methodology to train a support vector regression model via particle swarm optimization for the prediction of market values. Although the data set is somewhat similar to the studies above, this model attains worse loss values. In the study of \citet{YangKoenigstorferPawlowski2024}, random forests, GAMs, and QAMs are applied to predict the transfer fees of players based on variables describing the player. The authors have inferred from their random forest model that the expenditure of the buying club and the income of the selling club are important features in predicting the transfer fee, as well as the age and the remaining contract duration. This research additionally illustrates how GAMs and QAMs can be used to investigate the dependency between the player transfer value and the given features. The QAM models show that this relation varies for different quantiles, indicating the need to study the influence of models on different groups of players. On the other hand, the GAMs show that the relationship between the transfer values and the features is often nonlinear. A study with extensive types of player performance metrics as features has been performed by \citet{McHaleHolmes2022}, in which linear regression, linear mixed effects, and XGBoost models have been trained. These models not only include statistics such as the number of minutes played, height, and position, but also plus-minus ratings based on xG, expert ratings from the video game FIFA, and GIM ratings, which are similar to VAEP ratings. The results show that the best predictive performance is attained by the XGBoost model, although the linear mixed effects with the buying and selling clubs as random effects also provide good results. Their results indicate that their model outperforms Transfermarkt market values when predicting the transfer fees on average, although the market values are a better predictor for transfers of more than \euro20 million. These studies show how supervised learning can be used to obtain models that predict the value of a football player. They show that nonlinear methods generally predict more accurately and that the patterns can differ for different groups of players. 

\subsection{Predicting future values}
Although many studies in sports analytics are concerned with the quantification of the quality and monetary value of football players at the present moment, only limited work has been done on the future development of player performance. \citet{ApostolouTjortjis2019} have conducted a small-scale study with the aim to predict the number of future goals of the two football players Lionel Messi and Luis Suárez using a random forest, logistic regression, a multi-layer perception classifier, and a linear support vector classifier. \citet{ChazanPantzalisTjortjis2020} have predicted the expert ratings in the next season of 59 center-backs in the English Premier League based on one season of player attributes from a popular football manager simulation game. Their method uses a linear regression model to describe the in-sample patterns. \citet{GiannakoulasPapageorgiouTjortjis2023} have trained linear regression, random forest, and multi-layer perceptron models to predict the number of goals of a football playe rin a season before the start of the corresponding season. Their dataset entails around 800 football players. Similarly, the models by \citet{MarkopoulouPapageorgiouTjortjis2024} have been trained to predict the number of goals by looking at the creation of different models per competition. This study on 424 football players shows that the best results are often obtained using XGBoost models for this prediction problem and that making different models for different competitions might be beneficial. 

\citet{BarronBallRobinsSunderland2018} have tried to predict the tier within the English first three leagues in which a football player would play next season as an indicator of player quality. Three artificial neural networks are trained to predict in which league a player would play with the data of 966 football players. Their models are only able to recognize the differences between players in the lowest and highest tiers (League One and the English Premier League). 

Little literature exists about the prediction of the future transfer values of football players. \citet{Baouan2022} have applied lasso regression and a random forest model to identify important features for the development of around 22,000 football players. They have trained these supervised models for players of different positions to predict a player's transfer value two years in the future based on performance statistics. The feature importances of the models show, for instance, that the average market value of a league is an important feature for the future values of players in that league. Although cross-validation is performed for the hyperparameter tuning, this study focuses on finding in-sample patterns.

Our research treats forecasting of both player quality and transfer value. The current paper builds on the existing literature about forecast player performance by studying the long-term forecasting of a model-based player quality indicator on a larger data set. Additionally, this research avoids the bias in current literature that better describes offensive players by using a more general top-down rating. Our research contributes to the existing knowledge of forecasting the monetary value because the models are trained to perform out-of-sample prediction, which makes it possible to apply it to unseen situations. Moreover, the combination of forecasting development of both in player quality and transfer value gives a comprehensive summary of the most important factors in transfer decisions. In this way, this paper fills a gap in the literature by forecasting the development of model-based indicators for player quality and value on a significant data set in a predictive setting.

\section{Methods}\label{section: methods}
The goal of this study is to find the most suitable machine learning model to forecast the development in player performance with respect to predictive accuracy and uncertainty quantification methods. The assessment of the uncertainty quantification methods is performed using literature on the models and is addressed in the conclusion (\autoref{section: discussion}). To compare the predictive performance, the models are trained to predict player performance indicators one year ahead in two prediction problems and the corresponding loss values are determined. The two prediction problems concern the prediction of the development in player quality based on the top-down SciSkill rating and the development in monetary value described by the Estimated Transfer Value (ETV) model.

For the player quality prediction problem, data is available from 2014 up to 2022, while the data for the player value covers the years 2016 up to 2021. Because the data of player performance indicators is often dependent over time \citep{DaviesBransenDevos2024, MendesNeves2022}, time-dependent train-test splits are applied to study the predictive performance on unseen data. In both case studies, all data up to 2020 is considered as the training set, and from 2021 and later as the test set. This is visualized in \autoref{fig: distribution years}. Beforehand, 5\% of all data points were left out of both data sets based on stratified sampling for internal studies by the data provider. The root mean square error (RMSE) and mean absolute error (MAE) are determined for these test sets, and performance in the RMSE is considered the most important. The losses are determined on different parts of the test set. First, the loss values of the RMSE and MAE are calculated using the whole test sets. Second, the loss function of the RMSE is also considered for different ages on the test sets because estimating the potential of a player is mostly interesting for young ages. Third, the RMSE is studied on important subgroups of players, like players with large positive or negative development, players with good performance, or players with a high transfer value. By determining the test losses separately on the general population of players, young players, and important subgroups of players, the models are studied on their predictive performance.
\begin{figure}[ht!]
    \centering
    \includegraphics[width=0.75\linewidth]{figures/visualization_train_test.png}
    \caption{A visualization of the partition of the years in the test and training set in both prediction problems.}
    \label{fig: distribution years}
\end{figure}

To select the best hyperparameters of the models in the case studies, Bayesian optimization \citep{Louppe2016} is applied to find hyperparameters minimizing the RMSE loss. Because of the time dependencies of player performance indicators, an adjusted version of cross-validation is implemented that splits per year and incrementally grows the training set as visualized for the player quality prediction problem in \autoref{fig:adjusted_cross_validation}. After the hyperparameter tuning, the models are trained on the complete training set with the optimized hyperparameters.

\begin{figure}[ht!]
    \centering
    \includegraphics[width=0.7\linewidth]{figures/adjusted_cross_validation.png}
    \caption{A visualization of the distribution of the data points in the test and training set for the player quality prediction problem of the adjusted version of cross-validation used for hyperparameter optimization.}
    \label{fig:adjusted_cross_validation}
\end{figure}

\subsection{Player quality: SciSkill} 
The first prediction problem concerns predicting the development in the subsequent year of player quality described by an EM algorithm called the SciSkill \cite{SciSkill2020}, which is a generalization of the Elo rating as discussed in \autoref{section: background}. The dataset is restructured to contain monthly data points describing the situation of each player at that time. Each monthly data point consists of the features and the dependent variable. The dependent variable is the difference between the player quality one year ahead and the current player quality value, which is the development in player quality in one year. The features consist of 86 handcrafted features describing for instance the month of year, the current player performance, league strength, time since the most recent game, player characteristics, time series information of the SciSkill, the club's transfer situation, and the difference in quality between the player and his teammates. The dependent variable and features are described in \autoref{Appendix: Table dependent variable player quality} and \autoref{Appendix: Table features player quality}.

Only male players with more than 20 games and more than 2 years of data are considered. The final data set consists of 80,568 male professional football players playing in the years 2012 up to 2023. As the data set consists of 3,834,539 data points, there are on average 47.6 monthly data points per player, which corresponds to roughly 4 seasons of data.


\subsection{Player value: Estimated Transfer Value} 
In the second prediction problem, the monetary player values are considered, obtained by the Estimated Transfer Value model (ETV). This model is a supervised tree-boosting model, trained on historical transfers to predict the transfer fees based on features that describe the situation of the player at the time of transfer. The model is then used to describe the transfer value for professional football players to obtain the transfer values for the general population of players over time. In this way, the supervised ETV model provides the monetary values of players over time.

The data set for this prediction problem of the development in player value describes the current situation of professional football players with 58 features. These features consist of indicators of league strength, age, experience, contract situation, the current quality (SciSkill), or the monetary value (ETV) of a football player. The feature set also includes player characteristics, like playing position and age, as well as the differences in quality with teammates, the transfer history of his current club, and league strength. A description of all features and the dependent variable in this prediction problem can be found in \autoref{Appendix: Table dependent variable player value} and \autoref{Appendix: Table features player value}.

For this prediction problem, the data set consists of biannual data points describing the players' transfer values in January and July within the period of 2014 up to 2021. Similarly as with the SciSkill, players with less than 20 games, less than 2 years of data, or missing values are excluded. The remaining data set includes 60,175 male professional football players described with 413,177 biannual data points. This corresponds to on average 6.87 data points per player, equivalent to approximately 3.5 seasons of data.  

\subsection{Models}
In this study, linear, tree-based, and kNN-based models are implemented. The linear models are ordinary least squares (OLS), also known as multiple linear regression (MLR), lasso regression, and a linear mixed effect model (LME). For the OLS model \citep{Seabold2010}, feature selection is performed by applying backwards selection with a threshold of the p-values of 0.0001 for the player quality and 0.001 for the player value. These values have been determined via trial and error, and they are smaller than commonly used for significance testing. This is due to the predictive nature of this study and the large data sets combined with the fact that common assumptions of the linear regression model, like normality, do not hold. For lasso regression \citep{Pedregosa2011}, feature selection is applied by selecting only the variables with nonzero coefficients. The linear mixed effect (LME) model \citep{Seabold2010} is trained to take into account the influence of a player's nationality as a random influence. The feature selection for the LME model is done by taking the 20 variables corresponding to the largest absolute value of the coefficients within the lasso model. For these three linear models, no interaction effects are included.

The tree-based models are the decision tree \citep{Pedregosa2011}, random forest \citep{Pedregosa2011}, and XGBoost \citep{Chen2016} models. For the tree-based models, feature selection is performed by first adding noise variables to the data set and training the models. All features with a larger feature importance than the noise variables are then selected. As tree-based methods can have a bias favoring non-discrete variables, both discrete and continuous variables are added. The discrete features are compared with the discrete noise variables and continuous features with the continuous noise variables.

To investigate the predictive power of time series, three k-nearest neighbors (kNN) models have been implemented to an altered feature set using the Hierarchical Navigable Small Worlds indexer provided by \citet{Douze2024}. This feature set consists of time series information with lagged versions of the most important player indicators and is described in \autoref{Appendix: Table knn features player quality} and \autoref{Appendix: Table dependent variable player value} in the appendix. First, a normal kNN model is applied to the predictive problem. This model searches for the most similar data points with respect to the Euclidian norm. The prediction is then obtained by applying a weighted average, where closer data points are weighted more heavily as described by \citet{Dudani1976}. Possible weighting methods are the reciprocal of the absolute value of the distance, the distance with min-max scaling, or uniform weights. The method of calculating these weights is considered a hyperparameter. The second kNN model is constructed similarly, but it calculates the distances based on the Mahalanobis distance. The Mahalanobis distance projects the features on a decorrelated feature space and calculates the Euclidian distance. This makes it possible to better distinguish differences because the lagged time series features are heavily dependent. Lastly, an adapted RReliefF method \citep{SikonjaKononenko2003} is implemented to calculate feature importances of the normal kNN model in a regression context. The features are then multiplied with the feature importances before calculating Euclidian distances to introduce new feature weights. The kNN model is then trained on these reweighted features.


\subsection{Feature importances}
The linear and tree-based models have methods that can be used to calculate the feature importances of the models. To investigate what features are important for the development of professional players, the feature importances are calculated. This is similar to the methods by \citet{Baouan2022}. However, because the development of the indicator is considered instead of the indicator value itself, it is possible to describe the influence of the indicator value on the development. Min-max scaling is applied to the feature importances to be able to compare them across the different models.



\section{Prediction problem on player quality}\label{res:prediction problem player quality (sciskill)}
\subsection{General population of players}
The loss values on the test set are shown in \autoref{fig:results:sciskill:general:rmse} and \autoref{fig:results:sciskill:general:mae}. The RMSE and MAE agree on the predictive performance of the models to forecast player development in general player quality as they show similar patterns. The results indicate that the XGBoost model attains the lowest loss values, with the random forest having the second-best losses. 

\begin{figure}[ht!]
    \centering
    \begin{minipage}{0.47\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_quality/sciskill_rmse_loss_cols.jpg}
        \caption{The RMSE loss per model in the player quality prediction problem.}
        \label{fig:results:sciskill:general:rmse}
    \end{minipage}
    \hfill
    \begin{minipage}{0.47\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_quality/sciskill_mae_loss_cols.jpg}
        \caption{The MAE loss per model in the player quality prediction problem.}
        \label{fig:results:sciskill:general:mae}
    \end{minipage}
\end{figure}

The tree-based models generally obtain the lowest loss values. The difference in performance with the linear models implies that there is some nonlinear or interaction effect in the true underlying relation. On the other hand, the kNN models based on the time series attain the worst loss values. This implies that these models missed out on important information by relying on time series information with a local method. It shows that the development of the player quality is nonlinear and dependent on contextual information.

\subsection{Predictions per age}
\begin{figure}[h]
    \centering
    \includegraphics[width=0.9\linewidth]{figures/player_quality/sciskill_loss_per_age.jpg}
    \caption{The RMSE values for each age for the different models in the player quality prediction problem.}
    \label{fig:results:sciskill:error per age}
\end{figure}
The RMSE loss is also determined for the players of each age in the test set as visualized in \autoref{fig:results:sciskill:error per age}. The results show that the models predict the development of players between the ages of 23 and 28 most accurately, whereas younger and older players are found to be harder to predict. For the young players, the random forest and XGBoost models provide the most accurate predictions. 

The kNN models based on time series perform the worst on the general test set, and \autoref{fig:results:sciskill:error per age} shows that this worse performance is especially evident in the RMSE losses corresponding to young players. On the other hand, the tree-based models appear to outperform the linear and kNN-based models for all ages. This explains the better performance on the general test set visible in \autoref{fig:results:sciskill:general:rmse} and \autoref{fig:results:sciskill:general:mae}.


\subsection{Prediction on important player groups}
The test losses are determined on three different groups of players that are important for the application of the models in this prediction problem: high-quality players, players with a large decrease in performance, and players with a large improvement in performance. The RMSE values on the test set for these subgroups are shown in \autoref{fig:results:sciskill:subsets:High_quality_players}, \autoref{fig:results:sciskill:subsets:decrease}, and \autoref{fig:results:sciskill:subsets:increase}. In general, the vertical scales show that the RMSE on these subgroups is larger than the one of the general population. This is even more evident for players with a large increase, and it indicates that the development of these players of interest is harder to predict, especially the players with a large increase. 

The results also show that the tree-based models are best at predicting the development of all three of these groups of interesting players. The random forest and XGBoost models appear to predict the best for the high-quality players and the players with a large decrease in quality. \autoref{fig:results:sciskill:subsets:increase} shows that the XGBoost model outperforms all other models on the group of players with a large increase in quality. The random forest model attains the second-best loss values.



\begin{figure}[H]
    \begin{minipage}{0.9\linewidth}
        \centering
        \begin{minipage}{0.5\linewidth} 
            \centering
            \includegraphics[width=\linewidth]{figures/player_quality/sciskill_high_quality_players_cols.jpg}
            \caption{The RMSE loss per model for players with a SciSkill of at least 100 in the player quality prediction problem.}
            \label{fig:results:sciskill:subsets:High_quality_players}
        \end{minipage}
    \end{minipage}
\end{figure}


\begin{figure}[H]
    \begin{minipage}{0.45\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_quality/sciskill_large_decrease_players_cols.jpg}
        \caption{The RMSE loss per model for players with a decrease of at least 10 in the player quality prediction problem.}
        \label{fig:results:sciskill:subsets:decrease}
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_quality/sciskill_large_increase_players_cols.jpg}
        \caption{The RMSE loss per model for players with a large increase of at least 10 in the player quality prediction problem.}
        \label{fig:results:sciskill:subsets:increase}
    \end{minipage}
\end{figure}

The results indicate that the linear models predict significantly less accurately for the group of players with a large decrease in quality compared to the other models. This shows that interaction effects or nonlinearities are particularly important for predicting a decrease in player quality. On the other hand, the kNN models based on time series predict significantly worse for players with large increases in quality as the large increases are probably for the young players. This is in line with \autoref{fig:results:sciskill:error per age}, where kNN methods do not perform well on the young players. These differences in losses show that the large increases in player quality are better predicted by global models with contextual information and that decreases are better predicted by methods that include nonlinearities or interaction effects. 

\subsection{Feature importances}
The feature importances of the linear and tree-based models are shown in \autoref{fig:res:sciskill: feature importances}. The feature importances indicate that the age (`age\_years'), age squared (`age\_years\_squared'), and the difference between the age and the peak age (`years\_diff\_peak\_age') are important features amongst the models. It is known that young players tend to increase in quality, whereas older players often decrease in football quality. Therefore, it is reasonable that these age-related factors are indeed important in the development of the quality of professional football players.

Multiple models indicate that the player quality (`sciskill') at the time of prediction, the difference between the player quality and the average quality in the team (`sciskill\_diff\_mean\_team'), and the number of months since the last registered game (`previous\_zero\_months') are important features. The importance of the player quality indicates that players from different qualities show different development patterns. The influence of the difference in quality between the player and the team is caused by players having good performances when their teams play well. Consequently, the player's quality grows towards the average team quality, which explains the importance of the difference in quality between the player and his team. Next to that, the SciSkill model penalizes players when they have not played games for a long time. As this penalty is applied after the next game of a player, the quality of a player can be expected to decrease when the number of months since the last game is large. The importance of the number of months since the last registered game shows that the models can find this pattern. In this way, the feature importance can be used to identify what factors are important for the development of professional football players and to test whether models behave as expected.

\begin{figure}[h!]
    \centering
    \includegraphics[height=0.9\textheight]{figures/player_quality/feature_importance_plot.png}
    \caption{The feature importances of the linear and tree-based models in the prediction problem of player quality. Min-max scaling has been applied to the feature importances.}
    \label{fig:res:sciskill: feature importances}
\end{figure}

\section{Prediction problem on player value}\label{res:prediction problem player value (etv)}
\subsection{General population of players}
The loss values for predicting player value development in the prediction problem of the monetary player value are given in \autoref{fig:results:etv:general:rmse} and \autoref{fig:results:etv:general:mae}. Although the differences in RMSE are less obvious than the differences in the MAE, the results show that the random forest model attains the lowest loss values for both the RMSE and MAE. The XGBoost model has the second-best values.

\begin{figure}[H]
    \centering
    \begin{minipage}{0.47\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_value/etv_rmse_loss_cols.jpg}
        \caption{The RMSE loss per model in the player value prediction problem.}
        \label{fig:results:etv:general:rmse}
    \end{minipage}
    \hfill
    \begin{minipage}{0.47\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_value/etv_mae_loss_cols.jpg}
        \caption{The MAE loss per model in the player value prediction problem.}
        \label{fig:results:etv:general:mae}
    \end{minipage}
\end{figure}

The two loss functions show differences in performance as the linear models predict relatively worse with respect to the MAE than in terms of the RMSE compared to the other models. Consequently, the linear models have relatively few large errors, which corresponds to the players that are harder to predict. On the contrary, the linear models predicted worse for players that are easier to predict. This means that the linear models predicted well for the players whose development is less predictable, but relatively bad for the players that are relatively easy to predict.

Additionally, the kNN models, which have time-series information as features, predict better than the linear models. These results show that the time series of the player performance indicators contain important information for the development of the transfer value and that nonlinearities and interactions are involved. 

\subsection{Predictions per age}
The RMSE values on the test set for each age are given in \autoref{fig:results:etv:error per age}. The loss generally decreases as players grow older. Because old players decrease in value, their values are smaller and more predictable, which explains the pattern. In general, no model is preferable based on the results of the young players.

Our models predict the development of the transfer value for young players with less accuracy, which is reflected by the high loss values for younger players. This indicates that the development of player value for young players is less predictable and this can be expected as the development in the player quality is found to be less predictable for younger players in the player quality prediction problem (\autoref{res:prediction problem player quality (sciskill)}). Because the development of the transfer value depends on the development of a football player's quality for young players, it can be assumed that the errors propagate in this model for player value. This explains why the errors for the young players are the largest.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\linewidth]{figures/player_value/etv_loss_per_age.jpg}
    \caption{The RMSE values for each age for the different models in the player value prediction problem.}
    \label{fig:results:etv:error per age}
\end{figure}

\subsection{Prediction on important player groups}
For the development of the transfer value, the four different important groups of players that are important for the application of the models are: high-quality players, high-value players, players with a large decrease in transfer value, and players with a large improvement in transfer value. The RMSE for these groups of players is visualized in \autoref{fig:results:etv:subsets:High_quality_players}, \autoref{fig:results:etv:subsets:High_value_players}, \autoref{fig:results:etv:subsets:decrease}, and \autoref{fig:results:etv:subsets:increase}. Similar to the prediction problem for player quality, the errors in the predictions are larger for these interesting groups of players. 

\begin{figure}[H]
    \centering
    \begin{minipage}{0.45\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_value/etv_high_quality_players_cols.jpg}
        \caption{The RMSE loss per model for players with a SciSkill of at least 100 in the player value prediction problem.}
        \label{fig:results:etv:subsets:High_quality_players}
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_value/etv_high_value_players_cols.jpg}
        \caption{The RMSE loss per model for players with a player value (ETV) of at least \euro10,000,000 in the player value prediction problem.}
        \label{fig:results:etv:subsets:High_value_players}
        % \vspace{0.5cm}
    \end{minipage}
\end{figure}

\begin{figure}[H]
    \begin{minipage}{0.45\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_value/etv_large_decrease_players_cols.jpg}
        \caption{The RMSE loss per model for players with a decrease of at least \euro2,500,000 in the player value prediction problem.}
        \label{fig:results:etv:subsets:decrease}
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\linewidth}
        \centering
        \includegraphics[width=\linewidth]{figures/player_value/etv_large_increase_players_cols.jpg}
        \caption{The RMSE loss per model for players with an increase of at least \euro2,500,000 in the player value prediction problem.}
        \label{fig:results:etv:subsets:increase}
    \end{minipage}
\end{figure}

The results indicate that the random forest model predicts best for the high-quality players, high-value players, and players with a large decrease. In contrast, the XGBoost model is better able to capture large increases in value than the random forest model. The performance of the random forest model on the players with a high player value is evidently better than the other models. Players often attain high transfer values for a short period in their careers when they perform well and are young. Consequently, players with high transfer values are expected to decrease in value after shortly obtaining high transfer values. The fact that the random forest model assigns large importance to the most recent transfer value suggests that the random forest can capture this pattern, which explains the better predictions on this group of players. 



\subsection{Feature importances}
The feature importances for the development of the player transfer value after min-max scaling are shown in \autoref{fig:res:etv: feature importances}. The results indicate that the most important features for predicting player value development are the features describing the most recent transfer value and the developments within the last 6 and 12 months of the player transfer value. Additional time series information about the player quality (`sciskill\_diff\_6m\_ago') also provides information about the development of the player transfer value. This implies that the time series information is most important in predicting future development, which is in line with the relatively good predictive performance of the kNN models that are based on time series information.

It is also found that the month of the year is an important factor. This can be explained by the fact that the transfer value of a player developed differently at different times of the year. For example, a player's transfer value tends to decrease when he only has 6 months of contract left because he could negotiate with other professional football clubs. As this commonly happens in the winter, the development of players' transfer value is different depending on the time of the year.

\section{Conclusion}\label{section: conclusion}
This paper aims to find the most suitable supervised learning model for forecasting the development of player performance indicators one year ahead. Two prediction problems have been considered to study the predictive performance of linear, tree-based, and kNN-based models.
The prediction problem of forecasting player quality (SciSkill) shows that the XGBoost model provides the most accurate predictions on the test set. This is especially the case for the general set of players, the players with the younger ages, and some interesting groups of players. Those interesting groups of players are the high-quality players and the players with either a large decrease or increase in football quality. The random forest model predicts second best with similar performances on the young players and most of several interesting groups of players. For the problem of predicting a football player's development in quality, it is concluded that the best predictive performance is attained by the XGBoost model, followed closely by the random forest model.

The second prediction problem is about forecasting the development of the monetary values of football players (ETV) within the subsequent year. The results show that the most accurate predictions are obtained using the random forest model. This is mainly indicated by the loss values of the general test set and the groups of players with high quality, high value, or with a large increase or decrease in player value. Consequently, it is concluded that the random forest model provides the most accurate predictions of the development of a football player's monetary value.

The aim was to assess the model quality not only based on the predictive performance of a model, but also to take explainability and uncertainty quantification into account in order to make the models more attractive for practitioners. As all trained models are explainable, the models now have to be assessed based on the availability of off-the-shelf methods for uncertainty quantification. 

Linear regression has an underlying theory that gives prediction intervals. Although these prediction intervals are based on assumptions that did not hold for the prediction problems in this paper, such as the normality of errors, they do give an indicator for the uncertainty of the prediction. Similarly, the kNN models provide the neighbors, which is a group of similar data points. Uncertainty quantification can be obtained by taking the minimal and maximal values of the dependent values within these neighbors if the number of neighbors $k$ is of significant size. Lastly, the bagging procedure of the random forest model can be utilized to obtain uncertainty quantification for the predictions, as described by \citet{WagerHastieEfron2014}. From these properties, it is concluded that the linear regression, random forest, and kNN-based models are favorable with respect to uncertainty quantification.

In short, our results show that the predictive performance of the random forest has the second-best predictive accuracy for predicting the development of the player quality and that it provides the best predictive accuracy for the forecasting of the player value. Moreover, an off-the-shelf method for uncertainty quantification is available. Therefore, it is concluded that the random forest is the most suitable explainable machine learning model to predict the development of player performance indicators one year ahead.

\section{Discussion}\label{section: discussion}
By addressing the two prediction problems, two random forest models have been obtained that can predict the development of both the quality and the monetary value of football players. These models can be used to aid in transfer decisions. Suppose the manager of a football club has a long-term interest in a football player. If the model predicting the development of player quality indicates that a player will grow in quality, it means that a player is more interesting to a football club in the long term. If the prediction of the transfer value indicates an increase of the transfer value, it might be better to buy the player sooner rather than later. The two models can also be combined to give extra insights. Suppose a manager currently has a veteran player who is predicted to start decrease in quality, and he can buy a young player who is predicted to develop into a first-team player within the next year. Assume that the transfer value of the young player is is predicted to only slightly increase. In this case, it might be better to buy the young player one year later and then sell the veteran player, because the young player will only have a slightly higher transfer fee and the veteran player will have a better quality in the meantime. These examples illustrate the added value of our models to predict player development for the improvement of data-informed decision making. 

The models from this paper can also be used to complement existing methods in the literature. \citet{PantusoHvattum2021} introduced a method to optimize transfer decisions based on indicators that describe a player's quality and transfer value and their future values. Their methodology needs to know the `future' values of the player quality and their transfer values. To solve this, they consider transfer situations from over a year prior so that the values of one year later were already known. Consequently, their model can only be applied to historical situations. By using our models to predict the future values in quality and transfer value, it is possible to obtain these predictions and optimize transfer decisions with a current-time application. This makes it possible to advise data-driven transfer decisions to optimize the squad in a real-life transfer period.

An advantage of the explainable models in this research is that they provide methods to gain insight into important factors for prediction. The models for the prediction problems show that this can be done via feature importances similarly as done by \citet{Baouan2022}. Because our models predict the difference between the current performance indicators and that of one year later, our research can also show the influences of the indicator itself. Our results show that the value of the indicator and the historical values of the indicators are the most important features, which adds to the knowledge obtained by \citet{Baouan2022} that describes which features are important. Additionally, time-dependent variables like the period in the year and the months without games have been found to be important features in forecasting player development. This indicates that the time series of the indicators itself contains important information on the development of football players, although our findings also suggest that contextual information gives improved predictive performance of the models.

In short, this paper studied explainable supervised models to predict player development via performance indicators. Two prediction problems were studied in which explainable models were trained to predict the development of both player quality and player value. It was found that the random forest model is the most suitable model for forecasting player development, because of the accurate predictions for both performance indicators combined with the method for uncertainty quantification arising from the bagging procedure. 

\begin{figure}[h!]
    \centering
    \includegraphics[height=0.9\textheight]{figures/player_value/feature_importance_plot.png}
    \caption{The feature importances of the linear and tree-based models in the prediction problem of player value. Min-max scaling has been applied to the feature importances.}
    \label{fig:res:etv: feature importances}
\end{figure}

\backmatter

\bmhead{Acknowledgements}
The authors thank Geurt Jongbloed for his comments on a draft version of this paper and the company SciSports for the data, computational resources, and insight into the needs of practitioners.

\bmhead{Author contributions}
K.A. carried out the research with supervision and input from F.G. and J.S.

\bmhead{Competing interests}
The authors declare no competing interests.

\newpage
\bibliography{bibliography}
\begin{appendices}
\newpage

\input{supplementary-materials}

\end{appendices}


\end{document}

\typeout{get arXiv to do 4 passes: Label(s) may have changed. Rerun}
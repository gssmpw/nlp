\begin{algorithm}[h!]
\caption{Gait-Net-augmented Sequential CMPC}
\label{alg:gaitMPC}
\begin{algorithmic}[1]
\Require $\mathbf q, \: \dot{\mathbf q}, \: \mathbf q^\text{cmd}, \: \dot{\mathbf q}^\text{cmd}$
\State \textbf{intialize} $\bm x_0 = f_\text{j2m}(\mathbf q, \: \dot{\mathbf q}), \: \bm u^0 =\bm u_\text{IG}, \: dt^0 = 0.05$ 
\State $\{ \mathbf q^\text{ref},\:\dot{\mathbf q}^\text{ref},\:\bm p_f^\text{ref}\} = f_\text{ref} \big(\mathbf q, \: \dot{\mathbf q}, \: \mathbf q^\text{cmd}, \: \dot{\mathbf q}^\text{cmd} \big)$
\State $\bm x^\text{ref} = f_\text{j2m}(\mathbf q^\text{ref},\:\dot{\mathbf q}^\text{ref},\:\bm p_f^\text{ref})$
\State $ j = 0$ 
\While{$j \leq j_\text{max} \:\text{and}\: \bm \eta \leq \delta \bm u  $} 
\State $\delta \bm u^{j} = \texttt{cmpc}(\bm x^\text{ref},\:\bm p_f^\text{ref},\:\bm p_c^\text{ref},\: \bm x_0,\: dt^j, \: \bm u^j)$
\State $\bm u^{j+1} = \bm u^j + \delta \bm u^j$ 
\State $dt^{j+1} = \Pi_\text{GN}(\mathbf q, \: \dot{\mathbf q},\: \bm p_f^{j})$
\State $\{ \bm x^\text{ref},\:\bm p_f^\text{ref}\}= f_\text{IK}(\bm p_f^{j},\:\bm p_c^{j},\: dt^{j+1})$
\State $j=j+1$
\EndWhile \\
\Return $\bm u^{j+1} $
\end{algorithmic}
\end{algorithm}
\section{More Details on RAG}\label{sec:rag_details}
The prompt template for RAG models is as follows. The RAG model takes the same system prompt as the training-based model depending on the text format.

\begin{shk}
message = [
    {"role": "system", "content": {system prompt}},
    {"role": "user", "content": retrieved_prompt}, 
    ...
    {"role": "assistant", "content": retrieved_code},
    {"role": "user", "content": {test_prompt}}
]
\end{shk}
\noindent\begin{minipage}{\textwidth}
\captionsetup{type=figure}
\captionof{figure}{Prompt template for RAG models}
\end{minipage}

Since some outputs of RAG models were ill-formed (particularly in the case of Qwen), we applied postprocessing to refine them. Extra elements such as \verb|```xml|, \verb|```json|, \verb|```python|, or unrelated code snippets were removed. For inference, we employ beam search with beam size of 4.

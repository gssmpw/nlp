% This file was created with tikzplotlib v0.10.1.
\begin{tikzpicture}

    \definecolor{darkgray176}{RGB}{176,176,176}
    \definecolor{darkorange25512714}{RGB}{255,127,14}
    \definecolor{steelblue31119180}{RGB}{31,119,180}
    
    \begin{groupplot}[group style={group size=2 by 1, horizontal sep=3cm},
      title style={font=\Large},
    label style={font=\large},
    tick label style={font=\large},
    legend style={font=\large}]
    \nextgroupplot[
      legend cell align={left},
      legend style={
        fill opacity=0.8,
        draw opacity=1,
        text opacity=1,
        at={(0.03,0.97)},
        anchor=north west,
        draw=none
      },
      tick align=outside,
      tick pos=left,
      title={(a) Memory Usage on Offloading Devices},
      x grid style={darkgray176},
      xlabel={Batch Size},
      xmin=-0.535, xmax=3.535,
      xtick style={color=black},
      xtick={0,1,2,3},
      xticklabels={4,8,16,32},
      y grid style={darkgray176},
      ylabel={Memory Usage (GB)},
      ymin=0, ymax=12.5685,
      ytick style={color=black}
      ]
      \draw[draw=none,fill=steelblue31119180] (axis cs:-0.35,0) rectangle (axis cs:0,7.77);
      \addlegendimage{ybar,ybar legend,draw=none,fill=steelblue31119180}
      \addlegendentry{\sys}
      
      \draw[draw=none,fill=steelblue31119180] (axis cs:0.65,0) rectangle (axis cs:1,7.77);
      \draw[draw=none,fill=steelblue31119180] (axis cs:1.65,0) rectangle (axis cs:2,11.97);
      \draw[draw=none,fill=steelblue31119180] (axis cs:2.65,0) rectangle (axis cs:3,11.97);
      \draw[draw=none,fill=darkorange25512714] (axis cs:2.77555756156289e-17,0) rectangle (axis cs:0.35,4.672);
      \addlegendimage{ybar,ybar legend,draw=none,fill=darkorange25512714}
      \addlegendentry{FlexGen}
      
      \draw[draw=none,fill=darkorange25512714] (axis cs:1,0) rectangle (axis cs:1.35,4.8);
      \draw[draw=none,fill=darkorange25512714] (axis cs:2,0) rectangle (axis cs:2.35,5.05);
      \draw[draw=none,fill=darkorange25512714] (axis cs:3,0) rectangle (axis cs:3.35,5.57);
      \draw (axis cs:-0.2,7.97) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{7.77};
      \draw (axis cs:0.8,7.97) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{7.77};
      \draw (axis cs:1.8,12.17) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{11.97};
      \draw (axis cs:2.8,12.17) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{11.97};
      \draw (axis cs:0.2,4.872) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{4.67};
      \draw (axis cs:1.2,5) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{4.80};
      \draw (axis cs:2.2,5.25) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{5.05};
      \draw (axis cs:3.2,5.77) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{5.57};
      
      \nextgroupplot[
      legend cell align={left},
      legend style={
        fill opacity=0.8,
        draw opacity=1,
        text opacity=1,
        at={(0.03,0.97)},
        anchor=north west,
        draw=none
      },
      tick align=outside,
      tick pos=left,
      title={(b) Throughput Comparison},
      x grid style={darkgray176},
      xlabel={Batch Size},
      xmin=-0.535, xmax=3.535,
      xtick style={color=black},
      xtick={0,1,2,3},
      xticklabels={4,8,16,32},
      y grid style={darkgray176},
      ylabel={Throughput (tokens/s)},
      ymin=0, ymax=59.997,
      ytick style={color=black}
      ]
      \draw[draw=none,fill=steelblue31119180] (axis cs:-0.35,0) rectangle (axis cs:0,10.25);
      \draw[draw=none,fill=steelblue31119180] (axis cs:0.65,0) rectangle (axis cs:1,21.97);
      \draw[draw=none,fill=steelblue31119180] (axis cs:1.65,0) rectangle (axis cs:2,28.57);
      \draw[draw=none,fill=steelblue31119180] (axis cs:2.65,0) rectangle (axis cs:3,57.14);
      \draw[draw=none,fill=darkorange25512714] (axis cs:2.77555756156289e-17,0) rectangle (axis cs:0.35,8.94);
      \draw[draw=none,fill=darkorange25512714] (axis cs:1,0) rectangle (axis cs:1.35,11.85);
      \draw[draw=none,fill=darkorange25512714] (axis cs:2,0) rectangle (axis cs:2.35,25.5);
      \draw[draw=none,fill=darkorange25512714] (axis cs:3,0) rectangle (axis cs:3.35,35.46);
      \draw (axis cs:-0.2,12.25) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{10.25};
      \draw (axis cs:0.8,23.97) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{21.97};
      \draw (axis cs:1.8,30.57) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{28.57};
      \draw (axis cs:2.8,59.14) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{57.14};
      \draw (axis cs:0.2,10.94) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{8.94};
      \draw (axis cs:1.2,13.85) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{11.85};
      \draw (axis cs:2.2,27.5) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{25.50};
      \draw (axis cs:3.2,37.46) node[
        scale=0.5,
        anchor=base,
        text=black,
        rotate=0.0
      ]{35.46};
      \end{groupplot}
      
      \end{tikzpicture}
      
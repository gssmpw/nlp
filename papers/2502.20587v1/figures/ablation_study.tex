
\begin{figure}[t]\captionsetup[subfigure]{font=scriptsize}
\pgfplotsset{scaled y ticks=false}
\centering
%\begin{subfigure}[b]{0.3mm}
\begin{subfigure}[b]{0.48\linewidth}
\centering
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
8
10
12
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=45mm,
    height=26mm,
    bar width=2.0mm,
    ymin=0.20,
    ymax=0.50,
    axis y line*=none,
    axis x line*=none,
    ytick={0.20, 0.30, 0.40, 0.50},
    yticklabels={0.20, 0.30, 0.40, 0.50},
    xmin=0.5,
    xmax = 3.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    legend style={
        font=\scriptsize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(0.3,1.1)},
        anchor=south west,
    },
    xlabel={Cluster count},
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.246
2 0.246
3 0.246
};
\addlegendentry[]{No CoT};

\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.369
2 0.390
3 0.383
    };
\addlegendentry[]{Hierarchical CoT};

\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.389) {\tiny +.123};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.410) {\tiny +.144};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.403) {\tiny +.137};

\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{Cache Val Test Dev}
\end{subfigure}
\begin{subfigure}[b]{0.48\linewidth}
\centering
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
3
5
7
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=45mm,
    height=26mm,
    bar width=2.0mm,
    ymin=0.20,
    ymax=0.50,
    axis y line*=none,
    axis x line*=none,
    ytick={0.20, 0.30, 0.40, 0.50},
    yticklabels={0.20, 0.30, 0.40, 0.50},
    xmin=0.5,
    xmax = 3.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    legend style={
        font=\scriptsize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(0.4,1.3)},
        anchor=south west,
    },
    xlabel={Cluster Count},
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.344
2 0.344
3 0.344
};

\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.394
2 0.387
3 0.365
    };

\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.414) {\tiny +.050};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.407) {\tiny +.043};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.385) {\tiny +.021};

\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{Cache Dev Test Val}
\end{subfigure}
\vspace{-4mm}
\caption{Ablation Study of Hierarchical Retrieval.} 
% These costs are negligible on notebooks with up to 2000 cell executions.
\label{fig:ablation}
\vspace{-4mm}
\end{figure}

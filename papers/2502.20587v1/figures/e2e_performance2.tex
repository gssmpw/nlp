\newcommand\figwidth{39mm}

\begin{figure*}[t]\captionsetup[subfigure]{font=scriptsize}
\pgfplotsset{scaled y ticks=false}
\centering
\begin{subfigure}[b]{0.19\linewidth}
\centering
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
\nostart
\coldstart
\warmstart
\hierarchical
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=\figwidth,
    height=26mm,
    bar width=1.0mm,
    ymin=0.35,
    ymax=0.65,
    axis y line*=none,
    axis x line*=none,
    ytick={0.35, 0.45, 0.55, 0.65},
    yticklabels={0.35, 0.45, 0.55, 0.65},
    xmin=0.5,
    xmax = 4.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    x tick label style={yshift = 2ex, rotate=45, anchor = north east},
    legend style={
        font=\scriptsize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(2.45,1.1)},
        anchor=south west,
    },
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.620
2 0.620
3 0.620
4 0.620
};
\addlegendentry[]{No CoT};

\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.623
2 0.628
3 0.627
4 0.634
    };
\addlegendentry[]{With CoT};

\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.643) {\tiny +.003};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.648) {\tiny +.008};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.647) {\tiny +.007};
\node[anchor=south, align=left, rotate=45] at (axis cs: 4.2, 0.654) {\tiny +.014};

\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{10\% apprentice VLM}
\end{subfigure}
\begin{subfigure}[b]{0.19 \linewidth}
\centering
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
\nostart
\coldstart
\warmstart
\hierarchical
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=\figwidth,
    height=26mm,
    bar width=1.0mm,
    ymin=0.35,
    ymax=0.65,
    axis y line*=none,
    axis x line*=none,
    ytick={0.35, 0.45, 0.55, 0.65},
    yticklabels={0.35, 0.45, 0.55, 0.65},
    xmin=0.5,
    xmax = 4.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    x tick label style={yshift = 2ex, rotate=45, anchor = north east},
    legend style={
        font=\footnotesize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(-0.06,1.1)},
        anchor=south west,
    },
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.563
2 0.563
3 0.563
4 0.563
};

\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.575
2 0.582
3 0.569
4 0.583
    };

\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.595) {\tiny +.012};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.602) {\tiny +.019};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.589) {\tiny +.006};
\node[anchor=south, align=left, rotate=45] at (axis cs: 4.2, 0.603) {\tiny +.020};

\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{30\% apprentice VLM}
\end{subfigure}
\begin{subfigure}[b]{0.19 \linewidth}
\centering
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
\nostart
\coldstart
\warmstart
\hierarchical
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=\figwidth,
    height=26mm,
    bar width=1.0mm,
    ymin=0.35,
    ymax=0.65,
    axis y line*=none,
    axis x line*=none,
    ytick={0.35, 0.45, 0.55, 0.65},
    yticklabels={0.35, 0.45, 0.55, 0.65},
    xmin=0.5,
    xmax = 4.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    x tick label style={yshift = 2ex, rotate=45, anchor = north east},
    legend style={
        font=\footnotesize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(-0.06,1.1)},
        anchor=south west,
    },
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.509
2 0.509
3 0.509
4 0.509
};
\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.527
2 0.528
3 0.539
4 0.512
    };

\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.547) {\tiny +.018};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.548) {\tiny +.019};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.559) {\tiny +.030};
\node[anchor=south, align=left, rotate=45] at (axis cs: 4.2, 0.532) {\tiny +.003};
\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{50\% apprentice VLM}
\end{subfigure}
\begin{subfigure}[b]{0.19 \linewidth}
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
\nostart
\coldstart
\warmstart
\hierarchical
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=\figwidth,
    height=26mm,
    bar width=1.0mm,
    ymin=0.35,
    ymax=0.65,
    axis y line*=none,
    axis x line*=none,
    ytick={0.35, 0.45, 0.55, 0.65},
    yticklabels={0.35, 0.45, 0.55, 0.65},
    xmin=0.5,
    xmax = 4.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    x tick label style={yshift = 2ex, rotate=45, anchor = north east},
    legend style={
        font=\footnotesize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(-0.06,1.1)},
        anchor=south west,
    },
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.449
2 0.449
3 0.449
4 0.449
};

\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.473
2 0.484
3 0.500
4 0.466
    };
\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.493) {\tiny +.024};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.504) {\tiny +.035};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.520) {\tiny +.051};
\node[anchor=south, align=left, rotate=45] at (axis cs: 4.2, 0.486) {\tiny +.017};
\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{70\% apprentice VLM}
\end{subfigure}
\begin{subfigure}[b]{0.19 \linewidth}
\begin{tikzpicture}

\pgfplotstableread[col sep=comma,]{
name
\nostart
\coldstart
\warmstart
\hierarchical
}\datatable


\begin{axis}[
    ybar,
    clip=false,
    xtick={1, 2, 3, 4},
    xticklabels from table={\datatable}{name},
                 x tick label style={anchor=center, yshift = 0ex, font=\scriptsize},
    xtick style ={draw=none},
    xlabel style={yshift = 2.5ex, font=\scriptsize},
    ylabel style={yshift = -3ex, xshift = -0.6ex, font=\scriptsize},
    width=\figwidth,
    height=26mm,
    bar width=1.0mm,
    ymin=0.35,
    ymax=0.65,
    axis y line*=none,
    axis x line*=none,
    ytick={0.35, 0.45, 0.55, 0.65},
    yticklabels={0.35, 0.45, 0.55, 0.65},
    xmin=0.5,
    xmax = 4.5,
    ymajorgrids,
    tick label style={font=\scriptsize},
    x tick label style={yshift = 2ex, rotate=45, anchor = north east},
    legend style={
        font=\footnotesize,
        % yshift=-6ex, xshift = -3ex,
        /tikz/every even column/.append style={column sep=0.2cm},
        legend columns = 3,
        inner ysep=0.5pt,
        at={(2.3,1.1)},
        anchor=south west,
    },
    ylabel={MMMU score},
    area legend
    ]
    
\addplot [black,fill=NoOptColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=north west lines
    }] table[x=x,y=y] {
x y
1 0.383
2 0.383
3 0.383
4 0.383
};

\addplot [black,fill=RandomColor,x tick label style={xshift=-0.3cm}, postaction={
        pattern=crosshatch
    }] table[x=x,y=y] {
x y
1 0.396
2 0.425
3 0.460
4 0.396
    };
\node[anchor=south, align=left, rotate=45] at (axis cs: 1.2, 0.416) {\tiny +.013};
\node[anchor=south, align=left, rotate=45] at (axis cs: 2.2, 0.445) {\tiny +.042};
\node[anchor=south, align=left, rotate=45] at (axis cs: 3.2, 0.480) {\tiny +.077};
\node[anchor=south, align=left, rotate=45] at (axis cs: 4.2, 0.416) {\tiny +.013};
\end{axis}
    %\node[draw,fill=white, align=left] at (3.3, 1.8) {775s};
    
    % \draw[fill=white,draw=white] (3.0,1.4) -- (3.6,1.6) -- (3.6,1.8) -- (3.0,1.6) -- cycle;
    % \draw[draw=black] (3.0,1.6) -- (3.6,1.8);
    % \draw[draw=black] (3.0,1.4) -- (3.6,1.6);
    % \node[anchor=south west] at (3.6,1.6) {775s};
\end{tikzpicture}
\vspace{-7.5mm}
\caption{90\% apprentice VLM}
\end{subfigure}
\vspace{-4mm}
\caption{MMMU Score w. cache under various retrieval configurations and various apprentice VLM usage levels.}
% These costs are negligible on notebooks with up to 2000 cell executions.

\label{fig:experiment_e2e}
\vspace{-4mm}
\end{figure*}

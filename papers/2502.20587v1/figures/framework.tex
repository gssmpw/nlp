\begin{figure}[t]
% \centerline{\includegraphics[width=\linewidth]{figures/system_overview.jpg}}

\begin{subfigure}{\columnwidth}
\centering
% \tikzset{every node/.style={font=\small}}
\tikzset{
mylabel/.style={
    font=\footnotesize\sffamily,
    align=center,
},
mylabel2/.style={
    font=\footnotesize\sffamily,
    align=center,
},
mycomponent/.style={
    font=\footnotesize\sffamily\bfseries,
    semithick, rounded corners=0.5mm,
}
}


\begin{tikzpicture}[>={LaTeX[width=1mm,length=1mm]},->]

\node(shell) [draw=black, anchor=west, minimum width = 8mm, minimum height=10mm, thick]
at (0, 0)  {};
\node(shelltxt) [anchor=center, align = center, minimum height=3mm, inner sep = 0.5mm, font=\bfseries\actualfootnotesize]
at ($(shell.center) + (0, 0)$) {VLM \\ Query};



\node(elastic) [minimum height=26mm, minimum width=55mm,
  draw=black, anchor=west, thick, rounded corners=1mm]
at ($(shell.east) + (0.2, -0.1)$)  {};
\node(elastictxt) [anchor=south, minimum height=3mm, inner sep = 0mm]
at ($(elastic.north) + (0, 0.05)$) {Cache-of-Thought (CoT)};

\node(multiplexer) [draw=black, fill = white, anchor=west, minimum width = 15mm, minimum height=8mm, mycomponent]
at ($(elastic.west) + (0.2, 0.1)$)  {};

\node(multiplexertxt) [anchor=center, align = center, minimum height=3mm, inner sep = 0.5mm]
at ($(multiplexer) + (0, 0)$) {\actualfootnotesize \textbf{Model} \\[-0.4em] \actualfootnotesize\textbf{Multiplexer}};

\node(largevlm) [draw=black, fill = white, anchor=north, minimum width = 15mm, minimum height=4mm, mycomponent]
at ($(multiplexer.south) + (0, -0.2)$)  {};

\node(largevlmtxt) [anchor=north, align = center, minimum height=3mm, inner sep = 0.5mm]
at ($(largevlm.north) + (0, -0.05)$) {\actualfootnotesize \textbf{Master VLM}};

\node(retriever) [draw=black, fill = white, anchor=west, minimum width = 15mm, minimum height=8mm, mycomponent]
at ($(multiplexer.east) + (0.2, 0)$)  {};

\node(retrievertxt) [anchor=center, align = center, minimum height=3mm, inner sep = 0.5mm]
at ($(retriever) + (0, 0)$) {\actualfootnotesize \textbf{Retrieval} \\[-0.4em] \actualfootnotesize \textbf{Module}};

\node(smallvlm) [draw=black, fill = white, anchor=south, minimum width = 15mm, minimum height=4mm, mycomponent]
at ($(retriever.north) + (0, 0.2)$)  {};

\node(smallvlmtxt) [anchor=north, align = center, minimum height=3mm, inner sep = 0.5mm, ]
at ($(smallvlm.north) + (0, -0.05)$) {\actualfootnotesize \textbf{Appr. VLM}};

\node(cache) [draw=black, fill = white, anchor=north west, minimum width = 15mm, minimum height=14mm, mycomponent]
at ($(retriever.north east) + (0.2, 0)$)  {};

\node(cachetxt) [anchor=north, align = center, minimum height=3mm, inner sep = 0.5mm, mylabel]
at ($(cache.north) + (0, -0.05)$) {\actualfootnotesize \textbf{Cache}};

\node(evicter) [draw=black, fill = white, anchor=south, minimum width = 13mm, minimum height=5mm, mycomponent]
at ($(cache.south) + (0, 0.1)$)  {};

\node(evictertxt) [anchor=center, align = center, minimum height=3mm, inner sep = 0.5mm]
at ($(evicter) + (0, 0)$) {\scriptsize Caching \\[-0.6em]\scriptsize Policy};

\node(hnsw) [draw=black, fill = white, anchor=south, minimum width = 13mm, minimum height=3mm, mycomponent]
at ($(evicter.north) + (0, 0.1)$)  {};

\node(hnswtxt) [anchor=center, align = center, minimum height=3mm, inner sep = 0.5mm]
at ($(hnsw) + (0, 0)$) {\scriptsize HNSW};

\node(results) [draw=black, anchor=west, minimum width = 8mm, minimum height=10mm, thick]
at ($(elastic.east) + (0.2, 0.1)$)  {};
\node(resultstxt) [anchor=center, align = center, minimum height=3mm, inner sep = 0.5mm, font=\bfseries\actualfootnotesize]
at ($(results.center) + (0, 0)$) {Query \\ Result};


\draw[->, thick, densely dotted] 
($(shell.east)$) --
($(multiplexer.west)$);

\draw[->, thick, densely dotted] 
($(multiplexer.south)$) --
($(largevlm.north)$);

\draw[->, thick, densely dotted] 
($(largevlm.east)$) --
($(largevlm.east) + (2.0, 0)$);

\draw[->, thick, densely dotted] 
($(retriever.east) + (0.2, 0)$) --
($(retriever.east)$);

\draw[->, thick, densely dotted] 
($(retriever.north)$) --
($(smallvlm.south)$);

\draw[-, thick, densely dotted] 
($(multiplexer.north)$) --
($(multiplexer.north) + (0, 0.4)$);

\draw[->, thick, densely dotted] 
($(multiplexer.north) + (0, 0.4)$) --
($(smallvlm.west)$);

\draw[-, thick, densely dotted] 
($(largevlm.south)$) --
($(largevlm.south) + (0, -0.2)$);

\draw[-, thick, densely dotted] 
($(cache.south east) + (0.2, -0.2)$) --
($(largevlm.south) + (0, -0.2)$);

\draw[-, thick, densely dotted] 
($(cache.north east) + (0.2, 0.4)$) --
($(smallvlm.east)$);

\draw[-, thick, densely dotted] 
($(cache.north east) + (0.2, 0.4)$) --
($(cache.south east) + (0.2, -0.2)$);

\draw[->, thick, densely dotted] 
($(results.west) + (-0.4, 0)$) --
($(results.west)$);

\end{tikzpicture}
\end{subfigure}
\vspace{-7mm}
\caption{The Cache-of-Thought (CoT) framework.}
\label{fig:system_overview}
\vspace{-4mm}
\end{figure}

\begin{algorithm}[!ht]
\caption{Determine Spawn Points for PA}
\SetAlgoLined
\SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
\SetKw{KwBy}{by}
\SetKwFunction{FMain}{Main}
\SetKwFunction{FSub}{Sub}
\SetKwProg{Fn}{Function}{:}{}

\Input{$\mathbf{p}_{\text{ego}}, \theta_{\text{ego}}, \mathbf{c}_{\text{ego}}, v_{\text{ego}}$}
\Output{List of potential SpawnPoint objects $\mathcal{S}$}
\BlankLine


$\mathcal{S} \leftarrow \{\}$ \tcp*{Initialize spawn points list}
$\mathbf{p}_{\text{ego}}, \theta_{\text{ego}}, \mathbf{c}_{\text{ego}} \leftarrow$ Update with current state \;
$\Gamma_\mathrm{s} \leftarrow$ Prepare reference path ($\Gamma$)\;
$\iota \leftarrow$ Determine ego intention ($\Gamma_\mathrm{s}$)\;

\If{dynamic and ($\iota =$ 'left' or $\iota =$ 'right')}{
    $\mathcal{S}_{\text{turn}} \leftarrow$ Find spawn point behind turn($\iota$)\;
    Append $\mathcal{S}_{\text{turn}}$ to $\mathcal{S}$\;
}
\If{static}{
    \If{$\iota =$ 'straight' or $\iota =$ 'left'}{
        $\mathcal{S}_{\text{dyn}} \leftarrow$ Find spawn point behind dynamic obstacle()\;
        Append $\mathcal{S}_{\text{dyn}}$ to $\mathcal{S}$\;
    }
    \If{static}{
        $\mathcal{S}_{\text{stat}} \leftarrow$ Find spawn point behind static obstacle()\;
        Append $\mathcal{S}_{\text{stat}}$ to $\mathcal{S}$\;
    }
}
\Return{$\mathcal{S}$}\;
\end{algorithm}
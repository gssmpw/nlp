\Cref{entity_code} and \Cref{relation_code} show the iterative embedding updates in entity prediction task and relation prediction task respectively.

\begin{minipage}{\textwidth}
\begin{algorithm}[H]
\small
\caption{\ourmethod embedding updates for the entity prediction task}
\label{entity_code}
\begin{algorithmic}
\Require Query ($h$, $r$, ?); relation adjacency matrix $\mA_R$; entity adjacency matrix $\mA_V$; number of updates $L$
\Ensure Final entity embedding $\mX_{h,r}^{(L)}$
% \State $\mX_{h,r}^{(0)} = \text{INDICATOR}(h) \odot \mathbf{1}^{|V|\times d}$
% \State $\mZ_{h,r}^{(0)} = \text{INDICATOR}(r) \odot \mathbf{1}^{|R|\times d}$
\State $\mX_{h,r}^{(0)} = \text{INIT}_{V}(h)$ \Comment{Label $h$ with all-ones vector and the rest with all-zeros}
\State $\mZ_{h,r}^{(0)} = \text{INIT}_{R}(r)$ \Comment{Label $r$ with all-ones vector and the rest with all-zeros}
\For{$i \gets 1$ to $L$}
\For{$u \in V$}
\State $\mX_{h,r}^{(i)}(u) = \text{UP}_{V}^{(i)}\left(\mX_{h,r}^{(i-1)}(u), \text{AGG}_{V}^{(i)}\left(\text{MSG}_{V}^{(i)}(\mX_{h,r}^{(i-1)}(v), \mZ_{h,r}^{(i-1)}(r^\prime))|(u, r^\prime, v) \in \mA_V\right)\right)$
\EndFor
\For{$r^\prime \in R$}
\State $\mZ_{h,r}^{(i)}(r^\prime) = \text{UP}_{R}^{(i)}\left(\mZ_{h,r}^{(i-1)}(r^\prime), \text{AGG}_{R}^{(i)}\left(\text{MSG}_{R}^{(i)}(\mZ_{h,r}^{(i-1)}(r^{\prime\prime}), \mX_{h,r}^{(i)}(u))|(r^\prime,u,r^{\prime\prime})\in \mA_R\right)\right)$
\EndFor
\EndFor
\end{algorithmic}    
\end{algorithm}
\end{minipage}

\begin{minipage}{\textwidth}
\begin{algorithm}[H]
\small
\caption{\ourmethod embedding updates for the relation prediction task}
\label{relation_code}
\begin{algorithmic}
\Require Query ($h$, ?, $t$); relation adjacency matrix $\mA_R$; entity adjacency matrix $\mA_V$; number of updates $L$
\Ensure Final relation embedding $\mZ_{h,t}^{(L)}$
\State $\mZ_{h,t}^{(0)} = \mathbf{1}^{|R|\times d}$
\State $\mX_{h,t}^{(0)} = \text{INIT}(h, t)$ \Comment{Label $h$ with all-ones vector, $t$ with all-negative-ones and the rest with all-zeros}
% \State $\mX_{h,t}^{(0)} = \text{INDICATOR}(h, t) \odot \mathbf{1}^{|V|\times d}$
\For{$i \gets 1$ to $L$}
\For{$r \in R$}
\State $\mZ_{h,t}^{(i)}(r) = \text{UP}_{R}^{(i)}\left(\mZ_{h,t}^{(i-1)}(r), \text{AGG}_{R}^{(i)}\left(\text{MSG}_{R}^{(i)}(\mZ_{h,t}^{(i-1)}(r^\prime), \mX_{h,t}^{(i-1)}(u))|(r,u,r^\prime)\in \mA_R\right)\right)$
\EndFor
\For{$u \in V$}
\State $\mX_{h,t}^{(i)}(u) = \text{UP}_{V}^{(i)}\left(\mX_{h,t}^{(i-1)}(u), \text{AGG}_{V}^{(i)}\left(\text{MSG}_{V}^{(i)}(\mX_{h,t}^{(i-1)}(v), \mZ_{h,t}^{(i)}(r))|(u, r, v) \in \mA_V\right)\right)$
\EndFor
\EndFor
\end{algorithmic}    
\end{algorithm}
\end{minipage}
\section{Lower bound for Dominating Distribution Algorithms}
\label{sec:lb}

In this section, we show that there exist problem instances where a dominating distribution algorithm\footnote{Note that we cannot hope to prove a lower bound that applies to \textit{all} dominating distribution algorithms, since the optimal Farthest-in-Future algorithm is technically also a dominating distribution algorithm.} can provably be at least $c$ times worse than $\opt$, for $c \ge 1.5907$. We start with a warm-up analysis that captures the central idea behind the lower bound, and shows a bound of 1.5, before generalizing the analysis to improve the bound. Our lower bound instances throughout are small and simple: they comprise of a Markov chain on $n=3$ pages with a cache size $k=2$.

\subsection{Warm-up: A 1.5-competitive Lower Bound}
\label{sec:1.5-lb}

Consider a simple setting with 3 total pages, and a cache of size 2. At each time step independently, page 1 is requested with probability $1-\eps$, and page 2 and 3 are requested each with probability $\eps/2$. This corresponds to the Markov chain with the transition matrix
\begin{align*}
    \begin{bmatrix}
        1-\eps & \eps/2 & \eps/2 \\
        1-\eps & \eps/2 & \eps/2 \\
        1-\eps & \eps/2 & \eps/2
    \end{bmatrix}.
\end{align*}

We start with the initial cache being $[1,2]$. The reference algorithm $\mcA_{\rf}$ we will compete against always keeps page 1 in its cache. If it suffers a cache miss, it swaps out the other page with the requested page. At any time $t$, the probability that $\mcA_{\rf}$ suffers a miss is therefore exactly $\eps/2$, and hence the expected total number of misses through $T$ timesteps is $\eps T/2$.

Now, consider $\mcA_{\dom}$. We want to capitalize on the fact that $\mcA_\dom$ evicts page 1 with some positive probability, in contrast to $\mcA_\rf$. Namely, observe that 
\begin{align}
    \Pr[\text{$\mcA_\dom$ suffers cache miss at time $t$}] &= \Pr[\text{$1$ in cache of $\mcA_\dom$ at $t$}] \cdot \frac{\eps}{2} + \nonumber\\
    & \Pr[\text{$1$ not in cache of $\mcA_\dom$ at $t$}] \cdot (1-\eps) \nonumber \\
    &= p_t \cdot \frac{\eps}{2} + (1-p_t) \cdot (1-\eps), \label{eqn:misses-A-dom}
\end{align}
where we denote $p_t = \Pr[\text{$1$ in cache of $\mcA_\dom$ at $t$}]$. The latter probability is non-zero for $\mcA_\dom$, which already makes its expected total number of misses larger than that of $\mcA_\rf$. We will therefore aim to maximize this difference.

Observe that 
\begin{align*}
    p_t &= \Pr[\text{$1$ requested at $t-1$}] + \Pr[\text{$1$ in cache of $\mcA_\dom$ at $t-1$}] \cdot \Pr[\text{$1$ not requested at $t-1$}] \cdot \\
    &\Pr[\text{$1$ not evicted by $\mcA_\dom$ at $t-1 ~\big|$ $1$ not requested, $1$ in cache of $\mcA_\dom$ at $t-1$}] \\
    &= 1-\eps + p_{t-1} \cdot \eps \cdot \Pr[\text{$1$ not evicted by $\mcA_\dom$ at $t-1 ~\big|$ $1$ not requested, $1$ in cache of $\mcA_\dom$ at $t-1$}].
\end{align*}
We can analytically calculate the last probability. Say the cache of $\mcA_\dom$ at $t-1$ is, without loss of generality, $[1,2]$. Given that $1$ is not requested, we have that either of $2$ or $3$ are requested, each with probability $1/2$. If $2$ is requested, there is no cache miss. If on the other hand, $3$ is requested, $\mcA_\dom$ calculates a dominating distribution $\mu$ over $[1,2]$. This can be easily calculated. Let $\alpha(p<q)$ again be the probability that $p$ is requested next before $q$ (conditioned on the current page, which in this case, does not matter since the distributions at every time step are independent and identical). We have that
\begin{align*}
    &\alpha(1<1) = \alpha(2<2) = 0, \\
    &\alpha(2<1) = \eps/2 + \eps/2 \cdot \alpha(2<1)
    \implies \quad \alpha(2<1) = \frac{\eps/2}{1-\eps/2}, \\
    &\alpha(1<2) = 1-\eps + \eps/2 \cdot \alpha(1<2)
    \implies \quad \alpha(1<2) = \frac{1-\eps}{1-\eps/2}. 
\end{align*}
The condition for the dominating distribution is that, for every fixed page $q$ in the cache,
\begin{align*}
    \E_{p \sim \mu}[\alpha(p<q)] \le 1/2.
\end{align*}
Letting $\mu(1)=x$ so that $\mu(2)=1-x$, this translates to
\begin{align*}
    &(1-x)\cdot \alpha(2<1) \le 1/2, \quad x\cdot \alpha(1<2) \le 1/2 \\
    \implies \qquad& \frac{3\eps-2}{2\eps} \le x \le \frac{2-\eps}{4-4\eps}.
\end{align*}
We want $x$ to be large as possible, because we want $\mcA_\dom$ to evict $1$ with the highest feasible probability, so that it will suffer a lot of cache misses. Thus, we set $x = \frac{2-\eps}{4-4\eps}$. This gives us that,
\begin{align*}
    &\Pr[\text{$1$ not evicted by $\mcA_\dom$ at $t-1 ~\big|$ $1$ not requested, $1$ in cache of $\mcA_\dom$ at $t-1$}] \\
    &= \frac12 + \frac{1}{2} \cdot (1-x) = 1-\frac{x}{2} = \frac{6-7\eps}{8-8\eps}.
\end{align*}
In total, we get that
\begin{align*}
    p_t &= \underbrace{1-\eps}_{c} + p_{t-1}\cdot \underbrace{\frac{\eps(6-7\eps)}{8-8\eps}}_{d}. 
\end{align*}
Unrolling the recurrence, and using that $p_{1}=1$, we obtain that for $t \ge 2$,
\begin{align*}
    p_t &= c(1+d+\dots+d^{t-2}) + d^{t-1} = c\cdot \frac{1-d^{t-1}}{1-d} + d^{t-1}.
\end{align*}
Summing up $\eqref{eqn:misses-A-dom}$ until $T$, and substituting $p_t$ from above, we get that
\begin{align*}
    \E[\cost(\mcA_\dom, T)] &= T(1-\eps) + \left(\frac{3\eps}{2}-1\right)\sum_{t=1}^{T}p_t \\
    &= T(1-\eps) + \left(\frac{3\eps}{2}-1\right)\left[\frac{c}{1-d}\left(T-\frac{1-d^T}{1-d}\right)+\frac{1-d^T}{1-d}\right].
\end{align*}
Taking the limit as $T \to \infty$, we get that
\begin{align*}
    \lim_{T \to \infty}\frac{\E[\cost(\mcA_\dom, T)]}{\E[\cost(\mcA_\rf, T)]} &= \frac{1-\eps+\left(\frac{3\eps}{2}-1\right)\left(\frac{c}{1-d}\right)}{\eps/2}.
\end{align*}
Substituting the values of $c$ and $d$, and taking the limit as $\epsilon \to 0$, the ratio above converges to $1.5$.

\subsection{A Slightly More General Analysis that Gives a Better Lower Bound}
\label{sec:1.5907-lb}

In the instance above, instead of assigning $\eps/2$ mass equally to pages 2 and 3, we can also imagine splitting the $\eps$ mass unequally between these pages. Namely, let the underlying distribution on the pages be such that, at each time step, page 1 is requested with probability $1-\eps$, page 2 is requested with probability $\eps_1$ and page 3 is requested with probability $\eps-\eps_1$, where the regime we want to keep in mind is $1-\eps \ge \eps_1 \ge \eps-\eps_1$. Note that $\eps_1=\eps/2$ corresponds to the instance above. Let the initial cache be $[1,2]$.

The reference algorithm $\mcA_\rf$ still always maintains page 1 in its cache. Let
\begin{align*}
    p_t &= \Pr[\text{$\mcA_\rf$'s state is $[1,2]$ at $t$}].
\end{align*}
We have that
\begin{align*}
    p_t = p_{t-1} \cdot (1-\eps+\eps_1) + (1-p_{t-1}) \cdot \eps_1 
    = \eps_1 + p_{t-1} \cdot (1-\eps) 
    = \eps_1 \left(\frac{1-(1-\eps)^{t-1}}{\eps}\right) + (1-\eps)^{t-1},
\end{align*}
where we unrolled the recurrence in the last step, and used that $p_1=1$. Then,
\begin{align*}
    \Pr[\mcA_\rf \text{ suffers miss at }t] = p_t \cdot (\eps-\eps_1) + (1-p_t) \cdot \eps_1
    = \eps_1 + (\eps-2\eps_1)\cdot p_t,
\end{align*}
and hence
\begin{align}
    \E[\cost(\mcA_\rf, T)] &= T\eps_1 + (\eps-2\eps_1) \sum_{t=1}^T p_t \nonumber \\
    &= T\eps_1 + (\eps-2\eps_1)\left[ \frac{\eps_1}{\eps}\left( T - \frac{1-(1-\eps)^T}{\eps} \right) + \frac{1-(1-\eps)^T}{\eps} \right]. \label{eqn:ref-gen-misses}
\end{align}
Now, we analyze the behavior of $\mcA_\dom$. Let
\begin{align*}
    &p_t = \Pr[\text{$\mcA_\dom$'s state is $[1,2]$ at $t$}] \\
    &q_t = \Pr[\text{$\mcA_\dom$'s state is $[1,3]$ at $t$}] \\
    &r_t = \Pr[\text{$\mcA_\dom$'s state is $[2,3]$ at $t$}],
\end{align*}
where $p_1=1, q_1=0, r_1=0$. Then, we have that
\begin{align}
    \label{eqn:miss-eqn}
    \Pr[\mcA_\dom \text{ suffers miss at }t] &= p_t \cdot (\eps-\eps_1) + q_t \cdot \eps_1 + r_t \cdot (1-\eps).
\end{align}
 Observe further that
\begin{align*}
    p_t &= p_{t-1} \cdot \Pr[\text{1 or 2 requested at }t-1] + q_{t-1} \cdot \eps_1 \cdot \Pr[\text{$\mcA_\dom$ evicts 3 from }[1,3]] \\
    &\qquad+ r_{t-1} \cdot (1-\eps) \cdot \Pr[\text{$\mcA_\dom$ evicts 3 from }[2,3]] \\
    &= p_{t-1} \cdot (1-\eps+\eps_1) +  q_{t-1} \cdot \eps_1 \cdot \Pr[\text{$\mcA_\dom$ evicts 3 from }[1,3]] \\
    &\qquad+ r_{t-1} \cdot (1-\eps) \cdot \Pr[\text{$\mcA_\dom$ evicts 3 from }[2,3]] \\
    q_t &= q_{t-1} \cdot \Pr[\text{1 or 3 requested at }t-1] + p_{t-1} \cdot (\eps-\eps_1) \cdot \Pr[\text{$\mcA_\dom$ evicts 2 from }[1,2]] \\
    &\qquad+ r_{t-1} \cdot (1-\eps) \cdot \Pr[\text{$\mcA_\dom$ evicts 2 from }[2,3]] \\
    &= q_{t-1} \cdot (1-\eps_1) + p_{t-1} \cdot (\eps-\eps_1) \cdot \Pr[\text{$\mcA_\dom$ evicts 2 from }[1,2]] \\
    &\qquad+ r_{t-1} \cdot (1-\eps) \cdot \Pr[\text{$\mcA_\dom$ evicts 2 from }[2,3]] \\
    r_t &= r_{t-1} \cdot \Pr[\text{2 or 3 requested at }t-1] + p_{t-1} \cdot (\eps-\eps_1) \cdot \Pr[\text{$\mcA_\dom$ evicts 1 from }[1,2]] \\
    &\qquad+ q_{t-1} \cdot \eps_1 \cdot \Pr[\text{$\mcA_\dom$ evicts 1 from }[1,3]] \\
    &= r_{t-1} \cdot \eps + p_{t-1} \cdot (\eps-\eps_1) \cdot \Pr[\text{$\mcA_\dom$ evicts 1 from }[1,2]]  + q_{t-1} \cdot \eps_1 \cdot \Pr[\text{$\mcA_\dom$ evicts 1 from }[1,3]].
\end{align*}
We can calculate each of the eviction probabilities above while respecting the properties that $\mcA_\dom$ must satisfy. Namely, consider that the cache state is $[1,2]$. Let $\mu$ be the dominating distribution that $\mcA_\dom$ constructs, where $\mu(1)=x$ and $\mu(2)=1-x$. We have that
\begin{align*}
    \alpha(2<1) &= \eps_1 + (\eps-\eps_1)\alpha(2<1) \implies\quad \alpha(2<1) = \frac{\eps_1}{1-\eps+\eps_1} \\
    \alpha(1<2) &= 1-\alpha(2<1) = \frac{1-\eps}{1-\eps+\eps_1}.
\end{align*}
The dominating distribution condition requires that
\begin{align*}
    &(1-x)\cdot\alpha(2<1) \le \frac{1}{2}, \quad x\cdot\alpha(1<2) \le \frac{1}{2} \\ 
    \implies \qquad & \frac{\alpha(2<1)-1/2}{\alpha(2<1)} \le x \le \frac{1}{2\alpha(1<2)}.
\end{align*}
We choose to set the upper condition to be tight, which results in
\begin{align*}
    x &= \Pr[\text{$\mcA_\dom$ evicts 1 from }[1,2]] = \frac{1-\eps+\eps_1}{2-2\eps}, \\
    1-x &= \Pr[\text{$\mcA_\dom$ evicts 2 from }[1,2]] = \frac{1-\eps-\eps_1}{2-2\eps}.
\end{align*}
Now, consider the same calculation, where the cache state is $[1,3]$, $\mu(1)=x$ and $\mu(3)=1-x$. We have that
\begin{align*}
    \alpha(3<1) &= \eps-\eps_1 + \eps_1 \cdot \alpha(3<1) \implies\quad \alpha(3<1) = \frac{\eps-\eps_1}{1-\eps_1} \\
    \alpha(1<3) &= 1-\alpha(3<1) = \frac{1-\eps}{1-\eps_1}.
\end{align*}
The dominating distribution condition requires
\begin{align*} 
    \frac{\alpha(3<1)-1/2}{\alpha(3<1)} \le x \le \frac{1}{2\alpha(1<3)}.
\end{align*}
Again, we make the upper bound tight to get
\begin{align*}
    x &= \Pr[\text{$\mcA_\dom$ evicts 1 from }[1,3]] = \frac{1-\eps_1}{2-2\eps}, \\
    1-x &= \Pr[\text{$\mcA_\dom$ evicts 3 from }[1,3]] = \frac{1+\eps_1-2\eps}{2-2\eps}.
\end{align*}
Finally, consider the calculation, where the cache state is $[2,3]$, $\mu(2)=x$ and $\mu(3)=1-x$. We have that
\begin{align*}
    \alpha(3<2) &= \eps-\eps_1 + (1-\eps) \cdot \alpha(3<2) \implies\quad \alpha(3<2) = \frac{\eps-\eps_1}{\eps} \\
    \alpha(2<3) &= 1-\alpha(3<2) = \frac{\eps_1}{\eps}.
\end{align*}
The dominating distribution condition requires
\begin{align*} 
    \frac{\alpha(3<2)-1/2}{\alpha(3<2)} \le x \le \frac{1}{2\alpha(2<3)},
\end{align*}
so we set
\begin{align*}
    x &= \Pr[\text{$\mcA_\dom$ evicts 2 from }[2,3]] = \frac{\eps}{2\eps_1}, \\
    1-x &= \Pr[\text{$\mcA_\dom$ evicts 3 from }[2,3]] = \frac{2\eps_1-\eps}{2\eps_1}.
\end{align*}
Substituting all these eviction probabilities, and writing the system of equations for $p_t,q_t,r_t$ above in matrix form, we obtain
\begin{align*}
    \begin{bmatrix}
        p_t \\ q_t \\ r_t
    \end{bmatrix}
    &=
    \begin{bmatrix}
       1-\eps+\eps_1  & \eps_1 \cdot \frac{1+\eps_1-2\eps}{2-2\eps} & (1-\eps) \cdot \frac{2\eps_1-\eps}{2\eps_1} \\
       (\eps-\eps_1) \cdot \frac{1-\eps-\eps_1}{2-2\eps} & 1-\eps_1 & (1-\eps) \cdot \frac{\eps}{2\eps_1} \\
       (\eps-\eps_1) \cdot \frac{1-\eps+\eps_1}{2-2\eps} & \eps_1 \cdot \frac{1-\eps_1}{2-2\eps} & \eps
    \end{bmatrix}
    \begin{bmatrix}
        p_{t-1} \\ q_{t-1} \\ r_{t-1}
    \end{bmatrix} \\
    &= B^{t-1} \begin{bmatrix}
        p_{1} \\ q_{1} \\ r_{1}
    \end{bmatrix}
    = B^{t-1} \begin{bmatrix}
        1 \\ 0 \\ 0
    \end{bmatrix},
\end{align*}
where we denoted the matrix by $B$ and rolled out the recurrence. Substituting in \eqref{eqn:miss-eqn}, we have that
\begin{align*}
    \Pr[\mcA_\dom \text{ suffers miss at }t] &= 
    \begin{bmatrix}
        \eps-\eps_1 & \eps_1 & 1-\eps
    \end{bmatrix}
    B^{t-1} \begin{bmatrix}
        1 \\ 0 \\ 0
    \end{bmatrix},
\end{align*}
and thus,
\begin{align}
    \E[\cost(\mcA_\dom, T)] &= \begin{bmatrix}
        \eps-\eps_1 & \eps_1 & 1-\eps
    \end{bmatrix}
    (I + B + B^2 + \dots + B^{T-1}) \begin{bmatrix}
        1 \\ 0 \\ 0
    \end{bmatrix}. \label{eqn:dom-gen-misses}
\end{align}
Now that we have exact expressions given by \eqref{eqn:ref-gen-misses} and \eqref{eqn:dom-gen-misses}, we can do a computer search over assignments to $T, \eps, \eps_1$---each assignment gives a lower bound for $\frac{\E[\cost(\mcA_\dom, T)]}{\E[\cost(\mcA_\rf, T)]}$. For example, our (admittedly limited) search yields
\begin{align*}
    \frac{\E[\cost(\mcA_\dom, T)]}{\E[\cost(\mcA_\rf, T)]} \ge 1.5907,
\end{align*}
for $\eps=10^{-5}, T=10^8, \eps_1=0.7069\eps$.

\begin{remark}
    \label{remark:potential-improving-lower-bound}
    While we do believe that further tuning $\eps, \eps_1$ and $T$ will likely not improve the lower bound by too much, it is conceivable that a better lower bound may be obtained by going beyond $n=3, k=2$ (albeit with messier calculations). For example, there appears to be scope for improvement within instances having the same blueprint as above for slightly larger values of $n$ and $k$, where there are certain high-probability pages that $\mcA_\rf$ always keeps in the cache.
\end{remark}

\begin{tikzpicture}
    % Define styles
    \tikzstyle{problem} = [rectangle, draw=black, fill=blue!20, rounded corners, minimum width=2cm, minimum height=0.5cm]
    \tikzstyle{node} = [circle, draw=black, minimum size=8mm, inner sep=0mm]
    \tikzstyle{selected} = [diamond, draw=black, fill=green!30, minimum size=6mm]
    \tikzstyle{unselected} = [diamond, draw=black, fill=red!30, minimum size=6mm]
    \tikzstyle{final} = [circle, draw=black, minimum size=6mm]
    \tikzstyle{bar} = [rectangle, draw=black, fill=blue!50]
    
    % Nodes
    \node[problem] (root) {math problem};
    
    \node[selected] (n1) [below left=1.0cm and 0.5cm of root] {\tiny +2.1};
    \node[unselected] (n2) [below left=1.0cm and -0.75cm of root] {\tiny -1.2};
    \node[selected] (n3) [below right=1.0cm and -0.75cm of root] {\tiny +1.3};
    \node[selected] (n4) [below right=1.0cm and 0.5cm of root] {\tiny +0.1};
    
    \node[final] (f1) [below=0.65cm of n1] {};
    \node[final] (f2) [below=0.65cm of n2] {};
    \node[final] (f3) [below=0.65cm of n3] {};
    \node[final] (f4) [below=0.65cm of n4] {};
    
    % Edges
    \draw (root) -- (n1);
    \draw (root) -- (n2);
    \draw (root) -- (n3);
    \draw (root) -- (n4);
    
    \draw[dashed] (n1) -- (f1);
    \draw[dashed] (n1) -- (f2);
    \draw[dashed] (n3) -- (f3);
    \draw[dashed] (n4) -- (f4);
    
    % Annotations
    \node[above right=0.1cm and 0.5cm of n4] {\textcolor{blue}{softmax}};
    \node[right=0.5cm of f4] {\textcolor{blue}{sample $N$: $1, 1, 3, 4$}};

    % Bars for softmax values
    \node[below right=-0.1cm and 0.5cm of n4] {\textcolor{blue}{distribution:}};
    \node[below right=0.35cm and 2.45cm of n4] (b1) {};
    \node[right=0.01cm of b1] (b2) {};
    \node[right=0.01cm of b2] (b3) {};
    \node[right=0.01cm of b3] (b4) {};
    
    \draw[bar] ($(b1) + (-0.1,0)$) rectangle ($(b1) + (0.1,+0.617)$);
    \draw[bar] ($(b2) + (-0.1,0)$) rectangle ($(b2) + (0.1,+0.023)$);
    \draw[bar] ($(b3) + (-0.1,0)$) rectangle ($(b3) + (0.1,+0.277)$);
    \draw[bar] ($(b4) + (-0.1,0)$) rectangle ($(b4) + (0.1,+0.083)$);
\end{tikzpicture}
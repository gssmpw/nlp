% 定义三个自定义颜色
\definecolor{AssessmentColor}{HTML}{E7B489}  
\definecolor{DiagnosisColor}{HTML}{8CAFD0}   
\definecolor{TreatmentColor}{HTML}{BECD8F}   


\tikzstyle{my-box}=[
    rectangle,
    rounded corners,
    text opacity=1,
    minimum height=1.5em,
    minimum width=5em,
    inner sep=2pt,
    align=center,
    fill opacity=.5,
]
\tikzstyle{leaf}=[my-box, minimum height=1.5em,
    text=black, align=left,font=\scriptsize,
    inner xsep=2pt,
    inner ysep=4pt,
]

% 定义一个 style 用来给一个节点及其子节点统一着色
\forestset{
  color subtree/.style={
    fill=#1!10,    % 背景颜色
    draw=#1,       % 节点边框线颜色
    edge+={draw=darkgray, line width=1pt},
    for children={
      color subtree=#1   % 递归给后代也应用此配色
    }
  }
}

\begin{figure*}[t]
    \centering
    \resizebox{\textwidth}{!}{
        \begin{forest}
            forked edges,
            for tree={
                grow=east,
                reversed=true,
                anchor=base west,
                parent anchor=east,
                child anchor=west,
                base=left,
                font=\small,
                rectangle,
                draw=hidden-draw,
                rounded corners,
                align=left,
                minimum width=4em,
                edge+={darkgray, line width=1pt},
                s sep=3pt,
                inner xsep=2pt,
                inner ysep=3pt,
                ver/.style={rotate=90, child anchor=north, parent anchor=south, anchor=center},
            },
            where level=1{text width=4.0em,font=\scriptsize,}{},
            where level=2{text width=5.6em,font=\scriptsize,}{},
            where level=3{text width=6.2em,font=\scriptsize,}{},
            where level=4{text width=6.0 em,font=\scriptsize,}{},
            [ LLMs in \\Psychotherapy
                [
                    Assessment,
                    color subtree=AssessmentColor,
                    [
                        Symptoms
                        [
                            Detection
                            [
                                \citet{22,24,27,66,95}; \\ \citet{85,91,94,96}; \\ \citet{108,120,18}
                                , leaf, text width=26.6em
                            ]
                        ]
                        [
                            Severity
                            [
                                \citet{11,23,58,100}; \\ \citet{59}
                                , leaf, text width=26.6em
                            ]
                        ]
                    ]
                    [
                        Cognition
                        [
                           \citet{5,10,12,14,16,38}\\ \citet{45}
                            , leaf, text width=34.5em
                        ]
                    ]
                    [
                        Behavior
                        [
                            \citet{36,60,65,67}
                            , leaf, text width=34.5em
                        ]
                    ]
                    [
                        Advanced
                        [
                            \citet{48,53,99}
                            , leaf, text width=34.5em
                        ]
                    ]
                ]
                [
                    Diagnosis,
                    color subtree=DiagnosisColor
                    [
                        Static Diagnosis
                        [
                            \citet{11,107,102,124,110}
                            , leaf, text width=34.5em
                        ]
                    ]
                    [
                        Dynamic Diagnosis
                        [
                            \citet{9,33,52,106}
                            , leaf, text width=34.5em
                        ]
                    ]
                ]
                [
                    Treatment,
                    color subtree=TreatmentColor
                    [
                        LLM as a Virtual \\ Therapist
                        [
                            \citet{20,29,40,54,55}; \\ \citet{77,78,109}
                            , leaf, text width=34.5em
                        ]
                    ]
                    [
                        LLM as an Assistive \\Tool
                        [
                            \citet{2,3,5,35,43}; \\ \citet{64,70,81}
                            , leaf, text width=34.5em
                        ]
                    ]
                    [
                        LLM as Simulated \\Patients for Clinician \\Education
                        [
                            \citet{49,51,56,80}
                            , leaf, text width=34.5em
                        ]
                    ]
                    [
                        LLM for Evaluation \\and Quality Analysis
                        [
                            \citet{4,19,32,37,39,62}; \\ \citet{65,67,101,103,122}
                            , leaf, text width=34.5em
                        ]
                    ]
                ]
            ]
        \end{forest}
    }
    \caption{Taxonomy of Research on Large Language Models in Psychotherapy.}
    \vspace{-4mm}
    \label{fig:overall}
\end{figure*}

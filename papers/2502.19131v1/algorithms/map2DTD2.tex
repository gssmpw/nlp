\KwIn{A graph representation $\mathcal{G(C)}$ of a schema of a category $\mathcal{C}$ }
    \KwOut{XML DTD $\mathcal{D}$=($L$, T, P, R, r)}
    \DontPrintSemicolon

Let $\epsilon$ be the root $r$ of $D$;

 $T= \{@ID\}$;

 Initialize $L$, $P$, and $R$ to be empty sets;

\ForEach{ unprocessed object $O$ in $V(\mathcal{G(C)})$ with outgoing edges}
{ 
     $L \leftarrow L \cup \{\lambda(O)\}$; \tcp*{$\lambda(O)$ is the label of $O$}

     $P_\epsilon \leftarrow P_\epsilon \cdot (\lambda(O))^+$;
    
     $R(\lambda(O))=\{@ID\}$;
    
    Add\_neighbours($O$);
      
    %Process\_entities\_relationships($O$)

     Mark $O$ as a processed node;
    
}


\SetKwFunction{func}{ $\mbox{Add\_neighbours}$}
\SetKwProg{Fn}{Function}{:}{}
\Fn{\func{$O$}}
{
    \ForEach{unprocessed object $N$ in $outNbr(O)$ }
    {    
     \If{$N$ has any outgoing edge}
     { 
        $T= T \cup \{@\lambda(N)$\_ID\};
        
        $R(O)=R(O) \cup \{@\lambda(N)$\_ID\};
     }
    \Else 
     {  
       $P_O \leftarrow P_O \cdot \lambda(N)$;

        $L \leftarrow L \cup \{\lambda(N)\}$;
      }   
    }
}   



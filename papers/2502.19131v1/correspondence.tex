\vspace{-2mm}

\section{Reduced Representation and Normal Forms}



This section demonstrates that the resulting relational schema from the first and second reduced representations can effectively conform to various levels of normal forms in relational and XML databases.  Figure \ref{fig:NFScope} depicts the structures and relationships among various database normal forms and two reduced representations of categories discussed in this paper.

%In this section, we describe the connection between the reduced representation of categories and the normal form theory on databases. The main purpose of the normal form is to eliminate at least some of the redundancies and update anomalies that might otherwise arise. We show that the output schema from the first and second reduced representations defined before can satisfy the different levels of normal forms for relation and XML data.


%(1RR) can satisfy the (improved) Boyce-codd normal form and XML normal form. The schema from the second reduced representation (2RR) can satisfy the (embedded) fourth normal form. 

%Intuitively, schemata in normal form are good schemata. In particular

%And the third reduced representation (3RR) is beyond the classic decomposition-based normal form theory and it connects to the embedded project-join dependency in relational databases, functional dependency in XML databases, and local dependency in object databases. Table \ref{tab:corresponding} illustrates three levels of reduced representations and the corresponding  normal forms.

%In this section, we explore the relationship between the reduced representation of categories and the theory of normal forms in databases. The primary objective of normal forms is to mitigate redundancies and update anomalies that may arise in the data. Intuitively, schemata in normal form are good schemata. Specifically, we demonstrate that the output schema resulting from the first reduced representation (1RR) can satisfy the (improved) Boyce-Codd normal form and XML normal form. The schema derived from the second reduced representation (2RR) can adhere to the Project-Join normal form (PJ/NF). Furthermore, the third reduced representation (3RR) goes beyond the traditional decomposition-based normal form theory. But the similar concepts can be found as embedded project-join dependencies in relational databases, functional dependencies in XML databases, and local dependencies in object databases. Table \ref{tab:corresponding} provides an overview of the three levels of reduced representations and their corresponding normal forms.

%The existing relational normal form theory is applicable for only relation data, which points out the need for a generalized normal form theory that can be applied to multi-model data simultaneously. In the following sections, we attempt to tackle this challenge by leveraging the categorical framework. 



%\begin{table}\begin{center}\begin{tabular}{ |c|c|c| } \hline Reduced Representations & Definitions &  Normalized Form  \\ [0.5ex] \hline  \hline First RR & Remove identity and derivable arrows & BCNF, XML NF \\ \hline Second RR  & Remove restorable limits and colimits & PJ/NF  \\ \hline Third RR & Remove arrows from commutative diagrams & None \\ \hline \end{tabular}\caption{Three levels of reduced representations and the corresponding  normal forms}\end{center}\label{tab:corresponding}\end{table}


%\subsection{1RR: Do not show the Same Fact twice}


%The first reduced representation (1RR) of a category returns a minimal cover of functional dependencies and eliminates the composed arrows within the category. In the context of relational databases, the third normal form (3NF) eliminates transitive functional dependencies. It is reasonable to conjecture that the resulting relational schema from 1RR would satisfy the conditions of 3NF. Moreover, we can establish a stronger claim by proving that the output schema adheres to the Boyce-Codd normal form (BCNF), which represents a higher level of normalization compared to 3NF.


%The first reduced representation (1RR) of a category serves to provide a minimal cover of functional dependencies while eliminating composed arrows within the category. Meanwhile, the third normal form (3NF) specifically targets the removal of transitive functional dependencies. It is therefore reasonable to posit that the resulting relational schema derived from 1RR would meet the requirements of 3NF. Furthermore, we can strengthen this assertion by proving that the output schema indeed satisfies the Boyce-Codd normal form (BCNF), which represents a higher level of normalization over 3NF.

%ensuring the elimination of all non-trivial functional dependencies. By establishing compliance with BCNF, we can affirm that the output schema achieves a more rigorous level of normalization and meets the highest standards of relational database design.
 
%Note that the relational normalization theory is based on the universal relational assumption (URA). We mention the connection between the coherence category and URA. The coherence category is a category in that all diagrams are commutative.  

%\begin{definition} (BCNF) A relational schema R is in Boyceâ€“Codd normal form if and only if for every one of its dependencies $X \rightarrow Y$, at least one of the following conditions hold: (1) $X \to Y$ is a trivial functional dependency ($Y \subseteq  X$), or (2)X is a superkey for schema R.\end{definition}






\begin{theorem} 
Each relational schema $R$ output from the first reduced representation (1RR) in Algorithm  \ref{alg:map2relationschema} is in the Boyce-Codd normal form (BCNF). \label{theo:BCNF}
\end{theorem}




%There are no transitive FD in those output attributes. Furthermore, we can claim this satisfies BCNF not only 3NF. This is because in the output relation schema, each FD has LHS and RHS with a single attribute. Is is possible to occur that there is a FD $X \to Y$, Y is only a partial key as in the case where is not BCNF. Therefore, no transitive rule means BCNF in this case.

%Now consider A has more than one attribute $A_1$,...,$A_n$. That is: $A_1,...,A_n \to B$ in R. Then $K \to A_1$,..., $K \to A_n$. Based on the construction of the first normal presentation, there is a object X = $A_1,...,A_m$ ($m \leq n$), $X \to B$. X is a proper subset of A. The the projection of X to $A_1,...A_m$ exists by default. Therefore, $K \to A_1$,..., $K \to A_m$ do belong to the minimal cover, as they can be derived, which makes the contradiction.







The detailed proofs of theorems can be found in Appendix \ref{sec:proofs}. Further, Ling et al. \cite{journals/tods/LingTK81} showed the inadequacy of BCNF  when applied to multiple relations. They identified that BCNF may contain ``\textit{superfluous}"  attributes. They proposed an enhanced normal form, called \textit{improved} BCNF. The following theorem further builds the connection between 1RR and the improved BCNF.




\begin{theorem} Each relation schema $R$ output from the 1RR in Algorithm  \ref{alg:map2relationschema} is also in the improved  Boyce-Codd normal form as defined in \cite{journals/tods/LingTK81}. \label{theo:improvedBCNF}
\end{theorem}




The output relational schemata of 1RR ensure a certain level of normal form satisfaction. Given its nature as a unified data model, it is reasonable to assume that this categorical framework extends its normalization benefits to corresponding XML and graph data representations. We can establish that the resulting XML DTD, derived from 1RR, satisfies the XML normal form defined by Arenas and Libkin in \cite{journals/tods/ArenasL04}.

\begin{theorem} The DTD schema output D from the first reduced representation is in XML normal form. \label{theo:DTDNormalform}
\end{theorem}


Given that 2RR is a higher level of reduced representation than 1RR, it is intuitively apparent that the data output from 2RR attains a higher level of normalization than that of 1RR. Furthermore, when considering the hierarchy of normal forms,  4NF imposes stricter constraints than BCNF. Thus, it is reasonable to consider that the relational schema resulting from 2RR complies with 4NF, which is described as follows. The proof of the theorem can be also found in Appendix \ref{sec:proofs}.


%Indeed, we can substantiate this assertion by demonstrating that the resultant relational schema from 2RR conforms to an ``improved" 4NF. Similar to the improved BCNF, this improved 4NF expands upon the classical 4NF by incorporating considerations for multiple relations globally. 




%To show the limits of the classical 4NF, let us consider three tables: $T_1(K_1, X, Y)$ (key $K_1$), $T_2(K_2, X, Z)$ (key $K_2$), and  $T_3(K_1, K_2) = \pi_{{K_1},{K_2}}(T_1 \bowtie_X T_2)$. Note that $T_3$ contains no multivalued dependencies and satisfies the 4NF. However, $T_3$ is a redundant table that can be derived with the join and projection operators from $T_1$ and $T_2$. 


 

%\begin{definition} (Embedded binary join dependency)  A relational table $R$ is subject to  an embedded binary join dependency $EBJ_{{x_1},...,{x_q}}(R_1,R_2)$,  if $R$ can be generated by the projection on attributes ${x_1},...,{x_q}$ from the table through the join of $R_1$ and $R_2$, that is,  \[R=\pi_{{x_1},...,{x_q}}(\bowtie (R_1,R_2)) \] \end{definition}

%Based on the above definition, $T_3$ satisfies the embedded binary join dependency $\pi_{{K_1},{K_2}}$($\bowtie$($T_1$,$T_2$)). Note that the concept of an embedded binary join dependency, as discussed above, is not an original contribution introduced here. Extensive research into various classes of dependencies had already transpired during the 1970s and 1980s. Among these, the aforementioned embedded dependency had been initially mentioned in the work by Fagin in \cite{journals/tods/Fagin77}. The embedded dependency can be further generalized into an even broader class of dependency called \textit{algebraic dependency} by Yannakakis and Papadimitriou in \cite{YANNAKAKIS19822}.

\begin{figure}
\centering
\includegraphics[width=0.7\textwidth]{figures/NFScope.jpg}
\caption{Reduced representations of categories and database normal forms} \label{fig:NFScope}
\end{figure}



%\begin{definition} (Improved 4NF) A set of relation schemata $S$ is in the generalized fourth normal form with respect to a set $F$ of functional, multivalued, and embedded binary join dependencies if, for every nontrivial embedded join dependency $EBJ_{{x_1},...,{x_q}}$($R_1$,$R_2$) that is defined in $R$ with $F^+$ (that is implied by $F$),  both $R_1$ and $R_2$ are superkeys of $R$. \label{def:generalized4NF}\end{definition}


\begin{theorem} Each relational schema output R from the second reduced representation (2RR) by Algorithm \ref{alg:map2relationschema} is in the fourth normal form. \label{the:4NF}
\end{theorem}

%\begin{example} Recall Fig \ref{fig:2RRExample}. If we run Algorithm \ref{alg:map2relationschema} for Fig \ref{fig:2RRExample}(a), the output  relation  $R(A,B,C,D)$ is not in 4NF, due to the multivalued dependency $A \to\to B$ and the functional dependency $B \to C$. In contrast, if we compute the 2RR in Fig \ref{fig:2RRExample}(c)  and convert it  into relations, then all resulting tables $R_1(A,B)$,  $R_2(A,D)$, $R_3(A,C)$ and $R_4(B,C)$ satisfy 4NF.  This example provides an intuitive demonstration of the benefits of the 2RR approach, which ensures that the resulting output schema satisfies 4NF.  \end{example}



\begin{example}
Recall Fig. \ref{fig:2RRExample}. Running Algorithm \ref{alg:map2relationschema} on Fig. \ref{fig:2RRExample}(a) produces the relation \( R(A, B, C, D) \), which does not satisfy 4NF due to the multivalued dependency \( A \to\to B \) and the functional dependency \( B \to C \). In contrast, computing the 2RR in Fig. \ref{fig:2RRExample}(c) and converting it into relations yields tables \( R_1(A, B) \), \( R_2(A, D) \), \( R_3(A, C) \), and \( R_4(B, C) \), all of which satisfy 4NF. This is a lossless join decomposition and functional dependency preserving.  This example demonstrates the advantage of the 2RR approach in ensuring that the resulting schema follows 4NF. \end{example}

 %Currently, as far as we know, there exists no established normal form theory for XML and graph data that directly corresponds to the relational 4NF. Nonetheless, the unified framework introduced in this paper offers a novel approach, allowing us to achieve a similar normal form concept with the 4NF for XML and graph data. More discussion, exemplification and proofs can be found in  Appendix \ref{sec:proofs}.


Currently, as far as we know, there is no well-established normal form theory for XML and graph data that directly aligns with the relational 4NF. Consequently, we are unable to prove an analogous theorem for XML or graph 4NF with 2RR. However, the unified framework proposed in this paper enables us to regard the output schema with 2RR as achieving a similar normal form to 4NF for XML and graph data, as illustrated below:

\begin{figure}
\centering
\includegraphics[width=0.7\textwidth]{figures/2RRGraphExample.png}
\caption{An example to illustrate the graph normal form (2RR)} \label{fig:GraphExample2RR}
\end{figure}

\begin{example} This example illustrates a graph normal form with 2RR (corresponding to 4NF). See Figure \ref{fig:GraphExample2RR}. There are two MVDs: \textit{Course} $\to\to$ \textit{Teacher} and \textit{Course} $\to\to$ \textit{Student}. The schema in Figure \ref{fig:GraphExample2RR}(a) contains an $SCT$ node to interconnect three nodes, resulting in duplicated information due to the presence of the two MVDs. In contrast, Figure \ref{fig:GraphExample2RR} (b) is a normalized graph schema based on 2RR, wherein the $SCT$ object is decomposed into two distinct relationship objects ($SC$ and $TC$ nodes). This decomposition effectively eliminates redundancy in the schema. Note that $SC$ and $TC$ node can be removed if the graph schema  supports many-to-many relationships.
\end{example}

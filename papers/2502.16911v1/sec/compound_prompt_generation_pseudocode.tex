\begin{algorithm}[H]
\caption{Compound Prompt Generation}
\label{alg:compound_prompt_generation}
\begin{algorithmic}[1]
\REQUIRE Classnames $c_1, \ldots, c_N$, cooccurrence info $\mathbb{P}$, thresholds $\tau_2$ and $\tau_3$, optional LLM $\Phi$
\ENSURE Generated prompt set $P$

\STATE Initialize $P \leftarrow \emptyset$
\FOR{$i \in [N-1]$}
    \FOR{$j \in [i+1, N]$}
        \IF{$\mathbb{P}(j \mid i) > \tau_2$}
            \STATE $P \leftarrow P \cup \{\textrm{"$c_i$ and $c_j$"}\}$
            \IF{$\max_{k \in [N] - \{i,j\}} \mathbb{P}(k \mid i, j) > \tau_3$}
                \STATE $k^{*} \leftarrow \arg\max_{k \in [N] - \{i,j\}} \mathbb{P}(k \mid i, j)$
                \STATE $P \leftarrow P \cup \{\textrm{"$c_i$, $c_j$, and $c_{k^{*}}$"}\}$
            \ENDIF
        \ENDIF
    \ENDFOR
\ENDFOR
\STATE Remove redundant triplets $(i,j,k)$ vs $(i,k,j)$ by comparing $\mathbb{P}(k|i,j)$ and $\mathbb{P}(j|i,k)$
\IF{optional LLM $\Phi$ is provided}
    \STATE $P \leftarrow P \cup \Phi(P)$
\ENDIF
\RETURN $P$
\end{algorithmic}
\end{algorithm}

\section{Appendix}
\label{sec:app}

\subsection{Details of Datasets}
\label{app:datasets}

We present the labeled and unlabeled class distributions of Cora, CiteSeer, and PubMed in \figref{fig:distribution}. We can observe that the class distributions of the two sets are dismatched. Additionally, we provide the detailed statistics of benchmark datasets in \tabref{tab:sta}.


\begin{figure}[h]
\centering
\includegraphics[width=\linewidth]{pic/distribution.pdf}
\caption{The first row is the class distribution of the unlabeled set, and the second row is that of the labeled set.}
\label{fig:distribution}
\end{figure}

\begin{table}[h]
\caption{Statistics of datasets}
\resizebox{1\linewidth}{!}{
\begin{tabular}{l|ccccc}
\Xhline{1.2pt}
\textbf{Dataset} & \textbf{Type}  & \textbf{\#nodes} & \textbf{\#edges} & \textbf{\#features} & \textbf{\#classes} \\ \hline
Cora     & Homophily & 2,708   & 10,556  & 1,433      & 7         \\
CiteSeer & Homophily & 3,327   & 9,104   & 3,703      & 6         \\
PubMed   & Homophily & 19,717  & 88,648  & 500        & 3         \\
CS       & Homophily & 18,333  & 163,788 & 6,805      & 15        \\
Physics  & Homophily & 34,493  & 495,924 & 8,415      & 5         \\
ogbn-arxiv & Homophily & 169,343 & 1,116,243 & 129    & 40        \\
CoraFull & Homophily & 19,793  & 126,842 & 8,710      & 70        \\
Penn94   & Heterophily & 41,554  & 1,362,229 & 5        & 2         \\
Roman-Empire & Heterophily & 22,662 & 32,927 & 300      & 18        \\
 \Xhline{1.2pt}
\end{tabular}}
\label{tab:sta}
\end{table}

\subsection{Efficiency Study}
Large-scale graph inputs present significant computational challenges that impede feature aggregation in GNN training and inference \cite{zhang2024two}. Therefore, the efficiency of GNN is important in practical applications. Thanks to disentangled propagation and transformation, our proposed \texttt{IceBerg} exhibits superior efficiency.

\begin{figure}[h]
\centering
\includegraphics[width=\linewidth]{pic/efficiency.pdf}
\caption{The time it takes to run 1000 epochs across datasets.}
\label{fig:efficiency}
\end{figure}

\subsection{Additional Experiments}

In this subsection, we present the experimental results on large and heterophilic graphs. In \tabref{tab:large}, each of the three datasets contains more than 19,000 nodes and 126,000 edges. For Physics, ogbn-arxiv, Penn94, and Roman-Empire, we follow the setting of step imbalance. For CoraFull, since it naturally exhibits a strong imbalance, we randomly select 10\% of the samples as the training set, 40\% as the validation set, and 50\% as the test set.


\begin{table}[h]
\caption{Model performance on large graph datasets.}
\resizebox{1\linewidth}{!}{
\begin{tabular}{ll|ccccc|ccccc}
\Xhline{1.2pt}
\multicolumn{2}{c|}{\textbf{Metric}}                            & \multicolumn{5}{c|}{\textbf{Balance Acc.} ($\uparrow$)}                                                                                                                                                     & \multicolumn{5}{c}{\textbf{Macro-F1} ($\uparrow$)}                                                                                                                                                          \\ \hline
\multicolumn{2}{c|}{\textbf{Baselines}}                     & \multicolumn{1}{c}{ERM} & \multicolumn{1}{c}{RW} & \multicolumn{1}{c}{BS} & \multicolumn{1}{c}{MIX} & ENS & \multicolumn{1}{c}{ERM} & \multicolumn{1}{c}{RW} & \multicolumn{1}{c}{BS} & \multicolumn{1}{c}{MIX} & \multicolumn{1}{c}{ENS} \\ \hline
\multicolumn{1}{l|}{\multirow{4}{*}{\rotatebox{90}{\textbf{Physics}}}}      & BASE & 72.24 & 83.80 & 88.50 & 84.42 & \texttt{OOT} & 71.86 & 84.18 & 86.97 & 85.05 & \texttt{OOT}    \\
\multicolumn{1}{l|}{}                           & +TAM & 70.80 & 83.18 & 88.87 & 84.71 & \texttt{OOT} & 69.69 & 83.26 & 86.86 & 85.10 & \texttt{OOT}   \\
\multicolumn{1}{l|}{}                           & +BAT & 89.21 & 89.37 & 89.78 & 89.83 & \texttt{OOT} & 88.64 & 87.42 & 87.32 & 89.39 & \texttt{OOT}   \\
\multicolumn{1}{l|}{}                           & +\texttt{IceBerg} & \textbf{91.63} & \textbf{91.84} & \textbf{91.94} & \textbf{89.91} & \texttt{OOT} & \textbf{89.89} & \textbf{89.61} & \textbf{89.79} & \textbf{89.94} & \texttt{OOT}     \\  \hline
\multicolumn{1}{l|}{\multirow{4}{*}{\rotatebox{90}{\textbf{ogbn-arxiv}}}}  & BASE & 23.59 & 25.53 & 27.16 & \texttt{OOM} & \texttt{OOM} & 12.07 & 16.02 & 17.94 & \texttt{OOM} & \texttt{OOM}    \\
\multicolumn{1}{l|}{}                           & +TAM & 23.05 & 24.52 & 25.88 & \texttt{OOM} & \texttt{OOM} & 14.58 & 14.58 & 16.88 & \texttt{OOM} & \texttt{OOM}   \\
\multicolumn{1}{l|}{}                           & +BAT & 25.28 & 27.74 & 27.49 & \texttt{OOM} & \texttt{OOM} & 17.78 & 17.78 & 18.04 & \texttt{OOM} & \texttt{OOM}    \\
\multicolumn{1}{l|}{}                           & +\texttt{IceBerg} & \textbf{28.13} & \textbf{28.97} & \textbf{28.78} & \texttt{OOM} & \texttt{OOM} & \textbf{18.86} & \textbf{18.86} & \textbf{18.60} & \texttt{OOM} & \texttt{OOM}      \\    \hline
\multicolumn{1}{l|}{\multirow{4}{*}{\rotatebox{90}{\textbf{CoraFull}}}}  & BASE & 52.75 & 53.01 & 57.21 & 57.16 & 57.72 & 54.00 & 54.14 & \textbf{54.67} & \textbf{55.96} & \textbf{55.97}    \\
\multicolumn{1}{l|}{}                           & +TAM & 47.25 & 47.21 & 51.24 & 55.11 & 56.79 & 48.10 & 47.87 & 48.88 & 54.39 & 55.48    \\
\multicolumn{1}{l|}{}                           & +BAT & 54.93 & 54.90 & 57.26 & 57.21 & 57.77 & 55.23 & 55.31 & 53.19 & 55.64 & 55.77    \\
\multicolumn{1}{l|}{}                           & +\texttt{IceBerg} & \textbf{56.49} & \textbf{56.25} & \textbf{57.44} & \textbf{58.26} & \textbf{58.67} & \textbf{55.66} & \textbf{55.58} & 54.62 & 55.48 & 55.35      \\    \Xhline{1.2pt}
\end{tabular}}
\label{tab:large}
\end{table}



\begin{table}[h]
\caption{Model performance on heterophilic graphs.}
\resizebox{1\linewidth}{!}{
\begin{tabular}{ll|ccccc|ccccc}
\Xhline{1.2pt}
\multicolumn{2}{c|}{\textbf{Metric}}                            & \multicolumn{5}{c|}{\textbf{Balance Acc.} ($\uparrow$)}                                                                                                                                                     & \multicolumn{5}{c}{\textbf{Macro-F1} ($\uparrow$)}                                                                                                                                                          \\ \hline
\multicolumn{2}{c|}{\textbf{Baselines}}                     & \multicolumn{1}{c}{ERM} & \multicolumn{1}{c}{RW} & \multicolumn{1}{c}{BS} & \multicolumn{1}{c}{MIX} & ENS & \multicolumn{1}{c}{ERM} & \multicolumn{1}{c}{RW} & \multicolumn{1}{c}{BS} & \multicolumn{1}{c}{MIX} & \multicolumn{1}{c}{ENS} \\ \hline
\multicolumn{1}{l|}{\multirow{4}{*}{\rotatebox{90}{\textbf{Penn94}}}}      & BASE & 60.67 & 74.31 & 72.79 & 74.30 & \texttt{OOT} & 53.24 & 74.13 & 72.76 & 74.19 & \texttt{OOT}    \\
\multicolumn{1}{l|}{}                           & +TAM & 64.32 & 70.07 & 64.62 & 70.58 & \texttt{OOT} & 63.74 & 69.88 & 63.35 & 70.44 & \texttt{OOT}   \\
\multicolumn{1}{l|}{}                           & +BAT & 63.37 & 74.14 & 73.46 & 74.49 & \texttt{OOT} & 58.89 & 74.02 & 73.41 & 74.39 & \texttt{OOT}   \\
\multicolumn{1}{l|}{}                           & +\texttt{IceBerg} & \textbf{68.62} & \textbf{74.84} & \textbf{73.84} & \textbf{74.77} & \texttt{OOT} & \textbf{68.00} & \textbf{74.76} & \textbf{73.61} & \textbf{74.69} & \texttt{OOT}     \\  \hline
\multicolumn{1}{l|}{\multirow{4}{*}{\rotatebox{90}{\textbf{R-Empire}}}}  & BASE & 39.18 & 42.21 & \textbf{44.66} & - & - & 37.96 & 38.85 & \textbf{39.93} & - & -     \\
\multicolumn{1}{l|}{}                           & +TAM & 36.90 & 39.61 & 41.25 & - & - & 34.88 & 35.78 & 36.33 & - & -    \\
\multicolumn{1}{l|}{}                           & +BAT & 38.61 & 42.21 & 44.21 & - & - & 37.35 & 38.60 & 39.51 & - & -    \\
\multicolumn{1}{l|}{}                           & +\texttt{IceBerg} & \textbf{39.94} & \textbf{42.90} & 44.52 & - & - & \textbf{38.12} & \textbf{39.30} & 39.19 & - & -      \\    \Xhline{1.2pt}
\end{tabular}}
\label{tab:heterophilic}
\end{table}
%general notations
\def\rset{\mathbb{R}}
\def\nset{\mathbb{N}}
\def\rmd{\mathrm{d}}
\def\rme{\mathrm{e}}
\def\normpdf{\mathrm{N}}
\def\uniform{\mathcal{U}}
\def\eqsp{\,}
\def\Id{\mathbf{I}}
\def\zero{0}
\def\pV{\mathbb{V}}
\def\pE{\mathbb{E}}
\def\pCov{\mathbb{C}\mathrm{ov}}
\def\std{\sigma}
\def\a{\alpha}
\def\cov{\Sigma}
\def\var{v}
\def\indic{\mathbbm{1}}
\def\eqdef{\vcentcolon=}
\def\iid{i.i.d.}
\def\simiid{\overset{\mathrm{i.i.d.}}{\sim}}
\def\wrt{w.r.t.}
%\def\diag{\mathrm{diag}}
\def\diag{\mbox{diag}}
\def\normconst{\mathcal{Z}}
\def\law{\mathsf{Law}}
\def\smbs{{\scriptscriptstyle{\backslash}}}
% \DeclareMathOperator*{\argmin}{argmin}
% \def\trace{\operatorname{tr}}
% \newcommand{\note}[2]{\refstepcounter{notecounter} \begin{leftbar}  \textcolor{red}{\small{\textbf{#1}}} \textcolor{violet}{(\small{\textbf{Note} \thenotecounter})}: \begin{sf}{\color{blue} \small{#2}} \end{sf}  \end{leftbar}}

\def\txts{\textstyle}
\def\rhs{r.h.s.}
\def\lhs{l.h.s.}
\def\ie{\textit{i.e.}}

\newcommandx\probmeas[4][4=]{
    \ifthenelse{\equal{#4}{}}{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            \mu _{#1}
        }{
            \mu _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            \mu _{#1}(\cdot|#2)
        }{
            \mu _{#1}(#3|#2)
        }
    }}{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            \mu^{#4} _{#1}
        }{
            \mu^{#4} _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            \mu^{#4} _{#1}(\cdot|#2)
        }{
            \mu^{#4} _{#1}(#3|#2)
        }
    }
    }
}

\newcommandx\post[4][4=\obs]{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            \pi^{#4} _{#1}
        }{
            \pi^{#4} _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            \pi^{#4} _{#1}(\cdot|#2)
        }{
            \pi^{#4} _{#1}(#3|#2)
        }
    }
    }

\newcommandx\vi[3][3=\vparam]{
    \ifthenelse{\equal{#2}{}}{
            \lambda^{#3} _{#1}
        }{
            \lambda^{#3} _{#1}(#2)
        }
    }

\newcommandx\hpost[4][4=\obs]{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            \hat\pi^{#4} _{#1}
        }{
            \hat\pi^{#4} _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            \hat\pi^{#4} _{#1}(\cdot|#2)
        }{
            \hat\pi^{#4} _{#1}(#3|#2)
        }
    }}

\newcommand\epost[3]{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            \overline\pi^{\obs}_{#1}
        }{
            \overline\pi^{\obs}_{#1}(#3) 
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            \overline\pi^{\obs}_{#1}(\cdot|#2)
        }{
            \overline\pi^{\obs}_{#1}(#3|#2) 
        }
    }}

\newcommand\pot[2]{
    \ifthenelse{\equal{#2}{}}{
        g_{#1}(\obs|\cdot)
    }{
        g_{#1}(\obs|#2)
    }}
\newcommandx\hpot[3][3=]{
    \ifthenelse{\equal{#2}{}}{
        \hat{g}^{#3} _{#1}(\obs|\cdot)
    }{
        \hat{g}^{#3} _{#1}(\obs|#2)
    }}

% avoids unnecessary space that pushes the subscript down when 4=null
\newcommandx\pdata[4][4=]{
    \ifthenelse{\equal{#4}{}}{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            p _{#1}
        }{
            p _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            p _{#1}(\cdot|#2)
        }{
            p _{#1}(#3|#2)
        }
    }}{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            p^{#4} _{#1}
        }{
            p^{#4} _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            p^{#4} _{#1}(\cdot|#2)
        }{
            p^{#4} _{#1}(#3|#2)
        }
    }
    }
}
\newcommand\fw[3]{
        \ifthenelse{\equal{#3}{}}{
            q _{#1}(\cdot|#2)
        }{
            q _{#1}(#3|#2)
        }
    }
\newcommandx\denoiser[4][4=]{
    \ifthenelse{\equal{#2}{}}{
        \ifthenelse{\equal{#3}{}}{
            D^{#4}_{#1}
        }{
            D^{#4} _{#1}(#3)
        }
    }{
        \ifthenelse{\equal{#3}{}}{
            D^{#4} _{#1}(\cdot|#2)
        }{
            D^{#4} _{#1}(#3|#2)
        }
    }}
\def\wght{\omega}
\newcommand{\intset}[2]{\llbracket #1, #2 \rrbracket}
\newcommand{\kldivergence}[2]{\mathsf{KL}(#1 \parallel #2)}

%specific notations
\newcommand{\tcr}[1]{\textcolor{red}{#1}}
\def\algoname{{\sc{Mixture-Guided Diffusion Model}}}
\def\ddimfn{\small{\mathsf{DDPM}}}
\def\vifn{\small{\mathsf{Gauss}\_\mathsf{VI}}}
\def\tauks{L}
% algorithms
\def\algo{{\sc{MGDM}}}
\def\pgdm{{\sc{PGDM}}}
\def\dps{{\sc{DPS}}}
\def\diffpir{{\sc{DiffPir}}}
\def\traineddiff{{\sc{TrainedDiff}}}
\def\ddnm{{\sc{DDNM}}}
\def\resample{{\sc{ReSample}}}
\def\psld{{\sc{PSLD}}}
\def\dcps{{\sc{DCPS}}}
\def\DCPS{{\sc{DCPS}}}
\def\reddiff{{\sc{RedDiff}}}
\def\fps{{\sc{FPS}}}
\def\daps{{\sc{DAPS}}}
\def\pnpdm{{\sc{PNP-DM}}}
\def\isdm{{\sc{ISDM}}}
\def\msdm{{\sc{MSDM}}}
\def\demucs{{\textsc{{Demucs}\textsubscript{512}}}}

% dataset
\def\ffhq{{\texttt{FFHQ}}}
\def\imagenet{{\texttt{ImageNet}}}
\def\slakh{{\texttt{slakh2100}}}
\def\sisdri{{SI-SDR\textsubscript{I}}}
\def\sisdr{{SI-SDR}}


\def\gauss{\mathcal{N}}
\def\bfA{\mathbf{A}}
\def\stdobs{\sigma_\obs}
\def\obs{{\mathbf{y}}}
\def\postet{\pi}
\def\param{\theta}
\def\prior{q}
\def\dimobs{{d_\obs}}
\def\dimx{{d}}
% \def\normconst{\mathcal{Z}}

\newcommandx{\acp}[2][2=]{\ifthenelse{\equal{#2}{}}{\alpha_{#1}}{\alpha_{#1:#2}}}
\newcommandx{\hpredx}[3][2=0,3=\param]{\smash{\boldsymbol{m}^{#3} _{#2|#1}}}
\newcommandx{\predx}[2][2=0]{\smash{\boldsymbol{m} _{#2|#1}}}
\newcommandx{\prednoise}[2][2=\param]{\smash{\boldsymbol{\epsilon}^{#2} _{#1}}}
% \newcommandx{\score}[2][2=\param]{s^{#2} _{#1}}
% \newcommandx{\fw}[4][4=]{\ifthenelse{\equal{#3}{}}{q^{#4} _{#1}}{q^{#4} _{#1}(#3|#2)}}
\newcommandx{\fwmarg}[3][3=]{\ifthenelse{\equal{#2}{}}{q^{#3} _{#1}}{q^{#3} _{#1}(#2)}}
% \newcommandx{\hmrg}[2][2=\ell]{\smash{\hat\pi^{#2} _{#1}}}
\newcommandx{\bw}[4][4=]{\ifthenelse{\equal{#3}{}}{q^{#4} _{#1}}{q^{#4} _{#1}(#3|#2)}}
\newcommandx{\bwp}[4][4=\param]{\ifthenelse{\equal{#3}{}}{p^{#4} _{#1}}{p^{#4} _{#1}(#3|#2)}}
\newcommand{\hpotn}[2]{\ifthenelse{\equal{#2}{}}{\hat{g}^\param _{#1}}{\hat{g}^\param _{#1}(#2)}}
\newcommand{\potn}[2]{\ifthenelse{\equal{#2}{}}{g_{#1}}{g_{#1}(#2)}}
\newcommandx{\pibw}[4][4=]{\ifthenelse{\equal{#3}{}}{\smash{\postet}^{#4} _{#1}}{\smash{\postet}^{#4} _{#1}(#3|#2)}}
\newcommandx{\fwtrans}[4][4=]{\ifthenelse{\equal{#2}{}}{q_{#1}}{q _{#1}(#3|#2)}}
% \newcommandx{\augpibw}{\smash{\postet}}
\newcommandx{\mgibbs}[4][4=]{\ifthenelse{\equal{#2}{}}{\tilde{\pi}_{#1}}{\tilde{\pi} _{#1}(#3|#2)}}

% \newcommandx{\vmu}[1][1=]{\hat\mu^{#1}}
% \newcommandx{\vstd}[1][1=]{\hat\sigma^{#1}}
% \newcommandx{\vlstd}[1][1=]{\hat\rho^{#1}}
% \def\vX{\hat{X}}
\def\vparam{{\bm\varphi}}
\def\vmu{{\bm\mu}}
\def\vlstd{{\bm\rho}}

% \def\encoder{\mathcal{E}}
% \def\decoder{\mathcal{D}}
% \def\tmidfn{\ell}
% \newcommand{\tmid}[1]{{\tmidfn_{#1}}}
% \def\ngrad{M}

\newcommand{\move}[1]{\textcolor{purple}{#1}}
\def\bx{\mathbf{x}}
\def\bX{X}
\def\bwX{\stackrel{\leftarrow}{X}}
\def\bXy{\bar{X}}
\def\bZy{\bar{Z}}
\def\vX{\hat{X}}
\def\bY{Y}
\def\bz{\mathbf{z}}
\def\bZ{Z}
\def\beps{\boldsymbol{\epsilon}}
\def\meanBridge{\boldsymbol{m}}

% %%%%%%
% %% collaborators

% \newcommand{\sylvain}[1]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue]{\small{\textbf{S} :#1}}}
% %\newcommand{\jimmy}[1]{\todo[linecolor=magenta,backgroundcolor=magenta!25,bordercolor=magenta]{\tiny{\textbf{JO} : \ #1}}}
\newcommand{\yazid}[1]{\textcolor{darkspringgreen}{\textbf{YJ}: #1}}
\newcommand{\eric}[1]{\textcolor{crimson}{\textbf{E}: #1}}
\newcommand{\jimmy}[1]{\textcolor{magenta}{\textbf{J}: #1}}
\newcommand{\badr}[1]{\textcolor{red}{\textbf{B}: #1}}

\newcommand{\first}[1]{\colorbox{deepcarrotorange!80}{#1}}
\newcommand{\second}[1]{\colorbox{deepcarrotorange!40}{#1}}
\newcommand{\third}[1]{\colorbox{deepcarrotorange!15}{#1}}
% \newcommand{\randal}[1]{\textcolor{orange}{\textbf{B}: #1}}
% \newcommand{\alain}[1]{\textcolor{cyan}{\textbf{A}: #1}}
% \newcommand{\yohan}[1]{\todo[linecolor=purple,backgroundcolor=purple!25,bordercolor=purple]{\small{\textbf{YP}: #1}}}
% \newcommand{\julien}[1]{\todo[linecolor=purple,backgroundcolor=purple!25,bordercolor=purple]{\small{\textbf{J}: #1}}}


% %%%%%%
% %% others
% \newcommand{\tcr}[1]{\textcolor{red}{#1}}
% \newcommand{\mean}[1]{m_{#1}}

% --- paper notation
\def\midpoint{{\tau}}
\def\initpoint{{0}}
\def\gibbsReps{{R}}

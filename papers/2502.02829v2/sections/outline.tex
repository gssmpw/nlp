%!TEX root = ../main.tex

\section{Outline}
\label{sec:outline}

\begin{enumerate}
    \item Introduction and Related work: 
    \begin{enumerate}
        \item Introduce contact-rich problems in robotics: hard and important 
        \item General problem formulation: $\lambda$ can be contact modes or contact forces in MPCC 
        \item Four lines of previous researches:
        \begin{enumerate}
            \item Fixed-mode sequence: hybrid-MPC 
            \item Mixed-integer programming (QP, nonconvex)
            \item Contact implicit: MPCC 
            \item GCS: an extension of mixed-integer convex programming (e.g. MI-SDP)
        \end{enumerate}
        \item Ours:
        \begin{enumerate}
            \item Formulate contact-rich problems as a general polynomial optimization (POP): stronger modelling capacity
            \item Explore various level of sparsity inside the Moment-SOS Hierarchy: (1) From "variable" to "term": CS and TS; (2) From "manually-find" to "automatically-generate": MF and MD; (3) Robotics-specific sparsity: Markov, mechanics, geometry... 
            \item Result: more general, faster, tighter 
            \item Others (can be omitted): iterative tightening, robust minimizer extraction, beyond TSSOS (ts_eq_mode) ... 
        \end{enumerate}
    \end{enumerate}

    \item Multi-level sparsity pattern: CS-TS (Core)
    \begin{enumerate}
        \item A reminder: STROM: only CS, handled by hand
        \item Toy example: double integrator with soft wall
        \item Level 1: Automatic CS pattern generation: MAX, MF, MD
        \begin{enumerate}
            \item Able to find undiscovered CS pattern in STROM
        \end{enumerate}
        \item Level 2: Automatic TS pattern generation: MAX, MF, MD 
        \begin{enumerate}
            \item Able to separate entangled contact modes 
        \end{enumerate}
    \end{enumerate}

    \item Robotics-specific sparsity pattern 
    \begin{enumerate}
        \item Observation 1: for complex robotics problems, automatic pattern generation fails to detect underlying Markov structure in OCP 
        \item Observation 2: for multi-body control problems, variables in each time-step naturally groups in each body 
        \item Observation 3: variables for kinematics, dynamics, contact, geometric collision naturally form different cliques 
        \item Based on the automatic generated patterns, we further refine the CS-TS cliques, even when the resulting graph fails RIP
        \item Result: faster, tighter 
    \end{enumerate}

    \item Experiments 
    \begin{enumerate}
        \item Simulation: 
        \begin{enumerate}
            \item Push Bot 
            \item Push Box 
            \item Push T 
            \item Push Box with obstacles: one, two, many obstacles 
            \item Planar Hand 
        \end{enumerate}
        \item Real-world: push T 
        \item Simulation metrics:
        \begin{enumerate}
            \item Conversion speed compared to TSSOS: one table. (1) column: (CS, TS) = (MF, MAX), (MF, MF), (MF, MD) ... (2) row: Problem class (only need to test one example with long time horizon in each problem class)
            \item For each problem class, run 10 random initial states, collect the following statistics: (1) Mosek solving time; (2) max KKT residual; (3) Local solver success rate; (4) suboptimal gap among the success ones.
            \item For each problem class, illustrate one simulation result.
        \end{enumerate}
        \item Real-world metrics: success rate 
    \end{enumerate}
\end{enumerate}

\section{Toy example: double integrator with soft wall}

Denote system's state as $(x, v)$, control input as $u$, two wall's force as $(\lam{1}, \lam{2})$, the dynamics is:
\begin{align}
    & \x[k+1] - \x[k] = \dt \cdot v_k \\
    & v_{k+1} - v_k = \frac{\dt}{m} \cdot (u_k + \lam{1}[k] - \lam{2}[k]) \\
    & u_{\max}^2 - u_k^2 \ge 0 \\
    & \lam{1}[k] \ge 0 \\
    & \frac{\lam{1}[k] }{k_1} + d_1 + \x[k] = 0 \\
    & \lam{1}[k] \left( \frac{\lam{1}[k] }{k_1} + d_1 + \x[k] \right) \ge 0 \\
    & \lam{2}[k] \ge 0 \\
    & \frac{\lam{2}[k] }{k_2} + d_2 - \x[k] = 0 \\
    & \lam{2}[k] \left( \frac{\lam{2}[k] }{k_2} + d_2 - \x[k] \right) \ge 0
\end{align} 
where $\dt$, $k_1$, $k_2$, $d_1$, $d_2$ all constants -- we can set them as $1$ here, since we don't actually solve the problem. Objective:
\begin{align}
    \sum_{k=0}^{N-1} u_k^2 
\end{align}
For this example, $N = 3$ or $4$ is enough.

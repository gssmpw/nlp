\subsection{Evaluating \textrm{Precise 1} formulation}

First, we evaluate \textrm{Precise 1} formulation, which combines precise cost function and cost-dependent validity constraints. Fig.~\ref{fig:poly_solver_precise_1} shows the results of optimizing join order selection using the D-Wave's exact poly solver. Following the bounds given by Theorem \ref{thm:dp_bound}, the HUBO model consistently generates a plan that matches the quality of the plan produced by the dynamic programming algorithm without the cross products. We also see that the returned plans are only at most $0.7\%$ bigger than the optimal plan from dynamic programming with the cross products. We have excluded some results where the HUBO model produced the exact optimal plan: Clique-3, Cycle-3, Star-4, and Star-5.

\begin{figure*}[tbh]
    \centering
    \includegraphics[width=\textwidth]{results/precise_1_exact_poly_solver.png}
    \caption{Precise 1 results using the D-Wave's exact poly solver}
    \label{fig:poly_solver_precise_1}
    \Description[Other results]{}
\end{figure*}

% Graph Graph with 3 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: clique
% Graph Graph with 3 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: cycle
% Graph Graph with 4 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0000000000000002, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0000000000000002}
% graph type: star
% Graph Graph with 5 nodes and 4 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0000040588404762, 'Graph-DP': 1.000004058840476, 'Graph-Greedy': 1.0000040588404762}
% graph type: star
% Graph Graph with 5 nodes and 4 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: random

Second, we solved the same HUBO formulations using a classical Gurobi solver after the HUBO problem was translated into the equivalent QUBO problem. The results are presented in Fig.~\ref{fig:gurobi_precise_1}. The HUBO to QUBO translation does not decrease the algorithm's quality, and Gurobi finds the correct plans. The results stay very close to the optimal join tree, always being as good as a dynamic programming algorithm without cross products.

\begin{figure*}[tbh]
    \centering
    \includegraphics[width=\textwidth]{results/precise_1_gurobi.png}
    \caption{Precise 1 results using Gurobi solver}
    \label{fig:gurobi_precise_1}
    \Description[Other results]{}
\end{figure*}

% Graph Graph with 3 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: clique
% Graph Graph with 3 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: cycle
% Graph Graph with 4 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0000000000000002, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0000000000000002}
% graph type: star
% Graph Graph with 5 nodes and 4 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0000040588404762, 'Graph-DP': 1.000004058840476, 'Graph-Greedy': 1.0000040588404762}
% graph type: star
% Graph Graph with 4 nodes and 5 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: random

Third, we solved the same problems using D-wave's Leap Hybrid solver, a quantum-classical optimization platform in the cloud. In this case, the results are consistently as good as those from the dynamic program algorithm without the cross products, with some exceptions due to the heuristic nature of the quantum computer: Cycle-6, Chain-7, and Tree-6.

\begin{figure*}[tbh]
    \centering
    \includegraphics[width=\textwidth]{results/precise_1_dwave_LeapHybridSampler.png}
    \caption{Precise 1 results using D-Wave's Leap Hybrid solver}
    \label{fig:leap_precise_1}
    \Description[Other results]{}
\end{figure*}

% Graph Graph with 3 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: clique
% Graph Graph with 3 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0}
% graph type: cycle
% Graph Graph with 4 nodes and 3 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0000000000000002, 'Graph-DP': 1.0, 'Graph-Greedy': 1.0000000000000002}
% graph type: star
% Graph Graph with 5 nodes and 4 edges is not included in the chart.
% costvalues: {'HUBO model': 1.0000177876393395, 'Graph-DP': 1.000004058840476, 'Graph-Greedy': 1.0000040588404762}
% graph type: star

Finally, Fig.~\ref{fig:dwave_precise_1} shows the results from D-Wave's quantum annealer, which does not utilize hybrid features to increase solution quality. This resulted in performance that did not match the performance of the previous solvers, and this performance decrease was already identified in \cite{Schonberger_Scherzinger_Mauerer}. While quality was not as good as the previous solutions, the valid plans were still usable, mainly only a few percent from the global optimal. %Noise on the machine decreased the quality, and we could not embed many previous problems in the hardware. 

\begin{figure*}[tbh]
    \centering
    \includegraphics[width=\textwidth]{results/precise_1_dwave_DWaveSampler.png}
    \caption{Precise 1 results using D-Wave's standard solver}
    \label{fig:dwave_precise_1}
    \Description[Other results]{Everything is included in these results}
\end{figure*}
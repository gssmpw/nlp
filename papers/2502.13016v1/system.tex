%!TEX root=main.tex

\begin{figure}
    \centering
    \includegraphics[width=0.8\textwidth]{figures/docetl_cropped1.png}
    \caption{A potential interface for the data system. The user provides a task to be performed on a set of documents, here a collection of legal documents.}
    \label{fig:docetl}
\end{figure}

\begin{figure*}[t!]
\centering
\begin{minipage}{0.55\textwidth}
    \centering
    \includegraphics[width=\textwidth]{figures/proactive.pdf}
    \vspace{-15pt}
    \caption{A Proactive Data System (red = LLM-powered)}
    \label{fig:proactive}
\end{minipage}
\begin{minipage}{0.4\textwidth}
    \centering
    \includegraphics[width=0.7\textwidth]{figures/reactive.pdf}
    \vspace{-10pt}
    \caption{A Reactive Data System}
    \label{fig:reactive}
\end{minipage}
\vspace{-10pt}
\end{figure*}

\section{Typical User Workflows with Proactive Data Systems}

A proactive data system
understands, at a deeper semantic level, 
user intent,
the specific operations it performs,
and the data it performs operations on.
Typical user workflows with 
such a system are similar to
traditional database systems,
where the user
first provides (or ingests)
the data, potentially
alongside additional descriptive
information about its content or schema,
and then proceeds
to execute queries on this data.
We describe this workflow in more detail next,
while acknowledging that
a range of design choices may all
be appropriate,
depending on the use cases. 

\topic{Data Definition} 
The user first ingests
or registers their data (e.g.,
a PDF document collection of incident reports, police officer employment CSVs,
as well as audio/video of incidents 
in the police misconduct case),
along with metadata if any.
Unlike traditional database systems,
this metadata is optional,
and the system
is free to proactively understand the 
structure and semantics of the data.
That said, any 
user-provided specification or description
can help improve
accuracy and better specialize the
system for specific use-cases
of interest.
In Example~\ref{ex:police}, 
such a specification can be similar to 
the first paragraph of Example~\ref{ex:police} as plain text, 
or could include definitions about technical terms or
additional background providing domain knowledge,
e.g., defining police misconduct. 
We note that such information is often needed to allow 
users to query the data meaningfully 
even in relational databases
when using text-to-SQL~\cite{li2024can}. 
We also envision that
in certain use-cases, the users
may proactively identify the entities
of interest for downstream querying,
even if they don't register
the attributes they may care about in the future.
For example, in the police misconduct setting,
the users may want to indicate
that they intend to analyze information
about incidents, police officers,
and agencies.
Armed with all of this information, 
the system
can proactively add indexes,
reorganize the data, 
and extract
certain fields,
among other such offline actions,
as we will describe in Section~\ref{sec:data}.

\topic{Task Specification}
Users are then free
to issue queries or tasks on the data,
which can be specified
in natural language,
or a combination of natural language prompts
associated with data processing operators,
as shown in Figure~\ref{fig:docetl}
for a map operation on a collection of contracts,
with a prompt
extracting a number of legal clauses,
within DocWrangler, our IDE for DocETL~\cite{shankar2024docetl}.
If the user instead chose to preregister
a schema during the data definition
stage, they are free
to extend it with additional
LLM-populated attributes
and issue SQL queries
based on these lazily populated attributes,
as we do in ZenDB~\cite{lin2024towards}.

\topic{Task Execution} 
The system then performs the task on the underlying data.
Rather than performing the task
as is on predefined data monoliths,
a proactive data system
will try to understand
the task and the data,
performing reformulations
of this task by decomposing 
the corresponding operators,
as well as the data,
all in an effort to maximize
accuracy and minimize cost.
For example, the system can decompose 
the user-provided task 
into smaller easier-to-do operations, 
and can leverage the semantics of the document(s) 
to intelligently focus the LLM's attention on 
relevant portions. 


\smallskip
\noindent In Section~\ref{sec:op} 
we discuss various ways for a proactive 
data system to understand 
user-defined operations and reformulate them, 
and we extend the discussion in Section~\ref{sec:data} 
on how the system can similarly understand the data 
and perform data transformations to improve accuracy. 
In Section~\ref{sec:intent}, we discuss how 
the data system can ensure the task 
was performed as the user intended.   
When it comes to unstructured data, we
focus our attention mostly on documents
for concreteness,
though our general approach may be applicable
to a variety of formats.

\smallskip
\noindent
To further differentiate a proactive data system 
from a reactive one, Figs.~\ref{fig:proactive} 
and \ref{fig:reactive} provide a high-level overview 
of different components in these systems. 
While a reactive data system considers tasks and data as is, 
and performs operations on the components as instructed, 
a proactive data system leverages LLMs to understand 
user intent, 
the operations it performs, as well as 
the data to ensure maximal accuracy at minimum cost.   



% A proactive data system understands the user's intent, the specific operations it performs and the data it performs the operations on. The user interactions with the system is similar to the traditional database systems, where the user first provides the data, potentially with additional descriptions about its content,  and then proceeds to execute tasks on the data. We describe this workflow in more details.

% \textbf{Data Definition}. The user first inputs their data, potentially with any additional specifications describing their data. This step is akin to traditional data management systems where the user needs first define a schema before inserting their data. In a proactive data system, the user does not need to provide a specification of the data ---the system itself can proactively understand the data---, but any additional description can help improve accuracy and better specialize the system for the specific use-cases of the user. Such specifications can be in terms of the content of the data. For example, in Example~\ref{ex:police}, such specification can be similar to providing a description similar to what is stated in Example~\ref{ex:police} as plain text), or providing definitions about technical terms in the data that require domain knowledge (for examplem defining what police misconduct means). We note that such information is often needed to allow users to query the data meaningfully even in relational database \cite{li2024can}. Beside data description, the user can provide the data, in typical data formats, e.g., CSV or json files, or as a relational database.  

% \textbf{Task Definition}. The user can then move on to performing tasks on the data. This can be done using a natural language interface, such as the one shown in Fig.~\ref{fig:docetl}, where the user provides a prompt to be executed on the dataset. The user can alternatively define a desired schema and perform SQL queries on it (e.g., as done in \cite{lin2024towards}), but differing information extraction from the data based on the schema to the data system.  

% \textbf{Execution}. The system then performs the task on the data. A proactive data system, rather than performing the task as is on predefined data monoliths, tries to understand the task and the data, performing reformulations of the task and the data to maximize accuracy and minimize cost. For example, the system can decompose the user-provided task into easier-to-do subtasks, and can utilize the semantics of the document to intelligently route the task to relevant portions. In Sec.~\ref{sec:op} we discuss various means for a proactive data system to understand user-defined operations and reformulate them, and we extend the discussion in Sec.~\ref{sec:data} on how the system can similarly understand the data and perform data transformations to improve accuracy. Moreover, in Sec.~\ref{sec:intent}, we discuss how the data system can ensure the task was performed as the user intended.   

% To further differentiate a proactive data system from a reactive data system, Figs.~\ref{fig:proactive} provides a high-level over view of different components in the systems. While a reactive data system considers tasks and data as is, and performs operations on the components as instructed, a reactive data system understand user intents, the operations it performs as well as the data to ensure maximal accuracy at minimum const.   





%In such a system, the user provides a task as the input in natural language, describing a query (e.g., find police reports describing instances of police misconduct) or, more broadly, a data transformation (e.g., summarize police reports for a certain case). The system then tries to understand the specific user intent behind the task, and translates the given task into specific operations (potentially LLM operations) to be performed on the data. The system unboxes the given operations and the data, deciding how to parse the operations and the data into digestible units best suited to maximizing accuracy and minimizing cost. This can mean transformations on the data to identify and extract relationships between semantic units, or to create new data representations such as summaries, indexes and tables; and transformation on the operations to rewrite and decompose them into new operations that can be better executed using LLMs.  

%The three components of the system are then (1) understanding user intent and translating it into specific operations to be executed on the data (2) understanding operations and reformulating them to maximize accuracy and (3) understanding the data and performing data transformations to aid query answering. The remainder of this paper discusses operation understanding and reformulation in Sec.~\ref{sec:op}, data understanding and transformations in Sec.~\ref{sec:data} and understanding user intent in Sec.~\ref{sec:intent}.




\if 0
\agp{This needs to be more like a high-level architecture
section, or can be folded into introduction}

\sep{Probably neeed more discussion of the application domain of the system here}
A proactive data system understands the task it's given, the dataset it's performing and the intent of the user. Such a system semantically parses the tasks and the data it's provided, and maps them to internal representations it deems best suited for performing the tasks. Such mappings can include rewrites and decomposition of the task or the data. It furthermore interacts with the user to ensure correctness of the result, based on which it can update internal representations it has chosen. 


\sep{WE LIKELY WANT TO RENAME/resturcture SECTIONS}
\fi



\if 0
\sep{Suggestion Structure:}
Each subsection is centered around tools we have to improve performance, either by understanding the task, the data or the user better

2. 1. Proactive Task Understanding 
2.1.1. Breaking down complex tasks (creating multiple tasks from a task)
2.1.2. Semantic Parsing (creating a semantic representation of the task to better map to the data)
2.1.3. Task Reformulation (rewriting a new task that the LLM performs better, can be prompt optimization)
2.1.4. Other Potential Directions

2. 2. Proactive Data Understanding 
2.2.1. Breaking down complex data (decomposing into sections, chunking)
2.2.2. Semantic Parsing (creating a semantic representation of the data to better map to the tasks)
2.2.3. Data Reformulation (rewriting a data into a new form, e.g., templatized extraction)
2.2.4. Other Potential Directions

2. 3. Proactive User Understanding 
2. 3. 1. Different interfaces to understand user 
2. 3. 2. How to utilize user feedback within the system (i.e., how it changes the above two sections) 
\fi


\input{subsections/system_task_processing}


\input{subsections/data_processing}

\input{subsections/intent}
